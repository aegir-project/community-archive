<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  
<!-- Mirrored from community.aegirproject.org/discuss/how-get-fresh-re-installed-aegir-recognize-import-existing-sites-and-platforms-under-previou by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 19:57:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="canonical" href="index.html" />
<link rel="shortcut icon" href="../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
    <link type="text/css" rel="stylesheet" media="all" href="../../profiles/openatrium/modules/contrib/codefilter/codefilter/index.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/community.aegirproject.org/files/css/css_b8ca3ff360daa12eff502993554e60d0/index.css" />
<link type="text/css" rel="stylesheet" media="screen" href="../../sites/community.aegirproject.org/files/css/css_c151a4313ed94e62ccee94ea27ad58ed/index.css" />
<link type="text/css" rel="stylesheet" media="print" href="../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<style type='text/css'>
.atrium-welcome-links a:hover,
.dropdown-blocks .block-toggle li a:hover,
.dropdown-blocks .block-toggle li a:focus,
.dropdown-blocks .block-toggle ul.links li a:hover,
.dropdown-blocks .block-toggle ul.links li a:focus,
.dropdown-blocks .block-toggle .item-list li a:hover,
.dropdown-blocks .block-toggle .item-list li a:focus,
.pager li.pager-current,
.more-link a:hover,
#global,
#navigation { background-color:#143352; }

body #space-tools .block-title { background-color:#0e2339; }

body #header .block-widget .block-content,
body #header .block .block-title { background-color:#112b45; }

body .page-region .block .block-title {
  background-color:#c2c8ce;
  border-color:#b4bbc1;
  border-bottom-color:#a7adb3;
  }

.drilldown .trail a {
  border-top-color:#f3f4f6;
  border-bottom-color:#d2d4d6;
  background-color:#e3e4e6;
  }

.decay-10 .comment-title { border-color:#eeeeee; }
.decay-9 .comment-title { border-color:#d8dbde; }
.decay-8 .comment-title { border-color:#c2c8ce; }
.decay-7 .comment-title { border-color:#acb5bf; }
.decay-6 .comment-title { border-color:#96a3af; }
.decay-5 .comment-title { border-color:#8190a0; }
.decay-4 .comment-title { border-color:#6b7d90; }
.decay-3 .comment-title { border-color:#556b80; }
.decay-2 .comment-title { border-color:#3f5871; }
.decay-1 .comment-title { border-color:#294561; }
.decay-0 .comment-title { border-color:#143352; }
</style>
    <script type="text/javascript" src="../../sites/community.aegirproject.org/files/js/js_dddbfcfef882b2074d904e22eb494d08/index.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/"});
//--><!]]>
</script>
    <!--[if lte IE 8]><style type='text/css' media='screen'>@import '/profiles/openatrium/themes/ginkgo/ie.css';</style><![endif]-->    <title>How to get fresh re-installed Aegir to recognize (import?) existing sites and platforms under previous working aegir install | community.aegirproject.org</title>
  </head>
  <body  class="not-front not-logged-in page-node node-type-discussion one-sidebar sidebar-right designkit tao rubik admin-static page">

  <div style='padding:10px;line-height:30px;background-color:red;font-size:200%;color:white;'>This site is a static archive of the Aegir community site. Documentation has moved to <a style='text-decoration:underline;color:white' href='http://aegir.readthedocs.org'>http://aegir.readthedocs.org</a>. Other community resources can be found on the <a style='text-decoration:underline;color:white' href='http://aegir.readthedocs.org/en/3.x/help/contact/'>Contacting the community</a> page.</div><a id='skipnav' href='#content'>Skip navigation</a>
  <div id='global'><div class='limiter clear-block'>
          <div id='header' class='dropdown-blocks toggle-blocks clear-block'>
          

<div  id="block-atrium-account" class="block block-atrium block-widget block-notitle">
  
  
      <div class='block-content clear-block '>
          </div>
  
  </div>


  

<div  id="block-boxes-search_issues" class="block block-boxes block-toggle">
      <div class='block-title'>
            <a href="index.html#block-boxes-search_issues" class="toggle element-invisible active">Toggle</a>LOOKING FOR HELP?    </div>
  
  
      <div class='block-content clear-block '>
      <div id='boxes-box-search_issues' class='boxes-box'><div class="boxes-box-content"><table class="prose">
<tr>
<td width="50%">
<span style="font-size:16px;width:100%">Type some keywords below and hit "enter":</span><br />
<input type="text" class="drupal-issue-redirect" style="width:100%;min-width:200px;background-color:#DDEEFF; font-size:30px;border-style:dotted;border-width:1px" />
<p>This will search the drupal.org issue queues across the various projects that make up the Aegir system. If there are no relevant results, please submit an issue there.</p></td>
<td style="padding:10px">Other support resources:
<ul>
<li><a href="irc://irc.freenode.net/aegir">#aegir on IRC</a></li>
<li><a href="../../faq/index.html">FAQ</a></li>
<li><a href="../../handbook/index.html">Aegir Handbook</a></li>
<li><a href="../../service-providers/index.html">Aegir service providers</a></li>
<li><a href="https://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir),Hosting+Platform+Pathauto&amp;status=Open&amp;priorities=All&amp;categories=All">All Aegir issues</a></li>
<li><a href="http://drupal.stackexchange.com/questions/tagged/aegir">Aegir tag on Drupal Stackexchange</a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
$("input.drupal-issue-redirect").change(function() {
  searchURL= "http://drupal.org/project/issues?text="+$(this).val()+"&projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir),Hosting+Platform+Pathauto&status=Open&priorities=All&categories=All";
  window.location = searchURL;
});
</script></div></div>    </div>
  
  </div>


      </div>
        <div class='breadcrumb'><span class='link link-0'><a href="../../index.html">Home</a></span></div>    <a href="../../index.html" class="logo" style="background-position:100% 50%; background-image:url(../%27http_/community.aegirproject.org/sites/community.aegirproject.org/files/imagecache/designkit-image-logo/logo/index.html)"></a>  </div></div>

    <div id='navigation'><div class='limiter clear-block'>
    <ul id="features-menu" class="links primary-links"><li class="menu-617 first"><a href="../../dashboard/index.html" class=" icon-dashboard"><span class='icon'></span><span class='label'>Dashboard</span></a></li>
<li class="menu-618"><a href="../../handbook/index.html" class=" icon-handbook"><span class='icon'></span><span class='label'>Documentation</span></a></li>
<li class="menu-2427 active"><a href="../../discussion/index.html" class="active icon-discussion"><span class='icon'></span><span class='label'>Discussion</span></a></li>
<li class="menu-2426"><a href="../../calendar/index.html" class="spaces-menu-editable icon-calendar"><span class='icon'></span><span class='label'>Calendar</span></a></li>
<li class="menu-823"><a href="../../reader/index.html" class=" icon-reader"><span class='icon'></span><span class='label'>Feed reader</span></a></li>
<li class="menu-2429 last"><a href="../../members/index.html" class=" icon-members"><span class='icon'></span><span class='label'>Members</span></a></li>
</ul>          <div id='space-tools'><div class='dropdown-blocks toggle-blocks clear-block'>  

<div  id="block-atrium-search" class="block block-atrium block-toggle">
      <div class='block-title'>
            </div>
  
  
      <div class='block-content clear-block '>
      <form action="http://community.aegirproject.org/discuss/how-get-fresh-re-installed-aegir-recognize-import-existing-sites-and-platforms-under-previou"  accept-charset="UTF-8" method="post" id="atrium-search-form">
<div><div  class="form-item form-item-labeled" id="edit-search-wrapper">
      <label  for="edit-search">Search: <span class='form-required' title='This field is required.'>*</span></label>
    <input type="text" maxlength="128" name="search" id="edit-search" value="" class="form-text required fluid" />  </div>
<input type="submit" name="op" id="edit-submit" value="Search"  class="form-submit" />
<input type="hidden" name="form_build_id" id="form-_QLgjk0fiqHXAL8RfAaKTg7Os-FtHKNkNkcYyPRxBhk" value="form-_QLgjk0fiqHXAL8RfAaKTg7Os-FtHKNkNkcYyPRxBhk"  />
<input type="hidden" name="form_id" id="edit-atrium-search-form" value="atrium_search_form"  />

</div></form>
    </div>
  
  </div>


</div></div>
      </div></div>
  
  <div id='page-tools'><div class='limiter clear-block'>
    <h1  class="page-title page-title-hidden">How to get fresh re-installed Aegir to recognize (import?) existing sites and platforms under previous working aegir install</h1>        <a href="index.html#block-atrium-help" id="help-toggler" class="palette-toggle active">Help</a>          </div></div>

  
  
  <div id='page'><div class='limiter clear-block'>
    
<div id='content'><div class='page-region'>
      <div class='page-content content-wrapper clear-block'>

<div  id="node-1523" class="node node-discussion clear-block node-page">
      <div class='node-submitted clear-block'>
      <div class="picture">
  <a href="../../users/webmaster-eddie/index.html" title="View user profile."><img src="../../sites/community.aegirproject.org/files/imagecache/user-s/pictures/picture-832/index.jpg" alt="webmaster-eddie&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../users/webmaster-eddie/index.html" class="username" title="View user profile.">webmaster-eddie</a></div><div class='date'>6:04am May 28, 2012</div>    </div>
  
      <h2 class='node-title'>
            <a href="index.html">How to get fresh re-installed Aegir to recognize (import?) existing sites and platforms under previous working aegir install</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_124 first"><a href="../../category/keywords/aegir-re-install/index.html" rel="tag" title="">aegir re-install</a></li>
<li class="taxonomy_term_125"><a href="../../category/keywords/existing-sites/index.html" rel="tag" title="">existing sites</a></li>
<li class="taxonomy_term_127"><a href="../../category/keywords/import/index.html" rel="tag" title="">import</a></li>
<li class="taxonomy_term_129"><a href="../../category/keywords/pre-existing-platforms/index.html" rel="tag" title="">pre-existing platforms</a></li>
<li class="taxonomy_term_128"><a href="../../category/keywords/pre-existing-sites/index.html" rel="tag" title="">pre-existing sites</a></li>
<li class="taxonomy_term_126 last"><a href="../../category/keywords/recognize/index.html" rel="tag" title="">recognize</a></li>
</ul></div><p>I had a working system of aegir 1.9 with existing verified sites and platforms. I had to completely re-install the aegir system, and I cannot seem to get it to import or recognize pre-existing platforms and sites. I staill have all the databases w&lt;ith their data and all the files and modules in place for all the pre-existing sites and platforms.</p>

<p>I had a problem with memcached when first attempting this, so I purged memcached. Now the servers and newly created platforms and newly-created sites verify, but I cannot run drush up on the newly created sites successfully - that is, it will not update modules, stating that it cannot move a file, or a directory is not writable.  IS there a specific permission problem that needs to be taken care of when attempting this? Is this supported - the import so to speak of pre-existing platforms and sites on a fresh aegir re-install?</p>

<p>What I've done to try to solve the problem:
- I have chown aegir:aegir just about everything, in /var/aegir/ 
- I have : 
Defaults   envreset
Defaults:aegir !requiretty</p>

<p>root ALL=(ALL) ALL
%sudo ALL=(ALL) ALL
root ALL=(aegir) NOPASSWD: ALL
aegir ALL=NOPASSWD: /usr/sbin/apache2ctl 
in the /etc/sudoers file in that order (is that overkill? any problem there?)</p>

<p>A possible error is when I run, as the aegir user "sudo /usr/sbin/apache2ctl graceful" , it appears as if apache2 is restarting, but there is no green OK afterwards (and there is when I restart apche2 as root user /etc/init.d/apache2 restart) and also, I have checked and seen that the PID of apache2 does not change when I run the "sudo /usr/sbin/apache2ctl graceful" command as the aegir user. (It does when I restart apache2 as root ) Does this mean that aegir is not actually restarting apache2? I receive no error messages at all.</p>

<p>I am running debian squeeze and aegir 1.9. I also have PHP 5.4 installed (not sure if I can downgrade to PHP 5.3, and all this was working fine BEFORE i mistakenly upgraded drush to 5.) I have the proper drush 4.5 installed and no caching now. Drush command cc all, updb work fine on newly created sites, and all drush commands work on the hosmaste site. drush up and upc do not work on newly created verified sites - in which I used the same platform name as the pre-existing platform - thinking that I had to for aegir to recognize the pre-existing sites in the pre-existing platform. (Is this the correct way, or is this an error?)</p>

<p>Lastly, when I tru to use drush make to install a new platform, it does not work, I receive an error at the very end (after it downloaded everything):
PHP Fatal Error: Call to a member function (make) on a non object in /usr/share/drush/commands/drush.make/drush_make.drush.inc on line 223.
I assume this is due to an incompatibility with PHP 5.4 (please correct me if I am wrong) - however this is NOT my major problem right now - I need to get aegir to recognize pre-existing platforms and sites, and for the drush upc and up command to work in newly created sites. (All this worked with PHP 5.4 before the aegir re-install.)</p>

<p>I appreciate any advice here. Thank you.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../user/login/index-472.html?destination=node%2F1523%23comment-form">Login</a> or <a href="../../user/register/index-472.html?destination=node%2F1523%23comment-form">register</a> to post comments</span></li>
<li class="print last active"><a href="index-2.html?print" class="active">Print</a></li>
</ul></div>
  </div>


</div>
    </div></div>
<div id='right'><div class='page-region'>
    

<div  id="block-boxes-search_issues" class="block block-boxes">
      <div class='block-title'>
            LOOKING FOR HELP?    </div>
  
  
      <div class='block-content clear-block '>
      <div id='boxes-box-search_issues' class='boxes-box'><div class="boxes-box-content"><table class="prose">
<tr>
<td width="50%">
<span style="font-size:16px;width:100%">Type some keywords below and hit "enter":</span><br />
<input type="text" class="drupal-issue-redirect" style="width:100%;min-width:200px;background-color:#DDEEFF; font-size:30px;border-style:dotted;border-width:1px" />
<p>This will search the drupal.org issue queues across the various projects that make up the Aegir system. If there are no relevant results, please submit an issue there.</p></td>
<td style="padding:10px">Other support resources:
<ul>
<li><a href="irc://irc.freenode.net/aegir">#aegir on IRC</a></li>
<li><a href="../../faq/index.html">FAQ</a></li>
<li><a href="../../handbook/index.html">Aegir Handbook</a></li>
<li><a href="../../service-providers/index.html">Aegir service providers</a></li>
<li><a href="https://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir),Hosting+Platform+Pathauto&amp;status=Open&amp;priorities=All&amp;categories=All">All Aegir issues</a></li>
<li><a href="http://drupal.stackexchange.com/questions/tagged/aegir">Aegir tag on Drupal Stackexchange</a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
$("input.drupal-issue-redirect").change(function() {
  searchURL= "http://drupal.org/project/issues?text="+$(this).val()+"&projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir),Hosting+Platform+Pathauto&status=Open&priorities=All&categories=All";
  window.location = searchURL;
});
</script></div></div>    </div>
  
  </div>


  

<div  id="block-views-discussion_comments-block_1" class="block block-views">
      <div class='block-title'>
            Recent comments    </div>
  
  
      <div class='block-content clear-block '>
      <div class="view view-discussion-comments view-id-discussion_comments view-display-id-block_1 view-dom-id-1">
    
  
  
      <div class="view-empty">
      <p>No recent comments found.</p>    </div>
  
  
  
  
  
  
</div>     </div>
  
  </div>


</div></div>

  </div></div>

    <div id="footer"><div class='limiter clear-block'>
        <ul class="links"><li class="atrium first last"><a href="http://www.openatrium.com/" target="_blank">OpenAtrium.com</a></li>
</ul>  </div></div>
  
  <div id='palette'>  

<div  id="block-atrium-help" class="block block-atrium">
      <div class='block-title'>
            <span class='close'></span>Need help?    </div>
  
  
      <div class='block-content clear-block '>
      

<div  id="help-text" class="path-admin-help clear-block toggleable">
  
    
  
  
  
      <div class='help-content clear-block prose'>
      <span class='icon'></span><h3>Discussion</h3><p>The discussion area lets your team communicate by posting updates and discussing issues. It is a great place for sharing progress, discussing challenges, and exploring ideas.</p>
    </div>
  
  </div>


    </div>
  
  </div>


</div>
  
  </body>

<!-- Mirrored from community.aegirproject.org/discuss/how-get-fresh-re-installed-aegir-recognize-import-existing-sites-and-platforms-under-previou by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 19:57:34 GMT -->
</html>
