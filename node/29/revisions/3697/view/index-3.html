<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from community.aegirproject.org/node/29/revisions/3697/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:00:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="prev" href="../../../../341/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../administrator/dns/index.html" />
<link rel="prev" href="../../../../341/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../administrator/dns/index.html" />
<link rel="prev" href="../../../../341/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../administrator/dns/index.html" />
<link rel="canonical" href="index.html" />
<link rel="shortcut icon" href="../../../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="print" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />

  <title>Revision of Using SSL from Tue, 07/31/2012 - 22:04 | community.aegirproject.org</title>
</head>

<body  class="print rubik admin-static page">
  <div class='limiter clear-block'>
    <div id='content' class='clear-block'>
      <div class='print-header'>
      <h1 class='site-name'>community.aegirproject.org</h1>
  </div>
      

<div  id="node-29" class="node node-book clear-block node-page">
  
      <h2 class='node-title'>
            <a href="../../../../../content/content/administrator/post-install-configuration/using-ssl/index.html">Using SSL</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><div id='diff-inline-29'><div class='diff-inline-metadata clear-block'><div class='diff-inline-byline'>Updated by <a href="../../../../../users/mig5/index.html" class="username" title="View user profile.">mig5</a> on 07/31/2012 - 22:04</div><div class='diff-inline-legend clear-block'><label>Legend</label><span class='diff-added'>Added</span><span class='diff-changed'>Changed</span><span class='diff-deleted'>Deleted</span></div></div><h3>Introduction</h3>

<p>SSL support was significantly improved in Aegir 0.4 alpha9 and subsequent releases have further refined the SSL functionality. Here are the current steps to configure SSL support in Aegir and apply it to your web sites.</p>

<h3>Prepare Your Server</h3>

<p><OL>
<LI>Make sure port 443 is open for SSL traffic.
</li><LI>From the command line, install SSL software for your web server (e.g. on Debian/Ubuntu you can use <code>sudo apt-get install openssl</code>).</li>
<LI>Enable SSL support (e.g. <code>sudo a2enmod ssl</code>).  You will need to restart Apache at this point.
</li></ol></p>

<h3>Enable SSL Support in Aegir</h3>

<p><OL>
<LI>You have to enable SSL support in Aegir as it is off by default.  Assuming the URL of your Aegir front end is aegir.example.com, browse to aegir.example.com/admin/hosting/features 
<img src="../../../../../sites/community.aegirproject.org/files/features-page/index.png" alt="how to get to the Aegir features page" />
</li><LI>Click on Experimental to reveal experimental features <img src="../../../../../sites/community.aegirproject.org/files/ssl-support/index.png" alt="experimental features of Aegir" />
</li><LI>Check SSL support
</li><LI>Click Save configuration
</li></ol></p>

<h3>Configure Your Aegir Server</h3>

<p><OL>
<LI>Click on the Servers tab
</li><LI>Click on the server that you wish to enable SSL support
</li><LI>Click Edit to change the server configuration
</li><LI>Click apache_ssl (this will reveal an additional field: SSL port, which should be already populated with 443).  Note: you may also have to add an IP address to the IP addresses field.  <img src="../../../../../sites/community.aegirproject.org/files/enable-ssl-on-server/index.png" alt="enabling SSL on your Aegir server" />
</li><LI>Click Save - this will start various tasks beginning with a verify task on the server followed by verify tasks on all platforms that are associated with that server
</li><LI>If all goes well you will see the following changes in your Aegir <a href="http://groups.drupal.org/node/93849">file system structure</a>:
a) under /var/aegir/config you will see a new directory ssl.d
b) under /var/aegir/config/server_master you will see a similar new directory ssl.d
</li></ol></p>

<h3>Configure Your Aegir Site</h3>

<p><OL>
<LI>You must enable SSL on your sites that are on those platforms associated with the server.  Browse to aegir.example.com/hosting/c/site-1.com
</li><LI>Click Edit to change the site configuration
</li><LI>Choose the type of Encryption required and the Encryption key (see the explanatory notes below each option). <img src="../../../../../sites/community.aegirproject.org/files/site-ssl-configuration_0/index.png" alt="configuring an Aegir site for SSL" /> <em>NOTE:,</em> Alternatively, you may specify a directory under /var/aegir/config/server_master/ssl.d where your own certificate and key is to be stored (see Apache notes below).
</li><LI>Click Save.  Aegir will then generate a certificate and private key for your web site and insert these into a new VirtualHost directive in your vhost file.  (This file is typically at /config/server_master/apache/vhost.d/site-1.com).
</li><LI>If all goes well the VirtualHost directive will now have these important elements:</li></ol></p>

<p><div class="codeblock"><code>&lt;VirtualHost <span class='diff-changed'>xx.xx.xx.xx:443&gt; #</span> &lt;-- where xx.xx.xx.xx is an IP address dedicated for SSL access to your site and 443 is the port number<br />&nbsp;&nbsp;&nbsp; ....<br /><br />&nbsp;&nbsp;&nbsp; # Enable SSL handling.<br />&nbsp;&nbsp;&nbsp; SSLEngine on<br /><br />&nbsp;&nbsp;&nbsp; SSLCertificateFile /var/aegir/config/server_master/ssl.d/site-1.com/openssl.crt<br />&nbsp;&nbsp;&nbsp; SSLCertificateKeyFile /var/aegir/config/server_master/ssl.d/site-1.com/openssl.key</code></div></p>

<p>Now, when you navigate to <a href="https://site-1.com/" title="https://site-1.com">https://site-1.com</a> you should see that your site is SSL enabled.
</p>

<h2>Notes for Apache users with Commercial Certificate File(s)</h2>

<p>If you wish to use your own commercial certificate and key you will need to do the following:</p>

<p><OL>
<LI>Follow the directions above, using the "Generate new encryption key" option and using your site's domain name for the "New encryption key". This will create a site directory under <span class='diff-changed'></span><code><span class='diff-changed'>/var/aegir/config/ssl.d/site-1.com</span></code><span class='diff-changed'>.</span> With this step, you have created a self-signed certificate, and your site is now configured to use <span class='diff-changed'>it.
</span></li><LI><span class='diff-changed'>This generated</span> a <span class='diff-changed'>2048 bit RSA key for you along with</span> a <span class='diff-changed'>CSR (Certificate Signing Request). If you prefer</span> to <span class='diff-changed'>generate your own RSA keys, replace</span> the files <span class='diff-changed'>in</span> the <span class='diff-changed'></span><code><span class='diff-changed'>/var/aegir/config/ssl.d/site-1.com</span></code><span class='diff-changed'> directory with</span> your <span class='diff-changed'>RSA keys.
</span></li><LI>Copy and paste the <span class='diff-added'></span><code>.csr</code><span class='diff-added'></span> file into the form for the issuing <span class='diff-changed'>Certificate 
Authority (CA)</span> to create your certificate.
</li><LI>When your certificate has been generated, download the files from the issuing authority and place in your temporary folder on your PC. <span class='diff-changed'>You may</span> have <span class='diff-changed'>more than</span> one <span class='diff-changed'>.crt files, in this case you have a "bundle" or what we call a "certificate chain" that you need to add in aegir</span> (see below).
</li><LI>Transfer all the files to <span class='diff-changed'>/var/aegir/config/ssl.d/site-1.com.</span> Rename the site .crt <span class='diff-changed'>file</span> to <span class='diff-changed'>openssl.crt. If you have a certificate chain, install it in </span><code><span class='diff-changed'>openssl_chain.crt</span></code><span class='diff-changed'>.</span> You should have <span class='diff-changed'>at least three</span> files in <span class='diff-changed'>the</span> directory <span class='diff-changed'>(</span><code><span class='diff-changed'>openssl.crt</span></code><span class='diff-changed'>, </span><code><span class='diff-changed'>openssl.key</span></code><span class='diff-changed'>, </span><code><span class='diff-changed'>openssl.csr</span></code><span class='diff-changed'>,</span> and <span class='diff-changed'>optionnally </span><code><span class='diff-changed'>openssl_chain.crt</span></code><span class='diff-changed'>).
</span></li></ol></p><span class='diff-deleted'>

</span><p><span class='diff-deleted'></span><em><span class='diff-deleted'></span><strong><span class='diff-deleted'>IMPORTANT:</span><span class='diff-deleted'> </span><span class='diff-deleted'>Do</span><span class='diff-deleted'> </span><span class='diff-deleted'>not</span><span class='diff-deleted'> </span><span class='diff-deleted'>verify</span><span class='diff-deleted'> </span><span class='diff-deleted'>your</span><span class='diff-deleted'> </span><span class='diff-deleted'>site</span><span class='diff-deleted'> </span><span class='diff-deleted'>until</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>complete</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>next</span><span class='diff-deleted'> </span><span class='diff-deleted'>step!</span></strong><span class='diff-deleted'></span></em><span class='diff-deleted'></span><span class='diff-deleted'> </span><span class='diff-deleted'>Whenever</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>reverify</span><span class='diff-deleted'> </span><span class='diff-deleted'>your</span><span class='diff-deleted'> </span><span class='diff-deleted'>site,</span><span class='diff-deleted'> </span><span class='diff-deleted'>your</span><span class='diff-deleted'> </span><span class='diff-deleted'>vhost</span><span class='diff-deleted'> </span><span class='diff-deleted'>file</span><span class='diff-deleted'> </span><span class='diff-deleted'>is</span><span class='diff-deleted'> </span><span class='diff-deleted'>automatically</span><span class='diff-deleted'> </span><span class='diff-deleted'>regenerated</span><span class='diff-deleted'> </span><span class='diff-deleted'>by</span><span class='diff-deleted'> </span><span class='diff-deleted'>Aegir</span><span class='diff-deleted'> </span><span class='diff-deleted'>and</span><span class='diff-deleted'> </span><span class='diff-deleted'>any</span><span class='diff-deleted'> </span><span class='diff-deleted'>non-Aegir</span><span class='diff-deleted'> </span><span class='diff-deleted'>generated</span><span class='diff-deleted'> </span><span class='diff-deleted'>certificate</span><span class='diff-deleted'> </span><span class='diff-deleted'>information</span><span class='diff-deleted'> </span><span class='diff-deleted'>will</span><span class='diff-deleted'> </span><span class='diff-deleted'>be</span><span class='diff-deleted'> </span><span class='diff-deleted'>replaced</span><span class='diff-deleted'> </span><span class='diff-deleted'>in</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>vhost</span><span class='diff-deleted'> </span><span class='diff-deleted'>file.</span><span class='diff-deleted'> </span><span class='diff-deleted'>Your</span><span class='diff-deleted'> </span><span class='diff-deleted'>commercial</span><span class='diff-deleted'> </span><span class='diff-deleted'>certificate</span><span class='diff-deleted'> </span><span class='diff-deleted'>will</span><span class='diff-deleted'> </span><span class='diff-deleted'>not</span><span class='diff-deleted'> </span><span class='diff-deleted'>work</span><span class='diff-deleted'> </span><span class='diff-deleted'>without</span><span class='diff-deleted'> </span><span class='diff-deleted'>referencing</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>sf_bundle.crt</span><span class='diff-deleted'> </span><span class='diff-deleted'>file</span><span class='diff-deleted'> </span><span class='diff-deleted'>in</span><span class='diff-deleted'> </span><span class='diff-deleted'>your</span><span class='diff-deleted'> </span><span class='diff-deleted'>vhost</span><span class='diff-deleted'> </span><span class='diff-deleted'>file!</span></p><span class='diff-deleted'>

</span><h3><span class='diff-deleted'>Using</span><span class='diff-deleted'> </span><span class='diff-deleted'>a</span><span class='diff-deleted'> </span><span class='diff-deleted'>SSL</span><span class='diff-deleted'> </span><span class='diff-deleted'>Chained</span><span class='diff-deleted'> </span><span class='diff-deleted'>Certificate.</span></h3><span class='diff-deleted'>

</span><p><span class='diff-deleted'>Usually</span><span class='diff-deleted'> </span><span class='diff-deleted'>if</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>buy</span><span class='diff-deleted'> </span><span class='diff-deleted'>a</span><span class='diff-deleted'> </span><span class='diff-deleted'>commercial</span><span class='diff-deleted'> </span><span class='diff-deleted'>SSL</span><span class='diff-deleted'> </span><span class='diff-deleted'>certificate,</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>will</span><span class='diff-deleted'> </span><span class='diff-deleted'>also</span><span class='diff-deleted'> </span><span class='diff-deleted'>need</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>add</span><span class='diff-deleted'> </span><span class='diff-deleted'>one</span><span class='diff-deleted'> </span><span class='diff-deleted'>or</span><span class='diff-deleted'> </span><span class='diff-deleted'>more</span><span class='diff-deleted'> </span><span class='diff-deleted'>'chain'</span><span class='diff-deleted'> </span><span class='diff-deleted'>certificates,</span><span class='diff-deleted'> </span><span class='diff-deleted'>these</span><span class='diff-deleted'> </span><span class='diff-deleted'>will</span><span class='diff-deleted'> </span><span class='diff-deleted'>be</span><span class='diff-deleted'> </span><span class='diff-deleted'>supplied</span><span class='diff-deleted'> </span><span class='diff-deleted'>by</span><span class='diff-deleted'> </span><span class='diff-deleted'>your</span><span class='diff-deleted'> </span><span class='diff-deleted'>vendor</span><span class='diff-deleted'> </span><span class='diff-deleted'>along</span><span class='diff-deleted'> </span><span class='diff-deleted'>with</span><span class='diff-deleted'> </span><span class='diff-deleted'>your</span><span class='diff-deleted'> </span><span class='diff-deleted'>certificate.</span><span class='diff-deleted'> </span><span class='diff-deleted'>To</span><span class='diff-deleted'> </span><span class='diff-deleted'>install</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>chain</span><span class='diff-deleted'> </span><span class='diff-deleted'>too,</span><span class='diff-deleted'> </span><span class='diff-deleted'>just</span><span class='diff-deleted'> </span><span class='diff-deleted'>copy</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>chain</span><span class='diff-deleted'> </span><span class='diff-deleted'>file</span><span class='diff-deleted'> </span><span class='diff-deleted'>to:</span><span class='diff-deleted'> </span><span class='diff-deleted'>/var/aegir/config/ssl.d/site-1.com/openssl_chain.crt</span></p>

<h3>Verify your site from aegir's frontend.</h3>

<p>You should now be able to access your site via https:// using your commercial certificate.</p>

<h2>Notes for Nginx users:</h2>

<p>It is recommended to allow Aegir to create a default self-signed certificate and key first, and then replace the contents of both files (not the files itself) with your real key and certificate. Any chained certificates (bundles) should be included in the same file, directly below your own certificate - there is no need for extra files/lines like it is for Apache configuration.</p></div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
<li class="print active"><a href="index-2.html?print" class="active">Print</a></li>
<li class="print_recurse active"><a href="index-3.html?print&amp;book_recurse" class="active">Print entire section</a></li>
<li class="talk_comments last"><a href="../../../talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>


<div id="comments">
  <a id="comment-1877"></a>


<div  id="comment-1877" class="comment comment-published clear-block decay-10 decay-10">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/ramanonos/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="Ramanonos&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/ramanonos/index.html" class="username" title="View user profile.">Ramanonos</a></div><div class='date'>10:40pm Mar 20, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1877">#1</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>Documentation on initial SSL setup is pretty good, but what about a renewal? I really dont want to fix anything that doesnt need fixing. Aegir can be unforgiving when missing the small stuff:-) I cant exactly test this out on a staging site. Do I need to generate a new rsa key for a renewal? I'm using a wildcard cert on a single Linode server running CentOS/Apache, that hosts rabout a dozen Atrium sites through Aegir under individual subdomains under a single domain name.<br />
If I need to upload something new, what folders do I put it in? And do I need to manually update all the virtual hosts of my existing Atrium sites, or will this happen automatically???  Here's where I'm at (with deer-n-headlights look).</p>

<p>I paid for the new SSL with godaddy, and downloaded 2 files
1. gd_bundle.crt
2. mydomain.crt</p>

<p>Inside  var/aegir/config/ssl.d/godaddy   I have the following files:</p>

<ol>
<li>gd_bundle.crt (this one has 3 chained certs, but the one I downloaded from godaddy only has 2.  Just leave the new one as is and upload it? Thoughts?)</li>
<li>openssl.crt  (what I was planning to do is replace the contents of this file with what I have in mydomain.crt -copy/paste and upload it.  Yes?)</li>
<li>openssl.csr (I alerted godaddy to use my existing csr during activation, so I'll do nothing here. Yes?)</li>
<li>openssl.key (I suppose this is the key generated the first time. Do I need to regenerate on a renewed SSL? Would rather not...)</li>
<li>info.txt  (this file appears to be a public cert. I don't recall how it was generated, what should I do about this mystery? It starts like so:</li>
</ol>

<p>Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            2x:67:z3:
        Signature Algorithm: sha1WithRSAEncryption
        Issuer: C=US, ST=Arizona, L=Scottsdale, O=GoDaddy.com, Inc., OU=http://certificates.godaddy.com/repository, CN=Go Daddy Secure Certification Authority/serialNumber=123456
        Validity
            Not Before: Apr 16 22:18:16 2012 GMT
            Not After : May  3 17:00:47 2013 GMT
        Subject: O=<em>.example.com, OU=Domain Control Validated, CN=</em>.example.com
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
            RSA Public Key: (2048 bit)
                Modulus (2048 bit):
                    00:c0:1d:5a:07:98:42:b1:be:de:b7:20:b5:79:d2:
                    ae:3e:99:06:e3:4b:a8:fc:59:18:f1:3a:05:aa:50:
                    94:1f:64:71:9f:ea:90:eb:06:e9:1d:a0:89:00:a8:</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1883"></a>


<div  id="comment-1883" class="comment comment-published clear-block decay-9 decay-9">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/ramanonos/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="Ramanonos&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/ramanonos/index.html" class="username" title="View user profile.">Ramanonos</a></div><div class='date'>11:02pm Mar 28, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1883">#2</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>No sweat. Here it is: Upload/overwrite existing gd_bundle.crt into the active ssl folder.  Copy/paste the contents of domain.crt into the openssl.crt file. Make sure to put both files in ssl.d and servermaster/ssl.d.  Restart apache &amp; enjoy.</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1885"></a>


<div  id="comment-1885" class="comment comment-published clear-block decay-9 decay-9">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/mccrodp/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="mccrodp&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/mccrodp/index.html" class="username" title="View user profile.">mccrodp</a></div><div class='date'>9:50am Apr 2, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1885">#3</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>I'm quite confused how SSL works now in Aegir2 with IP's being allocated in the front-end. I posted a question about this at the end of <a href="http://drupal.org/node/1126640#comment-7209602">move the SSL IP allocation to the frontend</a>, but I'm guessing as this is a closed issue, it might slip below the radar. Any info on this or a pointer in the right direction is much appreciated.</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1890"></a>


<div  id="comment-1890" class="comment comment-published clear-block decay-9 decay-9">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/john-carbone/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="John Carbone&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/john-carbone/index.html" class="username" title="View user profile.">John Carbone</a></div><div class='date'>3:53pm Apr 3, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1890">#4</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>Seems to be a bug (omission?) in Provision that ignores ssl chain files. I found that the vhost file wouldn't get updated with the SSLCertificateChainFile entry even when following the documentation. Perhaps I was doing something incorrectly but if I was, I never found it. In the end I ended up applying a couple patches, reverifying my platform and all was right with the world. I did have to remove some whitespace in between the two diffs in the patch but other than that it applied to provision 6.x-1.9 (bit of patch fuzz but otherwise ok)</p>

<p>See <a href="http://nicksantamaria.net/article/getting-ca-chain-certificates-work-using-aegir-13" title="http://nicksantamaria.net/article/getting-ca-chain-certificates-work-using-aegir-13">http://nicksantamaria.net/article/getting-ca-chain-certificates-work-usi...</a> and <a href="http://nicksantamaria.net/sites/nicksantamaria.net/files/article_attachments/provision-1.2-chain_crt.patch" title="http://nicksantamaria.net/sites/nicksantamaria.net/files/article_attachments/provision-1.2-chain_crt.patch">http://nicksantamaria.net/sites/nicksantamaria.net/files/article_attachm...</a> if you have the same problem. :)</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1966"></a>


<div  id="comment-1966" class="comment comment-published clear-block decay-6 decay-6">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/freshjewbagel/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="freshjewbagel&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/freshjewbagel/index.html" class="username" title="View user profile.">freshjewbagel</a></div><div class='date'>7:47pm Jun 26, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1966">#5</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>If I select 'Encryption: Required', the server will not redirect traffic from the http port to the https port as described</p>

<p>I am using 5080 and 5443, so it redirects <a href="http://server:5080/" title="http://server:5080">http://server:5080</a> to <a href="https://server:5080/" title="https://server:5080">https://server:5080</a>, which of course does not work.</p>

<p>lynx attempt:<br />
Looking up stage.web:5080<br />
Making HTTP connection to stage.web:5080<br />
Sending HTTP request.<br />
HTTP request sent; waiting for response.<br />
HTTP/1.1 301 Moved Permanently<br />
Data transfer complete<br />
HTTP/1.1 301 Moved Permanently<br />
Using <a href="https://stage.web:5080/" title="https://stage.web:5080/">https://stage.web:5080/</a><br />
Looking up stage.web:5080<br />
Making HTTPS connection to stage.web:5080<br />
Retrying connection without TLS.<br />
Looking up stage.web:5080<br />
Making HTTPS connection to stage.web:5080<br />
Alert!: Unable to make secure connection to remote host.</p>

<p>Accessing <a href="https://stage.web:5443/" title="https://stage.web:5443">https://stage.web:5443</a> works however</p>

<p>What gives?</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-2109"></a>


<div  id="comment-2109" class="comment comment-published clear-block decay-0 decay-0">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/smys123/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="smys123&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/smys123/index.html" class="username" title="View user profile.">smys123</a></div><div class='date'>2:41pm Dec 11, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-2109">#6</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>Any Update on this?</p>

<p>We would like to utilize SNI since we have a multi-site setup under one drupal core. Is there anyway to override the process where verify replaces the edit *:443 back to xxx.xx.xxxx:443 ?</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


</div>
    </div>
      </div>
</body>


<!-- Mirrored from community.aegirproject.org/node/29/revisions/3697/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:00:23 GMT -->
</html>
