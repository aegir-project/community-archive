<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  
<!-- Mirrored from community.aegirproject.org/node/29/talk by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 15:24:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
    <link type="text/css" rel="stylesheet" media="all" href="../../../profiles/openatrium/modules/contrib/codefilter/codefilter/index.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/community.aegirproject.org/files/css/css_b8ca3ff360daa12eff502993554e60d0/index.css" />
<link type="text/css" rel="stylesheet" media="screen" href="../../../sites/community.aegirproject.org/files/css/css_c151a4313ed94e62ccee94ea27ad58ed/index.css" />
<link type="text/css" rel="stylesheet" media="print" href="../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<style type='text/css'>
.atrium-welcome-links a:hover,
.dropdown-blocks .block-toggle li a:hover,
.dropdown-blocks .block-toggle li a:focus,
.dropdown-blocks .block-toggle ul.links li a:hover,
.dropdown-blocks .block-toggle ul.links li a:focus,
.dropdown-blocks .block-toggle .item-list li a:hover,
.dropdown-blocks .block-toggle .item-list li a:focus,
.pager li.pager-current,
.more-link a:hover,
#global,
#navigation { background-color:#143352; }

body #space-tools .block-title { background-color:#0e2339; }

body #header .block-widget .block-content,
body #header .block .block-title { background-color:#112b45; }

body .page-region .block .block-title {
  background-color:#c2c8ce;
  border-color:#b4bbc1;
  border-bottom-color:#a7adb3;
  }

.drilldown .trail a {
  border-top-color:#f3f4f6;
  border-bottom-color:#d2d4d6;
  background-color:#e3e4e6;
  }

.decay-10 .comment-title { border-color:#eeeeee; }
.decay-9 .comment-title { border-color:#d8dbde; }
.decay-8 .comment-title { border-color:#c2c8ce; }
.decay-7 .comment-title { border-color:#acb5bf; }
.decay-6 .comment-title { border-color:#96a3af; }
.decay-5 .comment-title { border-color:#8190a0; }
.decay-4 .comment-title { border-color:#6b7d90; }
.decay-3 .comment-title { border-color:#556b80; }
.decay-2 .comment-title { border-color:#3f5871; }
.decay-1 .comment-title { border-color:#294561; }
.decay-0 .comment-title { border-color:#143352; }
</style>
    <script type="text/javascript" src="../../../sites/community.aegirproject.org/files/js/js_8675e6d14d952a92975e71681bcbb1e0/index.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/"});
//--><!]]>
</script>
    <!--[if lte IE 8]><style type='text/css' media='screen'>@import '/profiles/openatrium/themes/ginkgo/ie.css';</style><![endif]-->    <title>Talk | community.aegirproject.org</title>
  </head>
  <body  class="not-front not-logged-in page-node node-type-book no-sidebars designkit tao rubik admin-static page">

  <div style='padding:10px;line-height:30px;background-color:red;font-size:200%;color:white;'>This site is a static archive of the Aegir community site. Documentation has moved to <a style='text-decoration:underline;color:white' href='http://docs.aegirproject.org'>http://docs.aegirproject.org</a>. Other community resources can be found on the <a style='text-decoration:underline;color:white' href='http://docs.aegirproject.org/en/3.x/help/contact/'>Contacting the community</a> page.</div><a id='skipnav' href='#content'>Skip navigation</a>
  <div id='global'><div class='limiter clear-block'>
          <div id='header' class='dropdown-blocks toggle-blocks clear-block'>
          

<div  id="block-atrium-account" class="block block-atrium block-widget block-notitle">
  
  
      <div class='block-content clear-block '>
          </div>
  
  </div>


  

<div  id="block-boxes-search_issues" class="block block-boxes block-toggle">
      <div class='block-title'>
            <a href="index.html#block-boxes-search_issues" class="toggle element-invisible active">Toggle</a>LOOKING FOR HELP?    </div>
  
  
      <div class='block-content clear-block '>
      <div id='boxes-box-search_issues' class='boxes-box'><div class="boxes-box-content"><table class="prose">
<tr>
<td width="50%">
<span style="font-size:16px;width:100%">Type some keywords below and hit "enter":</span><br />
<input type="text" class="drupal-issue-redirect" style="width:100%;min-width:200px;background-color:#DDEEFF; font-size:30px;border-style:dotted;border-width:1px" />
<p>This will search the drupal.org issue queues across the various projects that make up the Aegir system. If there are no relevant results, please submit an issue there.</p></td>
<td style="padding:10px">Other support resources:
<ul>
<li><a href="irc://irc.freenode.net/aegir">#aegir on IRC</a></li>
<li><a href="../../../faq/index.html">FAQ</a></li>
<li><a href="../../../handbook/index.html">Aegir Handbook</a></li>
<li><a href="../../../service-providers/index.html">Aegir service providers</a></li>
<li><a href="https://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir),Hosting+Platform+Pathauto&amp;status=Open&amp;priorities=All&amp;categories=All">All Aegir issues</a></li>
<li><a href="http://drupal.stackexchange.com/questions/tagged/aegir">Aegir tag on Drupal Stackexchange</a></li>
</ul>
</td>
</tr>
</table>
<script type="text/javascript">
$("input.drupal-issue-redirect").change(function() {
  searchURL= "http://drupal.org/project/issues?text="+$(this).val()+"&projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir),Hosting+Platform+Pathauto&status=Open&priorities=All&categories=All";
  window.location = searchURL;
});
</script></div></div>    </div>
  
  </div>


      </div>
        <div class='breadcrumb'><span class='link link-0'><a href="../../../index.html">Home</a></span><span class='divider'></span><span class='link link-1'><a href="../../../content/content/administrator/post-install-configuration/using-ssl/index.html">Using SSL</a></span></div>    <a href="../../../index.html" class="logo" style="background-position:100% 50%; background-image:url(../%27http_/community.aegirproject.org/sites/community.aegirproject.org/files/imagecache/designkit-image-logo/logo/index.html)"></a>  </div></div>

    <div id='navigation'><div class='limiter clear-block'>
    <ul id="features-menu" class="links primary-links"><li class="menu-617 first"><a href="../../../dashboard/index.html" class=" icon-dashboard"><span class='icon'></span><span class='label'>Dashboard</span></a></li>
<li class="menu-618"><a href="../../../handbook/index.html" class=" icon-handbook"><span class='icon'></span><span class='label'>Documentation</span></a></li>
<li class="menu-2427"><a href="../../../discussion/index.html" class=" icon-discussion"><span class='icon'></span><span class='label'>Discussion</span></a></li>
<li class="menu-2426"><a href="../../../calendar/index.html" class="spaces-menu-editable icon-calendar"><span class='icon'></span><span class='label'>Calendar</span></a></li>
<li class="menu-823"><a href="../../../reader/index.html" class=" icon-reader"><span class='icon'></span><span class='label'>Feed reader</span></a></li>
<li class="menu-2429 last"><a href="../../../members/index.html" class=" icon-members"><span class='icon'></span><span class='label'>Members</span></a></li>
</ul>          <div id='space-tools'><div class='dropdown-blocks toggle-blocks clear-block'>  

<div  id="block-atrium-search" class="block block-atrium block-toggle">
      <div class='block-title'>
            </div>
  
  
      <div class='block-content clear-block '>
      <form action="http://community.aegirproject.org/node/29/talk"  accept-charset="UTF-8" method="post" id="atrium-search-form">
<div><div  class="form-item form-item-labeled" id="edit-search-wrapper">
      <label  for="edit-search">Search: <span class='form-required' title='This field is required.'>*</span></label>
    <input type="text" maxlength="128" name="search" id="edit-search" value="" class="form-text required fluid" />  </div>
<input type="submit" name="op" id="edit-submit" value="Search"  class="form-submit" />
<input type="hidden" name="form_build_id" id="form-CqGEUOSbMkSaDmpqxf-LGjmrsN8_PReY7EPMwUYAh_8" value="form-CqGEUOSbMkSaDmpqxf-LGjmrsN8_PReY7EPMwUYAh_8"  />
<input type="hidden" name="form_id" id="edit-atrium-search-form" value="atrium_search_form"  />

</div></form>
    </div>
  
  </div>


</div></div>
      </div></div>
  
  <div id='page-tools'><div class='limiter clear-block'>
    <h1  class="page-title page-title-hidden">Talk</h1>    <div class='tabs clear-block'><ul class='links primary-tabs'><li ><a href="../../../content/content/administrator/post-install-configuration/using-ssl/index.html">View</a></li>
<li class="active" ><a href="index.html" class="active">Talk (6)</a></li>
<li ><a href="../revisions/index.html">Revisions</a></li>
</ul></div>              </div></div>

  
  
  <div id='page'><div class='limiter clear-block'>
    
<div id='content'><div class='page-region'>
      <div class='page-content content-wrapper clear-block'><div id="comments">
  <a id="comment-1877"></a>


<div  id="comment-1877" class="comment comment-published clear-block decay-10 decay-10">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../users/ramanonos/index.html" title="View user profile."><img src="../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="Ramanonos&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../users/ramanonos/index.html" class="username" title="View user profile.">Ramanonos</a></div><div class='date'>10:40pm Mar 20, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="index.html#comment-1877" class="active">#1</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>Documentation on initial SSL setup is pretty good, but what about a renewal? I really dont want to fix anything that doesnt need fixing. Aegir can be unforgiving when missing the small stuff:-) I cant exactly test this out on a staging site. Do I need to generate a new rsa key for a renewal? I'm using a wildcard cert on a single Linode server running CentOS/Apache, that hosts rabout a dozen Atrium sites through Aegir under individual subdomains under a single domain name.<br />
If I need to upload something new, what folders do I put it in? And do I need to manually update all the virtual hosts of my existing Atrium sites, or will this happen automatically???  Here's where I'm at (with deer-n-headlights look).</p>

<p>I paid for the new SSL with godaddy, and downloaded 2 files
1. gd_bundle.crt
2. mydomain.crt</p>

<p>Inside  var/aegir/config/ssl.d/godaddy   I have the following files:</p>

<ol>
<li>gd_bundle.crt (this one has 3 chained certs, but the one I downloaded from godaddy only has 2.  Just leave the new one as is and upload it? Thoughts?)</li>
<li>openssl.crt  (what I was planning to do is replace the contents of this file with what I have in mydomain.crt -copy/paste and upload it.  Yes?)</li>
<li>openssl.csr (I alerted godaddy to use my existing csr during activation, so I'll do nothing here. Yes?)</li>
<li>openssl.key (I suppose this is the key generated the first time. Do I need to regenerate on a renewed SSL? Would rather not...)</li>
<li>info.txt  (this file appears to be a public cert. I don't recall how it was generated, what should I do about this mystery? It starts like so:</li>
</ol>

<p>Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            2x:67:z3:
        Signature Algorithm: sha1WithRSAEncryption
        Issuer: C=US, ST=Arizona, L=Scottsdale, O=GoDaddy.com, Inc., OU=http://certificates.godaddy.com/repository, CN=Go Daddy Secure Certification Authority/serialNumber=123456
        Validity
            Not Before: Apr 16 22:18:16 2012 GMT
            Not After : May  3 17:00:47 2013 GMT
        Subject: O=<em>.example.com, OU=Domain Control Validated, CN=</em>.example.com
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
            RSA Public Key: (2048 bit)
                Modulus (2048 bit):
                    00:c0:1d:5a:07:98:42:b1:be:de:b7:20:b5:79:d2:
                    ae:3e:99:06:e3:4b:a8:fc:59:18:f1:3a:05:aa:50:
                    94:1f:64:71:9f:ea:90:eb:06:e9:1d:a0:89:00:a8:</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1883"></a>


<div  id="comment-1883" class="comment comment-published clear-block decay-9 decay-9">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../users/ramanonos/index.html" title="View user profile."><img src="../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="Ramanonos&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../users/ramanonos/index.html" class="username" title="View user profile.">Ramanonos</a></div><div class='date'>11:02pm Mar 28, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="index.html#comment-1883" class="active">#2</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>No sweat. Here it is: Upload/overwrite existing gd_bundle.crt into the active ssl folder.  Copy/paste the contents of domain.crt into the openssl.crt file. Make sure to put both files in ssl.d and servermaster/ssl.d.  Restart apache &amp; enjoy.</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1885"></a>


<div  id="comment-1885" class="comment comment-published clear-block decay-9 decay-9">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../users/mccrodp/index.html" title="View user profile."><img src="../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="mccrodp&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../users/mccrodp/index.html" class="username" title="View user profile.">mccrodp</a></div><div class='date'>9:50am Apr 2, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="index.html#comment-1885" class="active">#3</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>I'm quite confused how SSL works now in Aegir2 with IP's being allocated in the front-end. I posted a question about this at the end of <a href="http://drupal.org/node/1126640#comment-7209602">move the SSL IP allocation to the frontend</a>, but I'm guessing as this is a closed issue, it might slip below the radar. Any info on this or a pointer in the right direction is much appreciated.</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1890"></a>


<div  id="comment-1890" class="comment comment-published clear-block decay-9 decay-9">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../users/john-carbone/index.html" title="View user profile."><img src="../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="John Carbone&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../users/john-carbone/index.html" class="username" title="View user profile.">John Carbone</a></div><div class='date'>3:53pm Apr 3, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="index.html#comment-1890" class="active">#4</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>Seems to be a bug (omission?) in Provision that ignores ssl chain files. I found that the vhost file wouldn't get updated with the SSLCertificateChainFile entry even when following the documentation. Perhaps I was doing something incorrectly but if I was, I never found it. In the end I ended up applying a couple patches, reverifying my platform and all was right with the world. I did have to remove some whitespace in between the two diffs in the patch but other than that it applied to provision 6.x-1.9 (bit of patch fuzz but otherwise ok)</p>

<p>See <a href="http://nicksantamaria.net/article/getting-ca-chain-certificates-work-using-aegir-13" title="http://nicksantamaria.net/article/getting-ca-chain-certificates-work-using-aegir-13">http://nicksantamaria.net/article/getting-ca-chain-certificates-work-usi...</a> and <a href="http://nicksantamaria.net/sites/nicksantamaria.net/files/article_attachments/provision-1.2-chain_crt.patch" title="http://nicksantamaria.net/sites/nicksantamaria.net/files/article_attachments/provision-1.2-chain_crt.patch">http://nicksantamaria.net/sites/nicksantamaria.net/files/article_attachm...</a> if you have the same problem. :)</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1966"></a>


<div  id="comment-1966" class="comment comment-published clear-block decay-6 decay-6">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../users/freshjewbagel/index.html" title="View user profile."><img src="../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="freshjewbagel&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../users/freshjewbagel/index.html" class="username" title="View user profile.">freshjewbagel</a></div><div class='date'>7:47pm Jun 26, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="index.html#comment-1966" class="active">#5</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>If I select 'Encryption: Required', the server will not redirect traffic from the http port to the https port as described</p>

<p>I am using 5080 and 5443, so it redirects <a href="http://server:5080/" title="http://server:5080">http://server:5080</a> to <a href="https://server:5080/" title="https://server:5080">https://server:5080</a>, which of course does not work.</p>

<p>lynx attempt:<br />
Looking up stage.web:5080<br />
Making HTTP connection to stage.web:5080<br />
Sending HTTP request.<br />
HTTP request sent; waiting for response.<br />
HTTP/1.1 301 Moved Permanently<br />
Data transfer complete<br />
HTTP/1.1 301 Moved Permanently<br />
Using <a href="https://stage.web:5080/" title="https://stage.web:5080/">https://stage.web:5080/</a><br />
Looking up stage.web:5080<br />
Making HTTPS connection to stage.web:5080<br />
Retrying connection without TLS.<br />
Looking up stage.web:5080<br />
Making HTTPS connection to stage.web:5080<br />
Alert!: Unable to make secure connection to remote host.</p>

<p>Accessing <a href="https://stage.web:5443/" title="https://stage.web:5443">https://stage.web:5443</a> works however</p>

<p>What gives?</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-2109"></a>


<div  id="comment-2109" class="comment comment-published clear-block decay-0 decay-0">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../users/smys123/index.html" title="View user profile."><img src="../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="smys123&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../users/smys123/index.html" class="username" title="View user profile.">smys123</a></div><div class='date'>2:41pm Dec 11, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="index.html#comment-2109" class="active">#6</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>Any Update on this?</p>

<p>We would like to utilize SNI since we have a multi-site setup under one drupal core. Is there anyway to override the process where verify replaces the edit *:443 back to xxx.xx.xxxx:443 ?</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


</div>
</div>
    </div></div>
<div id='right'><div class='page-region'>
  </div></div>

  </div></div>

    <div id="footer"><div class='limiter clear-block'>
        <ul class="links"><li class="atrium first last"><a href="http://www.openatrium.com/" target="_blank">OpenAtrium.com</a></li>
</ul>  </div></div>
  
  
  
  </body>

<!-- Mirrored from community.aegirproject.org/node/29/talk by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 15:24:11 GMT -->
</html>
