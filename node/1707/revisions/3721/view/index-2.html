<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from community.aegirproject.org/node/1707/revisions/3721/view?print by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:47:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="canonical" href="index.html" />
<link rel="shortcut icon" href="../../../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="print" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />

  <title>Revision of Conditional Logic for Injecting Apache Conf Rules from Mon, 08/06/2012 - 17:21 | community.aegirproject.org</title>
</head>

<body  class="print rubik admin-static page">
  <div class='limiter clear-block'>
    <div id='content' class='clear-block'>
      <div class='print-header'>
      <h1 class='site-name'>community.aegirproject.org</h1>
  </div>
      

<div  id="node-1707" class="node node-discussion clear-block node-page">
      <div class='node-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/km/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="km&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/km/index.html" class="username" title="View user profile.">km</a></div><div class='date'>5:20pm Aug 6, 2012</div>    </div>
  
      <h2 class='node-title'>
            <a href="../../../../../discuss/conditional-logic-injecting-apache-conf-rules/index.html">Conditional Logic for Injecting Apache Conf Rules</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_154 first last"><a href="../../../../../category/keywords/apache-injecting-conditional/index.html" rel="tag" title="">apache injecting conditional</a></li>
</ul></div><div class="field field-type-nodereference field-field-referenced-book-page">
    <div class="field-items">
            <div class="field-item odd">
                      <div class="field-label-inline-first">
              Referenced Page:&nbsp;</div>
                    <a href="../../../../70/index.html">Injecting into site vhosts</a>        </div>
        </div>
</div>
<p>I am trying to inject additional apache conf files so specific hosts, and I am using this code in a file called wwwlegacy.drush.inc in /var/aegir/.drush:
<div class="codeblock"><code>&lt;?<br />&nbsp; function wwwlegacy_provision_apache_vhost_config($uri, $data) {<br />&nbsp;&nbsp;&nbsp; if ($uri == &quot;cms.test.domain.com&quot;) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return array(&quot;Include conf.d/www-legacy-redirect.conf&quot;,&quot;Include conf.d/www-legacy-proxy.conf&quot;);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp; }<br />?&gt;</code></div></p>

<p>but this does not inject the two lines into the vhost entry of cms.test.domain.com after I verify the site. When I remove the <code>if</code> statement, it works, but I don't want it going to all the sites.</p>

<p>Looks like I am missing something very basic ... ?</p>

<p>Thanks!</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="print first last active"><a href="index-2.html?print" class="active">Print</a></li>
</ul></div>
  </div>


    </div>
      </div>
</body>


<!-- Mirrored from community.aegirproject.org/node/1707/revisions/3721/view?print by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:47:24 GMT -->
</html>
