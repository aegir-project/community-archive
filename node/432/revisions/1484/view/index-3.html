<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from community.aegirproject.org/node/432/revisions/1484/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:07:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="prev" href="../../../../../upgrading/manual/index.html" />
<link rel="up" href="../../../../../upgrading/index.html" />
<link rel="next" href="../../../../../upgrading/script/index.html" />
<link rel="prev" href="../../../../../upgrading/manual/index.html" />
<link rel="up" href="../../../../../upgrading/index.html" />
<link rel="next" href="../../../../../upgrading/script/index.html" />
<link rel="prev" href="../../../../../upgrading/manual/index.html" />
<link rel="up" href="../../../../../upgrading/index.html" />
<link rel="next" href="../../../../../upgrading/script/index.html" />
<link rel="canonical" href="index.html" />
<link rel="shortcut icon" href="../../../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="print" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />

  <title>Revision of Automatic upgrades with Debian packages from Thu, 04/07/2011 - 20:52 | community.aegirproject.org</title>
</head>

<body  class="print rubik admin-static page">
  <div class='limiter clear-block'>
    <div id='content' class='clear-block'>
      <div class='print-header'>
      <h1 class='site-name'>community.aegirproject.org</h1>
  </div>
      

<div  id="node-432" class="node node-book clear-block node-page">
  
      <h2 class='node-title'>
            <a href="../../../../../upgrading/debian/index.html">Automatic upgrades with Debian packages</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_23 first"><a href="../../../../../taxonomy/term/23/index.html" rel="tag" title="">Debian</a></li>
<li class="taxonomy_term_2"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_22 last"><a href="../../../../../taxonomy/term/22/index.html" rel="tag" title="">upgrade</a></li>
</ul></div><div id='diff-inline-432'><div class='diff-inline-metadata clear-block'><div class='diff-inline-byline'>Updated by <a href="../../../../../user/54/index.html" class="username" title="View user profile.">ergonlogic</a> on 04/07/2011 - 20:52</div><div class='diff-inline-legend clear-block'><label>Legend</label><span class='diff-added'>Added</span><span class='diff-changed'>Changed</span><span class='diff-deleted'>Deleted</span></div></div><span class='diff-deleted'></span><script type="text/javascript"><span class='diff-deleted'>toc_collapse=0;</span></script><span class='diff-deleted'></span><div class="toc" id="toc"><span class='diff-deleted'>
</span><div class="toc-title"><span class='diff-deleted'>Table</span><span class='diff-deleted'> </span><span class='diff-deleted'>of</span><span class='diff-deleted'> </span><span class='diff-deleted'>Contents</span><span class="toc-toggle-message"><span class='diff-deleted'>&nbsp;</span></span><span class='diff-deleted'></span></div><span class='diff-deleted'>
</span><div class="toc-list"><span class='diff-deleted'>
</span><ol><span class='diff-deleted'>
	</span><li class="toc-level-1"><span class='diff-deleted'></span><a href="#Prerequisites:_Adding_repositories_archives_keys_and_backports"><span class='diff-deleted'></span><span class="toc-number"><span class='diff-deleted'>1.</span><span class='diff-deleted'> </span><span class='diff-deleted'></span></span><span class='diff-deleted'>Prerequisites:</span><span class='diff-deleted'> </span><span class='diff-deleted'>Adding</span><span class='diff-deleted'> </span><span class='diff-deleted'>repositories,</span><span class='diff-deleted'> </span><span class='diff-deleted'>archives</span><span class='diff-deleted'> </span><span class='diff-deleted'>keys</span><span class='diff-deleted'> </span><span class='diff-deleted'>and</span><span class='diff-deleted'> </span><span class='diff-deleted'>backports</span></a><span class='diff-deleted'></span></li><span class='diff-deleted'>
	</span><li class="toc-level-1"><span class='diff-deleted'></span><a href="#Regular_update_process"><span class='diff-deleted'></span><span class="toc-number"><span class='diff-deleted'>2.</span><span class='diff-deleted'> </span><span class='diff-deleted'></span></span><span class='diff-deleted'>Regular</span><span class='diff-deleted'> </span><span class='diff-deleted'>update</span><span class='diff-deleted'> </span><span class='diff-deleted'>process</span></a><span class='diff-deleted'></span></li><span class='diff-deleted'>
	</span><li class="toc-level-1"><span class='diff-deleted'></span><a href="#Upgrading_from_non-Debian_installs"><span class='diff-deleted'></span><span class="toc-number"><span class='diff-deleted'>3.</span><span class='diff-deleted'> </span><span class='diff-deleted'></span></span><span class='diff-deleted'>Upgrading</span><span class='diff-deleted'> </span><span class='diff-deleted'>from</span><span class='diff-deleted'> </span><span class='diff-deleted'>non-Debian</span><span class='diff-deleted'> </span><span class='diff-deleted'>installs</span></a><span class='diff-deleted'></span></li><span class='diff-deleted'>
	</span><li class="toc-level-1"><span class='diff-deleted'></span><a href="#Custom_distributions"><span class='diff-deleted'></span><span class="toc-number"><span class='diff-deleted'>4.</span><span class='diff-deleted'> </span><span class='diff-deleted'></span></span><span class='diff-deleted'>Custom</span><span class='diff-deleted'> </span><span class='diff-deleted'>distributions</span></a><span class='diff-deleted'></span></li><span class='diff-deleted'>
	</span><li class="toc-level-1"><span class='diff-deleted'></span><a href="#Rolling_back_the_upgrade"><span class='diff-deleted'></span><span class="toc-number"><span class='diff-deleted'>5.</span><span class='diff-deleted'> </span><span class='diff-deleted'></span></span><span class='diff-deleted'>Rolling</span><span class='diff-deleted'> </span><span class='diff-deleted'>back</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>upgrade</span></a><span class='diff-deleted'></span></li><span class='diff-deleted'>
</span></ol><span class='diff-deleted'>
</span></div><span class='diff-deleted'>
</span></div><span class='diff-deleted'>

</span><h2 id="Prerequisites:_Adding_repositories_archives_keys_and_backports"><span class='diff-deleted'>1.</span><span class='diff-deleted'> </span><span class='diff-deleted'>Prerequisites:</span><span class='diff-deleted'> </span><span class='diff-deleted'>Adding</span><span class='diff-deleted'> </span><span class='diff-deleted'>repositories,</span><span class='diff-deleted'> </span><span class='diff-deleted'>archives</span><span class='diff-deleted'> </span><span class='diff-deleted'>keys</span><span class='diff-deleted'> </span><span class='diff-deleted'>and</span><span class='diff-deleted'> </span><span class='diff-deleted'>backports</span></h2><span class='diff-deleted'>

</span><p><span class='diff-deleted'>If</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>are</span><span class='diff-deleted'> </span><span class='diff-deleted'>running</span><span class='diff-deleted'> </span><span class='diff-deleted'>Debian</span><span class='diff-deleted'> </span><span class='diff-deleted'>Squeeze</span><span class='diff-deleted'> </span><span class='diff-deleted'>or</span><span class='diff-deleted'> </span><span class='diff-deleted'>Ubuntu</span><span class='diff-deleted'> </span><span class='diff-deleted'>Lucid</span><span class='diff-deleted'> </span><span class='diff-deleted'>(10.04)</span><span class='diff-deleted'> </span><span class='diff-deleted'>and</span><span class='diff-deleted'> </span><span class='diff-deleted'>above,</span><span class='diff-deleted'> </span><span class='diff-deleted'>you'll</span><span class='diff-deleted'> </span><span class='diff-deleted'>first</span><span class='diff-deleted'> </span><span class='diff-deleted'>need</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>go</span><span class='diff-deleted'> </span><span class='diff-deleted'>through</span><span class='diff-deleted'> </span><span class='diff-deleted'>steps</span><span class='diff-deleted'> </span><span class='diff-deleted'>1</span><span class='diff-deleted'> </span><span class='diff-deleted'>through</span><span class='diff-deleted'> </span><span class='diff-deleted'>3</span><span class='diff-deleted'> </span><span class='diff-deleted'>of</span><span class='diff-deleted'> </span><span class='diff-deleted'></span><a href="../../../../../installing/debian/index.html"><span class='diff-deleted'>Automatic</span><span class='diff-deleted'> </span><span class='diff-deleted'>install</span><span class='diff-deleted'> </span><span class='diff-deleted'>on</span><span class='diff-deleted'> </span><span class='diff-deleted'>Debian</span></a><span class='diff-deleted'>.</span></p><span class='diff-deleted'>

</span><div class="toc-back-to-top"><span class='diff-deleted'></span><a href="#toc"><span class='diff-deleted'>Back</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>top</span></a><span class='diff-deleted'></span></div><span class='diff-deleted'></span><h2 id="Regular_update_process"><span class='diff-deleted'>2.</span><span class='diff-deleted'> </span><span class='diff-deleted'>Regular</span><span class='diff-deleted'> </span><span class='diff-deleted'>update</span><span class='diff-deleted'> </span><span class='diff-deleted'>process</span></h2><span class='diff-deleted'>

</span><p><span class='diff-deleted'>Note</span><span class='diff-deleted'> </span><span class='diff-deleted'>that</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>can</span><span class='diff-deleted'> </span><span class='diff-deleted'>upgrade</span><span class='diff-deleted'> </span><span class='diff-deleted'>Aegir</span><span class='diff-deleted'> </span><span class='diff-deleted'>in</span><span class='diff-deleted'> </span><span class='diff-deleted'>steps.</span><span class='diff-deleted'> </span><span class='diff-deleted'>Upgrading</span><span class='diff-deleted'> </span><span class='diff-deleted'>your</span><span class='diff-deleted'> </span><span class='diff-deleted'>backend</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>Debian</span><span class='diff-deleted'> </span><span class='diff-deleted'>package</span><span class='diff-deleted'> </span><span class='diff-deleted'>should</span><span class='diff-deleted'> </span><span class='diff-deleted'>be</span><span class='diff-deleted'> </span><span class='diff-deleted'>as</span><span class='diff-deleted'> </span><span class='diff-deleted'>simple</span><span class='diff-deleted'> </span><span class='diff-deleted'>as</span><span class='diff-deleted'> </span><span class='diff-deleted'>running:</span></p><span class='diff-deleted'>

</span><pre><span class='diff-deleted'></span><code><span class='diff-deleted'>apt-get</span><span class='diff-deleted'> </span><span class='diff-deleted'>install</span><span class='diff-deleted'> </span><span class='diff-deleted'>aegir-provision
</span></code><span class='diff-deleted'></span></pre><span class='diff-deleted'>

</span><p><span class='diff-deleted'>Upgrading</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>frontend</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>Debian</span><span class='diff-deleted'> </span><span class='diff-deleted'>package</span><span class='diff-deleted'> </span><span class='diff-deleted'>works</span><span class='diff-deleted'> </span><span class='diff-deleted'>identically:</span></p><span class='diff-deleted'>

</span><pre><span class='diff-deleted'></span><code><span class='diff-deleted'>apt-get</span><span class='diff-deleted'> </span><span class='diff-deleted'>install</span><span class='diff-deleted'> </span><span class='diff-deleted'>aegir-hostmaster
</span></code><span class='diff-deleted'></span></pre><span class='diff-deleted'>

</span><p><span class='diff-deleted'>If</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>want</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>upgrade</span><span class='diff-deleted'> </span><span class='diff-deleted'>all</span><span class='diff-deleted'> </span><span class='diff-deleted'>packages</span><span class='diff-deleted'> </span><span class='diff-deleted'>in</span><span class='diff-deleted'> </span><span class='diff-deleted'>one</span><span class='diff-deleted'> </span><span class='diff-deleted'>shot,</span><span class='diff-deleted'> </span><span class='diff-deleted'>use:</span></p><span class='diff-deleted'>

</span><pre><span class='diff-deleted'></span><code><span class='diff-deleted'>apt-get</span><span class='diff-deleted'> </span><span class='diff-deleted'>install</span><span class='diff-deleted'> </span><span class='diff-deleted'>aegir
</span></code><span class='diff-deleted'></span></pre><span class='diff-deleted'>

</span><p><span class='diff-deleted'>As</span><span class='diff-deleted'> </span><span class='diff-deleted'>during</span><span class='diff-deleted'> </span><span class='diff-deleted'>install,</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>can</span><span class='diff-deleted'> </span><span class='diff-deleted'>use</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>DEBUG</span><span class='diff-deleted'> </span><span class='diff-deleted'>variable</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>run</span><span class='diff-deleted'> </span><span class='diff-deleted'>Drush</span><span class='diff-deleted'> </span><span class='diff-deleted'>in</span><span class='diff-deleted'> </span><span class='diff-deleted'>debugging</span><span class='diff-deleted'> </span><span class='diff-deleted'>mode:</span></p><span class='diff-deleted'>

</span><pre><span class='diff-deleted'></span><code><span class='diff-deleted'>env</span><span class='diff-deleted'> </span><span class='diff-deleted'>DEBUG=yes</span><span class='diff-deleted'> </span><span class='diff-deleted'>apt-get</span><span class='diff-deleted'> </span><span class='diff-deleted'>install</span><span class='diff-deleted'> </span><span class='diff-deleted'>aegir-hostmaster
</span></code><span class='diff-deleted'></span></pre><span class='diff-deleted'>

</span><div class="toc-back-to-top"><span class='diff-deleted'></span><a href="#toc"><span class='diff-deleted'>Back</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>top</span></a><span class='diff-deleted'></span></div><span class='diff-deleted'></span><h2 id="Upgrading_from_non-Debian_installs"><span class='diff-deleted'>3.</span><span class='diff-deleted'> </span><span class='diff-deleted'>Upgrading</span><span class='diff-deleted'> </span><span class='diff-deleted'>from</span><span class='diff-deleted'> </span><span class='diff-deleted'>non-Debian</span><span class='diff-deleted'> </span><span class='diff-deleted'>installs</span></h2><span class='diff-deleted'>

</span><p><span class='diff-deleted'>The</span><span class='diff-deleted'> </span><span class='diff-deleted'>Debian</span><span class='diff-deleted'> </span><span class='diff-deleted'>package</span><span class='diff-deleted'> </span><span class='diff-deleted'>supports</span><span class='diff-deleted'> </span><span class='diff-deleted'>migrating</span><span class='diff-deleted'> </span><span class='diff-deleted'>from</span><span class='diff-deleted'> </span><span class='diff-deleted'>existing</span><span class='diff-deleted'> </span><span class='diff-deleted'>installs.</span><span class='diff-deleted'> </span><span class='diff-deleted'>You</span><span class='diff-deleted'> </span><span class='diff-deleted'>will</span><span class='diff-deleted'> </span><span class='diff-deleted'>need</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>move</span><span class='diff-deleted'> </span><span class='diff-deleted'>/var/aegir/.drush/provision</span><span class='diff-deleted'> </span><span class='diff-deleted'>out</span><span class='diff-deleted'> </span><span class='diff-deleted'>of</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>way</span><span class='diff-deleted'> </span><span class='diff-deleted'>before</span><span class='diff-deleted'> </span><span class='diff-deleted'>going</span><span class='diff-deleted'> </span><span class='diff-deleted'>ahead:</span></p><span class='diff-deleted'>

</span><pre><span class='diff-deleted'></span><code><span class='diff-deleted'>tar</span><span class='diff-deleted'> </span><span class='diff-deleted'>cfz</span><span class='diff-deleted'> </span><span class='diff-deleted'>/var/aegir/backups/provision.tgz</span><span class='diff-deleted'> </span><span class='diff-deleted'>/var/aegir/.drush/provision
rm</span><span class='diff-deleted'> </span><span class='diff-deleted'>-rf</span><span class='diff-deleted'> </span><span class='diff-deleted'>/var/aegir/.drush/provision
</span></code><span class='diff-deleted'></span></pre><span class='diff-deleted'>

</span><p><span class='diff-deleted'>Then</span><span class='diff-deleted'> </span><span class='diff-deleted'>just</span><span class='diff-deleted'> </span><span class='diff-deleted'>install</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>package</span><span class='diff-deleted'> </span><span class='diff-deleted'>as</span><span class='diff-deleted'> </span><span class='diff-deleted'>if</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>were</span><span class='diff-deleted'> </span><span class='diff-deleted'>installing</span><span class='diff-deleted'> </span><span class='diff-deleted'>from</span><span class='diff-deleted'> </span><span class='diff-deleted'>scratch.</span></p><span class='diff-deleted'>

</span><div class="toc-back-to-top"><span class='diff-deleted'></span><a href="#toc"><span class='diff-deleted'>Back</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>top</span></a><span class='diff-deleted'></span></div><span class='diff-deleted'></span><h2 id="Custom_distributions"><span class='diff-deleted'>4.</span><span class='diff-deleted'> </span><span class='diff-deleted'>Custom</span><span class='diff-deleted'> </span><span class='diff-deleted'>distributions</span></h2><span class='diff-deleted'>

</span><p><span class='diff-deleted'>If</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>have</span><span class='diff-deleted'> </span><span class='diff-deleted'>your</span><span class='diff-deleted'> </span><span class='diff-deleted'>own</span><span class='diff-deleted'> </span><span class='diff-deleted'>makefile,</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>can</span><span class='diff-deleted'> </span><span class='diff-deleted'>go</span><span class='diff-deleted'> </span><span class='diff-deleted'>ahead</span><span class='diff-deleted'> </span><span class='diff-deleted'>with</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>above</span><span class='diff-deleted'> </span><span class='diff-deleted'>process,</span><span class='diff-deleted'> </span><span class='diff-deleted'>but</span><span class='diff-deleted'> </span><span class='diff-deleted'>change</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>makefile</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>one</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>want:</span></p><span class='diff-deleted'>

</span><pre><span class='diff-deleted'></span><code><span class='diff-deleted'>echo</span><span class='diff-deleted'> </span><span class='diff-deleted'>debconf</span><span class='diff-deleted'> </span><span class='diff-deleted'>aegir/makefile</span><span class='diff-deleted'> </span><span class='diff-deleted'>string</span><span class='diff-deleted'> </span><span class='diff-deleted'>/var/aegir/makefiles/aegir/aegir-koumbit.make</span><span class='diff-deleted'> </span><span class='diff-deleted'>|</span><span class='diff-deleted'> </span><span class='diff-deleted'>debconf-set-selections
apt-get</span><span class='diff-deleted'> </span><span class='diff-deleted'>install</span><span class='diff-deleted'> </span><span class='diff-deleted'>aegir
</span></code><span class='diff-deleted'></span></pre><span class='diff-deleted'>

</span><p><span class='diff-deleted'>This</span><span class='diff-deleted'> </span><span class='diff-deleted'>will</span><span class='diff-deleted'> </span><span class='diff-deleted'>make</span><span class='diff-deleted'> </span><span class='diff-deleted'>sure</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>are</span><span class='diff-deleted'> </span><span class='diff-deleted'>asked,</span><span class='diff-deleted'> </span><span class='diff-deleted'>during</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>upgrade,</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>specify</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>makefile</span><span class='diff-deleted'> </span><span class='diff-deleted'>path</span><span class='diff-deleted'> </span><span class='diff-deleted'>for</span><span class='diff-deleted'> </span><span class='diff-deleted'>your</span><span class='diff-deleted'> </span><span class='diff-deleted'>custom</span><span class='diff-deleted'> </span><span class='diff-deleted'>distribution</span><span class='diff-deleted'> </span><span class='diff-deleted'>of</span><span class='diff-deleted'> </span><span class='diff-deleted'>Aegir.</span></p><span class='diff-deleted'>

</span><div class="toc-back-to-top"><span class='diff-deleted'></span><a href="#toc"><span class='diff-deleted'>Back</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>top</span></a><span class='diff-deleted'></span></div><span class='diff-deleted'></span><h2 id="Rolling_back_the_upgrade"><span class='diff-deleted'>5.</span><span class='diff-deleted'> </span><span class='diff-deleted'>Rolling</span><span class='diff-deleted'> </span><span class='diff-deleted'>back</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>upgrade</span></h2><span class='diff-deleted'>

</span><p><span class='diff-deleted'>If</span><span class='diff-deleted'> </span><span class='diff-deleted'>something</span><span class='diff-deleted'> </span><span class='diff-deleted'>went</span><span class='diff-deleted'> </span><span class='diff-deleted'>wrong</span><span class='diff-deleted'> </span><span class='diff-deleted'>with</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>upgrade,</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>can</span><span class='diff-deleted'> </span><span class='diff-deleted'>rollback</span><span class='diff-deleted'> </span><span class='diff-deleted'>by</span><span class='diff-deleted'> </span><span class='diff-deleted'>deleting</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>hostmaster</span><span class='diff-deleted'> </span><span class='diff-deleted'>site</span><span class='diff-deleted'> </span><span class='diff-deleted'>and</span><span class='diff-deleted'> </span><span class='diff-deleted'>redeploying</span><span class='diff-deleted'> </span><span class='diff-deleted'>on</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>older</span><span class='diff-deleted'> </span><span class='diff-deleted'>platform:</span></p><span class='diff-deleted'>

</span><p><span class='diff-deleted'></span><div class="codeblock"><span class='diff-deleted'></span><code><span class='diff-deleted'>drush</span><span class='diff-deleted'> </span><span class='diff-deleted'>@hostmaster</span><span class='diff-deleted'> </span><span class='diff-deleted'>provision-delete</span><br /><span class='diff-deleted'>vi</span><span class='diff-deleted'> </span><span class='diff-deleted'>~/.drush/hostmaster.alias.drushrc.php</span><br /><span class='diff-deleted'>drush</span><span class='diff-deleted'> </span><span class='diff-deleted'>@hostmaster</span><span class='diff-deleted'> </span><span class='diff-deleted'>provision-deploy</span><span class='diff-deleted'> </span><span class='diff-deleted'>~/backups/hostmaster.date.tgz</span></code><span class='diff-deleted'></span></div><span class='diff-deleted'></span></p><span class='diff-deleted'>

</span><p><span class='diff-deleted'>The</span><span class='diff-deleted'> </span><span class='diff-deleted'>trick</span><span class='diff-deleted'> </span><span class='diff-deleted'>is</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>change</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>alias</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>make</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>following</span><span class='diff-deleted'> </span><span class='diff-deleted'>changes:</span></p><span class='diff-deleted'>

</span><ol><span class='diff-deleted'>
</span><li><span class='diff-deleted'>change</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>platform</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>point</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>older</span><span class='diff-deleted'> </span><span class='diff-deleted'>platform</span><span class='diff-deleted'> </span><span class='diff-deleted'>alias</span></li><span class='diff-deleted'>
</span><li><span class='diff-deleted'>change</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>platform</span><span class='diff-deleted'> </span><span class='diff-deleted'>root</span><span class='diff-deleted'> </span><span class='diff-deleted'>path</span></li><span class='diff-deleted'>
</span><li><span class='diff-deleted'>change</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>site</span><span class='diff-deleted'> </span><span class='diff-deleted'>path</span></li><span class='diff-deleted'>
</span></ol><span class='diff-deleted'>

</span><p><span class='diff-deleted'>During</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>upgrade,</span><span class='diff-deleted'> </span><span class='diff-deleted'>a</span><span class='diff-deleted'> </span><span class='diff-deleted'>backup</span><span class='diff-deleted'> </span><span class='diff-deleted'>was</span><span class='diff-deleted'> </span><span class='diff-deleted'>done</span><span class='diff-deleted'> </span><span class='diff-deleted'>and</span><span class='diff-deleted'> </span><span class='diff-deleted'>you</span><span class='diff-deleted'> </span><span class='diff-deleted'>need</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>find</span><span class='diff-deleted'> </span><span class='diff-deleted'>which</span><span class='diff-deleted'> </span><span class='diff-deleted'>backup</span><span class='diff-deleted'> </span><span class='diff-deleted'>file</span><span class='diff-deleted'> </span><span class='diff-deleted'>it</span><span class='diff-deleted'> </span><span class='diff-deleted'>was</span><span class='diff-deleted'> </span><span class='diff-deleted'>in</span><span class='diff-deleted'> </span><span class='diff-deleted'>the</span><span class='diff-deleted'> </span><span class='diff-deleted'>backups</span><span class='diff-deleted'> </span><span class='diff-deleted'>directory.</span></p><span class='diff-deleted'></span><div class="toc-back-to-top"><span class='diff-deleted'></span><a href="#toc"><span class='diff-deleted'>Back</span><span class='diff-deleted'> </span><span class='diff-deleted'>to</span><span class='diff-deleted'> </span><span class='diff-deleted'>top</span></a><span class='diff-deleted'></span></div><span class='diff-deleted'></span><script type="text/javascript"><span class='diff-deleted'>toc_scroll_back_to_top</span><span class='diff-deleted'> </span><span class='diff-deleted'>=</span><span class='diff-deleted'> </span><span class='diff-deleted'>1;</span></script></div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-311.html?destination=node%2F432%23comment-form">Login</a> or <a href="../../../../../user/register/index-311.html?destination=node%2F432%23comment-form">register</a> to post comments</span></li>
<li class="print active"><a href="index-2.html?print" class="active">Print</a></li>
<li class="print_recurse active"><a href="index-3.html?print&amp;book_recurse" class="active">Print entire section</a></li>
<li class="talk_comments last"><a href="../../../talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>


<div id="comments">
  <a id="comment-2081"></a>


<div  id="comment-2081" class="comment comment-published clear-block decay-0 decay-0">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/dman/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="dman&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/dman/index.html" class="username" title="View user profile.">dman</a></div><div class='date'>11:56pm Nov 26, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-2081">#1</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>In the course of a normal update (adding php5-xsl) we were a little worried by the following messages:
<div class="codeblock"><code>The following extra packages will be installed:<br />&nbsp; aegir-provision (..other php5 updates..) <br />The following packages will be REMOVED:<br />&nbsp; aegir aegir-hostmaster (..other php5 updates..)</code></div>
This - threatening to REMOVE an existing working Aegir infrastructure was a bit scary. Even if it will (probably?) be replaced.
The original install was from koumbit yeah.</p>

<p>I'd have liked to see a message on this wiki page saying "If you get this message, it's OK to say 'Yes' and everything will be replaced safely". If that is the case...
It is worrying. Can this be clarified?</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-311.html?destination=node%2F432%23comment-form">Login</a> or <a href="../../../../../user/register/index-311.html?destination=node%2F432%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


</div>
    </div>
      </div>
</body>


<!-- Mirrored from community.aegirproject.org/node/432/revisions/1484/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:07:56 GMT -->
</html>
