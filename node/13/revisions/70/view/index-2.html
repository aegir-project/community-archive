<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from community.aegirproject.org/node/13/revisions/70/view?print by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:00:57 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="prev" href="../../../../../help/index.html" />
<link rel="up" href="../../../../../help/index.html" />
<link rel="next" href="../../../../../contact/index.html" />
<link rel="prev" href="../../../../../help/index.html" />
<link rel="up" href="../../../../../help/index.html" />
<link rel="next" href="../../../../../contact/index.html" />
<link rel="prev" href="../../../../../help/index.html" />
<link rel="up" href="../../../../../help/index.html" />
<link rel="next" href="../../../../../contact/index.html" />
<link rel="canonical" href="index.html" />
<link rel="shortcut icon" href="../../../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="print" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />

  <title>Revision of Troubleshooting Aegir from Wed, 10/27/2010 - 06:16 | community.aegirproject.org</title>
</head>

<body  class="print rubik admin-static page">
  <div class='limiter clear-block'>
    <div id='content' class='clear-block'>
      <div class='print-header'>
      <h1 class='site-name'>community.aegirproject.org</h1>
  </div>
      

<div  id="node-13" class="node node-book clear-block node-page">
  
      <h2 class='node-title'>
            <a href="../../../../../aegir-handbook/getting-help/troubleshooting-aegir/index.html">Troubleshooting Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div id='diff-inline-13'><div class='diff-inline-metadata clear-block'><div class='diff-inline-byline'>Updated by <a href="../../../../../users/mig5/index.html" class="username" title="View user profile.">mig5</a> on 10/27/2010 - 06:16</div><div class='diff-inline-legend clear-block'><label>Legend</label><span class='diff-added'>Added</span><span class='diff-changed'>Changed</span><span class='diff-deleted'>Deleted</span></div></div><p><span class='diff-changed'>Aegir </span><span class='diff-added'>undergoes rigorous testing, but no actively-developed software ever escapes bugs.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>If you feel you have encountered a bug, the FAQ is the first place to check if there's a simple solution.</span></p><span class='diff-added'>

</span><h1><span class='diff-added'>Common installation and configuration errors</span></h1><span class='diff-added'>

</span><p>Aegir<span class='diff-added'> is a more complex product than your average Drupal site. Something that has far-reaching control over bits of your server and your sites results in more bits and pieces working together, and inevitably it becomes possible to misconfigure, break, or miss setting up any one of these components.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>The installation and upgrade procedure has evolved from these pains to becoming something almost purely automated. Nonetheless, making a mistake during the installation of Aegir or Drush is still easy to do, and these tips identify the most common mistakes.</span></p><span class='diff-added'>

</span><h2><span class='diff-added'>The Aegir User</span></h2><span class='diff-added'>

</span><p><span class='diff-added'>Make sure you have an aegir user (who we call the Aegir User) and that the Aegir User is properly configured on your server.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>Typing 'id aegir' on your system should print something like this as output.</span></p><span class='diff-added'>

</span><p><span class='diff-added'></span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>aegir:~# id aegir</span><br /><span class='diff-added'>uid=104(aegir) gid=108(aegir) groups=108(aegir),33(www-data)</span></code><span class='diff-added'></span></div><span class='diff-added'></span></p><span class='diff-added'>

</span><p><span class='diff-added'>If you don't want to use a user called 'aegir' for the installation, that's possible (albeit not recommended). Be cautious about using a different username, and do not use an existing user or a user that will have any other role on the server. The Aegir User has certain privileges and should only be used for Aegir activities.</span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Aegir User's home directory</span></h2><span class='diff-added'>

</span><p><span class='diff-added'>Verify the Aegir install directory is the user's home. In a standard installation, the Aegir directory is /var/aegir.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>Be cautious about installing Aegir in a different directory - it is easy to get confused since nearly all the documentation tries to be consistent by assuming you have used /var/aegir and you'll otherwise constantly have to translate this mentally when trying to learn.</span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Aegir User as script user</span></h2><span class='diff-added'>

</span><p><span class='diff-added'>Make sure that the 'Server' node in your Aegir system (this is usually the node located at /node/2) lists the 'Script User' as being your Aegir User. You can also find this node by clicking on the Servers menu tab and then clicking on the server URI shown in the list that appears of Aegir-managed servers. In a basic installation, there is only one server.</span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Do not run as root</span></h2><span class='diff-added'>

</span><p><span class='diff-added'>Do not run aegir as root! It's an unsafe and unsupported configuration that is known to cause problems.</span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Drush</span></h2><span class='diff-added'>

</span><p><span class='diff-added'>A standard Aegir installation will check that Drush is functioning properly, or if it doesn't find Drush at all, will install it for you.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>Always run drush as your aegir user, and never as "root".</span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Provision</span></h2><span class='diff-added'>

</span><p><span class='diff-added'>Make sure that the Provision module is in the aegir/.drush/provision/ directory. A standard Aegir installation will install this for you.</span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Apache</span></h2><span class='diff-added'>

</span><p><span class='diff-added'>Make sure the Aegir User can restart Apache without a password and that the corresponding command is defined in your Aegir 'Server' node.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>As your Aegir User, run the command shown in the "Restart command" field in your Aegir 'Server' node to ensure that your Aegir User can in fact restart Apache (if not, see the Sudo information below).</span></p><span class='diff-added'>

</span><p><span class='diff-added'>On Debian/Ubuntu, the command sudo /usr/sbin/apache2ctl graceful. The command should execute and return without asking for a password when run as the Aegir User.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>Make sure Apache can parse its configuration without syntax errors. On Ubuntu, sudo apache2ctl configtest should report "Syntax OK".</span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Sudo</span></h2><span class='diff-added'>

</span><p><span class='diff-added'>Check that the aegir user is in your /etc/sudoers file with the permission to restart Apache. Instructions and an example for doing this are contained in the INSTALL.txt.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>On a Linux system, check that /etc/sudoers is chmod 440 (i.e., read only for the file owner and group, which is usually root)</span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Attempt to run the task queue manually from the command line</span></h2><span class='diff-added'>

</span><p><span class='diff-added'></span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>php /var/aegir/drush/drush.php @hostmaster hosting-tasks --debug</span></code><span class='diff-added'></span></div><span class='diff-added'></span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Run a specific task in the queue from the command line</span></h2><span class='diff-added'>

</span><p><span class='diff-added'></span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>php /var/aegir/drush/drush.php @hostmaster hosting-task &lt;nid of the task&gt; --debug</span></code><span class='diff-added'></span></div><span class='diff-added'></span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Run the 'Cron' queue manually from the command line</span></h2><span class='diff-added'>

</span><p><span class='diff-added'></span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>php /var/aegir/drush/drush.php @hostmaster hosting-cron --debug</span></code><span class='diff-added'></span></div><span class='diff-added'></span></p></div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-31.html?destination=node%2F13%23comment-form">Login</a> or <a href="../../../../../user/register/index-31.html?destination=node%2F13%23comment-form">register</a> to post comments</span></li>
<li class="print active"><a href="index-2.html?print" class="active">Print</a></li>
<li class="print_recurse active"><a href="index-3.html?print&amp;book_recurse" class="active">Print entire section</a></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-31.html?destination=node%2F13%23comment-form">Login</a> or <a href="../../../../../user/register/index-31.html?destination=node%2F13%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


    </div>
      </div>
</body>


<!-- Mirrored from community.aegirproject.org/node/13/revisions/70/view?print by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:00:57 GMT -->
</html>
