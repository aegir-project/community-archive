<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from community.aegirproject.org/node/24/revisions/172/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:01:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="prev" href="../../../../../content/renaming-aegir-hostmaster-site-itself/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../25/index.html" />
<link rel="prev" href="../../../../../content/renaming-aegir-hostmaster-site-itself/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../25/index.html" />
<link rel="prev" href="../../../../../content/renaming-aegir-hostmaster-site-itself/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../25/index.html" />
<link rel="canonical" href="index.html" />
<link rel="shortcut icon" href="../../../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="print" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />

  <title>Revision of Cloning websites from Wed, 11/03/2010 - 01:35 | community.aegirproject.org</title>
</head>

<body  class="print rubik admin-static page">
  <div class='limiter clear-block'>
    <div id='content' class='clear-block'>
      <div class='print-header'>
      <h1 class='site-name'>community.aegirproject.org</h1>
  </div>
      

<div  id="node-24" class="node node-book clear-block node-page">
  
      <h2 class='node-title'>
            <a href="../../../index.html">Cloning websites</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div id='diff-inline-24'><div class='diff-inline-metadata clear-block'><div class='diff-inline-byline'>Updated by <a href="../../../../../users/mig5/index.html" class="username" title="View user profile.">mig5</a> on 11/03/2010 - 01:35</div><div class='diff-inline-legend clear-block'><label>Legend</label><span class='diff-added'>Added</span><span class='diff-changed'>Changed</span><span class='diff-deleted'>Deleted</span></div></div><p><span class='diff-added'>Aegir provides an easy method of making entire copies of a site. This includes the actual site files, modules and so on, as well as a copy of the actual database.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>This feature is called 'Clone' in Aegir, because it is a method of duplicating a site with a new URL or 'site name'.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>The feature is very closely linked to the </span><a href="../../../../23/index.html"><span class='diff-added'>Migrate</span></a><span class='diff-added'> feature because it is almost the same, except that rather than move the site, it leaves the existing site in place and just copies it to a new name.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>For this reason, enabling the Clone feature also enables the Migrate feature.</span></p><span class='diff-added'>

</span><h2><span class='diff-added'>Enabling Clone</span></h2><span class='diff-added'>

</span><p><span class='diff-added'>The Clone feature is disabled by default on a fresh Aegir installation. To enable it, visit </span><code><span class='diff-added'>/admin/hosting/features</span></code><span class='diff-added'> in your Aegir frontend, check the 'Clone' box and submit the form.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>Now when you visit a site node in your frontend, you'll see there's a 'Clone' button in your list of available tasks for the site.</span></p><span class='diff-added'>

</span><h2>Cloning <span class='diff-changed'>a site</span></h2><span class='diff-changed'>

</span><p><span class='diff-changed'>To clone a site, simply click the Clone button. A modalframe dialog will appear with a form. If you are familiar with the Migrate feature, you'll likely notice the similarities between the two forms.</span></p><span class='diff-changed'>

</span><p><span class='diff-changed'>The clone form has these options:</span></p><span class='diff-changed'>

</span><ul><span class='diff-changed'>
</span><li><span class='diff-changed'></span><strong><span class='diff-changed'>Domain name</span></strong><span class='diff-changed'> - this is the URL for the new site, which must be unique.</span></li><span class='diff-changed'>
</span><li><span class='diff-changed'></span><strong><span class='diff-changed'>Platform</span></strong><span class='diff-changed'> - this is the target platform to clone the site to. It may be the current platform or a different platform that meets the requirements for hosting this site (has all the correct or newer versions of relevant modules)</span></li><span class='diff-changed'>
</span><li><span class='diff-changed'></span><strong><span class='diff-changed'>Database server</span></strong><span class='diff-changed'> - this option is only available if you have a remote database server configured, otherwise it is implied.</span></li><span class='diff-changed'>
</span></ul><span class='diff-changed'>

</span><p><span class='diff-changed'>As with the Migrate form, you can view the package comparison table between the current platform of the original site and that of a target platform, by clicking the 'Compare platforms' link. You can only clone a site to another platform if it meets the requirements for successfully hosting that site. In other words, the target platform has to contain the same or newer versions of modules. If the packages are missing on the target platform, those missing modules may be disabled.</span></p><span class='diff-changed'>

</span><p><span class='diff-changed'>Once you have made your selection and submitted the form, a 'Clone' task is spawned and added to the Task queue ready for dispatching.</span></p><span class='diff-changed'>

</span><h2><span class='diff-changed'>What Clone does</span></h2><span class='diff-changed'>

</span><p><span class='diff-changed'>The Clone task makes the following actions in the system:</span></p><span class='diff-changed'>

</span><ul><span class='diff-changed'>
</span><li><span class='diff-changed'>Makes a backup of the original site. This tarball will be used to 'deploy' a copy of the site</span></li><span class='diff-changed'>
</span><li><span class='diff-changed'>Generates a new Drush alias for the new site</span></li><span class='diff-changed'>
</span><li><span class='diff-changed'>Deploys the backup tarball to the new location as a new site</span></li><span class='diff-changed'>
</span><li><span class='diff-changed'>The new site is imported and verified into the Aegir system, and relevant configurations are saved (HTTP vhost file, etc)</span></li><span class='diff-changed'>
</span></ul><span class='diff-changed'>

</span><h2><span class='diff-changed'>When might I want to use Clone?</span></h2><span class='diff-changed'>

</span><p><span class='diff-changed'>Clone can be a very useful tool in a variety of situations. Commonly, people use Clone for:</span></p><span class='diff-changed'>

</span><ul><span class='diff-changed'>
</span><li><span class='diff-changed'>Testing what a 'Migrate' might do to a site, without migrating it. In other words, Clone can be used as a simulation tool to anticipate results of upgrading a site to a new release or build safely.</span></li><span class='diff-changed'>
</span><li><span class='diff-changed'>If you have a 'template' site, often with a custom install profile, and anticipate having to generate multiple sites that are very similar, you can use Clone to rapidly do this.</span></li><span class='diff-changed'>
</span><li><span class='diff-changed'>Cloning a live site to a 'development' version of a site, especially to a development platform residing on a remote 'development' web server, can be a useful and fast method of working on a site by ensuring the dev environment has the latest database and files from production.</span></li><span class='diff-changed'>
</span></ul><span class='diff-changed'>

</span><h2><span class='diff-changed'>Is there any relationship between the original and cloned site?</span></h2><span class='diff-changed'>

</span><p><span class='diff-changed'>Currently there is no real relationship between the original site and any of its clones.</span></p><span class='diff-changed'>

</span><p><span class='diff-changed'>In future, Aegir development is likely to develop natural relationships between these sites, which will allow for 'rules' to be established, for example</span></p><span class='diff-changed'>

</span><ul><span class='diff-changed'>
</span><li><span class='diff-changed'>being able to regularly 're-clone' a site 'over the top' of previously-made clone, or</span></li><span class='diff-changed'>
</span><li><span class='diff-changed'>automatically schedule clones after the original site has been migrated (upgraded) to keep a clone 'up to date' with the original.</span></li><span class='diff-changed'>
</span></ul><span class='diff-changed'>

</span><p><span class='diff-changed'>Other uses may develop in time.</span></p></div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-302.html?destination=node%2F24%23comment-form">Login</a> or <a href="../../../../../user/register/index-302.html?destination=node%2F24%23comment-form">register</a> to post comments</span></li>
<li class="print active"><a href="index-2.html?print" class="active">Print</a></li>
<li class="print_recurse active"><a href="index-3.html?print&amp;book_recurse" class="active">Print entire section</a></li>
<li class="talk_comments last"><a href="../../../talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>


<div id="comments">
  <a id="comment-1983"></a>


<div  id="comment-1983" class="comment comment-published clear-block decay-10 decay-10">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/dman/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="dman&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/dman/index.html" class="username" title="View user profile.">dman</a></div><div class='date'>2:13am Jul 29, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1983">#1</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>Although the front-end does not yet permit you to re-clone over the top of an existing site, this is possible at the lower level by using the drush CLI adn provision-clone.
<div class="codeblock"><code>&nbsp;&nbsp; drush $phase2site provision-clone $phase3site $phase3platform</code></div>
eg I have several platforms in the same project and continuously rebuild them (as part of a trial upgrade migration) so I need to copy between phase2 and phase3
<div class="codeblock"><code>&nbsp;&nbsp; drush @phase2d7.projectname.devhost provision-clone @phase3d7.projectname.devhost @platform_ProjectnameD7Phase3</code></div></p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-302.html?destination=node%2F24%23comment-form">Login</a> or <a href="../../../../../user/register/index-302.html?destination=node%2F24%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-2064"></a>


<div  id="comment-2064" class="comment comment-published clear-block decay-0 decay-0">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/dman/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="dman&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/dman/index.html" class="username" title="View user profile.">dman</a></div><div class='date'>10:23pm Oct 30, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-2064">#2</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>Further to the above - though it seems to re-clone - it does not delete the original DB - you end up with a new DB each time (numbered incrementally) and the old one is detached and becomes unused, but never deleted.</p>

<p>Suggestion : to re-clone, you really do have to delete the target, then clone anew.</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-302.html?destination=node%2F24%23comment-form">Login</a> or <a href="../../../../../user/register/index-302.html?destination=node%2F24%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


</div>
    </div>
      </div>
</body>


<!-- Mirrored from community.aegirproject.org/node/24/revisions/172/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:01:45 GMT -->
</html>
