<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from community.aegirproject.org/node/14/revisions/1697/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 16:19:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="prev" href="../../../../../project-history/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="prev" href="../../../../../project-history/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="prev" href="../../../../../project-history/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="canonical" href="index.html" />
<link rel="prev" href="../../../../../faq/index.html" />
<link rel="up" href="../../../../../faq/index.html" />
<link rel="next" href="../../../../../intro/case-studies/index.html" />
<link rel="shortcut icon" href="../../../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="print" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />

  <title>Revision of FAQ from Mon, 04/18/2011 - 12:38 | community.aegirproject.org</title>
</head>

<body  class="print rubik admin-static page">
  <div class='limiter clear-block'>
    <div id='content' class='clear-block'>
      <div class='print-header'>
      <h1 class='site-name'>community.aegirproject.org</h1>
  </div>
      

<div  id="node-14" class="node node-book clear-block node-page">
  
      <h2 class='node-title'>
            <a href="../../../../../faq/index.html">FAQ</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><div id='diff-inline-14'><div class='diff-inline-metadata clear-block'><div class='diff-inline-byline'>Updated by <a href="../../../../../users/mig5/index.html" class="username" title="View user profile.">mig5</a> on 04/18/2011 - 12:38</div><div class='diff-inline-legend clear-block'><label>Legend</label><span class='diff-added'>Added</span><span class='diff-changed'>Changed</span><span class='diff-deleted'>Deleted</span></div></div><h2>Contents</h2>

<h1><a href="#help">Help!</a></h1>

<ol>
  <li><a href="#helpwhere">Where can I get help?</a></li>
  <li><a href="#ask">Can I ask you a question?</a></li>
  <li><a href="#devs">Who are the Aegir developers?</a></li>
  <li><a href="#givehelp">I'd like to help out / become a developer!</a></li>
</ol>

<h1><a href="#installing">Installing Aegir</a></h1>

<ol>
  <li><a href="#sharedhosting">Can I run Aegir on a shared hosting environment?</a></li>
  <li><a href="#windows">Can I run Aegir on Windows?</a></li>
  <li><a href="#cpanel">Can Aegir be installed next to CPanel/Plesk/AlternC/etc?</a></li>
  <li><a href="#barracuda">Where can I get support for Barracuda/Octopus Aegir?</a></li><span class='diff-added'>
  </span><li><span class='diff-added'>Do I really need to create an aegir user?</span></li>
</ol>

<h1><a href="#using">Using Aegir</a></h1>

<ol>
  <li><a href="#cron">The cron isn't running (scheduled tasks/cron on sites aren't being executed), what do I do ?</a></li>
  <li><a href="#drushdebug">How do I get debug/verbose info from Drush when running the hosting commands ?</a></li>
  <li><a href="#modules">How do I update a sites modules using aegir?</a></li>
  <li><a href="#vhostalias">Is it best to set up sites under aegir as <a href="http://www.example.com/" title="www.example.com">www.example.com</a> or just as example.com ? The aim is for both to resolve to the same.</a></li>
  <li><a href="#ssl">How can I setup a site to use https:// under Aegir?</a></li>
  <li><a href="#fileperms">Aegir is not verifying / deleting / migrating my site because of file permission problems.</a></li>
  <li><a href="#memlimit">I can verify a platform but Aegir fails to provision a site on it (often OpenAtrium)</a></li>
  <li><a href="#namespace">A platform with an installation profile has verified okay, but Aegir doesn't seem to be able to use the profile</a></li>
  <li><a href="#patch">What is a patch or 'hotfix', and how can I apply it to fix my site if I can't / don't want to upgrade to HEAD?</a></li>
  <li><a href="#sitedir">I followed the installation instructions.  What directory holds all of my sites now?</a></li>
  <li><a href="#sitecreatefailed">I tried to create a site, but the create task failed and retries don't succeed.  How do I delete the partially created site and associated Aegir tasks?</a></li>
  <li><a href="#migratefailed">I tried to migrate a site, but Aegir incorrectly reported an incompatibility between one or more modules in my source and destination platforms.  How do I force Aegir to see that the two platforms are compatible?</a></li>
  <li><a href="#htaccess">What about .htaccess settings?</a></li>
  <li><a href="#findver">How can I tell what version of Aegir I have installed?</a></li>
  <li><a href="#symlinks">I'm using symlinks (perhaps to a GIT repo) and crazy things are happening!</a></li>
  <li><a href="#dbname">How can I tell what database name my site is using?</a></li>
  <li><a href="#subdir">Can I use the subdirectory multisite feature of Drupal in Aegir?</a> (AKA example.com/site1 and example.com/site2)</li>
</ol>

<h1><a name="help">Help!</a></h1>

<h2><a name="helpwhere">1) Where can I get help?</a></h2>

<p>From the <a href="http://groups.drupal.org/node/4701/documentation">Documentation</a> (which should be the first place you look) :</p>

<p>The Issue Queue for all the projects that make up Aegir is here: <a href="http://is.gd/ek2Dl" title="http://is.gd/ek2Dl">http://is.gd/ek2Dl</a></p>

<p>This is the first place to look - chances are someone's had the same problem as you before, and you'll get the quickest answers by searching for what they discovered.</p>

<p>Before asking a question or reporting an issue, you should read <a href="http://groups.drupal.org/node/21890">the bug reporting guidelines</a>.</p>

<p>You can join the #aegir channel at Freenode on IRC. (IRC instructions for drupal users are at: <a href="http://drupal.org/irc" title="http://drupal.org/irc">http://drupal.org/irc</a>). It's a friendly community, but a small one, so ask nicely and be patient!</p>

<p>If you find a solution to a problem that isn't in the documentation or in this FAQ, be the first to login and edit these pages to bring them up to date! The rest of the community thrives on your helpful information!</p>

<h2><a name="ask">2) Can I ask you a question?</a></h2>

<p>Of course you can! Don't ask to ask, just ask! It is polite to look if the question has already been answered in the documentation, the issue queue or here, but if not, please do ask around! If you ask a question and we have a nice answer, you can even add it to the FAQ here so that others can have your valuable answer.</p>

<h2><a name="devs">3) Who are the Aegir developers?</a></h2>

<p>The Aegir core developers are listed on the <a href="../../../../../maintainers/index.html">Aegir maintainers page</a>.</p>

<h2><a name="givehelp">4) I'd like to help out / become a developer!</a></h2>

<p>We love people who want to help and get involved! <a href="../../../../../howtohelp/index.html">We even made a page for you to read</a>.</p>

<h1><a name="installing">Installing Aegir</a></h1>

<h2><a name="sharedhosting">1) Can I run Aegir on a shared hosting environment?</a></h2>

<p>Shared hosting will not give you enough permissions to install new sites. Toughen up, read some Linux beginners tutorials and buy a cheap VPS which will do nicely.</p>

<h2><a name="windows">2) Can I run Aegir on Windows?</a></h2>

<p>To install Aegir you need a unix based operating system. Aegir will not work on Windows and there are no plans to add support for it.</p>

<h2><a name="cpanel">3) Can Aegir be installed next to CPanel/Plesk/AlternC/etc?</a></h2>

<p>No, or rather "it's not supported". See <a href="http://drupal.org/node/587554" title="http://drupal.org/node/587554">http://drupal.org/node/587554</a></p>

<h2><a name="barracuda">4) Where can I get support for Barracuda/Octopus Aegir?</a></h2>

<p>Barracuda/Octopus are custom scripts for Aegir that install or set up various things that Aegir doesn't do out of the box. This is a custom solution tailored to Nginx systems, provided by <a href="http://omega8.cc/">Omega8.cc</a> and is not officially supported by the core Aegir project or team. For help or more information, please visit <a href="https://github.com/omega8cc/nginx-for-drupal" title="https://github.com/omega8cc/nginx-for-drupal">https://github.com/omega8cc/nginx-for-drupal</a></p><span class='diff-added'>

</span><h2><span class='diff-added'></span><a name="user"><span class='diff-added'>5) Do I really need to create an aegir user?</span></a><span class='diff-added'></span></h2><span class='diff-added'>

</span><p><span class='diff-added'>If you have a UNIX system, you already have a </span><em><span class='diff-added'>user</span></em><span class='diff-added'>. It just needs to not be root for safety reasons. But you don't really have to </span><em><span class='diff-added'>create</span></em><span class='diff-added'> a user.</span></p>

<h1><a name="using">Using Aegir</a></h1>

<h2><a name="cron">1) Cron isn't running (scheduled tasks aren't being executed), what do I do?</a></h2>

<p>At the shell prompt as the aegir user, type 
<div class="codeblock"><code>crontab -e</code></div></p>

<p>a) If you get an error that the command is not found, then you need to install cron on your server (some basic images don't include it - Linode's Ubuntu 9.04 image is one):
<div class="codeblock"><code>sudo apt-get install cron</code></div>
Now go back to the directory /var/aegir/drupal-6.19 and re-execute the hosting dispatch:
<div class="codeblock"><code>/var/aegir/drush/drush.php @hostmaster hosting-setup</code></div>
Type 'crontab -e' again.</p>

<p>b) You should see the default entry: 
<div class="codeblock"><code>*/1 * * * * (php&nbsp; &#039;/&lt;path to drush&gt;/drush.php&#039; @hostmaster hosting-dispatch</code></div></p>

<p>But if this is still not working it may well be a permissions issue. An example error :
<div class="codeblock"><code>Forking : (php /&lt;path to drush&gt;/drush.php&nbsp; --quiet @hostmaster&nbsp; &#039;hosting&#039; &#039;task&#039; &#039;266&#039; --backend &amp;) &gt; /dev/null [0.432 sec]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [notice]<br />sh: /dev/null: Permission denied</code></div></p>

<p>This means the system doesn't have permissions to access /dev/null. To resolve it, give the system permissions to write to /dev/null (it should have this anyway), by executing:
<div class="codeblock"><code>sudo chmod a+w /dev/null</code></div></p>

<p>c) If this still hasn't worked, have you moved the location of drush?
If so - see <a href="http://drupal.org/node/540152" title="http://drupal.org/node/540152">http://drupal.org/node/540152</a></p>

<p>d)  If you are a *BSD user (verified on freebsd at least) 
You need to add the line :
<code>PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin</code> at the TOP of your cron file.
Simply log in as the aegir user and type crontab -e and insert the above line on top.
Thanks goes to mauror  for <a href="http://drupal.org/node/323732" title="http://drupal.org/node/323732">http://drupal.org/node/323732</a>.</p>

<p>e) When cron for your sites stops working, it is possible that for some reason (system overload, broken site, timeout etc), Aegir failed to release a sites cron semaphore. To release it, use this simple recipe:</p>

<p><div class="codeblock"><code>$ su -s /bin/bash - aegir<br />$ cd /path/to/hostmaster/sites/domain<br />$ drush vdel hosting_queue_cron_running -y</code></div></p>

<h2><a name="drushdebug">2) How do I get debug/verbose info from Drush when running the hosting commands?</a></h2>

<p>Add these to the drush call :</p>

<p><div class="codeblock"><code>--debug</code></div></p>

<p>If you're having specific problems when using the frontend, you can easily run the hosting commands from the command line by:</p>

<ol>
<li>Click the view button and then copy the Drush command which was executed at the top of the log;</li>
<li>While logged in as the aegir user, paste the command in at the terminal and replace --backend with --debug at the end of the commandline.</li>
</ol>

<h2><a name="modules">3) How do I update a site's or platform's modules using Aegir?</a></h2>

<p>Aegir isn't a package management GUI for installing modules or themes on your site.</p>

<p>It's designed to help manage your site between builds. To upgrade sites, you should be using the <a href="../../../../23/index.html">Migrate tool</a> to move your site between two platforms, which invokes drush updatedb.</p>

<p><strong>If you aren't ready for this paradigm, and are frustrated that Aegir isn't some GUI for wildly updating or installing new modules with no regards for rollback or dealing with when it will inevitably break your site, Aegir is probably not for you.</strong></p>

<h2><a name="vhostalias">4) Is it best to set up sites under aegir as <a href="http://www.example.com/" title="www.example.com">www.example.com</a> or just as example.com?</a></h2>

<p>Aegir supports either method and can even automatically create whichever one you didn't use as the main site name. Read more about Aliases and this feature in our <a href="../../../../60/index.html">documentation</a>.</p>

<h2><a name="ssl">5) How can I setup a site to use https:// under Aegir?</a></h2>

<p>Aegir ships with an experimental SSL feature, but currently doesn't provide any means of managing SSL certificates.</p>

<p>You can follow the ongoing SSL work <a href="http://drupal.org/project/issues/search/hostmaster?issue_tags=aegir-ssl">here</a>.</p>

<p>In the meantime, to set up SSL with basic self-signed certs, follow our <a href="../../../../29/index.html">documentation</a>.</p>

<h2><a name="fileperms">6) Aegir is not verifying / deleting / migrating my site because of file permission problems.</a></h2>

<p>Aegir releases prior to 0.3 RC3 encountered an error when the web server has uploaded files and made new directory in the sites/$url/files directory. A prevalent example of this occurring is with the color module and when imagecache is used (such as in atrium).</p>

<p>This bug (see: <a href='http://drupal.org/node/203204'>#203204</a> ) was introduced with Drupal 6, and has since been fixed with Drupal 7. The patch has however not been backported yet, and the patch won't fix existing files that were created incorrectly.</p>

<p>In Aegir 0.3 RC3 we introduced a work around which sets the umask for the site, which forces new files and directories to be the correct permissions, but this will only take effect after the site has been succesfully verified. To enforce the correct file ownership and permissions on the files, run the following command on each of your Drupal 6 platforms :</p>

<p><div class="codeblock"><code>&nbsp; sudo chown -R $aegir_user $platform/sites/*/files</code></div></p>

<p>This will allow the verify task to correctly set the permissions and succesfully modify/remove the files.</p>

<h2><a name="memlimit">7) I can verify a platform but Aegir fails to provision a site on it (often OpenAtrium)</a></h2>

<p>A premature failure of a site install with an unhelpful message such as 'The external command could not be executed due to an application error' often, but not always, means your php-cli's memory_limit is set too low.</p>

<p>To confirm that this is an issue, try running drush @example.org provision-verify --debug from the command line to find out what caused the problem. Remember to replace 'example.org' with the URL of the site you are trying to verify.</p>

<p>Raise your memory_limit in your php cli php.ini file to something like 128MB, or maybe 64MB if that's too much. On Debian-based distributions this is /etc/php5/cli/php.ini. Apache does not need a restart for this: installations fail because the command is being executed via drush using php cli.</p>

<p>This is a common issue for OpenAtrium as it requires more memory to run its install profile as it has a lot more to do than a regular Drupal install.</p>

<h2><a name="namespace">8) A platform with an installation profile has verified okay, but Aegir doesn't seem to be able to use the profile</a></h2>

<p>Your platform has been setup and verified okay, but when you go to create a new site Aegir keeps giving an error message about the profile, or the list doesn't offer you the profile you're expecting. This could be a namespace issue. Modules, themes and profiles in Drupal all have a machine name - which is essentially their folder name. This is also used to prefix their functions etc, so that there are no clashes.
What isn't often recognised or well documented is that Drupal has a single namespace for all items - so your themes, modules and install profiles can't have the same name as each other.
Often an installation profile will be created called 'OpenPotato' and the theme for it will also be called 'OpenPotato'. This makes Drupal unhappy, and when Drupal's unhappy Aegir's unhappy. We don't want that, but it isn't Aegir's fault, it's the developer's limited or lack of understanding of this Drupal caveat.
The easiest thing is to name your installation profile directory 'OpenPotato_install' and name the profile file 'OpenPotato_install.profile'. You'll also need to rename the functions inside this file.
Then everything should work just fine.</p>

<h2><a name="patch">9) What is a patch or 'hotfix', and how can I apply it to fix my site if I can't / don't want to upgrade to HEAD?</a></h2>

<p>Sometimes releases are made and bugs are discovered afterward. We commit fixes for such bugs to HEAD, but HEAD is often volatile and you don't want to use a non-stable release in your environment. Fortunately we do (or should: if it's critical, please ask for a patch otherwise) provide a 'hotfix' or patch for users. A patch means that you can 'patch' your Aegir system to fix the bug without running the risks of using HEAD.</p>

<p>To patch an Aegir component, use the following example, in which we fix the Provision module with an imaginary patch. The same or similar steps apply for Hosting or Hostmaster (though you shouldn't need to patch Hostmaster, you only use it once to install!)</p>

<p>Run the steps as the aegir user.</p>

<p><div class="codeblock"><code>1) Backup /var/aegir/.drush/provision to somewhere else for safety, such as /tmp/provision<br /><br />2) Download the patch given in the ticket, to your server. Use wget or a similar useful tool for downloading it over the commandline. You can download the file to anywhere.<br /><br />3) edit your aegir user&#039;s crontab (crontab -e) and comment out the dispatch entry (place a &#039;#&#039; in front of the hosting dispatch cron entry). This is a precautionary step in case you patch the module, something goes wrong and it breaks the module. The hosting dispatch cron might come around and try and run the queue dispatcher and break/complain due to a broken component. If you know what you are doing and are fast enough to fix it, you may skip this.<br /><br />4) cd /var/aegir/.drush/provision/<br /><br />5) patch -p0 &lt; /path/to/the/patch/file<br /><br />6) crontab -e and uncomment the dispatch cron task</code></div></p>

<p>If the patch doesn't apply or prompts you to enter the filename to patch, try running patch -p1 instead of -p0 above.</p>

<p>If it still asks for clarification, verify that you are in the top-level directory of the component (in this case, we are inside /var/aegir/.drush/provision)</p>

<p>If it still doesn't work, it might be an unclean patch, and you should make a request in the relevant ticket to be given a cleaner patch to apply.</p>

<p>For more information on patches, please read the <a href="http://drupal.org/patch/apply">Drupal documentation</a>.</p>

<h2><a name="sitedir">10) I followed the installation instructions.  What directory holds all of my sites now?</a></h2>

<p>For a full overview of a typical Aegir filesystem structure, <a href="../../../../77/index.html">read this</a>.</p>

<h2><a name="sitecreatefailed">11) I tried to create a site, but the create task failed and retries don't succeed.  How do I delete the partially created site and associated Aegir tasks?</a></h2>

<p>See the section 'Manually deleting the site' from <a href="../../../../26/index.html">the documentation</a></p>

<h2><a name="migratefailed">12) I tried to migrate a site, but Aegir incorrectly reported an imcompatibility between one or more modules in my source and destination platforms.  How do I force Aegir to see that the two platforms are compatible?</a></h2>

<p>This problem can arise for at least two different reasons.  First, you may have updated a module in a platform that you imported and forgotten to run update.php before you imported the site into Aegir.  Second, you may have updated a module in a platform and not re-verified the platform in Aegir.  Be sure that you have run update.php on a drupal platform that you will be importing into Aegir before you import.  Also, if you make any change to the modules in an Aegir Platform, re-verify that platform and all sites using that platform.  (At least, experience suggests that doing these things will allow the migration to succeed.</p>

<h2><a name="htaccess">13) What about .htaccess settings?</a></h2>

<p>As of recent 0.4 alpha releases, Aegir now reads in the contents of a platform's .htaccess file when generating the Apache configurations. You can safely make additions/changes to the platform .htaccess and expect the relevant site to respect those changes.</p>

<h2><a name="findver">14) How can I tell what version of Aegir I have installed?</a></h2>

<p>This works for 0.4alpha9 and above...maybe earlier too...
<div class="codeblock"><code>grep &#039;[hostmaster][download][url]&#039; /var/aegir/.drush/provision/aegir.make</code></div></p>

<p>If you're still unsure or this didn't work, contact a developer on IRC and we'll be able to tell you after you answer a few questions.</p>

<h2><a name="symlinks">15) I'm using a GIT repo for a site, but symlinks make crazy things happen!</a></h2>

<p>If you're symlinking an entire /sites/ folder, Aegir may not acknowledge the site, as this will cause problems when cloning/migrating a site.</p>

<p>If you are using GIT to version control your themes, custom modules, etc, and symlinking these into your sites folder, you will find that cloning a site will clone those symlinks (by virtue of copying the sites folder). This is probably not what you want to happen!</p>

<p>Themes and custom modules are better off being checked out to or symlinked into the install profile folder. If your site's install profile is 'foobar' (there's an 'install_profile' variable in the variables table), Drupal core understands to look inside the /var/aegir/yourplatform/profiles/foobar/ folder for modules and themes directories.</p>

<p>The files directory for uploads (which I don't think can be efficiently versioned anyway in most cases) and the settings.php file will be all that's left in your sites folder, and Aegir will happily move that all around as you clone or migrate your site between platforms.</p>

<p>Storing your site's dir in git is an archaic and inefficient method of developing sites. It's 2010 and there are more elegant ways of doing things thanks to Drush Make and Aegir. You might like to look at mig5's excellent article where he provides some great tips on how to manage <a href="http://www.migueljacq.com/content/drupal-deployments-workflows-version-control-drushmake-and-aegir">Drupal deployments &amp; workflows with version control, drush_make, and Aegir</a>.</p>

<h2><a name="dbname">16) How can I tell what database name my site is using?</a></h2>

<p>Check the site's vhost configuration file in /var/aegir/config/server_$whatever/apache/vhost.d/. The db name (and user/password) are stored as 'SetEnv' parameters to Apache, allowing us to cloak database credentials in the settings.php so that they are protected in a multisite environment from prying eyes (admins with PHP filter permissions).</p>

<p>You can also use 'drush st' on your site to get a status report containing the database name, user, password, among other things.</p>

<p>In modern releases (0.4-alpha9 or so and above), the site database names have switched from site_$nid style names to more properly reflect the site name/URL itself.</p>

<h2><a name="subdir">17) Can I use the subdirectory multisite feature of Drupal in Aegir?</a></h2>

<p>Also known as "http://example.com/site1" and "http://example.com/site2" are different sites.</p>

<p>Short answer: no.</p>

<p>Long answer: this is unlikely to be supported, because multiple sites usually end up sharing the same virtual host entry in the webserver and you will be required to upgrade/migrate all of the sites simultaneously. That is because /site1 is on the same drupal root as /site2. Another problem is that they can't be on separate servers...</p>

<p>To fix this, you would need to decouple virtual hosts and sites in Aegir, which is a fairly deeply rooted assumption. It <em>would</em> be possible to use Aliases to work around that and have the sites be in different document roots.</p>

<p>But even if you actually coerce Aegir into having multiple sites in the same domain, you get into crazy namespace issues. Do you want to allow the site on example.com to completely break sites example.com/site1 or example.com/site2? If so, who can? The same client? The same user? If not, you need to implement checks so there's no overlap...</p>

<p>Tools shouldn't dictate policy, people should. Therefore, this should probably be allowed, from a strictly technical perspective.</p>

<p>The thing is: domain names are cheap, contrarily to common opinion. You only have to get <em>one</em> domain and you can have as many sub-domains as you want. Hell, you can even have sub sub domains and have your whole domain tree down there, you're free to go. Providers often give out a free DNS namespace to their customers based on their username (full disclosure: <a href="http://koumbit.org/">Koumbit</a> does :P).</p>

<p>The other thing is: /site1 is exactly what drupal does: ot dispatches menus callbacks based those GET URLs. So trying to make Aegir (or Apache + Drupal, rather) do that is rather backward. On the other hand, Drupal is notoriously bad (if you make exception of the <a href="http://drupal.org/project/domain">Domain module</a>) at dispatching requests based on domains, and that's where Apache, DNS, Aegir and all their happy friends gets in.</p>

<p>In short, it's not worth it. See this feature request for followup: <a href="http://drupal.org/node/705026" title="http://drupal.org/node/705026">http://drupal.org/node/705026</a></p></div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-23.html?destination=node%2F14%23comment-form">Login</a> or <a href="../../../../../user/register/index-23.html?destination=node%2F14%23comment-form">register</a> to post comments</span></li>
<li class="print active"><a href="index-2.html?print" class="active">Print</a></li>
<li class="print_recurse active"><a href="index-3.html?print&amp;book_recurse" class="active">Print entire section</a></li>
<li class="talk_comments last"><a href="../../../talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>



<div  id="node-606" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../faq/ubercart-integration-faq/index.html">Ubercart Integration FAQ</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>These are frequently asked questions about <a href="http://drupal.org/uc_hosting">Aegir Ubercart Integration</a>. For basic install and usage instructions please consult the <a href="../../../../516/index.html">guide</a>.</p>

<h2>Contents</h2>

<ul>
<li><a href="#site-install">Does this module create a site install task after product is purchased?</a></li>
</ul>

<h2><a name="#site-install">Does this module create a site install task after product is purchased?</a></h2>

<p>There may be some adjustment to UI needed to make this clearer, but the short answer is "Yes".</p>

<p>This is done conditionally: The module adds a checkbox saying "Create my site later" to the purchase form displayed on a product, if that product has the site feature. If that checbox is checked, then we go right to payment completion, and the client will create their site later using the regular aegir interface.</p>

<p>If that checkbox is not checked, we throw the user into a site creation form, store the data they input, and then use it on payment completion to create the site.</p>

<p>Regardless of whether or not they enter their site info during ordering, their client's quota is incremented.</p>

<p>In the case of a product kit with multiple sites included, only the first site can be created in this manner.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-22.html?destination=node%2F606%23comment-form">Login</a> or <a href="../../../../../user/register/index-22.html?destination=node%2F606%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-22.html?destination=node%2F606%23comment-form">Login</a> or <a href="../../../../../user/register/index-22.html?destination=node%2F606%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>



<div id="comments">
  <a id="comment-1940"></a>


<div  id="comment-1940" class="comment comment-published clear-block decay-10 decay-10">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/jonpugh/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="jonpugh&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/jonpugh/index.html" class="username" title="View user profile.">jonpugh</a></div><div class='date'>4:23pm May 17, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1940">#1</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>I am attempting to determine the specific actions needed to secure the mysql database when you get the "Dummy connection failed to fail" message, without running "mysql_secure_installation"...</p>

<p>So far I've determined you should run the following queries:</p>

<p><div class="codeblock"><code>DELETE FROM mysql.user WHERE User=&#039;&#039;;<br />DROP DATABASE test; <br />DELETE FROM mysql.db WHERE Db LIKE &#039;test%&#039;;</code></div></p>

<p>Once I confirm this works I will edit the FAQ to include these commands</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-23.html?destination=node%2F14%23comment-form">Login</a> or <a href="../../../../../user/register/index-23.html?destination=node%2F14%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1941"></a>


<div  id="comment-1941" class="comment comment-published clear-block decay-0 decay-0">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/jonpugh/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="jonpugh&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/jonpugh/index.html" class="username" title="View user profile.">jonpugh</a></div><div class='date'>9:40pm May 17, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1941">#2</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>That and a FLUSH PRIVILEGES; seems to do it.</p>

<p>I'll be testing it a few times more, then update the FAQ and Automatic Install instructions.</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-23.html?destination=node%2F14%23comment-form">Login</a> or <a href="../../../../../user/register/index-23.html?destination=node%2F14%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


</div>
    </div>
      </div>
</body>


<!-- Mirrored from community.aegirproject.org/node/14/revisions/1697/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 16:19:59 GMT -->
</html>
