<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from community.aegirproject.org/node/14/revisions/185/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 17:56:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="prev" href="../../../../../project-history/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="prev" href="../../../../../project-history/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="prev" href="../../../../../project-history/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="canonical" href="index.html" />
<link rel="prev" href="../../../../../faq/index.html" />
<link rel="up" href="../../../../../faq/index.html" />
<link rel="next" href="../../../../../intro/case-studies/index.html" />
<link rel="shortcut icon" href="../../../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="print" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />

  <title>Revision of FAQ from Wed, 11/03/2010 - 22:11 | community.aegirproject.org</title>
</head>

<body  class="print rubik admin-static page">
  <div class='limiter clear-block'>
    <div id='content' class='clear-block'>
      <div class='print-header'>
      <h1 class='site-name'>community.aegirproject.org</h1>
  </div>
      

<div  id="node-14" class="node node-book clear-block node-page">
  
      <h2 class='node-title'>
            <a href="../../../../../faq/index.html">FAQ</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div id='diff-inline-14'><div class='diff-inline-metadata clear-block'><div class='diff-inline-byline'>Updated by <a href="../../../../../users/mig5/index.html" class="username" title="View user profile.">mig5</a> on 11/03/2010 - 22:11</div><div class='diff-inline-legend clear-block'><label>Legend</label><span class='diff-added'>Added</span><span class='diff-changed'>Changed</span><span class='diff-deleted'>Deleted</span></div></div><h2><span class='diff-added'>Contents</span></h2><span class='diff-added'>
</span><h1><span class='diff-added'></span><a href="#help"><span class='diff-added'>Help!</span></a><span class='diff-added'></span></h1><span class='diff-added'>
</span><ol><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#helpwhere"><span class='diff-added'>Where can I get help?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#ask"><span class='diff-added'>Can I ask you a question?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span></ol><span class='diff-added'>
</span><h1><span class='diff-added'></span><a href="#installing"><span class='diff-added'>Installing Aegir</span></a><span class='diff-added'></span></h1><span class='diff-added'>
</span><ol><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#sharedhosting"><span class='diff-added'>Can I run Aegir on a shared hosting environment?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#windows"><span class='diff-added'>Can I run Aegir on Windows?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#cpanel"><span class='diff-added'>Can Aegir be installed next to CPanel/Plesk/AlternC/etc?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span></ol><span class='diff-added'>
</span><h1><span class='diff-added'></span><a href="#using"><span class='diff-added'>Using Aegir</span></a><span class='diff-added'></span></h1><span class='diff-added'>
</span><ol><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#cron"><span class='diff-added'>The cron isn't running (scheduled tasks aren't being executed), what do I do ?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#drushdebug"><span class='diff-added'>How do I get debug/verbose info from Drush when running the hosting commands ?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#modules"><span class='diff-added'>How do I update a sites modules using aegir?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#vhostalias"><span class='diff-added'>Is it best to set up sites under aegir as </span><a href="http://www.example.com/" title="www.example.com"><span class='diff-added'>www.example.com</span></a><span class='diff-added'> or just as example.com ? The aim is for both to resolve to the same.</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#ssl"><span class='diff-added'>How can I setup a site to use https:// under Aegir?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#fileperms"><span class='diff-added'>Aegir is not verifying / deleting / migrating my site because of file permission problems.</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#atrium"><span class='diff-added'>I can verify OpenAtrium as a platform but Aegir fails to provision an Atrium site</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#namespace"><span class='diff-added'>A platform with an installation profile has verified okay, but Aegir doesn't seem to be able to use the profile</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#patch"><span class='diff-added'>What is a patch or 'hotfix', and how can I apply it to fix my site if I can't / don't want to upgrade to HEAD?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#sitedir"><span class='diff-added'>I followed the installation instructions.  What directory holds all of my sites now?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#sitecreatefailed"><span class='diff-added'>I tried to create a site, but the create task failed and retries don't succeed.  How do I delete the partially created site and associated Aegir tasks?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#migratefailed"><span class='diff-added'>I tried to migrate a site, but Aegir incorrectly reported an incompatibility between one or more modules in my source and destination platforms.  How do I force Aegir to see that the two platforms are compatible?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#htaccess"><span class='diff-added'>What about .htaccess settings?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#findver"><span class='diff-added'>How can I tell what version of Aegir I have installed?</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><a href="#symlinks"><span class='diff-added'>I'm using symlinks (perhaps to a GIT repo) and crazy things are happening!</span></a><span class='diff-added'></span></li><span class='diff-added'>
</span></ol><span class='diff-added'>
</span><h1><span class='diff-added'></span><a name="help"><span class='diff-added'>Help!</span></a><span class='diff-added'></span></h1><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="helpwhere"><span class='diff-added'>1) Where can I get help?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>From the </span><a href="http://groups.drupal.org/node/4701/documentation"><span class='diff-added'>Documentation</span></a><span class='diff-added'> (which should be the first place you look) :</span></p><span class='diff-added'>
</span><p><span class='diff-added'>The Issue Queue for all the projects that make up Aegir is here: </span><a href="http://is.gd/ek2Dl" title="http://is.gd/ek2Dl"><span class='diff-added'>http://is.gd/ek2Dl</span></a><span class='diff-added'></span></p><span class='diff-added'>
</span><p><span class='diff-added'>This is the first place to look - chances are someone's had the same problem as you before, and you'll get the quickest answers by searching for what they discovered.</span></p><span class='diff-added'>
</span><p><span class='diff-added'>Before asking a question or reporting an issue, you should read </span><a href="http://groups.drupal.org/node/21890"><span class='diff-added'>the bug reporting guidelines</span></a><span class='diff-added'>.</span></p><span class='diff-added'>
</span><p><span class='diff-added'>You can join the #aegir channel at Freenode on IRC. (IRC instructions for drupal users are at: </span><a href="http://drupal.org/irc" title="http://drupal.org/irc"><span class='diff-added'>http://drupal.org/irc</span></a><span class='diff-added'>). It's a friendly community, but a small one, so ask nicely and be patient!</span></p><span class='diff-added'>
</span><p><span class='diff-added'>If you find a solution to a problem that isn't in the documentation or in this FAQ, be the first to login and edit these pages to bring them up to date! The rest of the community thrives on your helpful information!</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="ask"><span class='diff-added'>2) Can I ask you a question?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>Of course you can! Don't ask to ask, just ask! It is polite to look if the question has already been answered in the documentation, the issue queue or here, but if not, please do ask around! If you ask a question and we have a nice answer, you can even add it to the </span>FAQ<span class='diff-added'> here so that others can have your valuable answer.</span></p><span class='diff-added'>
</span><h1><a name="installing"><span class='diff-added'>Installing Aegir</span></a><span class='diff-added'></span></h1><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="sharedhosting"><span class='diff-added'>1) Can I run Aegir on a shared hosting environment?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>Shared hosting will not give you enough permissions to install new sites</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="windows"><span class='diff-added'>2) Can I run Aegir on Windows?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>To install Aegir you need a unix based operating system. Aegir will not work on windows.</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="cpanel"><span class='diff-added'>4) Can Aegir be installed next to CPanel/Plesk/AlternC/etc?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>No, or rather "it's not supported". See </span><a href="http://drupal.org/node/587554" title="http://drupal.org/node/587554"><span class='diff-added'>http://drupal.org/node/587554</span></a><span class='diff-added'></span></p><span class='diff-added'>
</span><h1><span class='diff-added'></span><a name="using"><span class='diff-added'>Using Aegir</span></a><span class='diff-added'></span></h1><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="cron"><span class='diff-added'>1) Cron isn't running (scheduled tasks aren't being executed), what do I do?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>At the shell prompt as the aegir user, type </span></p><span class='diff-added'>
</span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>crontab -e</span></code><span class='diff-added'></span></div><span class='diff-added'>
</span><p><span class='diff-added'>a) If you get an error that the command is not found, then you need to install cron on your server (some basic images don't include it - Linode's Ubuntu 9.04 image is one):</span></p><span class='diff-added'>
</span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>sudo apt-get install cron</span></code><span class='diff-added'></span></div><span class='diff-added'>
</span><p><span class='diff-added'>Now go back to the directory /var/aegir/drupal-6.19 and re-execute the hosting dispatch:</span></p><span class='diff-added'>
</span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>/var/aegir/drush/drush.php @hostmaster hosting-setup</span></code><span class='diff-added'></span></div><span class='diff-added'>
</span><p><span class='diff-added'>Type 'crontab -e' again.</span></p><span class='diff-added'>
</span><p><span class='diff-added'>b) You should see the default entry: </span></p><span class='diff-added'>
</span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>*/1 * * * * (php&nbsp; &#039;/&lt;path to drush&gt;/drush.php&#039; @hostmaster hosting-dispatch</span></code><span class='diff-added'></span></div><span class='diff-added'>
</span><p><span class='diff-added'>But if this is still not working it may well be a permissions issue. An example error :</span></p><span class='diff-added'>
</span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>Forking : (php /&lt;path to drush&gt;/drush.php&nbsp; --quiet @hostmaster&nbsp; &#039;hosting&#039; &#039;task&#039; &#039;266&#039; --backend &amp;) &gt; /dev/null [0.432 sec]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [notice]</span><br /><span class='diff-added'>sh: /dev/null: Permission denied</span></code><span class='diff-added'></span></div><span class='diff-added'>
</span><p><span class='diff-added'>This means the system doesn't have permissions to access /dev/null. To resolve it, give the system permissions to write to /dev/null (it should have this anyway), by executing:</span></p><span class='diff-added'>
</span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>sudo chmod a+w /dev/null</span></code><span class='diff-added'></span></div><span class='diff-added'>
</span><p><span class='diff-added'>c) If this still hasn't worked, have you moved the location of drush?</span><br /><span class='diff-added'>
If so - see </span><a href="http://drupal.org/node/540152" title="http://drupal.org/node/540152"><span class='diff-added'>http://drupal.org/node/540152</span></a><span class='diff-added'></span></p><span class='diff-added'>
</span><p><span class='diff-added'>d)  If you are a </span><b><span class='diff-added'>*BSD user</span></b><span class='diff-added'> (verified on freebsd at least)</span><br /><span class='diff-added'>
You need to add the line :</span><br /><span class='diff-added'>
</span><code><span class='diff-added'>PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin</span></code><span class='diff-added'> at the TOP of your cron file.</span><br /><span class='diff-added'>
Simply log in as the aegir user and type crontab -e and insert the above line on top.</span><br /><span class='diff-added'>
Thanks goes to mauror  for </span><a href="http://drupal.org/node/323732" title="http://drupal.org/node/323732"><span class='diff-added'>http://drupal.org/node/323732</span></a><span class='diff-added'>.</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="drushdebug"><span class='diff-added'>2) How do I get debug/verbose info from Drush when running the hosting commands?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>Add these to the drush call :</span></p><span class='diff-added'>
</span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>--debug</span></code><span class='diff-added'></span></div><span class='diff-added'>
</span><p><span class='diff-added'>If you're having specific problems when using the frontend, you can easily run the hosting commands from the command line by:</span></p><span class='diff-added'>
</span><ol><span class='diff-added'>
</span><li><span class='diff-added'>Click the view button and then copy the Drush command which was executed at the top of the log;</span></li><span class='diff-added'>
</span><li><span class='diff-added'>While logged in as the aegir user, paste the command in at the terminal and add --debug at the end of the commandline.</span></li><span class='diff-added'>
</span></ol><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="modules"><span class='diff-added'>3) How do I update a site's or platform's modules using Aegir?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'></span><i><span class='diff-added'>NOTE: the following instructions generally apply to themes as well</span></i><span class='diff-added'></span><br /><span class='diff-added'>
Aegir isn't a package management GUI for installing modules or themes on your site. It's designed to help manage your site between builds. To upgrade sites, you should be using the Migrate tool to move your site between two platforms, which invokes drush updatedb. If you aren't ready for this paradigm, you probably shouldn't be using Aegir, as you think it's for something that it isn't.</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="vhostalias"><span class='diff-added'>4) Is it best to set up sites under aegir as </span><a href="http://www.example.com/" title="www.example.com"><span class='diff-added'>www.example.com</span></a><span class='diff-added'> or just as example.com ?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>You want aliases by default, it adds www. So you want to set up the site as </span><b><span class='diff-added'>example.com</span></b><span class='diff-added'>. If it doesn't then automatically default to that site if you use 'www', you can then add 'www.example.com' as an alias within aegir.</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="ssl"><span class='diff-added'>5) How can I setup a site to use https:// under Aegir?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>At the moment Aegir doesn't provide any means of managing SSL certificates, or accessing a site via https. There is a lot of discussion around implementing this however, and future versions are likely to include this.</span><br /><span class='diff-added'>
You can follow the discussion here: </span><a href="http://drupal.org/project/issues/search/hostmaster?issue_tags=aegir-ssl" title="http://drupal.org/project/issues/search/hostmaster?issue_tags=aegir-ssl"><span class='diff-added'>http://drupal.org/project/issues/search/hostmaster?issue_tags=aegir-ssl</span></a><span class='diff-added'></span></p><span class='diff-added'>
</span><p><span class='diff-added'>In the meantime you can set this up manually without causing problems with Aegir. See this how-to for details: </span><a href="http://groups.drupal.org/node/25038" title="http://groups.drupal.org/node/25038"><span class='diff-added'>http://groups.drupal.org/node/25038</span></a><span class='diff-added'></span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="fileperms"><span class='diff-added'>6) Aegir is not verifying / deleting / migrating my site because of file permission problems.</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>Aegir releases prior to 0.3 RC3 encountered an error when the web server has uploaded files and made new directory in the sites/$url/files directory. A prevalent example of this occurring is with the color module and when imagecache is used (such as in atrium).</span></p><span class='diff-added'>
</span><p><span class='diff-added'>This bug (see: </span><a href='http://drupal.org/node/203204'><span class='diff-added'>#203204</span></a><span class='diff-added'> ) was introduced with Drupal 6, and has since been fixed with Drupal 7. The patch has however not been backported yet, and the patch won't fix existing files that were created incorrectly.</span></p><span class='diff-added'>
</span><p><span class='diff-added'>In Aegir 0.3 RC3 we introduced a work around which sets the umask for the site, which forces new files and directories to be the correct permissions, but this will only take effect after the site has been succesfully verified. To enforce the correct file ownership and permissions on the files, run the following command on each of your Drupal 6 platforms :</span></p><span class='diff-added'>
</span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>&nbsp; sudo chown -R $aegir_user $platform/sites/*/files</span></code><span class='diff-added'></span></div><span class='diff-added'>
</span><p><span class='diff-added'>This will allow the verify task to correctly set the permissions and succesfully modify/remove the files.</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="atrium"><span class='diff-added'>7) I can verify OpenAtrium as a platform but Aegir fails to provision an Atrium site</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>Raise your memory_limit in your php cli php.ini file to something like 128MB, or maybe 64MB if that's too much. On Debian-based distributions this is /etc/php5/cli/php.ini. Apache does not need a restart for this: installations fail because the command is being executed via drush using php cli. Atrium requires more memory to run its install profile as it has a lot more to do than a regular Drupal install.</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="namespace"><span class='diff-added'>8) A platform with an installation profile has verified okay, but Aegir doesn't seem to be able to use the profile</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>Your platform has been setup and verified okay, but when you go to create a new site Aegir keeps giving an error message about the profile, or the list doesn't offer you the profile you're expecting. This could be a namespace issue. Modules, themes and profiles in drupal all have a name - which is essentially their folder name. This is also used to prefic their functions etc, so that there are no clashes.</span><br /><span class='diff-added'>
What isn't often recognised (but which Vertice and Mig5 figured out) is that drupal has one namespace for all items - so your themes and modules can't share a name with an installtion profile.</span><br /><span class='diff-added'>
Often an installation profile will be created called 'OpenPotato' and the theme for it will also be called 'OpenPotato'. This makes drupal unhappy, and when drupal's unhappy Aegir's unhappy. We don't want that.</span><br /><span class='diff-added'>
The easiest thing is to name your installation profile directory 'OpenPotato_install' and name the profile file 'OpenPotato_install.profile'. You'll also need to rename the functions inside this file.</span><br /><span class='diff-added'>
Then everything should work just fine. </span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="patch"><span class='diff-added'>9) What is a patch or 'hotfix', and how can I apply it to fix my site if I can't / don't want to upgrade to HEAD?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>Sometimes releases are made and bugs are discovered afterward. We commit fixes for such bugs to HEAD, but HEAD is often volatile and you don't want to use a non-stable release in your environment. Fortunately we do (or should: if it's critical, please ask for a patch otherwise) provide a 'hotfix' or patch for users. A patch means that you can 'patch' your Aegir system to fix the bug without running the risks of using HEAD.</span></p><span class='diff-added'>
</span><p><span class='diff-added'>To patch an Aegir component, use the following example, in which we fix the Provision module with an imaginary patch. The same or similar steps apply for Hosting or Hostmaster (though you shouldn't need to patch Hostmaster, you only use it once to install!)</span></p><span class='diff-added'>
</span><p><span class='diff-added'>Run the steps as the aegir user.</span></p><span class='diff-added'>
</span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>1) Backup /var/aegir/.drush/provision to somewhere else for safety, such as /tmp/provision
</span><p><span class='diff-added'>2) Download the patch given in the ticket, to your server. Use wget or a similar useful tool for downloading it over the commandline. You can download the file to anywhere.</span></p><span class='diff-added'>
</span><p><span class='diff-added'>3) edit your aegir user&#039;s crontab (crontab -e) and comment out the dispatch entry (place a &#039;#&#039; in front of the hosting dispatch cron entry). This is a precautionary step in case you patch the module, something goes wrong and it breaks the module. The hosting dispatch cron might come around and try and run the queue dispatcher and break/complain due to a broken component. If you know what you are doing and are fast enough to fix it, you may skip this.</span></p><span class='diff-added'>
</span><p><span class='diff-added'>4) cd /var/aegir/.drush/provision/</span></p><span class='diff-added'>
</span><p><span class='diff-added'>5) patch -p0 &lt; /path/to/the/patch/file</span></p><span class='diff-added'>
</span><p><span class='diff-added'>6) crontab -e and uncomment the dispatch cron task</span></p><span class='diff-added'></span></code><span class='diff-added'></span></div><span class='diff-added'>
</span><p><span class='diff-added'>If the patch doesn't apply or prompts you to enter the filename to patch, try running patch -p1 instead of -p0 above. </span></p><span class='diff-added'>
</span><p><span class='diff-added'>If it still asks for clarification, verify that you are in the top-level directory of the component (in this case, we are inside /var/aegir/.drush/provision)</span></p><span class='diff-added'>
</span><p><span class='diff-added'>If it still doesn't work, it might be an unclean patch, and you should make a request in the relevant ticket to be given a cleaner patch to apply. </span></p><span class='diff-added'>
</span><p><span class='diff-added'>For more information on patches, please read the </span><a href="http://drupal.org/patch/apply"><span class='diff-added'>Drupal documentation</span></a><span class='diff-added'>.</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="sitedir"><span class='diff-added'>11) I followed the installation instructions.  What directory holds all of my sites now?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>If you follow the Aegir installation instructions closely, you will notice a series of steps in which you tar your existing sites and untar them in </span><code><span class='diff-added'>/var/aegir/platforms</span></code><span class='diff-added'>.  The effect of these steps and the modifications that Aegir makes automatically to your Apache configuration is to shift the hosting of your drupal sites from whatever directory you were using (e.g., </span><code><span class='diff-added'>/var/www/html</span></code><span class='diff-added'> on a typical Ubuntu system) to </span><code><span class='diff-added'>/var/aegir/platforms</span></code><span class='diff-added'>.</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="sitecreatefailed"><span class='diff-added'>12) I tried to create a site, but the create task failed and retries don't succeed.  How do I delete the partially created site and associated Aegir tasks?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>See the section 'Manually deleting the site' from </span><a href="../../../../25920/index.html"><span class='diff-added'>the documentation</span></a><span class='diff-added'></span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="migratefailed"><span class='diff-added'>13) I tried to migrate a site, but Aegir incorrectly reported an imcompatibility between one or more modules in my source and destination platforms.  How do I force Aegir to see that the two platforms are compatible?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>This problem can arise for at least two different reasons.  First, you may have updated a module in a platform that you imported and forgotten to run update.php before you imported the site into Aegir.  Second, you may have updated a module in a platform and not re-verified the platform in Aegir.  Be sure that you have run update.php on a drupal platform that you will be importing into Aegir </span><b><span class='diff-added'>before</span></b><span class='diff-added'> you import.  Also, if you make any change to the modules in an Aegir Platform, re-verify that platform and all sites using that platform.  (At least, experience suggests that doing these things will allow the migration to succeed.</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="htaccess"><span class='diff-added'>14) What about .htaccess settings?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>As of recent 0.4 alpha releases, Aegir now reads in the contents of a platform's .htaccess file when generating the Apache configurations. You can safely make additions/changes to the platform .htaccess and expect the relevant site to respect those changes.</span></p><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="findver"><span class='diff-added'>15) How can I tell what version of Aegir I have installed?</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>This works for alpha9 and above...maybe earlier too...</span></p><span class='diff-added'>
</span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>grep &#039;[hostmaster][download][url]&#039; /var/aegir/.drush/provision/aegir.make</span></code><span class='diff-added'></span></div><span class='diff-added'>
</span><h2><span class='diff-added'></span><a name="symlinks"><span class='diff-added'>16) I'm using a GIT repo for a site, but symlinks make crazy things happen!</span></a><span class='diff-added'></span></h2><span class='diff-added'>
</span><p><span class='diff-added'>If you're symlinking an entire /sites/</span><sitename><span class='diff-added'> folder, aegir will not acknowledge the site, as this will cause problems when cloning/migrating a site.</span></sitename><span class='diff-added'></span></p><span class='diff-added'>
</span><p><span class='diff-added'>If you are using GIT to version control your themes, custom modules, etc, and symlinking these into your sites folder, you will find that cloning a site will clone those symlinks (by virtue of copying the sites folder). This is probably not what you want to happen!</span></p><span class='diff-added'>
</span><p><span class='diff-added'>Themes and custom modules are better off being checked out to or symlinked into the install profile folder. If your site's install profile is 'foobar' (there's an 'install_profile' variable in the variables table), Drupal core understands to look inside the /var/aegir/yourplatform/profiles/foobar/ folder for modules and themes directories.</span></p><span class='diff-added'>
</span><p><span class='diff-added'>The files directory for uploads (which I don't think can be efficiently versioned anyway in most cases) and the settings.php file will be all that's left in your sites folder, and Aegir will happily move that all around as you clone or migrate your site between platforms.</span></p><span class='diff-added'>
</span><p><span class='diff-added'>You might like to look at mig5's excellent article where he provides some great tips on how to manage </span><a href="http://www.migueljacq.com/content/drupal-deployments-workflows-version-control-drushmake-and-aegir"><span class='diff-added'>Drupal deployments &amp; workflows with version control, drush_make, and Aegir</span></a><span class='diff-added'>.</span></p><span class='diff-added'>
</span></div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-23.html?destination=node%2F14%23comment-form">Login</a> or <a href="../../../../../user/register/index-23.html?destination=node%2F14%23comment-form">register</a> to post comments</span></li>
<li class="print active"><a href="index-2.html?print" class="active">Print</a></li>
<li class="print_recurse active"><a href="index-3.html?print&amp;book_recurse" class="active">Print entire section</a></li>
<li class="talk_comments last"><a href="../../../talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>



<div  id="node-606" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../faq/ubercart-integration-faq/index.html">Ubercart Integration FAQ</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>These are frequently asked questions about <a href="http://drupal.org/uc_hosting">Aegir Ubercart Integration</a>. For basic install and usage instructions please consult the <a href="../../../../516/index.html">guide</a>.</p>

<h2>Contents</h2>

<ul>
<li><a href="#site-install">Does this module create a site install task after product is purchased?</a></li>
</ul>

<h2><a name="#site-install">Does this module create a site install task after product is purchased?</a></h2>

<p>There may be some adjustment to UI needed to make this clearer, but the short answer is "Yes".</p>

<p>This is done conditionally: The module adds a checkbox saying "Create my site later" to the purchase form displayed on a product, if that product has the site feature. If that checbox is checked, then we go right to payment completion, and the client will create their site later using the regular aegir interface.</p>

<p>If that checkbox is not checked, we throw the user into a site creation form, store the data they input, and then use it on payment completion to create the site.</p>

<p>Regardless of whether or not they enter their site info during ordering, their client's quota is incremented.</p>

<p>In the case of a product kit with multiple sites included, only the first site can be created in this manner.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-22.html?destination=node%2F606%23comment-form">Login</a> or <a href="../../../../../user/register/index-22.html?destination=node%2F606%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-22.html?destination=node%2F606%23comment-form">Login</a> or <a href="../../../../../user/register/index-22.html?destination=node%2F606%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>



<div id="comments">
  <a id="comment-1940"></a>


<div  id="comment-1940" class="comment comment-published clear-block decay-10 decay-10">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/jonpugh/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="jonpugh&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/jonpugh/index.html" class="username" title="View user profile.">jonpugh</a></div><div class='date'>4:23pm May 17, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1940">#1</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>I am attempting to determine the specific actions needed to secure the mysql database when you get the "Dummy connection failed to fail" message, without running "mysql_secure_installation"...</p>

<p>So far I've determined you should run the following queries:</p>

<p><div class="codeblock"><code>DELETE FROM mysql.user WHERE User=&#039;&#039;;<br />DROP DATABASE test; <br />DELETE FROM mysql.db WHERE Db LIKE &#039;test%&#039;;</code></div></p>

<p>Once I confirm this works I will edit the FAQ to include these commands</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-23.html?destination=node%2F14%23comment-form">Login</a> or <a href="../../../../../user/register/index-23.html?destination=node%2F14%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1941"></a>


<div  id="comment-1941" class="comment comment-published clear-block decay-0 decay-0">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/jonpugh/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="jonpugh&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/jonpugh/index.html" class="username" title="View user profile.">jonpugh</a></div><div class='date'>9:40pm May 17, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1941">#2</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>That and a FLUSH PRIVILEGES; seems to do it.</p>

<p>I'll be testing it a few times more, then update the FAQ and Automatic Install instructions.</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-23.html?destination=node%2F14%23comment-form">Login</a> or <a href="../../../../../user/register/index-23.html?destination=node%2F14%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


</div>
    </div>
      </div>
</body>


<!-- Mirrored from community.aegirproject.org/node/14/revisions/185/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 17:56:24 GMT -->
</html>
