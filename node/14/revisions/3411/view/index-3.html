<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from community.aegirproject.org/node/14/revisions/3411/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 16:19:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="prev" href="../../../../../project-history/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="prev" href="../../../../../project-history/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="prev" href="../../../../../project-history/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="canonical" href="index.html" />
<link rel="prev" href="../../../../../faq/index.html" />
<link rel="up" href="../../../../../faq/index.html" />
<link rel="next" href="../../../../../intro/case-studies/index.html" />
<link rel="shortcut icon" href="../../../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="print" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />

  <title>Revision of FAQ from Sun, 05/13/2012 - 10:34 | community.aegirproject.org</title>
</head>

<body  class="print rubik admin-static page">
  <div class='limiter clear-block'>
    <div id='content' class='clear-block'>
      <div class='print-header'>
      <h1 class='site-name'>community.aegirproject.org</h1>
  </div>
      

<div  id="node-14" class="node node-book clear-block node-page">
  
      <h2 class='node-title'>
            <a href="../../../../../faq/index.html">FAQ</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><div id='diff-inline-14'><div class='diff-inline-metadata clear-block'><div class='diff-inline-byline'>Updated by <a href="../../../../../users/mig5/index.html" class="username" title="View user profile.">mig5</a> on 05/13/2012 - 10:34</div><div class='diff-inline-legend clear-block'><label>Legend</label><span class='diff-added'>Added</span><span class='diff-changed'>Changed</span><span class='diff-deleted'>Deleted</span></div></div><script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc1">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Help"><span class="toc-number">1. </span>Help!</a>
<ol>
	<li class="toc-level-2"><a href="#Where_can_I_get_help"><span class="toc-number">1.1. </span>Where can I get help?</a></li>
	<li class="toc-level-2"><a href="#Can_I_ask_you_a_question"><span class="toc-number">1.2. </span>Can I ask you a question?</a></li>
	<li class="toc-level-2"><a href="#Who_are_the_Aegir_developers"><span class="toc-number">1.3. </span>Who are the Aegir developers?</a></li>
	<li class="toc-level-2"><a href="#I-d_like_to_help_out_become_a_developer"><span class="toc-number">1.4. </span>I'd like to help out / become a developer!</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Installing_Aegir"><span class="toc-number">2. </span>Installing Aegir</a>
<ol>
	<li class="toc-level-2"><a href="#Can_I_run_Aegir_on_a_shared_hosting_environment"><span class="toc-number">2.1. </span>Can I run Aegir on a shared hosting environment?</a></li>
	<li class="toc-level-2"><a href="#Can_I_run_Aegir_on_Windows"><span class="toc-number">2.2. </span>Can I run Aegir on Windows?</a></li>
	<li class="toc-level-2"><a href="#Can_Aegir_be_installed_next_to_CPanelPleskAlternCetc"><span class="toc-number">2.3. </span>Can Aegir be installed next to CPanel/Plesk/AlternC/etc?</a></li>
	<li class="toc-level-2"><a href="#Where_can_I_get_support_for_BarracudaOctopus_Aegir"><span class="toc-number">2.4. </span>Where can I get support for Barracuda/Octopus Aegir?</a></li>
	<li class="toc-level-2"><a href="#Do_I_really_need_to_create_an_aegir_user"><span class="toc-number">2.5. </span>Do I really need to create an aegir user?</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Using_Aegir"><span class="toc-number">3. </span>Using Aegir</a>
<ol>
	<li class="toc-level-2"><a href="#Cron_isn-t_running_scheduled_tasks_aren-t_being_executed_what_do_I_do"><span class="toc-number">3.1. </span>Cron isn't running (scheduled tasks aren't being executed), what do I do?</a></li>
	<li class="toc-level-2"><a href="#How_do_I_get_debugverbose_info_from_Drush_when_running_the_hosting_commands"><span class="toc-number">3.2. </span>How do I get debug/verbose info from Drush when running the hosting commands?</a></li>
	<li class="toc-level-2"><a href="#How_do_I_update_a_site-s_or_platform-s_modules_using_Aegir"><span class="toc-number">3.3. </span>How do I update a site's or platform's modules using Aegir?</a></li>
	<li class="toc-level-2"><a href="#Is_it_best_to_set_up_sites_under_aegir_as_www.example.com_or_just_as_example.com"><span class="toc-number">3.4. </span>Is it best to set up sites under aegir as www.example.com or just as example.com?</a></li>
	<li class="toc-level-2"><a href="#How_can_I_setup_a_site_to_use_https:_under_Aegir"><span class="toc-number">3.5. </span>How can I setup a site to use https:// under Aegir?</a></li>
	<li class="toc-level-2"><a href="#Aegir_is_not_verifying_deleting_migrating_my_site_because_of_file_permission_problems."><span class="toc-number">3.6. </span>Aegir is not verifying / deleting / migrating my site because of file permission problems.</a></li>
	<li class="toc-level-2"><a href="#I_can_verify_a_platform_but_Aegir_fails_to_provision_a_site_on_it_often_OpenAtrium"><span class="toc-number">3.7. </span>I can verify a platform but Aegir fails to provision a site on it (often OpenAtrium)</a></li>
	<li class="toc-level-2"><a href="#A_platform_with_an_installation_profile_has_verified_okay_but_Aegir_doesn-t_seem_to_be_able_to_use_the_profile"><span class="toc-number">3.8. </span>A platform with an installation profile has verified okay, but Aegir doesn't seem to be able to use the profile</a></li>
	<li class="toc-level-2"><a href="#What_is_a_patch_or_-hotfix-_and_how_can_I_apply_it_to_fix_my_site_if_I_can-t_don-t_want_to_upgrade_to_HEAD"><span class="toc-number">3.9. </span>What is a patch or 'hotfix', and how can I apply it to fix my site if I can't / don't want to upgrade to HEAD?</a></li>
	<li class="toc-level-2"><a href="#I_followed_the_installation_instructions._What_directory_holds_all_of_my_sites_now"><span class="toc-number">3.10. </span>I followed the installation instructions.  What directory holds all of my sites now?</a></li>
	<li class="toc-level-2"><a href="#I_tried_to_create_a_site_but_the_create_task_failed_and_retries_don-t_succeed._How_do_I_delete_the_partially_created_site_and_associated_Aegir_tasks"><span class="toc-number">3.11. </span>I tried to create a site, but the create task failed and retries don't succeed.  How do I delete the partially created site and associated Aegir tasks?</a></li>
	<li class="toc-level-2"><a href="#I_tried_to_migrate_a_site_but_Aegir_incorrectly_reported_an_incompatibility_between_one_or_more_modules_in_my_source_and_destination_platforms._How_do_I_force_Aegir_to_see_that_the_two_platforms_are_compatible"><span class="toc-number">3.12. </span>I tried to migrate a site, but Aegir incorrectly reported an incompatibility between one or more modules in my source and destination platforms.  How do I force Aegir to see that the two platforms are compatible?</a></li>
	<li class="toc-level-2"><a href="#What_about_.htaccess_settings"><span class="toc-number">3.13. </span>What about .htaccess settings?</a></li>
	<li class="toc-level-2"><a href="#How_can_I_tell_what_version_of_Aegir_I_have_installed"><span class="toc-number">3.14. </span>How can I tell what version of Aegir I have installed?</a></li>
	<li class="toc-level-2"><a href="#I-m_using_a_Git_repo_for_a_site_but_symlinks_make_crazy_things_happen"><span class="toc-number">3.15. </span>I'm using a Git repo for a site, but symlinks make crazy things happen!</a></li>
	<li class="toc-level-2"><a href="#How_can_I_tell_what_database_name_my_site_is_using"><span class="toc-number">3.16. </span>How can I tell what database name my site is using?</a></li>
	<li class="toc-level-2"><a href="#Can_I_use_the_subdirectory_multisite_feature_of_Drupal_in_Aegir"><span class="toc-number">3.17. </span>Can I use the subdirectory multisite feature of Drupal in Aegir?</a></li>
	<li class="toc-level-2"><a href="#After_installing_Aegir_I_have_two_servers_listed_is_this_normal"><span class="toc-number">3.18. </span>After installing Aegir I have two servers listed, is this normal?</a></li>
	<li class="toc-level-2"><a href="#My_cacheperformance_settings_in_adminsettingsperformance_keep_resetting_themselves"><span class="toc-number">3.19. </span>My cache/performance settings in /admin/settings/performance keep resetting themselves!</a></li>
	<li class="toc-level-2"><a href="#I_get_warn_NameVirtualHost_:80_has_no_VirtualHosts_when_I_restart_Apache"><span class="toc-number">3.20. </span>I get [warn] NameVirtualHost *:80 has no VirtualHosts when I restart Apache</a></li>
	<li class="toc-level-2"><a href="#I_get_-Dummy_connection_failed_to_fail-_when_doing_stuff"><span class="toc-number">3.21. </span>I get 'Dummy connection failed to fail' when doing $stuff</a><span class='diff-added'></span></li><span class='diff-added'>
	</span><li class="toc-level-2"><span class='diff-added'></span><a href="#How_do_I_make_custom_changes_to_a_site-s_settings.php"><span class='diff-added'></span><span class="toc-number"><span class='diff-added'>3.22. </span></span><span class='diff-added'>How do I make custom changes to a site's settings.php?</span></a></li>
</ol>
</li>
</ol>
</div>
</div>

<h1 id="Help">1. <a name="help">Help!</a></h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Where_can_I_get_help">1.1. <a name="helpwhere">Where can I get help?</a></h2>

<p>From the <a href="../../../../../handbook/index.html">Aegir Handbook</a> (which should be the first place you look) :</p>

<p>The Issue Queue for all the projects that make up Aegir is here: <a href="http://is.gd/ek2Dl" title="http://is.gd/ek2Dl">http://is.gd/ek2Dl</a></p>

<p>This is the first place to look - chances are someone's had the same problem as you before, and you'll get the quickest answers by searching for what they discovered.</p>

<p>Before asking a question or reporting an issue, you should read <a href="http://groups.drupal.org/node/21890">the bug reporting guidelines</a>.</p>

<p>You can join the #aegir channel at Freenode on IRC. (IRC instructions for drupal users are at: <a href="http://drupal.org/irc" title="http://drupal.org/irc">http://drupal.org/irc</a>). It's a friendly community, but a small one, so ask nicely and be patient!</p>

<p>If you find a solution to a problem that isn't in the documentation or in this FAQ, be the first to login and edit these pages to bring them up to date! The rest of the community thrives on your helpful information!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_I_ask_you_a_question">1.2. <a name="ask">Can I ask you a question?</a></h2>

<p>Of course you can! Don't ask to ask, just ask! It is polite to look if the question has already been answered in the documentation, the issue queue or here, but if not, please do ask around! If you ask a question and we have a nice answer, you can even add it to the FAQ here so that others can have your valuable answer.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Who_are_the_Aegir_developers">1.3. <a name="devs">Who are the Aegir developers?</a></h2>

<p>The Aegir core developers are listed on the <a href="../../../../../maintainers/index.html">Aegir maintainers page</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I-d_like_to_help_out_become_a_developer">1.4. <a name="givehelp">I'd like to help out / become a developer!</a></h2>

<p>We love people who want to help and get involved! <a href="../../../../../howtohelp/index.html">We even made a page for you to read</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Installing_Aegir">2. <a name="installing">Installing Aegir</a></h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_I_run_Aegir_on_a_shared_hosting_environment">2.1. <a name="sharedhosting">Can I run Aegir on a shared hosting environment?</a></h2>

<p>Shared hosting will not give you enough permissions to install new sites. Toughen up, read some Linux beginners tutorials and buy a cheap VPS which will do nicely.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_I_run_Aegir_on_Windows">2.2. <a name="windows">Can I run Aegir on Windows?</a></h2>

<p>To install Aegir you need a unix based operating system (for details see: <a href="../../../../../handbook/operating-system-support/index.html" title="http://community.aegirproject.org/handbook/operating-system-support">http://community.aegirproject.org/handbook/operating-system-support</a>). Aegir will not work on Windows and there are no plans to add support for it.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_Aegir_be_installed_next_to_CPanelPleskAlternCetc">2.3. <a name="cpanel">Can Aegir be installed next to CPanel/Plesk/AlternC/etc?</a></h2>

<p>No, or rather "it's not supported". See <a href="http://drupal.org/node/587554" title="http://drupal.org/node/587554">http://drupal.org/node/587554</a></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Where_can_I_get_support_for_BarracudaOctopus_Aegir">2.4. <a name="barracuda">Where can I get support for Barracuda/Octopus Aegir?</a></h2>

<p>Barracuda/Octopus are custom scripts for Aegir that install or set up various things that Aegir doesn't do out of the box. This is a custom solution tailored to Nginx systems, provided by <a href="http://omega8.cc/">Omega8.cc</a> and is not officially supported by the core Aegir project or team. For help or more information, please visit <a href="http://groups.drupal.org/boa">BOA Group</a>, <a href="http://drupal.org/project/barracuda">Barracuda</a> and <a href="http://drupal.org/project/octopus">Octopus</a> project pages / issue queue on drupal.org.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Do_I_really_need_to_create_an_aegir_user">2.5. <a name="user">Do I really need to create an aegir user?</a></h2>

<p>If you have a UNIX system, you already have a <em>user</em>. It just needs to not be root for safety reasons. But you don't really have to <em>create</em> a user.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Using_Aegir">3. <a name="using">Using Aegir</a></h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Cron_isn-t_running_scheduled_tasks_aren-t_being_executed_what_do_I_do">3.1. <a name="cron">Cron isn't running (scheduled tasks aren't being executed), what do I do?</a></h2>

<p>At the shell prompt as the aegir user, type 
<div class="codeblock"><code>crontab -e</code></div></p>

<p>a) If you get an error that the command is not found, then you need to install cron on your server (some basic images don't include it - Linode's Ubuntu 9.04 image is one):
<div class="codeblock"><code>sudo apt-get install cron</code></div>
Now go back to the directory /var/aegir/drupal-6.19 and re-execute the hosting dispatch:
<div class="codeblock"><code>/var/aegir/drush/drush.php @hostmaster hosting-setup</code></div>
Type 'crontab -e' again.</p>

<p>b) You should see the default entry: 
<div class="codeblock"><code>*/1 * * * * (php&nbsp; &#039;/&lt;path to drush&gt;/drush.php&#039; @hostmaster hosting-dispatch</code></div></p>

<p>But if this is still not working it may well be a permissions issue. An example error :
<div class="codeblock"><code>Forking : (php /&lt;path to drush&gt;/drush.php&nbsp; --quiet @hostmaster&nbsp; &#039;hosting&#039; &#039;task&#039; &#039;266&#039; --backend &amp;) &gt; /dev/null [0.432 sec]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [notice]<br />sh: /dev/null: Permission denied</code></div></p>

<p>This means the system doesn't have permissions to access /dev/null. To resolve it, give the system permissions to write to /dev/null (it should have this anyway), by executing:
<div class="codeblock"><code>sudo chmod a+w /dev/null</code></div></p>

<p>c) If this still hasn't worked, have you moved the location of drush?
If so - see <a href="http://drupal.org/node/540152" title="http://drupal.org/node/540152">http://drupal.org/node/540152</a></p>

<p>d)  If you are a *BSD user (verified on freebsd at least) 
You need to add the line :
<code>PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin</code> at the TOP of your cron file.
Simply log in as the aegir user and type crontab -e and insert the above line on top.
Thanks goes to mauror  for <a href="http://drupal.org/node/323732" title="http://drupal.org/node/323732">http://drupal.org/node/323732</a>.</p>

<p>e) When cron for your sites stops working, it is possible that for some reason (system overload, broken site, timeout etc), Aegir failed to release a sites cron semaphore. To release it, use this simple recipe:</p>

<p><div class="codeblock"><code>$ su -s /bin/bash - aegir<br />$ cd /path/to/hostmaster/sites/domain<br />$ drush vdel hosting_queue_cron_running -y</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_do_I_get_debugverbose_info_from_Drush_when_running_the_hosting_commands">3.2. <a name="drushdebug">How do I get debug/verbose info from Drush when running the hosting commands?</a></h2>

<p>Add these to the drush call :</p>

<p><div class="codeblock"><code>--debug</code></div></p>

<p>If you're having specific problems when using the frontend, you can easily run the hosting commands from the command line by:</p>

<ol>
<li>Click the view button and then copy the Drush command which was executed at the top of the log;</li>
<li>While logged in as the aegir user, paste the command in at the terminal and replace --backend with --debug at the end of the commandline.</li>
</ol>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_do_I_update_a_site-s_or_platform-s_modules_using_Aegir">3.3. <a name="modules">How do I update a site's or platform's modules using Aegir?</a></h2>

<p>Aegir isn't a package management GUI for installing modules or themes on your site.</p>

<p>It's designed to help manage your site between builds. To upgrade sites, you should be using the <a href="../../../../23/index.html">Migrate tool</a> to move your site between two platforms, which invokes drush updatedb.</p>

<p><strong>If you aren't ready for this paradigm, and are frustrated that Aegir isn't some GUI for wildly updating or installing new modules with no regards for rollback or dealing with when it will inevitably break your site, Aegir is probably not for you.</strong></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Is_it_best_to_set_up_sites_under_aegir_as_www.example.com_or_just_as_example.com">3.4. <a name="vhostalias">Is it best to set up sites under aegir as <a href="http://www.example.com/" title="www.example.com">www.example.com</a> or just as example.com?</a></h2>

<p>Aegir supports either method and can even automatically create whichever one you didn't use as the main site name. Read more about Aliases and this feature in our <a href="../../../../60/index.html">documentation</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_can_I_setup_a_site_to_use_https:_under_Aegir">3.5. <a name="ssl">How can I setup a site to use https:// under Aegir?</a></h2>

<p>Aegir ships with an experimental SSL feature, but currently doesn't provide any means of managing SSL certificates.</p>

<p>You can follow the ongoing SSL work <a href="http://drupal.org/project/issues/search/hostmaster?issue_tags=aegir-ssl">here</a>.</p>

<p>In the meantime, to set up SSL with basic self-signed certs, follow our <a href="../../../../29/index.html">documentation</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Aegir_is_not_verifying_deleting_migrating_my_site_because_of_file_permission_problems.">3.6. <a name="fileperms">Aegir is not verifying / deleting / migrating my site because of file permission problems.</a></h2>

<p>Aegir releases prior to 0.3 RC3 encountered an error when the web server has uploaded files and made new directory in the sites/$url/files directory. A prevalent example of this occurring is with the color module and when imagecache is used (such as in atrium).</p>

<p>This bug (see: <a href='http://drupal.org/node/203204'>#203204</a> ) was introduced with Drupal 6, and has since been fixed with Drupal 7. The patch has however not been backported yet, and the patch won't fix existing files that were created incorrectly.</p>

<p>In Aegir 0.3 RC3 we introduced a work around which sets the umask for the site, which forces new files and directories to be the correct permissions, but this will only take effect after the site has been succesfully verified. To enforce the correct file ownership and permissions on the files, run the following command on each of your Drupal 6 platforms :</p>

<p><div class="codeblock"><code>&nbsp; sudo chown -R $aegir_user $platform/sites/*/files</code></div></p>

<p>This will allow the verify task to correctly set the permissions and succesfully modify/remove the files.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_can_verify_a_platform_but_Aegir_fails_to_provision_a_site_on_it_often_OpenAtrium">3.7. <a name="memlimit">I can verify a platform but Aegir fails to provision a site on it (often OpenAtrium)</a></h2>

<p>A premature failure of a site install with an unhelpful message such as 'The external command could not be executed due to an application error' often, but not always, means your php-cli's memory_limit is set too low.</p>

<p>To confirm that this is an issue, try running drush @example.org provision-verify --debug from the command line to find out what caused the problem. Remember to replace 'example.org' with the URL of the site you are trying to verify.</p>

<p>Raise your memory_limit in your php cli php.ini file to something like 128MB, or maybe 64MB if that's too much. On Debian-based distributions this is /etc/php5/cli/php.ini. Apache does not need a restart for this: installations fail because the command is being executed via drush using php cli.</p>

<p>This is a common issue for OpenAtrium as it requires more memory to run its install profile as it has a lot more to do than a regular Drupal install.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="A_platform_with_an_installation_profile_has_verified_okay_but_Aegir_doesn-t_seem_to_be_able_to_use_the_profile">3.8. <a name="namespace">A platform with an installation profile has verified okay, but Aegir doesn't seem to be able to use the profile</a></h2>

<p>Your platform has been setup and verified okay, but when you go to create a new site Aegir keeps giving an error message about the profile, or the list doesn't offer you the profile you're expecting. This could be a namespace issue. Modules, themes and profiles in Drupal all have a machine name - which is essentially their folder name. This is also used to prefix their functions etc, so that there are no clashes.
What isn't often recognised or well documented is that Drupal has a single namespace for all items - so your themes, modules and install profiles can't have the same name as each other.
Often an installation profile will be created called 'OpenPotato' and the theme for it will also be called 'OpenPotato'. This makes Drupal unhappy, and when Drupal's unhappy Aegir's unhappy. We don't want that, but it isn't Aegir's fault, it's the developer's limited or lack of understanding of this Drupal caveat.
The easiest thing is to name your installation profile directory 'OpenPotato_install' and name the profile file 'OpenPotato_install.profile'. You'll also need to rename the functions inside this file.
Then everything should work just fine.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="What_is_a_patch_or_-hotfix-_and_how_can_I_apply_it_to_fix_my_site_if_I_can-t_don-t_want_to_upgrade_to_HEAD">3.9. <a name="patch">What is a patch or 'hotfix', and how can I apply it to fix my site if I can't / don't want to upgrade to HEAD?</a></h2>

<p>Sometimes releases are made and bugs are discovered afterward. We commit fixes for such bugs to HEAD, but HEAD is often volatile and you don't want to use a non-stable release in your environment. Fortunately we do (or should: if it's critical, please ask for a patch otherwise) provide a 'hotfix' or patch for users. A patch means that you can 'patch' your Aegir system to fix the bug without running the risks of using HEAD.</p>

<p>To patch an Aegir component, use the following example, in which we fix the Provision module with an imaginary patch. The same or similar steps apply for Hosting or Hostmaster (though you shouldn't need to patch Hostmaster, you only use it once to install!)</p>

<p>Run the steps as the aegir user.</p>

<p><div class="codeblock"><code>1) Backup /var/aegir/.drush/provision to somewhere else for safety, such as /tmp/provision<br /><br />2) Download the patch given in the ticket, to your server. Use wget or a similar useful tool for downloading it over the commandline. You can download the file to anywhere.<br /><br />3) edit your aegir user&#039;s crontab (crontab -e) and comment out the dispatch entry (place a &#039;#&#039; in front of the hosting dispatch cron entry). This is a precautionary step in case you patch the module, something goes wrong and it breaks the module. The hosting dispatch cron might come around and try and run the queue dispatcher and break/complain due to a broken component. If you know what you are doing and are fast enough to fix it, you may skip this.<br /><br />4) cd /var/aegir/.drush/provision/<br /><br />5) patch -p0 &lt; /path/to/the/patch/file<br /><br />6) crontab -e and uncomment the dispatch cron task</code></div></p>

<p>If the patch doesn't apply or prompts you to enter the filename to patch, try running patch -p1 instead of -p0 above.</p>

<p>If it still asks for clarification, verify that you are in the top-level directory of the component (in this case, we are inside /var/aegir/.drush/provision)</p>

<p>If it still doesn't work, it might be an unclean patch, and you should make a request in the relevant ticket to be given a cleaner patch to apply.</p>

<p>For more information on patches, please read the <a href="http://drupal.org/patch/apply">Drupal documentation</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_followed_the_installation_instructions._What_directory_holds_all_of_my_sites_now">3.10. <a name="sitedir">I followed the installation instructions.  What directory holds all of my sites now?</a></h2>

<p>For a full overview of a typical Aegir filesystem structure, <a href="../../../../77/index.html">read this</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_tried_to_create_a_site_but_the_create_task_failed_and_retries_don-t_succeed._How_do_I_delete_the_partially_created_site_and_associated_Aegir_tasks">3.11. <a name="sitecreatefailed">I tried to create a site, but the create task failed and retries don't succeed.  How do I delete the partially created site and associated Aegir tasks?</a></h2>

<p>See the section 'Manually deleting the site' from <a href="../../../../26/index.html">the documentation</a></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_tried_to_migrate_a_site_but_Aegir_incorrectly_reported_an_incompatibility_between_one_or_more_modules_in_my_source_and_destination_platforms._How_do_I_force_Aegir_to_see_that_the_two_platforms_are_compatible">3.12. <a name="migratefailed">I tried to migrate a site, but Aegir incorrectly reported an incompatibility between one or more modules in my source and destination platforms.  How do I force Aegir to see that the two platforms are compatible?</a></h2>

<p>This problem can arise for at least two different reasons.  First, you may have updated a module in a platform that you imported and forgotten to run update.php before you imported the site into Aegir.  Second, you may have updated a module in a platform and not re-verified the platform in Aegir.  Be sure that you have run update.php on a drupal platform that you will be importing into Aegir before you import.  Also, if you make any change to the modules in an Aegir Platform, re-verify that platform and all sites using that platform.  (At least, experience suggests that doing these things will allow the migration to succeed.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="What_about_.htaccess_settings">3.13. <a name="htaccess">What about .htaccess settings?</a></h2>

<p>As of recent 0.4 alpha releases, Aegir now reads in the contents of a platform's .htaccess file when generating the Apache configurations. You can safely make additions/changes to the platform .htaccess and expect the relevant site to respect those changes.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_can_I_tell_what_version_of_Aegir_I_have_installed">3.14. <a name="findver">How can I tell what version of Aegir I have installed?</a></h2>

<p>This works for version 1.1 and above . . . maybe earlier too . . . .
<div class="codeblock"><code>grep &#039;[hostmaster][download][tag]&#039; /var/aegir/.drush/provision/aegir.make</code></div></p>

<p>Also, if you have drush installed someplace other than in /var/aegir/.drush, then you should grep the aegir.make file in the directory tree where you have drush installed.  For example, on Ubuntu, apt-get may install drush in /usr/share/drush/.  So, the file to be grep'd would be /usr/share/drush/commands/provision/aegir.make.</p>

<p>If you're still unsure or this didn't work, contact a developer on IRC and we'll be able to tell you after you answer a few questions.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I-m_using_a_Git_repo_for_a_site_but_symlinks_make_crazy_things_happen">3.15. <a name="symlinks">I'm using a Git repo for a site, but symlinks make crazy things happen!</a></h2>

<p>If you're symlinking an entire /sites/ folder, Aegir may not acknowledge the site, as this will cause problems when cloning/migrating a site.</p>

<p>If you are using Git to version control your themes, custom modules, etc, and symlinking these into your sites folder, you will find that cloning a site will clone those symlinks (by virtue of copying the sites folder). This is probably not what you want to happen!</p>

<p>Themes and custom modules are better off being checked out to or symlinked into the install profile folder. If your site's install profile is 'foobar' (there's an 'install_profile' variable in the variables table), Drupal core understands to look inside the /var/aegir/yourplatform/profiles/foobar/ folder for modules and themes directories.</p>

<p>The files directory for uploads (which I don't think can be efficiently versioned anyway in most cases) and the settings.php file will be all that's left in your sites folder, and Aegir will happily move that all around as you clone or migrate your site between platforms.</p>

<p>Storing your site's dir in git is an archaic and inefficient method of developing sites. It's 2010 and there are more elegant ways of doing things thanks to Drush Make and Aegir. You might like to look at mig5's excellent article where he provides some great tips on how to manage <a href="../../../../../article-archive/drupal-deployments-workflows-version-control-drushmake-and-aegir/index.html">Drupal deployments &amp; workflows with version control, drush_make, and Aegir</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_can_I_tell_what_database_name_my_site_is_using">3.16. <a name="dbname">How can I tell what database name my site is using?</a></h2>

<p>Check the site's vhost configuration file in /var/aegir/config/server_$whatever/apache/vhost.d/. The db name (and user/password) are stored as 'SetEnv' parameters to Apache, allowing us to cloak database credentials in the settings.php so that they are protected in a multisite environment from prying eyes (admins with PHP filter permissions).</p>

<p>You can also use 'drush st' on your site to get a status report containing the database name, user, password, among other things.</p>

<p>In modern releases (0.4-alpha9 or so and above), the site database names have switched from site_$nid style names to more properly reflect the site name/URL itself.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_I_use_the_subdirectory_multisite_feature_of_Drupal_in_Aegir">3.17. <a name="subdir">Can I use the subdirectory multisite feature of Drupal in Aegir?</a></h2>

<p>Also known as "http://example.com/site1" and "http://example.com/site2" are different sites.</p>

<p>Short answer: not yet.</p>

<p>Long answer: this is currently not supported, because multiple sites usually end up sharing the same virtual host entry in the webserver and you will be required to upgrade/migrate all of the sites simultaneously. That is because /site1 is on the same drupal root as /site2. Another problem is that they can't be on separate servers...</p>

<p>To fix this, you would need to decouple virtual hosts and sites in Aegir, which is a fairly deeply rooted assumption. It <em>would</em> be possible to use Aliases to work around that and have the sites be in different document roots.</p>

<p>But even if you actually coerce Aegir into having multiple sites in the same domain, you get into crazy namespace issues. Do you want to allow the site on example.com to completely break sites example.com/site1 or example.com/site2? If so, who can? The same client? The same user? If not, you need to implement checks so there's no overlap...</p>

<p>Tools shouldn't dictate policy, people should. Therefore, this should probably be allowed, from a strictly technical perspective.</p>

<p>The thing is: domain names are cheap, contrarily to common opinion. You only have to get <em>one</em> domain and you can have as many sub-domains as you want. Hell, you can even have sub sub domains and have your whole domain tree down there, you're free to go. Providers often give out a free DNS namespace to their customers based on their username (full disclosure: <a href="http://koumbit.org/">Koumbit</a> does :P).</p>

<p>The other thing is: /site1 is exactly what drupal does: ot dispatches menus callbacks based those GET URLs. So trying to make Aegir (or Apache + Drupal, rather) do that is rather backward. On the other hand, Drupal is notoriously bad (if you make exception of the <a href="http://drupal.org/project/domain">Domain module</a>) at dispatching requests based on domains, and that's where Apache, DNS, Aegir and all their happy friends gets in.</p>

<p>In short, it's been very low priority for the use cases of the development team so far. If developers step up or if funding is provided, this could very well be part  of a future release. See this feature request for followup: <a href="http://drupal.org/node/705026" title="http://drupal.org/node/705026">http://drupal.org/node/705026</a></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="After_installing_Aegir_I_have_two_servers_listed_is_this_normal">3.18. <a name="twoservers">After installing Aegir I have two servers listed, is this normal?</a></h2>

<p>Yes. By default, after installing Aegir, a server node is created that represents your webserver. This also generates the 'server_master' Drush alias on your system. The second server node is called 'localhost' and has your database service attached to it, because by default MySQL listens on localhost and not your webserver's IP (or on all interfaces). This corresponds to the 'server_localhost' Drush alias on your system.</p>

<p>This is normally fine: you want your websites to be serve-able via your web server's IP / all interfaces, and your database server to only listen on localhost.</p>

<p>If you end up creating remote webservers, you'll not be able to have them use databases on this Aegir server is all.</p>

<p>If you know you want to have remote webservers communicate back to the Aegir server as the 'remote database server', you'll need to attach the database service type to the non-localhost server node, comment out bind-address in /etc/mysql/my.cnf and perform the necessary firewall changes to allow remote access to TCP port 3306 on the Aegir server.</p>

<p>But generally its recommended to create remote database servers too (or combine web  + db on the one remote server), so this is generally a non-issue, rather than use the original Aegir server as a 'remote' database server for remote web servers.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="My_cacheperformance_settings_in_adminsettingsperformance_keep_resetting_themselves">3.19. <a name="settings_override">My cache/performance settings in /admin/settings/performance keep resetting themselves!</a></h2>

<p>Some values such as <code>$conf[&#039;cache&#039;]</code> are hardcoded in the site's settings.php, which Aegir generates. This prevents some settings from being changed in the admin interface.</p>

<p>You can change the value of cache, and other variables, by creating a brand new file called 'local.settings.php' inside your site directory (e.g, alongside the settings.php). Put any value you want in it, e.g:</p>

<p><div class="codeblock"><code>&lt;?php<br />$conf[&#039;cache&#039;] = 3;</code></div></p>

<p>..leave off the closing <code>?&gt;</code> tag, and this setting will now override all others. Aegir will not edit or remove this file.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_get_warn_NameVirtualHost_:80_has_no_VirtualHosts_when_I_restart_Apache">3.20. <a name="warnnamevirtualhosts">I get [warn] NameVirtualHost *:80 has no VirtualHosts when I restart Apache</a></h2>

<p>This is a harmless warning that Apache throws when you have duplicate 'NameVirtualHost *:80' entries in the Apache config somewhere. It doesn't cause any problem.</p>

<p>Aegir inserts this config line into an Aegir-managed apache config file just to make sure it's there at least once. If it's annoying you and you want to remove this warning, you should remove the NameVirtualHost *:80 from /etc/apache2/ports.conf (which is where it usually is on Debian-based systems).</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_get_-Dummy_connection_failed_to_fail-_when_doing_stuff">3.21. <a name="failedtofail">I get 'Dummy connection failed to fail' when doing $stuff</a></h2>

<p>Aegir attempts to make a connection to your database server that is deliberately designed to fail. The intention of this, is to get the 'remote host' of your webserver as seen from the perspective of the database server. This is used to generate appropriate GRANT statements so that your Aegir-managed sites can connect to their appropriate databases.</p>

<p>If you get the message 'Dummy connection failed to fail', this means that Aegir was able to login to your mysql server using username 'intntnllyInvalid' with a null password. This is a security problem on your behalf!</p>

<p>You should secure your MySQL service by running 'mysql_secure_installation' or manually by removing users in your mysql database's User table that don't have a valid password. See <a href="http://dev.mysql.com/doc/refman/5.1/en/default-privileges.html" title="http://dev.mysql.com/doc/refman/5.1/en/default-privileges.html">http://dev.mysql.com/doc/refman/5.1/en/default-privileges.html</a> for more information.</p>

<p>Alternatively, if your MySQL server is sufficiently secured, there's always a possibility that your MySQL server responded with something Aegir didn't understand. Aegir expects either of these error messages:</p>

<p>Access denied for user(.... etc)</p>

<p>Host (...) is not allowed to connect to (....etc).</p>

<p>If your MySQL server responded with something else, but is secure, please <a href="http://drupal.org/node/add/project-issue/provision">open a bug report</a>.</p><span class='diff-added'>

</span><div class="toc-back-to-top"><span class='diff-added'></span><a href="#toc"><span class='diff-added'>Back to top</span></a><span class='diff-added'></span></div><span class='diff-added'></span><h2 id="How_do_I_make_custom_changes_to_a_site-s_settings.php"><span class='diff-added'>3.22. </span><a name="settingsphp"><span class='diff-added'>How do I make custom changes to a site's settings.php?</span></a><span class='diff-added'></span></h2><span class='diff-added'>

</span><p><span class='diff-added'>Aegir re-generates the settings.php for a site on certain tasks (Verify, Migrate, Backup, Restore, etc). For this reason it is not wise to put custom settings in the settings.php as you will probably lose them.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>Instead, create a file 'local.settings.php' alongside your site's settings.php and put your custom changes in there.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>If you want to make a change and have it apply to </span><em><span class='diff-added'>all</span></em><span class='diff-added'> sites immediately, put that change in /var/aegir/config/includes/global.inc.</span></p><span class='diff-added'>

</span><p><span class='diff-added'>Neither of these files will be overwritten by Aegir on any task. thus preserving your changes.</span></p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script></div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-23.html?destination=node%2F14%23comment-form">Login</a> or <a href="../../../../../user/register/index-23.html?destination=node%2F14%23comment-form">register</a> to post comments</span></li>
<li class="print active"><a href="index-2.html?print" class="active">Print</a></li>
<li class="print_recurse active"><a href="index-3.html?print&amp;book_recurse" class="active">Print entire section</a></li>
<li class="talk_comments last"><a href="../../../talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>



<div  id="node-606" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../faq/ubercart-integration-faq/index.html">Ubercart Integration FAQ</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>These are frequently asked questions about <a href="http://drupal.org/uc_hosting">Aegir Ubercart Integration</a>. For basic install and usage instructions please consult the <a href="../../../../516/index.html">guide</a>.</p>

<h2>Contents</h2>

<ul>
<li><a href="#site-install">Does this module create a site install task after product is purchased?</a></li>
</ul>

<h2><a name="#site-install">Does this module create a site install task after product is purchased?</a></h2>

<p>There may be some adjustment to UI needed to make this clearer, but the short answer is "Yes".</p>

<p>This is done conditionally: The module adds a checkbox saying "Create my site later" to the purchase form displayed on a product, if that product has the site feature. If that checbox is checked, then we go right to payment completion, and the client will create their site later using the regular aegir interface.</p>

<p>If that checkbox is not checked, we throw the user into a site creation form, store the data they input, and then use it on payment completion to create the site.</p>

<p>Regardless of whether or not they enter their site info during ordering, their client's quota is incremented.</p>

<p>In the case of a product kit with multiple sites included, only the first site can be created in this manner.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-22.html?destination=node%2F606%23comment-form">Login</a> or <a href="../../../../../user/register/index-22.html?destination=node%2F606%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-22.html?destination=node%2F606%23comment-form">Login</a> or <a href="../../../../../user/register/index-22.html?destination=node%2F606%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>



<div id="comments">
  <a id="comment-1940"></a>


<div  id="comment-1940" class="comment comment-published clear-block decay-10 decay-10">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/jonpugh/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="jonpugh&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/jonpugh/index.html" class="username" title="View user profile.">jonpugh</a></div><div class='date'>4:23pm May 17, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1940">#1</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>I am attempting to determine the specific actions needed to secure the mysql database when you get the "Dummy connection failed to fail" message, without running "mysql_secure_installation"...</p>

<p>So far I've determined you should run the following queries:</p>

<p><div class="codeblock"><code>DELETE FROM mysql.user WHERE User=&#039;&#039;;<br />DROP DATABASE test; <br />DELETE FROM mysql.db WHERE Db LIKE &#039;test%&#039;;</code></div></p>

<p>Once I confirm this works I will edit the FAQ to include these commands</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-23.html?destination=node%2F14%23comment-form">Login</a> or <a href="../../../../../user/register/index-23.html?destination=node%2F14%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


<a id="comment-1941"></a>


<div  id="comment-1941" class="comment comment-published clear-block decay-0 decay-0">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/jonpugh/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="jonpugh&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/jonpugh/index.html" class="username" title="View user profile.">jonpugh</a></div><div class='date'>9:40pm May 17, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1941">#2</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>That and a FLUSH PRIVILEGES; seems to do it.</p>

<p>I'll be testing it a few times more, then update the FAQ and Automatic Install instructions.</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-23.html?destination=node%2F14%23comment-form">Login</a> or <a href="../../../../../user/register/index-23.html?destination=node%2F14%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


</div>
    </div>
      </div>
</body>


<!-- Mirrored from community.aegirproject.org/node/14/revisions/3411/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 16:19:31 GMT -->
</html>
