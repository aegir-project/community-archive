<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from community.aegirproject.org/node/60/revisions/165/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:00:17 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="prev" href="../../../../22/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../42/index.html" />
<link rel="prev" href="../../../../22/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../42/index.html" />
<link rel="prev" href="../../../../22/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../42/index.html" />
<link rel="canonical" href="index.html" />
<link rel="shortcut icon" href="../../../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="print" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />

  <title>Revision of Site Aliases from Tue, 11/02/2010 - 12:02 | community.aegirproject.org</title>
</head>

<body  class="print rubik admin-static page">
  <div class='limiter clear-block'>
    <div id='content' class='clear-block'>
      <div class='print-header'>
      <h1 class='site-name'>community.aegirproject.org</h1>
  </div>
      

<div  id="node-60" class="node node-book clear-block node-page">
  
      <h2 class='node-title'>
            <a href="../../../index.html">Site Aliases</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div id='diff-inline-60'><div class='diff-inline-metadata clear-block'><div class='diff-inline-byline'>Updated by <a href="../../../../../users/mig5/index.html" class="username" title="View user profile.">mig5</a> on 11/02/2010 - 12:02</div><div class='diff-inline-legend clear-block'><label>Legend</label><span class='diff-added'>Added</span><span class='diff-changed'>Changed</span><span class='diff-deleted'>Deleted</span></div></div><span class='diff-added'></span><h3><span class='diff-added'>Introduction</span></h3><span class='diff-added'>

</span><p><span class='diff-added'>Site aliases are helpful if you move content to a new domain, change domain names or simply want to make sure that </span><a href="http://example.com/" title="http://example.com"><span class='diff-added'>http://example.com</span></a><span class='diff-added'> and </span><a href="http://www.example.com/" title="http://www.example.com"><span class='diff-added'>http://www.example.com</span></a><span class='diff-added'> take users to the same place.  You can implement site aliases with or without </span><em><span class='diff-added'>redirection</span></em><span class='diff-added'>.  The differences between these two methods and how Aegir handles them is described below.</span></p><span class='diff-added'>

</span><h3><span class='diff-added'>Enable Alias Support in Aegir</span></h3><span class='diff-added'>

</span><ol><span class='diff-added'>
</span><li><span class='diff-added'></span><p><span class='diff-added'>You have to enable alias support in Aegir as it is off by default.  Assuming the URL of your Aegir front end is aegir.example.com, browse to aegir.example.com/admin/hosting/features 
</span><span class='diff-added'><img src="http://groups.drupal.org/files/features-page.png" alt="how to get to the Aegir features page" /></span><span class='diff-added'></span></p><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><p><span class='diff-added'>Check the Site aliasing box
</span><span class='diff-added'><img src="http://groups.drupal.org/files/site-aliasing-feature.png" alt="how to enable site aliasing on Aegir" /></span><span class='diff-added'></span></p><span class='diff-added'></span></li><span class='diff-added'>
</span><li><span class='diff-added'></span><p><span class='diff-added'>Click Save configuration</span></p><span class='diff-added'></span></li><span class='diff-added'>
</span></ol><span class='diff-added'>

</span><h3><span class='diff-added'>Global Settings for Aliasing</span></h3><span class='diff-added'>

</span><p><span class='diff-added'>After you have enabled the site aliasing feature in Aegir you can navigate to aegir.example.com/admin/hosting/aliases (see the menu item that is added under Hosting in the admin menu bar).  Here you can set default site alias settings for all of your Aegir-hosted sites.</span></p><span class='diff-added'>

</span><p><span class='diff-added'></span><span class='diff-added'><img src="http://groups.drupal.org/files/global-aliasing-settings.png" alt="global site aliasing settings" /></span><span class='diff-added'></span></p><span class='diff-added'>

</span><h3><span class='diff-added'>Site-Specific Settings for Aliasing</span></h3><span class='diff-added'>

</span><p><span class='diff-added'>You can override the global settings for aliasing by configuring site-specific alias settings either when you create the site or later by editing the site settings.</span></p><span class='diff-added'>

</span><p><span class='diff-added'></span><span class='diff-added'><img src="http://groups.drupal.org/files/site-specific-aliasing-settings.png" alt="site-specific aliasing settings" /></span><span class='diff-added'></span></p><span class='diff-added'>

</span><h3><span class='diff-added'>Redirection Option</span></h3><span class='diff-added'>

</span><p><span class='diff-added'>For users, one of the main differences that occurs when redirection is turned on is that the URL that they enter in the browser address bar changes.  This reflects what the server is doing, which is in effect to redirect the request to the same site under the main URL, as opposed to serving the same site from under an alias.</span></p><span class='diff-added'>

</span><h4><span class='diff-added'>User navigates to my-old-domain.com with redirection off</span></h4><span class='diff-added'>

</span><p><span class='diff-added'></span><span class='diff-added'><img src="http://groups.drupal.org/files/aliasing-without-redirection.png" alt="aliasing without redirection" /></span><span class='diff-added'></span></p><span class='diff-added'>

</span><h4><span class='diff-added'>User navigates to my-old-domain.com with redirection on</span></h4><span class='diff-added'>

</span><p><span class='diff-added'></span><span class='diff-added'><img src="http://groups.drupal.org/files/aliasing-with-redirection.png" alt="aliasing with redirection" /></span><span class='diff-added'></span></p><span class='diff-added'>

</span><h3><span class='diff-added'>Aegir alias management under the hood</span></h3><span class='diff-added'>

</span><p><span class='diff-added'>Aegir primarily manages aliases in the virtual hosts file for each site (e.g. /var/aegir/config/server_master/apache/vhost.d/www.example.com)</span></p><span class='diff-added'>

</span><p><span class='diff-added'>When Aliases are in use, the virtual hosts file will have a ServerAlias directive for each site alias:</span></p><span class='diff-added'>

</span><p><span class='diff-added'></span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>ServerAlias example.com</span><br /><span class='diff-added'>ServerAlias www.my-old-domain.com</span></code><span class='diff-added'></span></div><span class='diff-added'></span></p><span class='diff-added'>

</span><p><span class='diff-added'>In addition to the above directives, when redirection is off, Aegir creates a symlink in the platform/sites/ folder for each alias that points to the folder associated with the primary domain</span></p><span class='diff-added'>

</span><p><span class='diff-added'></span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>lrwxrwxrwx 1 aegir aegir&nbsp;&nbsp; 15 Oct 31 23:25 example.com -&gt; </span><a href="http://www.example.com<br /><span class='diff-added'>drwxr-xr-x" title="www.example.com</span><br /><span class='diff-added'>drwxr-xr-x">www.example.com</span><br /><span class='diff-added'>drwxr-xr-x</span></a><span class='diff-added'> 7 aegir aegir 4096 Oct 31 23:02 </span><a href="http://www.example.com<br /><span class='diff-added'>lrwxrwxrwx" title="www.example.com</span><br /><span class='diff-added'>lrwxrwxrwx">www.example.com</span><br /><span class='diff-added'>lrwxrwxrwx</span></a><span class='diff-added'> 1 aegir aegir&nbsp;&nbsp; 15 Oct 31 23:25 </span><a href="http://www.my-old-domain.com/" title="www.my-old-domain.com"><span class='diff-added'>www.my-old-domain.com</span></a><span class='diff-added'> -&gt; www.example.com</span></code><span class='diff-added'></span></div><span class='diff-added'></span></p><span class='diff-added'>

</span><p><span class='diff-added'>When redirection </span><strong><span class='diff-added'>is</span></strong><span class='diff-added'> enabled, Rewrite directives are added to the virtualhost to send http requests to the primary domain that the aliases are associated with:</span></p><span class='diff-added'>

</span><p><span class='diff-added'></span><div class="codeblock"><span class='diff-added'></span><code><span class='diff-added'>ServerAlias example.com</span><br /><span class='diff-added'>ServerAlias </span><a href="http://www.my-old-domain.com<br /><span class='diff-added'>RewriteEngine" title="www.my-old-domain.com</span><br /><span class='diff-added'>RewriteEngine">www.my-old-domain.com</span><br /><span class='diff-added'>RewriteEngine</span></a><span class='diff-added'> on</span><br /><span class='diff-added'>RewriteCond %{HTTP_HOST} !^www.example.com$ [NC]</span><br /><span class='diff-added'>RewriteRule ^/</span><em><span class='diff-added'>(.</span></em><span class='diff-added'>)$ http://www.example.com/$1 [L,R=301]</span></code><span class='diff-added'></span></div><span class='diff-added'></span></p><span class='diff-added'>

</span><p><span class='diff-added'>The symlinks are not required in this case.</span></p></div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-385.html?destination=node%2F60%23comment-form">Login</a> or <a href="../../../../../user/register/index-385.html?destination=node%2F60%23comment-form">register</a> to post comments</span></li>
<li class="print active"><a href="index-2.html?print" class="active">Print</a></li>
<li class="print_recurse active"><a href="index-3.html?print&amp;book_recurse" class="active">Print entire section</a></li>
<li class="talk_comments last"><a href="../../../talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>


    </div>
      </div>
</body>


<!-- Mirrored from community.aegirproject.org/node/60/revisions/165/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 18:00:17 GMT -->
</html>
