<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from community.aegirproject.org/node/4/revisions/58/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 17:36:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="next" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../intro/index.html" />
<link rel="canonical" href="index.html" />
<link rel="prev" href="../../../../../content/aegir-handbook/index.html" />
<link rel="up" href="../../../../../content/aegir-handbook/index.html" />
<link rel="next" href="../../../../../handbook/operating-system-support/index.html" />
<link rel="prev" href="../../../../../intro/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../34/index.html" />
<link rel="prev" href="../../../../../handbook/operating-system-support/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../project-history/index.html" />
<link rel="prev" href="../../../../34/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/index.html" />
<link rel="prev" href="../../../../../project-history/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="prev" href="../../../../../faq/index.html" />
<link rel="up" href="../../../../../faq/index.html" />
<link rel="next" href="../../../../../intro/case-studies/index.html" />
<link rel="prev" href="../../../../../faq/ubercart-integration-faq/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../wikipedia-article/index.html" />
<link rel="prev" href="../../../../../intro/case-studies/index.html" />
<link rel="up" href="../../../../../intro/index.html" />
<link rel="next" href="../../../../../help/index.html" />
<link rel="prev" href="../../../../../wikipedia-article/index.html" />
<link rel="up" href="../../../../../content/aegir-handbook/index.html" />
<link rel="next" href="../../../../../aegir-handbook/getting-help/troubleshooting-aegir/index.html" />
<link rel="prev" href="../../../../../help/index.html" />
<link rel="up" href="../../../../../help/index.html" />
<link rel="next" href="../../../../../contact/index.html" />
<link rel="prev" href="../../../../../aegir-handbook/getting-help/troubleshooting-aegir/index.html" />
<link rel="up" href="../../../../../help/index.html" />
<link rel="next" href="../../../../../bugs/index.html" />
<link rel="prev" href="../../../../../contact/index.html" />
<link rel="up" href="../../../../../help/index.html" />
<link rel="next" href="../../../../../howtohelp/index.html" />
<link rel="prev" href="../../../../../bugs/index.html" />
<link rel="up" href="../../../../../help/index.html" />
<link rel="next" href="../../../../../donate/index.html" />
<link rel="prev" href="../../../../../howtohelp/index.html" />
<link rel="up" href="../../../../../help/index.html" />
<link rel="next" href="../../../../../service-providers/index.html" />
<link rel="prev" href="../../../../../donate/index.html" />
<link rel="up" href="../../../../../help/index.html" />
<link rel="next" href="../../../../3/index.html" />
<link rel="prev" href="../../../../../service-providers/index.html" />
<link rel="up" href="../../../../../service-providers/index.html" />
<link rel="next" href="../../../../../using/index.html" />
<link rel="prev" href="../../../../3/index.html" />
<link rel="up" href="../../../../../content/aegir-handbook/index.html" />
<link rel="next" href="../../../../19/index.html" />
<link rel="prev" href="../../../../../using/index.html" />
<link rel="up" href="../../../../../using/index.html" />
<link rel="next" href="../../../../43/index.html" />
<link rel="prev" href="../../../../19/index.html" />
<link rel="up" href="../../../../../using/index.html" />
<link rel="next" href="../../../../22/index.html" />
<link rel="prev" href="../../../../43/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../60/index.html" />
<link rel="prev" href="../../../../22/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../42/index.html" />
<link rel="prev" href="../../../../60/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../23/index.html" />
<link rel="prev" href="../../../../42/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../../migration-tips/index.html" />
<link rel="prev" href="../../../../23/index.html" />
<link rel="up" href="../../../../23/index.html" />
<link rel="next" href="../../../../../content/renaming-aegir-hostmaster-site-itself/index.html" />
<link rel="prev" href="../../../../../migration-tips/index.html" />
<link rel="up" href="../../../../23/index.html" />
<link rel="next" href="../../../../24/index.html" />
<link rel="prev" href="../../../../../content/renaming-aegir-hostmaster-site-itself/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../25/index.html" />
<link rel="prev" href="../../../../24/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../45/index.html" />
<link rel="prev" href="../../../../25/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../26/index.html" />
<link rel="prev" href="../../../../45/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../../open-id-tips-and-tricks/index.html" />
<link rel="prev" href="../../../../26/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../../content/best-recipes-disaster-and-how-avoid-them/index.html" />
<link rel="prev" href="../../../../../open-id-tips-and-tricks/index.html" />
<link rel="up" href="../../../../43/index.html" />
<link rel="next" href="../../../../20/index.html" />
<link rel="prev" href="../../../../../content/best-recipes-disaster-and-how-avoid-them/index.html" />
<link rel="up" href="../../../../../using/index.html" />
<link rel="next" href="../../../../44/index.html" />
<link rel="prev" href="../../../../20/index.html" />
<link rel="up" href="../../../../20/index.html" />
<link rel="next" href="../../../../27/index.html" />
<link rel="prev" href="../../../../44/index.html" />
<link rel="up" href="../../../../20/index.html" />
<link rel="next" href="../../../../256/index.html" />
<link rel="prev" href="../../../../27/index.html" />
<link rel="up" href="../../../../20/index.html" />
<link rel="next" href="../../../../28/index.html" />
<link rel="prev" href="../../../../256/index.html" />
<link rel="up" href="../../../../../using/index.html" />
<link rel="next" href="../../../../../administrator/index.html" />
<link rel="prev" href="../../../../28/index.html" />
<link rel="up" href="../../../../../content/aegir-handbook/index.html" />
<link rel="next" href="../../../../../installing/index.html" />
<link rel="prev" href="../../../../../administrator/index.html" />
<link rel="up" href="../../../../../administrator/index.html" />
<link rel="next" href="../../../../../content/installing/system-requirements/index.html" />
<link rel="prev" href="../../../../../installing/index.html" />
<link rel="up" href="../../../../../installing/index.html" />
<link rel="next" href="../../../../../installing/debian/index.html" />
<link rel="prev" href="../../../../../content/installing/system-requirements/index.html" />
<link rel="up" href="../../../../../installing/index.html" />
<link rel="next" href="../../../../../content/installing/debian/automatic-installation-ubuntu-1104-quickstart/index.html" />
<link rel="prev" href="../../../../../installing/debian/index.html" />
<link rel="up" href="../../../../../installing/debian/index.html" />
<link rel="next" href="../../../../../installing/manual/index.html" />
<link rel="prev" href="../../../../../content/installing/debian/automatic-installation-ubuntu-1104-quickstart/index.html" />
<link rel="up" href="../../../../../installing/index.html" />
<link rel="next" href="../../../../417/index.html" />
<link rel="prev" href="../../../../../installing/manual/index.html" />
<link rel="up" href="../../../../../installing/manual/index.html" />
<link rel="next" href="../../../../../content/apache-mysql-php-aegir/index.html" />
<link rel="prev" href="../../../../417/index.html" />
<link rel="up" href="../../../../417/index.html" />
<link rel="next" href="../../../../../content/nginx-mariadb-php-aegir-memp%c3%a6/index.html" />
<link rel="prev" href="../../../../../content/apache-mysql-php-aegir/index.html" />
<link rel="up" href="../../../../417/index.html" />
<link rel="next" href="../../../../../content/installing/manual/centos-6x-aegir-install-guide/index.html" />
<link rel="prev" href="../../../../../content/nginx-mariadb-php-aegir-memp%c3%a6/index.html" />
<link rel="up" href="../../../../../installing/manual/index.html" />
<link rel="next" href="../../../../../installing/manual/manual-install-web-cluster-aegir-using-nginx/index.html" />
<link rel="prev" href="../../../../../content/installing/manual/centos-6x-aegir-install-guide/index.html" />
<link rel="up" href="../../../../../installing/manual/index.html" />
<link rel="next" href="../../../../../content/installing/manual/nginx-mariadb-php-fpm-single-server-installation/index.html" />
<link rel="prev" href="../../../../../installing/manual/manual-install-web-cluster-aegir-using-nginx/index.html" />
<link rel="up" href="../../../../../installing/manual/index.html" />
<link rel="next" href="../../../../462/index.html" />
<link rel="prev" href="../../../../../content/installing/manual/nginx-mariadb-php-fpm-single-server-installation/index.html" />
<link rel="up" href="../../../../../installing/index.html" />
<link rel="next" href="../../../../../installing/ubuntu-1004-specific-how-downgrade-php-52-install/index.html" />
<link rel="prev" href="../../../../462/index.html" />
<link rel="up" href="../../../../../installing/index.html" />
<link rel="next" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="prev" href="../../../../../installing/ubuntu-1004-specific-how-downgrade-php-52-install/index.html" />
<link rel="up" href="../../../../../administrator/index.html" />
<link rel="next" href="../../../../../content/content/administrator/post-install-configuration/importing-sites/index.html" />
<link rel="prev" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../content/importing-existing-aegir-backups/index.html" />
<link rel="prev" href="../../../../../content/content/administrator/post-install-configuration/importing-sites/index.html" />
<link rel="up" href="../../../../../content/content/administrator/post-install-configuration/importing-sites/index.html" />
<link rel="next" href="../../../../../content/importing-single-site-manually/index.html" />
<link rel="prev" href="../../../../../content/importing-existing-aegir-backups/index.html" />
<link rel="up" href="../../../../../content/content/administrator/post-install-configuration/importing-sites/index.html" />
<link rel="next" href="../../../../../content/importing-complete-drupal-platform/index.html" />
<link rel="prev" href="../../../../../content/importing-single-site-manually/index.html" />
<link rel="up" href="../../../../../content/content/administrator/post-install-configuration/importing-sites/index.html" />
<link rel="next" href="../../../../517/index.html" />
<link rel="prev" href="../../../../../content/importing-complete-drupal-platform/index.html" />
<link rel="up" href="../../../../../content/content/administrator/post-install-configuration/importing-sites/index.html" />
<link rel="next" href="../../../../426/index.html" />
<link rel="prev" href="../../../../517/index.html" />
<link rel="up" href="../../../../../content/content/administrator/post-install-configuration/importing-sites/index.html" />
<link rel="next" href="../../../../30/index.html" />
<link rel="prev" href="../../../../426/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../396/index.html" />
<link rel="prev" href="../../../../30/index.html" />
<link rel="up" href="../../../../30/index.html" />
<link rel="next" href="../../../../446/index.html" />
<link rel="prev" href="../../../../396/index.html" />
<link rel="up" href="../../../../30/index.html" />
<link rel="next" href="../../../../../content/web-clusters/index.html" />
<link rel="prev" href="../../../../446/index.html" />
<link rel="up" href="../../../../30/index.html" />
<link rel="next" href="../../../../388/index.html" />
<link rel="prev" href="../../../../../content/web-clusters/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../427/index.html" />
<link rel="prev" href="../../../../388/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../341/index.html" />
<link rel="prev" href="../../../../427/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../content/content/administrator/post-install-configuration/using-ssl/index.html" />
<link rel="prev" href="../../../../341/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../administrator/dns/index.html" />
<link rel="prev" href="../../../../../content/content/administrator/post-install-configuration/using-ssl/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../dnswildcard/index.html" />
<link rel="prev" href="../../../../../administrator/dns/index.html" />
<link rel="up" href="../../../../../administrator/dns/index.html" />
<link rel="next" href="../../../../39/index.html" />
<link rel="prev" href="../../../../../dnswildcard/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../73/index.html" />
<link rel="prev" href="../../../../39/index.html" />
<link rel="up" href="../../../../39/index.html" />
<link rel="next" href="../../../../72/index.html" />
<link rel="prev" href="../../../../73/index.html" />
<link rel="up" href="../../../../39/index.html" />
<link rel="next" href="../../../../70/index.html" />
<link rel="prev" href="../../../../72/index.html" />
<link rel="up" href="../../../../39/index.html" />
<link rel="next" href="../../../../../content/overriding-site-specific-php-values/index.html" />
<link rel="prev" href="../../../../70/index.html" />
<link rel="up" href="../../../../70/index.html" />
<link rel="next" href="../../../../71/index.html" />
<link rel="prev" href="../../../../../content/overriding-site-specific-php-values/index.html" />
<link rel="up" href="../../../../39/index.html" />
<link rel="next" href="../../../../../content/injecting-drushrcphp/index.html" />
<link rel="prev" href="../../../../71/index.html" />
<link rel="up" href="../../../../39/index.html" />
<link rel="next" href="../../../../../contrib-modules/index.html" />
<link rel="prev" href="../../../../../content/injecting-drushrcphp/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../contrib-modules/aegir-services/index.html" />
<link rel="prev" href="../../../../../contrib-modules/index.html" />
<link rel="up" href="../../../../../contrib-modules/index.html" />
<link rel="next" href="../../../../../content/contrib-modules/contribs-aegir-7x-3x/index.html" />
<link rel="prev" href="../../../../../contrib-modules/aegir-services/index.html" />
<link rel="up" href="../../../../../contrib-modules/index.html" />
<link rel="next" href="../../../../../content/contrib-modules/devshop-provision/index.html" />
<link rel="prev" href="../../../../../content/contrib-modules/contribs-aegir-7x-3x/index.html" />
<link rel="up" href="../../../../../contrib-modules/index.html" />
<link rel="next" href="../../../../../content/content/contrib-modules/devshop-provision/commands/index.html" />
<link rel="prev" href="../../../../../content/contrib-modules/devshop-provision/index.html" />
<link rel="up" href="../../../../../content/contrib-modules/devshop-provision/index.html" />
<link rel="next" href="../../../../../content/contrib-modules/provision-acl/index.html" />
<link rel="prev" href="../../../../../content/content/contrib-modules/devshop-provision/commands/index.html" />
<link rel="up" href="../../../../../contrib-modules/index.html" />
<link rel="next" href="../../../../516/index.html" />
<link rel="prev" href="../../../../../content/contrib-modules/provision-acl/index.html" />
<link rel="up" href="../../../../../contrib-modules/index.html" />
<link rel="next" href="../../../../../contrib-modules/provision-civicrm/index.html" />
<link rel="prev" href="../../../../516/index.html" />
<link rel="up" href="../../../../../contrib-modules/index.html" />
<link rel="next" href="../../../../../content/content/administrator/post-install-configuration/create-sudo-user-server-administration/index.html" />
<link rel="prev" href="../../../../../contrib-modules/provision-civicrm/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../content/content/administrator/post-install-configuration/experimental-aegir-2-ubuntu-1204-apache-php/index.html" />
<link rel="prev" href="../../../../../content/content/administrator/post-install-configuration/create-sudo-user-server-administration/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../handbook/administrator/post-install-configuration/using-proxy-cache-accelerate-platform-build/index.html" />
<link rel="prev" href="../../../../../content/content/administrator/post-install-configuration/experimental-aegir-2-ubuntu-1204-apache-php/index.html" />
<link rel="up" href="../../../../../content/administrator/post-install-configuration/index.html" />
<link rel="next" href="../../../../../upgrading/index.html" />
<link rel="prev" href="../../../../../handbook/administrator/post-install-configuration/using-proxy-cache-accelerate-platform-build/index.html" />
<link rel="up" href="../../../../../administrator/index.html" />
<link rel="next" href="../../../../../upgrading/manual/index.html" />
<link rel="prev" href="../../../../../upgrading/index.html" />
<link rel="up" href="../../../../../upgrading/index.html" />
<link rel="next" href="../../../../../upgrading/debian/index.html" />
<link rel="prev" href="../../../../../upgrading/manual/index.html" />
<link rel="up" href="../../../../../upgrading/index.html" />
<link rel="next" href="../../../../../upgrading/script/index.html" />
<link rel="prev" href="../../../../../upgrading/debian/index.html" />
<link rel="up" href="../../../../../upgrading/index.html" />
<link rel="next" href="../../../../../upgrading/path/index.html" />
<link rel="prev" href="../../../../../upgrading/script/index.html" />
<link rel="up" href="../../../../../upgrading/index.html" />
<link rel="next" href="../../../../../uninstalling/index.html" />
<link rel="prev" href="../../../../../upgrading/path/index.html" />
<link rel="up" href="../../../../../administrator/index.html" />
<link rel="next" href="../../../../../content/administrator/extracting-drupal-site-aegir/index.html" />
<link rel="prev" href="../../../../../uninstalling/index.html" />
<link rel="up" href="../../../../../administrator/index.html" />
<link rel="next" href="../../../../../content/administrator/troubleshooting-aegir/index.html" />
<link rel="prev" href="../../../../../content/administrator/extracting-drupal-site-aegir/index.html" />
<link rel="up" href="../../../../../administrator/index.html" />
<link rel="next" href="../../../../321/index.html" />
<link rel="prev" href="../../../../../content/administrator/troubleshooting-aegir/index.html" />
<link rel="up" href="../../../../../content/administrator/troubleshooting-aegir/index.html" />
<link rel="next" href="../../../../../debugging/index.html" />
<link rel="prev" href="../../../../321/index.html" />
<link rel="up" href="../../../../../content/administrator/troubleshooting-aegir/index.html" />
<link rel="next" href="../../../../../content/content/administrator/troubleshooting-aegir/strict-warning-error/index.html" />
<link rel="prev" href="../../../../../debugging/index.html" />
<link rel="up" href="../../../../../content/administrator/troubleshooting-aegir/index.html" />
<link rel="next" href="../../../../546/index.html" />
<link rel="prev" href="../../../../../content/content/administrator/troubleshooting-aegir/strict-warning-error/index.html" />
<link rel="up" href="../../../../../content/aegir-handbook/index.html" />
<link rel="next" href="../../../../../content/release-process/index.html" />
<link rel="prev" href="../../../../546/index.html" />
<link rel="up" href="../../../../546/index.html" />
<link rel="next" href="../../../../../debian/index.html" />
<link rel="prev" href="../../../../../content/release-process/index.html" />
<link rel="up" href="../../../../546/index.html" />
<link rel="next" href="../../../../../roadmap/1/index.html" />
<link rel="prev" href="../../../../../debian/index.html" />
<link rel="up" href="../../../../546/index.html" />
<link rel="next" href="../../../../../roadmap/2/index.html" />
<link rel="prev" href="../../../../../roadmap/1/index.html" />
<link rel="up" href="../../../../546/index.html" />
<link rel="next" href="../../../../../roadmap/2.0/d7-port-dns-editor-plan-google-summer-code-2011/index.html" />
<link rel="prev" href="../../../../../roadmap/2/index.html" />
<link rel="up" href="../../../../../roadmap/2/index.html" />
<link rel="next" href="../../../../../scrums/index.html" />
<link rel="prev" href="../../../../../roadmap/2.0/d7-port-dns-editor-plan-google-summer-code-2011/index.html" />
<link rel="up" href="../../../../546/index.html" />
<link rel="next" href="../../../../../content/scrums/archive-2010/index.html" />
<link rel="prev" href="../../../../../scrums/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../180/index.html" />
<link rel="prev" href="../../../../../content/scrums/archive-2010/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2010/index.html" />
<link rel="next" href="../../../../196/index.html" />
<link rel="prev" href="../../../../180/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2010/index.html" />
<link rel="next" href="../../../../210/index.html" />
<link rel="prev" href="../../../../196/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2010/index.html" />
<link rel="next" href="../../../../225/index.html" />
<link rel="prev" href="../../../../210/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2010/index.html" />
<link rel="next" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="prev" href="../../../../225/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../240/index.html" />
<link rel="prev" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../250/index.html" />
<link rel="prev" href="../../../../240/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../264/index.html" />
<link rel="prev" href="../../../../250/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../280/index.html" />
<link rel="prev" href="../../../../264/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../301/index.html" />
<link rel="prev" href="../../../../280/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../340/index.html" />
<link rel="prev" href="../../../../301/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../356/index.html" />
<link rel="prev" href="../../../../340/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../383/index.html" />
<link rel="prev" href="../../../../356/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../463/index.html" />
<link rel="prev" href="../../../../383/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../490/index.html" />
<link rel="prev" href="../../../../463/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../513/index.html" />
<link rel="prev" href="../../../../490/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../541/index.html" />
<link rel="prev" href="../../../../513/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-04-12/index.html" />
<link rel="prev" href="../../../../541/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-04-19/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-04-12/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-04-26/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-04-19/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-05-03/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-04-26/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-05-10/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-05-03/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-05-24/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-05-10/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-05-31/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-05-24/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-06-07/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-05-31/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-06-21/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-06-07/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-06-28/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-06-21/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-07-05/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-06-28/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-07-12/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-07-05/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-07-19/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-07-12/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-07-26/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-07-19/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-08-02/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-07-26/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-09-13/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-08-02/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-09-20/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-09-13/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-09-27/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-09-20/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../scrums/weekly-scrum-irc-log-2011-10-18/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-09-27/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-01/index.html" />
<link rel="prev" href="../../../../../scrums/weekly-scrum-irc-log-2011-10-18/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-14/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-01/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-21/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-14/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-28/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-21/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2011-12-12/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-28/index.html" />
<link rel="up" href="../../../../../content/scrums/archive-2011/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-01-09/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2011-12-12/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-06/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-01-09/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-13/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-06/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-20/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-13/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-27/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-20/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-05/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-27/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-12/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-05/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-19/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-12/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-26/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-19/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-09/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-26/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-12/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-09/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-16/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-12/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-26/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-16/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-30/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-26/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-05-10/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-30/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-05-28/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-05-10/index.html" />
<link rel="up" href="../../../../../scrums/index.html" />
<link rel="next" href="../../../../../roadmap/3/index.html" />
<link rel="prev" href="../../../../../content/scrums/weekly-scrum-irc-log-2012-05-28/index.html" />
<link rel="up" href="../../../../546/index.html" />
<link rel="next" href="../../../../../maintainers/index.html" />
<link rel="prev" href="../../../../../roadmap/3/index.html" />
<link rel="up" href="../../../../546/index.html" />
<link rel="next" href="../../../../../content/maintainers/aegir-co-maintainer-criteria/index.html" />
<link rel="prev" href="../../../../../maintainers/index.html" />
<link rel="up" href="../../../../../maintainers/index.html" />
<link rel="next" href="../../../../../content/maintainers/aegir-project-leadership/index.html" />
<link rel="prev" href="../../../../../content/maintainers/aegir-co-maintainer-criteria/index.html" />
<link rel="up" href="../../../../../maintainers/index.html" />
<link rel="next" href="../../../../../content/maintainers/how-welcome-someone-core-team/index.html" />
<link rel="prev" href="../../../../../content/maintainers/aegir-project-leadership/index.html" />
<link rel="up" href="../../../../../maintainers/index.html" />
<link rel="next" href="../../../../../development-news/index.html" />
<link rel="prev" href="../../../../../content/maintainers/how-welcome-someone-core-team/index.html" />
<link rel="up" href="../../../../546/index.html" />
<link rel="next" href="../../../../../content/office-hours/index.html" />
<link rel="prev" href="../../../../../development-news/index.html" />
<link rel="up" href="../../../../546/index.html" />
<link rel="next" href="../../../../../release-notes/index.html" />
<link rel="prev" href="../../../../../content/office-hours/index.html" />
<link rel="up" href="../../../../546/index.html" />
<link rel="next" href="../../../../../3/index.html" />
<link rel="prev" href="../../../../../release-notes/index.html" />
<link rel="up" href="../../../../../release-notes/index.html" />
<link rel="next" href="../../../../../3/index-2.html" />
<link rel="prev" href="../../../../../3/index.html" />
<link rel="up" href="../../../../../release-notes/index.html" />
<link rel="next" href="../../../../../3/index-3.html" />
<link rel="prev" href="../../../../../3/index-2.html" />
<link rel="up" href="../../../../../release-notes/index.html" />
<link rel="next" href="../../../../../2/index.html" />
<link rel="prev" href="../../../../../3/index-3.html" />
<link rel="up" href="../../../../../release-notes/index.html" />
<link rel="next" href="../../../../../1/index.html" />
<link rel="prev" href="../../../../../2/index.html" />
<link rel="up" href="../../../../../release-notes/index.html" />
<link rel="next" href="../../../../../content/release-notes/30-alphas-betas-release-candidates/index.html" />
<link rel="prev" href="../../../../../1/index.html" />
<link rel="up" href="../../../../../release-notes/index.html" />
<link rel="next" href="../../../../../3/index-4.html" />
<link rel="prev" href="../../../../../content/release-notes/30-alphas-betas-release-candidates/index.html" />
<link rel="up" href="../../../../../content/release-notes/30-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../3/index-5.html" />
<link rel="prev" href="../../../../../3/index-4.html" />
<link rel="up" href="../../../../../content/release-notes/30-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../3/index-6.html" />
<link rel="prev" href="../../../../../3/index-5.html" />
<link rel="up" href="../../../../../release-notes/index.html" />
<link rel="next" href="../../../../../content/release-notes/older-2x-releases/index.html" />
<link rel="prev" href="../../../../../3/index-6.html" />
<link rel="up" href="../../../../../release-notes/index.html" />
<link rel="next" href="../../../../../2/index-2.html" />
<link rel="prev" href="../../../../../content/release-notes/older-2x-releases/index.html" />
<link rel="up" href="../../../../../content/release-notes/older-2x-releases/index.html" />
<link rel="next" href="../../../../../2/index-3.html" />
<link rel="prev" href="../../../../../2/index-2.html" />
<link rel="up" href="../../../../../content/release-notes/older-2x-releases/index.html" />
<link rel="next" href="../../../../../2/index-4.html" />
<link rel="prev" href="../../../../../2/index-3.html" />
<link rel="up" href="../../../../../content/release-notes/older-2x-releases/index.html" />
<link rel="next" href="../../../../../2/index-5.html" />
<link rel="prev" href="../../../../../2/index-4.html" />
<link rel="up" href="../../../../../content/release-notes/older-2x-releases/index.html" />
<link rel="next" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="prev" href="../../../../../2/index-5.html" />
<link rel="up" href="../../../../../content/release-notes/older-2x-releases/index.html" />
<link rel="next" href="../../../../../2/index-6.html" />
<link rel="prev" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="up" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../2/index-7.html" />
<link rel="prev" href="../../../../../2/index-6.html" />
<link rel="up" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../2/index-8.html" />
<link rel="prev" href="../../../../../2/index-7.html" />
<link rel="up" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../2/index-9.html" />
<link rel="prev" href="../../../../../2/index-8.html" />
<link rel="up" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../2/index-10.html" />
<link rel="prev" href="../../../../../2/index-9.html" />
<link rel="up" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../2/index-11.html" />
<link rel="prev" href="../../../../../2/index-10.html" />
<link rel="up" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../2/index-12.html" />
<link rel="prev" href="../../../../../2/index-11.html" />
<link rel="up" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../2/index-13.html" />
<link rel="prev" href="../../../../../2/index-12.html" />
<link rel="up" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../2/index-14.html" />
<link rel="prev" href="../../../../../2/index-13.html" />
<link rel="up" href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html" />
<link rel="next" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="prev" href="../../../../../2/index-14.html" />
<link rel="up" href="../../../../../release-notes/index.html" />
<link rel="next" href="../../../../../1/index-2.html" />
<link rel="prev" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-3.html" />
<link rel="prev" href="../../../../../1/index-2.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-4.html" />
<link rel="prev" href="../../../../../1/index-3.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-5.html" />
<link rel="prev" href="../../../../../1/index-4.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-6.html" />
<link rel="prev" href="../../../../../1/index-5.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-7.html" />
<link rel="prev" href="../../../../../1/index-6.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-8.html" />
<link rel="prev" href="../../../../../1/index-7.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-9.html" />
<link rel="prev" href="../../../../../1/index-8.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-10.html" />
<link rel="prev" href="../../../../../1/index-9.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-11.html" />
<link rel="prev" href="../../../../../1/index-10.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-12.html" />
<link rel="prev" href="../../../../../1/index-11.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../10-release-candidate/index.html" />
<link rel="prev" href="../../../../../1/index-12.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../1/index-13.html" />
<link rel="prev" href="../../../../../10-release-candidate/index.html" />
<link rel="up" href="../../../../../10-release-candidate/index.html" />
<link rel="next" href="../../../../../1/index-14.html" />
<link rel="prev" href="../../../../../1/index-13.html" />
<link rel="up" href="../../../../../10-release-candidate/index.html" />
<link rel="next" href="../../../../../1/index-15.html" />
<link rel="prev" href="../../../../../1/index-14.html" />
<link rel="up" href="../../../../../10-release-candidate/index.html" />
<link rel="next" href="../../../../../1/index-16.html" />
<link rel="prev" href="../../../../../1/index-15.html" />
<link rel="up" href="../../../../../10-release-candidate/index.html" />
<link rel="next" href="../../../../../1/index-17.html" />
<link rel="prev" href="../../../../../1/index-16.html" />
<link rel="up" href="../../../../../10-release-candidate/index.html" />
<link rel="next" href="../../../../../1/index-18.html" />
<link rel="prev" href="../../../../../1/index-17.html" />
<link rel="up" href="../../../../../10-release-candidate/index.html" />
<link rel="next" href="../../../../../0/index.html" />
<link rel="prev" href="../../../../../1/index-18.html" />
<link rel="up" href="../../../../../10-release-candidate/index.html" />
<link rel="next" href="../../../../../1/index-19.html" />
<link rel="prev" href="../../../../../0/index.html" />
<link rel="up" href="../../../../../content/release-notes/older-1x-releases/index.html" />
<link rel="next" href="../../../../../04-alpha-and-beta/index.html" />
<link rel="prev" href="../../../../../1/index-19.html" />
<link rel="up" href="../../../../../release-notes/index.html" />
<link rel="next" href="../../../../../0/index-2.html" />
<link rel="prev" href="../../../../../04-alpha-and-beta/index.html" />
<link rel="up" href="../../../../../04-alpha-and-beta/index.html" />
<link rel="next" href="../../../../../0/index-3.html" />
<link rel="prev" href="../../../../../0/index-2.html" />
<link rel="up" href="../../../../../04-alpha-and-beta/index.html" />
<link rel="next" href="../../../../../0/index-4.html" />
<link rel="prev" href="../../../../../0/index-3.html" />
<link rel="up" href="../../../../../04-alpha-and-beta/index.html" />
<link rel="next" href="../../../../522/index.html" />
<link rel="prev" href="../../../../../0/index-4.html" />
<link rel="up" href="../../../../../04-alpha-and-beta/index.html" />
<link rel="next" href="../../../../../developing/index.html" />
<link rel="prev" href="../../../../522/index.html" />
<link rel="up" href="../../../../../content/aegir-handbook/index.html" />
<link rel="next" href="../../../../31/index.html" />
<link rel="prev" href="../../../../../developing/index.html" />
<link rel="up" href="../../../../../developing/index.html" />
<link rel="next" href="../../../../185/index.html" />
<link rel="prev" href="../../../../31/index.html" />
<link rel="up" href="../../../../31/index.html" />
<link rel="next" href="../../../../186/index.html" />
<link rel="prev" href="../../../../185/index.html" />
<link rel="up" href="../../../../31/index.html" />
<link rel="next" href="../../../../../content/branch-and-tagging-conventions/index.html" />
<link rel="prev" href="../../../../186/index.html" />
<link rel="up" href="../../../../31/index.html" />
<link rel="next" href="../../../../385/index.html" />
<link rel="prev" href="../../../../../content/branch-and-tagging-conventions/index.html" />
<link rel="up" href="../../../../31/index.html" />
<link rel="next" href="../../../../../developing/architecture/index.html" />
<link rel="prev" href="../../../../385/index.html" />
<link rel="up" href="../../../../../developing/index.html" />
<link rel="next" href="../../../../36/index.html" />
<link rel="prev" href="../../../../../developing/architecture/index.html" />
<link rel="up" href="../../../../../developing/architecture/index.html" />
<link rel="next" href="../../../../../architecture/aegir-architecture/index.html" />
<link rel="prev" href="../../../../36/index.html" />
<link rel="up" href="../../../../../developing/architecture/index.html" />
<link rel="next" href="../../../../77/index.html" />
<link rel="prev" href="../../../../../architecture/aegir-architecture/index.html" />
<link rel="up" href="../../../../../developing/architecture/index.html" />
<link rel="next" href="../../../../41/index.html" />
<link rel="prev" href="../../../../77/index.html" />
<link rel="up" href="../../../../../developing/architecture/index.html" />
<link rel="next" href="../../../../284/index.html" />
<link rel="prev" href="../../../../41/index.html" />
<link rel="up" href="../../../../../developing/architecture/index.html" />
<link rel="next" href="../../../../318/index.html" />
<link rel="prev" href="../../../../284/index.html" />
<link rel="up" href="../../../../../developing/architecture/index.html" />
<link rel="next" href="../../../../319/index.html" />
<link rel="prev" href="../../../../318/index.html" />
<link rel="up" href="../../../../318/index.html" />
<link rel="next" href="../../../../320/index.html" />
<link rel="prev" href="../../../../319/index.html" />
<link rel="up" href="../../../../318/index.html" />
<link rel="next" href="../../../../322/index.html" />
<link rel="prev" href="../../../../320/index.html" />
<link rel="up" href="../../../../318/index.html" />
<link rel="next" href="../../../../323/index.html" />
<link rel="prev" href="../../../../322/index.html" />
<link rel="up" href="../../../../318/index.html" />
<link rel="next" href="../../../../325/index.html" />
<link rel="prev" href="../../../../323/index.html" />
<link rel="up" href="../../../../318/index.html" />
<link rel="next" href="../../../../324/index.html" />
<link rel="prev" href="../../../../325/index.html" />
<link rel="up" href="../../../../../developing/architecture/index.html" />
<link rel="next" href="../../../../../developing/architecture/unix-group-limitations/index.html" />
<link rel="prev" href="../../../../324/index.html" />
<link rel="up" href="../../../../../developing/architecture/index.html" />
<link rel="next" href="../../../../494/index.html" />
<link rel="prev" href="../../../../../developing/architecture/unix-group-limitations/index.html" />
<link rel="up" href="../../../../../developing/architecture/index.html" />
<link rel="next" href="../../../../../contrib/index.html" />
<link rel="prev" href="../../../../494/index.html" />
<link rel="up" href="../../../../../developing/index.html" />
<link rel="next" href="../../../../../dev-cheat-sheet/index.html" />
<link rel="prev" href="../../../../../contrib/index.html" />
<link rel="up" href="../../../../../contrib/index.html" />
<link rel="next" href="../../../../75/index.html" />
<link rel="prev" href="../../../../../dev-cheat-sheet/index.html" />
<link rel="up" href="../../../../../contrib/index.html" />
<link rel="next" href="../../../../108/index.html" />
<link rel="prev" href="../../../../75/index.html" />
<link rel="up" href="../../../../../contrib/index.html" />
<link rel="next" href="../../../../../creating-product-features-using-uchosting-1x/index.html" />
<link rel="prev" href="../../../../108/index.html" />
<link rel="up" href="../../../../108/index.html" />
<link rel="next" href="../../../../../content/contrib/class-auto-loading/index.html" />
<link rel="prev" href="../../../../../creating-product-features-using-uchosting-1x/index.html" />
<link rel="up" href="../../../../../contrib/index.html" />
<link rel="next" href="../../../../../contrib/customizing-platform-templates/index.html" />
<link rel="prev" href="../../../../../content/contrib/class-auto-loading/index.html" />
<link rel="up" href="../../../../../contrib/index.html" />
<link rel="next" href="../../../../../content/contrib/passing-values-site-drushrcphp-file-during-migrations/index.html" />
<link rel="prev" href="../../../../../contrib/customizing-platform-templates/index.html" />
<link rel="up" href="../../../../../contrib/index.html" />
<link rel="next" href="../../../../../content/developing/integrating-aegir/index.html" />
<link rel="prev" href="../../../../../content/contrib/passing-values-site-drushrcphp-file-during-migrations/index.html" />
<link rel="up" href="../../../../../developing/index.html" />
<link rel="next" href="../../../../../content/content/developing/integrating-aegir/integrating-aegir-openssh/index.html" />
<link rel="prev" href="../../../../../content/developing/integrating-aegir/index.html" />
<link rel="up" href="../../../../../content/developing/integrating-aegir/index.html" />
<link rel="next" href="../../../../../content/content/developing/integrating-aegir/integrating-aegir-pureftp/index.html" />
<link rel="prev" href="../../../../../content/content/developing/integrating-aegir/integrating-aegir-openssh/index.html" />
<link rel="up" href="../../../../../content/developing/integrating-aegir/index.html" />
<link rel="next" href="../../../../../developing/continuous-integration/index.html" />
<link rel="prev" href="../../../../../content/content/developing/integrating-aegir/integrating-aegir-pureftp/index.html" />
<link rel="up" href="../../../../../developing/index.html" />
<link rel="next" href="../../../../../content/developing/despamming-guide/index.html" />
<link rel="prev" href="../../../../../developing/continuous-integration/index.html" />
<link rel="up" href="../../../../../developing/index.html" />
<link rel="next" href="../../../../../presentation/index.html" />
<link rel="prev" href="../../../../../content/developing/despamming-guide/index.html" />
<link rel="up" href="../../../../../content/aegir-handbook/index.html" />
<link rel="next" href="../../../../../videos/index.html" />
<link rel="prev" href="../../../../../presentation/index.html" />
<link rel="up" href="../../../../../presentation/index.html" />
<link rel="next" href="../../../../../drupalcamp-montreal-2010-antoine-beaupr%c3%a9-aegir-one-drupal-rule-them-all/index.html" />
<link rel="prev" href="../../../../../videos/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../48/index.html" />
<link rel="prev" href="../../../../../drupalcamp-montreal-2010-antoine-beaupr%c3%a9-aegir-one-drupal-rule-them-all/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../92/index.html" />
<link rel="prev" href="../../../../48/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../50/index.html" />
<link rel="prev" href="../../../../92/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../51/index.html" />
<link rel="prev" href="../../../../50/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../52/index.html" />
<link rel="prev" href="../../../../51/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../56/index.html" />
<link rel="prev" href="../../../../52/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../55/index.html" />
<link rel="prev" href="../../../../56/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../59/index.html" />
<link rel="prev" href="../../../../55/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../57/index.html" />
<link rel="prev" href="../../../../59/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../../videos/drupalcamp-spain-2011-aegir-one-drupal-rule-them-all-spanish/index.html" />
<link rel="prev" href="../../../../57/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../../videos/drupalcon-london-2011-aegir-based-business-models/index.html" />
<link rel="prev" href="../../../../../videos/drupalcamp-spain-2011-aegir-one-drupal-rule-them-all-spanish/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../../videos/drupalcon-london-2011-aegir-one-drupal-rule-them-all/index.html" />
<link rel="prev" href="../../../../../videos/drupalcon-london-2011-aegir-based-business-models/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../../content/videos/2014-drupal-melbourne-meetup-march-11-web-stacks-local-development/index.html" />
<link rel="prev" href="../../../../../videos/drupalcon-london-2011-aegir-one-drupal-rule-them-all/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../../content/videos/2014-drupalcon-amsterdam-spidersnet-infinity-creating-site-factory-drupal-aegir/index.html" />
<link rel="prev" href="../../../../../content/videos/2014-drupal-melbourne-meetup-march-11-web-stacks-local-development/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../58/index.html" />
<link rel="prev" href="../../../../../content/videos/2014-drupalcon-amsterdam-spidersnet-infinity-creating-site-factory-drupal-aegir/index.html" />
<link rel="up" href="../../../../../videos/index.html" />
<link rel="next" href="../../../../../presentation/screencasts/index.html" />
<link rel="prev" href="../../../../58/index.html" />
<link rel="up" href="../../../../../presentation/index.html" />
<link rel="next" href="../../../../../presentation/screencasts/oct-2011-aegir-site-tasks-backup-restore-clone-migrate-friendlydrupalcom/index.html" />
<link rel="prev" href="../../../../../presentation/screencasts/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../../content/presentation/screencasts/oct-2011-zero-touch-drupal-deployment-jenkins-aegir-git-fabric-and-/index.html" />
<link rel="prev" href="../../../../../presentation/screencasts/oct-2011-aegir-site-tasks-backup-restore-clone-migrate-friendlydrupalcom/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../../presentation/screencasts/oct-2011-install-platforms-and-sites-aegir-drupal-hosting-system-friendlydr/index.html" />
<link rel="prev" href="../../../../../content/presentation/screencasts/oct-2011-zero-touch-drupal-deployment-jenkins-aegir-git-fabric-and-/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../../presentation/screencasts/oct-2011-install-aegir-drupal-hosting-platform-ubuntu-friendlydrupalcom/index.html" />
<link rel="prev" href="../../../../../presentation/screencasts/oct-2011-install-platforms-and-sites-aegir-drupal-hosting-system-friendlydr/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../183/index.html" />
<link rel="prev" href="../../../../../presentation/screencasts/oct-2011-install-aegir-drupal-hosting-platform-ubuntu-friendlydrupalcom/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../94/index.html" />
<link rel="prev" href="../../../../183/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../49/index.html" />
<link rel="prev" href="../../../../94/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../47/index.html" />
<link rel="prev" href="../../../../49/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../53/index.html" />
<link rel="prev" href="../../../../47/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../54/index.html" />
<link rel="prev" href="../../../../53/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../46/index.html" />
<link rel="prev" href="../../../../54/index.html" />
<link rel="up" href="../../../../../presentation/screencasts/index.html" />
<link rel="next" href="../../../../472/index.html" />
<link rel="prev" href="../../../../46/index.html" />
<link rel="up" href="../../../../../presentation/index.html" />
<link rel="next" href="../../../../../presentation/article-archive/index.html" />
<link rel="prev" href="../../../../472/index.html" />
<link rel="up" href="../../../../../presentation/index.html" />
<link rel="next" href="../../../../../article-archive/aegir-drupalcon-san-francisco/index.html" />
<link rel="prev" href="../../../../../presentation/article-archive/index.html" />
<link rel="up" href="../../../../../presentation/article-archive/index.html" />
<link rel="next" href="../../../../../article-archive/introduction-aegir-hosting-system/index.html" />
<link rel="prev" href="../../../../../article-archive/aegir-drupalcon-san-francisco/index.html" />
<link rel="up" href="../../../../../presentation/article-archive/index.html" />
<link rel="next" href="../../../../../article-archive/drupal-deployments-workflows-version-control-drushmake-and-aegir/index.html" />
<link rel="prev" href="../../../../../article-archive/introduction-aegir-hosting-system/index.html" />
<link rel="up" href="../../../../../presentation/article-archive/index.html" />
<link rel="next" href="../../../../../content/presentation/article-archive/how-install-aegir-and-use-it-deploy-drupal-sites-debian-vps/index.html" />
<link rel="prev" href="../../../../../article-archive/drupal-deployments-workflows-version-control-drushmake-and-aegir/index.html" />
<link rel="up" href="../../../../../presentation/article-archive/index.html" />
<link rel="next" href="../../../../../article-archive/test-your-drupal-distro-building-continuous-integration-server-aegir-jenkins/index.html" />
<link rel="prev" href="../../../../../content/presentation/article-archive/how-install-aegir-and-use-it-deploy-drupal-sites-debian-vps/index.html" />
<link rel="up" href="../../../../../presentation/article-archive/index.html" />
<link rel="next" href="../../../../../article-archive/upgrading-aegir-itself-latest-version-drupal/index.html" />
<link rel="prev" href="../../../../../article-archive/test-your-drupal-distro-building-continuous-integration-server-aegir-jenkins/index.html" />
<link rel="up" href="../../../../../presentation/article-archive/index.html" />
<link rel="next" href="../../../../../presentation/slidedecks/index.html" />
<link rel="prev" href="../../../../../article-archive/upgrading-aegir-itself-latest-version-drupal/index.html" />
<link rel="up" href="../../../../../presentation/index.html" />
<link rel="next" href="../../../../../apple-keynote-theme-aegir-presentations/index.html" />
<link rel="prev" href="../../../../../presentation/slidedecks/index.html" />
<link rel="up" href="../../../../../presentation/slidedecks/index.html" />
<link rel="next" href="../../../../../content/presentation/slidedecks/aegir-ecology-vs-drupal-gardens/index.html" />
<link rel="prev" href="../../../../../apple-keynote-theme-aegir-presentations/index.html" />
<link rel="up" href="../../../../../presentation/slidedecks/index.html" />
<link rel="next" href="../../../../../content/presentation/slidedecks/drupalcampnyc-aegir-based-business-models/index.html" />
<link rel="prev" href="../../../../../content/presentation/slidedecks/aegir-ecology-vs-drupal-gardens/index.html" />
<link rel="up" href="../../../../../presentation/slidedecks/index.html" />
<link rel="next" href="../../../../../presentation/slidedecks/drupalcon-london-2011-aegir-based-business-models/index.html" />
<link rel="prev" href="../../../../../content/presentation/slidedecks/drupalcampnyc-aegir-based-business-models/index.html" />
<link rel="up" href="../../../../../presentation/slidedecks/index.html" />
<link rel="next" href="../../../../../content/presentation/slidedecks/nyccamp-2015-aegir-30-deep-dive/index.html" />
<link rel="prev" href="../../../../../presentation/slidedecks/drupalcon-london-2011-aegir-based-business-models/index.html" />
<link rel="up" href="../../../../../presentation/slidedecks/index.html" />
<link rel="next" href="../../../../478/index.html" />
<link rel="prev" href="../../../../../content/presentation/slidedecks/nyccamp-2015-aegir-30-deep-dive/index.html" />
<link rel="up" href="../../../../../presentation/slidedecks/index.html" />
<link rel="next" href="../../../../../presentation/slidedecks/overview-aegir-and-devstageproduction/index.html" />
<link rel="prev" href="../../../../478/index.html" />
<link rel="up" href="../../../../../presentation/slidedecks/index.html" />
<link rel="next" href="../../../../../using-aegir-drupal-hosting-and-management-drupalcampsc-2011-06-12/index.html" />
<link rel="prev" href="../../../../../presentation/slidedecks/overview-aegir-and-devstageproduction/index.html" />
<link rel="up" href="../../../../../presentation/slidedecks/index.html" />
<link rel="next" href="../../../../474/index.html" />
<link rel="prev" href="../../../../../using-aegir-drupal-hosting-and-management-drupalcampsc-2011-06-12/index.html" />
<link rel="up" href="../../../../../presentation/index.html" />
<link rel="next" href="../../../../../drupalcon-training-aegir-hosting-system-deep-dive/index.html" />
<link rel="prev" href="../../../../474/index.html" />
<link rel="up" href="../../../../474/index.html" />
<link rel="next" href="../../../../../handbook/strategy/index.html" />
<link rel="prev" href="../../../../../drupalcon-training-aegir-hosting-system-deep-dive/index.html" />
<link rel="up" href="../../../../../content/aegir-handbook/index.html" />
<link rel="next" href="../../../../../handbook/strategy/open-app-standard-draft/index.html" />
<link rel="prev" href="../../../../../handbook/strategy/index.html" />
<link rel="up" href="../../../../../handbook/strategy/index.html" />
<link rel="next" href="../../../../../handbook/strategy/saas-business-model-spec/index.html" />
<link rel="prev" href="../../../../../handbook/strategy/open-app-standard-draft/index.html" />
<link rel="up" href="../../../../../handbook/strategy/index.html" />
<link rel="next" href="../../../../../content/handbook/strategy/universities-using-aegir/index.html" />
<link rel="prev" href="../../../../../handbook/strategy/saas-business-model-spec/index.html" />
<link rel="up" href="../../../../../handbook/strategy/index.html" />
<link rel="shortcut icon" href="../../../../../sites/community.aegirproject.org/themes/up/favicon/index.ico" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="print" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../../../sites/community.aegirproject.org/files/css/css_5fa73dc3677977c016a597acd186e4e7/index.css" />

  <title>Revision of Handbook from Wed, 10/27/2010 - 02:44 | community.aegirproject.org</title>
</head>

<body  class="print rubik admin-static page">
  <div class='limiter clear-block'>
    <div id='content' class='clear-block'>
      <div class='print-header'>
      <h1 class='site-name'>community.aegirproject.org</h1>
  </div>
      

<div  id="node-4" class="node node-book clear-block node-page">
  
      <h2 class='node-title'>
            <a href="../../../../../content/aegir-handbook/index.html">Handbook</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div id='diff-inline-4'><div class='diff-inline-metadata clear-block'><div class='diff-inline-byline'>Updated by <a href="../../../../../user/1/index.html" class="username" title="View user profile.">admin</a> on 10/27/2010 - 02:44</div><div class='diff-inline-legend clear-block'><label>Legend</label><span class='diff-added'>Added</span><span class='diff-changed'>Changed</span><span class='diff-deleted'>Deleted</span></div></div><p><span class='diff-changed'>Aegir</span> handbook</p></div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-2.html?destination=node%2F4%23comment-form">Login</a> or <a href="../../../../../user/register/index-2.html?destination=node%2F4%23comment-form">register</a> to post comments</span></li>
<li class="print active"><a href="index-2.html?print" class="active">Print</a></li>
<li class="print_recurse active"><a href="index-3.html?print&amp;book_recurse" class="active">Print entire section</a></li>
<li class="talk_comments last"><a href="../../../talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>



<div  id="node-217" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../intro/index.html">Introduction to Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_8 first"><a href="../../../../../taxonomy/term/8/index.html" rel="tag" title="">benefits</a></li>
<li class="taxonomy_term_9"><a href="../../../../../taxonomy/term/9/index.html" rel="tag" title="">features</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>If you are new to Aegir you may have heard great things about the project but not know about many of the <em>benefits</em> of using it.  Here are some - feel free to add to this list.</p>

<h2>Introduction</h2>

<p>One of the great architectural features of Drupal is that you can have multiple web sites that share a common <em>platform</em> of modules, themes and other code used to manage content and appearance.  If you make a change to the platform (e.g. update a module, change a theme etc.) all sites based on the platform are immediately updated.  At the same time, each site has its own database and file system that can be tailored to the specific needs of the site. In addition to the concept of platforms, Drupal lets you create installation <em>profiles</em>.  A platform can have one or more profiles which allows you create different sites based on your choice of platform and profile.</p>

<h2>Multiple Site Installations</h2>

<p>Aegir provides a web interface to <em>define a platform and then create multiple sites</em> based on that platform.  Aegir creates the site database, site-specific file folders and the web server files that point browser requests to the right place.</p>

<h2>Site Management</h2>

<p>Through the Aegir interface you can create backups, restore a specific backup, disable or delete individual sites.  Thus Aegir  is a very helpful way of tracking and managing lots of sites spread over several platforms.  Moreover, you can perform bulk tasks on all sites based on a particular platform.</p>

<h2>Site Development</h2>

<p>When you are building a platform from scratch or simply extending or upgrading an existing platform, Aegir can significantly speed up development time and minimize impacts to sites in production.</p>

<p>With Aegir you can <em>clone</em> a site to the same or a different platform.  So, say you have a number of sites running on a Platform A and you decide to upgrade a platform module but you want to test your sites to make sure they are compatible with the upgrade.  Using Aegir you would create another platform, Platform B that is identical except for the module upgrade.  Then you can use clone to create a copy of one of your sites from Platform A to Platform B.  The database and all your files are copied by Aegir and you can then test your cloned site without worrying that you might impact the existing production site.</p>

<p>Once you are satisfied that your cloned site is working properly you can then <em>migrate</em> one or all of your sites from Platform A to Platform B.</p>

<p>This process can be very useful for building out new platforms, troubleshooting issues etc.</p>

<h2>Site Aliasing</h2>

<p>Through the Aegir interface you can define <em>aliases</em> for your web sites so that, for example, traffic to <a href="http://www.example.com/" title="http://www.example.com">http://www.example.com</a> and <a href="http://example.com/" title="http://example.com">http://example.com</a> is directed to the same site.</p>

<h2>Multiple Servers</h2>

<p>The Aegir interface can also be used to manage platforms and web sites on different web servers, which gives you latitude to tailor a hosting architecture to your own needs.</p>

<h2>Scheduled Tasks (Cron)</h2>

<p>Most Drupal sites rely on recurring scheduled tasks also known as cron jobs to perform operations like checking for updates, cleaning up log files etc.  Aegir can be configured to run cron jobs for hosted sites on regular intervals without having to utilitize other tools or configure cron jobs manually on a site-by-site basis.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-21.html?destination=node%2F217%23comment-form">Login</a> or <a href="../../../../../user/register/index-21.html?destination=node%2F217%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-21.html?destination=node%2F217%23comment-form">Login</a> or <a href="../../../../../user/register/index-21.html?destination=node%2F217%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-582" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../handbook/operating-system-support/index.html">Operating system support</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Aegir is primarily developed on Debian GNU/Linux, but it supports a whole slew of other platforms, Debian packages have been available for that platform for a while and the <a href="../../../../../installing/debian/index.html">install instructions</a> have been originally written primarily for Debian.</p>

<p>This page documents Aegir support for various operating system, including specifics on how it is best recommended to install Aegir on those platforms, quirks and problems, packaging issues and coordination.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Debian_support"><span class="toc-number">1. </span>Debian support</a>
<ol>
	<li class="toc-level-2"><a href="#Fully_supported"><span class="toc-number">1.1. </span>Fully supported</a></li>
	<li class="toc-level-2"><a href="#Packaging_complete"><span class="toc-number">1.2. </span>Packaging complete</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Ubuntu_support"><span class="toc-number">2. </span>Ubuntu support</a>
<ol>
	<li class="toc-level-2"><a href="#Well_supported"><span class="toc-number">2.1. </span>Well supported</a></li>
	<li class="toc-level-2"><a href="#Packaging_almost_complete"><span class="toc-number">2.2. </span>Packaging almost complete</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Arch_Linux"><span class="toc-number">3. </span>Arch Linux</a>
<ol>
	<li class="toc-level-2"><a href="#Well_supported-1"><span class="toc-number">3.1. </span>Well supported</a></li>
	<li class="toc-level-2"><a href="#No_packaging"><span class="toc-number">3.2. </span>No packaging</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#CentOS_and_Redhat-descendants"><span class="toc-number">4. </span>CentOS and Redhat-descendants</a>
<ol>
	<li class="toc-level-2"><a href="#Well_supported-2"><span class="toc-number">4.1. </span>Well supported</a></li>
	<li class="toc-level-2"><a href="#No_packaging-3"><span class="toc-number">4.2. </span>No packaging</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Gentoo"><span class="toc-number">5. </span>Gentoo</a>
<ol>
	<li class="toc-level-2"><a href="#Supported"><span class="toc-number">5.1. </span>Supported</a></li>
	<li class="toc-level-2"><a href="#No_packaging-4"><span class="toc-number">5.2. </span>No packaging</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Mac_OS_X"><span class="toc-number">6. </span>Mac OS X</a>
<ol>
	<li class="toc-level-2"><a href="#Partially_supported"><span class="toc-number">6.1. </span>Partially supported</a></li>
	<li class="toc-level-2"><a href="#No_packaging-5"><span class="toc-number">6.2. </span>No packaging</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Solaris"><span class="toc-number">7. </span>Solaris</a>
<ol>
	<li class="toc-level-2"><a href="#Supported-6"><span class="toc-number">7.1. </span>Supported</a></li>
	<li class="toc-level-2"><a href="#No_packaging-7"><span class="toc-number">7.2. </span>No packaging</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#FreeBSD"><span class="toc-number">8. </span>FreeBSD</a>
<ol>
	<li class="toc-level-2"><a href="#Supported-8"><span class="toc-number">8.1. </span>Supported</a></li>
	<li class="toc-level-2"><a href="#No_packaging-9"><span class="toc-number">8.2. </span>No packaging</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Other_platforms"><span class="toc-number">9. </span>Other platforms</a></li>
</ol>
</div>
</div>

<h1 id="Debian_support">1. Debian support</h1>

<ul>
<li><a href="../../../../../installing/debian/index.html">Install using Debian packages</a></li>
<li><a href="../../../../../upgrading/debian/index.html">Upgrade using Debian packages</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Fully_supported">1.1. Fully supported</h2>

<p>Aegir is <strong>fully supported</strong> in Debian, with multiple reports of successful installations, both <a href="../../../../../installing/manual/index.html">manual</a> and <a href="../../../../../installing/debian/index.html">automatic</a> installs and upgrades.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Packaging_complete">1.2. Packaging complete</h2>

<p>Debian packaging is currently done in Koumbit's private repositories, as documented in the <a href="../../../../../installing/debian/index.html">install instructions</a>.</p>

<p>Drush is also fully supported in Debian, with regularly Debian packages in unstable, Wheezy, and Squeeze-backports.</p>

<p>Drush make doesn't yet have a Debian package.</p>

<p>To <a href="../../../../543/index.html">building Debian packages</a>, follow <a href="../../../../543/index.html">those instructions</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Ubuntu_support">2. Ubuntu support</h1>

<ul>
<li><a href="../../../../../installing/debian/index.html">Install using Debian packages</a></li>
<li><a href="../../../../../upgrading/debian/index.html">Upgrade using Debian packages</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Well_supported">2.1. Well supported</h2>

<p>Because none of the core developpers actually run Ubuntu daily, it is less well supported. But because Ubuntu is actually based on Debian, lots of people are happily running Aegir on Ubuntu without problems.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Packaging_almost_complete">2.2. Packaging almost complete</h2>

<dl>
<dt>Through the Debian packages, packaging is almost complete. The key piece missing is Drush in Ubuntu Maverick and previous versions. See <a href="https://bugs.launchpad.net/ubuntu/+source/drush/+bug/755169">this bug report</a> for more information.</dt>
<dd>
<p>(Ubuntu <a href="https://bugs.launchpad.net/ubuntu/+source/drush/+bug/755172">synced</a> Drush 4.4 in Natty Narwhal 11.04, which should be released <a href="https://wiki.ubuntu.com/NattyReleaseSchedule">by the end of april</a>, but we're still looking for a Ubuntu <a href="https://wiki.ubuntu.com/MOTU">MOTU</a> to handle the backporting on the Ubuntu side of things.)</p>
</dd>

<dd>
<p>There are unofficial install scripts also available for Ubuntu: <a href="https://github.com/doka/install-aegir-on-ubuntu" title="https://github.com/doka/install-aegir-on-ubuntu">https://github.com/doka/install-aegir-on-ubuntu</a></p>
</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Arch_Linux">3. Arch Linux</h1>

<ul>
<li><a href="../../../../../installing/manual/index.html">Install using the manual install process</a></li>
<li><a href="../../../../../upgrading/script/index.html">Upgrade using the automated script</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Well_supported-1">3.1. Well supported</h2>

<p>Some people definitely run Aegir in Arch Linux, as the <a href="../../../../../installing/manual/index.html">manual install process</a> documentation has extensive details of the Arch Linux specific steps.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="No_packaging">3.2. No packaging</h2>

<p>Unfortunately, no package is available for this platform.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="CentOS_and_Redhat-descendants">4. CentOS and Redhat-descendants</h1>

<ul>
<li><a href="../../../../../installing/manual/index.html">Install using the manual install process</a></li>
<li><a href="../../../../../upgrading/script/index.html">Upgrade using the automated script</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Well_supported-2">4.1. Well supported</h2>

<p>A few people are running Aegir on RedHat and related operating systems, mostly CentOS. There are a few tricks documented in the manual install process but it's still fairly straightward to install.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="No_packaging-3">4.2. No packaging</h2>

<p>Unfortunately, no package is available for this platform, we are looking for volunteers to write a spec file to create RPMs.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Gentoo">5. Gentoo</h1>

<ul>
<li><a href="../../../../../installing/manual/index.html">Install using the manual install process</a></li>
<li><a href="../../../../../upgrading/manual/index.html">Upgrade using the manual upgrade process</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Supported">5.1. Supported</h2>

<p>We believe that Aegir works on Gentoo right now, according to <a href="../../../../../discuss/10rc7-install-gentoo-segfaults/index.html#comment-738">this post</a>. Follow the manual install instructions.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="No_packaging-4">5.2. No packaging</h2>

<p>No packages are provided on this platform.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Mac_OS_X">6. Mac OS X</h1>

<ul>
<li><a href="../../../../417/index.html">Install using the special instructions for OSX</a> and <a href="../../../../../installing/manual/index.html">the manual install process</a></li>
<li><a href="../../../../../upgrading/script/index.html">Upgrade using the automated script</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Partially_supported">6.1. Partially supported</h2>

<p>OS X can be difficult for web developers, because it doesn't ship with a good Apache/PHP/MySQL stack and the UNIX internals are a bit awkward. Still, Aegir was originally developed on OS X, so it's perfectly possible to use Aegir on OS X.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="No_packaging-5">6.2. No packaging</h2>

<p>There are currently no packages for OS X and none planned. Special instructions are provided for installing on OS X but once it's installed, the usage should be similar to other platforms, including for upgrades.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Solaris">7. Solaris</h1>

<ul>
<li><a href="../../../../../installing/manual/index.html">Install using the manual install process</a></li>
<li><a href="../../../../../upgrading/manual/index.html">Upgrade using the manual upgrade process</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Supported-6">7.1. Supported</h2>

<p>There are at least two Solaris installs out there, and significant work was done to make sure that Aegir was UNIX-agnostic enough to respect Solaris' idiosyncracies. The manual install instructions include some of those exceptions clearly documented and outline. Because the upgrade can be iffy, it is recommended to upgrade using the full manual install process.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="No_packaging-7">7.2. No packaging</h2>

<p>No packages are provided on this platform.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="FreeBSD">8. FreeBSD</h1>

<ul>
<li><a href="../../../../../installing/manual/index.html">Install using the manual install process</a> and cherry-pick some commands from <a href="https://drupal.org/files/issues/HINTS_FreeBSD_0.txt">this HINTS file</a> for prerequisites</li>
<li><a href="../../../../../upgrading/manual/index.html">Upgrade using the manual upgrade process</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Supported-8">8.1. Supported</h2>

<p>We had one report of Aegir being installable on FreeBSD. The pre-requesites have not yet been merged into the main <a href="../../../../../install/manual/index.html">install instructions</a> (see <a href="https://drupal.org/node/659024">#659024</a> for followup on that), so you'll need a bit of guesswork.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="No_packaging-9">8.2. No packaging</h2>

<p>No packages are provided on this platform, but it should be fairly simple to make a port inspired by the Debian packaging, considering how it currently works.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Other_platforms">9. Other platforms</h1>

<p>Other platforms are probably supported but those have not been explicitly and clearly documented so they are not yet included here. Feel free to edit this page to add a section for those users!</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-26.html?destination=node%2F582%23comment-form">Login</a> or <a href="../../../../../user/register/index-26.html?destination=node%2F582%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-26.html?destination=node%2F582%23comment-form">Login</a> or <a href="../../../../../user/register/index-26.html?destination=node%2F582%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-34" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../34/index.html">Project goals</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><h4>Open</h4>

<p>This project is developed using Git. People are free to download the source code for the project (and in fact are required to run it). <a href="../../../../31/index.html">Git access is available here</a>.</p>

<p>After many discussions with many different developers working in this space, it has become apparent to the developers that many people have developed their own custom set of utilities and scripts to manage many of the issues this project encompasses.</p>

<p>This project aims to be an open framework that will allow us to collaborate on a single set of community developed / maintained utilities, so that the quality and the capabilities will improve for all of us.</p>

<h4>Easy</h4>

<p>This functions on both a developer and a user level.</p>

<p>For the user, the intent is to make the system as simple to install and operate as possible, which means drastically lowering the requirements for installing and getting up and running with the system. To that end the system has an <a href="../../../../../installing/debian/index.html">installation script to automate the installation of Aegir</a>, which has developed a long way from a multi-step install.php wizard and even more complex requirements before then.</p>

<p>The system will auto-detect as many of the settings it requires to run as is possible from within the confines of PHP, and will provide detailed and accurate inline documentation on the server configuration required, based on the configured settings.</p>

<p>This system aims to be self documenting, to aid in troubleshooting, in the event that an error occurs. This documentation is both translatable and extendable when new services are enabled.</p>

<p>For developers we aim to keep the implementation simple, clear and concise, and use as few as possible additional requirements outside of Drupal itself. We aim to provide <a href="../../../../5/index.html">extensive developer documentation</a>, to lower the barrier for people wanting to integrate with the system.</p>

<p>The system will never require any additional core patches for the sake of base functionality. It is a 'contrib' project.</p>

<p>Basically, the aim is to do everything possible to ensure that the user and developer experience is a positive one.</p>

<h4>Useful</h4>

<p>The system aims to help maintain many sites, not just when they are initially installed, but over the entire lifetime of the site.</p>

<p>It is designed to install new sites, provisioning all the required services (such as Apache, Mysql and DNS), with the flexibility to provision additional services (such as Mail, LDAP etc.) through optional contributed modules or features.</p>

<p>It provides the ability to revert back to previous versions of your sites, as well as re-deploy existing sites under different domain names (mysite.com copied to dev.mysite.com). These backups will be usable on any system with the provisioning backend installed (such as a developer's machine, or a staging server).</p>

<p>This aspect of the system will also be used to manage upgrades between multiple versions of Drupal, and will allow you to schedule upgrades. It will do its utmost to ensure that your site has been successfully upgraded, and features dependency tracking to keep track of which sites are eligible to be upgraded.</p>

<p>It will provide a mechanism that ensures the cron process is run on all your sites within the specified time frame, and additionally will allow for scheduled backups of all your sites.</p>

<p>Through optional modules it will be able to extract usage statistics from your hosted sites and provide an overview of site usage through the administration interface, it will also be able to keep track of server health and load for each of the configured servers.</p>

<p><em>These are the stated feature goals, many of these features will not be available in the initial releases, as they are not considered a base requirement.</em></p>

<h4>Secure</h4>

<p>The system will make sure that it has the least amount of power available to it to accomplish it's task, and will ensure that all file permissions are set to the strictest possible levels they need to be, and that no sensitive information is web accessible.</p>

<p>None of the functionality or code required to accomplish it's tasks will ever be available in the provisioned sites, and the hosting front end itself will make extensive usage of Drupal's access control requirements to ensure that users will not have access to things they are not meant to see.</p>

<p><em>to be extended</em></p>

<h4>Distributed</h4>

<p>The system functions entirely on the command line, using unix pipes for inter-process communication.</p>

<p>As such, once ssh has been configured for the user the back end script is running as, it will be able to freely communicate with the external server through the only mechanism it knows how (the command line).</p>

<p>As an extension of the backup/restore functionality, you will be able to seamlessly move sites between servers, while providing a redirect to an always accessible site alias for users who have cached dns entries.</p>

<p>You will also be able to change database servers through simply modifying the site record on the user frontend.</p>

<p><em>to be extended</em></p>

<h4>Diagnostics</h4>

<p>The system will provide accurate and complete logs of everything that has occurred on the system, as well as feature complete error reporting and notification of all issues that have occurred. It will first verify that it is able to complete the requested task, and then it will verify that the task has been completed successfully, before completing the task.</p>

<p>When an error occurs, it will rollback to its last working state before exiting, so that failures will not negatively
affect sites.</p>

<p>All node types in the front end are revision controlled, to allow for complete history of all objects.</p>

<p><em>to be extended</em></p>

<h4>Flexible</h4>

<p>This system aims to be as flexible as Drupal itself is.</p>

<p>It will provide a complete and useful set of hooks to module developers, for both the front end and the back end, to accomplish whatever tasks they need.</p>

<p>The administration interface will provide complete views support for all data in the site, to allow for custom reporting on your network.</p>

<p>The core node types are all standard Drupal nodes, that can be extended through CCK by the implementor. This could be used for tracking additional client information or additional information on sites.</p>

<p>You will be able to integrate Drupal contributed modules such as Organic Groups or Ecommerce/Ubercart to build support or billing functionality directly into the hosting front end.</p>

<p>The system is completely white boxed, so that it will work with almost any Drupal theme, and as such can have your own corporate identity.</p>

<p><em>to be extended</em></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-28.html?destination=node%2F34%23comment-form">Login</a> or <a href="../../../../../user/register/index-28.html?destination=node%2F34%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-28.html?destination=node%2F34%23comment-form">Login</a> or <a href="../../../../../user/register/index-28.html?destination=node%2F34%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-788" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../project-history/index.html">Project history</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Aegir is a completely new iteration of the original Hostmaster project written by <a href="http://drupal.org/user/1337">Adrian Rossouw</a>. The original version has been running the hosted service provided at <a href="http://bryght.com/" title="http://bryght.com">http://bryght.com</a> for nearly 4 years, hosting literally thousands of sites, and has been implemented for several large clients.
Originally, the system would only manage a single Drupal instance, on a single web server with a single database server, and as the requirements grew (concurrently running multiple versions of Drupal and then needing to manage several servers), it grew considerably in (unplanned) complexity.</p>

<p>There were also non-ideal implementation and licensing issues, such as the choice of Python and PostgreSQL for the backend and not developing the system as an "invite-only" GPL project, which severely limited the number of developers that were attracted to the project. Because of the system requirements, it was also very difficult for new users to install, and had many unnecessary points of failure.</p>

<p>The Aegir hosting system has been designed with all these issues in mind, and the lessons learned have formed the basis of many of the <a href="../../../../34/index.html">Aegir Project Goals</a>. The code was committed to Drupal.org in november 2007 and has seen multiple production-ready but still "alpha" releases there in the two following years.</p>

<ul>
<li>0.1 marked the first Drupal 5 and "multi-site" capable version.</li>
<li>0.2 marked the first multi-platform version, which supported upgrades between different Drupal versions</li>
<li>0.3 marked the port of the frontend to Drupal 6</li>
</ul>

<p>Then in 2009, a major overhaul of the code was performed to provide "multi-server" support, which led to numerous 0.4-alpha releases (about 20) and, around the end of 2009, <a href="http://developmentseed.org/blog/2009/nov/22/aegir-hosting-system-moves-git">required the move to git as a version control system</a> even though Drupal.org was still stuck in CVS-land, which meant <a href="http://koumbit.org/">Koumbit.org</a> started hosting the git repositories on their servers.</p>

<p>All this led to, about a year and a half later (early 2011), to the <a href="../../../../../1/index-12.html">1.0 release</a> of our beloved platform and the Aegir project migrating <a href="../../../../384/index.html">back to drupal.org</a> at last</p>

<p>Aegir now exceeds the capabilities of the original HostMaster system and is in use by numerous real world projects.</p>

<p>Aegir is now supported by <a href="http://koumbit.org/">Koumbit.org</a>, <a href="http://computerminds.co.uk/">Computer Minds</a> and <a href="http://mig5.net/">mig5</a> and is being used to deploy sites in universities, private companies and non-profits around the world.</p>

<p>On January 8, 2014 the <a href="../../../../../2/index-3.html">2.0 release</a> ships with significant stability improvements, Drush 5 and 6 support, subdirectory multisite support, improved nginx support, native views and much, much more.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-20.html?destination=node%2F788%23comment-form">Login</a> or <a href="../../../../../user/register/index-20.html?destination=node%2F788%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-20.html?destination=node%2F788%23comment-form">Login</a> or <a href="../../../../../user/register/index-20.html?destination=node%2F788%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-14" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../faq/index.html">FAQ</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc1">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Help"><span class="toc-number">1. </span>Help!</a>
<ol>
	<li class="toc-level-2"><a href="#Where_can_I_get_help"><span class="toc-number">1.1. </span>Where can I get help?</a></li>
	<li class="toc-level-2"><a href="#Can_I_ask_you_a_question"><span class="toc-number">1.2. </span>Can I ask you a question?</a></li>
	<li class="toc-level-2"><a href="#Who_are_the_Aegir_developers"><span class="toc-number">1.3. </span>Who are the Aegir developers?</a></li>
	<li class="toc-level-2"><a href="#I-d_like_to_help_out_become_a_developer"><span class="toc-number">1.4. </span>I'd like to help out / become a developer!</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Installing_Aegir"><span class="toc-number">2. </span>Installing Aegir</a>
<ol>
	<li class="toc-level-2"><a href="#Can_I_run_Aegir_on_a_shared_hosting_environment"><span class="toc-number">2.1. </span>Can I run Aegir on a shared hosting environment?</a></li>
	<li class="toc-level-2"><a href="#Can_I_run_Aegir_on_Windows"><span class="toc-number">2.2. </span>Can I run Aegir on Windows?</a></li>
	<li class="toc-level-2"><a href="#Can_Aegir_be_installed_next_to_CPanelPleskAlternCetc"><span class="toc-number">2.3. </span>Can Aegir be installed next to CPanel/Plesk/AlternC/etc?</a></li>
	<li class="toc-level-2"><a href="#Where_can_I_get_support_for_BarracudaOctopus_Aegir"><span class="toc-number">2.4. </span>Where can I get support for Barracuda/Octopus Aegir?</a></li>
	<li class="toc-level-2"><a href="#Do_I_really_need_to_create_an_aegir_user"><span class="toc-number">2.5. </span>Do I really need to create an aegir user?</a></li>
	<li class="toc-level-2"><a href="#Install_fails_with_-dummy_connection_failed_to_fail-_on_Ubuntu_12.04_LTS"><span class="toc-number">2.6. </span>Install fails with 'dummy connection failed to fail' on Ubuntu 12.04 LTS!</a></li>
	<li class="toc-level-2"><a href="#How_can_I_tell_what_version_of_Aegir_I_have_installed"><span class="toc-number">2.7. </span>How can I tell what version of Aegir I have installed?</a></li>
	<li class="toc-level-2"><a href="#After_installing_Aegir_I_have_two_servers_listed_is_this_normal"><span class="toc-number">2.8. </span>After installing Aegir I have two servers listed, is this normal?</a></li>
	<li class="toc-level-2"><a href="#I_followed_the_installation_instructions._What_directory_holds_all_of_my_sites_now"><span class="toc-number">2.9. </span>I followed the installation instructions.  What directory holds all of my sites now?</a></li>
	<li class="toc-level-2"><a href="#I_tried_to_create_a_site_but_the_create_task_failed_and_retries_don-t_succeed._How_do_I_delete_the_partially_created_site_and_associated_Aegir_tasks"><span class="toc-number">2.10. </span>I tried to create a site, but the create task failed and retries don't succeed.  How do I delete the partially created site and associated Aegir tasks?</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Upgrading_Aegir"><span class="toc-number">3. </span>Upgrading Aegir</a>
<ol>
	<li class="toc-level-2"><a href="#What_is_a_patch_or_-hotfix-_and_how_can_I_apply_it_to_fix_my_site_if_I_can-t_don-t_want_to_upgrade_to_HEAD"><span class="toc-number">3.1. </span>What is a patch or 'hotfix', and how can I apply it to fix my site if I can't / don't want to upgrade to HEAD?</a></li>
	<li class="toc-level-2"><a href="#I_upgraded_Aegir_by_mistake_can_I_downgrade_it"><span class="toc-number">3.2. </span>I upgraded Aegir by mistake, can I downgrade it?</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Using_Aegir"><span class="toc-number">4. </span>Using Aegir</a>
<ol>
	<li class="toc-level-2"><a href="#Cron_isn-t_running_scheduled_tasks_aren-t_being_executed_what_do_I_do"><span class="toc-number">4.1. </span>Cron isn't running (scheduled tasks aren't being executed), what do I do?</a></li>
	<li class="toc-level-2"><a href="#How_do_I_get_debugverbose_info_from_Drush_when_running_the_hosting_commands"><span class="toc-number">4.2. </span>How do I get debug/verbose info from Drush when running the hosting commands?</a></li>
	<li class="toc-level-2"><a href="#How_do_I_update_a_site-s_or_platform-s_modules_using_Aegir"><span class="toc-number">4.3. </span>How do I update a site's or platform's modules using Aegir?</a></li>
	<li class="toc-level-2"><a href="#Is_it_best_to_set_up_sites_under_aegir_as_www.example.com_or_just_as_example.com"><span class="toc-number">4.4. </span>Is it best to set up sites under aegir as www.example.com or just as example.com?</a></li>
	<li class="toc-level-2"><a href="#How_can_I_setup_a_site_to_use_https:_under_Aegir"><span class="toc-number">4.5. </span>How can I setup a site to use https:// under Aegir?</a></li>
	<li class="toc-level-2"><a href="#Aegir_is_not_verifying_deleting_migrating_my_site_because_of_file_permission_problems."><span class="toc-number">4.6. </span>Aegir is not verifying / deleting / migrating my site because of file permission problems.</a></li>
	<li class="toc-level-2"><a href="#I_can_verify_a_platform_but_Aegir_fails_to_provision_a_site_on_it_often_OpenAtrium"><span class="toc-number">4.7. </span>I can verify a platform but Aegir fails to provision a site on it (often OpenAtrium)</a></li>
	<li class="toc-level-2"><a href="#A_platform_with_an_installation_profile_has_verified_okay_but_Aegir_doesn-t_seem_to_be_able_to_use_the_profile"><span class="toc-number">4.8. </span>A platform with an installation profile has verified okay, but Aegir doesn't seem to be able to use the profile</a></li>
	<li class="toc-level-2"><a href="#I_tried_to_migrate_a_site_but_Aegir_incorrectly_reported_an_incompatibility_between_one_or_more_modules_in_my_source_and_destination_platforms._How_do_I_force_Aegir_to_see_that_the_two_platforms_are_compatible"><span class="toc-number">4.9. </span>I tried to migrate a site, but Aegir incorrectly reported an incompatibility between one or more modules in my source and destination platforms.  How do I force Aegir to see that the two platforms are compatible?</a></li>
	<li class="toc-level-2"><a href="#What_about_.htaccess_settings"><span class="toc-number">4.10. </span>What about .htaccess settings?</a></li>
	<li class="toc-level-2"><a href="#I-m_using_a_Git_repo_for_a_site_but_symlinks_make_crazy_things_happen"><span class="toc-number">4.11. </span>I'm using a Git repo for a site, but symlinks make crazy things happen!</a></li>
	<li class="toc-level-2"><a href="#How_can_I_tell_what_database_name_my_site_is_using"><span class="toc-number">4.12. </span>How can I tell what database name my site is using?</a></li>
	<li class="toc-level-2"><a href="#Can_I_use_the_subdirectory_multisite_feature_of_Drupal_in_Aegir"><span class="toc-number">4.13. </span>Can I use the subdirectory multisite feature of Drupal in Aegir?</a></li>
	<li class="toc-level-2"><a href="#My_cacheperformance_settings_in_adminsettingsperformance_keep_resetting_themselves"><span class="toc-number">4.14. </span>My cache/performance settings in /admin/settings/performance keep resetting themselves!</a></li>
	<li class="toc-level-2"><a href="#I_get_warn_NameVirtualHost_:80_has_no_VirtualHosts_when_I_restart_Apache"><span class="toc-number">4.15. </span>I get [warn] NameVirtualHost *:80 has no VirtualHosts when I restart Apache</a></li>
	<li class="toc-level-2"><a href="#I_get_-Dummy_connection_failed_to_fail-_when_doing_stuff"><span class="toc-number">4.16. </span>I get 'Dummy connection failed to fail' when doing $stuff</a></li>
	<li class="toc-level-2"><a href="#How_do_I_make_custom_changes_to_a_site-s_settings.php"><span class="toc-number">4.17. </span>How do I make custom changes to a site's settings.php?</a></li>
	<li class="toc-level-2"><a href="#How_to_migrate_site_via_drush"><span class="toc-number">4.18. </span>How to migrate site via drush</a></li>
</ol>
</li>
</ol>
</div>
</div>

<h1 id="Help">1. <a name="help">Help!</a></h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Where_can_I_get_help">1.1. <a name="helpwhere">Where can I get help?</a></h2>

<p>From the <a href="../../../../../handbook/index.html">Aegir Handbook</a> (which should be the first place you look) :</p>

<p>The Issue Queue for all the projects that make up Aegir is here: <a href="http://is.gd/ek2Dl" title="http://is.gd/ek2Dl">http://is.gd/ek2Dl</a></p>

<p>This is the first place to look - chances are someone's had the same problem as you before, and you'll get the quickest answers by searching for what they discovered.</p>

<p>Before asking a question or reporting an issue, you should read <a href="http://groups.drupal.org/node/21890">the bug reporting guidelines</a>.</p>

<p>You can join the #aegir channel at Freenode on IRC. (IRC instructions for drupal users are at: <a href="http://drupal.org/irc" title="http://drupal.org/irc">http://drupal.org/irc</a>). It's a friendly community, but a small one, so ask nicely and be patient!</p>

<p>If you find a solution to a problem that isn't in the documentation or in this FAQ, be the first to login and edit these pages to bring them up to date! The rest of the community thrives on your helpful information!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_I_ask_you_a_question">1.2. <a name="ask">Can I ask you a question?</a></h2>

<p>Of course you can! Don't ask to ask, just ask! It is polite to look if the question has already been answered in the documentation, the issue queue or here, but if not, please do ask around! If you ask a question and we have a nice answer, you can even add it to the FAQ here so that others can have your valuable answer.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Who_are_the_Aegir_developers">1.3. <a name="devs">Who are the Aegir developers?</a></h2>

<p>The Aegir core developers are listed on the <a href="../../../../../maintainers/index.html">Aegir maintainers page</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I-d_like_to_help_out_become_a_developer">1.4. <a name="givehelp">I'd like to help out / become a developer!</a></h2>

<p>We love people who want to help and get involved! <a href="../../../../../howtohelp/index.html">We even made a page for you to read</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Installing_Aegir">2. <a name="installing">Installing Aegir</a></h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_I_run_Aegir_on_a_shared_hosting_environment">2.1. <a name="sharedhosting">Can I run Aegir on a shared hosting environment?</a></h2>

<p>Shared hosting will not give you enough permissions to install new sites. Toughen up, read some Linux beginners tutorials and buy a cheap VPS which will do nicely.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_I_run_Aegir_on_Windows">2.2. <a name="windows">Can I run Aegir on Windows?</a></h2>

<p>To install Aegir you need a unix based operating system (for details see: <a href="../../../../../handbook/operating-system-support/index.html" title="http://community.aegirproject.org/handbook/operating-system-support">http://community.aegirproject.org/handbook/operating-system-support</a>). Aegir will not work on Windows and there are no plans to add support for it.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_Aegir_be_installed_next_to_CPanelPleskAlternCetc">2.3. <a name="cpanel">Can Aegir be installed next to CPanel/Plesk/AlternC/etc?</a></h2>

<p>No, or rather "it's not supported". See <a href="http://drupal.org/node/587554" title="http://drupal.org/node/587554">http://drupal.org/node/587554</a></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Where_can_I_get_support_for_BarracudaOctopus_Aegir">2.4. <a name="barracuda">Where can I get support for Barracuda/Octopus Aegir?</a></h2>

<p>Barracuda/Octopus are custom scripts for Aegir that install or set up various things that Aegir doesn't do out of the box. This is a custom solution tailored to Nginx systems, provided by <a href="http://omega8.cc/">Omega8.cc</a> and is not officially supported by the core Aegir project or team. For help or more information, please visit <a href="http://groups.drupal.org/boa">BOA Group</a>, <a href="http://drupal.org/project/barracuda">Barracuda</a> and <a href="http://drupal.org/project/octopus">Octopus</a> project pages / issue queue on drupal.org.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Do_I_really_need_to_create_an_aegir_user">2.5. <a name="user">Do I really need to create an aegir user?</a></h2>

<p>If you have a UNIX system, you already have a <em>user</em>. It just needs to not be root for safety reasons. But you don't really have to <em>create</em> a user.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Install_fails_with_-dummy_connection_failed_to_fail-_on_Ubuntu_12.04_LTS">2.6. <a name="ubuntu1204">Install fails with 'dummy connection failed to fail' on Ubuntu 12.04 LTS!</a></h2>

<p>Ubuntu 12.04, by default, installs an insecure MySQL server configuration that allows anonymous users to login without a password. This must be rectified by running 'mysql_secure_installation' before attempting to apt-get install Aegir.</p>

<p>Please see <a href="../../../../../installing/debian/index.html#Manual_installation_of_MySQL_on_Ubuntu_12.04_LTS">this step in the Install Documentation</a> and <a href="../../../../../faq/index.html#I_get_-Dummy_connection_failed_to_fail-_when_doing_stuff">this other FAQ item</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_can_I_tell_what_version_of_Aegir_I_have_installed">2.7. <a name="findver">How can I tell what version of Aegir I have installed?</a></h2>

<p>This works for version 1.1 and above . . . maybe earlier too . . . .
<div class="codeblock"><code>grep &#039;[hostmaster][download][tag]&#039; /var/aegir/.drush/provision/aegir.make</code></div></p>

<p>Also, if you have drush installed someplace other than in /var/aegir/.drush, then you should grep the aegir.make file in the directory tree where you have drush installed.  For example, on Ubuntu, apt-get may install drush in /usr/share/drush/.  So, the file to be grep'd would be /usr/share/drush/commands/provision/aegir.make.</p>

<p>If you're still unsure or this didn't work, contact a developer on IRC and we'll be able to tell you after you answer a few questions.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="After_installing_Aegir_I_have_two_servers_listed_is_this_normal">2.8. <a name="twoservers">After installing Aegir I have two servers listed, is this normal?</a></h2>

<p>Yes. By default, after installing Aegir, a server node is created that represents your webserver. This also generates the 'server_master' Drush alias on your system. The second server node is called 'localhost' and has your database service attached to it, because by default MySQL listens on localhost and not your webserver's IP (or on all interfaces). This corresponds to the 'server_localhost' Drush alias on your system.</p>

<p>This is normally fine: you want your websites to be serve-able via your web server's IP / all interfaces, and your database server to only listen on localhost.</p>

<p>If you end up creating remote webservers, you'll not be able to have them use databases on this Aegir server is all.</p>

<p>If you know you want to have remote webservers communicate back to the Aegir server as the 'remote database server', you'll need to attach the database service type to the non-localhost server node, comment out bind-address in /etc/mysql/my.cnf and perform the necessary firewall changes to allow remote access to TCP port 3306 on the Aegir server.</p>

<p>But generally its recommended to create remote database servers too (or combine web  + db on the one remote server), so this is generally a non-issue, rather than use the original Aegir server as a 'remote' database server for remote web servers.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_followed_the_installation_instructions._What_directory_holds_all_of_my_sites_now">2.9. <a name="sitedir">I followed the installation instructions.  What directory holds all of my sites now?</a></h2>

<p>For a full overview of a typical Aegir filesystem structure, <a href="../../../../77/index.html">read this</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_tried_to_create_a_site_but_the_create_task_failed_and_retries_don-t_succeed._How_do_I_delete_the_partially_created_site_and_associated_Aegir_tasks">2.10. <a name="sitecreatefailed">I tried to create a site, but the create task failed and retries don't succeed.  How do I delete the partially created site and associated Aegir tasks?</a></h2>

<p>See the section 'Manually deleting the site' from <a href="../../../../26/index.html">the documentation</a></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Upgrading_Aegir">3. <a name="upgrading">Upgrading Aegir</a></h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="What_is_a_patch_or_-hotfix-_and_how_can_I_apply_it_to_fix_my_site_if_I_can-t_don-t_want_to_upgrade_to_HEAD">3.1. <a name="patch">What is a patch or 'hotfix', and how can I apply it to fix my site if I can't / don't want to upgrade to HEAD?</a></h2>

<p>Sometimes releases are made and bugs are discovered afterward. We commit fixes for such bugs to HEAD, but HEAD is often volatile and you don't want to use a non-stable release in your environment. Fortunately we do (or should: if it's critical, please ask for a patch otherwise) provide a 'hotfix' or patch for users. A patch means that you can 'patch' your Aegir system to fix the bug without running the risks of using HEAD.</p>

<p>To patch an Aegir component, use the following example, in which we fix the Provision module with an imaginary patch. The same or similar steps apply for Hosting or Hostmaster (though you shouldn't need to patch Hostmaster, you only use it once to install!)</p>

<p>Run the steps as the aegir user.</p>

<p><div class="codeblock"><code>1) Backup /var/aegir/.drush/provision to somewhere else for safety, such as /tmp/provision<br /><br />2) Download the patch given in the ticket, to your server. Use wget or a similar useful tool for downloading it over the commandline. You can download the file to anywhere.<br /><br />3) edit your aegir user&#039;s crontab (crontab -e) and comment out the dispatch entry (place a &#039;#&#039; in front of the hosting dispatch cron entry). This is a precautionary step in case you patch the module, something goes wrong and it breaks the module. The hosting dispatch cron might come around and try and run the queue dispatcher and break/complain due to a broken component. If you know what you are doing and are fast enough to fix it, you may skip this.<br /><br />4) cd /var/aegir/.drush/provision/<br /><br />5) patch -p0 &lt; /path/to/the/patch/file<br /><br />6) crontab -e and uncomment the dispatch cron task</code></div></p>

<p>If the patch doesn't apply or prompts you to enter the filename to patch, try running patch -p1 instead of -p0 above.</p>

<p>If it still asks for clarification, verify that you are in the top-level directory of the component (in this case, we are inside /var/aegir/.drush/provision)</p>

<p>If it still doesn't work, it might be an unclean patch, and you should make a request in the relevant ticket to be given a cleaner patch to apply.</p>

<p>For more information on patches, please read the <a href="http://drupal.org/patch/apply">Drupal documentation</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_upgraded_Aegir_by_mistake_can_I_downgrade_it">3.2. <a name="downgrading">I upgraded Aegir by mistake, can I downgrade it?</a></h2>

<p>Short answer: no, that would be crazy.</p>

<p>Long answer: well... maybe. Actually, yes. But it could destroy your house, your cat, your life insurance and certainly give you headaches. We will tell you anyways because we're nice.</p>

<p>This assumes you have a backup from before the upgrade. We will be deploying that backup, so understand that you will loose any changes done on the frontend since the upgrade was performed (or more precisely, since that backup was done). That's the way Drupal works, you can't downgrade Drupal, and we're just cheating by restoring a previous backup.</p>

<p>So first, delete that frontend site:</p>

<pre>
drush @hostmaster provision-delete
</pre>

<p>This is not absolutely mandatory, but you should make a backup, and deleting the site does that, plus it's important to cleanup after ourselves. We can use the backup to restore to that upgraded version if we give up on the downgrade.</p>

<p>Then remove the Debian packages (if you installed through those, if not, you're on your own: but you need to at least remove the provision code):</p>

<pre>
apt-get purge aegir2 aegir2-provision aegir2-hostmaster
</pre>

<p>This may also be:</p>

<pre>
apt-get purge aegir2 aegir-provision2 aegir-hostmaster2
</pre>

<p>Depending on the release candidate you installed.</p>

<p>Next, you install the old provision, but <em>only that</em> - don't go around installing the frontend just yet because you will have an empty site to overwrite.</p>

<pre>
apt-get install aegir-provision
</pre>

<p>Then you need to edit the <code>@hostmaster</code> alias to point to the old platform, which supposedly exists (if not, you're in trouble: create it by hand or something).</p>

<p>(Alternatively, you <em>could</em> install aegir-hostmaster, which would create you the alias, but this could fail exactly because the alias already exists. Just edit the alias already.)</p>

<p>So you need to change three parameters:</p>

<pre>
  'platform' =&gt; '@platform_hostmaster6x1x',
  'root' =&gt; '/var/aegir/hostmaster-6.x-1.x',
  'site_path' =&gt; '/var/aegir/hostmaster-6.x-1.x/sites/aegirphp52.koumbit.net',
</pre>

<p>Then you can deploy your backup on that platform:</p>

<pre>
drush @hostmaster provision-deploy $PWD/backups/aegirphp52.koumbit.net-20131017.173034.tar.gz
</pre>

<p>From there the frontend should be back. Maybe. Probably. Well, the purge earlier may have killed the aegir.conf symlink, so if you want to test the frontend right now, restore that. Otherwise, be bold and upgrade to the latest 1.x release using the debian packages, which should restore everything you need:</p>

<pre>
apt-get install aegir
</pre>

<p>This should perform an upgrade from your older 1.x release to (for example here) 1.11.</p>

<p>If it doesn't work, sorry, i told you it could break. :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Using_Aegir">4. <a name="using">Using Aegir</a></h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Cron_isn-t_running_scheduled_tasks_aren-t_being_executed_what_do_I_do">4.1. <a name="cron">Cron isn't running (scheduled tasks aren't being executed), what do I do?</a></h2>

<p>If you're using Aegir 2.x ensure the "Task queue" feature is activated. To do so go to /admin/hosting/queues check "Task queue". Click on "Save changes" button. With default settings the item(s) in the queue will be process in roughly 1 min.</p>

<p>Below are other options to resolve that issue</p>

<p>At the shell prompt as the aegir user, type 
<div class="codeblock"><code>crontab -e</code></div></p>

<p>a) If you get an error that the command is not found, then you need to install cron on your server (some basic images don't include it - Linode's Ubuntu 9.04 image is one):
<div class="codeblock"><code>sudo apt-get install cron</code></div>
Now go back to the directory /var/aegir/drupal-6.19 and re-execute the hosting dispatch:
<div class="codeblock"><code>/var/aegir/drush/drush.php @hostmaster hosting-setup</code></div>
Type 'crontab -e' again.</p>

<p>b) You should see the default entry: 
<div class="codeblock"><code>*/1 * * * * (php&nbsp; &#039;/&lt;path to drush&gt;/drush.php&#039; @hostmaster hosting-dispatch</code></div></p>

<p>But if this is still not working it may well be a permissions issue. An example error :
<div class="codeblock"><code>Forking : (php /&lt;path to drush&gt;/drush.php&nbsp; --quiet @hostmaster&nbsp; &#039;hosting&#039; &#039;task&#039; &#039;266&#039; --backend &amp;) &gt; /dev/null [0.432 sec]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [notice]<br />sh: /dev/null: Permission denied</code></div></p>

<p>This means the system doesn't have permissions to access /dev/null. To resolve it, give the system permissions to write to /dev/null (it should have this anyway), by executing:
<div class="codeblock"><code>sudo chmod a+w /dev/null</code></div></p>

<p>c) If this still hasn't worked, have you moved the location of drush?
If so - see <a href="http://drupal.org/node/540152" title="http://drupal.org/node/540152">http://drupal.org/node/540152</a></p>

<p>d)  If you are a *BSD user (verified on freebsd at least) 
You need to add the line :
<code>PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin</code> at the TOP of your cron file.
Simply log in as the aegir user and type crontab -e and insert the above line on top.
Thanks goes to mauror  for <a href="http://drupal.org/node/323732" title="http://drupal.org/node/323732">http://drupal.org/node/323732</a>.</p>

<p>e) When cron for your sites stops working, it is possible that for some reason (system overload, broken site, timeout etc), Aegir failed to release a sites cron semaphore. To release it, use this simple recipe:</p>

<p><div class="codeblock"><code>$ su -s /bin/bash - aegir<br />$ cd /path/to/hostmaster/sites/domain<br />$ drush vdel hosting_queue_cron_running -y</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_do_I_get_debugverbose_info_from_Drush_when_running_the_hosting_commands">4.2. <a name="drushdebug">How do I get debug/verbose info from Drush when running the hosting commands?</a></h2>

<p>Add these to the drush call :</p>

<p><div class="codeblock"><code>--debug</code></div></p>

<p>If you're having specific problems when using the frontend, you can easily run the hosting commands from the command line by:</p>

<ol>
<li>Click the view button and then copy the Drush command which was executed at the top of the log;</li>
<li>While logged in as the aegir user, paste the command in at the terminal and replace --backend with --debug at the end of the commandline.</li>
</ol>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_do_I_update_a_site-s_or_platform-s_modules_using_Aegir">4.3. <a name="modules">How do I update a site's or platform's modules using Aegir?</a></h2>

<p>Aegir isn't a package management GUI for installing modules or themes on your site.</p>

<p>It's designed to help manage your site between builds. To upgrade sites, you should be using the <a href="../../../../23/index.html">Migrate tool</a> to move your site between two platforms, which invokes drush updatedb.</p>

<p><strong>If you aren't ready for this paradigm, and are frustrated that Aegir isn't some GUI for wildly updating or installing new modules with no regards for rollback or dealing with when it will inevitably break your site, Aegir is probably not for you.</strong></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Is_it_best_to_set_up_sites_under_aegir_as_www.example.com_or_just_as_example.com">4.4. <a name="vhostalias">Is it best to set up sites under aegir as <a href="http://www.example.com/" title="www.example.com">www.example.com</a> or just as example.com?</a></h2>

<p>Aegir supports either method and can even automatically create whichever one you didn't use as the main site name. Read more about Aliases and this feature in our <a href="../../../../60/index.html">documentation</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_can_I_setup_a_site_to_use_https:_under_Aegir">4.5. <a name="ssl">How can I setup a site to use https:// under Aegir?</a></h2>

<p>Aegir ships with an experimental SSL feature, but currently doesn't provide any means of managing SSL certificates.</p>

<p>You can follow the ongoing SSL work <a href="http://drupal.org/project/issues/search/hostmaster?issue_tags=aegir-ssl">here</a>.</p>

<p>In the meantime, to set up SSL with basic self-signed certs, follow our <a href="../../../../29/index.html">documentation</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Aegir_is_not_verifying_deleting_migrating_my_site_because_of_file_permission_problems.">4.6. <a name="fileperms">Aegir is not verifying / deleting / migrating my site because of file permission problems.</a></h2>

<p>Aegir releases prior to 0.3 RC3 encountered an error when the web server has uploaded files and made new directory in the sites/$url/files directory. A prevalent example of this occurring is with the color module and when imagecache is used (such as in atrium).</p>

<p>This bug (see: <a href='http://drupal.org/node/203204'>#203204</a> ) was introduced with Drupal 6, and has since been fixed with Drupal 7. The patch has however not been backported yet, and the patch won't fix existing files that were created incorrectly.</p>

<p>In Aegir 0.3 RC3 we introduced a work around which sets the umask for the site, which forces new files and directories to be the correct permissions, but this will only take effect after the site has been succesfully verified. To enforce the correct file ownership and permissions on the files, run the following command on each of your Drupal 6 platforms :</p>

<p><div class="codeblock"><code>&nbsp; sudo chown -R $aegir_user $platform/sites/*/files</code></div></p>

<p>This will allow the verify task to correctly set the permissions and succesfully modify/remove the files.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_can_verify_a_platform_but_Aegir_fails_to_provision_a_site_on_it_often_OpenAtrium">4.7. <a name="memlimit">I can verify a platform but Aegir fails to provision a site on it (often OpenAtrium)</a></h2>

<p>A premature failure of a site install with an unhelpful message such as 'The external command could not be executed due to an application error' often, but not always, means your php-cli's memory_limit is set too low.</p>

<p>To confirm that this is an issue, try running drush @example.org provision-verify --debug from the command line to find out what caused the problem. Remember to replace 'example.org' with the URL of the site you are trying to verify.</p>

<p>Raise your memory_limit in your php cli php.ini file to something like 128MB, or maybe 64MB if that's too much. On Debian-based distributions this is /etc/php5/cli/php.ini. Apache does not need a restart for this: installations fail because the command is being executed via drush using php cli.</p>

<p>This is a common issue for OpenAtrium as it requires more memory to run its install profile as it has a lot more to do than a regular Drupal install.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="A_platform_with_an_installation_profile_has_verified_okay_but_Aegir_doesn-t_seem_to_be_able_to_use_the_profile">4.8. <a name="namespace">A platform with an installation profile has verified okay, but Aegir doesn't seem to be able to use the profile</a></h2>

<p>Your platform has been setup and verified okay, but when you go to create a new site Aegir keeps giving an error message about the profile, or the list doesn't offer you the profile you're expecting. This could be a namespace issue. Modules, themes and profiles in Drupal all have a machine name - which is essentially their folder name. This is also used to prefix their functions etc, so that there are no clashes.
What isn't often recognised or well documented is that Drupal has a single namespace for all items - so your themes, modules and install profiles can't have the same name as each other.
Often an installation profile will be created called 'OpenPotato' and the theme for it will also be called 'OpenPotato'. This makes Drupal unhappy, and when Drupal's unhappy Aegir's unhappy. We don't want that, but it isn't Aegir's fault, it's the developer's limited or lack of understanding of this Drupal caveat.
The easiest thing is to name your installation profile directory 'OpenPotato_install' and name the profile file 'OpenPotato_install.profile'. You'll also need to rename the functions inside this file.
Then everything should work just fine.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_tried_to_migrate_a_site_but_Aegir_incorrectly_reported_an_incompatibility_between_one_or_more_modules_in_my_source_and_destination_platforms._How_do_I_force_Aegir_to_see_that_the_two_platforms_are_compatible">4.9. <a name="migratefailed">I tried to migrate a site, but Aegir incorrectly reported an incompatibility between one or more modules in my source and destination platforms.  How do I force Aegir to see that the two platforms are compatible?</a></h2>

<p>This problem can arise for at least two different reasons.  First, you may have updated a module in a platform that you imported and forgotten to run update.php before you imported the site into Aegir.  Second, you may have updated a module in a platform and not re-verified the platform in Aegir.  Be sure that you have run update.php on a drupal platform that you will be importing into Aegir before you import.  Also, if you make any change to the modules in an Aegir Platform, re-verify that platform and all sites using that platform.  (At least, experience suggests that doing these things will allow the migration to succeed.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="What_about_.htaccess_settings">4.10. <a name="htaccess">What about .htaccess settings?</a></h2>

<p>As of recent 0.4 alpha releases, Aegir now reads in the contents of a platform's .htaccess file when generating the Apache configurations. You can safely make additions/changes to the platform .htaccess and expect the relevant site to respect those changes.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I-m_using_a_Git_repo_for_a_site_but_symlinks_make_crazy_things_happen">4.11. <a name="symlinks">I'm using a Git repo for a site, but symlinks make crazy things happen!</a></h2>

<p>If you're symlinking an entire /sites/ folder, Aegir may not acknowledge the site, as this will cause problems when cloning/migrating a site.</p>

<p>If you are using Git to version control your themes, custom modules, etc, and symlinking these into your sites folder, you will find that cloning a site will clone those symlinks (by virtue of copying the sites folder). This is probably not what you want to happen!</p>

<p>Themes and custom modules are better off being checked out to or symlinked into the install profile folder. If your site's install profile is 'foobar' (there's an 'install_profile' variable in the variables table), Drupal core understands to look inside the /var/aegir/yourplatform/profiles/foobar/ folder for modules and themes directories.</p>

<p>The files directory for uploads (which I don't think can be efficiently versioned anyway in most cases) and the settings.php file will be all that's left in your sites folder, and Aegir will happily move that all around as you clone or migrate your site between platforms.</p>

<p>Storing your site's dir in git is an archaic and inefficient method of developing sites. It's 2010 and there are more elegant ways of doing things thanks to Drush Make and Aegir. You might like to look at mig5's excellent article where he provides some great tips on how to manage <a href="../../../../../article-archive/drupal-deployments-workflows-version-control-drushmake-and-aegir/index.html">Drupal deployments &amp; workflows with version control, drush_make, and Aegir</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_can_I_tell_what_database_name_my_site_is_using">4.12. <a name="dbname">How can I tell what database name my site is using?</a></h2>

<p>Check the site's vhost configuration file in /var/aegir/config/server_$whatever/apache/vhost.d/. The db name (and user/password) are stored as 'SetEnv' parameters to Apache, allowing us to cloak database credentials in the settings.php so that they are protected in a multisite environment from prying eyes (admins with PHP filter permissions).</p>

<p>You can also use 'drush st' on your site to get a status report containing the database name, user, password, among other things.</p>

<p>In modern releases (0.4-alpha9 or so and above), the site database names have switched from site_$nid style names to more properly reflect the site name/URL itself.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_I_use_the_subdirectory_multisite_feature_of_Drupal_in_Aegir">4.13. <a name="subdir">Can I use the subdirectory multisite feature of Drupal in Aegir?</a></h2>

<p>Also known as "http://example.com/site1" and "http://example.com/site2" are different sites.</p>

<p>Short answer: not yet - at least not natively. (see the '<a href="http://mig5.net/content/aegir-subfolder-support">aegir_subfolders</a>' experimental extension)</p>

<p>Long answer: this is currently not supported, because multiple sites usually end up sharing the same virtual host entry in the webserver and you will be required to upgrade/migrate all of the sites simultaneously. That is because /site1 is on the same drupal root as /site2. Another problem is that they can't be on separate servers...</p>

<p>To fix this, you would need to decouple virtual hosts and sites in Aegir, which is a fairly deeply rooted assumption. It <em>would</em> be possible to use Aliases to work around that and have the sites be in different document roots.</p>

<p>But even if you actually coerce Aegir into having multiple sites in the same domain, you get into crazy namespace issues. Do you want to allow the site on example.com to completely break sites example.com/site1 or example.com/site2? If so, who can? The same client? The same user? If not, you need to implement checks so there's no overlap...</p>

<p>Tools shouldn't dictate policy, people should. Therefore, this should probably be allowed, from a strictly technical perspective.</p>

<p>The thing is: domain names are cheap, contrary to common opinion. You only have to get <em>one</em> domain and you can have as many sub-domains as you want. Hell, you can even have sub sub domains and have your whole domain tree down there, you're free to go. Providers often give out a free DNS namespace to their customers based on their username (full disclosure: <a href="http://koumbit.org/">Koumbit</a> does :P).</p>

<p>The other thing is: /site1 is exactly what drupal does: ot dispatches menus callbacks based those GET URLs. So trying to make Aegir (or Apache + Drupal, rather) do that is rather backward. On the other hand, Drupal is notoriously bad (if you make exception of the <a href="http://drupal.org/project/domain">Domain module</a>) at dispatching requests based on domains, and that's where Apache, DNS, Aegir and all their happy friends gets in.</p>

<p>In short, it's been very low priority for the use cases of the development team so far. If developers step up or if funding is provided, this could very well be part of a future release. See this feature request for followup: <a href="http://drupal.org/node/705026" title="http://drupal.org/node/705026">http://drupal.org/node/705026</a></p>

<p>Also see <a href="http://mig5.net/content/aegir-subfolder-support">an extension for Aegir</a>, written by mig5, called 'aegir_subfolders', which works (mostly)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="My_cacheperformance_settings_in_adminsettingsperformance_keep_resetting_themselves">4.14. <a name="settings_override">My cache/performance settings in /admin/settings/performance keep resetting themselves!</a></h2>

<p>Some values such as <code>$conf[&#039;cache&#039;]</code> are hardcoded in the site's settings.php, which Aegir generates. This prevents some settings from being changed in the admin interface.</p>

<p>You can change the value of cache, and other variables, by creating a brand new file called 'local.settings.php' inside your site directory (e.g, alongside the settings.php). Put any value you want in it, e.g:</p>

<p><div class="codeblock"><code>&lt;?php<br />$conf[&#039;cache&#039;] = 3;</code></div></p>

<p>..leave off the closing <code>?&gt;</code> tag, and this setting will now override all others. Aegir will not edit or remove this file.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_get_warn_NameVirtualHost_:80_has_no_VirtualHosts_when_I_restart_Apache">4.15. <a name="warnnamevirtualhosts">I get [warn] NameVirtualHost *:80 has no VirtualHosts when I restart Apache</a></h2>

<p>This is a harmless warning that Apache throws when you have duplicate 'NameVirtualHost *:80' entries in the Apache config somewhere. It doesn't cause any problem.</p>

<p>Aegir inserts this config line into an Aegir-managed apache config file just to make sure it's there at least once. If it's annoying you and you want to remove this warning, you need to remove the IP address from the server node and verify the server again. Note that this may fail in 2.x if the IP address is used by an SSL certificate yet the SSL certificate is unused. This shouldn't generally happen unless you are running a pre-2.0 release candidate, see <a href="https://drupal.org/node/2159265">#2159265</a> for details and [/discuss/how-delete-unused-ssl-certificate#comment-2163](this workaround).</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="I_get_-Dummy_connection_failed_to_fail-_when_doing_stuff">4.16. <a name="failedtofail">I get 'Dummy connection failed to fail' when doing $stuff</a></h2>

<p>Aegir attempts to make a connection to your database server that is deliberately designed to fail. The intention of this, is to get the 'remote host' of your webserver as seen from the perspective of the database server. This is used to generate appropriate GRANT statements so that your Aegir-managed sites can connect to their appropriate databases.</p>

<p>If you get the message 'Dummy connection failed to fail', this means that Aegir was able to login to your mysql server using username 'intntnllyInvalid' with a null password. This is a security problem on your behalf!</p>

<p>You should secure your MySQL service by running 'mysql_secure_installation' or manually by removing users in your mysql database's User table that don't have a valid password. See <a href="http://dev.mysql.com/doc/refman/5.1/en/default-privileges.html" title="http://dev.mysql.com/doc/refman/5.1/en/default-privileges.html">http://dev.mysql.com/doc/refman/5.1/en/default-privileges.html</a> for more information.</p>

<p>Alternatively, if your MySQL server is sufficiently secured, there's always a possibility that your MySQL server responded with something Aegir didn't understand. Aegir expects either of these error messages:</p>

<p>Access denied for user(.... etc)</p>

<p>Host (...) is not allowed to connect to (....etc).</p>

<p>If your MySQL server responded with something else, but is secure, please <a href="http://drupal.org/node/add/project-issue/provision">open a bug report</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_do_I_make_custom_changes_to_a_site-s_settings.php">4.17. <a name="settingsphp">How do I make custom changes to a site's settings.php?</a></h2>

<p>Aegir re-generates the settings.php for a site on certain tasks (Verify, Migrate, Backup, Restore, etc). For this reason it is not wise to put custom settings in the settings.php as you will probably lose them.</p>

<p>Instead, create a file 'local.settings.php' alongside your site's settings.php and put your custom changes in there.</p>

<p>If you want to make a change and have it apply to <em>all</em> sites immediately, put that change in /var/aegir/config/includes/global.inc.</p>

<p>Neither of these files will be overwritten by Aegir on any task. thus preserving your changes.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_to_migrate_site_via_drush">4.18. <a name="migrateviadrush">How to migrate site via drush</a></h2>

<p><code>drush @www.site.alias provision-migrate &#039;@platform_new_platform_alias&#039;</code></p>

<p>Then, to update the frontend to reflect the changes:</p>

<p><code>drush @hostmaster hosting-import &#039;@www.site.alias&#039;</code></p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-23.html?destination=node%2F14%23comment-form">Login</a> or <a href="../../../../../user/register/index-23.html?destination=node%2F14%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../14/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-606" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../faq/ubercart-integration-faq/index.html">Ubercart Integration FAQ</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>These are frequently asked questions about <a href="http://drupal.org/uc_hosting">Aegir Ubercart Integration</a>. For basic install and usage instructions please consult the <a href="../../../../516/index.html">guide</a>.</p>

<h2>Contents</h2>

<ul>
<li><a href="#site-install">Does this module create a site install task after product is purchased?</a></li>
</ul>

<h2><a name="#site-install">Does this module create a site install task after product is purchased?</a></h2>

<p>There may be some adjustment to UI needed to make this clearer, but the short answer is "Yes".</p>

<p>This is done conditionally: The module adds a checkbox saying "Create my site later" to the purchase form displayed on a product, if that product has the site feature. If that checbox is checked, then we go right to payment completion, and the client will create their site later using the regular aegir interface.</p>

<p>If that checkbox is not checked, we throw the user into a site creation form, store the data they input, and then use it on payment completion to create the site.</p>

<p>Regardless of whether or not they enter their site info during ordering, their client's quota is incremented.</p>

<p>In the case of a product kit with multiple sites included, only the first site can be created in this manner.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-22.html?destination=node%2F606%23comment-form">Login</a> or <a href="../../../../../user/register/index-22.html?destination=node%2F606%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-22.html?destination=node%2F606%23comment-form">Login</a> or <a href="../../../../../user/register/index-22.html?destination=node%2F606%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-864" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../intro/case-studies/index.html">Case Studies</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Case studies are intended to help explain the utility of Aegir by showcasing its use in some real-world example.</p>

<dl>
<dt><a href="http://drupal.org/node/993166">Pagebuild Case Study</a></dt>
<dd>Pagebuild allows non technical users to build websites very quickly and easily. It was built on top of Drupal, with the idea behind it being to provide an editing interface that is so simple, even an adult could use it. This is a explanation of what we did and how we went about doing it (and why).</dd>
</dl>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-29.html?destination=node%2F864%23comment-form">Login</a> or <a href="../../../../../user/register/index-29.html?destination=node%2F864%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-29.html?destination=node%2F864%23comment-form">Login</a> or <a href="../../../../../user/register/index-29.html?destination=node%2F864%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-766" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../wikipedia-article/index.html">Wikipedia Article</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Ref.: <a href="http://en.wikipedia.org/wiki/Aegir_Hosting_System" title="http://en.wikipedia.org/wiki/Aegir_Hosting_System">http://en.wikipedia.org/wiki/Aegir_Hosting_System</a></p>

<p>Feel free to enhance and improve!</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-30.html?destination=node%2F766%23comment-form">Login</a> or <a href="../../../../../user/register/index-30.html?destination=node%2F766%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-30.html?destination=node%2F766%23comment-form">Login</a> or <a href="../../../../../user/register/index-30.html?destination=node%2F766%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-15" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../help/index.html">Getting Help</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Need help with Aegir? Documentation just not covering it?</p>

<p>We recommend you run through the following in this order:</p>

<ol>
<li>Read the <a href="../../../../../faq/index.html">FAQ</a> to check that your problem isn't answered there or that there isn't a workaround</li>
<li><a href="../../../../13/index.html">Review these tips</a> on configuring Aegir, Drush, Apache and more, and avoid common mistakes.</li>
<li><a href="../../../../../search/index.html">Search this site</a> to see if your problem or question has already been addressed.</li>
<li>Look at the current issues for <a href="http://drupal.org/project/issues?text=&amp;projects=hosting,+provision,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=All&amp;categories=All">all of the Aegir-related issue queues</a> to see if the bug has already been reported.</li>
<li><a href="../../../../../contact/index.html">Ask the community for help</a> (but see below for good hints on how to make this work better!)</li>
<li>If you think you have found a a bug report or support request, head over to the <a href="../../../../16/index.html">bug reporting guidelines</a></li>
<li>If you've exhausted all these avenues and still haven't been able to resolve your issue, or otherwise want some professional assistance, you may want to refer to our <a href="../../../../../service-providers/index.html">Aegir Service Provider Directory</a></li>
</ol>

<h2>Asking for help</h2>

<p>If you need help from the community, you're going to have a lot more success by helping the community help you. Just saying "it doesn't work" or "it's broken" will not help us help you. When you ask for help or report a bug, please include the following information:</p>

<ul>
<li>if the install failed, try the install again with the <code>--debug</code> flag on the <code>hostmaster-install</code> command, or with the <code>DEBUG=yes</code> environment set before running apt-get install</li>
<li>if a task failed, include a copy-paste of the complete task log, properly formatted (between <code>&lt;code&gt;</code> tags)</li>
<li>in any case, explain what you are trying to do clearly, what are the expected results and the actual results and how to reproduce your issue</li>
<li>give as much details as you can: the version of your operating system, the version of Aegir, drush and Drush make you are using, the version of Apache or Nginx you are running, which servers or platforms you are using, etc</li>
</ul>

<p>For more information about how to ask smart questions, see <a href="http://www.catb.org/~esr/faqs/smart-questions.html">How To Ask Questions The Smart Way</a> by Eric S. Raymond.</p>

<p>Finally, if you're confused or don't know where to go, you can always come to us! To talk with the community and the developers directly, you can join IRC, discuss site or ask on the mailing lists. See the <a href="../../../../18/index.html">Community and Support</a> page for more information.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-13.html?destination=node%2F15%23comment-form">Login</a> or <a href="../../../../../user/register/index-13.html?destination=node%2F15%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../15/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-13" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../aegir-handbook/getting-help/troubleshooting-aegir/index.html">Troubleshooting Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Aegir undergoes rigorous testing, but no actively-developed software ever escapes bugs.</p>

<p>If you feel you have encountered a bug, the <a href="../../../../14/index.html">FAQ</a> is the first place to check if there's a simple solution.</p>

<h1>Common installation and configuration errors</h1>

<p>Aegir is a more complex product than your average Drupal site. Something that has far-reaching control over bits of your server and your sites results in more bits and pieces working together, and inevitably it becomes possible to misconfigure, break, or miss setting up any one of these components.</p>

<p>The installation and upgrade procedure has evolved from these pains to becoming something almost purely automated. Nonetheless, making a mistake during the installation of Aegir or Drush is still easy to do, and these tips identify the most common mistakes.</p>

<h2>If Something Goes Wrong</h2>

<p>If an installation fails partway, particularly while using the install.sh script, you may not be able to run it successfully until you've rolled back any changes that the script has made. Delete the contents of the /var/aegir directory (not the directory itself) making sure to remove any hidden directories like /var/aegir/.drush. Also, drop any new MySQL database (which will be named according to the hostmaster domain name).</p>

<h2>The Aegir User</h2>

<p>Make sure you have an aegir user (who we call the Aegir User) and that the Aegir User is properly configured on your server.</p>

<p>Typing 'id aegir' on your system should print something like this as output.</p>

<p><div class="codeblock"><code>aegir:~# id aegir<br />uid=104(aegir) gid=108(aegir) groups=108(aegir),33(www-data)</code></div></p>

<p>If you don't want to use a user called 'aegir' for the installation, that's possible (albeit not recommended). Be cautious about using a different username, and do not use an existing user or a user that will have any other role on the server. The Aegir User has certain privileges and should only be used for Aegir activities.</p>

<h2>Aegir User's home directory</h2>

<p>Verify the Aegir install directory is the user's home. In a standard installation, the Aegir directory is /var/aegir.</p>

<p>Be cautious about installing Aegir in a different directory - it is easy to get confused since nearly all the documentation tries to be consistent by assuming you have used /var/aegir and you'll otherwise constantly have to translate this mentally when trying to learn.</p>

<h2>Aegir User as script user</h2>

<p>Make sure that the 'Server' node in your Aegir system (this is usually the node located at /node/2) lists the 'Script User' as being your Aegir User. You can also find this node by clicking on the Servers menu tab and then clicking on the server URI shown in the list that appears of Aegir-managed servers. In a basic installation, there is only one server.</p>

<h2>Do not run as root</h2>

<p>Do not run aegir as root! It's an unsafe and unsupported configuration that is known to cause problems.</p>

<h2>Drush</h2>

<p>A standard Aegir installation will check that Drush is functioning properly, or if it doesn't find Drush at all, will install it for you.</p>

<p>Always run drush as your aegir user, and never as "root".</p>

<h2>Provision</h2>

<p>Make sure that the Provision module is in the aegir/.drush/provision/ directory. A standard Aegir installation will install this for you.</p>

<h2>MySQL</h2>

<p>Aegir uses the 'root' user of the MySQL server to create and manage databases. If MySQL is running on the same server, Aegir will still attempt to connect to the database as if remotely. If the MySQL server is security hardened to prevent this type of access, this would result in MySQL errors during Aegir installation.</p>

<p>To see the root users. Connect to MySQL database and run the query
<div class="codeblock"><code>SELECT user, host, password FROM mysql.user WHERE user = &#039;root&#039;;</code></div></p>

<p>There should be separate records for the host <code>localhost</code> and <code>hostname</code>, and the password hashes should be the same to avoid confusion. If the password hashes are different, which is possible if the root user password has been updated with mysqladmin, you can make the passwords consistent by running:</p>

<p><div class="codeblock"><code>UPDATE user SET Password=PASSWORD(&#039;new_password&#039;)&nbsp; WHERE host=&#039;hostname&#039; AND user=&#039;root&#039;;<br />FLUSH PRIVILEGES;</code></div></p>

<h2>Apache</h2>

<p>Make sure the Aegir User can restart Apache without a password and that the corresponding command is defined in your Aegir 'Server' node.</p>

<p>As your Aegir User, run the command shown in the "Restart command" field in your Aegir 'Server' node to ensure that your Aegir User can in fact restart Apache (if not, see the Sudo information below).</p>

<p>On Debian/Ubuntu, the command sudo /usr/sbin/apache2ctl graceful. The command should execute and return without asking for a password when run as the Aegir User.</p>

<p>Make sure Apache can parse its configuration without syntax errors. On Ubuntu, sudo apache2ctl configtest should report "Syntax OK".</p>

<h2>Sudo</h2>

<p>Check that the aegir user is in your /etc/sudoers file with the permission to restart Apache. Instructions and an example for doing this are contained in the INSTALL.txt.</p>

<p>On a Linux system, check that /etc/sudoers is chmod 440 (i.e., read only for the file owner and group, which is usually root)</p>

<h2>Attempt to run the task queue manually from the command line</h2>

<p><div class="codeblock"><code>php /var/aegir/drush/drush.php @hostmaster hosting-tasks --debug</code></div></p>

<h2>Run a specific task in the queue from the command line</h2>

<p><div class="codeblock"><code>php /var/aegir/drush/drush.php @hostmaster hosting-task &lt;nid of the task&gt; --debug</code></div></p>

<h2>Run the 'Cron' queue manually from the command line</h2>

<p><div class="codeblock"><code>php /var/aegir/drush/drush.php @hostmaster hosting-cron --debug</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-31.html?destination=node%2F13%23comment-form">Login</a> or <a href="../../../../../user/register/index-31.html?destination=node%2F13%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-31.html?destination=node%2F13%23comment-form">Login</a> or <a href="../../../../../user/register/index-31.html?destination=node%2F13%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-18" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../contact/index.html">Contact the community</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Want to talk with the Aegir community? There are many channels with various virtues.</p>

<p><strong>Discussion Forum</strong></p>

<p>The community site has a <a href="../../../../../discussion/index.html">discussion area</a> that anyone can use to talk about Aegir with others or seek support.</p>

<p><strong>IRC</strong></p>

<p>You can <a href="http://webchat.freenode.net/?channels=#aegir">join the #aegir channel at Freenode</a> on IRC. There's a loyal community of Aegir developers and users that frequent this channel. Much development discussion also takes place here, and support questions are welcomed.</p>

<p>The core developers also are reachable in #aegir on IRC.</p>

<p>Remember that Aegir, like Drupal, transcends timezones, and even the developers are many hours apart from each other. Sometimes it's quiet, and sometimes it's very busy. Don't repeat yourself: someone will respond eventually if not immediately.</p>

<p>New to IRC? IRC instructions for Drupal users are at: <a href="http://drupal.org/irc" title="http://drupal.org/irc">http://drupal.org/irc</a>.</p>

<p><strong>Mailing Lists</strong></p>

<p>There are mailing lists that can be used for support, general discussion and development or announcements.</p>

<ul>
<li><a href="https://listes.koumbit.net/cgi-bin/mailman/listinfo/announce-lists.aegirproject.org">announce</a> - the announce mailing list is used to announce new releases or major news</li>
<li><a href="https://listes.koumbit.net/cgi-bin/mailman/listinfo/users-lists.aegirproject.org">users</a> - the user mailing list is used for general discussions and support for Aegir users</li>
<li><a href="https://listes.koumbit.net/cgi-bin/mailman/listinfo/core-lists.aegirproject.org">core</a> - the core mailing list is used for internal discussions in the <a href="../../../../../maintainers/index.html">core team</a></li>
</ul>

<p><strong>Events</strong></p>

<p>Aegir is often present at many of the popular DrupalCamps and DrupalCons, either as a formal session or in smaller BOF sessions.</p>

<p>We encourage users who are confident in using Aegir to demonstrate it at any relevant events they attend, and to <a href="../../../../7/index.html">post slides/screencasts</a> so that others can benefit.</p>

<p><strong>Blogs</strong></p>

<p>As well as the News/Blog area here, the developers also often blog about new Aegir features or share handy tips for the community. Here are two blogs to stay up to date with:</p>

<ul>
<li><a href="http://developmentseed.org/tags/aegir" title="http://developmentseed.org/tags/aegir">http://developmentseed.org/tags/aegir</a></li>
<li><a href="http://mig5.net/category/tags/aegir" title="http://mig5.net/category/tags/aegir">http://mig5.net/category/tags/aegir</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-32.html?destination=node%2F18%23comment-form">Login</a> or <a href="../../../../../user/register/index-32.html?destination=node%2F18%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-32.html?destination=node%2F18%23comment-form">Login</a> or <a href="../../../../../user/register/index-32.html?destination=node%2F18%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-16" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../bugs/index.html">Bug reporting guidelines</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Reporting bugs is a great way to contribute to Aegir and it helps all of us (developers and users both) shape Aegir into the fantastic Drupal management system we want and need.</p>

<h2>Before reporting bugs</h2>

<p>Mis-reporting bugs that are due to not following instructions or skipping steps, not providing enough information or duplicating reports, however, can be a distraction to the development team and waste precious resources. So, help out by following these guidelines for reporting bugs.</p>

<p>Before you report a bug, make sure you have done things right and are sure it's a bug, by reviewing the <a href="../../../../../help/index.html">Getting help</a> section, if only to include the right information 
in your bug report.</p>

<h2>Where to report bugs</h2>

<p>Somehow a bug or two may have slipped into Aegir. Eek! So it's really a bug? A <em>new</em> bug? To report it, file an issue on Drupal.org:</p>

<ul>
<li><a href="http://drupal.org/project/hosting">Hosting</a> (if the issue is in the frontend)</li>
<li><a href="http://drupal.org/project/provision">Provision</a> (if the issue is in the backend) or</li>
<li><a href="http://drupal.org/project/hostmaster">Hostmaster</a> (if it is in the installer, a documentation bug, or if you don't know where the issue should go).</li>
<li><a href="http://drupal.org/project/eldir">Eldir</a> (if it's an issue with the default Eldir theme that ships with Aegir.)</li>
</ul>

<h2>Feature Requests</h2>

<p>Feature requests are, of course, always welcome in these queues as well. To get an idea of where Aegir is headed with new features, you should first consult the <a href="../../../../35/index.html">Aegir Roadmap</a> and <a href="../../../../34/index.html">Project Goals</a> - we may be already on it!</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-33.html?destination=node%2F16%23comment-form">Login</a> or <a href="../../../../../user/register/index-33.html?destination=node%2F16%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-33.html?destination=node%2F16%23comment-form">Login</a> or <a href="../../../../../user/register/index-33.html?destination=node%2F16%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-302" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../howtohelp/index.html">How to help?</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <h1>Testers</h1>

<ul>
<li>download new release</li>
<li>report bugs</li>
<li>test existing issues and patches</li>
<li>use it! test everything!</li>
</ul>

<h1>Documentors</h1>

<p>Contribute to this <a href="../../../../../handbook/index.html">handbook</a> and the rest of the community site.</p>

<p>Contributing can mean adding new documentation, or reviewing existing docs to ensure that they haven't become out of date, incorrect or been defaced.</p>

<h1>Promotion</h1>

<ul>
<li><p>Blog about Aegir and put your aegir term feed in <a href="../../../../../reader/index.html">our feed aggregator</a></p></li>
<li><p>You can also make or collate screencasts and <a href="../../../../7/index.html">post them here</a> for others.</p></li>
</ul>

<h1>Developers</h1>

<p>Want to become an Aegir developer?</p>

<p>Submit good patches and review existing ones and we will love you and give you commit access.</p>

<h1>Donate</h1>

<p>See <a href="../../../../../donate/index.html">the donation page</a>.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-25.html?destination=node%2F302%23comment-form">Login</a> or <a href="../../../../../user/register/index-25.html?destination=node%2F302%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-25.html?destination=node%2F302%23comment-form">Login</a> or <a href="../../../../../user/register/index-25.html?destination=node%2F302%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-983" class="node node-page clear-block">
      <div class='node-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/anarcat/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/pictures/picture-78/index.jpg" alt="anarcat&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/anarcat/index.html" class="username" title="View user profile.">anarcat</a></div><div class='date'>9:29pm Dec 12, 2011</div>    </div>
  
      <h2 class='node-title'>
            <a href="../../../../../donate/index.html">Donate to the Aegir project</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div style="float: right">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick" /><br />
<input type="hidden" name="hosted_button_id" value="C9E3CBTQM9YWN" /><br />
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" /><br />
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" /><br />
</form>
</div>
<p>We are happy to take donations from users to further development and keep our community site, mailing lists, and Jenkins CI server running. Note that you can also talk with existing <a href="../../../../../service-providers/index.html">service providers</a> if you have the budget to further specific functionalities, but otherwise a small (or big!) donation is always appreciated and will make sure we have funds to operate the infrastructure for the project or maybe even pay people for development work.</p>
<p>Help us work on one of these goals:</p>
<ul>
<li>The next 7.x-3.x maintenance release</li>
<li>The next 6.x-2.x maintenance release</li>
<li>Hosting Drupal 8 sites</li>
<li>Extending Aegir with new features</li>
</ul>
<p>You can make this happen.</p>
<p>Financial support can greatly accelerate our development efforts. The core team needs your help to keep this going.</p>
<p>You can make this happen! Can you spare $5?<br />
<form action="https://www.paypal.com/cgi-bin/webscr" method="post"><input type="hidden" name="cmd" value="_s-xclick" /><input type="hidden" name="hosted_button_id" value="C9E3CBTQM9YWN" /><input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />&nbsp;&nbsp;via paypal<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" /></form>
</p><p><a href="https://www.gittip.com/aegirproject/"><img src="../../../../../sites/community.aegirproject.org/files/gratipay/index.png" alt="Gratipay (formerly Gittip) logo" />Gratipay (formerly Gittip) has a team for Aegir</a></p>
<p>The small core team that works on Aegir does this mostly because they use it themselves. That however does not cover all the time we work on Aegir.<br />
Our passion to produce a good product, and love for Drupal, drives us to keep working on this, but there is a risk of developer burnout.<br />
For example: supporting older versions and making upgrade paths user-friendly is a lot of work. While the core team has only limited personal need for this.<br />
<b>Donations validate more time being spent on this.</b></p>
<p>Please contact one of the <a href="../../../../../service-providers/index.html">service providers</a> if you're looking for paid support.</p>
    </div>
  
  </div>




<div  id="node-464" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../service-providers/index.html">Aegir Service Providers</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_18 last"><a href="../../../../../taxonomy/term/18/index.html" rel="tag" title="">Service Providers</a></li>
</ul></div><p>Here is a list of consulting and hosting firms offering paid support for the Aegir Hosting System:</p>

<dl>
<dt><a href="http://www.koumbit.org/">Koumbit Networks</a></dt>
<dd>Koumbit's team includes several of Aegir's core maintainers and contributors; including, among others, <a href="http://drupal.org/user/1274">Anarcat</a>, the project lead, as well as <a href="http://drupal.org/node/1122976">developers</a> of <a href="http://drupal.org/project/hosting_services">several</a> <a href="http://drupal.org/project/uc_hosting">contributed</a> <a href="http://drupal.org/project/project_status">projects</a>. Koumbit manages one of the <a href="https://aegir.koumbit.net/">largest Aegir deployments</a>, hosting hundreds of custom developed websites, as well as being one of the first providers to automate site ordering and provisioning. Koumbit is a dynamic team of designers, developers and sysadmins, offering support and consulting services from <a href="http://www.koumbit.org/en/services/graphic_design">front-end development</a> (design, theming and UI), through <a htef="http://www.koumbit.org/en/services/eCommerce">e-commerce</a>, complex <a href="http://www.koumbit.org/en/services/web_development">Drupal site builds and data migrations</a>, to <a href="http://www.koumbit.org/en/services/hosting">hosting</a> and <a href="http://www.koumbit.org/en/services/SysAdmin">systems administration</a>. This diversity has allowed Koumbit to develop deep expertise in distributed <a href="http://dcycleproject.org/">development best-practices</a>.
Koumbit has recently launched <a href="http://www.koumbit.org/en/services/AegirVPS">AegirVPS services</a>, offering full root/SSH/SFTP access to robust virtual servers with Aegir pre-installed, maintained and supported.</dd>

<dt><a href="http://omega8.cc/">Omega8.cc</a></dt>
<dd>Omega8.cc offers dedicated Aegir hosting service since July 2009, using custom developed, high performance cloud servers configuration. Hosted options include SSH and Drush access, with simplified Aegir interface. Omega8.cc supports also remote Aegir installations and maintenance on Client's servers. Simplified and optimized for single server installations system configuration is open-sourced since 2009 and available as a dual-core <a href="http://drupal.org/project/barracuda">Barracuda</a> and <a href="http://drupal.org/project/octopus">Octopus</a> installer.</dd>

<dt><a name="praxis" href="http://praxis.coop/">Praxis Labs Coop</a></dt>
<dd>
<p>We are a worker's cooperative based in Montreal. We share an interest in web technologies and direct democracy. We've all been working with Drupal and Aegir for many years. One of our founding members (Christopher "<a href="http://drupal.org/user/368613">ergonlogic</a>" Gervais) is in fact a lead developer of the Aegir project.</p>

<p>We provide Aegir, Drupal and Open Atrium hosting, development, support &amp; consulting.</p>

<p>Praxis is a proud partner of Koumbit networks.</p>
</dd>

<dt><a href="http://thinkdrop.net/">ThinkDrop Consulting</a></dt>
<dd>ThinkDrop provides Infrastructure and Architecture consulting for Aegir and Drupal.  We are the creators of (DevShop)[http://drupal.org/project/devshop], the first open source Drupal Environment Manager, built on Aegir.  We have also created a number of other Aegir addons like <a href="http://drupal.org/project/hosting_drush_aliases">Aegir Drush Aliases</a> and the <a href="http://drupal.org/project/hosting_solr">Hosting</a> &amp; <a href="http://drupal.org/project/provision_solr">Provision Solr</a> modules.  The ThinkDrop team is <a href='http://drupal.org/user/17028'>Jon Pugh</a>, <a href='http://drupal.org/user/10852'>Kevin LaPalme</a>, and <a href='http://drupal.org/user/348228'>Jacinto Capote</a></dd>

<dt><a href="http://www.initfour.nl/">Initfour websolutions</a></dt>
<dd>Initfour provides Infrastructure and Architecture consulting for Aegir and Drupal.  Internally Aegir is used for hosting managed Drupal sites.
Fixing what needs to be fixed, Initfour has worked in many corners of the Drupal/Aegir universe.</dd>

<dd>On Drupal.org: <a href='http://drupal.org/user/449000'>helmo</a></dd>
</dl>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-273.html?destination=node%2F464%23comment-form">Login</a> or <a href="../../../../../user/register/index-273.html?destination=node%2F464%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../464/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-3" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../3/index.html">Shop resources</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>shop resources</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-34.html?destination=node%2F3%23comment-form">Login</a> or <a href="../../../../../user/register/index-34.html?destination=node%2F3%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-34.html?destination=node%2F3%23comment-form">Login</a> or <a href="../../../../../user/register/index-34.html?destination=node%2F3%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-469" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../using/index.html">User Manual</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This section of the handbook describe how to use Aegir in the day-to-day management of sites and platforms.</p>

<p><div class="view view-book-subpages view-id-book_subpages view-display-id-default view-dom-id-2">
    
  
  
      <div class="view-content">
        <div class="views-row views-row-1 views-row-odd views-row-first">
    

  
    
                      <div class="views-field title">
                      <li><a href="../../../../19/index.html">Getting to know the interface</a></li>                  </div>
      
    
  

  </div>
  <div class="views-row views-row-2 views-row-even">
    

  
    
                      <div class="views-field title">
                      <li><a href="../../../../43/index.html">Your site and Aegir</a></li>                  </div>
      
    
  

  </div>
  <div class="views-row views-row-3 views-row-odd">
    

  
    
                      <div class="views-field title">
                      <li><a href="../../../../20/index.html">Setting up a Platform</a></li>                  </div>
      
    
  

  </div>
  <div class="views-row views-row-4 views-row-even views-row-last">
    

  
    
                      <div class="views-field title">
                      <li><a href="../../../../28/index.html">Client management and access control</a></li>                  </div>
      
    
  

  </div>
    </div>
  
  
  
  
  
  
</div> </p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-10.html?destination=node%2F469%23comment-form">Login</a> or <a href="../../../../../user/register/index-10.html?destination=node%2F469%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-10.html?destination=node%2F469%23comment-form">Login</a> or <a href="../../../../../user/register/index-10.html?destination=node%2F469%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-19" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../19/index.html">Getting to know the interface</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>So you've installed Aegir, arrived at the home page of your installation and are waiting for the magic to begin. On this page we'll introduce you to Aegir and how easy it is to use.</p>

<h1>Get to know the interface</h1>

<div align="center"><a href="../../../../../sites/community.aegirproject.org/files/selection_003/index.png"><img src="../../../../../sites/community.aegirproject.org/files/selection_003_thumb/index.png" /></a></div>

<h2>Home</h2>

<p>Once you've successfully completed an Aegir installation, you'll be presented with the homepage, titled 'Home'.</p>

<p>In a standard installation there won't be any sites listed here yet, other than the main Aegir site itself, which gets imported into the system during the installation. This is normal - Aegir even recognises itself as a Drupal site on your server, and to a limited degree is capable of 'managing' itself. Skynet is here!</p>

<h2>Admin menu</h2>

<p><img src="../../../../../sites/community.aegirproject.org/files/aegir_admin_menu/index.png" />At the very top of the screen you'll see the Admin menu, which you may recognise as a popular contrib module installed on many other sites, perhaps even some of your own.</p>

<p>This gives you access to all the normal Drupal administrative functionality, which is not normally required in everyday Aegir user, but it also does provide you access to the 'Hosting' administrative settings where you can enable features that ship with Aegir and make other configuration changes.</p>

<h2>The Eldir theme</h2>

<p>The Aegir project ships with a default theme called 'Eldir' which is the classic navy blue, simplistic functional interface consistent with the overall Aegir brand. Eldir has been specifically designed for Aegir - nonetheless it is a Drupal theme like any other.</p>

<h2>Blocks</h2>

<p>Eldir has a main content section and a right sidebar. In the sidebar, several blocks are enabled by default.</p>

<h3>Queues</h3>

<p>The first is 'Queues'. 
Queues are Aegir's method of creating 'tasks' and putting them into a pool for the backend system to execute.</p>

<p>Two types of Queue exist in Aegir, though only one is enabled by default. These are</p>

<ul>
<li>the 'Task' queue (sending tasks to the backend to be executed by the 'aegir' user from the command line, such as installing, deleting, enabling, migrating sites and platforms)</li>
<li>the 'Cron' queue, which, when the Cron feature is enabled, runs cron on your site in batches.</li>
</ul>

<p><img src="../../../../../sites/community.aegirproject.org/files/aegir_queue/index.png" />The task queue that you'll see upon installation shows all the tasks that Aegir has recently run, or is about to run. It shows the last 5, but there is a link to see the full list of historical tasks.</p>

<p>After installation there will be as many as three tasks in the task queue:</p>

<ul>
<li>a Verify task for the main 'server' node, </li>
<li>the Import task of the main Aegir site itself, and </li>
<li>the Verify task of the main Aegir 'platform' that hosts the Aegir site.</li>
</ul>

<p>These tasks are kicked off during the actual Aegir installation.</p>

<p>A task is colored</p>

<ul>
<li>a neutral blue-grey if currently queued but not running yet</li>
<li>white with a spinning wheel if currently in the process of being run</li>
<li>green if completed successfully</li>
<li>red if there was an error  </li>
</ul>

<p>It's worth checking the queues regularly to see that the Task or Cron queues are being run regularly. If not you may have a problem with the cron setup on your server - see the <a href="../../../../14/index.html">FAQ</a>.</p>

<h3>Navigation</h3>

<p>Underneath the Summary is the standard Navigation block in Drupal.
<img src="../../../../../sites/community.aegirproject.org/files/aegir_navigation_block/index.png" width="260px" /></p>

<h2>Content</h2>

<p>The main content body in the Aegir interface lists</p>

<ul>
<li>your sites when on the frontpage or viewing the 'Sites' tab</li>
<li>your platforms when viewing the 'Platforms' tab</li>
<li>your servers when viewing the 'Servers' tab </li>
</ul>

<p>The main content area also is where nodes are viewable or editable, such as viewing more information on a site, platform or server, or editing/creating new entities of these types.</p>

<h2>Modalframe</h2>

<p>When clicking on a task's 'Run' or 'View' buttons, a modalframe dialog is loaded in the browser. This is to provide a fluid, attractive experience for the user without requiring them to leave the current page or node to perform operations on a site. When the action is performed on the task, the modalframe will close and the user will be returned to the page they were on when they clicked that button.</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/aegir_modalframe/index.png" /></div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-35.html?destination=node%2F19%23comment-form">Login</a> or <a href="../../../../../user/register/index-35.html?destination=node%2F19%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-35.html?destination=node%2F19%23comment-form">Login</a> or <a href="../../../../../user/register/index-35.html?destination=node%2F19%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-43" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../43/index.html">Your site and Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>So, you've provisioned a site using Aegir, and you're poking about looking at the system and what it's done.</p>

<p>A Drupal site managed by Aegir is really mostly the same as any other Drupal site. However, there are a few very minor differences that might surprise or confuse some users.</p>

<p>None of these things adversely affect the running of your site - they are designed to actually make your life even easier.</p>

<h2>Multisite</h2>

<p>Aegir installs sites on a platform, which means it places the site directory in /var/aegir/platforms/(yourplatform)/sites/(yoursite.com). Many sites can all be installed alongside each other inside a platform's 'sites' directory. This is a standard, built-in Drupal feature known as 'multisite', and it is not unique to Aegir.</p>

<h2>Settings.php and cloaked credentials</h2>

<p>Within a multisite structure where multiple sites share the same 'Document Root' or codebase on the system, administrative users on sites that have PHP access, are capable of manipulating the server into exposing the database credentials of other sites in that codebase with reasonable ease. This is a pretty serious disclosure of sensitive information, although it is only possible if users have PHP execution privileges. Any multisite installation of Drupal (even without Aegir) has the potential for this to be a problem.</p>

<p>But security is very important to Aegir, and that's why special precautions are enabled by default to avoid this issue.</p>

<p>Essentially, when Aegir installs a site and creates the settings.php for that site, it 'masks' or 'cloaks' the database credentials, replacing them instead with environment variables fetched from the $_SERVER array in PHP.</p>

<p>The credentials are instead set in the site's Apache 'vhost' configuration file, which is stored outside the 'Document Root' or platform codebase, and is therefore safe from prying eyes by administrative users.</p>

<p>Apache/PHP is able to read the environment variables from the vhost and understand the settings.php's mask, allowing your site to work as normal.</p>

<p>If this feature confuses you or is inconvenient, you have a few options available to you:</p>

<ul>
<li>Run Nginx (which doesn't cloak the credentials)</li>
<li>Set <code>$options[&#039;provision_db_cloaking&#039;] = FALSE;</code> in the site's drushrc.php and then re-Verify the site</li>
<li>Stop worrying and enjoy the extra security Aegir provides you</li>
</ul>

<p>Also note that when you run the Backup task against a site, it actually uncloaks the credentials of the settings.php that it saves in a tarball with the rest of the site. The benefit of this is that you are able to take the backup tarball and deploy it on a non-Aegir server, using standard Drupal, and your settings.php will be in 'normal' Drupal form for that environment. This also makes it easier to 'import' sites from previous-Aegir installations, into new Aegir installations if need be.</p>

<h2>'Files' rewrite rule</h2>

<p>Everyone knows about the inconvenience of having to place an <code>img src</code> in your node that looks like this:</p>

<pre>
<code>&lt;img src=&quot;/sites/www.example.com/files/mycutecat.jpg&quot;&gt;</code>
</pre>

<p>If you ever deploy this site under a new URL or for whatever reason this path changes, those images or links will become broken on the site. That's because this information ends up stored in the database, and it can be a pain to fix up.</p>

<p>When you Migrate or Clone a site with Aegir, some paths in the database are automatically updated where they are consistent enough to be able to be scripted by Aegir (such as those in the files table).</p>

<p>However, Aegir can't fix up actual node body content, as that would be risky, and as a rule, Aegir doesn't like tampering that deeply into your data. Aegir exists to help you manage your data, but not manipulate it except where absolutely necessary.</p>

<p>Fortunately, what Aegir <em>can</em> offer is adding a '/files' redirect in the Apache vhost configurations. This pattern-matching rule allows you to enter this into your node instead:</p>

<pre>
<code>&lt;img src=&quot;/files/mycutecat.jpg&quot;&gt;</code>
</pre>

<p>and you can expect that to actually point to the same place. When you clone this site or rename it to a new URL, this path doesn't actually <em>need</em> to change, because the Rewrite rule will be modified to point to the new location, thus avoiding breakages.</p>

<p>It's not perfect, and people are often frustrated with Aegir not 'just fixing' everything like this, despite the fact the above is more than what Drupal does for you out of the box!</p>

<p>Fortunately, it's expected that Drupal 7 will improve this sort of thing altogether and things will hopefully become easier.</p>

<h2>The .htaccess</h2>

<p>Using a .htaccess with an <code>Allow Override all</code> directive in Apache can be a major performance killer, because it requires Apache to stat each subdirectory of the codebase looking for overrides in .htaccess.</p>

<p>As a result, Aegir disables the reading of the Drupal .htaccess in the runtime environment.</p>

<p>This does not mean that the .htaccess is not needed. Instead, when you run the Verify task against a Platform, the .htaccess is studied by Aegir and its contents are copied into the platform-wide Apache vhost configuration, typically located in <code>/var/aegir/config/server_master/apache/platform.d</code></p>

<p>Need to make a modification to the .htaccess? Simple: you can simply edit it in-place as you normally would, but you must re-Verify the platform in Aegir afterward, in order for those new or modified settings to be 'loaded in' to the platform vhost file.</p>

<p>The end result is improved performance for your sites, without losing any functionality, as you can still customise the .htaccess to your liking.</p>

<h2>Permissions</h2>

<p>Permissions in Aegir generally follow these rules:</p>

<ul>
<li>Everything is owned by aegir:aegir, and the 'other' bit is read-only in most cases</li>
<li>Things that need to be written to (uploads) by the web server, have the 'group' bit of 'www-data' (or whatever the relevant user/group is on your system) with the group bit writable</li>
<li>Anything that is sensitive information, such as the data in the configuration files, are owned by aegir:aegir or aegir:www-data when the web server needs to read those files, with no read access by the 'other' bit.</li>
</ul>

<p>The use of the 'aegir' user on the system is vital for normal Aegir functionality, however it can be confusing to users who wish to edit files (say, theme development on a site, or downloading new modules) as a user other than Aegir.</p>

<p>The methodology recommended in these situations is:</p>

<ul>
<li>Add a standard user to your server, say, 'john'</li>
<li>Add that 'john' user to the 'aegir' group: <code>adduser john aegir</code></li>
<li>By default, Aegir sets the 'modules', 'themes' and 'libraries' directories so they are aegir:aegir with the group bit writable. This means that any user on the system who is a member of the 'aegir' group, is then able to add, delete, or modify files within those directories.  </li>
</ul>

<h2>The drushrc.php</h2>

<p>You may have noticed a file called 'drushrc.php' on your system, stored alongside the settings.php of a site (and another in the root-level directory of your platform or Drupal core codebase). What's this about?</p>

<p>The drushrc.php is a file that contains important metadata about your site or platform. The significant portion of the file contains metadata on all 'packages' (modules, themes, install profiles and libraries) in that part of the system, including their version numbers and whether they are actually enabled or not.</p>

<p>This file is generated by Aegir whenever a platform is verified, and whenever a site is installed or verified.</p>

<p>Paradoxically, settings from the existing drushrc.php are able to be 'read in' by Aegir when performing those tasks and many others.</p>

<p>The drushrc.php generally should not be edited unless you know what you're doing. As previously discussed above, some supported configurations such as the disabling of the 'cloaking' of database credentials in a site's settings.php, are able to be set in the drushrc.php to provoke the system into modifying how that site is to be treated.</p>

<p>@TODO: Drush aliases</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-386.html?destination=node%2F43%23comment-form">Login</a> or <a href="../../../../../user/register/index-386.html?destination=node%2F43%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../43/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-22" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../22/index.html">Installing a new website</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Creating a new website using Aegir is really, really easy, and is probably one of the most exciting aspects of Aegir. The very idea of clicking a button and suddenly being able to visit a new site may even be the prospect that drove you to installing Aegir in the first place.</p>

<p>To create a site you must have created a Platform first, which is the codebase, typically a copy of Drupal core, on which to place your new site. Read the <a href="../../../../20/index.html">Platform documentation</a> if you have not yet completed this stage.</p>

<h2>The Site form</h2>

<p>Much like your Platform, a site is represented as a node in the Aegir frontend. To create a new site, you must create a new Site node.</p>

<p>The site node is a form requiring various attributes to be filled out in order to accurately advise the Aegir system about what kind of site you wish to create. These fields commonly are:</p>

<ul>
<li>Domain name - the site name. This becomes the title of the node.</li>
<li>Client - who is the client or owner of this site. This field really only is relevant if you have enabled the Clients feature to manage segregations of sites between clients.</li>
<li>Install Profile - the install profile to use to install this site. This has a dramatic effect on the end result of your site</li>
<li>Platform - the platform to install the site on. The list of available platforms is based on what profile you choose above (in other words, which platforms support that install profile. The choice of platform also implies which web server hosts that platform, so this is why 'web server' is not a selectable option in the form.</li>
<li>Language - what language install the site with. This is dependent on the profile or platform chosen.</li>
<li>Database server - which database server to install the database on.</li>
</ul>

<p>Below is an example of the site form.</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/site_form/index.png" /></div>

<h2>Installing the site</h2>

<p>Once you have filled out the site form per your requirements, click Save to submit the form. An 'Install' task is automatically spawned and added to the task queue for the dispatcher to execute.</p>

<p>The backend does the hard work of essentially completing a standard Drupal installation automatically. It creates a database and database user for the site, executes the Drupal installation procedure, populates the database, and generates a web server virtualhost configuration file for the site (Apache or NginX depending on your environment). In the event that the platform is located on a remote web server, the data is synced across from the main Aegir site to the remote server.</p>

<p>Finally, it restarts the HTTP service to load the new site's virtualhost into the HTTP service's runtime environment.</p>

<p>A traditional 'welcome' e-mail containing the one-time login link is sent to the e-mail address of the 'Client' who owns this site. As well as that, the login link is generated and displayed on the new site node view (see below).</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/site_view/index.png" /></div>

<p>As you can see above, the successful installation of the site has provided a series of tasks available to be performed against this site. This task block is similar in appearance to the Task Queue block we previously discussed, but rather than showing a list of tasks either run, queued or processing, it instead displays the list of <em>potential</em> tasks that may be run for this site only.</p>

<p>We will discuss these tasks and more in the following sections.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-36.html?destination=node%2F22%23comment-form">Login</a> or <a href="../../../../../user/register/index-36.html?destination=node%2F22%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-36.html?destination=node%2F22%23comment-form">Login</a> or <a href="../../../../../user/register/index-36.html?destination=node%2F22%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-60" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../60/index.html">Site Aliases</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><h3>Introduction</h3>

<p>Site aliases are helpful if you move content to a new domain, change domain names or simply want to make sure that <a href="http://example.com/" title="http://example.com">http://example.com</a> and <a href="http://www.example.com/" title="http://www.example.com">http://www.example.com</a> take users to the same place.  You can implement site aliases with or without <em>redirection</em>.  The differences between these two methods and how Aegir handles them is described below.</p>

<h3>Enable Alias Support in Aegir</h3>

<ol>
<li><p>You have to enable alias support in Aegir as it is off by default.  Assuming the URL of your Aegir front end is aegir.example.com, browse to aegir.example.com/admin/hosting/features 
<img src="http://groups.drupal.org/files/features-page.png" alt="how to get to the Aegir features page" /></p></li>
<li><p>Check the Site aliasing box
<img src="http://groups.drupal.org/files/site-aliasing-feature.png" alt="how to enable site aliasing on Aegir" /></p></li>
<li><p>Click Save configuration</p></li>
</ol>

<h3>Global Settings for Aliasing</h3>

<p>After you have enabled the site aliasing feature in Aegir you can navigate to aegir.example.com/admin/hosting/aliases (see the menu item that is added under Hosting in the admin menu bar).  Here you can set default site alias settings for all of your Aegir-hosted sites.</p>

<p><img src="http://groups.drupal.org/files/global-aliasing-settings.png" alt="global site aliasing settings" /></p>

<h3>Site-Specific Settings for Aliasing</h3>

<p>You can override the global settings for aliasing by configuring site-specific alias settings either when you create the site or later by editing the site settings.</p>

<p><img src="http://groups.drupal.org/files/site-specific-aliasing-settings.png" alt="site-specific aliasing settings" /></p>

<h3>Redirection Option</h3>

<p>For users, one of the main differences that occurs when redirection is turned on is that the URL that they enter in the browser address bar changes.  This reflects what the server is doing, which is in effect to redirect the request to the same site under the main URL, as opposed to serving the same site from under an alias.</p>

<h4>User navigates to my-old-domain.com with redirection off</h4>

<p><img src="http://groups.drupal.org/files/aliasing-without-redirection.png" alt="aliasing without redirection" /></p>

<h4>User navigates to my-old-domain.com with redirection on</h4>

<p><img src="http://groups.drupal.org/files/aliasing-with-redirection.png" alt="aliasing with redirection" /></p>

<h3>Aegir alias management under the hood</h3>

<p>Aegir primarily manages aliases in the virtual hosts file for each site (e.g. /var/aegir/config/server_master/apache/vhost.d/www.example.com)</p>

<p>When Aliases are in use, the virtual hosts file will have a ServerAlias directive for each site alias:</p>

<p><div class="codeblock"><code>ServerAlias example.com<br />ServerAlias www.my-old-domain.com</code></div></p>

<p>In addition to the above directives, when redirection is off, Aegir creates a symlink in the platform/sites/ folder for each alias that points to the folder associated with the primary domain</p>

<p><div class="codeblock"><code>lrwxrwxrwx 1 aegir aegir&nbsp;&nbsp; 15 Oct 31 23:25 example.com -&gt; <a href="http://www.example.com<br />drwxr-xr-x" title="www.example.com<br />drwxr-xr-x">www.example.com<br />drwxr-xr-x</a> 7 aegir aegir 4096 Oct 31 23:02 <a href="http://www.example.com<br />lrwxrwxrwx" title="www.example.com<br />lrwxrwxrwx">www.example.com<br />lrwxrwxrwx</a> 1 aegir aegir&nbsp;&nbsp; 15 Oct 31 23:25 <a href="http://www.my-old-domain.com/" title="www.my-old-domain.com">www.my-old-domain.com</a> -&gt; www.example.com</code></div></p>

<p>When redirection <strong>is</strong> enabled, Rewrite directives are added to the virtualhost to send http requests to the primary domain that the aliases are associated with:</p>

<p><div class="codeblock"><code>ServerAlias example.com<br />ServerAlias <a href="http://www.my-old-domain.com<br />RewriteEngine" title="www.my-old-domain.com<br />RewriteEngine">www.my-old-domain.com<br />RewriteEngine</a> on<br />RewriteCond %{HTTP_HOST} !^www.example.com$ [NC]<br />RewriteRule ^/<em>(.</em>)$ http://www.example.com/$1 [L,R=301]</code></div></p>

<p>The symlinks are not required in this case.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-385.html?destination=node%2F60%23comment-form">Login</a> or <a href="../../../../../user/register/index-385.html?destination=node%2F60%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../60/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-42" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../42/index.html">Resetting site password</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The 'Reset password' task is a simple one: it allows you to generate a new one-time login URL for a site.</p>

<p><img src="../../../../../sites/community.aegirproject.org/files/login_link/index.png" />The one-time login URL is bound to the account of the admin user (uid 1) of a site. It cannot be used to reset the password of another user on the site.</p>

<p>This can be handy in cases where the password for the admin user of a site has been forgotten. The 'Reset password' task is re-runnable and provides a convenient method of re-gaining access to a website from within Aegir.</p>

<p>In normal situations, viewing a site node shows a 'Go to' clickable link that takes the user to the site in question.</p>

<p>When the Reset password task has been run on a site, the 'Go to' link automatically gets changed to become a 'Login to' link that is the one-time login URL.</p>

<p>Once the one-time login URL has been clicked, this link returns to being a 'Go to' link.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-387.html?destination=node%2F42%23comment-form">Login</a> or <a href="../../../../../user/register/index-387.html?destination=node%2F42%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../42/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-23" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../23/index.html">Migrating/upgrading and renaming websites</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>One of the most powerful features of Aegir is the way it can help you to upgrade large numbers of websites safely.</p>

<p>For example, you may have dozens of sites hosted on a drupal 6.18 codebase. But suddenly the 6.19 release comes out with vital security fixes. Previously you'd have to go to each site, back up the files and database, upload the new codebase, run update.php, check everything worked and then onto the next site.</p>

<p>With Aegir you simply click a button in the frontend and it handles everything. This is called 'migrating' sites in Aegir terminology, because it might be used in more cases than simply upgrading the main codebase. For example you may have different 'platforms' with different mixes of contrib modules and themes and charge clients for tiers of 'basic', 'advanced' and 'gold' packages. When they choose to move from basic to advance, you simply migrate their site.</p>

<p>Other examples of using Migrate include:</p>

<ul>
<li>moving a standard Drupal site to a Pressflow platform for performance enhancements</li>
<li>renaming a site (giving it a new URL entirely)</li>
<li>the Clone feature (discussed in later chapters) is a subsidiary of Migrate, except it doesn't move but copy the site.</li>
</ul>

<h1>How to migrate a site</h1>

<h2>Enabling the feature</h2>

<p>Aegir version 2.x</p>

<ul>
<li>The "Site migration" feature is enable by default. So you don't have to enable it. </li>
</ul>

<p>Aegir version 1.x</p>

<ul>
<li>By default, Migrate is not enabled in Aegir after a fresh installation, as it is an optional feature. This means that the 'Migrate' button is not immediately present in the list of available tasks for a site.</li>
<li>To enable the Migrate feature, simply go to <code>/admin/hosting/features</code> and check the Migrate feature. Submit the form and then return to the site node, and you'll see that the Migrate task is now available.</li>
</ul>

<h2>Migrating a site - the Migrate form</h2>

<p>In the Aegir frontend, click on the website that you want to migrate. As per usual, in the 'Site view' you are presented with some summary information about the site, as well as a list of available tasks. Click the 'Run' button for the 'Migrate' task. A modalframe dialog will appear in your browser.</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/migrate/index.png" /></div>

<p>The Migrate form has several options. These are:</p>

<ul>
<li><p>Domain name (this is already the domain of the existing site. If you are intending to simply rename the site (give it a new URL altogether), you can simply change this field and leave the target platform be the 'current platform'. This will make the site accessible under the new URL.</p></li>
<li><p>Platform selection. A radio selection of available platforms on the Aegir system. Certain platforms will be un-selectable. This is because they contain 'Errors' - that is, they contain versions of packages (modules, libraries or themes) that are of an older version than that of the original platform. You cannot upgrade a site to older versions of the same package.</p></li>
</ul>

<h2>Upgrades, warnings, errors?</h2>

<p>What's this about upgrades, warnings and errors on each potential platform to migrate the site to?</p>

<p>Up until now you might be forgiven for thinking that Aegir is simply automating the install of sites and creating Apache vhosts and databases.</p>

<p>The truth is, Aegir actually is a much more advanced tool than that. It keeps a running registry in its database of your Platforms and Sites and what modules, themes, libraries and install profiles are available on platforms and installed on sites.</p>

<p>Not only does it keep track of what these packages are, but it also keeps track of what version of a package is installed (say, Views 6.x-2.11), and whether it is actually an enabled module or not.</p>

<p>The Migrate task, despite its name, is the tool for upgrading your site, because the Migrate code actually invokes the command <code>drush updatedb</code> in the backend, automatically. <code>drush updatedb</code> is the equivalent of running '/update.php' in your browser against your site.</p>

<p>In this way, when the time comes (and it always does) to Migrate your site, Aegir is able to intelligently analyse the available platforms on the system and make a sane judgement on where you can upgrade your site to. The logic is as follows:</p>

<ol>
<li>Current platform has module X, schema version 6002 and 6003</li>
<li>Site module has module X, schema version 6003 installed</li>
<li>Target platform A has module X, schema version 6002. Site cannot be upgraded to an older schema version. An error.</li>
<li>Target platform B does not have module X at all. Theoretically this is still a possible upgrade, but module X will probably be disabled by Drupal's upgrade logic during the process. This is a warning.</li>
<li>Target platform C has module X, schema version 6003. Site is upgradeable, there is no change.</li>
<li>Target platform D has module X, schema version 6004. Site is upgradeable. There is a module update to be performed.</li>
</ol>

<p>In the logic laid out above, examples 4, 5 ,6, or platforms B, C and D would be listed as valid target platforms. Target platform D would actually upgrade the site's module to a newer version, which may involve database updates.</p>

<p>To view the schema differences between current and target platforms in this way, click the 'Compare platforms' link against each target platform in the form.</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/compare/index.png" /></div>

<p>If your intention is to upgrade your site between versions of any package (this can include core or contrib!), you need to make sure the relevant packages are present and up to date on the platform you want to migrate to. Aegir can only try and make this judgement call based on the information you feed into the system by adding and verifying platforms with the correct components.</p>

<p>If you've had to download extra packages to the target platform to make them possible candidates for an upgrade, you may need to visit that platform node in the Aegir frontend, and run the Verify task against the site (this is a re-runnable task). This updates Aegir's registry of information about all the packages on the platform.</p>

<h2>Migrating</h2>

<p>Select the relevant target platform and click 'Migrate' to submit the form. The modalframe dialog will close and Aegir will spawn a new Migrate task into the Task queue, and process it on the next cron run.</p>

<p>The process of Migration in the backend occurs automatically, like all Aegir tasks, and is as follows:</p>

<ul>
<li>The site is placed into maintenance or 'site offline mode' as a precaution. Safety first!</li>
<li>A 'backup' task is implied silently. The site and its database are backed up into a tarball. Still safety first!</li>
<li>Depending on the settings sent to the backend (are we migrating the site under its current name, or just renaming the site, or renaming the site and migrating as well), various metadata regarding the site is updated</li>
<li>If we are moving to a new platform (upgrading, not just renaming), the backup tarball that was made earlier, is used in a silent 'provision-deploy' command, which essentially unpacks the tarball into the target platform and creates a new database and database user for the site, importing the database dump that was made in the backup</li>
<li>The deploy task above, invokes <code>drush updatedb</code>, effectively upgrading the site by calling all hook_update() functions. </li>
<li>Various bits and pieces are fixed up, such as paths to files in the 'files' table of the database.</li>
<li>Caches are cleared</li>
<li>A verify task is run, settings.php and apache vhost are updated to reflect the new path (new platform) and new database credentials, site gets brought back out of maintenance mode.</li>
<li>If all went well and nothing has fatally errored here, we remove the old copy of the site from the previous platform (it wasn't touched til now, other than backing it up)</li>
</ul>

<h2>Potential errors?</h2>

<p>If something goes wrong during all this work, the metadata reflecting where the site is located on the system (which platform it is on) and other information is reverted. The task will become 'red' in the task queue, indicating an error.</p>

<p>Aegir will attempt to restore the site's vhost and settings.php to reflect the original platform and database credentials, and bring the site out of maintenance, in an effort to return the site to a state where it was prior to the Migrate.</p>

<p>The user may be requried to manually recover from this error depending on what has occurred. Nonetheless, remember that a backup was made early on, and this can be used to restore the site easily.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-298.html?destination=node%2F23%23comment-form">Login</a> or <a href="../../../../../user/register/index-298.html?destination=node%2F23%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../23/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-658" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../migration-tips/index.html">Migration Tips</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>In the context of sites, migration is the task of moving a site from one platform to another.  Migration is the Aegir-preferred method for applying updates to modules and certainly to core.  In other words, to upgrade core or modules, create a new platform with the upgrades, then migrate sites to the new platform.</p>

<p>Ideally, a migration requires nothing more than a mouse-click on the Migrate button on the Site node in your Aegir for the site you want to migrate.  If you've prepared your destination platform properly, a migration will be this simple.  Proper preparation, therefore, is vital.</p>

<p>To prepare a new platform to be a destination for migration, consider at least the following:</p>

<ul>
<li>The directory structure for your modules and themes must be the same on the source and destination platforms.  For example, if the modules on the source platform are in

<div class="codeblock"><code>../platform-abc/sites/all/modules/contrib</code></div>
then the destination platform must have its modules also in this directory.
</li><li>You may need to clear the Drupal cache on the source platform to avoid migration errors.  Upgrades to Aegir in the future may handle this automatically, so be aware of the version of Aegir you're running and whether it includes upgrades to address this issue.
</li></ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-37.html?destination=node%2F658%23comment-form">Login</a> or <a href="../../../../../user/register/index-37.html?destination=node%2F658%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-37.html?destination=node%2F658%23comment-form">Login</a> or <a href="../../../../../user/register/index-37.html?destination=node%2F658%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1766" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/renaming-aegir-hostmaster-site-itself/index.html">Renaming the Aegir hostmaster site itself</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>From <a href="../../../../363/index.html" title="http://community.aegirproject.org/node/363">http://community.aegirproject.org/node/363</a> :</p>

<p>WARNING: Be sure to have a good backup (which you can restore) before attempting this.</p>

<ol>
<li>manually edit the crontab for aegir to stop the periodic execution of the command 'hosting-dispatch' (the drush command 'hostmaster-pause' did not exist on my system)
</li><li>delete the hostmaster site (drush @hostmaster provision-delete)
</li><li>change the alias (drush provision-save @hostmaster --uri=hostmaster2.example.com --aliases=hostmaster.example.com)
</li><li>deploy the backup (drush @hostmaster provision-deploy /var/aegir/backup/hostmaster.example.com...tgz)
</li><li>checked that all changes appeared correct - YES
</li><li>Reneabled the hosting-dispatch task by editing the crontab again
</li><li>ran a verify task against the new hostmaster site. Noticed that the site is listed on the site page with the old domain name. The verify failed.
</li><li>Found that the verify task had created a new entry in the hostmaster-6.x-1.7/sites directory for the old domain name. I removed this created directory. I found and edited (using phpMyAdmin) the relevant entries in the node and node revision tables for the hostmaster site to update the domain name (change the title field). The hosting_site_alias table may also need to be updated if you have site aliases.
</li><li>The verify task also seemed to have regressed the @hostmaster alias file (~/.drush/hostmaster.alias.drushrc.php) as it had the URI and aliases details from the old site back in it. I edited this file to return these items to their new values.
</li><li>The verify task now completed successfully and all seems to be working correctly.
</li></ol>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-388.html?destination=node%2F1766%23comment-form">Login</a> or <a href="../../../../../user/register/index-388.html?destination=node%2F1766%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../1766/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-24" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../24/index.html">Cloning sites</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Aegir provides an easy method of making entire copies of a site. This includes the actual site files, modules and so on, as well as a copy of the actual database.</p>

<p>This feature is called 'Clone' in Aegir, because it is a method of duplicating a site with a new URL or 'site name'.</p>

<p>The feature is very closely linked to the <a href="../../../../23/index.html">Migrate</a> feature because it is almost the same, except that rather than move the site, it leaves the existing site in place and just copies it to a new name.</p>

<p>For this reason, enabling the Clone feature also enables the Migrate feature.</p>

<h2>Enabling Clone</h2>

<p>The Clone feature is disabled by default on a fresh Aegir installation. To enable it, visit <code>/admin/hosting/features</code> in your Aegir frontend, check the 'Clone' box and submit the form.</p>

<p>Now when you visit a site node in your frontend, you'll see there's a 'Clone' button in your list of available tasks for the site.</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/clone/index.png" /></div>

<h2>Cloning a site</h2>

<p>To clone a site, simply click the Clone button. A modalframe dialog will appear with a form. If you are familiar with the Migrate feature, you'll likely notice the similarities between the two forms.</p>

<p>The clone form has these options:</p>

<ul>
<li><strong>Domain name</strong> - this is the URL for the new site, which must be unique.</li>
<li><strong>Platform</strong> - this is the target platform to clone the site to. It may be the current platform or a different platform that meets the requirements for hosting this site (has all the correct or newer versions of relevant modules)</li>
<li><strong>Database server</strong> - this option is only available if you have a remote database server configured, otherwise it is implied.</li>
<li><strong>Site aliases</strong> - If you have the <a href="../../../../60/index.html">Site Aliases</a> feature enabled, you are also able to set new Site Aliases for this clone at this point. If the original site also had aliases, you will have to change or remove the aliases that load in this form before you can submit it.</li>
</ul>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/clone_form/index.png" /></div>

<p>As with the Migrate form, you can view the package comparison table between the current platform of the original site and that of a target platform, by clicking the 'Compare platforms' link. You can only clone a site to another platform if it meets the requirements for successfully hosting that site. In other words, the target platform has to contain the same or newer versions of modules. If the packages are missing on the target platform, those missing modules may be disabled.</p>

<p>Once you have made your selection and submitted the form, a 'Clone' task is spawned and added to the Task queue ready for dispatching.</p>

<h2>What Clone does</h2>

<p>The Clone task makes the following actions in the system:</p>

<ul>
<li>Makes a backup of the original site. This tarball will be used to 'deploy' a copy of the site</li>
<li>Generates a new Drush alias for the new site</li>
<li>Deploys the backup tarball to the new location as a new site</li>
<li>The new site is imported and verified into the Aegir system, and relevant configurations are saved (HTTP vhost file, etc)</li>
</ul>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/clone_import/index.png" /></div>

<h2>When might I want to use Clone?</h2>

<p>Clone can be a very useful tool in a variety of situations. Commonly, people use Clone for:</p>

<ul>
<li>Testing what a 'Migrate' might do to a site, without migrating it. In other words, Clone can be used as a simulation tool to anticipate results of upgrading a site to a new release or build safely.</li>
<li>If you have a 'template' site, often with a custom install profile, and anticipate having to generate multiple sites that are very similar, you can use Clone to rapidly do this.</li>
<li>Cloning a live site to a 'development' version of a site, especially to a development platform residing on a remote 'development' web server, can be a useful and fast method of working on a site by ensuring the dev environment has the latest database and files from production.</li>
</ul>

<h2>Is there any relationship between the original and cloned site?</h2>

<p>Currently there is no real relationship between the original site and any of its clones.</p>

<p>In future, Aegir development is likely to develop natural relationships between these sites, which will allow for 'rules' to be established, for example</p>

<ul>
<li>being able to regularly 're-clone' a site 'over the top' of previously-made clone, or</li>
<li>automatically schedule clones after the original site has been migrated (upgraded) to keep a clone 'up to date' with the original.</li>
</ul>

<p>Other uses may develop in time.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-302.html?destination=node%2F24%23comment-form">Login</a> or <a href="../../../../../user/register/index-302.html?destination=node%2F24%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../24/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-25" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../25/index.html">Disabling and Enabling sites</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Aegir provides a method for sites to be temporarily 'disabled'. This means preventing all access to a site, but in a way that it can be re-enabled later.</p>

<p>Think of disabling a site in a similar fashion to placing a site under Maintenance mode, but that instead of a 'Site offline' message, a request to the site is redirected to a special page under the main Aegir frontend's URL, and a 'Site disabled' message is shown instead.</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/disable/index.png" /></div>

<p>Aegir makes no presumptions about why you may wish to disable a site. Use this feature at your own discretion.</p>

<h2>How to Disable a site</h2>

<p>To disable a site, simply click on the site node in the Aegir frontend. In the list of available tasks for this site, click the 'Disable' button. A modalframe dialog will load, prompting you to confirm if you really wish to disable the site. Confirm and submit the form to spawn a 'Disable' task to the queue to take this site offline.</p>

<h2>How to Enable a site</h2>

<p>Once your site has been disabled, the list of available tasks has now radically changed in the site node: you now have only the option to Delete the site or Enable it again.</p>

<p>To re-enable a disabled site, simply click Enable. The site will be brought back out of hibernation and become live again.</p>

<h2>Disabling before deleting</h2>

<p>In Aegir's default configuration, you must first disable a site before you may delete it. This is meant as a precaution - if considering deleting a site, it forces you to think about whether you really want to, before accidentally clicking Delete and irreversibly removing your site.</p>

<p>But don't worry - Aegir always silently makes a backup of the site before disabling (or deleting) a site.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-38.html?destination=node%2F25%23comment-form">Login</a> or <a href="../../../../../user/register/index-38.html?destination=node%2F25%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-38.html?destination=node%2F25%23comment-form">Login</a> or <a href="../../../../../user/register/index-38.html?destination=node%2F25%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-45" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../45/index.html">Backup and Restore</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir system provides a convenient method of backing up sites, and restoring sites from those backups.</p>

<p>Like most other Aegir functionality, the Backup feature comes in the form of a task, aptly named 'Backup'. It is one of the core features of Aegir and thus is always available for a site, out of the box.</p>

<p>Backing up a site in Aegir is twofold: the site folder (containing the settings.php, files dir and so on) is added to a tarball along with a database dump of the site and stored in <code>/var/aegir/backups</code> on the master Aegir server.</p>

<p>In the event that the website or database is a remote server, those relevant components are synced down to the master Aegir server to be tarballed up. Only the master Aegir server stores backups of a site. (This is known as a 'spoke' model, as opposed to a 'mesh' or distributed model, and suits the Aegir system at this time).</p>

<p>The tarball generated for a site can be used for a number of things: restoring a site from that backup via the 'Restore' task, or from the command line using the <code>provision-deploy</code> command for advanced users as a method of quickly importing a site onto a system.</p>

<p>Other cases whereby a backup task is generated and its tarball used are when a site is being Migrated (upgraded) or being Cloned as a new site, but that is outside the scope of this chapter.</p>

<h2>Backing up</h2>

<p>When viewing the site node of a site in the Aegir frontend, click the 'Backup' button in the list of available tasks for this site.</p>

<p>A modalframe dialog appears, prompting for confirmation, as well as providing an editable Description field which you may fill out. This field is optional, designed only to aid you in future if you seek a reason for why a backup was made.</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/backup/index.png" /></div>

<p>Once the form is submitted, a Backup task is spawned and added to the Task queue for dispatching by the backend.</p>

<p>The full output of a Backup task is viewable in the task log. Extra security precautions are built into Aegir so that the 'mysqldump' command uses file descriptors to hide exposing the database user's password in the running process and output of the task.</p>

<h2>Restoring from a backup</h2>

<p>Restoring a site from a backup is simple and follows the same pattern as backing up. Simply click the 'Restore' button from the list of available tasks for a site. A modalframe dialog will load, and the form offers a list of radio items. These are the backups that have been made for a site, in the format of 'Date/time - Reason'.</p>

<p>Where no custom reason was given for a backup, the message 'Generated on request' is shown instead.</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/restore/index.png" /></div>

<p>Choose a backup to restore from and submit the form. A 'Restore' task will be spawned and added to the Task queue for dispatching by the backend.</p>

<h2>What happens during a Restore task</h2>

<p>The restore process</p>

<ul>
<li>puts the site under 'maintenance mode' temporarily (safety first!)</li>
<li>generates a new backup of the site before restoring to it (still safety first!). This new backup will be available in the list of backups if you ever re-run the Restore task, and will carry the description 'Generated before being restored to a previous version'.</li>
<li>uses the implied <code>provision-deploy</code> command in the backend to unpack the tarball, </li>
<li>create a new database and import the database dump into it, </li>
<li>create a new database user, </li>
<li>spawn a verify task silently, which will

<ul>
<li>re-write the settings.php,</li>
<li>sync the data if necessary to a remote platform, </li>
<li>re-generate the web server's vhost configuration file for this site,</li>
<li>finally reload the web server</li>
</ul></li>
</ul>

<h2>Automatic backups and purge</h2>

<p>There are contributed modules that can handle automatic creation and deletion (clean-up / purging) of backups:</p>

<ul>
<li><p>For Aegir 2.x</p>

<ul>
<li><a href="https://www.drupal.org/project/hosting_site_backup_manager">Hosting Site Backup Manager</a></li>
</ul></li>
<li><p>For Aegir 1.x</p>

<ul>
<li><a href="http://drupal.org/project/hosting_backup_queue">Hosting backup queue</a></li>
<li><a href="http://drupal.org/project/hosting_backup_gc">Hosting backup garbage collection</a>.</li>
</ul></li>
</ul>

<p>Eventually these contributed modules will be incorporated into Aegir core.</p>

<p>It is also easy to set up a cronjob to automatically run backup tasks (that can still be used to restore from) for all your sites. To do this, download and set up mig5's <a href="http://www.migueljacq.com/content/aegir-bulk-backup-script-updated">bulk backup script</a>.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-39.html?destination=node%2F45%23comment-form">Login</a> or <a href="../../../../../user/register/index-39.html?destination=node%2F45%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-39.html?destination=node%2F45%23comment-form">Login</a> or <a href="../../../../../user/register/index-39.html?destination=node%2F45%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-26" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../26/index.html">Deleting sites</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>There may come a time when you want to remove a website from your Aegir system and your server altogether. As you'd expect, Aegir handles this for you too. It ships with a 'Delete' task that is capable of removing the site from the Aegir system, as well as carrying out backend tasks to remove the site from the filesystem and web/db servers.</p>

<p>The Aegir frontend is a Drupal site in itself, and sites are represented in that system as nodes. New users that are familiar with Drupal often make the mistake of thinking that the process of deleting a site is like deleting a node in Drupal, and attempt to delete the site node (or are confused by the fact we hide the Delete button for this reason).</p>

<p>This is an incorrect method of deleting a site, and doesn't actually spawn a task to clear away the site from the server at all. Below are the steps to correctly remove a site.</p>

<h2>Method 1 (default) - Disable the site first</h2>

<p>Part of this confusion can stem from the fact that when viewing a site node in Aegir, the Delete button is not actually present in the list of available tasks by default:</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/delete_disablefirst/index.png" /></div>

<p>This is because, in the default Aegir configuration, you must run the Disable task against a site before you may Delete it. This logic is in Aegir to help users avoid accidentally deleting a site either by accidentally processing the task (despite having to confirm it first) or to prompt the user to think a little bit more on the decision before irreversibly blowing away the data.</p>

<p>The decision stems from Aegir development policy of being uncomfortable making such risky actions on your data. While it is possible to delete a site, we'd like you to really be sure that's what you want to do.</p>

<p>Once you Disable a site (<a href="../../../../25/index.html">see the Disable section prior to this chapter</a>), the list of available tasks is modified to only offer an Enable or Delete button. At this point you can run the Delete task and permanently remove your site.</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/delete/index.png" /></div>

<h2>Method 2 (optional) - Delete without Disabling</h2>

<p>The first method above is the default Aegir configuration. However, some users might be too confused by the lack of the Delete button altogether, which may not be ideal for your situation.</p>

<p>For this reason, Aegir also provides a configurable setting allowing a site to be Deleted without requiring a Disable first. This option makes the 'Delete' button appear in the list of available tasks, even when a site is currently in an Enabled state.</p>

<p>To activate this setting, visit <code>/admin/hosting/settings</code> on your site and uncheck the checkbox that is titled "Require site to be disabled before deletion".</p>

<p>Re-visit the site node and you'll see that the Delete button is now present and clickable, alongside the Disable button.</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/delete_nodisable/index.png" /></div>

<h2>The deletion process</h2>

<p>When you click Delete and confirm your intentions in the modaldialog that loads, a 'Delete' task is spawned and added to the Task queue to await dispatch by the backend system.</p>

<p>The process runs through a series of steps to remove this site from your server. These are as follows:</p>

<ul>
<li>Make a backup of the site and its database for the last time (safety first, remember!</li>
<li>Drops the site database</li>
<li>Revokes the GRANT to that database for the database user (effectively deleting the database user)</li>
<li>Deletes the site folder and everything inside it, from the platform that the site was hosted on</li>
<li>Removes the Drush alias file for the site</li>
<li>Removes the site's web server vhost configuration file</li>
<li>Reloads the web server</li>
<li>Sets the site's status to 'Deleted' in the Aegir system. Note: it does not delete the site node from the Aegir system. This is by design: the site node is retained in the Aegir database for historical purposes (you could customise Aegir by adding the ability to run a report or a View of all deleted historical sites, for example)</li>
<li>The deleted status of the site, removes it from the list of sites in the 'Sites' page (and thus front page) of the Aegir system.</li>
<li>Historical tasks run on the site remain in the Task queue history.</li>
</ul>

<h2>Manually deleting the site</h2>

<p>Sometimes something goes wrong during an Install or a Delete task and a site doesn't install or get deleted successfully. The Delete task cannot be run or re-run on this site because Aegir has no way of knowing just how much of it got deleted (whether the files are still there but not the database, for example). Re-running the Delete task is likely to fail because some of these steps listed above will not exit successfully on completion.</p>

<p>At the time of writing, no task in Aegir exists to 'force' a removal of a site without having to bootstrap it first, so some manual steps are required on your part to remove this site.</p>

<ul>
<li>Manually remove the site files on the server if they exist (i.e /var/aegir/platforms/drupal-6.16/sites/my-failed-site.com</li>
<li>Drop the database and revoke db user privileges associated with this site if it got created before failing (check the vhost  configuration file's 'SetEnv' parameters, or the settings.php if the credentials are uncloaked, for the site's database name and user)</li>
<li>Manually remove the Apache vhost file for this site if it is still present (in /var/aegir/config/server_master/apache/vhost.d/)</li>
<li>Manually remove the Drush alias for this site if it is still present (in /var/aegir/.drush/)</li>
<li>Enter the Aegir database from mysql and set the status of the node in the <code>hosting_site</code> table to -2 (deleted). For example, if your site node was nid 83 (the 'Edit' tab of the site node will tell you this), run <code>UPDATE hosting_site SET status = &#039;-2&#039; WHERE nid = 83;</code></li>
<li>Still in the Aegir database, delete the node record in the <code>hosting_context</code> table. For example, if your site node was nid 83 (as above), run <code>DELETE FROM hosting_context WHERE nid = 83;</code></li>
<li>Alternatively, if you want to even remove the node altogether from the system (not recommended), go to /node/83/delete in your browser on the Aegir frontend and delete the node. This will remove the site node and all associated task nodes from the system, as well as remove the entry from the hosting_site table in the database.</li>
<li>If you are using the SSL feature and had Encryption enabled for this site, you may also need to manually delete the SSL certificate folder located in <code>/var/aegir/config/ssl.d/[domain of site you are deleting]</code> and/or <code>/var/aegir/config/server_master/ssl.d/[domain of site you are deleting]</code>. Additionally you may also need to delete the entry for the domain you are deleting in the <code>hosting_ssl_cert</code> table of the Aegir database.</li>
<li>If you are using the DNS feature you may also need to remove the site's entry in the zone file by running the following command: <code>drush @server_master provision-zone rr-delete example.com sub.domain A</code></li>
<li>If your site has ssl support enabled you also need to remove ssl certificate from database issuing DELETE FROM hosting_ssl_cert WHERE ssl_key = 'your.site.domain';</li>
<li>Re-verify the Platform node where the Platform is the one where your site was hosted on. This will regenerate some metadata whereby the Platform believed it still had that site contained within it.</li>
</ul>

<p>If you need to manually remove the site's platform see the instructions here: <a href="../../../../27/index.html" title="http://community.aegirproject.org/node/27">http://community.aegirproject.org/node/27</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-384.html?destination=node%2F26%23comment-form">Login</a> or <a href="../../../../../user/register/index-384.html?destination=node%2F26%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../26/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-843" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../open-id-tips-and-tricks/index.html">Open ID tips and tricks</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <h2>Allowing multiple people to access User 1</h2>

<p>This approach depends on the <a href="http://drupal.org/project/openidadmin">OpenID Admin module</a>. Here are the drush commands to download and install it, and set an openid access:</p>

<pre><code>drush dl openidadmin
drush en -y openidadmin
drush openid-add 1 <a href="https://your.openid.server/your-open-id" title="https://your.openid.server/your-open-id">https://your.openid.server/your-open-id</a>
</code></pre>

<p>This can allow you to simplify development workflow and easily control who has access to User 1, without giving away that account's username and password.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-40.html?destination=node%2F843%23comment-form">Login</a> or <a href="../../../../../user/register/index-40.html?destination=node%2F843%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-40.html?destination=node%2F843%23comment-form">Login</a> or <a href="../../../../../user/register/index-40.html?destination=node%2F843%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1381" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/best-recipes-disaster-and-how-avoid-them/index.html">The best recipes for disaster and how to avoid them</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This is a short list of all those bad things you should avoid while still learning how to use Aegir system properly, compiled from many real-world issues, so you could enjoy reading about creative ways to destroy your sites or Aegir system instead of experience it.</p>

<p><strong>How to get all kinds of failed migrate or clone tasks?</strong></p>

<p>Very easy. Simply use sites/domain-name/modules space for your code. This will guarantee many half-broken migrations with duplicates of the same site existing in two platforms, with fatal errors because some required include file in some module no longer exists, or not yet exists, as all paths to sites/domain-name/modules change on the fly when either domain-name or platform used changes, so some entries in your site's system table will cause either failed and reverted tasks in Aegir or some nice WSOD, until you will repair registry with <a href="http://drupal.org/project/registry_rebuild" title="http://drupal.org/project/registry_rebuild">http://drupal.org/project/registry_rebuild</a>.</p>

<p>No, really, don't use sites/domain-name/modules for anything and save yourself headaches and frustration.</p>

<p>To help you understand this better, <a href="../../../../243/index.html#comment-152" target="_blank">let's quote mig5</a> - Aegir core developer: "Aegir doesn't track site-specific modules/themes in /sites /$yoursite /(modules|themes) because it's not possible to ever upgrade those modules (they are tarballed up and moved with the site on a Migration). For this reason it's unwise to store site specific modules in this directory as you'll never be able to upgrade them if you do your upgrades properly (via Migrations, to new target platforms). To have site-specific modules not in that directory, you should learn install profiles, and store the modules/themes in /profiles /$yourprofile /(modules|themes) for a site using that install profile. (...) I don't see us ever handling the upgrades of modules in /sites/$site, since that entire dir gets tarballed up and moved across. In fact we made a deliberate design decision to literally ignore those modules in the Aegir package system." We highly recommend to <a href="../../../../243/index.html" target="_blank">read all comments there</a>. There is also <a href="../../../../23/index.html" target="_blank">an excellent handbook entry</a> you should read to understand this better.</p>

<p><strong>How to break the site so even the Restore task will not help?</strong></p>

<p>To make that happen you need to forget about correct upgrade workflow and good habits, use Backup task in Aegir to create a pseudo-safe copy of your site, upload new contrib modules to your new platform and then use Migrate task to move/upgrade your site to the new platform. To make it even worse, you could then try to use Restore task if anything went wrong with the migration and this will either fail completely or it will revert your database, but it will leave the site in the new platform  because Restore task will never move the site back to the old platform, so all your previous backups are immediately useless, and you are locked in the new platform without any chance to rollback automatically.</p>

<p>OK, so what is the correct workflow for sites upgrades in Aegir? It highly depends on how you manage your code, but some general rules are always valid and we will list them below:</p>

<ol>
<li>Create or choose new platform.</li>
<li>Upload all your contrib modules and themes to the new target platform.</li>
<li>Re-verify the target platform in Aegir.</li>
<li>Clone your live site with some working subdomain in the old platform.</li>
<li>Re-verify old platform and also just cloned site.</li>
<li>Migrate cloned site to the new platform.</li>
<li>Check if the cloned site works without any issues.</li>
<li>If the step 7 above works, you can safely migrate also the live site.</li>
</ol>

<p>Note: if this is a Drupal core version upgrade, it is always better to split the upgrade in two parts: first migrate to the new core, but using the same contrib modules versions, and then migrate to the final target platform with newer contrib modules. This may help if you experience failed upgrades with mysterious errors like "Call to undefined function node_types_rebuild()" without any hint on which module causes the issue.</p>

<p><strong>How to break the site and lock it in the broken state in a one step?</strong></p>

<p>This sounds frightfully, but it is really easy to do. All you need is to skip the steps with creating and testing the sites clone in the existing platform first and simply use the Clone task to clone the site directly to the new platform. While this appears to be a handy shortcut, it is in fact one of the best recipes for disaster. Why? Because Aegir will not be able to properly check for all possible issues related to the contrib code and db updates to alert you before running the Clone+Migrate task. Yes, this kind of Clone task is in fact Clone and Migrate in a one step. It is very handy, but only when you already tested it with both old and new platform before. To stay safe, just avoid cloning the site to the different platform directly. Instead, clone it first in the existing platform, then migrate to the new platform, and finally re-verify it.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-389.html?destination=node%2F1381%23comment-form">Login</a> or <a href="../../../../../user/register/index-389.html?destination=node%2F1381%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../1381/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-20" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../20/index.html">Setting up a Platform</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><h2>What is a platform anyway?</h2>

<p>Platforms are a type of node in Aegir and often the source of confusion for new users. This is because the term or concept isn't really used explicitly outside of Aegir - Aegir is a system that suddenly makes Platforms 'make sense' to have.</p>

<p>The simplest definition of a Platform is a copy of Drupal core. That's really it. When you download a copy of Drupal from drupal.org, the result is what Aegir thinks of as a 'Platform'. No sites exist on it yet.</p>

<p>Before you can create a site using Aegir, you must first define the Platform. This tells Aegir where to store the site directory, settings.php etc on the system.</p>

<p>In short: first you create a Platform, and a site 'lives' on that platform, in exactly this fashion:</p>

<ul>
<li>drupal-6.19 (Platform)

<ul>
<li>/sites/yoursite.com/settings.php (site)</li>
</ul></li>
</ul>

<p>This abstraction is somewhat unique to Aegir in that it opens up a world of new opportunities for you. By managing Platforms or copies of Drupal core, and understanding what sites are on what copy of core, Aegir is capable of moving sites between platforms (which is effectively upgrading a site) - read more about this in <a href="../../../../23/index.html">Migrating/upgrading and renaming sites</a>.</p>

<h2>What else could be considered a platform?</h2>

<p>Anything that is more or less a copy of Drupal core is something Aegir considers a 'platform'. This thus includes any Drupal distribution, such as <a href="http://openatrium.com/">OpenAtrium</a>, <a href="http://pressflow.org/">Pressflow</a>, <a href="http://acquia.com/products-services/acquia-drupal">Acquia Drupal</a>, <a href="http://openpublishapp.com/">OpenPublish</a>, <a href="http://managingnews.com/">ManagingNews</a>, and so on.</p>

<p>The key difference between such distributions and a standard 'vanilla' copy of Drupal core is that these distributions tend to have
  * a custom install profile in the /profiles/ directory
  * a set of contrib or custom developed modules, libraries or themes shipped with the core or profile</p>

<p>If you build a copy of Drupal core and place your custom install profile in /profiles, this could be considered a Platform.</p>

<p>If you place your custom install profile in an existing Platform and re-Verify the Platform, that profile will now be recognised as an option when creating a site on that Platform.</p>

<p>Various 'versions' of Drupal, such as Drupal 5.x, Drupal 6.x or Drupal 7.x, are all considered separate Platforms in Aegir.</p>

<p>Drupal 4.x is not supported in Aegir.</p>

<p>Is this paradigm clear? 'Sites' are managed inside 'Platforms'. 'Platforms' are managed inside 'Servers'. 'Servers' are managed by Aegir. In this sense, Aegir manages all the rest too.</p>

<h2>Getting a Platform onto your server</h2>

<p>A number of techniques exist to put a platform on a server.</p>

<p><strong>Drush</strong></p>

<p>For a standard Drupal platform, the easiest is to simply use drush:</p>

<p><div class="codeblock"><code>php /var/aegir/drush/drush.php dl drupal-6.19</code></div></p>

<p><strong>Wget</strong></p>

<p>You can simply use the 'wget' command, for example:</p>

<p><div class="codeblock"><code>wget <a href="http://launchpad.net/prosepoint/trunk/0.23/+download/prosepoint-0.23.tar.gz<br />tar" title="http://launchpad.net/prosepoint/trunk/0.23/+download/prosepoint-0.23.tar.gz<br />tar">http://launchpad.net/prosepoint/trunk/0.23/+download/prosepoint-0.23.tar...</a> -zxvf prosepoint-0.23.tar.gz</code></div></p>

<p><strong>Version control</strong></p>

<p>You could use CVS, eg:</p>

<p><div class="codeblock"><code>export CVSROOT=:pserver:anonymous:anonymous@cvs.drupal.org:/cvs/drupal <br />cvs login <br />cvs co -d aegir/drupal-6.15 -r DRUPAL-6-19 drupal </code></div></p>

<p><strong>Manually</strong></p>

<p>You could download it on your PC and scp or FTP the files up onto your server.</p>

<p><strong>Drush Make</strong></p>

<p><a href="http://drupal.org/project/drush_make">Drush Make</a> comes installed on your Aegir system by default. You can use Drush Make to 'build' a platform, which does the job of fetching core and any other contributed or custom packages that you specify in a makefile.</p>

<p>You can even specify the URL or path to a makefile in the form you are given when adding a Platform node in the Aegir frontend, and Aegir will execute the Drush Make command in the backend and build it for you!</p>

<p>Explaining how to use Drush Make is outside the scope of this document. Consult the <a href="http://drupalcode.org/project/drush_make.git/blob_plain/refs/heads/6.x-2.x:/README.txt">README.txt</a> of Drush Make to learn the makefile syntax, or use a ready-made makefile available from the web. Some distributions such as OpenAtrium <a href="https://community.openatrium.com/documentation-en/node/1420">provide an example makefile</a> for you to build the distribution with.</p>

<h2>Platforms and remote web servers</h2>

<p>Aegir has a 'spoke' model when it comes to remote servers, whereby the <em>'master' Aegir server keeps a copy of all platforms and sites</em> and syncs changes outbound to remote servers that are running those platforms or sites, on tasks such as Verify etc.</p>

<p>Because of this, all platform names and paths must be unique, even across remote servers. This means you cannot have 'Drupal 7.0' in /var/aegir/platforms/drupal-7.0 on both Server A and Server B, because it can only exist once in that location on the master Aegir server. Platforms can't share the same name 'Drupal 7.0' because Aegir uses the platform name to define a 'context' by which it can refer to that server, and there can be no conflicts.</p>

<p>The exception to the unique path rule is when using web clustering (a collection of web servers running a platform), but even then, the platform is attached to the 'cluster' server and so is still 'unique' in this sense, that path cannot be reused for another platform running on another server somewhere else.</p>

<p>So when adding platforms to your filesystem and to Aegir, make sure that the platform is unique in name and path, so that other servers cannot try and use this reserved name/path for other platforms.</p>

<p><strong>More on the platform name space</strong></p>

<p>Migrating a site to a remote server illustrates this name space issue further: as an example; given that an Aegir hostmaster has two directories representing two platforms (and remembering that aegir does not migrate platforms, only sites):</p>

<pre><code>/var/aegir/platforms/plat-local  
/var/aegir/platforms/plat-remote  
</code></pre>

<p>and the remote server also  has:</p>

<pre><code>/var/aegir/platforms/plat-remote
</code></pre>

<p>then having aegir hostmaster migrate a site from platform <em>plat-local</em> to <em>plat-remote</em> will result in the site files being:<br />
1. moved from .../plat-local to hostmaster's local <code>.../plat-remote</code> and<br />
2. rsync'd to <code>.../plat-remote</code> on the remote server.</p>

<p>It is important to understand this if you are importing a working Drupal site into Aegir's control and Aegir hostmaster is on a different server from the working Drupal site.</p>

<h2>Do I have to have multiple platforms on my Aegir?</h2>

<p>No, you can simply have one platform or copy of Drupal core and provision all your sites to sit on the one platform. However, eventually you will want to upgrade your sites to a new copy of Drupal core, and rather than replace your core files in-place, it's recommended to build a new Platform with the newer copy of core, and use the <a href="../../../../23/index.html">Migrate task to move your sites (upgrade) onto the new code.</a></p>

<h2>Adding the Platform node</h2>

<p>Now that you've got your Platform on your server, or you know where and how you're going to do it (say, with Drush Make), it's time to tell Aegir about your new Platform.</p>

<p>To do so, add a new node of type 'Platform' in your Aegir frontend. Typically this is most easily done by visiting Create Content &gt; Platform in the Admin Menu.</p>

<p>The Platform node form has several fields required for giving Aegir information about your platform. These are:</p>

<ul>
<li>Name (a descriptive name for your platform. You very likely want this to be something like "Drupal 6.19".)</li>
<li>Publish Path (the path on the filesystem where the platform is, or will be when Drush Make builds it. This must be the absolute path, for instance '/var/aegir/drupal-6.19')</li>
<li>Makefile (the path on the filesystem to a makefile that will be used to create the platform.)</li>
</ul>

<p>Once you have completed entering this information, you can click the Save button. A 'Verify' task will be spawned and added to the Task queue (visible in the right sidebar). The backend will then parse this new platform and build up a registry of information about it, such as what version of Drupal it is, as well as what versions of install profiles, modules and themes are present on that platform.</p>

<p>Certain system configurations, such as Apache configurations similar to the .htaccess file that comes with Drupal, will be written to the filesystem, permissions checked and adjusted where necessary, and services restarted.</p>

<p>Now that you have a platform or codebase that Aegir is aware of, you can now proceed to install or import sites onto that platform!</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-304.html?destination=node%2F20%23comment-form">Login</a> or <a href="../../../../../user/register/index-304.html?destination=node%2F20%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../20/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-44" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../44/index.html">Verifying servers, platforms and sites</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>One of the common tasks available to all three of the major entities in Aegir (Servers, Platforms and Sites) is the Verify task.</p>

<p>You can think of the Verify task as a sort of routine 'sanity check' of that specific entity, with a sort of checklist of expected behaviour with which it runs through to confirm that the entity is operating as normal.</p>

<p>The Verify task also can be used to regularly 'sync' your platform or site with the Aegir package registry, to keep it up to date on whether any modules have changed (been removed or enabled/disabled). This will aid running Migration and Clone tasks, since Aegir needs to have a precise knowledge of what modules, themes or profiles are on the system before it can accurately judge whether an upgrade is possible.</p>

<p>It is recommended to run the Verify task on your entities routinely to keep them in sync with the Aegir database, and to run a Verify of your site, current platform and target platform prior to attempting a Migration or Clone task.</p>

<h2>What happens in a Verify task?</h2>

<ol>
<li><p>Servers</p>

<ul>
<li>When you add a new server node in the Aegir frontend, a Verify task is spawned for the first time.</li>
<li>the configuration directories are created if they don't exist and set to the correct permissions, or set to the correct permissions if they already existed but were incorrectly set</li>
<li>if the server is the master server, some additional configuration and backup directories are created</li>
<li>generates or updates a Drush alias file for the server.</li>
<li>some configuration directories are synced from the master server to remote servers</li>
<li>Checks that new databases and database users can be created</li>
<li>Checks that the HTTP web server can be restarted</li>
</ul></li>
<li><p>Platforms</p>

<ul>
<li>When you add a new platform node in the Aegir frontend, a Verify task is spawned for the first time. </li>
<li>If the platform directory didn't exist on the file system and a Drush makefile was provided, Drush Make will be called to build the platform in that location</li>
<li>If the platform directory didn't exist and no Drush makefile was provided, the task will fail with the error 'Does not contain a valid Drupal installation'.</li>
<li>Checks that the permissions are correct, at least of the 'sites' folder of the platform directory (so we can create new sites here)</li>
<li>Searches for existing sites on the platform that are not yet in the system. These sites will be 'imported' into Aegir.</li>
<li>Scans the platform and builds or updates the package registry in the Aegir database. </li>
<li>Generates or updates a Drush alias for the platform, and a drushrc.php file in the platform's directory root.</li>
<li>Reads in the platform's .htaccess file into a platform-wide web server vhost configuration file.</li>
<li>Restart the web server</li>
</ul></li>
<li><p>Sites</p>

<ul>
<li>When you add a new site in the Aegir system, an Install task is spawned, This is contrasted with the above entities which spawn only Verify tasks initially.</li>
<li>Scans the site and builds or updates the package registry in the Aegir database.</li>
<li>Creates important directories in the site folder, such as 'files'. Sets or corrects the appropriate permissions </li>
<li>Manages/updates any site aliases (symlinks, redirects etc)</li>
<li>Re-generates the settings.php </li>
<li>Re-generates the site's web server vhost configuration file</li>
<li>Re-generates the site's drushrc.php and a Drush alias</li>
<li>Clears caches.</li>
</ul></li>
</ol>

<p>You can run or re-run the Verify task at any time on a server, platform or site, and it is encouraged to do so.</p>

<p>Certain tasks, such as 'deploy' when a site is being imported, automatically imply a verify of the site.</p>

<p>Each Verify task, like all tasks generated by Aegir, emit a 'task log' available for review after the task has completed (or failed).</p>

<p>If a Verify task fails, and the task log does not provide enough information to help you resolve the problem, trying running drush @example.org provision-verify --debug from the command line to find out what caused the problem. Remember to replace 'example.org' with the URL of the site you are trying to verify.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-41.html?destination=node%2F44%23comment-form">Login</a> or <a href="../../../../../user/register/index-41.html?destination=node%2F44%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-41.html?destination=node%2F44%23comment-form">Login</a> or <a href="../../../../../user/register/index-41.html?destination=node%2F44%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-27" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../27/index.html">Locking and Deleting platforms</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Platforms, like sites, have tasks that can be performed against them, however these tasks are smaller in number and generally more simple.</p>

<p>Some tasks that are available to platforms out of the box are Lock/Unlock and Delete.</p>

<h2>Lock</h2>

<p>The lock task is simply a conceptual protection placed over a platform so that new sites can't be installed on that platform.</p>

<p>It doesn't actually modify anything on the filesystem or on the platform itself, but merely changes the status of the platform in the Aegir database. Once a platform is considered 'locked', it no longer appears in the New Site form when adding a new site.</p>

<p>You might choose to Lock a platform if there is something wrong with that platform and you want to prevent new sites from being added to it by one of your clients or users, or you want to 'hide' the platform for some other reason (perhaps awaiting a release date before allowing new sites).</p>

<h2>Unlock</h2>

<p>To unlock a platform that has been locked, simply click the Unlock button and the status of the platform will be switched back to an Enabled state.</p>

<h2>Delete</h2>

<p>The Delete task is similar to that of sites. The delete button allows you to completely remove a platform from your filesystem irreversibly.</p>

<p>This can be handy if you engage in a build management methodology that involves making regular new platforms to upgrade your site to. It is easy to amass large numbers of platforms on the filesystem, so the Delete task was born to deal with that problem.</p>

<p>A platform can only be deleted if there are no sites currently provisioned on it. The task will fail before deleting anything if it detects that there are sites in the 'sites' directory of that platform.</p>

<p>You must migrate these sites off to a valid new platform before you can delete such a platform.</p>

<p>Unlike site deletions, there is no backup made of a platform (because it's not bootstrappable by Drush), so be careful with this task: there is no going back!</p>

<p>It is recommended to make regular filesystem backups outside of Aegir altogether, and to use the Lock task to temporarily 'disable' a platform from use if you are unsure whether you want to delete it, but don't want it shown on the Aegir frontend.</p>

<h2>Manually deleting a platform</h2>

<p>Similarily to <a href="../../../../26/index.html">deleting sites</a>, sometimes something goes wrong during a Delete task and the platform doesn't get completely removed. Often this is caused by permissions problems on the platform (i.e something owned by a different user that the aegir user can't remove).</p>

<p>The Delete task sometimes cannot be re-run in this situation. In which case,:</p>

<ul>
<li>Manually remove the platform files on the server if they exist (i.e /var/aegir/drupal-6.19)</li>
<li>Remove the Drush alias for this platform if it is still present (in /var/aegir/.drush/)</li>
<li>Remove the platform configuration file from /var/aegir/config/server_master/apache/platform.d (and the same for the other server_ directory if the platform was hosted on a remote webserver)</li>
<li>Go to e.g. /node/123456/delete in your browser on the Aegir frontend and delete the node. This will remove the platform node and all associated task nodes from the system, as well as remove the entry from the hosting_platform and hosting_context table in the database.</li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-390.html?destination=node%2F27%23comment-form">Login</a> or <a href="../../../../../user/register/index-390.html?destination=node%2F27%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../27/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-256" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../256/index.html">Using drush_make to optimize workflow</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <h2>Introduction</h2>

<p>Once you understand <a href="../../../../217/index.html">why Aegir is a great tool</a> for developing and managing Drupal web sites you inevitably start looking for ways to optimize workflow.  mig5's article on <a href="http://mig5.net/content/drupal-deployments-workflows-version-control-drushmake-and-aegir">Drupal deployments and workflows</a> provides great insight on managing platforms, profiles and sites using Aegir, version control and the <a href="http://drupal.org/project/drush_make">drush_make</a> project.</p>

<h2>The challenge of managing platforms and profiles</h2>

<p>Whether you are using Drupal to develop bespoke web sites or vertical web applications with hundreds of instances (sites), it is not uncommon to be managing a mix of platforms and profiles.  These comprise <a href="http://drupal.org/download">community-contributed projects</a> that, in many cases, are frequently updated.  To protect the integrity of their platforms developers like to explicitly control which version of which project they use and when.  It can be time consuming to keep everything up to date.  Many contributed projects are available in versions compatible with multiple Drupal versions so this mix of platforms and profiles can be complex.</p>

<h2>Using drush_make to manage common and disparate code bases</h2>

<p>One of the really powerful features of drush_make is that it can operate <em>recursively</em>.  You invoke the <code>drush make</code> command on a local make file but if drush_make fetches a profile or project that includes another make file then this is parsed and additional packages are fetched.</p>

<p>A typical way that developers leverage this feature is when they want to have some projects available to the entire platform and some that are specific to one or more custom profiles that are part of the platform.  They achieve this by including a different make file with each profile repository.</p>

<p>Using make files with profiles works well when you want to manage distinct code bases that are specific to a site running under that profile. Only sites using profile 'foo' can see modules, themes or libraries located in subdirectories of the foo profile's directory.  However, using the <code>includes</code> option you can also reference a make file directly using a local path or a URL. The advantage of this is that you can maintain a make file that references the projects you use on every profile on every platform (e.g. views, cck, path etc.).</p>

<p>This is illustrated schematically below:</p>

<p><img src="../../../../../files/drush-make-architecture-2011-01-14_0/index.png" /></p>

<h2>Example make files</h2>

<p>Here are some example make files that illustrate the concepts described above:</p>

<h3>&lt;namespace&gt;_&lt;platform<sub>1</sub>&gt;.make</h3>

<div class="code-block">
<div class="codeblock"><code>core = 6.x<br />api = 2<br /><br />; drupal core<br />projects[drupal][version] = 6.20<br /><br />; platform projects<br />projects[webform][vesion] = 3.2<br />projects[workflow][version] = 1.4<br />projects[job_scheduler][version] = 1.0-beta3<br />projects[feeds][version] = 1.0-beta10<br /><br />; platform theme<br />projects[acme_theme][type] = &quot;theme&quot;<br />projects[acme_theme][download][type] = &quot;git&quot;<br />projects[acme_theme][download][url] = &quot;git@git.example.com:drupal/themes/acme_theme.git&quot;<br />projects[acme_theme][download][branch] = &quot;master&quot;<br /><br />; profile 1<br />projects[acme_profile1][type] = &quot;profile&quot;<br />projects[acme_profile1][download][type] = &quot;git&quot;<br />projects[acme_profile1][download][url] = &quot;git@git.example.com:drupal/profiles/acme_profile1.git&quot;<br />projects[acme_profile1][download][branch] = &quot;master&quot;<br /><br />; profile 2<br />projects[acme_profile2][type] = &quot;profile&quot;<br />projects[acme_profile2][download][type] = &quot;git&quot;<br />projects[acme_profile2][download][url] = &quot;git@git.example.com:drupal/profiles/acme_profile2.git&quot;<br />projects[acme_profile2][download][branch] = &quot;master&quot;<br /><br />; base make file<br />includes[acme_base] = &quot;http://example.com/acme_base.make&quot;<br /><br />; patches<br />projects[superfish][patch][] = &quot;http://example.com/superfish-add-acme-style.patch&quot;</code></div>
</div>

<h3>&lt;namespace&gt;_&lt;profile<sub>1</sub>&gt;.make </h3>

<div class="code-block">
<div class="codeblock"><code>core = 6.x<br />api = 2<br /><br />; ecommerce<br />projects[ubercart][version] = 2.4</code></div>
</div>

<h3>&lt;namespace&gt;_&lt;profile<sub>2</sub>&gt;.make </h3>

<div class="code-block">
<div class="codeblock"><code>core = 6.x<br />api = 2<br /><br />projects[openlayers][version] = 2.x-dev<br />projects[ldap_integration][version] = 1.0-beta2</code></div>
</div>

<h3>&lt;namespace&gt;_base.make </h3>

<div class="code-block">
<div class="codeblock"><code>core = 6.x<br />api = 2<br /><br />; utilities<br />projects[ctools][version] = 1.8<br />projects[jquery_ui][version] = 1.4<br />projects[jquery_update][version] = 2.x-dev<br />projects[modalframe][version] = 1.7<br />projects[advanced_help][version] = 1.2<br />projects[transliteration][version] = 3.0<br />projects[token][version] = 1.15<br /><br />; content management<br />projects[imageapi][version] = 1.9<br />projects[imagecache][version] = 2.x-dev<br />projects[cck][version] = 2.9<br />projects[filefield][version] = 3.9<br />projects[imagefield][version] = 3.9<br />projects[diff][version] = 2.1<br />projects[date][version] = 2.7<br />projects[calendar][version] = 2.4<br />projects[views][version] = 3.x-dev<br />projects[views_slideshow][version] = 2.3<br />projects[content_profile][version] = 1.0<br />projects[og][version] = 2.1<br />projects[node_clone][version] = 1.2<br />projects[node_export][version] = 2.21<br />projects[node_import][version] = 1.x-dev<br />projects[nodequeue][version] = 2.9<br />projects[noderelationships][version] = 1.6<br />projects[reverse_node_reference][version] = 1.0<br />projects[nodereference_views][version] = 1.3<br />projects[page_title][version] = 2.3<br />projects[pathauto][version] = 1.5<br />projects[realname][version] = 1.3<br /><br />; ui<br />projects[wysiwyg][version] = 2.2<br />projects[imce][version] = 2.1<br />projects[imce_wysiwyg][version] = 1.1<br /><br />; site administration<br />projects[admin_menu][version] = 1.6<br />projects[devel][version] = 1.x-dev<br />projects[devel_themer][version] = 1.x-dev<br />projects[globalredirect][version] = 1.x-dev<br />projects[google_analytics][version] = 2.3<br />projects[xmlsitemap][version] = 2.0-beta1<br /><br />; site building<br />projects[rules][version] = 1.4<br />projects[features][version] = 1.0<br />projects[context][version] = 3.0<br />projects[strongarm][version] = 2.0<br />projects[purl][version] = 1.0-beta13<br />projects[spaces][version] = 3.0<br /><br />; site theming<br />projects[skinr][version] = 1.6<br />projects[superfish][version] = 1.6<br />projects[adaptivetheme][version] = 3.0-rc2<br /><br />; libraries<br /><br />; CKEditor<br />libraries[ckeditor][download][type] = &quot;get&quot;<br />libraries[ckeditor][download][url] = &quot;http://download.cksource.com/CKEditor/CKEditor/CKEditor%203.4/ckeditor_3.4.tar.gz&quot;<br />libraries[ckeditor][directory_name] = &quot;ckeditor&quot;<br />libraries[ckeditor][destination] = &quot;libraries&quot;<br /><br />; jquery ui library<br />libraries[jquery_ui][download][type] = &quot;get&quot;<br />libraries[jquery_ui][destination] = &quot;modules/jquery_ui&quot;<br />libraries[jquery_ui][download][url] = &quot;http://jquery-ui.googlecode.com/files/jquery-ui-1.7.3.zip&quot;<br />libraries[jquery_ui][directory_name] = &quot;jquery.ui&quot;</code></div>
</div><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/drush-make-architecture-2011-01-14_0/index.png" title="drush-make-architecture-2011-01-14.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/drush-make-architecture-2011-01-14_0/index.png" alt="drush-make-architecture-2011-01-14.png" title="drush-make-architecture-2011-01-14.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/drush-make-architecture-2011-01-14_0/index.png">drush-make-architecture-2011-01-14.png</a></td><td class="size">20.11 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-42.html?destination=node%2F256%23comment-form">Login</a> or <a href="../../../../../user/register/index-42.html?destination=node%2F256%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-42.html?destination=node%2F256%23comment-form">Login</a> or <a href="../../../../../user/register/index-42.html?destination=node%2F256%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-28" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../28/index.html">Client management and access control</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>@TODO update this, it's been copied directly from GDO without modifications yet.</p>

<p>In some situations you may wish to allow different people access to Aegir, but restrict which sites they can manage.</p>

<ul>
<li><h3>Use Case 1:</h3>
As a developer you may simply wish to segregate your sites in Aegir by different clients for your own internal management reasons.</li>
<li><h3>Use Case 2:</h3>
If you have many staff working on different projects, you may wish to issue them with different logins and restrict which sites they can access on the Aegir system.</li>
<li><h3>Use Case 3:</h3>
As a drupal hosting company you might allow clients to sign up via your promotional website (using the 'Signup Form' feature in Aegir!), and then have their own account created on Aegir, with their newly provisioned site. They can then login and manage their own upgrades (by migrating to new platforms). </li>
</ul>

<p>This functionality is provided by the Client feature in Aegir. Here's a brief guide to using it...</p>

<h2>1. Enable the Clients Feature</h2>

<p>If you didn't enable this feature during installation, you can do so now by choosing the following from the menu bar at the very top of the page: Hosting &gt; Features.
On this page, click on 'Experimental' to expand these feature options. You can tick 'Clients' and click on the 'Save Configuration' button.</p>

<p><em><strong>NOTE:</strong> Experimental features are designed to be for developer preview only, although we do have reports of them being successfully used in production environments - but do so at your own risk!</em></p>

<h2>2. Configure the Client Feature Options</h2>

<p>From the top admin menu select Hosting&gt;Clients. On this page you can configure how you want this feature to operate, with the following options:</p>

<h3>Automatically Create User Accounts for New Clients</h3>

<p>If you tick this option, whenever you setup a new Client within Aegir, they will have a drupal user account created for them to be able to access their sites within the Aegir site. You will definitely want to leave this unticked for Use Case 1, perhaps also for Use Case 2, but may want to tick this for Use Case 3.</p>

<h3>Send Welcome Mail to New Clients</h3>

<p>If this setting is ticked, the client will be sent an email when you create their drupal user account allowing them access to the system.
Below this you can configure the email that will be sent.</p>

<h2>Create Clients</h2>

<p>Creating a new Client on Aegir is as simple as selecting Create Content&gt;Client. Then enter their email address (twice for confirmation), Name and Organization. Now click 'Save'.</p>

<p>Depending on the options you selected above they might also have a user account created for them at this stage by Aegir, and then be emailed with their login details.</p>

<p>Otherwise the Client record will just be stored in the database and you will be able to assign sites to this client in the future.</p>

<h2>Adding New Users to a Client</h2>

<p>Perhaps you didn't initially allow clients to access their own Client area within Aegir and just kept it for your own internal use, or perhaps you now want to add additional users to a Client on the system.</p>

<p>To do this visit the Client page and select the 'Edit' tab. You'll see a list of allowed users. You can add users to this list by typing their username in the autocomplete field, or you can remove users by tciking the box next to their username and saving the form.</p>

<p>If the user you wish to add doesn't yet have a drupal user account on the Aegir site, you can create one as normal by going to the following on the top admin menu: User Management&gt;Users&gt;Add User. Then you can return to the client page and add their username to give them access to that client's area.</p>

<h2>Clients Accessing the System</h2>

<p>If you have selected above that new Clients should also have an Aegir account setup for them, then they will be able to access the Aegir site.</p>

<p>Within Aegir they will ONLY be able to see details about their own sites.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-43.html?destination=node%2F28%23comment-form">Login</a> or <a href="../../../../../user/register/index-43.html?destination=node%2F28%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-43.html?destination=node%2F28%23comment-form">Login</a> or <a href="../../../../../user/register/index-43.html?destination=node%2F28%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-11" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../administrator/index.html">Administrator Manual</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Aegir is a powerful system that provides you with a lot of opportunities and methods for managing your sites.</p>

<p>These methods come in the form of 'tasks' which can be applied against the various entities that Aegir manages. Such entities include:</p>

<ul>
<li>Servers</li>
<li>Platforms</li>
<li>Sites</li>
</ul>

<p>This section 'Using Aegir' outlines all the various tasks you'll likely be performing against these entities and how to get the most out of your Aegir system. In doing so, it also represents the recommended 'best practices' associated with achieving certain results (such as upgrading sites).</p>

<p>This section can be read in any order. Choose a specific activity or task from the table of contents to get started or work your way through all the various tasks at your leisure.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-44.html?destination=node%2F11%23comment-form">Login</a> or <a href="../../../../../user/register/index-44.html?destination=node%2F11%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-44.html?destination=node%2F11%23comment-form">Login</a> or <a href="../../../../../user/register/index-44.html?destination=node%2F11%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-9" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../installing/index.html">Installation Guide</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p><strong>This page is being moved to <a href="https://aegir.readthedocs.org/en/latest/install/install/" title="https://aegir.readthedocs.org/en/latest/install/install/">https://aegir.readthedocs.org/en/latest/install/install/</a> </strong></p>

<p>Aegir requires some special permissions to your server in order to automate some configurations. For example, when a new site is installed, the web server will be automatically configured (vhost) and restarted. Therefore Aegir cannot be installed on a shared hosting environment. Consult the <a href="../../../../389/index.html#Review_System_Requirements">system requirements</a> to ensure you meet the necessary requirements.</p>

<h2>Automatic or manual install?</h2>

<p>The <a href="../../../../400/index.html">automatic install process through Debian packages</a> is the currently recommended install process on Debian and Ubuntu platforms. It should just be a matter of adding the right sources to your APT repositories and running <code>apt-get install aegir</code>.</p>

<p>The <a href="../../../../389/index.html">manual install process</a> should take about 15 minutes for trained system administrators, between 30 to 60 minutes for others. The section contains detailed instructions on how to install Aegir manually on supported systems. It is aimed at system administrators and porters that want to control every step of the install process.</p>

<p>To decide which method is the right one, you may also want to review the <a href="../../../../../handbook/operating-system-support/index.html">operating system support page</a>.</p>

<p>We also provide a <a href="../../../../462/index.html">troubleshooting guide</a> to resolve common installation problems.</p>

<p>Note that, while installing Aegir does change some system configurations, it does only minor changes and keeps all its system configurations in one place so that it is easy to <a href="../../../../../uninstalling/index.html">uninstall</a>. It will not remove existing configurations. However, make sure you have backups before installing.</p>

<h2>Automatic install and maintenance with Puppet</h2>

<p>There is now a <a href="http://drupal.org/project/puppet-aegir">Aegir Puppet module</a> that can further automate installation and maintenance of Aegir servers. It defaults to using the Debian packages, and is thus best-suited to Debian and it's derivatives (Ubuntu, Mepis, &amp;.), but also supports (experimental) installation via the manual install process. This currently also only works on Debian, as it follows the documented installation procedure; however, it should be pretty straight-forward to adapt it to other OSes.</p>

<h2>Development installs with Vagrant and Aegir-up</h2>

<p>If you're installing Aegir for experimental or development purposes, you might be interested in <a href="http://drupal.org/project/aegir-up">Aegir-up</a>, a <a href="http://virtualbox.org/">Virtualbox</a>/<a href="http://vagrantup.com/">Vagrant</a>-based local virtual machine automation system. It provides a simple method of building a complete Aegir system locally using the Puppet modules, and is, in fact, the primary development platform for them. In addition, you can build a dev version of Aegir from the git repos (with .git directories intact) to make debugging and writing patches and extensions easier.</p>

<h2>Related documentation</h2>

<ul>
<li><a href="../../../../../upgrading/index.html">Upgrading Aegir</a></li>
<li><a href="../../../../../uninstalling/index.html">Uninstalling Aegir</a></li>
<li><a href="../../../../30/index.html">Remote servers (multiserver)</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-9.html?destination=node%2F9%23comment-form">Login</a> or <a href="../../../../../user/register/index-9.html?destination=node%2F9%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-9.html?destination=node%2F9%23comment-form">Login</a> or <a href="../../../../../user/register/index-9.html?destination=node%2F9%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2917" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/installing/system-requirements/index.html">System Requirements</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Note that the following System Requirements are the same for Aegir automatic or manual install</p>

<dl>
<dt><strong>A system capable of running Drupal</strong></dt>
<dd>The Aegir system is entirely Drupal based, and has the same base requirements that Drupal does (with the exception that it won't run on Windows). See more notes on Unix and LAMP/LEMP requirements below.</dd>

<dt><strong>Your own server</strong></dt>
<dd>The low level of access required to be able to configure and run this system is very far beyond what is commonly available to users with shared hosting. A VPS from any popular provider such as Linode, Rackspace, Slicehost, Amazon EC, etc. will do fine. You will need root access to the server and the server needs to be dedicated to Aegir.</dd>

<dt><strong>A Unix-based operating system</strong></dt>
<dd>Aegir must run on some flavour of UNIX, because the majority of functionality in this system occurs in the back-end, through command line scripting. There are also several features (such as symlinks), that are not available to users on Windows. There are no plans currently to add Windows support. See the <a href="../../../../../handbook/operating-system-support/index.html">operating system support page</a> for more information.</dd>

<dt><strong>Web server</strong></dt>
<dd>You will need at least one dedicated web server, running Apache. We generally work with <strong>Apache 2</strong> but we should be compatible with the 1.x series. Aegir also supports the <strong>Nginx</strong> web server, but requires at least version 0.7.66 or newer. Since Nginx doesn't provide php-cgi or php-fpm (recommended) modules, you will need to install and run php-fpm server separately. You can find useful examples and tips in the third party Barracuda installer available at <a href="http://drupal.org/project/barracuda">the barracuda project page</a>.</dd>

<dd>
<p><strong>N.B.:</strong> This third party installer is not supported by the core Aegir developers, but you can find helpful community support at <a href="http://groups.drupal.org/boa">the boa group</a>.</p>
</dd>

<dt><strong>PHP 5.2 and 5.3</strong></dt>
<dd>Aegir depends on <a href="http://drupal.org/project/drush">Drush 4.x</a>, which requires PHP 5.2 or higher. Aegir 2.x depends on a minimun of <a href="http://drupal.org/project/drush">Drush 5.10</a> (though Drush 6 is recommended), which requires PHP 5.3 or higher. You also need to have the command-line version of PHP to run Drush properly, and the MySQL extensions for PHP.</dd>

<dd>
<p>Given that <a href="http://www.php.net/archive/2010.php#id2010-07-22-1">PHP 5.2 has been deprecated since July 2010</a>, we suggest using PHP 5.3 if possible. Note that while Drupal 6.x and above support PHP 5.3, some contributed third-party modules may still have problems with this version. Most often these cause warnings that can be safely ignored. Aegir and Drush themselves have no known outstanding PHP 5.3 compatibility issues, although you could have a lot of warnings in Drupal 6 due to <a href="http://drupal.org/node/883038">ereg deprecation</a>, see <a href="http://drupal.org/node/883038">this issue</a> for details. If you need to host Drupal 5.x sites, note that Drupal 5.x is not compatible with PHP 5.3 and above, and most likely never will be. See <a href="http://drupal.org/node/360605" title="http://drupal.org/node/360605">http://drupal.org/node/360605</a> (amongst other issues) for details. As such, Aegir has dropped support for Drupal 5 in versions 2.0+.</p>
</dd>

<dt><strong>Database server</strong></dt>
<dd>You will require a database server, obviously. Aegir currently only supports MySQL and MariaDB. It is preferable to use a dedicated (not shared-hosting) server since Aegir will create database users and will require the use of a MySQL <code>root</code> user.</dd>

<dt><strong>Mail transfer agent</strong></dt>
<dd>Aegir requires an MTA (Mail Transfer Agent) installed on your webserver in order to be able to install new sites to your new platform. If you don't have an MTA, the site installation will fail with message like "could not send email". Additional messages will show that site has been removed because of this problem. To remedy the situation simply install an MTA like sendmail, postfix, or exim and do the minimal configuration.</dd>

<dt><strong>Other utilities: sudo, rsync, git and unzip</strong></dt>
<dd>Aegir installs itself via a <a href="http://drupal.org/project/drush_make">Drush Make</a> makefile that downloads via git if you want the bleeding edge code, or via wget if you want the latest official release. If you want the latest development version, and don't have the <strong>git</strong> program you will need to install it on the server.</dd>

<dd>
<p>The <strong>jQueryUI</strong> library is used in the Aegir UI, <strong>unzip</strong> is required to extract it. <strong>Sudo</strong> is required to allow the aegir user the limited privilege to restart the webserver when required.  <strong>Rsync</strong> is used to sync files to remote servers.</p>
</dd>

<dt><strong>No conflicting Control Panels</strong></dt>
<dd>Other popular control panels such as Plesk, cPanel etc, are designed to manage all aspects of Apache configuration and other areas that Aegir also is intended to be used for.</dd>

<dd>
<p>Running Aegir alongside such control panels is not supported and very likely may cause you problems or difficulties installing or running Aegir. Filing bug reports that are caused by interference by another control panel will likely be closed unless the problem can be fixed without causing problems for other Aegir users. Proceed at your own risk!</p>
</dd>

<dt><strong>System requirements of popular Drupal distributions</strong></dt>
<dd>Some Drupal distributions, such as OpenAtrium, are specialized products that may contain unique prerequisites for optimal performance. Such examples may include raising the php-cli program's memory_limit to something higher than 64M.</dd>

<dd>
<p>Please note that this is not a requirement of Aegir but of the distribution you are trying to install a site on. Thus the Aegir documentation may not officially 'require' such performance settings, but be aware that Aegir may report errors if the system was under-resourced to complete such a task.</p>
</dd>
</dl>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-45.html?destination=node%2F2917%23comment-form">Login</a> or <a href="../../../../../user/register/index-45.html?destination=node%2F2917%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-45.html?destination=node%2F2917%23comment-form">Login</a> or <a href="../../../../../user/register/index-45.html?destination=node%2F2917%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-400" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../installing/debian/index.html">Automatic install on Debian</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>These are the installation instructions that are recommended on Debian. Aegir dependencies (Apache, MySQL, PHP...) are also automatically installed. If you are managing the installation from a remote Windows computer, well-known open source tools for this task are for example <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">PuTTY</a> (<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/docs.html">a SSH client for command line</a>), and <a href="http://winscp.net/eng/download.php">WinSCP</a> (<a href="http://winscp.net/eng/docs/start">a SFTP client with easy text file editing</a>).</p>

<p>If you wish to install Debian packages over an existing manual install, it's possible. See <a href="../../../../../upgrading/debian/index.html">the Debian upgrade procedures</a>.</p>

<p>Debian packages are uploaded to <a href="http://debian.aegirproject.org/" title="http://debian.aegirproject.org/">http://debian.aegirproject.org/</a> shortly after a release. We eventually want to upload those packages to the official archives, but this will take some adaptation and time to sponsor the packages in.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc2">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Requirements_for_automatic_install_on_Debian"><span class="toc-number">1. </span>Requirements for automatic install on Debian</a></li>
	<li class="toc-level-1"><a href="#Adding_the_project_repositories"><span class="toc-number">2. </span>Adding the project repositories</a></li>
	<li class="toc-level-1"><a href="#Adding_the_archive_key_to_your_keyring"><span class="toc-number">3. </span>Adding the archive key to your keyring</a></li>
	<li class="toc-level-1"><a href="#Adding_backports_for_or_manually_installing_Drush"><span class="toc-number">4. </span>Adding backports for or manually installing Drush</a></li>
	<li class="toc-level-1"><a href="#DNS_configuration"><span class="toc-number">5. </span>DNS configuration</a></li>
	<li class="toc-level-1"><a href="#Manual_sudo_configuration"><span class="toc-number">6. </span>Manual sudo configuration</a></li>
	<li class="toc-level-1"><a href="#Manual_installation_of_MySQL_on_Ubuntu_12.04_LTS"><span class="toc-number">7. </span>Manual installation of MySQL (on Ubuntu 12.04 LTS)</a></li>
	<li class="toc-level-1"><a href="#Installing_Aegir"><span class="toc-number">8. </span>Installing Aegir</a></li>
	<li class="toc-level-1"><a href="#Custom_Drupal_distributions_and_make_files"><span class="toc-number">9. </span>Custom Drupal distributions and make files</a></li>
	<li class="toc-level-1"><a href="#Troubleshooting_the_install"><span class="toc-number">10. </span>Troubleshooting the install</a></li>
</ol>
</div>
</div>

<h2 id="Requirements_for_automatic_install_on_Debian">1. Requirements for automatic install on Debian</h2>

<p><strong>Basic Linux system administration skills</strong></p>

<p><strong>Root access to your server</strong></p>

<dl>
<dt><strong>An up-to-date system and applications</strong></dt>
<dd>
<p>Run the following command lines to update your system and applications.</p>
</dd>

<dd>
<p><div class="codeblock"><code>&nbsp; aptitude update<br />&nbsp; </code></div></p>
</dd>

<dd><div class="codeblock"><code>&nbsp; aptitude safe-upgrade<br />&nbsp; </code></div></dd>

<dt><strong>A configured Fully Qualified Domain Name (FQDN)</strong></dt>
<dd>
<p>Such as aegir.example.com</p>
</dd>

<dd>The <code>hostname</code> returned by the commands <code>hostname -f</code> and <code>uname -a</code> must resolve to the IP address of your server.</dd>

<dd>
<p>After setting up your FQDN you must restart your server with a <code>reboot</code> command so your changes take effect.</p>
</dd>

<dd>
<p>Note that newly created domain name usually take 24 to 48 hours to fully start working. This period, called propagation, is the projected length of time it takes for root name servers and cache records across the entire web to be updated with your website's DNS information.</p>
</dd>

<dt><strong>Other System Requirements</strong></dt>
<dd>
<p>Find <a href="../../../../../content/installing/system-requirements/index.html" title="http://community.aegirproject.org/content/installing/system-requirements">http://community.aegirproject.org/content/installing/system-requirements</a></p>
</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Adding_the_project_repositories">2. Adding the project repositories</h2>

<p>Use this command to add the Aegir package "Software Source" repository to your system:</p>

<p><div class="codeblock"><code>echo &quot;deb <a href="http://debian.aegirproject.org/" title="http://debian.aegirproject.org">http://debian.aegirproject.org</a> stable main&quot; | sudo tee -a /etc/apt/sources.list.d/aegir-stable.list</code></div></p>

<p>To install a customized Debian package, see the <a href="../../../../../debian/index.html">developer instructions for the debian package</a>. Other distributions are available for courageous people that want to try development versions.</p>

<p><strong>2.x note</strong>: to install the development version of Aegir, you can use the <code>unstable</code> or <code>stable</code> distribution above.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Adding_the_archive_key_to_your_keyring">3. Adding the archive key to your keyring</h2>

<p>This repository self-signs packages uploaded to it (and packages uploaded are verified against a whitelist of trusted uploaders) using OpenPGP (GnuPG, to be more precise).</p>

<p>Use these commands to download and add the repository's PGP key, then update the package list on your system:</p>

<p><div class="codeblock"><code>wget -q <a href="http://debian.aegirproject.org/key.asc" title="http://debian.aegirproject.org/key.asc">http://debian.aegirproject.org/key.asc</a> -O- | sudo apt-key add -<br />sudo apt-get update</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Adding_backports_for_or_manually_installing_Drush">4. Adding backports for or manually installing Drush</h2>

<p>If you are running <strong>Debian wheezy</strong> or later, or <strong>Ubuntu Natty 11.04</strong> or later, <strong>you don't need to do anything here</strong>. The Drush package you need is available from your distribution's repositories.</p>

<p>If not, you should also configure <a href="http://backports.debian.org/">backports</a> repositories for Drush. Version 4.4 of Drush is now in Debian <a href="http://packages.debian.org/sid/drush">unstable</a>, <a href="http://packages.debian.org/wheezy/drush">wheezy</a>, <a href="http://packages.debian.org/squeeze-backports/drush">squeeze-backports</a> and <a href="http://packages.ubuntu.com/natty/drush">Ubuntu Natty</a>.</p>

<p><span id="debian-backport"></span>
<strong>1.x note</strong>: if you are running <strong>Debian Squeeze 6.0</strong> or <strong>Debian Squeeze 7.0</strong>, add the following line to /etc/apt/sources.list :</p>

<p><div class="codeblock"><code>deb <a href="http://backports.debian.org/debian-backports" title="http://backports.debian.org/debian-backports">http://backports.debian.org/debian-backports</a> squeeze-backports main</code></div></p>

<p>You might also have to add a proper Pin-Priority before this works. Create a file called <strong>drush</strong> containing the following and drop it into /etc/apt/preferences.d:
<div class="codeblock"><code>Package: drush<br />Pin: release a=squeeze-backports<br />Pin-Priority: 1001</code></div></p>

<p>Alternatively, you could download and install the squeeze-backports package for Drush 4.5 directly from: <a href="http://packages.debian.org/squeeze-backports/all/drush/download" title="http://packages.debian.org/squeeze-backports/all/drush/download">http://packages.debian.org/squeeze-backports/all/drush/download</a>. Then you could install it with:</p>

<pre><code>dpkg -i drush_4.5-2~bpo60+1_all.deb
</code></pre>

<p><strong>2.x note</strong>: if you are running <strong>Debian Squeeze 6.0</strong>, to get drush-5.8.x and above, download <a href="http://ftp.debian.org/debian/pool/main/p/php-console-table/php-console-table_1.1.4-1_all.deb">php-console-table</a> manually and install it</p>

<p><div class="codeblock"><code>wget &quot;http://ftp.debian.org/debian/pool/main/p/php-console-table/php-console-table_1.1.4-1_all.deb&quot;<br />dpkg -i php-console-table_1.1.4-1_all.deb</code></div></p>

<p>You do not need to edit /etc/apt/sources.list or create /etc/apt/preferences.d/drush</p>

<p>Then run:
<div class="codeblock"><code>sudo apt-get update &amp;&amp; sudo apt-get install drush</code></div></p>

<p>If you are running <strong>Debian lenny 5.0</strong> or <strong>Ubuntu Maverick 10.10</strong> or Karmic Koala or earlier, we recommend downloading and installing the Drush package <a href="http://packages.debian.org/wheezy/all/drush/download">manually</a>.  The version of Drush in the Ubuntu Universe repository for these versions of Ubuntu is outdated.  If you are using <strong>Ubuntu Lucid LTS 10.04</strong>, you can install the Drush package manually or instead use <a href="https://launchpad.net/~brianmercer/+archive/drush">Brian Mercer's PPA</a> (Personal Package Archive) using the following command:</p>

<p><div class="codeblock"><code>sudo apt-get install python-software-properties<br />sudo add-apt-repository ppa:brianmercer/drush</code></div></p>

<p>Now run apt-get update again to refresh the apt database.</p>

<p><div class="codeblock"><code>sudo apt-get update</code></div></p>

<p><strong>N.B.</strong> Since Aegir 2 requires Drush 5, which in turn requires PHP 5.3+, Drupal 5 sites are not supported in Aegir 2.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="DNS_configuration">5. DNS configuration</h2>

<p>Aegir requires a properly configured "FQDN" (Fully Qualified Domain Name) be assigned to the machine. In practice, this means that the hostname returned by the <code>hostname -f</code> and <code>uname -n</code> shell commands should resolve to the IP address for this server, and vice versa, with the <code>resolveip</code> command (included with the mysql-server package).</p>

<p>For Ubuntu, /etc/hosts should have entries that look like:
<div class="codeblock"><code>::1 host.example.com host ip6-localhost ip6-loopback<br />127.0.0.1 host.example.com host localhost<br />123.123.123.123 host.example.com host localhost</code></div></p>

<p>To set this up in a virtual machine (e.g. Virtualbox), here are the steps:</p>

<ol>
<li>Create a new VM</li>
<li>Go to settings-&gt;network.  Enable Adapter 2, and set to "host-only"</li>
<li>Install Ubuntu.  Set hostname as FQDN during install</li>
<li>You may need to add the lines `auto eth1` and `iface eth1 inet dhcp` to /etc/network/interfaces</li>
</ol>

<p>If you have a virtual machine already setup and want to change the FDQN:</p>

<ol>
<li>change /etc/hostname using: `sudo hostname NEW_NAME`</li>
<li>change /etc/hosts using: `sudo nano /etc/hosts` and change name</li>
<li>reboot and test `hostname -f`, `uname -n`, `resolveip NEW_NAME`, `resolveip IP`</li>
<li><a href="http://www.ducea.com/2006/08/07/how-to-change-the-hostname-of-a-linux-system/">YMMV - Your Mileage May Vary</a></li>
</ol>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Manual_sudo_configuration">6. Manual sudo configuration</h2>

<p>If you are running <strong>Debian squeeze</strong> or later, or <strong>Ubuntu Lucid 11.04</strong> or later, <strong>you don't need to do anything here</strong>. The Aegir package configures sudoers automatically.</p>

<p>If not, you will need to manually modify your /etc/sudoers file to add the following line:</p>

<p><div class="codeblock"><code>echo &quot;aegir ALL=NOPASSWD: /usr/sbin/apache2ctl&quot; | sudo tee -a /etc/sudoers</code></div></p>

<p>The line above assumes that you have created a user aegir as specified in the installation instructions.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Manual_installation_of_MySQL_on_Ubuntu_12.04_LTS">7. Manual installation of MySQL (on Ubuntu 12.04 LTS)</h2>

<p>Please note that Ubuntu 12.04 LTS installs, by default, an insecure MySQL installation that contains an anonymous user grant, allowing anyone to login without a password. This breaks Aegir functionality.</p>

<p>If you are running Ubuntu 12.04, you should install MySQL manually, and then ensure it is installed securely:</p>

<p><div class="codeblock"><code>sudo apt-get install mysql-server<br />sudo mysql_secure_installation</code></div></p>

<p>When running 'sudo mysql_secure_installation', answer 'Y' to 'Remove anonymous users?'</p>

<p><div class="codeblock"><code>By default, a MySQL installation has an anonymous user, allowing anyone<br />to log into MySQL without having to have a user account created for<br />them.&nbsp; This is intended only for testing, and to make the installation<br />go a bit smoother.&nbsp; You should remove them before moving into a<br />production environment.<br /><br />Remove anonymous users? [Y/n] Y<br /> ... Success!</code></div></p>

<p>Now you can proceed with installing Aegir below.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_Aegir">8. Installing Aegir</h2>

<p>To install Aegir version 2, frontend and backend, use the following command:
<div class="codeblock"><code>sudo apt-get install aegir2</code></div></p>

<p><strong>2.x note</strong>: Aegir version 2 is now stable. Read more at <a href="../../../../../2/index-2.html" title="http://community.aegirproject.org/2.1">http://community.aegirproject.org/2.1</a></p>

<p><strong>1.x note</strong>: to install Aegir version 1, use <code>sudo apt-get install aegir</code> instead.</p>

<p>If apt-get reports that the aegir packages have unmet dependencies, then make sure that you have installed Drush (as explained above).  On a debian system, you can force the install of Drush from the squeeze-backports repository:</p>

<p><div class="codeblock"><code>sudo apt-get -t squeeze-backports install drush</code></div></p>

<p>Then install aegir using the apt-get command above.</p>

<p>This will prompt you for the required information (MySQL password, Postfix configuration...) and go ahead with the install.</p>

<p>During the Postfix configuration, the following options appear: "No configuration, Internet site, Internet with smarthost, Satellite system, Local only". That first text screen only allows to use the tab key to select "OK", and then the enter key to display a second screen where you can select one of the choices. The default is "Internet site", useful in most cases to enable the server to send email messages, for example to the admin.</p>

<p>At the end of the installation, you will receive an email message or, if the user "aegir" has been assigned with a local email account during the installation, the file /var/mail/aegir will contain the message. It will include a one-time login to your new Aegir control panel, that is a URL to copy into your browser so that you can set the password for the "admin" user.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Custom_Drupal_distributions_and_make_files">9. Custom Drupal distributions and make files</h2>

<p>If you have your own Drupal make file, you can go ahead with the above process, but change the make file to the one you want:</p>

<pre><code>echo debconf aegir/makefile string /var/aegir/makefiles/aegir/aegir-custom.make | debconf-set-selections
apt-get install aegir
</code></pre>

<p>This allows you to specify the makefile path for your custom distribution of Aegir. To maintain these customizations, you'll need to ensure you do the same when upgrading.</p>

<p>An example aegir-custom.make file could look like:</p>

<p><div class="codeblock"><code>core = 6.x<br />api = 2<br /><br />includes[aegir] = &quot;/usr/share/drush/commands/provision/aegir.make&quot;<br /><br />projects[] = module_filter</code></div></p>

<p>Note that for this to work, you may need the patch from <a href="http://drupal.org/node/1118616">this issue</a>, allowing drush_make to reference absolute system paths.  If <code>drush make --version</code> &lt;= 2.2 you need this patch.</p>

<p>After installing Aegir, you can reinstall the front end (hostmaster), with following commands:
<div class="codeblock"><code>sudo rm -rf /var/aegir/hostmaster-&#42;.&#42;<br />sudo su -s /bin/sh aegir -c &quot;drush -y hostmaster-install --aegir_db_pass=$DB_PASSWORD --makefile=$MAKEFILE $DOMAIN&quot;</code></div>
<code>su -s /bin/sh aegir -c "some command"</code> runs <code>some command</code> in the <code>/bin/sh</code> shell as user <code>aegir</code>.  <code>sudo</code> runs the <code>su</code> command as root - prompting for your user's password instead <code>su</code> asking for aegir's password.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Troubleshooting_the_install">10. Troubleshooting the install</h2>

<p>To make the install smoother, the install command is run without much debugging information, which can make diagnostics pretty hard. For this, there's a special environment variable you can set that will trigger debugging output. Install aegir with this*:</p>

<p><div class="codeblock"><code>env DPKG_DEBUG=developer apt-get install aegir</code></div></p>

<p>You can build your own Debian packages from our repositories using <a href="../../../../543/index.html">those instructions</a>.</p>

<p><em>Note: Prior to 1.1-4.</em> the command was <code>env DEBUG=yes apt-get install aegir</code></p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-296.html?destination=node%2F400%23comment-form">Login</a> or <a href="../../../../../user/register/index-296.html?destination=node%2F400%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../400/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-1080" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/installing/debian/automatic-installation-ubuntu-1104-quickstart/index.html">Automatic Installation on Ubuntu 11.04+ (QuickStart)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_50 first"><a href="../../../../../category/keywords/install/index.html" rel="tag" title="">Install</a></li>
<li class="taxonomy_term_70"><a href="../../../../../category/keywords/installation-ubuntu/index.html" rel="tag" title="">installation ubuntu</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Here are simplified instructions for installing Aegir on a server, quickly and easily.</p>

<p>The fastest way to install Aegir is on the latest Ubuntu Server LTS (Long Term Support). <em>Currently 12.04</em>.</p>

<h1>Command Summary</h1>

<p>Here is every command, ready to copy and paste.</p>

<p><div class="codeblock"><code>sudo su<br />echo &quot;deb <a href="http://debian.aegirproject.org/" title="http://debian.aegirproject.org">http://debian.aegirproject.org</a> stable main&quot; | tee -a /etc/apt/sources.list.d/aegir-stable.list<br />wget -q <a href="http://debian.aegirproject.org/key.asc" title="http://debian.aegirproject.org/key.asc">http://debian.aegirproject.org/key.asc</a> -O- | apt-key add -<br />apt-get update<br />apt-get install aegir</code></div></p>

<p>It is highly recommended to read through the <strong>Installation Instructions</strong> step by step to give yourself the feel for how this is done.  In addition, if you are not already familiar in Linux system administration, please read up on the subject.  Standard linux security protocols should be followed.</p>

<h1>Installation Instructions</h1>

<p>Enter all commands in <code>code boxes</code> exactly as they are written.</p>

<p>ALL commands should be entered as <code>root</code> user until these instructions are complete.  After that, you should never have to use the root user.</p>

<p>Self-installation of Ubuntu has you create an additional user in the <code>admin</code> group, which means they can sudo.  If you are using a cloud hosting service, it likely just sent you root user credentials.  <em>Server security and user management is up to you.  Don't give away access to root or the aegir user unless you know what you are doing.  Follow standard web host best practices</em></p>

<p>For a summary of all needed commands, scroll to the bottom of the page.</p>

<ol>
<li><h2>Fire up a new server</h2>

<ul>
<li>Use <strong>Ubuntu 11.04 Server Edition</strong> for the smoothest and most reliable installation experience.  </li>
<li>Make sure it has at least 1024MB, preferably 2048MB of memory.  Depending on your host you will have to configure a hostname.  It can be convenient to call this 'aegir'.</li>
<li>If you want the smoothest installation, create a brand new server.  There will be the least chance of conflicts if you start with a brand new <strong>Ubuntu 11.04</strong> server.  If you use Ubuntu Desktop, you should be able follow these instructions without any problems.</li>
<li><em>Run all commands as root.  If you are not root, enter</em>
<div class="codeblock"><code>sudo su</code></div></li>
</ul></li>
<li><h2>Add the project repositories and archive key</h2>

<p>Use this command to add the Aegir package "Software Source" repository to your system:
<div class="codeblock"><code>echo &quot;deb <a href="http://debian.aegirproject.org/" title="http://debian.aegirproject.org">http://debian.aegirproject.org</a> stable main&quot; | tee -a /etc/apt/sources.list.d/aegir-stable.list</code></div>
Use this command to add the archive key to your keyring:
<div class="codeblock"><code>wget -q <a href="http://debian.aegirproject.org/key.asc" title="http://debian.aegirproject.org/key.asc">http://debian.aegirproject.org/key.asc</a> -O- | apt-key add -</code></div>
Then, finally, update your apt repositories:
<div class="codeblock"><code>apt-get update</code></div></p></li>
<li><h2>Install configure Aegir and dependencies</h2>

<p>Once you have added the repositories, you can now fire off the standard debian installation command. For Aegir 1.x, the command is:
<div class="codeblock"><code>apt-get install aegir</code></div>
For Aegir 2.x, the command is:
<div class="codeblock"><code>apt-get install aegir2</code></div>
This fires off the installation script for AEgir, along all dependencies including Apache, MySQ and PHP.  You will be asked a number of questions about your server.</p>

<ul>
<li>You will be asked to create a <em>MySQL root user password</em>.  Make this long and random and type it down somewhere safe, you won't need it very often, but you will need it later on in the installation process.</li>
<li>In <em>Postfix Configuration</em>:  Choose Internet Site, unless you have a reason otherwise.  When asked for the <em>System mail name</em>, pick either the hostname (default) or the domain name you will be hosting this server on.</li>
<li>In <em>Configure aegir-hostmaster</em>, you will be asked to choose a "URL of the hostmaster frontend".  This should be either the hostname (default) or the domain name the server will be hosting, with "aegir" as a subdomain.  For example, "aegir.example.com".  You may want to change this to whatever you prefer, just don't forget it as it will be where you use the Aegir front-end.</li>
<li>After entering your domain, Aegir Hostmaster installation will ask you for the MySQL root password you created earlier.  You did write it down, didn't you?<br />
<strong>NOTE:</strong> The current DEB package requires you to enter the MySQL root password twice.
When this script is done, if everything went ok, after a lot of other interesting information, you should see this:
<div class="codeblock"><code>Aegir is now installed. You can visit it at <a href="http://test/user/reset/1/1329504351/eda205d9a27abde400a27cf160dff69a<br />************************************************************************<br />Aegir" title="http://test/user/reset/1/1329504351/eda205d9a27abde400a27cf160dff69a<br />************************************************************************<br />Aegir">http://test/user/reset/1/1329504351/eda205d9a27abde400a27cf160dff69a<br />***...</a> frontend bootstrap correctly, operation was a success!<br />Setting up aegir (1.6-1) ...<br />Setting up libhtml-template-perl (2.9-2) ...<br />Setting up mysql-server (5.1.54-1ubuntu4) ...<br />Setting up php5 (5.3.5-1ubuntu7.7) ...<br />Processing triggers for libc-bin ...<br />ldconfig deferred processing now taking place<br />root@test:~# </code></div></li>
</ul>

<p>At this point, everything is installed.  Visit the link the script provided you to check out the frontend.  Switch to the <code>aegir</code> user to check out the backend:
<div class="codeblock"><code>su - aegir</code></div></p>

<p>Once you are the aegir user, check out the drush site aliases  it gives you. <code>@hostmaster</code> is the alias for the new front-end you created.  You will get new site aliases for every platform and site you create.
<div class="codeblock"><code>drush site-aliases</code></div></p></li>
<li><h2>Give yourself access to the server</h2>

<p>As the "Administrators Manual" can tell you, you should only manage the Aegir server from the backend as the <code>aegir</code> user.</p>

<p>However, by default, the <code>aegir</code> user cannot sudo (except to restart apache).  The aegir user also does not have a password.  Therefor, the only way to become aegir is to <code>sudo su - aegir</code> from a user that can.</p>

<p>So, to finish the server, you should give yourself a personal account that you can use to login to the server with a password in case all of your SSH keys get lost.</p>

<p>To add yourself as a user:
<div class="codeblock"><code>adduser yourname</code></div>
Then fill out the little wizard it gives you.</p>

<p>//@TODO: Add some helpful notes about SSH keys and remote aliases.</p>

<p>Install SSH on your server, generating your SSH keys and install them on your Ubuntu server. (Directions to generate your SSH keys are assuming your PC is Ubuntu as well, Windows users look below for SSH directions)</p>

<ul>
<li>Tutorial: <a href="https://help.ubuntu.com/11.04/serverguide/C/openssh-server.html" title="https://help.ubuntu.com/11.04/serverguide/C/openssh-server.html">https://help.ubuntu.com/11.04/serverguide/C/openssh-server.html</a></li>
</ul>

<p>If using Windows, you must use Putty, PuttyGen, and PuttyPageant to generate and use your SSH keys.</p>

<ul>
<li>Tutorial #1: <a href="http://the.earth.li/~sgtatham/putty/0.53b/htmldoc/Chapter8.html" title="http://the.earth.li/~sgtatham/putty/0.53b/htmldoc/Chapter8.html">http://the.earth.li/~sgtatham/putty/0.53b/htmldoc/Chapter8.html</a></li>
<li>Tutorial #2: <a href="http://www.howtoforge.com/ssh_key_based_logins_putty" title="http://www.howtoforge.com/ssh_key_based_logins_putty">http://www.howtoforge.com/ssh_key_based_logins_putty</a></li>
</ul>

<p>You will want to also be a part of the aegir and www-data groups so you can write to some of their files:
<div class="codeblock"><code>addgroup yourname aegir<br />addgroup yourname www-data</code></div></p></li>
<li><h2>Start Using!</h2>

<p>Now that aegir is installed, head to the  <a href="../../../../../using/index.html">User Manual</a> page to get your first platform and site up and running.</p></li>
</ol>

<h1>Credits</h1>

<p><em>This document was originally based on <a href="../../../../../installing/debian/index.html" title="http://community.aegirproject.org/installing/debian">http://community.aegirproject.org/installing/debian</a> but has been trimmed down to list only the steps you need to use on an Ubuntu server to get Aegir up and running as quickly and easily as possible.</em></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-391.html?destination=node%2F1080%23comment-form">Login</a> or <a href="../../../../../user/register/index-391.html?destination=node%2F1080%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../1080/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-389" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../installing/manual/index.html">Manual Installation</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This page describes to process you need to follow if Aegir doesn't have packages for your distribution. We currently provide <a href="../../../../400/index.html">Debian packages</a> and others should be coming, if you help! This manual assumes you are fairly familiar with the UNIX commandline interface, but should be possible to follow through if you copy and paste faithfully <em>all</em> steps of the procedure.</p>

<p><strong>A note on supported systems</strong></p>

<p>These instructions provide example commands for a Debian-like distribution, but should be fairly easy to adapt to other environments. This document is meant as a canonical reference that should work on every supported platform. It can also be used for people porting Aegir to new platforms or installing on alien platform for which Aegir is not yet packaged.</p>

<p>It currently contains special recommendations for CentOS, RHEL 6, Arch Linux and Solaris. Users of those platforms are also strongly encouraged to review the <a href="../../../../462/index.html">common installation problems</a> that occur on those platforms. Aegir is also known to be installable (and was developed partly on) Mac OS X, but that process is so obtuse that it has a <a href="../../../../417/index.html">separate page</a> for the first part of the manual (up to <a href="#Install_Aegir_components">Install Aegir components</a>).</p>

<p>Installing Aegir may seem daunting at first (which is why we provide automated installs through packages), but once you get around it, it's fairly simple. It follows those steps:</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc3">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Review_System_Requirements"><span class="toc-number">1. </span>Review System Requirements</a></li>
	<li class="toc-level-1"><a href="#Install_system_requirements"><span class="toc-number">2. </span>Install system requirements</a>
<ol>
	<li class="toc-level-2"><a href="#CentOS-specific_configuration"><span class="toc-number">2.1. </span>CentOS-specific configuration</a></li>
	<li class="toc-level-2"><a href="#RHEL_6_specific_configuration"><span class="toc-number">2.2. </span>RHEL 6 specific configuration</a></li>
	<li class="toc-level-2"><a href="#Solaris_specific_configuration"><span class="toc-number">2.3. </span>Solaris specific configuration</a></li>
	<li class="toc-level-2"><a href="#Arch_Linux_specific_configuration"><span class="toc-number">2.4. </span>Arch Linux specific configuration</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Configure_system_requirements"><span class="toc-number">3. </span>Configure system requirements</a>
<ol>
	<li class="toc-level-2"><a href="#Create_the_Aegir_user"><span class="toc-number">3.1. </span>Create the Aegir user</a>
<ol>
	<li class="toc-level-3"><a href="#CentOS_specific_configuration"><span class="toc-number">3.1.1. </span>CentOS specific configuration</a></li>
	<li class="toc-level-3"><a href="#Solaris_specific_configuration-1"><span class="toc-number">3.1.2. </span>Solaris specific configuration</a></li>
	<li class="toc-level-3"><a href="#Arch_Linux_specific_configuration-2"><span class="toc-number">3.1.3. </span>Arch Linux specific configuration</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#Webserver_configuration"><span class="toc-number">3.2. </span>Webserver configuration</a>
<ol>
	<li class="toc-level-3"><a href="#Apache_configuration"><span class="toc-number">3.2.1. </span>Apache configuration</a></li>
	<li class="toc-level-3"><a href="#Nginx_configuration"><span class="toc-number">3.2.2. </span>Nginx configuration</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#PHP_configuration"><span class="toc-number">3.3. </span>PHP configuration</a>
<ol>
	<li class="toc-level-3"><a href="#RHEL_6_specific_configuration-3"><span class="toc-number">3.3.1. </span>RHEL 6 specific configuration</a></li>
	<li class="toc-level-3"><a href="#Arch_Linux_specific_configuration-4"><span class="toc-number">3.3.2. </span>Arch Linux specific configuration</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#Sudo_configuration"><span class="toc-number">3.4. </span>Sudo configuration</a>
<ol>
	<li class="toc-level-3"><a href="#CentOS_Linux_specific_sudo_configuration"><span class="toc-number">3.4.1. </span>CentOS Linux specific sudo configuration</a></li>
	<li class="toc-level-3"><a href="#Nginx_specific_configuration"><span class="toc-number">3.4.2. </span>Nginx specific configuration</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#DNS_configuration"><span class="toc-number">3.5. </span>DNS configuration</a></li>
	<li class="toc-level-2"><a href="#Database_configuration"><span class="toc-number">3.6. </span>Database configuration</a>
<ol>
	<li class="toc-level-3"><a href="#Ubuntu_RHEL_Arch_linux_specific_configurations"><span class="toc-number">3.6.1. </span>Ubuntu, RHEL, Arch linux specific configurations</a></li>
	<li class="toc-level-3"><a href="#RHEL_6_specific_configuration-5"><span class="toc-number">3.6.2. </span>RHEL 6 specific configuration</a></li>
</ol>
</li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Install_Aegir_components"><span class="toc-number">4. </span>Install Aegir components</a>
<ol>
	<li class="toc-level-2"><a href="#Install_drush"><span class="toc-number">4.1. </span>Install drush</a>
<ol>
	<li class="toc-level-3"><a href="#Arch_Linux_specific_configuration-6"><span class="toc-number">4.1.1. </span>Arch Linux specific configuration</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#Stop_Now_become_the_Aegir_user"><span class="toc-number">4.2. </span>Stop! Now become the Aegir user!</a></li>
	<li class="toc-level-2"><a href="#Install_provision"><span class="toc-number">4.3. </span>Install provision</a></li>
	<li class="toc-level-2"><a href="#Running_hostmaster-install"><span class="toc-number">4.4. </span>Running hostmaster-install</a>
<ol>
	<li class="toc-level-3"><a href="#Arch_Linux_specific_configuration-7"><span class="toc-number">4.4.1. </span>Arch Linux specific configuration</a></li>
</ol>
</li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Install_the_Hosting_Queue_Daemon"><span class="toc-number">5. </span>Install the Hosting Queue Daemon</a></li>
	<li class="toc-level-1"><a href="#Checkpoint_Finished"><span class="toc-number">6. </span>Checkpoint / Finished!</a></li>
</ol>
</div>
</div>

<p>Note that these instructions setup a complete Aegir system. If you want to only setup a new remote web/db server, it should be sufficient to install the <a href="#Install_system_requirements">system requirements</a> (step 1),  <a href="#Configure_system_requirements">configure them</a> (step 2) and follow the <a href="../../../../30/index.html">Remote server how-to</a>.</p>

<h1 id="Review_System_Requirements">1. Review System Requirements</h1>

<p>Find <a href="../../../../../content/installing/system-requirements/index.html" title="http://community.aegirproject.org/content/installing/system-requirements">http://community.aegirproject.org/content/installing/system-requirements</a></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Install_system_requirements">2. Install system requirements</h1>

<p>To install the required components, run the following command as root:</p>

<pre><code>apt-get install apache2 php5 php5-cli php5-gd php5-mysql php-pear postfix sudo rsync git-core unzip
</code></pre>

<p><em>Note</em>: replace <code>apache2</code> with <code>nginx php5-fpm</code> to install nginx on Ubuntu Precise or newer. Since Debian Squeeze doesn't provide php5-fpm, you will need to follow <a href="http://www.dotdeb.org/instructions/" title="http://www.dotdeb.org/instructions/">http://www.dotdeb.org/instructions/</a> before you will be able to install php5-fpm.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="CentOS-specific_configuration">2.1. CentOS-specific configuration</h2>

<pre><code>yum install httpd php php-mysql php-cli php-gd php-process sudo rsync git postfix
</code></pre>

<p>For versions of CentOS previous to 6.0, you will need to upgrade to PHP 5.3 using <a href="http://wiki.centos.org/HowTos/PHP_5.1_To_5.2">those instructions</a>.</p>

<p>Also for Centos minimal you should install cron (for queue and drupal cron) and unzip (for jquery.ui)</p>

<pre><code>yum install cronie unzip
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="RHEL_6_specific_configuration">2.2. RHEL 6 specific configuration</h2>

<p>RHEL 6 Server needs an additional PHP package to enable POSIX support. To find the package php-process you must enable the RHEL Server Optional channel. Once enabled, download and install the php-process-5.3.2-6.el6_0.1.i686.rpm.</p>

<p>You will also need to install the php-xml package if you are planning to use Aegir to manage Drupal 7 sites.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Solaris_specific_configuration">2.3. Solaris specific configuration</h2>

<p>Solaris has this way of dealing with third party software that is... far from ideal. You will need to find the best way to install the following packages: apache2, git, sudo, mysql, PHP 5.2 and wget. unzip and sendmail should be part of the base Solaris install. The other applications should be available on the companion CDs or on <a href="http://www.sunfreeware.com/">sunfreeware.com</a>.</p>

<p>In particular, git can be compiled easily by exporting the following
environment::</p>

<pre><code>export CFLAGS="-I/usr/sfw/include -I/opt/sfw/include"
export LD_LIBRARY_PATH="/usr/sfw/lib:/opt/sfw/lib:$LD_LIBRARY_PATH"
</code></pre>

<p>Then the compile instructions bundled with git should just be followed
directly. I had trouble installing the binaries, as git expects ginstall to be
available in the <code>$PATH</code>. I ended up adding the source directory in the <code>$PATH</code>, which works fine for most uses.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Arch_Linux_specific_configuration">2.4. Arch Linux specific configuration</h2>

<p>To install the required components, run the following command as root:</p>

<pre><code>pacman -S apache php php-apache php-gd mysql postfix sudo rsync unzip git
</code></pre>

<p>Although all of the necessary apache modules and php extensions are installed at this stage, further configuration is required to enable and tweak certain features. Critically, virtual hosts are not enabled. It is worth examining the <a href="https://wiki.archlinux.org/index.php/LAMP">Arch Linux wiki page on LAMP server set up</a> and verifying that more than one named virtual host functions properly.</p>

<p>If setting up for standalone development, see this useful <a href="https://wiki.archlinux.org/index.php/Local_Mail_Delivery_with_Postfix">wiki page</a> to configuring postfix for local mail only.</p>

<p>To ensure Apache and mysql start when the machine boots, enable the httpd and mysqld daemons by adding them to the <code>/etc/rc.conf</code> file:</p>

<pre><code>DAEMONS=(... mysqld httpd ...)
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Configure_system_requirements">3. Configure system requirements</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Create_the_Aegir_user">3.1. Create the Aegir user</h2>

<p>The provision framework of Aegir requires that the scripts run as a non-root system account, to ensure that it can correctly set the file permissions on the hosted files.</p>

<p>Also to ensure that the file permissions of the hosted sites are always as safe as can be, and especially to make sure that the web server does not have the ability to modify the code of the site, the configured system account needs to be a member of the web server group, in order to be able to correctly set the file permissions.</p>

<p>While you can choose another username, most aegir documentation assumes the Aegir user is <code>aegir</code>, its home directory is <code>/var/aegir</code> and the webserver group is <code>www-data</code>.</p>

<p>Shell commands as root:</p>

<pre><code>adduser --system --group --home /var/aegir aegir
adduser aegir www-data    #make aegir a user of group www-data
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="CentOS_specific_configuration">3.1.1. CentOS specific configuration</h3>

<p>CentOS requires special commands to create the user, use those instead:</p>

<pre>
useradd --home-dir /var/aegir aegir
gpasswd -a aegir apache
chmod -R 755 /var/aegir
</pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Solaris_specific_configuration-1">3.1.2. Solaris specific configuration</h3>

<pre>
groupadd aegir
useradd -g aegir -G webservd -d /var/aegir -s /bin/bash -c "Aegir sandbox" aegir
chown aegir:aegir /var/aegir
</pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Arch_Linux_specific_configuration-2">3.1.3. Arch Linux specific configuration</h3>

<pre>
useradd --system --groups http --home /var/aegir --create-home aegir
chmod -R 755 /var/aegir
</pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Webserver_configuration">3.2. Webserver configuration</h2>

<p>Aegir supports two popular web servers, Apache and Nginx.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Apache_configuration">3.2.1. Apache configuration</h3>

<p>Aegir assumes a few Apache modules are available on the server, and generates its own configuration files. The way we enable this is by symlinking a single file which contains all the configuration necessary. In Debian-based systems, you should symlink this file inside <code>/etc/apache2/conf.d</code> that will be parsed on startup or alternatively you can place include that file in your apache.conf/httpd.conf. We prefer the former. In other systems there are similar ways to accomplish this. Consult your OS's documentation if unsure.</p>

<p>If you are on a <strong>Debian-based</strong> system, you will also need to enable the mod_rewrite module manually.</p>

<p>Run the following shell commands as root. First, configure Apache to enable RewriteEngine:</p>

<pre><code>a2enmod rewrite
</code></pre>

<p>Finally, create a symlink from an apache configuration file to a folder within the /var/aegir/:</p>

<pre><code>ln -s /var/aegir/config/apache.conf /etc/apache2/conf.d/aegir.conf  
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h4 id="Ubuntu_14.04_specific_Apache_configuration">3.2.1.1. Ubuntu 14.04+ specific Apache configuration</h4>

<p>Ubuntu 14.04 departs from Debian and previous Ubuntu Apache setup in that it doesn't use <code>/etc/apache2/conf.d</code> any more and better separates out <code>sites-enabled</code> from <code>conf-enabled</code> configurations. So:</p>

<pre><code>ln -s /var/aegir/config/apache.conf /etc/apache2/conf-available/aegir.conf  
a2enconf aegir
</code></pre>

<p><strong>Do not reload/restart Apache if prompted to after running these commands, it will fail.</strong></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h4 id="CentOS_specific_Apache_configuration">3.2.1.2. CentOS specific Apache configuration</h4>

<p>On <strong>CentOS</strong>, mod_rewrite is enabled by default and you can create the following symlink:</p>

<pre><code>ln -s /var/aegir/config/apache.conf /etc/httpd/conf.d/aegir.conf
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h4 id="Arch_Linux_specific_Apache_configuration">3.2.1.3. Arch Linux specific Apache configuration</h4>

<p>On <strong>Arch Linux</strong>, mod_rewrite is also enabled by default. Add the aegir apache configuration include file to the httpd.conf file:</p>

<pre><code>echo "Include /var/aegir/config/apache.conf" &gt;&gt; /etc/httpd/conf/httpd.conf
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h4 id="Other_systems-_Apache_configuration">3.2.1.4. Other systems' Apache configuration</h4>

<p>In other systems that do not have a conf.d directory, this could also work:</p>

<pre>
echo "Include /var/aegir/config/apache.conf" &gt;&gt; /etc/apache2/httpd.conf
</pre>

<p><strong>N.B.:</strong></p>

<ul>
<li>A standard umask of 022 is assumed. This is the default on most systems.</li>
<li>For more information, see the <a href="../../../../462/index.html">common installation errors</a>.</li>
<li>For all OSes, the installer script creates the configuration file referenced by the newly created symlink/or file referenced in the Apache config file.</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Nginx_configuration">3.2.2. Nginx configuration</h3>

<p>(If you just succeeded in installing Apache, please skip this section.)</p>

<p>Aegir assumes standard Nginx configuration is available on the server, and generates its own configuration files. The way we enable this is by symlinking a single file which contains all the configuration necessary. In Debian-based systems, you should symlink this file inside <code>/etc/nginx/conf.d</code> that will be parsed on startup.</p>

<p>Please make sure your nginx installation is up and running before continuing. On Ubuntu 12.04 Server, for instance, you must edit /etc/nginx/nginx.conf and uncomment the line "types_hash_max_size 2048;" in order for nginx to start successfully.</p>

<p>Shell command as root::</p>

<pre><code>ln -s /var/aegir/config/nginx.conf /etc/nginx/conf.d/aegir.conf
</code></pre>

<p><strong>Do not reload/restart Nginx after running these commands, it will fail.</strong></p>

<p>The installer script creates the configuration file referenced by the newly created symlink.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="PHP_configuration">3.3. PHP configuration</h2>

<p>Some complex installation profiles or distributions require a PHP memory limit that is higher than the default. To avoid common errors when installing sites on some distributions, the PHP command line tool should be configured to use 192Mb 
of RAM.</p>

<p>Change the memory_limit directive in /etc/php5/cli/php.ini to read:</p>

<pre><code>memory_limit = 192M      ; Maximum amount of memory a script may consume (192MB)
</code></pre>

<p>Most modern Drupal sites require around 96M or even 128M of RAM for certain operations. This is far more than what is provided by the default PHP configuration.</p>

<p>Change the memory_limit directive in /etc/php5/apache2/php.ini to read:</p>

<pre><code>memory_limit = 128M      ; Maximum amount of memory a script may consume (128MB)
</code></pre>

<p>If your distributions require more memory than these limits, then use some common sense and update it as appropriate to suit your individual needs.</p>

<p>For Aegir 3, make sure you've installed the <a href="https://www.drupal.org/requirements/php#extensions">required PHP extensions</a>, particularly the image library (php-gd).</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="RHEL_6_specific_configuration-3">3.3.1. RHEL 6 specific configuration</h3>

<p>The default php.ini configuration beyond the above changes also requires that the timezone be set for your location. Otherwise, you get fun errors and warnings during the host-master install step.</p>

<ol>
<li>sudo vi /etc/php.ini</li>
<li>enter your password</li>
<li>/zone (this will bring you to the date specific timezone module area</li>
<li><p>Remove the semi colon in front of date.timezone and enter your <a href="http://www.php.net/manual/en/timezones.php">specific timezone</a>.</p>

<p><div class="codeblock"><code>[Date]<br />&nbsp; ; Defines the default timezone used by the date functions<br />&nbsp; ; <a href="http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone<br />" title="http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone<br />">http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone<br /></a>&nbsp; date.timezone = Your Time Zone Goes Here </code></div></p></li>
<li><p>Restart apache to compile these changes. <code> sudo httpd -k graceful </code></p></li>
</ol>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Arch_Linux_specific_configuration-4">3.3.2. Arch Linux specific configuration</h3>

<p>Make the following changes to the php.ini file (<code>/etc/php/php.ini</code>):</p>

<p>Add <code>:/var/aegir/</code> to the <code>open_basedir</code> directive:</p>

<pre><code>open_basedir = /srv/http/:/home/:/tmp/:/usr/share/pear/:/var/aegir/
</code></pre>

<p>Add <code>date.timezone</code> value as per <a href="http://php.net/date.timezone">PHP's runtime configuration instructions</a> - <em>this is an example</em>:</p>

<pre><code>date.timezone = Europe/London
</code></pre>

<p>Modify the <code>memory_limit</code> directive:</p>

<pre><code>memory_limit = 192M
</code></pre>

<p>Uncomment</p>

<pre><code>extension=posix.so
extension=mysqli.so
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Sudo_configuration">3.4. Sudo configuration</h2>

<p>Next, we need to give the aegir user permission to execute the Apache2 command to restart the web server without entering a password.</p>

<p>Create a file at <code>/etc/sudoers.d/aegir</code> and add the following:</p>

<pre>
Defaults:aegir  !requiretty
aegir ALL=NOPASSWD: /usr/sbin/apache2ctl
</pre>

<p>After saving, change the permissions on the file:</p>

<pre><code>chmod 0440 /etc/sudoers.d/aegir
</code></pre>

<p><strong>Note</strong> - the path to your apache2ctl program may differ from this example. On some systems it may also be called 'apachectl' instead of apache2ctl. Adjust to suit your own requirements.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="CentOS_Linux_specific_sudo_configuration">3.4.1. CentOS Linux specific sudo configuration</h3>

<p>For CentOS apache2ctl is apachectl and you should use this instead, as root::</p>

<pre><code>visudo
</code></pre>

<p>This command opens an editor to allow you to edit the /etc/sudoers file.  Add the following to the end of the file (specific directions cannot be given since this depends on what editor you're using):</p>

<pre><code>Defaults:aegir  !requiretty
aegir ALL=NOPASSWD: /usr/sbin/apachectl
</code></pre>

<p><strong>Note</strong> - the <code>!requiretty</code> bit is to make aegir able to run sudo even though it's not attached to a terminal. By default CentOS enforces requiretty so this exception is necessary.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Nginx_specific_configuration">3.4.2. Nginx specific configuration</h3>

<p>For those using Nginx, set the sudoers line as follows</p>

<pre><code>aegir ALL=NOPASSWD: /etc/init.d/nginx
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="DNS_configuration">3.5. DNS configuration</h2>

<p>Aegir requires a properly configured "FQDN" (Fully Qualified Domain Name) be assigned to the machine. In practice, this means that the hostname returned by the <code>hostname</code> and <code>uname -n</code> shell commands should resolve to the IP address for this server, and vice versa.</p>

<p>If you only intend to use Aegir on a single server, it is acceptable for the resolved IP address to be the '127.0.0.1' loopback address.</p>

<p>If you intend to manage multiple servers using Aegir, you will need to make sure that the IP address is the public IP of this server.</p>

<p>You can add multiple entries to your /etc/hosts file for testing purposes, for example:</p>

<pre><code>127.0.0.1 aegir.example.com example.com test1.example.com test2.example.com test3.example.com
</code></pre>

<p>Then you can use test1.example.com to create your first site.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Database_configuration">3.6. Database configuration</h2>

<p>Aegir supports MySQL right now. It is best to install the MySQL server using your Linux distribution's package manager.</p>

<p>Shell commands as root::</p>

<pre><code>apt-get install mysql-server
</code></pre>

<p>To make sure that the Aegir backend, and all the possible web servers can reach your database server, you need to configure mysql to listen on all the public IP addresses available to it.</p>

<p>Again, as root, edit the MySQL configuration file <code>/etc/mysql/my.cnf</code> configuration line to comment out by placing a # at the beginning of the line as follow:</p>

<p>Before</p>

<pre><code>bind-address        = 127.0.0.1
</code></pre>

<p>After</p>

<pre><code># bind-address      = 127.0.0.1
</code></pre>

<p>Without this line commented out, MySQL will listen only on localhost for database connection requests.</p>

<p>Now you need to restart mysql, to clear any caches.</p>

<p>Shell command as root:</p>

<pre><code>/etc/init.d/mysql restart
</code></pre>

<p>The installer will prompt you for your MySQL root user password. The root user will be used to make administrative tasks such as creating new databases, and granting and revoking access to those databases for sites.</p>

<p>Even though MySQL is now listening on all IP's, it will not allow invalid users to connect to the databases, without the correct user accounts configured.</p>

<p>If you are concerned about MySQL being accessible in this way, you can also configure your firewall to only allow incoming connections from certain addresses. This is outside the scope of this document however.</p>

<p>Note that Aegir will ask you for your MySQL root password. If you do not want to use your regular root password for Aegir, you will need to create another root account for Aegir using a MySQL command like:</p>

<pre><code>GRANT ALL PRIVILEGES ON *.* TO 'aegir_root'@'%' IDENTIFIED BY 'password' WITH GRANT OPTION;
</code></pre>

<p>Note: If you are running your Aegir databases on a remote DB server, you will want to create this aegir_root user. The install will often fail if you're trying to use the root user on a remote database. See <a href="http://drupal.org/node/1237112">this issue</a> for details.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Ubuntu_RHEL_Arch_linux_specific_configurations">3.6.1. Ubuntu, RHEL, Arch linux specific configurations</h3>

<p><strong>NOTE</strong>: If you are running either Ubuntu 12.04 LTS, RHEL 6 or Arch Linux, you should still install MySQL in the same way as above. However, once done, you must now  remove the anonymous, passwordless login that those platforms creates by default. To do this, run:</p>

<pre><code>sudo mysql_secure_installation
</code></pre>

<p>Otherwise, Aegir will fail to install and work at all. See <a href="../../../../../faq/index.html#Install_fails_with_-dummy_connection_failed_to_fail-_on_Ubuntu_12.04_LTS">this FAQ entry</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="RHEL_6_specific_configuration-5">3.6.2. RHEL 6 specific configuration</h3>

<p>In Red Hat, you may need to move a default configuration file from <code>/usr/share/mysql/</code> to <code>/etc/my.cnf</code> to view or modify any of the settings mentioned above.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Install_Aegir_components">4. Install Aegir components</h1>

<p>Next step is to install the Aegir software components themselves, that is: drush, provision and hostmaster.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Install_drush">4.1. Install drush</h2>

<p>Before installing Aegir proper, you first need to install Drush. This can be done through your operating system's package manager (Drush is shipped with <a href="http://packages.debian.org/drush">Debian</a> and <a href="http://packages.ubuntu.com/drush">Ubuntu</a> currently) or by following the <a href="http://drupalcode.org/project/drush.git/blob_plain/HEAD:/README.txt">Drush README.txt file</a> which has all the information for installing and using drush.</p>

<p><strong>Note for 1.x users</strong>: you should use Drush version 4. Aegir 1.x does <strong>not</strong> support Drush 5. Also note there is a <a href="http://drupal.org/node/1041386">bug in Drush 4.0 and 4.1</a> so you should use a version of Drush between 4.1 and 5.</p>

<pre>
pear channel-discover pear.drush.org
pear install drush/drush-4.6.0
</pre>

<p><strong>Note for 2.x users</strong>: you need to install a minimum of Drush version 5.10, though Drush 6.x is recommended. In this case, you may be able to install the regular release:</p>

<p><strong>Note for 3.x users</strong>: you need to install a minimum of Drush version 6,some time you need apt-get install 
php-console-table before you become the Aegir user:</p>

<pre>
pear channel-discover pear.drush.org
pear install drush/drush
</pre>

<p>This should install Drush system-wide, but if you follow the manual install, you may end up with Drush in a non-standard location (traditionally <code>/var/aegir/drush/drush.php</code>), in which case you will need to add that directory to your path or use the following symlink:</p>

<pre>
ln -s /var/aegir/drush/drush /usr/local/bin/drush
</pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Arch_Linux_specific_configuration-6">4.1.1. Arch Linux specific configuration</h3>

<p>It seems that Arch's PHP environment needs to be modified for Drush:</p>

<pre>
mkdir /var/aegir/.drush
cp /etc/php/php.ini /var/aegir/.drush/
</pre>

<p>Edit <code>/var/aegir/.drush/php.ini</code> to remove the values after <code>open_basedir =</code>, as this will any <code>open_basedir</code> values are likely to cause Drush to fail.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Stop_Now_become_the_Aegir_user">4.2. Stop! Now become the Aegir user!</h2>

<p>The remaining of this manual assumes you are running as the Aegir user. Things will go very wrong if you do not change your shell credentials to become that user. You can do this by running the following command as root:</p>

<pre>
su -s /bin/bash - aegir
</pre>

<p>If this fails because <code>/bin/bash</code> doesn't exist, try using <code>/bin/sh</code>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Install_provision">4.3. Install provision</h2>

<p>Once Drush is installed you should be able to install the latest recommended Provision release using the following drush command:</p>

<p><strong>Note for 1.x users</strong>:</p>

<pre>
drush dl --destination=/var/aegir/.drush provision-6.x
</pre>

<p><strong>Note for 2.x users</strong>:</p>

<pre>
drush dl --destination=/var/aegir/.drush provision-6.x-2.0
drush cache-clear drush
</pre>

<p><strong>Note for 3.x users</strong>:
replace provison-6.x-2.0 to provison-7.x</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Running_hostmaster-install">4.4. Running hostmaster-install</h2>

<p>Once you have downloaded drush and provision, you can just install provision in the commands directory of Drush (either ~aegir/.drush or /usr/share/drush/commands), if that's not already done. Once provision is properly installed, you can install all other aegir components using the hostmaster-install command:</p>

<pre><code>drush hostmaster-install
</code></pre>

<p>You will be prompted for the required information if not provided on the commandline. See the inline help for the available options:</p>

<pre><code>drush help hostmaster-install
</code></pre>

<p>For example, to install the frontend on Nginx, use:</p>

<pre><code>drush hostmaster-install --http_service_type=nginx
</code></pre>

<p><em>Note for 2.x users:</em> Drush 5 has a <em>commandfile cache</em> which you need to clear before installing Aegir:</p>

<pre><code>drush cache-clear drush
</code></pre>

<p>It is imperative that you provide a valid FQDN to the installer. This is used for database GRANTs. Remote web servers depend on the FQDN being resolvable in order to connect back to your Aegir master server if it is used as your database server for managed sites.</p>

<p>Upon completion of the installation, the traditional Drupal 'Welcome' e-mail will be sent to the e-mail address specified by <code>--client_email=(your e-mail)</code> or if not provided as a command line switch, the address prompted by the installer process. This e-mail address will also be used as the default e-mail address of the first user and client in Aegir, but can be changed later.</p>

<p>There are other commandline switches available, documented in <code>drush help hostmaster-install</code>, as usual.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Arch_Linux_specific_configuration-7">4.4.1. Arch Linux specific configuration</h3>

<pre>
drush hostmaster-install --web_group=http
</pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Install_the_Hosting_Queue_Daemon">5. Install the Hosting Queue Daemon</h1>

<p>For Aegir 2.x installs, using the Hosting Queued Daemon (hosting_queued) is highly recommended. For Aegir 1.x, check out <a href="http://drupal.org/project/hosting_queue_runner" title="http://drupal.org/project/hosting_queue_runner">http://drupal.org/project/hosting_queue_runner</a> instead.</p>

<p>These instructions will install the daemon to run as a regular service in /etc/init.d/. Instructions will vary according to platforms, but the following should work in Debian, running as root.</p>

<ol>
<li><p>Install the init script in place</p>

<pre><code>cp &lt;hostmaster_platform_root&gt;/profiles/hostmaster/modules/hosting/queued/init.d.example /etc/init.d/hosting-queued
</code></pre></li>
<li><p>Setup symlinks and runlevels</p>

<pre><code>update-rc.d hosting-queued defaults
</code></pre></li>
<li><p>Start the daemon</p>

<pre><code>/etc/init.d/hosting-queued
</code></pre></li>
</ol>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Checkpoint_Finished">6. Checkpoint / Finished!</h1>

<p>At this point, you have checked out all the code and setup your basic Drupal system (Drupal core, hosting, hostmaster and eldir) that will be the Aegir frontend and the backend system (provision and drush). Your filesystem layout should look something like this:</p>

<pre>
 /var/aegir/hostmaster-1.x/
 /var/aegir/hostmaster-1.x/profiles/hostmaster/
 /var/aegir/hostmaster-1.x/profiles/hostmaster/modules/admin_menu/
 /var/aegir/hostmaster-1.x/profiles/hostmaster/modules/hosting/
 /var/aegir/hostmaster-1.x/profiles/hostmaster/modules/install_profile_api/
 /var/aegir/hostmaster-1.x/profiles/hostmaster/modules/jquery_ui/
 /var/aegir/hostmaster-1.x/profiles/hostmaster/modules/modalframe/
 /var/aegir/hostmaster-1.x/profiles/hostmaster/themes/eldir/
 /var/aegir/hostmaster-1.x/sites/aegir.example.com/
 /var/aegir/config/server_master/apache.conf
 /var/aegir/config/server_master/apache/conf.d/
 /var/aegir/config/server_master/apache/vhost.d/
 /var/aegir/config/server_master/apache/platform.d/
 /var/aegir/backups/
 /var/aegir/drush/drush.php
 /var/aegir/.drush/drush_make/
 /var/aegir/.drush/provision/
</pre>

<p>Variations on this are acceptable (for example, the Drush Debian package works out of <code>/usr/bin/drush</code> and that's fine), but you are better to stick with the defaults if you really want to get through this.</p>

<p>The installation will provide you with a one-time login URL to stdout or via an e-mail. Use this link to login to your new Aegir site for the first time.</p>

<p>For troubleshooting this process and resulting install, see the <a href="../../../../462/index.html">common installation problems page</a>.</p>

<p>You may also want to read on with <a href="../../../../../content/administrator/aegir-installed-now-what/index.html">what you can do with Aegir</a> now that it is installed.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-292.html?destination=node%2F389%23comment-form">Login</a> or <a href="../../../../../user/register/index-292.html?destination=node%2F389%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../389/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-417" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../417/index.html">Mac OS X installation instructions</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><h2>Apache</h2>

<p>For Apache based installation hints see <a href="../../../../../content/apache-mysql-php-aegir/index.html">Apache / mySQL / PHP / Aegir</a></p>

<h2>Nginx</h2>

<p>Nginx is more performant than Apache, if you are interested in setting Aegir up using nginx <a href="https://drupal.org/user/139189">Brian Gilbert</a> from <a href="http://realityloop.com/">Realityloop</a> has created a script to install everything that you need on a clean Mac (not already running anything on port 80), see <a href="http://rl.cm/osxaegirscript">OSX Aegir Installer</a> on github.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-46.html?destination=node%2F417%23comment-form">Login</a> or <a href="../../../../../user/register/index-46.html?destination=node%2F417%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-46.html?destination=node%2F417%23comment-form">Login</a> or <a href="../../../../../user/register/index-46.html?destination=node%2F417%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-932" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/apache-mysql-php-aegir/index.html">Apache / mySQL / PHP / Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This is a helper file to the canonical <a href="../../../../../installing/manual/index.html">manual install process</a>. It is aimed at
helping you install Aegir on Mac OS X. Since PHP and MySQL support on OS X is fairly limited and complicated, a separate documentation page was created for that part of the documentation. You should follow this page all the way through and then proceed with the regular install, <a href="../../../../389/index.html#Stop_Now_become_the_Aegir_user">step 4: becoming the aegir user</a>.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc4">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Special_software_requirements"><span class="toc-number">1. </span>Special software requirements</a></li>
	<li class="toc-level-1"><a href="#Configure_system_requirements"><span class="toc-number">2. </span>Configure system requirements</a></li>
</ol>
</div>
</div>

<h1 id="Special_software_requirements">1. Special software requirements</h1>

<p>While Mac OS X comes with Apache &amp; PHP (and even MySQL on the Server
version), the version of PHP shipped with 10.6 Snow Leopard is 5.3.x
and thus may not work with Aegir (as of the 0.4alpha-era) and various
other software. If you're running 10.5 Leopard, it may work out of the
box, but I haven't tested it.</p>

<p>There are several different ways to get Apache, PHP 5.2, and MySQL 5
onto a Mac OS X machine. I give detailed instructions for MacPorts
below, but if that's a bit more than you're ready to bite off right
now, feel free to use an alternative approach.</p>

<p>One such alternative is MAMP. There is a good but outdated HOWTO for
installing Aegir on Mac OS X 10.6 (Snow Leopard) using MAMP located
here: <a href="http://groups.drupal.org/node/30270" title="http://groups.drupal.org/node/30270">http://groups.drupal.org/node/30270</a></p>

<p>MAMP stands for Mac, Apache, MySQL, and PHP and is the Mac equivalent
of "LAMP". It is a self-contained package of all of these programs
with a nice graphical installer and control panel.  You can find it
here: <a href="http://www.mamp.info/" title="http://www.mamp.info/">http://www.mamp.info/</a></p>

<p>MAMP is pretty straightforward, but it's also not very flexible
(IMHO).  While certainly not without its own headaches, MacPorts is a
decently powerful way to sanely manage a healthy stack of open source
UNIX software on your Mac. Since this is what I use, I'm going to
assume MacPorts is in use for the rest of this HINTS file. I have also
only tested this on Mac OS X 10.6 Snow Leopard.</p>

<p>If you don't yet have MacPorts installed, go here to get it:
<a href="http://www.macports.org/install.php" title="http://www.macports.org/install.php">http://www.macports.org/install.php</a></p>

<p>Once it's installed, quit and re-launch your Terminal before
continuing.  Otherwise MacPorts won't yet be in your PATH.</p>

<p>The first two commands below are optional but recommended.</p>

<p><div class="codeblock"><code>&nbsp; sudo port selfupdate<br />&nbsp; sudo port upgrade outdated<br />&nbsp; sudo port install apache2 mysql5-server git-core unzip php52 php5-posix php5-gd php5-apc +mysql5</code></div></p>

<p>php5-apc is optional, but highly recommended as it will significantly increase
PHP performance.</p>

<p>Watch the output of the last port command carefully, as there are
usually some boring tasks for you to perform once the install is
done. You'll be wishing you were running Ubuntu/Debian and apt-get by
the time you're done.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Configure_system_requirements">2. Configure system requirements</h1>

<p>Next we'll create the aegir user and add it to the _www group. This
part is very different on Mac OS X than Linux or most other
Unices. Must be a NeXTism. The command we will use he is "dscl", which
is a short for Directory Service Command Line. In OSX 10.3 and
earlier, that command is "nicl" (short for Net Info Command Line). It is also
possible to create the user using the "Workgroup Manager" utility included with
OS X Server. To obtain Workgroup Manager for the OS X Client, download the
"Server Admin Tools" from Apple. For example, for Mac OS X 10.6, the admin tools
can be found at:</p>

<p><a href="http://support.apple.com/downloads/Server_Admin_Tools_10_6" title="http://support.apple.com/downloads/Server_Admin_Tools_10_6">http://support.apple.com/downloads/Server_Admin_Tools_10_6</a></p>

<p><div class="codeblock"><code>&nbsp; sudo dscl . -create /Users/aegir NFSHomeDirectory /var/aegir</code></div></p>

<p>Now you need to find the next spare UID to assign the user.</p>

<p>Here's how you find out on your system:</p>

<p><div class="codeblock"><code>&nbsp;&nbsp; sudo dsexport users.out /Local/Default dsRecTypeStandard:Users</code></div></p>

<p>Then open the file users.out in a text editor, search for the highest
5xx user ID and add 1 to it (in your brain, not in the file). So if
you find 506 but no 507, use 507. When you're done, delete users.out
to be safe.</p>

<p><div class="codeblock"><code>&nbsp;&nbsp; sudo rm users.out</code></div></p>

<p>Now assign this UID to the aegir user, replacing "5xx" with the UID.</p>

<p><div class="codeblock"><code>&nbsp;&nbsp; sudo dscl . -create /Users/aegir UniqueID 5xx</code></div></p>

<pre>
!! If you're running Mac OSX Lion, you also need to assign PrimaryGroupID to the aegir user.
   sudo dscl . -create /Users/aegir PrimaryGroupID XXX
</pre>

<p>Set a secure password for the aegir user, as it needs shell access.</p>

<p><div class="codeblock"><code>sudo passwd aegir</code></div></p>

<p>Create the aegir home directory and set its permissions.</p>

<p><div class="codeblock"><code>sudo mkdir /var/aegir<br />sudo chown aegir /var/aegir<br />sudo chgrp _www /var/aegir</code></div></p>

<p>Add the aegir user to the _www group. This is the group Apache runs as.</p>

<p><div class="codeblock"><code>sudo dscl . -append /Groups/_www GroupMembership aegir</code></div></p>

<p>Give the aegir user the ability to restart Apache.</p>

<p><div class="codeblock"><code>&nbsp;&nbsp; sudo mv /usr/sbin/apachectl /usr/sbin/apachectl-apple<br />&nbsp;&nbsp; sudo ln -s /opt/local/apache2/bin/apachectl /usr/sbin/apachectl<br />&nbsp;&nbsp; sudo visudo</code></div></p>

<p>Go to the last line of the file and add the following.</p>

<p><div class="codeblock"><code>&nbsp;&nbsp; aegir ALL=NOPASSWD: /usr/sbin/apachectl</code></div></p>

<p>Save the file and exit your text editor.</p>

<p>Next configure Apache to include the Aegir config.</p>

<p><div class="codeblock"><code>&nbsp;&nbsp; echo &quot;Include /var/aegir/config/apache.conf&quot; &gt;&gt; /opt/local/apache2/conf/httpd.conf</code></div></p>

<p>Configuring your MySQL database and user accounts is the same as in
the INSTALL.txt file. But you probably want to add the path to its
executables to your user's PATH and the aegir user's PATH.</p>

<p><div class="codeblock"><code>&nbsp;&nbsp; echo &#039;export PATH=/opt/local/lib/mysql5/bin:$PATH&#039; &gt;&gt; ~/.profile<br />&nbsp;&nbsp; su - aegir<br />&nbsp;&nbsp; Password: (the password you setup earlier)<br />&nbsp;&nbsp; echo &#039;export PATH=/opt/local/lib/mysql5/bin:$PATH&#039; &gt;&gt; ~/.profile<br />&nbsp;&nbsp; exit</code></div></p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-393.html?destination=node%2F932%23comment-form">Login</a> or <a href="../../../../../user/register/index-393.html?destination=node%2F932%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../932/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-931" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/nginx-mariadb-php-aegir-memp%c3%a6/index.html">nginx / MariaDB / PHP / Aegir (MEMP)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>The instructions that used to be here are now outdated, instead use the <a href="http://rl.cm/osxaegirscript">OSXAegirInstaller</a> created by <a href="https://drupal.org/user/139189">Brian Gilbert</a> of <a href="http://realityloop.com/">Realityloop</a>.</strong></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-47.html?destination=node%2F931%23comment-form">Login</a> or <a href="../../../../../user/register/index-47.html?destination=node%2F931%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-47.html?destination=node%2F931%23comment-form">Login</a> or <a href="../../../../../user/register/index-47.html?destination=node%2F931%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2855" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/installing/manual/centos-6x-aegir-install-guide/index.html">Centos 6.x Aegir Install Guide</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_520 first"><a href="../../../../../category/keywords/centos-install-guide/index.html" rel="tag" title="">Centos Install Guide</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>There are 2 methods of installing AEgir on CentOS both are the same but one is scripted and the other is manual and is documented below.</p>

<h2>Scripted</h2>

<p>The script can be found at <a href="https://github.com/marafa/aegir/tree/master/version2" title="https://github.com/marafa/aegir/tree/master/version2">https://github.com/marafa/aegir/tree/master/version2</a></p>

<p>NB. There is preliminary work to fix selinux at <a href="https://github.com/marafa/aegir/blob/master/aegir_selinux.sh" title="https://github.com/marafa/aegir/blob/master/aegir_selinux.sh">https://github.com/marafa/aegir/blob/master/aegir_selinux.sh</a>.
Feedback is quite welcome as well as git pulls.</p>

<h2>Explanation</h2>

<p>Connect to the server via ssh as root user.</p>

<blockquote>
  <p>ssh root@000.000.000.000</p>
</blockquote>

<h2>Install system requirements</h2>

<blockquote>
  <p>yum install httpd php php-mysql php-cli php-gd php-process php-pear php-mbstring php-xml php-soap sudo rsync git postfix tree wget cronie unzip mysql-server mlocate nmap samba samba-client samba-common vim</p>
</blockquote>

<p>Note: The following packages are not required but are very useful to include git wget mlocate nmap samba samba-client samba-common vim</p>

<h2>SElinux</h2>

<p>Make sure Security-Enhanced Linux is disabled as it creates install problems.</p>

<blockquote>
  <p>vim /etc/selinux/config
  Make sure SELINUX=disabled</p>
</blockquote>

<p>If was SELINUX=enabled then we need to restart.</p>

<blockquote>
  <p>shutdown -r now</p>
</blockquote>

<p>Note: I am not sure if it can be enabled at the end I have never tried.</p>

<h2>Create the Aegir user</h2>

<p>The provision framework of Aegir requires that the scripts run as a non-root system account, to ensure that it can correctly set the file permissions on the hosted files.</p>

<p>Also to ensure that the file permissions of the hosted sites are always as safe as can be, and especially to make sure that the web server does not have the ability to modify the code of the site, the configured system account needs to be a member of the web server group, in order to be able to correctly set the file permissions.</p>

<p>While you can choose another username, most aegir documentation assumes the Aegir user is aegir, its home directory is /var/aegir and the webserver group is www-data.</p>

<blockquote>
  <p>useradd --home-dir /var/aegir aegir</p>
  
  <p>gpasswd -a aegir apache</p>
  
  <p>chmod -R 755 /var/aegir</p>
</blockquote>

<h2>Apache configuration</h2>

<p>Start Apache</p>

<blockquote>
  <p>service httpd start</p>
</blockquote>

<p>Make apache start automatically after reboot.</p>

<blockquote>
  <p>chkconfig httpd on</p>
</blockquote>

<p>We need to create a symbolic link between aegir and apache.</p>

<blockquote>
  <p>ln -s /var/aegir/config/apache.conf /etc/httpd/conf.d/aegir.conf</p>
</blockquote>

<h2>PHP configuration</h2>

<blockquote>
  <p>vim /etc/php.ini</p>
</blockquote>

<p>Increase the memory limit as complex installation profiles or distributions require a PHP memory limit that is higher than the default (128M)</p>

<blockquote>
  <p>memory_limit = 192M</p>
</blockquote>

<p>Set Date Zone to your time zone see <a href="http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone" title="http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone">http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone</a></p>

<blockquote>
  <p>date.timezone = </p>
</blockquote>

<h2>Sudo configuration</h2>

<p>Next, we need to give the aegir user permission to execute the Apache2 command to restart the web server without entering a password.</p>

<blockquote>
  <p>visudo</p>
</blockquote>

<p>Add to end of file</p>

<blockquote>
  <p>Defaults:aegir  !requiretty</p>
  
  <p>aegir ALL=NOPASSWD: /usr/sbin/apachectl</p>
</blockquote>

<h2>DNS configuration</h2>

<p>Aegir requires a properly configured "FQDN" (Fully Qualified Domain Name) be assigned to the machine. In practice, this means that the hostname returned by the hostname and uname -n shell commands should resolve to the IP address for this server, and vice versa.</p>

<p>If you only intend to use Aegir on a single server, it is acceptable for the resolved IP address to be the '127.0.0.1' loopback address.</p>

<p>If you intend to manage multiple servers using Aegir, you will need to make sure that the IP address is the public IP of this server.</p>

<p>You can add multiple entries to your /etc/hosts file for testing purposes, for example:#&gt; &gt;vim /etc/hosts
Add your ip and hostname</p>

<blockquote>
  <p>000.000.000.000 hostname</p>
</blockquote>

<h2>Database configuration</h2>

<p>Start mysql</p>

<blockquote>
  <p>service mysqld start</p>
</blockquote>

<p>Make mysql start automatically after reboot.</p>

<blockquote>
  <p>chkconfig mysqld on</p>
</blockquote>

<p>Configure Mysql</p>

<blockquote>
  <p>/usr/bin/mysql_secure_installation</p>
</blockquote>

<p>Recommended:</p>

<blockquote>
  <p>Set root Password</p>
  
  <p>Remove anonymous users? y</p>
  
  <p>Disallow root login remotely? y</p>
  
  <p>Remove test database and access to it? y</p>
  
  <p>Reload privilege tables now? y</p>
</blockquote>

<h2>Install drush</h2>

<blockquote>
  <p>pear channel-discover pear.drush.org</p>
  
  <p>pear install drush/drush-4.5.0</p>
</blockquote>

<p>Check if drush works
If you get PHP Fatal error:  Class 'Console_Table' not found then</p>

<blockquote>
  <p>pear install Console_Table</p>
</blockquote>

<h2>Stop! Now become the Aegir user!</h2>

<p>The remaining of this manual assumes you are running as the Aegir user. Things will go very wrong if you do not change your shell credentials to become that user.</p>

<blockquote>
  <p>su -s /bin/bash - aegir</p>
</blockquote>

<p>Install provision</p>

<blockquote>
  <p>drush dl --destination=/var/aegir/.drush provision-6.x</p>
</blockquote>

<p>Clear the drush cache</p>

<blockquote>
  <p>drush cache-clear drush</p>
</blockquote>

<p>Run hostmaster-install</p>

<blockquote>
  <p>drush hostmaster-install</p>
</blockquote>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-48.html?destination=node%2F2855%23comment-form">Login</a> or <a href="../../../../../user/register/index-48.html?destination=node%2F2855%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-48.html?destination=node%2F2855%23comment-form">Login</a> or <a href="../../../../../user/register/index-48.html?destination=node%2F2855%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-887" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../installing/manual/manual-install-web-cluster-aegir-using-nginx/index.html">Manual install of a web cluster aegir using nginx</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>These are some really rough notes on how to go about creating a 4 server aegir installation (aegir, mysql, web1, web2).</p>

<p>Adapted from reading through the BOA project and my own experimentation.</p>

<p>** Note -- regarding the wildcard SSL, your sites will need some configuration in your settings.php or local.settings.php to check for the X-Forwarded-Proto headers.  I can't recall if the wildcard SSL config.</p>

<p>These notes also assume the last Ubuntu LTS -- 10.04/Lucid.</p>

<pre>
aegirmysql:

sudo apt-get update
sudo apt-get upgrade
sudo apt-get install vim mysql-server


_USER="aegir"
_DOMAIN="aegir.domain.com"
_AEGIR_HOST="aegir.server.hostname"
_AEGIR_HOST_IP="123.456.789.01"
_AEGIR_PASSWORD="password"

#AEGIR_DB_USER=aegir_root
#AEGIR_DB_PASS=`echo $RANDOM:\`date\`:$AEGIR_HOST | openssl md5`

echo "[client]
user=root
password=password" &gt;&gt; .my.cnf

mysql -uroot mysql&lt;&lt;EOFMYSQL
GRANT ALL PRIVILEGES ON *.* TO '$_USER'@'$_DOMAIN' IDENTIFIED BY 'password' WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO '$_USER'@'$_AEGIR_HOST' IDENTIFIED BY 'password' WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO '$_USER'@'$_AEGIR_HOST_IP' IDENTIFIED BY 'password' WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO '$_USER'@'localhost' IDENTIFIED BY 'password' WITH GRANT OPTION;
FLUSH PRIVILEGES;
EOFMYSQL


========================

# <a href="https://launchpad.net/~brianmercer/+archive/nginx" title="https://launchpad.net/~brianmercer/+archive/nginx">https://launchpad.net/~brianmercer/+archive/nginx</a>
# <a href="https://launchpad.net/~nginx/+archive/php5" title="https://launchpad.net/~nginx/+archive/php5">https://launchpad.net/~nginx/+archive/php5</a>

aegircontrol:

sudo apt-get update
sudo apt-get upgrade

sudo mkdir -p /var/www/nginx-default

#php5-suhosin
CATHOSTDEBDEPS="git-core git-doc mysql-client-5.1 vim nginx-custom drush postfix php5-cli php5-mysql php5-fpm php5-gd rsync unzip bzr patch curl"
sudo apt-get -V install $CATHOSTDEBDEPS

#postfix config already sorted

sudo adduser --system --group --home /var/aegir aegir
sudo adduser aegir www-data
sudo chsh -s /bin/bash aegir

#patch drush, re: ereg()

#as root:
echo "aegir ALL=NOPASSWD: /etc/init.d/nginx" &gt;&gt; /etc/sudoers

ln -s /var/aegir/config/nginx.conf /etc/nginx/conf.d/aegir.conf
#disable directives in nginx.conf:
#types_hash_max_size
#tcp_nopush
#error_log
invoke-rc.d nginx restart

#install SSL cert to:
/etc/ssl/private/domain.com.cert.pem
cd /etc/ssl/private/
ln -s domain.com.cert.pem nginx-wild-ssl.crt
ln -s domain.com.cert.pem nginx-wild-ssl.key

#install SSL config to:
/var/aegir/config/server_master/nginx/pre.d/nginx_wild_ssl.conf
#TODO: also install for /var/aegir/config/server_aegirweb{1,2}.host.name

#as aegir:
cd ~

mkdir .ssh
ssh-keygen -t rsa

ln -s /usr/share/drush /var/aegir/drush
mkdir ~/.drush
cd ~/.drush
wget -c <a href="http://ftp.drupal.org/files/projects/provision-6.x-1.3.tar.gz" title="http://ftp.drupal.org/files/projects/provision-6.x-1.3.tar.gz">http://ftp.drupal.org/files/projects/provision-6.x-1.3.tar.gz</a>
tar -zxf provision-6.x-1.3.tar.gz

#htaccess password bit
mkdir ~/tmp
cd ~/tmp
git clone --branch develop git://github.com/computerminds/aegir_http_basic.git
#must be develop branch to use crypt() and for nginx support
cp -r aegir_http_basic/provision ~/.drush/provision/aegir_http_basic
cp -r aegir_http_basic/hosting ~/hostmaster-6.x-1.3/profiles/hostmaster/modules/hosting/http_basic_auth
#set directory permissions? -- patch aegir/http_basic module to do so?

_DOMAIN="aegir.domain.com"
_USER="aegir"
#_AEGIR_HOST=`uname -n`
_AEGIR_HOST="aegir.server.hostname"
_AEGIR_HOME="$HOME"
_AEGIR_DB_PASS="password"
_AEGIR_DB_HOST="mysql.server.fqdn"
_AEGIR_VERSION="1.3"
#_AEGIR_ROOT="$_AEGIR_HOME/hostmaster-$_AEGIR_VERSION"
_ADM_EMAIL="admin@domain.com""
_WEBG=www-data
_USRG=users

#going vanilla
echo "drush hostmaster-install $_DOMAIN --aegir_host=$_AEGIR_HOST --aegir_db_user=$_USER --aegir_db_pass=$_AEGIR_DB_PASS --http_service_type=nginx --db_service_type=mysql --db_port=3306 --aegir_db_host=$_AEGIR_DB_HOST --client_email=$_ADM_EMAIL --script_user=$_USER --web_group=$_WEBG --profile=hostmaster -d -v"

drush hostmaster-install $_DOMAIN --aegir_host=$_AEGIR_HOST --aegir_db_user=$_USER --aegir_db_pass=$_AEGIR_DB_PASS --http_service_type=nginx --db_service_type=mysql --db_port=3306 --aegir_db_host=$_AEGIR_DB_HOST --client_email=$_ADM_EMAIL --script_user=$_USER --web_group=$_WEBG --profile=hostmaster -d -v

cd hostmaster-6.x-1.3
echo "alive" &gt;&gt; healthcheck

#enable aegir modules
drush @hostmaster en hosting_web_cluster
drush @hostmaster en hosting_alias
drush @hostmaster en hosting_http_basic_auth
#*** enable hosting client in features -- disabling client module cause WSOD on site add page

# setup aegirweb{1,2}
# test ssh to aegirweb{1,2}
# add to known_hosts

# NOTE: Aegir web clusters need to share the files, and private directories between web servers (also cache directory, if using boost module)
# Setup provision hook for NFS links
# <a href="http://drupal.org/node/1283738" title="http://drupal.org/node/1283738">http://drupal.org/node/1283738</a>

mkdir -p /var/lib/sitedata/aegir
chown -R aegir:www-data /var/lib/sitedata/aegir

mkdir -p /var/lib/sitedata/aegir/cache
chown -R aegir:www-data /var/lib/sitedata/aegir/cache


# add web servers
# add web cluster
#TODO: Add DR web servers to cluster
#TODO: Add WR, re: DR web servers &amp; firewall

# set date/time settings in Aegir

#TODO: Logrotate webserver logs

#TODO: Add an alias for the aegir user:
#aegir: "admin@domain.com""

========================

aegirweb{1,2}:
#TODO: Check puppeted stuff, fix, etc

sudo apt-get update
sudo apt-get upgrade

sudo mkdir -p /var/www/nginx-default

CATWEBDEBDEPS="mysql-client-5.1 vim nginx-custom drush postfix php5-cli php5-mysql php5-fpm php5-gd rsync unzip patch"
sudo apt-get -V install $CATWEBDEBDEPS


sudo adduser --system --group --home /var/aegir aegir
sudo adduser aegir www-data
sudo chsh -s /bin/bash aegir

#install SSL cert to:
/etc/ssl/private/domain.com.cert.pem
cd /etc/ssl/private/
ln -s domain.com.cert.pem nginx-wild-ssl.crt
ln -s domain.com.cert.pem nginx-wild-ssl.key

#install SSL config to:
/var/aegir/config/server_master/nginx/pre.d/nginx_wild_ssl.conf
#TODO: also install for /var/aegir/config/server_aegirweb{1,2}.host.name

#as root:
echo "aegir ALL=NOPASSWD: /etc/init.d/nginx" &gt;&gt; /etc/sudoers

#as aegir:
mkdir /var/aegir/.ssh
cat aegir.aegircontrol.id_rsa.pub &gt;&gt; /var/aegir/.ssh/authorized_keys2


#TODO: Logrotate webserver logs

==========================

</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-49.html?destination=node%2F887%23comment-form">Login</a> or <a href="../../../../../user/register/index-49.html?destination=node%2F887%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-49.html?destination=node%2F887%23comment-form">Login</a> or <a href="../../../../../user/register/index-49.html?destination=node%2F887%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1075" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/installing/manual/nginx-mariadb-php-fpm-single-server-installation/index.html">nginx / MariaDB / PHP-FPM Single Server Installation</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc5">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Housekeeping"><span class="toc-number">1. </span>Housekeeping</a></li>
	<li class="toc-level-1"><a href="#Install_MariaDB"><span class="toc-number">2. </span>Install MariaDB</a></li>
	<li class="toc-level-1"><a href="#Install_Nginx"><span class="toc-number">3. </span>Install Nginx</a></li>
	<li class="toc-level-1"><a href="#Install_all_the_other_stuff"><span class="toc-number">4. </span>Install all the other stuff</a></li>
	<li class="toc-level-1"><a href="#Create_the_Aegir_user"><span class="toc-number">5. </span>Create the Aegir user</a></li>
	<li class="toc-level-1"><a href="#Misc_Configuration"><span class="toc-number">6. </span>Misc Configuration</a></li>
	<li class="toc-level-1"><a href="#Install_Aegir"><span class="toc-number">7. </span>Install Aegir</a></li>
	<li class="toc-level-1"><a href="#Optional_Improvements"><span class="toc-number">8. </span>Optional Improvements</a></li>
</ol>
</div>
</div>

<p>Note: This installation process assumes that you're using a fresh install of Ubuntu 14.04 x64. If you use a lower version of Ubuntu, you may have trouble with this guide.</p>

<p>On most VPS providers, you'll be logged in as root initially. The installation process below assumes that you are logged in as root. Obviously, this is not a secure long-term solution, so once you're done with this guide, I suggest setting up public key authentication, turning off root login over SSH, and creating yourself a new unprivileged user. That's out of scope for this doc page, so you're probably <a href="http://google.com/">on your own</a> for that.</p>

<p>Finally, this document assumes that you're going to be installing aegir at aegir.example.com. Any time you see example.com, replace it with your domain.</p>

<h2 id="Housekeeping">1. Housekeeping</h2>

<p>Make sure you're up to date:</p>

<pre><code>apt-get update
apt-get upgrade
</code></pre>

<p>And that you have the the python-software-properties package (we'll need it later):</p>

<pre><code>apt-get install python-software-properties
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Install_MariaDB">2. Install MariaDB</h2>

<p>From mariadb.org:</p>

<pre><code>MariaDB is a database server that offers drop-in replacement functionality for MySQL. 
MariaDB is built by some of the original authors of MySQL, with assistance from the
broader community of Free and open source software developers. In addition to the core
functionality of MySQL, MariaDB offers a rich set of feature enhancements including
alternate storage engines, server optimizations, and patches.
</code></pre>

<p>Install MariaDB:</p>

<pre><code>apt-get install mariadb-server
</code></pre>

<p>You'll need to set your root password for the MariaDB server</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Install_Nginx">3. Install Nginx</h2>

<p>Next, install Nginx and PHP-FPM:</p>

<pre><code>apt-get install nginx php5-cli php5-mysql php5-fpm php5-gd
</code></pre>

<p>Create the default docroot for Nginx as well:</p>

<pre><code>mkdir -p /var/www/nginx-default
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Install_all_the_other_stuff">4. Install all the other stuff</h2>

<pre><code>apt-get install git-core git-doc vim drush postfix rsync unzip bzr patch curl
</code></pre>

<p>When prompted for Postfix configuration, select "Internet Site", then use "example.com" for the System mail name.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Create_the_Aegir_user">5. Create the Aegir user</h2>

<p>Easy:</p>

<pre><code>adduser --system --group --home /var/aegir aegir
adduser aegir www-data
chsh -s /bin/bash aegir
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Misc_Configuration">6. Misc Configuration</h2>

<p>Make sure the Aegir user is allowed to restart Nginx:</p>

<pre><code>echo "aegir ALL=NOPASSWD: /etc/init.d/nginx" &gt;&gt; /etc/sudoers
</code></pre>

<p>Symlink Aegir's nginx configuration into place:</p>

<pre><code>ln -s /var/aegir/config/nginx.conf /etc/nginx/conf.d/aegir.conf
</code></pre>

<p>Disable duplicated directives in <code>/etc/nginx/nginx.conf</code> (the Aegir config specifies these values as well - if you do not disable them in the main nginx.conf, nginx will fail to restart). You can just remove (or comment them out with a "#") the lines that start with the following</p>

<pre><code>types_hash_max_size
tcp_nopush
error_log
</code></pre>

<p>Then, restart Nginx:</p>

<pre><code>service nginx restart
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Install_Aegir">7. Install Aegir</h2>

<p><strong>IMPORTANT</strong> Switch to the Aegir user now: <strong>IMPORTANT</strong></p>

<pre><code>su - aegir
cd ~/
</code></pre>

<p>Download the latest Provision release:</p>

<pre><code>mkdir ~/.drush
cd ~/.drush
wget -c <a href="http://ftp.drupal.org/files/projects/provision-6.x-2.1.tar.gz" title="http://ftp.drupal.org/files/projects/provision-6.x-2.1.tar.gz">http://ftp.drupal.org/files/projects/provision-6.x-2.1.tar.gz</a>
tar -zxf provision-6.x-2.1.tar.gz
rm provision-6.x-2.1.tar.gz
</code></pre>

<p>Start the Aegir install process:</p>

<pre><code>cd ~/
drush hostmaster-install aegir.example.com \
--aegir_host="aegir.example.com" \
--http_service_type="nginx" \
--aegir_db_user="root" \
--aegir_db_pass="[YOUR ROOT DATABASE PASSWORD]" \
--db_service_type="mysql" \
--db_port=3306 \
--aegir_db_host="localhost" \
--client_email="[YOUR EMAIL ADDRESS]" \
--script_user="aegir" \
--web_group="www-data" \
--profile=hostmaster
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Optional_Improvements">8. Optional Improvements</h2>

<p>drupal.org/project/hosting_queue_runner</p>

<p>drupal.org/project/provision_boost</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-50.html?destination=node%2F1075%23comment-form">Login</a> or <a href="../../../../../user/register/index-50.html?destination=node%2F1075%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-50.html?destination=node%2F1075%23comment-form">Login</a> or <a href="../../../../../user/register/index-50.html?destination=node%2F1075%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-462" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../462/index.html">Common installation problems</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>There are a few things that can go wrong in the install.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc6">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Verify_and_install_run_everything_through_SSH"><span class="toc-number">1. </span>Verify and install run everything through SSH</a></li>
	<li class="toc-level-1"><a href="#NameVirtualHost_:80_has_no_VirtualHosts"><span class="toc-number">2. </span>NameVirtualHost *:80 has no VirtualHosts</a></li>
	<li class="toc-level-1"><a href="#Making_sure_it_works"><span class="toc-number">3. </span>Making sure it works</a></li>
	<li class="toc-level-1"><a href="#Access_by_the_server-s_physical_IP_address"><span class="toc-number">4. </span>Access by the server's physical IP address</a></li>
	<li class="toc-level-1"><a href="#CentOS_firewall_settings"><span class="toc-number">5. </span>CentOS firewall settings</a></li>
	<li class="toc-level-1"><a href="#CentOS_cron_requires_restart"><span class="toc-number">6. </span>CentOS cron requires restart?!</a></li>
	<li class="toc-level-1"><a href="#CentOS_aegir.conf_permission_denied"><span class="toc-number">7. </span>CentOS aegir.conf permission denied</a></li>
	<li class="toc-level-1"><a href="#Solaris_cron_issues"><span class="toc-number">8. </span>Solaris cron issues</a></li>
	<li class="toc-level-1"><a href="#Drush_execution_path_issues"><span class="toc-number">9. </span>Drush execution path issues</a></li>
	<li class="toc-level-1"><a href="#APC_issues"><span class="toc-number">10. </span>APC issues</a></li>
</ol>
</div>
</div>

<h2 id="Verify_and_install_run_everything_through_SSH">1. Verify and install run everything through SSH</h2>

<p>Since Aegir has multi-server support, it is possible that you have a misconfigured "FQDN" and that aegir then tries to connect to the local server as a remote server. To check if you have a misconfigured server, run the following commands:</p>

<pre><code>resolveip `uname -n`
</code></pre>

<p>If the command returns your IP address, you are all set. If it returns an error you will need to edit your <code>/etc/hosts</code> file.</p>

<p>First line of this file looks like:</p>

<pre><code>127.0.0.1  localhost
</code></pre>

<p>Simply add all domains you want to this line. e.g:</p>

<pre><code>127.0.0.1  localhost aegir.example.com example.com
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="NameVirtualHost_:80_has_no_VirtualHosts">2. NameVirtualHost *:80 has no VirtualHosts</h2>

<p>It does not hurt anything, but it can be annoying in your logs.  This may disappear as soon as you define your first virtual site using Aegir. If it does not, you most likely have a second NameVirtualHost statement in your configuration someplace other than in the Aegir configurations.</p>

<p>If you are on a Debian system, that is usually a configuration fragment in /etc/apache2/ports.conf or in a fragment symbolically linked in /etc/apache2/sites-enabled and it is safe to comment out any NameVirtualHost statements you find there as this really is a large part of the job you have asked Aegir to do for you.</p>

<p>Once those are commented out, the message should disappear.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Making_sure_it_works">3. Making sure it works</h2>

<p>Your new Aegir server will be installed with a single site named the way you specified in your install script.  That's great, but you may have more paths to that same server.</p>

<p>When you try to browse to your server for the first time from a non-localhost browser you may get an addressing issue.  If you do, make sure that you actually have the server defined in DNS and that the DNS server was reloaded.  If it was reloaded and you use slave servers, make sure that the serial number in the zone file was incremented so that the slaves automatically reload.</p>

<p>If you already have multiple URLs in your DNS which resolve to the same Aegir, you should check them.  For instance: if your DNS resolves both aegir.example.com and sitecontrol.example.com to your new Aegir server's IP, you need to make sure that both are accommodated.  If they will both get the same physical hostmaster site, one should be set up as an alias to the other.  If they are indeed going to be separate sites you will have to create a new site node with the other name as a virtual site.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Access_by_the_server-s_physical_IP_address">4. Access by the server's physical IP address</h2>

<p>Another "gotcha" that you may run into is http access using the actual IP itself.  Remember that the IP is not picked up by the site vhost and will not match a ServerName or ServerAlias - so it gets picked up by the default vhost.  This is just standard apache stuff, nothing Aegir or Drupal specific here, but quite the annoyance and a potential problem.</p>

<p>You can easily work around it by simply adding the IP as a Site Alias in the site node in either the Aegir site (or another site that you may have defined which you would prefer the IP to address).</p>

<p>You can tell if you have the IP problem by simply pointing your browser to the server by IP as <a href="http://999.999.999.999/" title="http://999.999.999.999/">http://999.999.999.999/</a> and seeing what comes up.  If you get an install screen, you have the problem.  You certainly do not want that install screen getting executed!</p>

<p>The good news is that fixing it is easy.</p>

<p>Simply log into Aegir, click on Sites, click on the site name that you want the IP to address, click on Edit and scroll down to Domain Aliases.  Put the IP into the box, click on the Redirect checkbox so that Aegir instructs Apache to do a rewrite to the real domain name, and finally click Save.</p>

<p>If you do not have the Domain Aliases entry box, you need to turn that feature on.  In that case, go to your administration menu at the top of the page, point to Hosting and then click on Features.  Click the checkbox for Site Aliasing and then Save Configuration.  The Aliases box will now appear when you edit a site.  There is excellent information about the site alias feature in this handbook at <a href="../../../../60/index.html" title="http://community.aegirproject.org/node/60">http://community.aegirproject.org/node/60</a> with much more detail.</p>

<p>After the Verify job completes you should test your server again.  Now when you address the server by it's IP address the URL should automatically change to the site you selected and the install screen never appears.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="CentOS_firewall_settings">5. CentOS firewall settings</h2>

<p>You may need to adjust CentOS's firewall settings to allow HTTP
traffic on port 80.  If you installed CentOS with a UI, enable
"Firewall settings -- WWW (HTTP)".</p>

<p>Alternatively, another solution may be to edit /etc/sysconfig/iptables 
and add a rule accepting traffic on the relevant interface on port 80.</p>

<p>Afterwards, you can restart the firewall with this command:</p>

<p>Shell commands::
<div class="codeblock"><code> service iptables restart</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="CentOS_cron_requires_restart">6. CentOS cron requires restart?!</h2>

<p>Also, in some configurations, it seems necessary to restart crond for
the user crontab changes to take effect (very bizarre). For that, use:</p>

<p>Shell commands::
<div class="codeblock"><code> service crond restart</code></div></p>

<p>See <a href="http://drupal.org/node/632308" title="http://drupal.org/node/632308">http://drupal.org/node/632308</a> if you have more information about
this issue.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="CentOS_aegir.conf_permission_denied">7. CentOS aegir.conf permission denied</h2>

<p>If you receive:
<div class="codeblock"><code>Starting httpd: httpd: Syntax error on line 209 of /etc/httpd/conf/httpd.conf: Could not open configuration file /etc/httpd/conf.d/aegir.conf: Permission denied</code></div>
when trying to restart httpd, check your SELinux settings. If enabled, you can run the following command on the aegir.conf file in /var/aegir/config/server_master directory:
<div class="codeblock"><code>chcon -t httpd_config_t apache.conf</code></div>
Alternatively, you can disable SELinux completely if you desire. Both options will result in removing the permisson denied error.</p>

<p>You can see this comment: <a href="http://drupal.org/node/1286926#comment-5028062" title="http://drupal.org/node/1286926#comment-5028062">http://drupal.org/node/1286926#comment-5028062</a> for a little more info.</p>

<p>Try the following if nothing works:</p>

<pre><code>setenforce permissive
</code></pre>

<p>See this doc to make the change permanent: <a href="http://wiki.centos.org/HowTos/SELinux" title="http://wiki.centos.org/HowTos/SELinux">http://wiki.centos.org/HowTos/SELinux</a></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Solaris_cron_issues">8. Solaris cron issues</h2>

<p>I had numerous problems setting up a proper cron job, as Solaris' crond seems
pretty anal about what it accepts. The only way I could get it to work was to
create a wrapper shell script that would be called using the simplest cron
tab.</p>

<p>Crontab entry:</p>

<p><div class="codeblock"><code>* * * * * /var/aegir/dispatch.sh</code></div></p>

<p>Content of dispatch.sh:</p>

<p><div class="codeblock"><code>#!/usr/bin/bash<br /><br />HOME=/var/aegir<br />LD_LIBRARY_PATH=/usr/lib:/usr/local/lib:/usr/lib/sparcv9:/opt/mysql/mysql/lib:/usr/sfw/lib:/usr/sfw/lib/gcc:/opt/sfw/lib<br />PATH=/usr/bin:/opt/mysql/mysql/bin:/usr/sfw/bin:/opt/sfw/bin:/opt/SUNWspro/bin:/usr/local/bin:/opt/csw/bin<br /><br />export HOME<br />export LD_LIBRARY_PATH<br />export PATH<br /><br />php &#039;/var/aegir/drush/drush.php&#039; --php=/usr/local/bin/php &#039;@hostmaster&#039; hosting-dispatch</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Drush_execution_path_issues">9. Drush execution path issues</h2>

<p>Solaris (and maybe others) suffers from the dreaded execution issues of drush:</p>

<ul>
<li><a href="http://drupal.org/node/637574" title="http://drupal.org/node/637574">http://drupal.org/node/637574</a></li>
<li><a href="http://drupal.org/node/586466" title="http://drupal.org/node/586466">http://drupal.org/node/586466</a></li>
</ul>

<p>Those can be worked around by hardcoding the --php executable on the
commandline path. Adding the proper shebang (<code>#!/usr/local/bin/php</code>, for example) header and using a proper PATH
that includes the PHP executable also helps.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="APC_issues">10. APC issues</h2>

<p>If you are having trouble running APC with Aegir, try downgrading to APC 3.1.4.  This can be achieved by the following:</p>

<p><code>sudo pecl uninstall apc</code></p>

<p><code>sudo pecl install apc-3.1.4</code></p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-51.html?destination=node%2F462%23comment-form">Login</a> or <a href="../../../../../user/register/index-51.html?destination=node%2F462%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-51.html?destination=node%2F462%23comment-form">Login</a> or <a href="../../../../../user/register/index-51.html?destination=node%2F462%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-646" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../installing/ubuntu-1004-specific-how-downgrade-php-52-install/index.html">Ubuntu 10.04 Specific : How to downgrade to php 5.2 before install</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>As explained at <a href="../../../../../installing/manual/index.html" title="http://community.aegirproject.org/installing/manual">http://community.aegirproject.org/installing/manual</a>, the recommended version of PHP is 5.3, but some users may wish to use PHP 5.2 in order to host Drupal 5.x sites or to use modules which have PHP 5.3 compatibility issues. Should you choose to do so, the following documentation may be useful. What is explained here is specific to Ubuntu 10.04. It hasn't been tested on further versions, mostly because many sysadmins prefer to use the latest Long Term Support (LTS) version of Ubuntu, currently 10.04, on their production servers.</p>

<p>Follow this procedure :</p>

<p><code>sudo apt-get install python-software-properties</code></p>

<p><code>add-apt-repository ppa:txwikinger/php5.2</code></p>

<p>Create the file /etc/apt/preferences.d/php and input the following code in it :</p>

<pre>
Package: libapache2-mod-php5
Pin: version 5.2.10*
Pin-Priority: 991

Package: libapache2-mod-php5filter
Pin: version 5.2.10*
Pin-Priority: 991

Package: php-pear
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-cgi
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-cli
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-common
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-curl
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-dbg
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-dev
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-gd
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-gmp
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-ldap
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-mhash
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-mysql
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-odbc
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-pgsql
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-pspell
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-recode
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-snmp
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-sqlite
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-sybase
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-tidy
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-xmlrpc
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-xsl
Pin: version 5.2.10*
Pin-Priority: 991

Package: php5-mcrypt
Pin: version 5.2.6*
Pin-Priority: 991

Package: php5-imap
Pin: version 5.2.6*
Pin-Priority: 991
</pre>

<p>Then proceed Aegir install as explained at <a href="../../../../../installing/debian/index.html" title="http://community.aegirproject.org/installing/debian">http://community.aegirproject.org/installing/debian</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-394.html?destination=node%2F646%23comment-form">Login</a> or <a href="../../../../../user/register/index-394.html?destination=node%2F646%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../646/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-945" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/administrator/post-install-configuration/index.html">Post-install configuration</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Alright, so you have installed Aegir, what else is there?</p>

<p>You have a lot of things you can do now:</p>

<ul>
<li><a href="../../../../19/index.html">Get to know the interface</a></li>
<li><a href="../../../../256/index.html">Use drush make</a></li>
<li><a href="../../../../427/index.html">Work as the Aegir user</a></li>
<li><a href="../../../../../debugging/index.html">Debugging Aegir</a></li>
<li>Setup <a href="http://drupal.org/project/hosting_queue_runner">the hosting queue runner</a> for lower waiting times</li>
</ul>

<p>A lot more is available in the <a href="../../../../../using/index.html">user manual</a>.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-52.html?destination=node%2F945%23comment-form">Login</a> or <a href="../../../../../user/register/index-52.html?destination=node%2F945%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-52.html?destination=node%2F945%23comment-form">Login</a> or <a href="../../../../../user/register/index-52.html?destination=node%2F945%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-21" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/content/administrator/post-install-configuration/importing-sites/index.html">Importing sites</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>It is possible to import existing sites into the Aegir hosting system, so that they can be managed by Aegir.</p>

<p>These instructions assume you've set up a new server with Aegir on it, and you want to import sites into Aegir from another server, or even from the same server, using backups.</p>

<p>There are basically three ways of importing sites in Aegir:</p>

<ul>
<li><a href="../../../../../content/importing-existing-aegir-backups/index.html">from Aegir backups</a> - simplest and fastest, scriptable</li>
<li><a href="../../../../../content/importing-single-site-manually/index.html">from any single site, manually</a> - most reliable, can import even non-aegir sites, hard to automate</li>
<li><a href="../../../../../content/importing-complete-drupal-platform/index.html">from a complete Drupal install</a> - fairly reliable, can import non-aegir sites, could be automated but requires access to the database servers currently in use by the site</li>
</ul>

<p>This section also regroups troubleshooting and other less orthodox techniques.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-53.html?destination=node%2F21%23comment-form">Login</a> or <a href="../../../../../user/register/index-53.html?destination=node%2F21%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-53.html?destination=node%2F21%23comment-form">Login</a> or <a href="../../../../../user/register/index-53.html?destination=node%2F21%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-117" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/importing-existing-aegir-backups/index.html">Importing from existing Aegir backups</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc7">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Copy_backups"><span class="toc-number">1. </span>Copy backups</a></li>
	<li class="toc-level-1"><a href="#Create_the_site_context_and_deploy_the_backup"><span class="toc-number">2. </span>Create the site context and deploy the backup</a></li>
	<li class="toc-level-1"><a href="#Verify_the_Platform"><span class="toc-number">3. </span>Verify the Platform</a></li>
	<li class="toc-level-1"><a href="#Caveats"><span class="toc-number">4. </span>Caveats</a></li>
	<li class="toc-level-1"><a href="#Setting_a_Non-Default_Install_Profile"><span class="toc-number">5. </span>Setting a Non-Default Install Profile</a></li>
</ol>
</div>
</div>

<p>If you need to import a site from an existing Aegir system, this can be done from an Aegir site backup.</p>

<p><strong>Requirements:</strong></p>

<ol>
<li>New Aegir version 0.4 alpha15 or later.</li>
<li>Access to Aegir backups from the old server.</li>
<li>A platform set up and verified that matches the platform on the old Aegir server.</li>
</ol>

<h2 id="Copy_backups">1. Copy backups</h2>

<p>First log into the new server via ssh - switch to the aegir user. Create a temporary directory somewhere, for example:
<div class="codeblock"><code>mkdir /var/aegir/tmp/migrate</code></div></p>

<p>Run a command to syncronize the new directory with the backups directory of the old Aegir hosting system. This command does the entire directory, but you may want to modify this if you have a lot of unneeded backups on the old system.</p>

<p>This command also assumes that you can shell into the other server as the aegir user. Modify as required.</p>

<p><div class="codeblock"><code>rsync -aPv -e ssh aegir@old-server.com:/var/aegir/backups/* /var/aegir/tmp/migrate</code></div></p>

<p>Now you can re-run the above command just before you are going to migrate a site. This is handy if you have a lot of sites to migrate and each site requires attention. Simply make a new backup of the site in the old system, and rerun the rsync command.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Create_the_site_context_and_deploy_the_backup">2. Create the site context and deploy the backup</h2>

<p>For brevity, I assume that drush can be executed as <code>drush</code>. Replace with <code>php /var/aegir/drush/drush.php</code> if needed.</p>

<p>Pay attention to these two commands, they require modification to match the name of the site, the alias of the platform, and the name of the backup archive. These commands should each be on one line. You also need to know the platform alias. You can see all the platform aliases available by typing <code>drush sa | grep platform</code>.</p>

<p>First tell Aegir about the site, which creates a site alias.</p>

<p><div class="codeblock"><code>drush provision-save @example.com --context_type=site --platform=@platform_d6 --uri=example.com --db_server=@server_localhost --client_name=admin</code></div></p>

<p>Then run the provision-deploy:</p>

<p><div class="codeblock"><code>drush @example.com provision-deploy /var/aegir/tmp/migrate/example.com-2010-11-11.tar.gz</code></div></p>

<p>Note: if you receive an error, you might also try adding the site to your new Aegir platform (using the same platform and site name, of course). Then run the provision-deploy again.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Verify_the_Platform">3. Verify the Platform</h2>

<p>The final step is to import the site into Aegir. This is easily done by logging into the Aegir front-end and verifying the platform, which then will trigger an import task for the new site.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Caveats">4. Caveats</h2>

<p>The provision-save command will assume the database server is the same as the master server and that you are not using any install profile. So if your DB lives in another server or if you are using an install profile like openatrium you will probably need to edit the file created at /var/aegir/.drush/example.com.alias.drushrc.php</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Setting_a_Non-Default_Install_Profile">5. Setting a Non-Default Install Profile</h2>

<p>If you are using a non-default install profile, you may want to specify your install profile by adding <code>--profile=profilemachinename</code> to the <code>drush provision-save</code> command above.</p>

<p>Using the example above but using an install profile for Open Atrium, the command would look like:</p>

<p><div class="codeblock"><code>drush provision-save @example.com --context_type=site --platform=@platform_d6 --profile=openatrium --uri=example.com</code></div></p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-305.html?destination=node%2F117%23comment-form">Login</a> or <a href="../../../../../user/register/index-305.html?destination=node%2F117%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../117/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-115" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/importing-single-site-manually/index.html">Importing a single site manually</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>If you already have a platform setup on Aegir with EXACTLY the same codebase as your existing site, then you don't need to transfer the entire old codebase - you can just transfer the sites/example.com directory. However, you also need to make sure any dependencies on contrib modules that your site has, are covered on the codebase or Platform that you're importing it into.</p>

<p>In general it may be considered safer/less prone to confusing errors to transfer the entire old codebase into Aegir as a whole Platform, whereby the site will be imported automatically under that Platform. You can then migrate it in Aegir to one of your existing Platforms later. See <a href="../../../../../content/importing-complete-drupal-platform/index.html">importing from a complete Drupal platform</a> for this method.</p>

<p>Also, it is much faster to just <a href="../../../../../content/importing-existing-aegir-backups/index.html">"deploy" an Aegir backup</a> than go through the manual procedure here, so you should generally follow <a href="../../../../../content/importing-existing-aegir-backups/index.html">that procedure</a> instead of the one defined here unless you have a very hairy setup.</p>

<p>To transer a site manually into Aegir, those are the steps you should follow:</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc8">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Create_the_site_database_user_and_directory"><span class="toc-number">1. </span>Create the site database, user and directory</a></li>
	<li class="toc-level-1"><a href="#Transfer_the_files"><span class="toc-number">2. </span>Transfer the files</a></li>
	<li class="toc-level-1"><a href="#Transfer_the_Database"><span class="toc-number">3. </span>Transfer the Database</a></li>
	<li class="toc-level-1"><a href="#Verify_In_Aegir"><span class="toc-number">4. </span>Verify In Aegir</a></li>
</ol>
</div>
</div>

<h2 id="Create_the_site_database_user_and_directory">1. Create the site database, user and directory</h2>

<p>In order to import the site, you need to create a database and database user for the site, along with a directory in the platform.</p>

<p>The simplest way to do this is to create an empty site in the right platform and overwrite it. Through the commandline:</p>

<p><div class="codeblock"><code>drush provision-save @example.com --context_type=site --platform=@platform_d6 --uri=example.com --db_server=@server_localhost --client_name=admin<br />drush provision-install @example.com</code></div></p>

<p>Through the UI, this can be done simply by creating a site in Create content.</p>

<p>If this is not working for some reason, you can create the mysql user and database manually using the following:</p>

<p><div class="codeblock"><code>GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER, LOCK TABLES, CREATE TEMPORARY TABLES ON <code>databasename</code>.* TO &#039;databaseuser&#039;@&#039;localhost&#039; IDENTIFIED BY &#039;password&#039;;<br />CREATE DATABASE <code>databasename</code>;</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Transfer_the_files">2. Transfer the files</h2>

<p>You need to copy the <code>sites/example.com</code> directory from your old server to the new Aegir server.</p>

<p>To do this, first create a tarball of the site on the old server. Within the <code>sites/example.com</code> directory type:</p>

<p><div class="codeblock"><code>tar -zcvf example.com.tar.gz .</code></div></p>

<p>Then, on the Aegir server, you can create a directory for it in the codebase (platform) you want to put it under:</p>

<p><div class="codeblock"><code>cd /var/aegir/platforms/drupal-X.Y/sites<br />mkdir example.com<br />cd example.com<br />wget <a href="http://example.com/example.com.tar.gz<br />tar" title="http://example.com/example.com.tar.gz<br />tar">http://example.com/example.com.tar.gz<br />tar</a> -zxvf example.com.tar.gz ./files ./modules ./libraries ./themes</code></div></p>

<p>Instead of using wget you could of course use SCP or FTP to transfer the tarball onto the Aegir server.</p>

<p>In the above we assume that you have created an empty site as directed above, if not, you will also need to extract the settings.php file, so that last command should instead be simply:</p>

<p><div class="codeblock"><code>tar -zxvf example.com.tar.gz</code></div></p>

<p>Then you will need to modify the settings.php file to follow the user and database created in the first step. Again, this is not necessary if you let Aegir create the site for you.</p>

<p>Once the file is unpacked, check the ownership and group of each file by using <code>ls -al</code>. It should be either 'aegir:aegir' or 'aegir:www-data'. Change it if necessary.  In particular, files that may have been uploaded on your site via modules like imagecache, upload, Profile pics etc, may need to have their ownership changed:</p>

<p><div class="codeblock"><code>sudo chown -R aegir:www-data $platform/sites/*/files</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Transfer_the_Database">3. Transfer the Database</h2>

<p>Make a backup of the database on your old server (Backup and Migrate module is good for this, or you can use phpmyadmin or your favourite MySQL management tool. It's a good idea to truncate the cache, search and watchdog tables first to reduce the size of the database. The "Backup and Migrate" module does this for you.</p>

<p>If you are importing a site from a previous Aegir installation somewhere, such as from a backup tarball, the database.sql will already be within the tarball you unpacked. You can use this to import into a new database on your new server.</p>

<p>You can import the database with drush using the following command:</p>

<p><div class="codeblock"><code>drush @example.com sqlc &lt; database.sql</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Verify_In_Aegir">4. Verify In Aegir</h2>

<p>In the Aegir web interface click on the name of the platform you have added your site to. You can access the list of platforms via the 'Platforms' tab in the primary links menu.</p>

<p>Execute a new Verify task on this platform via the 'Verify' button in the task list.</p>

<p>Aegir will now re-verify the platform. In the process of this, it will discover your new site and spawn a new 'Import' task for the site.</p>

<p>Once it's done this (it may take a couple of cron runs to dispatch these tasks in the queue) the tasks should turn green (if not, see 'Troubleshooting' below).</p>

<p>At this point, presuming you have updated DNS or are overriding DNS via an entry in your <code>/etc/hosts</code> file to access the site via the new Aegir server, you can visit the site in a browser and check around to see that it has worked. Pay particular attention to any links in node content that pointed to paths referencing <code>/sites/community.aegirproject.org</code> if your site was not part of a multisite setup. (Drupal has a habit of storing these paths in the database, or they may have been hard-coded into nodes by users).</p>

<p>Aegir will not go through all your database and update all URLs, so some images or links may be broken. This will need to be done manually. Aegir does attempt to update paths stored in tables such as 'files' though.</p>

<p>It's a good idea to clear the caches, and you may need to get imagecache to rebuild its thumbnails if you use it.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-54.html?destination=node%2F115%23comment-form">Login</a> or <a href="../../../../../user/register/index-54.html?destination=node%2F115%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-54.html?destination=node%2F115%23comment-form">Login</a> or <a href="../../../../../user/register/index-54.html?destination=node%2F115%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-116" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/importing-complete-drupal-platform/index.html">Importing a complete Drupal platform</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc9">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Transfer_the_codebase"><span class="toc-number">1. </span>Transfer the codebase</a></li>
	<li class="toc-level-1"><a href="#Transfer_the_Database"><span class="toc-number">2. </span>Transfer the Database</a></li>
	<li class="toc-level-1"><a href="#Setup_Platform_in_Aegir"><span class="toc-number">3. </span>Setup Platform in Aegir</a></li>
	<li class="toc-level-1"><a href="#Import_and_Verify_Sites_In_Aegir"><span class="toc-number">4. </span>Import and Verify Sites In Aegir</a></li>
	<li class="toc-level-1"><a href="#Migrate_To_Another_Platform"><span class="toc-number">5. </span>Migrate To Another Platform</a></li>
	<li class="toc-level-1"><a href="#Troubleshooting"><span class="toc-number">6. </span>Troubleshooting</a></li>
</ol>
</div>
</div>

<p>This way of importing sites is often considered the safest whereby you transfer across an entire codebase containing Drupal core, and define it as a Platform first. This makes sure you bring any dependencies, contrib modules etc, in exactly the same version and configuration that is referenced in the database for the site.</p>

<h3 id="Transfer_the_codebase">1. Transfer the codebase</h3>

<p>Create a tarball of the codebase on the old server. Within the drupal root directory type:
<code>tar -zcvf example.com.tar.gz * .htaccess</code></p>

<p>Note that we have to specify including the .htaccess because it isn't picked up by the * wildcard due to being prefixed with a full stop. <strong>It is important to bring along the .htaccess for a platform so that Aegir can consider these settings when it generates Apache configuration for this platform.</strong></p>

<p>Then, on the new server you can create a directory for it in the codebase you want to put it under:
<div class="codeblock"><code>cd /var/aegir/platforms<br />mkdir your-new-platform<br />cd your-new-platform<br />wget <a href="http://example.com/example.com.tar.gz<br />tar" title="http://example.com/example.com.tar.gz<br />tar">http://example.com/example.com.tar.gz<br />tar</a> -zxvf example.com.tar.gz</code></div></p>

<p>Instead of using wget you could of course use SCP or FTP to transfer the tarball onto the Aegir server.</p>

<p>Once the file is unpacked, check the ownership and group of each file by using <code>ls -al</code>. It should be either 'aegir:aegir' or 'aegir:www-data'. Change it if necessary. We have to assume you have basic knowledge of Linux and POSIX permissions - we can't be responsible for teaching you sysadmin skills :)</p>

<p>In particular, files that may have been uploaded on your site via modules like imagecache, upload, Profile pics etc, may need to have their ownership changed:
<code>sudo chown -R aegir $platform/sites/*/files</code></p>

<p>If your site previously resided in sites/defau1t you need to move it because Aegir ignores the default directory (it has no way of understanding what URL this would be accessed by, so it is impossible to 'manage' it). Each site needs its own directory with the correct domain in typical Drupal multisite design:</p>

<p><div class="codeblock"><code>mv sites/defau1t sites/example.com</code></div></p>

<p>If you do this, you may need to also update your filepath's stored in the files table by running the following query on your database:
<div class="codeblock"><code>UPDATE files SET filepath = REPLACE(filepath, &#039;sites/defau1t&#039;, &#039;sites/example.com&#039;);</code></div></p>

<p>There are many other places in the database that can suffer the same problem, the <code>node_revisions</code> table for example. If you have phpMyAdmin available you can easily search the entire database for 'sites/defau1t'. Select the database, then click the Search tab. Once you know which tables are affected you can run a variation of the above query to correct these records.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Transfer_the_Database">2. Transfer the Database</h3>

<p><strong>Note:  This step is not necessary if you are moving your site from one directory on your server (e.g., /var/www/html) to a newly created Aegir directory on the same server (e.g., /var/aegir).</strong></p>

<p>Make a backup of the database on your old server (Backup and Migrate module is good for this, or you can use phpmyadmin or your favourite MySQL management tool. It's a good idea to truncate the cache, search and watchdog tables first to reduce the size of the database (Backup and Migrate does this for you).</p>

<p>Aegir does not provide support for importing databases with prefixed tables so it is best to remove prefixes form the database. However, there is work to bring this support in (<a href="http://drupal.org/node/483346" title="http://drupal.org/node/483346">http://drupal.org/node/483346</a>) and a solution if you want to keep prefixes on your tables (<a href="http://drupal.org/node/483346#comment-3113516" title="http://drupal.org/node/483346#comment-3113516">http://drupal.org/node/483346#comment-3113516</a>)</p>

<p>Unlike traditional Drupal projects the database settings cannot be found in settings.php. The database credentials are stored in the Apache vhost config of the associated site. This is a security measure implemented by the Aegir project.</p>

<p>In the vhost directory on your old server, <code>/var/aegir/config/server_master/apache/vhost.d/</code>, is a vhost file for every site on your server. The contents of the file can be displayed in your terminal with the command <code>cat thenameofthefile</code>. At the top of the file you will find the credentials  needed to create a database on the new server.</p>

<p>On your new server, manually create a new database and upload the .sql file from your backup.</p>

<p>Then create the mysql user that your site accesses the database as, and grant it all permissions on that database except 'GRANT'.</p>

<p>Connect to the database on the old server:
<code>mysql -u root -p</code></p>

<p>Create the new database:
<code>create database yourdatabasename</code></p>

<p>Add the user:
<code>CREATE USER &#039;yourdatabaseuser&#039;@&#039;localhost&#039; identified by &#039;youruserpassword&#039;;</code></p>

<p>Give the necessary privileges:
<code>GRANT ALL PRIVILEGES ON yourdatabasename.* TO &#039;yourdatabaseuser&#039;@&#039;localhost&#039;;</code></p>

<p>Import the database:
<code>mysql -u yourdatabaseuser -p -h localhost yourdatabasename &lt; thenameofthedatabase.sql</code></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Setup_Platform_in_Aegir">3. Setup Platform in Aegir</h3>

<p>In the Aegir web interface click on 'Create Content' and 'Platform'. This step is often easiest when using the admin-menu on the top of your screen.</p>

<p>Enter the name you want to use for the platform (eg 'My Platform import'), and the path to the platform on the server (eg '/var/aegir/platforms/your-new-platform')</p>

<p>Click Save to submit the form, and Aegir will spawn a Verify task for this platform into the queue.</p>

<p>Once the task is complete this the task should turn green (click through to the homepage to refesh and check. If not, see 'Troubleshooting' below).</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Import_and_Verify_Sites_In_Aegir">4. Import and Verify Sites In Aegir</h3>

<p>Upon completion of the above Platform verification task, Aegir will discover your new site and spawn a new 'Import' task for the site.</p>

<p>Once it's done this (it may take a couple of cron runs to dispatch these tasks in the queue) the tasks should turn green (if not, see 'Troubleshooting' below).</p>

<p>At this point, presuming you have updated DNS or are overriding DNS via an entry in your /etc/hosts file to access the site via the new Aegir server, you can visit site in a browser and check around to see that it has worked. Pay particular attention to any links in node content that pointed to paths referencing <code>/sites/community.aegirproject.org</code> if your site was not part of a multisite setup. (Drupal has a habit of storing these paths in the database, or they may have been hard-coded into nodes by users).</p>

<p>It's a good idea to clear the caches, and you may need to get imagecache to rebuild its thumbnails if you use it.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Migrate_To_Another_Platform">5. Migrate To Another Platform</h3>

<p>Now that you have your sites under Aegir's control you can take advantage of its power, and easily migrate them to another platform. In the event that your sites were on old versions of Drupal core and a new one is available and present as another Platform on your Aegir server, you can use the Migrate process to upgrade those sites onto the new core.</p>

<p>For details on how to Migrate sites, consult the <a href="../../../../23/index.html">Migrate documentation</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Troubleshooting">6. Troubleshooting</h3>

<p>For those who are migrating existing sites that live with their files in the sites/community.aegirproject.org folder, things can get tricky. However, you can <a href="http://palma-seo.com/content/moving-single-drupal-install-default-directory-multi-site-drupal-installation">follow this tutorial</a> and successfully get things moved over rather easily.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-395.html?destination=node%2F116%23comment-form">Login</a> or <a href="../../../../../user/register/index-395.html?destination=node%2F116%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../116/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-517" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../517/index.html">Setting up a test Aegir site from an existing one</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>We have <a href="../../../../316/index.html">already seen</a> how to import sites in an Aegir install, but what if we want to test the "hostmaster" site itself, ie. setup a development or staging environment of an Aegir install itself?</p>

<p>This page explains how. The basic steps are:</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc10">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_aegir"><span class="toc-number">1. </span>Installing aegir</a></li>
	<li class="toc-level-1"><a href="#Backup_the_production_site"><span class="toc-number">2. </span>Backup the production site</a></li>
	<li class="toc-level-1"><a href="#Deploy_the_production_site_in_staging"><span class="toc-number">3. </span>Deploy the production site in staging</a></li>
	<li class="toc-level-1"><a href="#Tweaking_the_install_for_the_staging_server"><span class="toc-number">4. </span>Tweaking the install for the staging server</a></li>
	<li class="toc-level-1"><a href="#Troubleshooting"><span class="toc-number">5. </span>Troubleshooting</a></li>
</ol>
</div>
</div>

<h1 id="Installing_aegir">1. Installing aegir</h1>

<p>The first step should be fairly simple and intuitive if you got that far: you have to <a href="../../../../../installing/index.html">install aegir itself</a> on the staging server. You should install the specific version that is currently in production.</p>

<p>Maybe that also involves <a href="../../../../../uninstalling/index.html">uninstalling the existing install</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Backup_the_production_site">2. Backup the production site</h1>

<p>Run a backup on the production site, on the production server. This can be done in the frontend or in the backend using:</p>

<p><div class="codeblock"><code>drush @hostmaster provision-backup</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Deploy_the_production_site_in_staging">3. Deploy the production site in staging</h1>

<p>Copy the resulting backup to the staging server. Then you should be able to deploy it with the following command:</p>

<p><div class="codeblock"><code>drush @hostmaster provision-deploy --old_uri=aegir.koumbit.net /home/anarcat/aegir.koumbit.net-20110326.161420.tar.gz --debug</code></div></p>

<p>In this case, we use deploy to also rename the site (<code>--old_uri=aegir.koumbit.net</code>).</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Tweaking_the_install_for_the_staging_server">4. Tweaking the install for the staging server</h1>

<p>The environment on the staging server could be <em>very</em> different from the production server. The server name will be different, maybe there will not be a dedicated mysql server, platforms will not exist, etc.</p>

<p>It is recommended to review the "Servers" page to change the domain names to the staging environment. In Koumbit's case, this means:</p>

<ol>
<li>editing the master server to change the hostname and IPs</li>
<li>renaming the DB server to "localhost" and changing the database credentials</li>
<li>renaming the main hostmaster site:
<div class="codeblock"><code>drush @hostmaster sqlq &quot;UPDATE node n JOIN hosting_context h ON h.nid = n.nid SET n.title=&#039;hostmaster.koumbit.net&#039; WHERE name=&#039;hostmaster&#039;;&quot;<br />drush @hostmaster sqlq &quot;UPDATE node_revisions nr JOIN hosting_context h ON h.nid = nr.nid JOIN node n ON n.vid = nr.vid SET nr.title=&#039;hostmaster.koumbit.net&#039; WHERE h.name=&#039;hostmaster&#039;;&quot;</code></div></li>
<li>change the sites to point to the good web and db servers:
<div class="codeblock"><code>UPDATE hosting_site SET db_server=3631 WHERE db_server &lt;&gt; 3631;<br />UPDATE hosting_platform SET web_server = 3 WHERE web_server &lt;&gt; 3;</code></div></li>
</ol>

<p>Note that this will have the added benefit of reverifying all platforms and therefore create them if they are makefile-based.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Troubleshooting">5. Troubleshooting</h1>

<p>I had weird issues with failing to run updatedb on the hostmaster site (while deploying to another alias would work). My workaround was to suspend the process right before it would run drush updatedb, then run updatedb manually, twice:</p>

<p><div class="codeblock"><code>drush @hostmaster updatedb<br />drush @hostmaster cc all<br />drush @hostmaster updatedb</code></div></p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-55.html?destination=node%2F517%23comment-form">Login</a> or <a href="../../../../../user/register/index-55.html?destination=node%2F517%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-55.html?destination=node%2F517%23comment-form">Login</a> or <a href="../../../../../user/register/index-55.html?destination=node%2F517%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-426" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../426/index.html">Troubleshooting creating a platform or importing sites</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>First things to check:</p>

<p>Does the aegir user have proper permissions?</p>

<pre>
sudo chown aegir -R PLATFORM/sites/yoursite
</pre>

<p>Is the database properly set up?
Try drush sql-cli to see if the site db user has access and if there are tables (try SHOW TABLES).</p>

<p>If something goes wrong with importing a site you might end up with a node for a non-working site.  In such a case it can be good to delete the node for this non-working site and verify the underlying platform again.  Since there is no direct way to delete such a node from the user interface you have change the URL from node/NUMBER/edit into node/NUMBER/delete to do this.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-56.html?destination=node%2F426%23comment-form">Login</a> or <a href="../../../../../user/register/index-56.html?destination=node%2F426%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-56.html?destination=node%2F426%23comment-form">Login</a> or <a href="../../../../../user/register/index-56.html?destination=node%2F426%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-30" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../30/index.html">Remote servers (multiserver)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Aegir supports multiple 'server' entities. These servers have 'services' such as 'Web' or 'Database', and 'service types' which are implementations of that service, such as 'Apache' or 'MySQL'.</p>

<p>Some previous experience in the configuration of Apache and MySQL will help if you want to use remote servers with Aegir. If you haven't had any experience in setting up and maintaining Apache or MySQL before you might want get familiar with the basic concepts first.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc11">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Remote_web_servers"><span class="toc-number">1. </span>Remote web servers</a>
<ol>
	<li class="toc-level-2"><a href="#System_dependencies"><span class="toc-number">1.1. </span>System dependencies</a></li>
	<li class="toc-level-2"><a href="#Aegir_user"><span class="toc-number">1.2. </span>Aegir user</a></li>
	<li class="toc-level-2"><a href="#Web_server_configuration"><span class="toc-number">1.3. </span>Web server configuration</a></li>
	<li class="toc-level-2"><a href="#Sudoers"><span class="toc-number">1.4. </span>Sudoers</a></li>
	<li class="toc-level-2"><a href="#Login_shell"><span class="toc-number">1.5. </span>Login shell</a></li>
	<li class="toc-level-2"><a href="#MySQL_access"><span class="toc-number">1.6. </span>MySQL access</a></li>
	<li class="toc-level-2"><a href="#SSH_keys"><span class="toc-number">1.7. </span>SSH keys</a></li>
	<li class="toc-level-2"><a href="#Verify_the_server"><span class="toc-number">1.8. </span>Verify the server</a></li>
</ol>
</li>
</ol>
</div>
</div>

<h1 id="Remote_web_servers">1. Remote web servers</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="System_dependencies">1.1. System dependencies</h2>

<p>On the remote server, install these packages</p>

<p><div class="codeblock"><code>&nbsp; apt-get install rsync apache2 php5 php5-cli php5-mysql postfix mysql-client sudo</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Aegir_user">1.2. Aegir user</h2>

<p>Any number of remote web servers may be configured. The remote server needs an aegir user created on the system.</p>

<p><div class="codeblock"><code> adduser --system --group --home /var/aegir aegir<br /> adduser aegir www-data&nbsp;&nbsp;&nbsp; #make aegir a user of group www-data</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Web_server_configuration">1.3. Web server configuration</h2>

<p>You'll also need to prepare the web server in the same way you did for the master Aegir server during installation:</p>

<p><div class="codeblock"><code> a2enmod rewrite<br /> ln -s /var/aegir/config/apache.conf /etc/apache2/conf.d/aegir.conf</code></div></p>

<p>Don't restart Apache even when it prompts you. This will be done by the Verify task you'll spawn for the server from the Aegir frontend later.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Sudoers">1.4. Sudoers</h2>

<p>Add the aegir user to sudoers so it can restart Apache (e.g. sudo visudo -f /etc/sudoers.d/aegir):</p>

<p><div class="codeblock"><code>aegir ALL=NOPASSWD: /usr/sbin/apache2ctl</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Login_shell">1.5. Login shell</h2>

<p>The remote aegir user will also need a login shell, which can be modified using the <code>chsh</code> command.</p>

<p><div class="codeblock"><code>chsh -s /bin/sh aegir</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="MySQL_access">1.6. MySQL access</h2>

<p>Aegir connects directly to the remote server's MySQL to create databases and users. Therefore, you need to log into MySQL in the remote server as root and create a user with the following command:
<div class="codeblock"><code>GRANT ALL PRIVILEGES ON &#42;.&#42; TO root@aegir_server_ip IDENTIFIED BY &#039;password&#039; WITH GRANT OPTION;<br />FLUSH PRIVILEGES;</code></div></p>

<p>Where</p>

<p><UL>
<LI>'root' is the username on the Aegir server that will be connecting. Leave 'root';
</li><LI>'aegir_server_ip' is the IP address of your Aegir server. For example '123.123.123.123';
</li><LI>'password' is the password that will be used by your Aegir 'root' user to connect to the remote server's MySQL to create databases and users. It is suggested to store that password in a secure location. To increase security, it is recommended to choose a password with 6 to 16 alphanumeric and or punctuation characters.
</li></ul></p>

<p>If MySQL returns something like "Query OK", that means the command was successful. For example:</p>

<blockquote>
<code>Query OK, 0 rows affected (0.00 sec)</code>
</blockquote>

<p>Note the comment about "bind-address    = 127.0.0.1" on <a href="../../../../../installing/manual/index.html#Database_configuration" title="http://community.aegirproject.org/installing/manual#Database_configuration">http://community.aegirproject.org/installing/manual#Database_configuration</a></p>

<p>When the server is being verified, Aegir will attempt to create a database and grant privileges to a user for that database. If any of these two fails, <a href="http://www.ghacks.net/2009/12/27/allow-remote-connections-to-your-mysql-server/" target="_blank">verify that your MySQL configuration is correct</a> and that there is no firewall blocking your MySQL port.</p>

<p>You can confirm that MySQL is configured correctly on the remote server by manually connecting from the command line on your Aegir machine:</p>

<p><div class="codeblock"><code>[aegir@aegir_box:~]$ mysql -h &lt;mysql_server_IP&gt; -u root -p</code></div></p>

<p>If your MySql database is running on the same server as the Aegir master and is configured with the name "localhost", you may run an issue where the remote web server tries to access MySql via a local socket rather than the hostname. To resolve this, just change the server hostname for the MySql server in Aegir from "localhost" to the hostname of the server.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="SSH_keys">1.7. SSH keys</h2>

<p>SSH public/private keys should be set up so the main Aegir server's aegir user can access remote web aegir users with no passwords required.</p>

<p>Example: on main Aegir server:</p>

<p><div class="codeblock"><code>ssh-keygen -t rsa<br />(follow prompts)</code></div></p>

<p><strong>Do not</strong> use a passphrase when you create your key.  Simply press Enter to leave the passphrase blank.  Otherwise, SSH will insist that you enter the passphrase everytime you try to SSH using the key.  We don't want SSH to present any prompts.</p>

<p>Put the public key's contents into <code>/var/aegir/.ssh/authorized_keys</code> on the remote web server.  The easiest way to do this is to use the ssh-copy-id command.</p>

<p>You should manually login for the first time from your Aegir master server to your remote server as the aegir user, so that the remote web server is added to the known_hosts file in /var/aegir/.ssh on your Aegir master server. <strong>Verifying the remote webserver will fail until this has been done.</strong></p>

<p>You can confirm that SSH is set up correctly by manually connecting from your aegirmaster server to your remote server as aegir@ user to aegir@ user:
<div class="codeblock"><code>[aegir@aegirmaster:~]$ ssh aegir@&lt;remoteserver&gt;</code></div>
This should directly log you into the remote shell command line without any additional keys pressed.
<div class="codeblock"><code>[...]<br />[aegir@&lt;remoteserver&gt;:~]$</code></div></p>

<p>There are many, many tutorials online for setting up ssh keys, and various mistakes can be made by inexperienced users such as permissions etc. Aegir isn't a 'Linux beginner's practice tool', so setting these up is really out of the scope of this document and users are encouraged to research this on their own.  (For Ubuntu, see <a href="http://help.ubuntu.com/community/SSH/OpenSSH/Keys" title="Ubuntu guide to SSH keys">this article</a>).</p>

<p>If you have followed the instructions above, and your SSH connection gets closed immediately after you try to connect to the remote server as the aegir user, you may not have given the aegir user a shell correctly.  Check the /etc/passwd file on the remote server to make sure that the aegir user has a shell.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Verify_the_server">1.8. Verify the server</h2>

<p>Now you can add a new server node in Aegir, set the hostname and/or IP and set the service type to be 'Apache' (or Apache_SSL if this site is to handle SSL sites).</p>

<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/server/index.png" /></div>

<p>A verify task will be spawned and added to the Task queue ready for dispatching. During a server verification task, various configurations will be set on the Aegir master server and also synced to the remote web server, restarting Apache.</p>

<p>Now when you add a new Platform node in Aegir, you have the option of setting which web server to host it on. If you are not using a makefile but are downloading a platform manually, you must still do this on the main Aegir server. The contents will then be synced across to the web server.</p>

<p>You don't choose a web server when installing a new site. Because a site depends on a platform, its web server is implied by which platform has been chosen.  In other words, all sites on a platform are hosted on the same server.  You cannot host two sites on the same platform on different servers.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/sudoers/index.png" title="sudoers.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/sudoers/index.png" alt="sudoers.png" title="sudoers.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/sudoers/index.png">sudoers.png</a></td><td class="size">68.03 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-396.html?destination=node%2F30%23comment-form">Login</a> or <a href="../../../../../user/register/index-396.html?destination=node%2F30%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../30/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-396" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../396/index.html">Remote webserver configuration</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Any number of remote web servers may be configured. They need an <a href="../../../../../installing/manual/index.html#Create_the_Aegir_user">aegir user</a> and webserver configuration, with the same user name and directory paths. SSH public/private keys should be set up so hostmaster's Aegir user can access remote web Aegir users with no passwords. The above Apache configuration needs to be performed too.</p>

<p>Additionally, the remote web server needs the 'mysql' client binary installed so that Aegir can test that it can successfully connect to the database server. On (at least) Debian-based systems, this can be installed via the 'mysql-client' package.</p>

<p>They will also need a login shell, which can be modified using the <code>chsh</code> command.</p>

<p>Shell commands as root::</p>

<pre><code>apt-get install mysql-client
adduser --system --group --home /var/aegir aegir
adduser aegir www-data    #make aegir a user of group www-data
chsh -s /bin/sh aegir
apt-get install rsync apache2 php5 php5-cli php5-mysql
mkdir /var/aegir/.ssh
cat &gt; /var/aegir/.ssh/authorized_keys &lt;&lt;EOF
ssh-rsa AAAAB3NzaC1yc2EAAAADAQAB...UF aegir@filer01
EOF
chown aegir:aegir /var/aegir/.ssh -R
chmod 750 /var/aegir/.ssh
chmod 640 /var/aegir/.ssh/authorized_keys
a2enmod rewrite
ln -s /var/aegir/config/apache.conf /etc/apache2/conf.d/aegir.conf
cat &gt; /etc/sudoers.d/aegir &lt;&lt;EOF
Defaults:aegir  !requiretty
aegir ALL=NOPASSWD: /usr/sbin/apache2ctl
EOF
chmod 440 /etc/sudoers.d/aegir
</code></pre>

<p>For clusters, use the aegir-cluster-slave package to operate the above and NFS mounts for you. See also <a href="../../../../../content/web-clusters/index.html">web cluster configuration documentation</a>.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-57.html?destination=node%2F396%23comment-form">Login</a> or <a href="../../../../../user/register/index-57.html?destination=node%2F396%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-57.html?destination=node%2F396%23comment-form">Login</a> or <a href="../../../../../user/register/index-57.html?destination=node%2F396%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-446" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../446/index.html">Adding a platform on a remote web server</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_119 first"><a href="../../../../../category/keywords/add-platform/index.html" rel="tag" title="">add platform</a></li>
<li class="taxonomy_term_120 last"><a href="../../../../../category/keywords/remote-server/index.html" rel="tag" title="">remote server</a></li>
</ul></div><p>Especially if you have been using Aegir for a while simply because it handles updates, moving to new releases, cloning, aliases and everything Drupal with such elegance on a single server - you might not be entirely clear on what changes when you make the move to multiple servers.  Hopefully this will help.</p>

<h2>Understanding the process</h2>

<p>Multiple servers are great even if you do not have to manage a server farm.  Having a server for development that you are free to break, one for testing that you hope will not break, one for approvals so your clients can go to see how their "real" website will look, and one for production that serves the daily grind of live sites is a wonderful thing.  This DTAP (Development, Testing, Acceptance, and Production) structure works and it is surprisingly easy to accomplish under Aegir.</p>

<p>If you are managing a farm, creating massive numbers of servers is quick and easy with Aegir - especially if you use virtual machines like Xen where a server image can be cloned or generated using LVM disks that can be migrated (even while running) to other physical machines.</p>

<p>When it is time break out an Aegir master controller and remote slaves you have to remember that Aegir is the place that it (almost) all happens.  Everything is stored in Aegir - including your remote platforms and your sites - and then distributed to the slave servers by Aegir in the Verify process.</p>

<p>Remember too that sites reside on platforms, and platforms reside on servers.  You are turning your Aegir install into an Aegir Master as the hub, and the Aeger Remote Slaves as the spokes.  To move into this "hub and spoke" architecture, you must build the remote server, tell the Aegir Master about that server and verify it, install a Drupal platform for that server on the Aegir Master and finally tell the Aegir Master about that Drupal install and verify that.  You then create the sites on the platform you want based upon the install profile you select for that site.  Need more?  How about an example:</p>

<h2>The mechanics</h2>

<p>(1) Build a server image on your network to become your Aegir Slave.  This can be anything from a separate headless server to a Virtual Machine image on physical machine with a dozen other Virtual Machines on it.  As long as it has its own IP and is capable of running a Drupal image, it will work.</p>

<p>(2) Ensure that your new server image is resolved in your DNS by adding it to your zone files and incrementing the serial number in the zone file.  Aegir can manage that for you now to some extent, but you might want to wait until that feature leaves the experimental status.  Make sure the entries in /etc/hostname and /etc/hosts all match your zone files (including reverse DNS).  Reload/restart the DNS server.  Any DNS slaves should automatically get notified and the incremented serial number should make sure they reload automatically.  Test the resolution and ping the new Aegir Slave server image from the Aegir Master to Ensure that the IPs all resolved properly.</p>

<p>(2) Follow the steps in the Aegir Handbook page at <a href="../../../../30/index.html" title="http://community.aegirproject.org/node/30">http://community.aegirproject.org/node/30</a> carefully.  You should be able to use cut and paste if you are using Debian Stable or the like.  In any case, you will need those packages.  You do not need Aegir on the slave, but you do need the aegir user and that user must have a shell.  I prefer the bash shell, but the sh shell in the instructions will do.</p>

<p>(3) You need to have the "passphraseless" ssh working and proven before you continue.  A web search on the terms "passphraseless ssh" plus your operating system will generally get you great instructions, but putting those instructions here for every possible combination is beyond the scope of this example.  In terms of helpful hints, however, you do not need to have a password for the aegir user on the Aegir Slave.  Your access will be this certificate.  By simply hitting enter when it asks for the passphrase, you make the certificate passphraseless.  You should carefully set the permissions and back these certificates up to a secure location.  You MUST log in manually from the Aegir Master to the Aegir Slave the first time or your verify will fail.  This is because the system has to add the ssh keys to the known hosts and it will ask about about it before it will allow the connection.  Aegir nows nothing about this and will not answer, so the verify will fail.  To be absolutely sure it works, after exiting the initial login, you should retry the login to verify it does not ask for a password and then exit the login and try an rsync (which is the process by which the Aegir Master controls the Aegir Slaves).  All of these commands should work from the Aegir Master to the new Aegir Slave while logged into the Aegir Master as the aegir user with no request for a password, proving that the systems are exchanging keys (do not proceed until you can do this flawlessly without having to enter a response):</p>

<p><div class="codeblock"><code>##&nbsp; Start from the Aegir Master as the aegir user<br /># Log in to the slave from the Aegir Master and exit without any password or reply required<br />ssh slavename.example.com<br />exit<br /># Create a test file for rsync<br />echo &#039;rsync test file&#039; &gt; MyRsyncTest<br /># Send the test file to the remote slave by name using rsync<br />rsync -azvv /var/aegir/MyRsyncTest aegir@slavename.example.com:/var/aegir<br /># Log back into the remote slave<br />ssh slavename.example.com<br /># Make sure the file is there and readable<br />cat /var/aegir/MyRsyncTest<br /># Delete the test file from the remote slave<br />rm /var/aegir/MyRsyncTest<br /># Exit the ssh login session on the remote<br />exit<br /># Delete the test file on the Aegir Master<br />rm /var/aegir/MyRsyncTest</code></div></p>

<p>(4) Go to Add Content/Server and put in the server name, leave the Database set as None (Your sites will use the Aegir Master database and none is required on the Remote Slave) and under Web select apache or apache ssl (to match the example) then click Save. After the process completes you should see that it found the IP address properly on its own, plugged it in all by itself and then Verify quite nicely. If you look on the Aegir Slave remote server you will see that you now have directories named config and platform.</p>

<p>(5) Now that hard decision for platform choice comes in play.  My preference is a Drupal install that is the same release as the Aegir Master server or higher.  Since sites are eventually destined to be Drupal 7 one day, and the Aegir system is not Drupal 7 ready as of this writing but heading that direction, making at least one Drupal 7 slave is a good idea so that you can migrate sites to that platform as they are ready.  If you are migrating sites off of your existing Aegir and onto slaves, migrating to platforms of the same Drupal version makes that process much easier.  In any case, firm up your decision about which Drupal version you want to install on your new Aegir Slave Platform.</p>

<p>(6) Time to create that platform.  The big thing here is to do it right the first time and make certain that the name of the platform is unique to any platform on your Aegir Master server.  If you look in your /var/aegir directory you will notice that Aegir has its own naming convention.  For instance, you should see /var/aegir/hostmaster-0.4-rc1 as the platform for the Aegir 0.4 release candidate 1.  You need to consider doing the same.  For instance, name your platform something like: /var/aegir/slavename-drupal-version and you will make it easier to distinguish which server the platform resides upon and the drupal version so that you can manage updates and migrations more easily.  Make certain that you are not destroying one platform when creating another.  Be aware that at some point Aegir started organizing platforms into a separate directory: /var/aegir/platforms and you should change to that structure if you have an older original install.  Again, be careful you are not overwriting an existing install when you create the new one.  For instance, if you already have a Drupal install in /var/aegir/platforms/drupal-7.14 the code below will attempt to recreate it on top of the existing install.  If you are using a Makefile, be sure that the same problem does not occur in that makefile.  To create a Drupal 7 Aegir Remote Slave Platform, log into the Aegir Master as the aegir user and run this simple code (of course edit it to match the platform and name you want to create:
<div class="codeblock"><code># Make sure you are in the proper directory<br />cd /var/aegir/platforms<br /># Install Drupal 7.14<br />drush/drush.php dl drupal-7.14<br /># Rename the platform to your own naming convention<br />mv /var/aegir/platforms/drupal-7.14 /var/aegir/platforms/slavename-drupal-7.14</code></div></p>

<p>(7) The final step in creating this platform is to actually tell the Aegir Master about it so that it can distribute it (via rsync) to the new Aegir Remote Slave.  Simple enough.  Just go to Create Content/Platform and the Create Platform screen comes up.  Under Name write something descriptive and unique.  In the example so far, this will be something like 'slavename Drupal 7.14' or in some way adhere to your chosen naming convention.  I use the directory name I created above since that serves two purposes.  Under Publish Path you will put the path that holds this Drupal distribution.  In the example above that will be /var/aegir/platforms/slavename-drupal-7.14 but the path will be reflected from the Aegir Master to the Aegir Slave and will be the same on both.  If you are using a Makefile you need to enter the full path and name of that Makefile here as well, but the creation and use of the Makefile is beyond the scope of this example.  Lastly choose the server that this platform will reside upon.  When you are finished, double check the screen and then click on Save.  The Verify step should execute flawlessly and when it does, your Aegir Remote Slave will be complete and ready to accept sites.</p>

<p>(8) Lather, rinse and repeat for each Aegir Remote Slave.</p>

<h2>Creating sites on the remote</h2>

<p>The only difference you will notice when creating a new site under Aegir will be the choice of platform.  The Create Site screen is quite self explanatory, but the main thing is to select the Install Profile that you  require and then the list of Platforms that support that install profile will be populated.</p>

<p>As usual, Aegir makes it all faster and easier than you expect.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-397.html?destination=node%2F446%23comment-form">Login</a> or <a href="../../../../../user/register/index-397.html?destination=node%2F446%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../446/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-37" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/web-clusters/index.html">Web clusters</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><h1>Cluster module</h1>

<p>The cluster module is a simplified solution for maintaining platforms across multiple web servers.  A cluster server node does not require a physical machine to be present on the network.  Simply create web servers as usual and create a server node that has "Cluster" selected under the web field set of the server node add form.  Select the servers that should be part of the new web cluster by clicking the check box next to each web server in the "Servers" section.</p>

<p>The cluster module will rsync the platforms between each web server and keep them up to date.</p>

<h1>Pack module</h1>

<p>A Pack consists of a single server node that is specified as "pack" and any number of server nodes specified as "apache" or "nginx".  The main difference between the Pack functionality and Web Cluster functionality is that Aegir rsync's configuration (Apache &amp; Nginx) to "all" nodes in the Pack and rysnc's the platform and site code to only the "master" node in the Pack.  All other "slave" nodes will see the platform and site code via NFS.</p>

<p><strong>Configuring the Pack server node:</strong></p>

<p>The "pack" server node will not be used by Aegir to physically deploy sites or platforms on, so consider it more of a 'virtual server group' for logistical purposes only.  When creating the pack node, you do not need to supply a valid Server hostname or IP address, so choose a naming convention that makes sense in your environment.</p>

<p>Next, select the "pack" radio button option under the web configuration when creating or editing the server node, in order to designate this server node as the "pack" server.</p>

<p>Now select the "Master" server from the list of Master servers.  The Master server will be the server node that Aegir rsync's the platform and site to. Typically, you would choose the Aegir server itself as the 'master'.</p>

<p>Finally, select the "Slave" servers from the list of Slave servers.  The Slave servers will have the Apache or Nginx config rsync'd to them but not the platform or site code, since those will be available to all Slave servers via the NFS share.</p>

<p><strong>Configuring the Web server nodes (Master and Slaves):</strong></p>

<p>Configure all web server nodes using <a href="../../../../396/index.html">these instructions</a>. Take care to ensure the 'aegir' user and group on your NFS client machines, have the same UID/GID as that of the NFS server, or else you may run into permissions issues with NFS.</p>

<p>Then mount the files on the remote server.</p>

<p>On the NFS server:</p>

<pre><code>sudo apt-get install nfs-kernel-server
echo "/var/aegir/platforms    10.0.0.0/24(rw,no_subtree_check)" &gt;&gt; /etc/exports
sudo service nfs-kernel-server reload
</code></pre>

<p>(Replace the subnet here or add specific /32 hosts as necessary for your environment)</p>

<p>Then on the web servers (Master, if it wasn't also the NFS server, and the Slaves):</p>

<pre><code>sudo apt-get install nfs-client
sudo mount 10.0.0.1:/var/aegir/platforms /var/aegir/platforms
</code></pre>

<p>(Replace the NFS server's IP here with that of your master server/Aegir server)</p>

<p>Add this to your fstab on the servers that mount the NFS share, so that the share is mounted on boot:</p>

<pre><code>10.0.0.1:/var/aegir/platforms /var/aegir/platforms nfs rw 0 0
</code></pre>

<p><strong>Creating a Platform on a Pack:</strong></p>

<p>When configuring a Platform to be deployed on a Pack, choose the "Pack" server node from the Web server radio group during the Platform node creation. Then you choose this Platform as usual when adding a site, and that site will be served from any servers within the Pack.</p>

<p><strong>Caveats</strong></p>

<p>Relying on an NFS share to serve your entire /var/aegir/platforms can be a single point of failure if the NFS share becomes unavailable. You may want to look into providing some sort of failover for NFS (google for things like DRBD and Heartbeat), or using some other form of redundancy for your NFS (Netapp filer clusters etc)</p>

<p>There have also been reports of issues with MySQL GRANT statements not being provided to all webservers in the pack - especially where the master server is <em>not</em> the Aegir hostmaster server. This issue is ongoing - see the Talk page here or <a href="http://drupal.org/node/1555398">this ticket</a></p>

<p>Also attached is an example diagram of a Pack cluster known to be functioning in production (with an optional MySQL-MMM cluster out of scope for this documentation), which may help you visualise the Pack and how it can be put together.</p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/aegir_pack/index.png" title="aegir_pack.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/aegir_pack/index.png" alt="aegir_pack.png" title="aegir_pack.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/aegir_pack/index.png">aegir_pack.png</a></td><td class="size">41.2 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-308.html?destination=node%2F37%23comment-form">Login</a> or <a href="../../../../../user/register/index-308.html?destination=node%2F37%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../37/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-388" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../388/index.html">Setting Up Varnish &amp; Memcache with Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first last"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
</ul></div><p>I had the hardest time finding resources &amp; documentation on how to get this configured properly so I am adding this to the documentation for those of you who may need it.</p>

<p>A couple of notes:
I am using Ubuntu 10.04 LTS.
I set my apache to port 8082 because there was a conflict on port 8080 on my system.
You should make a copy of each file before editing it.
Memcache settings are drupal 7.</p>

<h2>Varnish</h2>

<p>Setting up varnish isn't too hard but it could end up being kind of tedious if you configure something incorrectly &amp; you have alot of sites.</p>

<p>First you install it
<code>sudo apt-get install varnish</code></p>

<p>Then you have to go to configure it. I use vim.
<code>sudo vim /etc/varnish/default.vcl</code></p>

<p>These are my settings.</p>

<pre>
backend default {
    .host = "127.0.0.1";
    .port = "8082";
    .connect_timeout = 600s;
    .first_byte_timeout = 600s;
    .between_bytes_timeout = 600s;
}
sub vcl_recv {
  // Remove has_js and Google Analytics __* cookies.
  set req.http.Cookie = regsuball(req.http.Cookie, "(^|;\s*)(__[a-z]+|has_js)=[^;]*", "");
  // Remove a ";" prefix, if present.
  set req.http.Cookie = regsub(req.http.Cookie, "^;\s*", "");
  // Remove empty cookies.
  if (req.http.Cookie ~ "^\s*$") {
    unset req.http.Cookie;
  }
 

// Skip the Varnish cache for install, update, and cron
  if (req.url ~ "install\.php|update\.php|cron\.php") {
    return (pass);
  }
 

// Cache all requests by default, overriding the
  // standard Varnish behavior.
  // if (req.request == "GET" || req.request == "HEAD") {
  //   return (lookup);
  // }
}
sub vcl_hash {
  if (req.http.Cookie) {
    set req.hash += req.http.Cookie;
  }
}

</pre>

<p>Now you have to edit /etc/default/varnish
<code>sudo vim /etc/default/varnish</code></p>

<p>Here are my settings</p>

<pre>
# Should we start varnishd at boot?  Set to "yes" to enable.
START=yes
# Maximum number of open files (for ulimit -n)
NFILES=$(ulimit -n)
#Malloc size depend on your memory server
DAEMON_OPTS="-a :80 \
             -T localhost:6082 \
             -f /etc/varnish/default.vcl \
             -S /etc/varnish/secret \
             -s malloc,512M \
             -u www-data \
             -g www-data"
</pre>

<p>Now we have to configure apache's listening ports</p>

<p><code>sudo vim /etc/apache2/ports.conf</code></p>

<p>change</p>

<pre>
NameVirtualHost *:80
Listen 80
</pre>

<p>So that it looks like this</p>

<pre>
NameVirtualHost *:8082
Listen 8082
</pre>

<p>Start varnish
<code>services varnish start</code></p>

<p>Now login to aegir
Edit your server &amp; change the port from 80 to 8082</p>

<p>Aegir will re-verify the server, as well as all platforms &amp; sites on the server.</p>

<p>If that doesnt work, you need to go to 
/var/aegir/config/server_master/apache/vhost.d 
and edit all of your virtual hosts so that the port shows 8082 instead of 80
then do the same thing with
/var/aegir/config/server_master/apache.conf
Reverify your server.</p>

<p>Now add this to the local.settings.php of the sites that you want to leverage varnish</p>

<pre>
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000"># Tell Drupal it's behind a proxy<br /></span><span style="color: #0000BB">$conf</span><span style="color: #007700">[</span><span style="color: #DD0000">'reverse_proxy'</span><span style="color: #007700">] = </span><span style="color: #0000BB">TRUE</span><span style="color: #007700">;<br /></span><span style="color: #FF8000"># Tell Drupal what addresses the proxy server(s) use<br /></span><span style="color: #0000BB">$conf</span><span style="color: #007700">[</span><span style="color: #DD0000">'reverse_proxy_addresses'</span><span style="color: #007700">] = array(</span><span style="color: #DD0000">'127.0.0.1'</span><span style="color: #007700">,</span><span style="color: #DD0000">'your-ip-address-here'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000"># Bypass Drupal bootstrap for anonymous users so that Drupal sets max-age &amp;gt; 0<br /></span><span style="color: #0000BB">$conf</span><span style="color: #007700">[</span><span style="color: #DD0000">'page_cache_invoke_hooks'</span><span style="color: #007700">] = </span><span style="color: #0000BB">FALSE</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
</pre>

<h2>Memcache</h2>

<p>There is hardly any current documentation for setting up memcache on D7, especially not for aegir.</p>

<p>FIrst you install memcache &amp; its dependencies
Download &amp; install memcache module into the platform of the site/sites in which you will be using memcache</p>

<p>Then you have to edit 
/etc/default/memcached
<code>sudo vim ./etc/init.d/memcached</code></p>

<p>Here are my settings</p>

<pre>
#! /bin/sh
#

PORT=11211
USER=nobody
MAXCONN=1024
OPTIONS=""
DAEMON=/usr/bin/memcached

RETVAL=0
prog="memcached"

start_instance() {
        echo -n $"Starting $prog ($1): "
        start-stop-daemon --start --quiet --pidfile /var/run/memcached/memcached.$1.pid --exec $DAEMON -- -d -p $PORT -u $USER  -m $2 -c $MAXCONN -P /var/run/memcached/memcached.$1.pid $OPTIONS
        RETVAL=$?
        echo
        [ $RETVAL -eq 0 ] &amp;&amp; touch /var/lock/memcached.$1
        PORT=`expr $PORT + 1`
}

stop_instance() {
        echo -n $"Stopping $prog ($1): "
        start-stop-daemon --stop --quiet --oknodo --pidfile /var/run/memcached/memcached.$1.pid --exec $DAEMON 
        RETVAL=$?
        echo
        if [ $RETVAL -eq 0 ] ; then
            rm -f /var/lock/memcached.$1
            rm -f /var/run/memcached/memcached.$1.pid
        fi
}
start () {
        # insure that /var/run/memcached has proper permissions
        mkdir -p /var/run/memcached
        if [ "`stat -c %U /var/run/memcached`" != "$USER" ]; then
                chown $USER /var/run/memcached
        fi

        start_instance default 64;
        start_instance block 16;
        start_instance content 128;
        start_instance filter 128;
        start_instance form 32;
        start_instance menu 16;
        start_instance page 8;
        start_instance update 8;
        start_instance views 8;
        start_instance path 8;
        start_instance field 8;
        start_instance rules 8;
        start_instance token 8;
        start_instance image 8;
        start_instance apachesolr 16;
}
stop () {
        stop_instance default;
        stop_instance block;
        stop_instance content;
        stop_instance filter;
        stop_instance form;
        stop_instance menu;
        stop_instance page;
        stop_instance update;
        stop_instance views;
        stop_instance path;
        stop_instance field;
        stop_instance rules;
        stop_instance token;
        stop_instance image;
        stop_instance apachesolr;
}

restart () {
        stop
        start
}

# See how we were called.
case "$1" in
  start)
        start
        ;;
  stop)
        stop
        ;;
  status)
        status memcached
        ;;
  restart|reload|force-reload)
        restart
        ;;
  *)
        echo $"Usage: $0 {start|stop|status|restart|reload|force-reload}"
        exit 1
esac

exit $?
</pre>

<p>Start memcache
<code>sudo services memcached start</code>
If you see errors u may have an issue where a one line got split into two lines.
Check and make sure that none of your lines got broken off.</p>

<p>Place this code in your local.settings.php file inside your site folder</p>

<pre>
// the path to the core cache file
  include_once('./includes/cache.inc');
  // the path to the memcache cache file
  include_once('./sites/all/modules/memcache/memcache.inc');
  // make MemCacheDrupal the default cache class
  $conf['cache_default_class'] = 'MemCacheDrupal';
  
  # Key Prefix: edit this for multisite use.
  $conf['memcache_key_prefix'] = "$_SERVER[db_user]";
  
  $conf['memcache_servers'] = array(
  '127.0.0.1:11211' =&gt; 'default',
  '127.0.0.1:11212' =&gt; 'menu',
  '127.0.0.1:11213' =&gt; 'filter',
  '127.0.0.1:11214' =&gt; 'form',
  '127.0.0.1:11215' =&gt; 'block',
  '127.0.0.1:11216' =&gt; 'update',
  '127.0.0.1:11217' =&gt; 'views',
  '127.0.0.1:11218' =&gt; 'content',
  '127.0.0.1:11219' =&gt; 'apachesolr',
  '127.0.0.1:11220' =&gt; 'path',
  '127.0.0.1:11221' =&gt; 'field',
  '127.0.0.1:11222' =&gt; 'rules',
  '127.0.0.1:11223' =&gt; 'token',
  '127.0.0.1:11224' =&gt; 'image',    
);
$conf['memcache_bins'] = array(
  'cache' =&gt; 'default',
  'cache_menu'   =&gt; 'menu',
  'cache_filter' =&gt; 'filter',
  'cache_form'   =&gt; 'form',
  'cache_block'  =&gt; 'block',
  'cache_update' =&gt; 'update',
  'cache_views'  =&gt; 'views',
  'cache_views_data'  =&gt; 'views',
  'cache_content'  =&gt; 'content',
  'cache_apachesolr'  =&gt; 'apachesolr',
  'cache_path'  =&gt; 'path',
  'cache_field'  =&gt; 'field',
  'cache_rules'  =&gt; 'rules',
  'cache_token'  =&gt; 'token',
  'cache_image'  =&gt; 'image',
);
</pre>

<p>And that should be basically it.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-309.html?destination=node%2F388%23comment-form">Login</a> or <a href="../../../../../user/register/index-309.html?destination=node%2F388%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../388/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-427" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../427/index.html">Working as aegir user</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>It can be convenient to do stuff as the aegir user.
The default shell of the aegir user is /bin/false, so you have to make sure to use something more usable:</p>

<pre>
sudo su - aegir -s /bin/bash
</pre>

<p>GNU Screen is a super useful window manager for the console.  When launching screen you will usually get errors like</p>

<pre>
Cannot open your terminal '/dev/pts/6' - please check.
</pre>

<p>You can get around this by running</p>

<pre>
script /dev/null
</pre>

<p>All in all this works nicely:</p>

<pre>sudo su aegir -s /bin/bash -c "script -q /dev/null"</pre>

<p>It can be convenient to put it in a little script as <code>/usr/local/bin/suaegir</code></p>

<h2>Allowing other users besides root on your system to run commands as aegir</h2>

<p>If you wish to allow other users on your system to run commands as the aegir user using sudo, without allowing them to use sudo generally, you can add the following two lines to your /etc/sudoers file using visudo:</p>

<p><div class="codeblock"><code>User_Alias&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AEGIRUSERS = comma, separated, list, of, users<br />AEGIRUSERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALL = (aegir) ALL</code></div></p>

<p>If you want to allow these users to use aegir without entering a password, simply change the second line to this:</p>

<p><div class="codeblock"><code>AEGIRUSERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALL = (aegir) NOPASSWD:ALL</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-402.html?destination=node%2F427%23comment-form">Login</a> or <a href="../../../../../user/register/index-402.html?destination=node%2F427%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../427/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-341" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../341/index.html">Adding apache config files</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>If you connect to your Hostmaster server and look at
~aegir/config/server_examplecom/apache.conf, you can see that this
file includes files from pre.d and post.d directories.  The includes
are done in the following order:</p>

<ol>
<li>pre.d</li>
<li>vhost.d</li>
<li>platform.d</li>
<li>post.d</li>
</ol>

<p>The earlier files take precendence over the later files for &lt;VirtualHost&gt; blocks. The latter files take precedence over earlier files for &lt;Directory&gt; blocks.</p>

<p>If we wanted to add a phpini directive that can only be set on a <a href="http://us2.php.net/manual/en/configuration.changes.modes.php">PHP_INI_PERDIR</a>-for
example, <a href="http://us2.php.net/manual/en/ini.core.php">post_max_size</a>-we
could create a file called upload.conf and add it either to pre.d or
post.d.</p>

<p>Here's a possible upload.conf:
<div class="codeblock"><code>####################################<br /># Custom Server-wide configuration #<br />####################################<br /># our php.ini sets memory limit to 96M<br /># <br /># post_max_size should also be less than memory_limit.<br /># <a href="http://us2.php.net/manual/en/ini.core.php#ini.post-max-size<br />#" title="http://us2.php.net/manual/en/ini.core.php#ini.post-max-size<br />#">http://us2.php.net/manual/en/ini.core.php#ini.post-max-size<br />#</a> <br />php_value post_max_size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 90M<br />php_value upload_max_filesize&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 85M</code></div>
If we put upload.conf in pre.d, our setting would always take
precedence, because it occurs higher up the chain of include files.</p>

<p>If we put upload.conf in post.d, our setting would be applied only
if the same setting is not defined higher up the chain by the
aegir code. As Antoine <a href="http://drupal.org/node/936720#comment-3552466">states here</a>
post.d is mainly useful when migrating in sites.  It would also be
useful if you wanted to set a server-wide default which could be
overridden on by a virtual host or platform config setting.</p>

<p>Related: <a href="../../../../73/index.html" title="http://community.aegirproject.org/node/73">http://community.aegirproject.org/node/73</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-403.html?destination=node%2F341%23comment-form">Login</a> or <a href="../../../../../user/register/index-403.html?destination=node%2F341%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../341/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-29" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/content/administrator/post-install-configuration/using-ssl/index.html">Using SSL</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><h3>Introduction</h3>

<p>SSL support was significantly improved in Aegir 0.4 alpha9 and subsequent releases have further refined the SSL functionality. Here are the current steps to configure SSL support in Aegir and apply it to your web sites.</p>

<h3>Prepare Your Server</h3>

<p><OL>
<LI>Make sure port 443 is open for SSL traffic.
</li><LI>From the command line, install SSL software for your web server (e.g. on Debian/Ubuntu you can use <code>sudo apt-get install openssl</code>).</li>
<LI>Enable SSL support (e.g. <code>sudo a2enmod ssl</code>).  You will need to restart Apache at this point.
</li></ol></p>

<h3>Enable SSL Support in Aegir</h3>

<p><OL>
<LI>You have to enable SSL support in Aegir as it is off by default.  Assuming the URL of your Aegir front end is aegir.example.com, browse to aegir.example.com/admin/hosting/features 
<img src="../../../../../sites/community.aegirproject.org/files/features-page/index.png" alt="how to get to the Aegir features page" />
</li><LI>Click on Experimental to reveal experimental features <img src="../../../../../sites/community.aegirproject.org/files/ssl-support/index.png" alt="experimental features of Aegir" />
</li><LI>Check SSL support
</li><LI>Click Save configuration
</li></ol></p>

<h3>Configure Your Aegir Server</h3>

<p><OL>
<LI>Click on the Servers tab
</li><LI>Click on the server that you wish to enable SSL support
</li><LI>Click Edit to change the server configuration
</li><LI>Click apache_ssl (this will reveal an additional field: SSL port, which should be already populated with 443).<img src="../../../../../sites/community.aegirproject.org/files/enable-ssl-on-server/index.png" alt="enabling SSL on your Aegir server" />
</li><LI>You may also have to add an IP address to the IP addresses field. The field is used as an "IP pool" for SSL certificates: IPs are assigned to SSL sites when they are created on a first come, first served basis. (Note that there are known issues with this process, see <a href="http://drupal.org/node/1126640">issue #1126640</a> for details.)
</li><LI>Click Save - this will start various tasks beginning with a verify task on the server followed by verify tasks on all platforms that are associated with that server
</li><LI>If all goes well you will see the following changes in your Aegir <a href="http://groups.drupal.org/node/93849">file system structure</a>:
a new <code>/var/aegir/config/ssl.d</code> directory and a 
new <code>/var/aegir/config/server_master/ssl.d</code> directory.
</li></ol></p>

<p>The <code>/var/aegir/config/ssl.d</code> directory is where you will be able to manipulate SSL keys and certificates, for example by importing commercial SSL certificates or generating a new key. Do <em>not</em> manually edit the <code>/var/aegir/config/server_master/ssl.d</code> directory as changes to that directory will be overwritten when the server or site are verified.</p>

<h3>Configure Your Aegir Site</h3>

<p><OL>
<LI>You must enable SSL on your sites that are on those platforms associated with the server.  Browse to aegir.example.com/hosting/c/example.com
</li><LI>Click Edit to change the site configuration
</li><LI>Choose the type of Encryption required and the Encryption key (see the explanatory notes below each option). <img src="../../../../../sites/community.aegirproject.org/files/site-ssl-configuration_0/index.png" alt="configuring an Aegir site for SSL" /> <em>NOTE:,</em> Alternatively, you may specify a directory under /var/aegir/config/server_master/ssl.d where your own certificate and key is to be stored (see Apache notes below).
</li><LI>Click Save.  Aegir will then generate a certificate and private key for your web site and insert these into a new VirtualHost directive in your vhost file.  (This file is typically at /config/server_master/apache/vhost.d/example.com).
</li><LI>If all goes well the VirtualHost directive will now have these important elements:</li></ol></p>

<p><div class="codeblock"><code>&lt;VirtualHost xx.xx.xx.xx:443&gt; # &lt;-- where xx.xx.xx.xx is an IP address dedicated for SSL access to your site and 443 is the port number<br />&nbsp;&nbsp;&nbsp; ....<br /><br />&nbsp;&nbsp;&nbsp; # Enable SSL handling.<br />&nbsp;&nbsp;&nbsp; SSLEngine on<br /><br />&nbsp;&nbsp;&nbsp; SSLCertificateFile /var/aegir/config/server_master/ssl.d/example.com/openssl.crt<br />&nbsp;&nbsp;&nbsp; SSLCertificateKeyFile /var/aegir/config/server_master/ssl.d/example.com/openssl.key</code></div></p>

<p>Now, when you navigate to <a href="https://example.com/" title="https://example.com">https://example.com</a> you should see that your site is SSL enabled. It will, however, generate warnings in your browsers because it is a self-signed certificates. See below for how to use commercial certificates to remove this warning.
</p>

<h2>Notes for Apache users with Commercial Certificate File(s)</h2>

<p>If you wish to use your own commercial certificate and key you will need to do the following:</p>

<p><OL>
<LI>Follow the directions above, using the "Generate new encryption key" option and using your site's domain name for the "New encryption key". This will create a site directory under <code>/var/aegir/config/ssl.d/example.com</code>. With this step, you have created a self-signed certificate, and your site is now configured to use it.
</li><LI>This generated a 2048 bit RSA key for you along with a CSR (Certificate Signing Request). If you prefer to generate your own RSA key, replace the files (<code>openssl.key</code> and <code>openssl.csr</code>) in the <code>/var/aegir/config/ssl.d/example.com</code> directory with your RSA key and associated CSR.
</li><LI>Copy and paste the <code>.csr</code> file into the form for the issuing Certificate 
Authority (CA) to create your certificate.
</li><LI>When your certificate has been generated, download the files from the issuing authority and place in your temporary folder on your PC. You may have more than one .crt files, in this case you have a "bundle" or what we call a "certificate chain" that you need to add in aegir (see below).
</li><LI>Transfer all the files to /var/aegir/config/ssl.d/example.com. Rename the site .crt file to openssl.crt. If you have a certificate chain, install it in <code>openssl_chain.crt</code>. You should have at least three files in the directory (<code>openssl.crt</code>, <code>openssl.key</code>, <code>openssl.csr</code>, and optionnally <code>openssl_chain.crt</code>).
</li></ol></p>

<h3>Verify your site from aegir's frontend.</h3>

<p>You should now be able to access your site via https:// using your commercial certificate.</p>

<h2>Notes for Nginx users:</h2>

<p>It is recommended to allow Aegir to create a default self-signed certificate and key first, and then replace the contents of both files (not the files itself) with your real key and certificate. Any chained certificates (bundles) should be included in the same file, directly below your own certificate - there is no need for extra files/lines like it is for Apache configuration.</p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/site-ssl-configuration_0_0/index.png" title="site-ssl-configuration_0.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/site-ssl-configuration_0_0/index.png" alt="site-ssl-configuration_0.png" title="site-ssl-configuration_0.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/site-ssl-configuration_0_0/index.png">site-ssl-configuration_0.png</a></td><td class="size">26.91 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-299.html?destination=node%2F29%23comment-form">Login</a> or <a href="../../../../../user/register/index-299.html?destination=node%2F29%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../29/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-38" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../administrator/dns/index.html">DNS</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><h1> Debian/Ubuntu</h1>

<p>There is preliminary support for DNS in Aegir's backend that allows it to manage zonefiles dynamically when sites are created. There are still a few major bits missing (described in <a href="http://drupal.org/node/922280">this meta-ticket</a>) so we generally recommend people use the <a href="../../../../../dnswildcard/index.html">wildcard approach</a> for now.</p>

<p>That said, while perhaps not yet ready for production use, Aegir's DNS functionality can be quite useful for local development environments. If you run Aegir locally, you're probably in the habit of hacking <em>/etc/hosts</em> regularly, or if you're more adventurous, you've set up a local DNS forwarder, such as dnsmasq. With Aegir's DNS feature, you can avoid this hassle, and let Aegir handle it transparently.</p>

<p>While Aegir supports both BIND and dnsmasq, this documentation will focus on the former. The first step is to install BIND. On Debian-based distros, this will look like:
<div class="codeblock"><code>apt-get install bind9</code></div></p>

<p>Next we need to allow the <em>aegir</em> user to run <strong>rndc</strong> (the name server control utility). On recent Debian systems, this will involve editing <em>/etc/sudoers.d/aegir</em>, whereas on older releases this would be <em>/etc/sudoers</em>. Modify the aegir line to read:
<div class="codeblock"><code>aegir ALL=NOPASSWD: /usr/sbin/apache2ctl, /usr/sbin/rndc</code></div></p>

<p>Then we need to make sure the <em>bind</em> user has access to read Aegir's files, so we'll add <em>bind</em> to the <em>aegir</em> group:
<div class="codeblock"><code>adduser bind aegir</code></div></p>

<p>We're now ready to activate the feature in Aegir's frontend. Go to Hosting &gt;&gt; Features (<em>admin/hosting/features</em>) and select "DNS Support" under the "Experimental" fieldset, and save the configuration.</p>

<p>Finally, we need to activate DNS on the Aegir server. Visit the server node (<em>hosting/c/server_master</em>) and click the edit tab (which should bring you to <em>node/2/edit</em>). Then under "DNS Service", select "Bind" and then save.</p>

<p>This should trigger a verify of the server (and then probably the platforms on it too), after which Aegir will be managing your local BIND server, and it's zonefile(s). If you have installed Aegir in /var/aegir, put this line in the file <em>/etc/bind/named.conf.local</em>:
<div class="codeblock"><code>include &quot;/var/aegir/config/bind.conf&quot;;</code></div></p>

<p>Aegir is now a full-fledged DNS server that you can use to resolve addresses locally. This can be accomplished on Debian-like systems by editing <em>/etc/resolv.conf</em> to include "nameserver 127.0.0.1". If you're running Aegir in a VM, you can just point this to the address of the virtual machine.</p>

<h1>CentOS/RHEL</h1>

<p>You need to have a working DNS/bind/named server for AEgir to take control of. What follows is rough documentation to reach that stage. It is currently <em>UNTESTED</em> in a production environment.
<div class="codeblock"><code>yum -y install bind-chroot bind-utils bind-libs bind<br />chkconfig named on<br />ln -s /var/named/chroot/var/named/named.conf /etc/named.conf<br />cat &gt;&gt; /etc/named.conf &lt;&lt; EOF<br />controls {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inet 127.0.0.1 allow {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localnets;<br />} keys {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rndckey;<br />};<br />};<br />options {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; listen-on port 53 { any; };<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; listen-on-v6 port 53 { ::1; };<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; directory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;/var/named&quot;;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dump-file&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;/var/named/data/cache_dump.db&quot;;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; statistics-file &quot;/var/named/data/named_stats.txt&quot;;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; memstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Those options should be used carefully because they disable port<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // randomization<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // query-source&nbsp;&nbsp;&nbsp; port 53;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // query-source-v6 port 53;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; forwarders { 192.168.122.1; };<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; forward only;<br />//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allow-query&nbsp;&nbsp;&nbsp;&nbsp; { localhost; };<br />//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; allow-query-cache { localhost; };<br />};<br /><br />logging {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; channel default_debug {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file &quot;data/named.run&quot;;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; severity dynamic;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; };<br />};<br /><br />view localhost_resolver {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; match-clients&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { any; };<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; match-destinations { any; };<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; recursion yes;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; include &quot;/etc/named.rfc1912.zones&quot;;<br /><br />&nbsp;&nbsp;&nbsp; // Add local zone definitions here.<br /><br />&nbsp;&nbsp;&nbsp; include &quot;/var/aegir/config/bind.conf&quot;;<br />};<br /><br />include &quot;/etc/rndc.key&quot;;<br />EOF<br />service named start</code></div></p>

<h1>Additional Notes</h1>

<p>Additional documentation can be found in the Provision DNS module: <a href="http://drupalcode.org/project/provision.git/blob/HEAD:/dns/NOTES" title="http://drupalcode.org/project/provision.git/blob/HEAD:/dns/NOTES">http://drupalcode.org/project/provision.git/blob/HEAD:/dns/NOTES</a>.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-404.html?destination=node%2F38%23comment-form">Login</a> or <a href="../../../../../user/register/index-404.html?destination=node%2F38%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../38/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-285" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../dnswildcard/index.html">DNS Wildcard Configuration</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <h4>Why run a wildcard DNS server?</h4>

<p>A wildcard DNS setup lets you automatically have subdomains for a given domain. For example, say you own the domain widgets.com and you want to setup an unlimited number of subdomains like dev.widgets.com, test.widgets.com, customers.widgets.com, etc.... Typically you would have to set these all up individually. A wildcard DNS can let you bypass a lot of configuration.  In a development environment it can let you setup any number of test/development sites very quickly and easily.  Drupal developers in particular can leverage Drupal's multisite installation feature to setup lots of sites for development or production very quickly.</p>

<h4>Creating a DNS wildcard with hosted DNS</h4>

<p>Many of the popular domain registration companies allow you to manage your DNS records through a web interface. If you have access to such a facility, adding a DNS wildcard is easy: you just create an A record called '*', pointing to your server's IP address.</p>

<p>For convenience, here are instructions for some popular hosting providers: <a href="http://community.godaddy.com/groups/domains-management-and-services/forum/topic/dns-wildcards/">GoDaddy</a>, <a href="http://www.hosting.com/support/cpanel/dns/wildcard">hosting.com</a> (which uses the popular cPanel system) and <a href="http://www.123-support.co.uk/support/answers/how-do-i-change-my-dns-settings-279/">123-reg.co.uk</a>. It is likely that your host will have a similar system to one of these.</p>

<h4>How to configure DNS wildcards on your own server</h4>

<h4><a href="#debian">  Ubuntu/Debian  </a></h4>

<h4><a href="#osx"> OS X Snow Leopard </a></h4>

<h3 id="debian">Setting up a Wildcard DNS configuration on Ubuntu/Debian</h3>

<h4>Overview of Steps on Ubuntu/Debian</h4>

<p>I. Install Bind 9
II. Add a zone to /etc/bind/named.conf.local. Check the syntax  of named.conf.local with named-checkconf
III. Add a zone file &amp; Check the syntax  of  your zone files for errors with named-checkzone
IV.  Edit /etc/resolv.conf
V. Start up Bind 
VI.  Check setup with dig 
VII. Troubleshoot if needed</p>

<h4>I. Install Bind 9</h4>

<p><div class="codeblock"><code>$ sudo apt-get install bind9</code></div></p>

<h4>II. Edit /etc/bind/named.conf.local to add a zone.</h4>

<p> We need to add a zone to /etc/bind/named.conf.local. A zone is a record for a domain. In this case we'll use a fake domain for development purposes. Our domain can be called  anything. Let's call it mydev. (I was really tempted to call the domain bullshit - would have been great for screencasts). So at a shell prompt do:</p>

<p><div class="codeblock"><code>$ sudo nano /etc/bind/named.conf.local</code></div></p>

<p> Add this to the end of the file:</p>

<p><div class="codeblock"><code>zone &quot;mydev&quot; {<br /> type master;<br />&nbsp;&nbsp; file &quot;/etc/bind/db.mydev&quot;;<br />};</code></div></p>

<p> Save the file with Control - O  and enter.  Exit from nano with Control X.</p>

<p>Check the syntax of the file as follows: </p>

<p><div class="codeblock"><code>$ named-checkconf /etc/bind/named.conf.local </code></div></p>

<p> If the file is syntactically correct the shell prompt will return nothing. If there is an error - make sure you did not miss a quote or semicolon and recheck the file.</p>

<h4>III. Add a zone file  &amp;  Check the syntax  of  your zone files for errors with named-checkzone </h4>

<p><div class="codeblock"><code>$ sudo nano /etc/bind/db.mydev</code></div></p>

<p>Add this to the file replacing 10.0.2.15 with your IP address</p>

<p><div class="codeblock"><code>mydev. 86400 IN SOA mydev. hostmaster.mydev. (<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20091028 ; serial yyyy-mm-dd<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10800; refresh every 15 min<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600; retry every hour<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600000; expire after 1 month +<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 ); min ttl of 1 day<br />&nbsp; IN NS mydev. <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN MX 10 mydev.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN A 10.0.2.15<br />*.mydev. IN A 10.0.2.15</code></div></p>

<p> Save the file with Control - O  and enter.  Exit from nano with Control X. Check the syntax with the following:</p>

<p><div class="codeblock"><code>$ named-checkzone mydev /etc/bind/db.mydev </code></div></p>

<p> If the syntax of the file is correct you should see something like: </p>

<p><div class="codeblock"><code>zone mydev/IN: loaded serial 20091028<br />OK</code></div></p>

<p> If not review the file for errors. In particular whenever referring to a domain, it must end in a  .  , thus  mydev.  </p>

<h4>IV.  Edit /etc/resolv.conf</h4>

<p>resolv.conf tells applications like browsers where to look for DNS info. By default it may have your ISPs info. We need to tell it to check our local DNS server first then the ISP. </p>

<p><div class="codeblock"><code>$ sudo nano /etc/resolv.conf</code></div></p>

<p>Add/change the following</p>

<p><div class="codeblock"><code>domain mydev<br />search mydev<br />nameserver 127.0.0.1<br />nameserver (your isp nameserver or open dns)</code></div></p>

<p>If you are receiving an IP address via DHCP then you need to edit /etc/dhcp3/dhclient.conf too. </p>

<p><div class="codeblock"><code>$ sudo nano&nbsp; /etc/dhcp3/dhclient.conf</code></div></p>

<p>Look for the lines send host-name,  supersede domain-name,  and prepend domain-name-servers  and set them as follows (and make sure they are uncommented ) :</p>

<p><div class="codeblock"><code>send host-name &quot;mydev&quot;;<br />supersede domain-name &quot;mydev&quot;;<br />prepend domain-name-servers 127.0.0.1;</code></div>
<div class="codeblock"><code>sudo dhclient</code></div></p>

<p>Whew! Almost there.</p>

<h4>V. Start up Bind (or Restart) </h4>

<p><div class="codeblock"><code>$ sudo /etc/init.d/bind9 restart </code></div></p>

<h4> VI.  Check setup with ping and dig </h4>

<p><div class="codeblock"><code>$&nbsp; ping testing.mydev<br />PING testing.mydev (10.0.2.15) 56(84) bytes of data.<br />64 bytes from ubuntu.local (10.0.2.15): icmp_seq=1 ttl=64 time=0.041 ms<br />64 bytes from ubuntu.local (10.0.2.15): icmp_seq=2 ttl=64 time=0.039 ms<br />64 bytes from ubuntu.local (10.0.2.15): icmp_seq=3 ttl=64 time=0.0</code></div></p>

<p> If ping works then you should be good to go.  If not try dig and part V. To stop the ping action press [Ctrl]+[c].</p>

<h4>VII. Troubleshoot  </h4>

<p>I found the section on Troubleshooting Bind in O'Reilly's  "Linux System Administration" helpful. Fortunately, this part of the book is viewable on Google books as of this writing (10/29/2009): <a href="http://books.google.com/books?id=-jYe2k1p5tIC&amp;lpg=PP1&amp;dq=Linux%20System%20Administration&amp;pg=PA66#v=onepage&amp;q=&amp;f=false" title="http://books.google.com/books?id=-jYe2k1p5tIC&amp;lpg=PP1&amp;dq=Linux%20System%20Administration&amp;pg=PA66#v=onepage&amp;q=&amp;f=false">http://books.google.com/books?id=-jYe2k1p5tIC&amp;lpg=PP1&amp;dq=Linux%20System%...</a> .  See page 66 </p>

<h3 id="osx">Getting a Wildcard DNS running on OSX Snow Leopard</h3>

<p>Note: it took me several tries to get this working. If you are new to DNS be patient with yourself - you'll get it, but may take a few tries. </p>

<p>In this example I will concentrate on setting a development environment with OSX using wildcard DNS</p>

<h3>Overview of Steps</h3>

<p>I. Edit /etc/named.conf to add a zone.<br />
II. Add a zone file at /var/named/
III. Check the syntax  of named.conf and your zone files for errors
IV.  Edit /etc/resolv.conf
V. Set your computers network settings to use 127.0.0.1 as a name server
VI. Start up Bind 
VII.  Check setup with dig 
VIII. Reboot if needed</p>

<h4>Before we start a few more notes.  </h4>

<p>I tend to use the nano text editor to edit Unix configuration files you could use Emacs, VI, Textmate, BBEdit or the editor of your choice.  </p>

<p>Backup all these files we are editing so you can start over if you mess up. I didn't do this and it added more time to the project.
For example to backup /etc/named.conf  do:</p>

<p><div class="codeblock"><code>$ sudo cp /etc/named.conf /etc/named.conf.bck </code></div></p>

<p>Last, most of the files we need to edit are owned by root so you will need to use sudo to edit these files. If you get tired of typing sudo you can become root by doing this:</p>

<p><div class="codeblock"><code>$ sudo -s </code></div></p>

<p>Be careful when working as root or using sudo. You can mess up your system so make sure to backup. All example here are run as root.  </p>

<h4>I. Edit /etc/named.conf to add a zone</h4>

<p>We need to edit named.conf to add our zone.</p>

<p><div class="codeblock"><code>$ nano /etc/named.conf</code></div></p>

<p>I called my zone vmdev so I added this to named.conf </p>

<p><div class="codeblock"><code>zone &quot;vmdev&quot; IN {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type master;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file &quot;db.vmdev&quot;;<br />};</code></div></p>

<p>I added this right before the zone  0.0.127.inaddr.apra  and saved the file. So we told Bind to look in /var/named/db.vmdev for this zone.</p>

<h4>II. Add a zone file at /var/named/</h4>

<p><div class="codeblock"><code>$ nano /var/named/db.vmdev<br />vmdev. 7200&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SOA&nbsp;&nbsp;&nbsp;&nbsp; vmdev. root.vmdev. (<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2008031801 ;&nbsp;&nbsp;&nbsp; Serial<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Refresh every 15 minutes<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3600&nbsp;&nbsp;&nbsp; ; Retry every hour<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3000000 ; Expire after a month+<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 86400 ) ; Minimum ttl of 1 day<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vmdev.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10 vmdev.<br /><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.0.199<br />*.vmdev.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.0.199</code></div></p>

<p>You can just copy this but be sure to change 192.168.0.199 to you Mac's IP address </p>

<h4>III. Check the syntax  of named.conf and your zone files for errors</h4>

<p>Run this to check your named.conf file:</p>

<p><div class="codeblock"><code>$ named-checkconf /etc/named.conf&nbsp; </code></div></p>

<p>If it returns nothing, your named.conf file is at least syntactically correct. If there is an error, then well you have to diagnose and fix the error.</p>

<p>Now run this to check your zone file:</p>

<p><div class="codeblock"><code>$ named-checkzone vmdev /var/named/db.vmdev </code></div></p>

<p>It should return something like this:</p>

<p><div class="codeblock"><code>zone vmdev/IN: loaded serial 2008031801<br />OK</code></div></p>

<p>If there are errors then diagnose and fix them.</p>

<h4>IV.  Edit /etc/resolv.conf</h4>

<p><div class="codeblock"><code>$ nano /etc/resolv.conf<br />#<br /># Mac OS X Notice<br />#<br /># This file is not used by the host name and address resolution<br /># or the DNS query routing mechanisms used by most processes on<br /># this Mac OS X system.<br />#<br /># This file is automatically generated.<br />#<br />domain vmdev.<br />nameserver 127.0.0.1<br />nameserver 192.168.0.1</code></div></p>

<h4>V. Set your computers network settings to use 127.0.0.1 as a name server  </h4>

<p>Do this at System Preferences -&gt; Network.
You may want to use your ISPs Name server as the second name server
</p>

<h4>VI. Start up Bind </h4>

<p><div class="codeblock"><code>$ launchctl load -w /System/Library/LaunchDaemons/org.isc.named.plist</code></div></p>

<p>The -w option tells OSX to enable Bind at startup</p>

<h4>VII.  Check setup with dig  </h4>

<p><div class="codeblock"><code>$ dig faker.vmdev&nbsp; </code></div></p>

<p>Should return something like this:</p>

<p><div class="codeblock"><code>; &lt;&lt;&gt;&gt; DiG 9.6.0-APPLE-P2 &lt;&lt;&gt;&gt; faker.vmdev<br />;; global options: +cmd<br />;; Got answer:<br />;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 45640<br />;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 1<br /><br />;; QUESTION SECTION:<br />;faker.vmdev.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A<br /><br />;; ANSWER SECTION:<br />faker.vmdev.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7200&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.0.199<br /><br />;; AUTHORITY SECTION:<br />vmdev.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7200&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; vmdev.<br /><br />;; ADDITIONAL SECTION:<br />vmdev.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7200&nbsp;&nbsp;&nbsp; IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.0.199<br /><br />;; Query time: 0 msec<br />;; SERVER: 127.0.0.1#53(127.0.0.1)<br />;; WHEN: Wed Oct 14 19:28:56 2009<br />;; MSG SIZE&nbsp; rcvd: 75 </code></div></p>

<p>The key here is  status NOERROR; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 45640
If you get an error then check previous steps.</p>

<p>Now try:</p>

<p><div class="codeblock"><code>$ ping faker.vmdev</code></div></p>

<p>should return: </p>

<p><div class="codeblock"><code>PING test.vmdev (192.168.0.199): 56 data bytes<br />64 bytes from 192.168.0.199: icmp_seq=0 ttl=64 time=0.059 ms<br />64 bytes from 192.168.0.199: icmp_seq=1 ttl=64 time=0.087 ms</code></div></p>

<p>but if it does not got to VIII.</p>

<h4>VIII. Reboot if needed.</h4>

<p>I needed to reboot to get everything to take. Whoila! Have a cookie or something.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-58.html?destination=node%2F285%23comment-form">Login</a> or <a href="../../../../../user/register/index-58.html?destination=node%2F285%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-58.html?destination=node%2F285%23comment-form">Login</a> or <a href="../../../../../user/register/index-58.html?destination=node%2F285%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-39" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../39/index.html">Hooking into Aegir (site overrides)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Because Aegir is capable of installing, deploying and moving your sites around, it has to manage the various configuration files that keep your sites running.</p>

<p>These configurations include the standard Drupal settings.php for a site, .htaccess overrides for your HTTP server, as well as HTTP 'VirtualHost' or 'vhost' configuration files that tell your HTTP server where your site is.</p>

<p>A caveat of this system is that Aegir regularly re-generates these configuration files to apply new changes that have been made to the sites or platforms, as well as doing so as a safety mechanism to ensure these files are 'sane'.</p>

<p>For example, if you make a modification to a site vhost or settings.php and it breaks your site, running a 'Verify' task on the site should restore the file back to how it was.</p>

<p>However, sometimes it is necessary to add custom configuration or overrides to these files, and you can't do that if Aegir is regularly wiping your changes.</p>

<p>Fortunately, Aegir provides a series of hooks and inclusions for overriding or injecting customisations into these files safely and persistently.</p>

<p>This chapter shows you how each of these hooks or inclusions work.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-59.html?destination=node%2F39%23comment-form">Login</a> or <a href="../../../../../user/register/index-59.html?destination=node%2F39%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-59.html?destination=node%2F39%23comment-form">Login</a> or <a href="../../../../../user/register/index-59.html?destination=node%2F39%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-73" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../73/index.html">Injecting into server-wide vhosts</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Changing <em>maximum filesize upload</em> is common when setting up sites in Drupal. As described in <a href="../../../../990/index.html">Overriding site-specific PHP values</a> you can change this value for each site created with gir by adding a .drush.inc file in /var/aegir/.drush directory. But wouldnt it be nice to be able to do it side-wide?</p>

<p>Here below is the same code from ergonlogic demonstrating how to create a <em>domainname</em>.drush.inc file using the domain name as a condition before the code injection.</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp; </span><span style="color: #007700">function </span><span style="color: #0000BB">ergonlogiccom_provision_apache_vhost_config</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; if (</span><span style="color: #0000BB">$uri </span><span style="color: #007700">== </span><span style="color: #DD0000">"ergonlogic.com"</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">drush_log</span><span style="color: #007700">(</span><span style="color: #DD0000">"Overriding PHP file size values. See .drush/ergonlogiccom.drush.inc"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return array(</span><span style="color: #DD0000">"php_value upload_max_filesize 100M"</span><span style="color: #007700">, </span><span style="color: #DD0000">"php_value post_max_size 200M"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp; }<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>Apparently you can do this side-wide by omitting the IF statement and create a file with a .drush.inc extension.</p>

<p>For instance, you could create a file called <em>global_settings.drush.inc</em> and put in the following code:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp; </span><span style="color: #007700">function </span><span style="color: #0000BB">globalsettings_provision_apache_vhost_config</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">drush_log</span><span style="color: #007700">(</span><span style="color: #DD0000">"Overriding PHP file size values. See .drush/global_settings.drush.inc"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return array(</span><span style="color: #DD0000">"php_value upload_max_filesize 100M"</span><span style="color: #007700">, </span><span style="color: #DD0000">"php_value post_max_size 200M"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp; <br />&nbsp; }<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
<em>* the closing ?&gt; syntax should not be used</em></p>

<p>Make sure you <strong>Verify</strong> your site after you create the file. Then scroll through the log and find the message you added in the code:</p>

<blockquote>Overriding PHP file size values. See .drush/global_settings.drush.inc</blockquote>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-60.html?destination=node%2F73%23comment-form">Login</a> or <a href="../../../../../user/register/index-60.html?destination=node%2F73%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-60.html?destination=node%2F73%23comment-form">Login</a> or <a href="../../../../../user/register/index-60.html?destination=node%2F73%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-72" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../72/index.html">Injecting into platform-wide vhosts (.htaccess)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Using a .htaccess with an Allow Override all directive in Apache can be a major performance killer, because it requires Apache to stat each subdirectory of the codebase looking for overrides in .htaccess.</p>

<p>As a result, Aegir disables the reading of the Drupal .htaccess in the runtime environment.</p>

<p>This does not mean that the .htaccess is not needed. Instead, when you run the Verify task against a Platform, the .htaccess is studied by Aegir and its contents are copied into the platform-wide Apache vhost configuration, typically located in /var/aegir/config/server_master/apache/platform.d</p>

<p>Need to make a modification to the .htaccess? Simple: you can simply edit it in-place as you normally would, but you must re-Verify the platform in Aegir afterward, in order for those new or modified settings to be 'loaded in' to the platform vhost file.</p>

<p>The end result is improved performance for your sites, without losing any functionality, as you can still customise the .htaccess to your liking.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-61.html?destination=node%2F72%23comment-form">Login</a> or <a href="../../../../../user/register/index-61.html?destination=node%2F72%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-61.html?destination=node%2F72%23comment-form">Login</a> or <a href="../../../../../user/register/index-61.html?destination=node%2F72%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-70" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../70/index.html">Injecting into site vhosts</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Aegir provides some hook functions in its API, one of which allows you to inject extra configuration snippets into your Apache vhost files for sites.</p>

<h2>When would I want to do this?</h2>

<p>A good example for this is when you may need to inject a custom Rewrite rule that goes beyond what the Aegir Aliases 'redirection' feature provides.</p>

<p>Or, perhaps you have to inject some htpasswd mod_auth password protection for your site, or perhaps a CustomLog definition. The <a href="https://drupal.org/project/hosting_tasks_extra">http_basic_auth</a> module uses this. (<a href="http://drupalcode.org/project/hosting_tasks_extra.git/tree/HEAD:/http_basic_auth">code</a>)</p>

<p>Typically you'd just add what you need to the vhost file, but the problem is that Aegir manages these vhosts, and on every Verify task, will rewrite the config from a template, blowing away your changes in the process. Ouch!</p>

<p>Fortunately there is a very easy and elegant solution to this problem to save your configurations persistently across Verify tasks and the like, by means of invoking the Provision hook <code>provision_apache_vhost_config()</code>, or, if you are using Nginx, <code>provision_nginx_vhost_config()</code> (and just replace the below examples with 'nginx' instead of 'apache' where necessary). Below "mig5" is just an example, you can replace this with anything as drush looks for all *.drush.inc files in <code>~aegir/.drush</code></p>

<h2>A simple example</h2>

<p>In this example I'll inject a simple 'ErrorLog' apache definition into a vhost to save the site error logs to a file.</p>

<ol>
<li>Create a file in <code>~aegir/.drush</code> called <code>mig5.drush.inc</code>. (Choose <code>&lt;any&gt;</code> prefix for the file name <code>&lt;any&gt;.drush.inc</code>).  </li>
<li>Add this snippet of PHP to the file:
<div class="codeblock"><code> <br /> <span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp; </span><span style="color: #007700">function </span><span style="color: #0000BB">mig5_provision_apache_vhost_config</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; return </span><span style="color: #DD0000">"ErrorLog /var/aegir/" </span><span style="color: #007700">. </span><span style="color: #0000BB">$uri </span><span style="color: #007700">. </span><span style="color: #DD0000">".error.log"</span><span style="color: #007700">;<br />&nbsp; }<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
(Choose <code>&lt;any&gt;</code> prefix for the function name <code>&lt;any&gt;_provision_apache_vhost_config</code>).</li>
<li><code>drush cache-clear drush</code> </li>
<li>Install a site or verify an existing one</li>
</ol>

<p>Check your site's vhost config file (in <code>/var/aegir/config/server_master/apache/vhost.d/</code>) and you'll see the line has been injected into the '#Extra configuration' area of the vhost</p>

<p><div class="codeblock"><code>&lt;VirtualHost *:80&gt;<br /><br />&nbsp; DocumentRoot /var/aegir/hostmaster-HEAD <br />&nbsp;&nbsp;&nbsp; <br />&nbsp; ServerName 1.mig5-forge.net<br />&nbsp; SetEnv db_type&nbsp; mysqli<br />&nbsp; SetEnv db_name&nbsp; 1mig5forgenet<br />&nbsp; SetEnv db_user&nbsp; 1mig5forgenet<br />&nbsp; SetEnv db_passwd&nbsp; X7KzsFhxhp<br />&nbsp; SetEnv db_host&nbsp; tardis<br />&nbsp; SetEnv db_port&nbsp; 3306<br /><br /><br /><br /># Extra configuration from modules:<br />&nbsp; ErrorLog /var/aegir/1.mig5-forge.net.error.log<br />&nbsp;&nbsp;&nbsp; # Error handler for Drupal &gt; 4.6.7<br />&nbsp;&nbsp;&nbsp; &lt;Directory &quot;/var/aegir/hostmaster-HEAD/sites/1.mig5-forge.net/files&quot;&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SetHandler This_is_a_Drupal_security_line_do_not_remove<br />&nbsp;&nbsp;&nbsp; &lt;/Directory&gt;<br /><br />&lt;/VirtualHost&gt;</code></div></p>

<p>It's that simple! You can see that via the hook, we pass $uri and the drush data to the function, allowing me to abstract the site url so that each site will get its own error log. You could do extra PHP conditionals to ensure certain data only gets inserted into certain sites of a specific name.</p>

<p>To inject multiple lines instead of one, use an array, i.e</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">mig5_provision_apache_vhost_config</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; return array(</span><span style="color: #DD0000">"ErrorLog /var/aegir/" </span><span style="color: #007700">. </span><span style="color: #0000BB">$uri </span><span style="color: #007700">. </span><span style="color: #DD0000">".error.log"</span><span style="color: #007700">, </span><span style="color: #DD0000">"LogLevel warn"</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>The key point of this is that the file <code>~aegir/.drush/mig5.drush.inc</code> file will never be touched by Aegir, so you can rest assured your changes will be respected.</p>

<p>If you want to only inject code into a specific site, wrap your code with an if statement, i.e
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">mig5_provision_apache_vhost_config</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; if (</span><span style="color: #0000BB">$uri </span><span style="color: #007700">=== </span><span style="color: #DD0000">"&lt;site-name-in-aegir&gt;"</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return array(</span><span style="color: #DD0000">"ErrorLog /var/aegir/" </span><span style="color: #007700">. </span><span style="color: #0000BB">$uri </span><span style="color: #007700">. </span><span style="color: #DD0000">".error.log"</span><span style="color: #007700">, </span><span style="color: #DD0000">"LogLevel warn"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp; }<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<h2>A more advanced example</h2>

<p>Managing multiple versions of a production site can be a tricky proposition, even in Aegir.  This is particularly true when you want to use the same canonical domain name to allow users to access one such site of your choosing at any given moment.  For instance, in Aegir I might have a site named <a href="http://www.example.com/" title="www.example.com">www.example.com</a> (with an alias of example.com,) and a couple of alternates with the site names of test1.example.com and test2.example.com.  If I suddenly decide that I want my primary domain to access test1.example.com, Aegir forces me into a tedious process that ultimately results in site downtime  I have to delete or migrate the existing <a href="http://www.example.com/" title="www.example.com">www.example.com</a> site to a new unused site name (or clone it to an unused site name, and delete the original) and then I have to migrate test1.example.com to the vacated site name <a href="http://www.example.com/" title="www.example.com">www.example.com</a>.  Alternatively, I could add the <a href="http://www.example.com/" title="www.example.com">www.example.com</a> and example.com aliases to test1.example.com but then my users would just be redirected to test1.example.com.</p>

<p>Given the way Aegir manages aliases, it would actually be easier to make this switch if the desired address was never used as a site name to begin with.  Instead of having the site name <a href="http://www.example.com/" title="www.example.com">www.example.com</a> alongside of the two other test sites, we might have live.example.com, with in-use aliases of <a href="http://www.example.com/" title="www.example.com">www.example.com</a> and example.com, and a rewrite instruction in the vhost that rewrites live.example.com to <a href="http://www.example.com/" title="www.example.com">www.example.com</a>.  If we could easily change the rewrite instructions in that vhost, all we would need to do is move the aliases from one site to the next in the GUI (with the requisite verify tasks executed on each site in question) in order to quickly change which site was being loaded at any given moment by <a href="http://www.example.com/" title="www.example.com">www.example.com</a>.  For example, if I wanted to move to test2.example.com, I would remove the <a href="http://www.example.com/" title="www.example.com">www.example.com</a> and example.com aliases from live.example.com and verify, add those aliases to test2.example.com and verify, and change my vhost so that test2 .example.com is rewritten as <a href="http://www.example.com/" title="www.example.com">www.example.com</a>.  Since as previously mentioned Aegir overwrites changes to the vhost during the verify process, the solution is to use the provision_apache_vhost_config hook in a drush.inc file to selectively add the rewrite information to the vhost when verifying the site that we want our canonical domain to refer to.</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">aliasredirects_provision_apache_vhost_config</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #FF8000">// the uri to check here is the name of the site in Aegir<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #007700">if (</span><span style="color: #0000BB">$uri </span><span style="color: #007700">=== </span><span style="color: #DD0000">"test2.example.com"</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$rval</span><span style="color: #007700">[] = </span><span style="color: #DD0000">""</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$rval</span><span style="color: #007700">[] = </span><span style="color: #DD0000">"# Forces redirect to one uri"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$rval</span><span style="color: #007700">[] = </span><span style="color: #DD0000">"RewriteEngine On"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #FF8000">// if the host is not example.com <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$rval</span><span style="color: #007700">[] = </span><span style="color: #DD0000">"RewriteCond %{HTTP_HOST} !^example.com$ [NC]"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #FF8000">// rewrite to example.com with a 301 redirect<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$rval</span><span style="color: #007700">[] = </span><span style="color: #DD0000">"RewriteRule ^(.*)$ http://example.com$1 [R=301,L]"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$rval</span><span style="color: #007700">[] = </span><span style="color: #DD0000">""</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return </span><span style="color: #0000BB">$rval</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp; }<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
When we want to switch again, say to test1.example.com, We could update the code to look for the test1.example.com uri.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-310.html?destination=node%2F70%23comment-form">Login</a> or <a href="../../../../../user/register/index-310.html?destination=node%2F70%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../70/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-990" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/overriding-site-specific-php-values/index.html">Overriding site-specific PHP values</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Sometimes it is useful to override certain PHP values on a per-site basis, but changes to <code>php.ini</code> are generally server-wide. Depending on the value you want to override, a couple of options present themselves.</p>

<p>First, let's consider where PHP values can be changed. <a href="http://www.php.net/manual/en/ini.list.php" title="http://www.php.net/manual/en/ini.list.php">http://www.php.net/manual/en/ini.list.php</a> lists <code>php.ini</code> directives, and under the "Changeable" column, indicates <a href="http://www.php.net/manual/en/configuration.changes.modes.php">where a configuration setting may be set</a>. If your value shows either <code>PHP_INI_USER</code> or <code>PHP_INI_ALL</code>, then the easiest way to change this value would be using <code>ini_set()</code> in a <code>local.settings.php</code>:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /> </span><span style="color: #007700">@</span><span style="color: #0000BB">ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'memory_limit'</span><span style="color: #007700">, </span><span style="color: #DD0000">'128M'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>On the other hand, if the changes mode is either <code>PHP_INI_PERDIR</code> or <code>PHP_INI_SYSTEM</code>, <code>php_ini()</code> won't work. In this case, the solution is to inject the value into the vhost. Since vhosts are managed by Aegir, manually adding an override to <code>/var/aegir/config/server_master/apache/vhost.d/&lt;uri&gt;</code> would get blown away the next time that the site is verified.</p>

<p>As described in <a href="../../../../70/index.html">Injecting into site vhosts</a>, we can inject values into vhosts using a Drush hook. For example, to raise the file upload size limit on <a href="http://ergonlogic.com/" title="http://ergonlogic.com">http://ergonlogic.com</a>, I added the following code in <code>/var/aegir/.drush/ergonlogiccom.drush.inc</code>:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp; </span><span style="color: #007700">function </span><span style="color: #0000BB">ergonlogiccom_provision_apache_vhost_config</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; if (</span><span style="color: #0000BB">$uri </span><span style="color: #007700">== </span><span style="color: #DD0000">"ergonlogic.com"</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">drush_log</span><span style="color: #007700">(</span><span style="color: #DD0000">"Overriding PHP file size values. See .drush/ergonlogiccom.drush.inc"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return array(</span><span style="color: #DD0000">"php_value upload_max_filesize 100M"</span><span style="color: #007700">, </span><span style="color: #DD0000">"php_value post_max_size 200M"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp; }<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>This results in the insertion of the following lines into <code>/var/aegir/config/server_master/apache/vhost.d/ergonlogic.com</code>:
<div class="codeblock"><code>php_value upload_max_filesize 100M<br />php_value post_max_size 200M</code></div></p>

<p>Also, in the verify task log I get the following informative message:
<div class="codeblock"><code>Overriding PHP file size values. See .drush/ergonlogiccom.drush.inc</code></div></p>

<p>One challenge this technique may present is inspecting the values of the parameters passed into this function. It appears that the Hostmaster site doesn't get bootstrapped, and so common debugging tools (such as devel.module's <a href="http://api.drupal.org/api/devel/devel.module/function/dd/6">dd()</a>) aren't available. However <a href="http://api.drush.ws/api/function/drush_log/4.x">drush_log()</a> is, and when called, will push arbitrary messages back into your Aegir site's verify task log.</p>

<p>So sticking the following into the function above can help:
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp; drush_log</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$uri</span><span style="color: #DD0000">: " </span><span style="color: #007700">. </span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-62.html?destination=node%2F990%23comment-form">Login</a> or <a href="../../../../../user/register/index-62.html?destination=node%2F990%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-62.html?destination=node%2F990%23comment-form">Login</a> or <a href="../../../../../user/register/index-62.html?destination=node%2F990%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-71" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../71/index.html">Injecting into settings.php</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><h3>Introduction</h3>

<p>Every web site in an Aegir environment has a Drupal configuration file <code>settings.php</code> in /sites/example.com directory.  Web administrators often need to make changes to this file; however, the Aegir system also manages this file and any manual customizations will be lost when a site is verified.</p>

<p>Fortunately, there are two mechanisms to ensure that your customizations can be preserved.  If you look in the bottom of an Aegir <code>settings.php</code> file you will see references to two files <code>local.settings.php</code> and <code>global.inc</code>.</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp; </span><span style="color: #FF8000"># Additional host wide configuration settings. Useful for safely specifying configuration settings.<br />&nbsp; </span><span style="color: #007700">if (</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'/var/aegir/config/includes/global.inc'</span><span style="color: #007700">)) {<br />&nbsp;&nbsp;&nbsp; include_once(</span><span style="color: #DD0000">'/var/aegir/config/includes/global.inc'</span><span style="color: #007700">);<br />&nbsp; }<br /><br />&nbsp; </span><span style="color: #FF8000"># Additional site configuration settings. Allows to override global settings.<br />&nbsp; </span><span style="color: #007700">if (</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'/var/aegir/example-platform/sites/example.com/local.settings.php'</span><span style="color: #007700">)) {<br />&nbsp;&nbsp;&nbsp; include_once(</span><span style="color: #DD0000">'/var/aegir/example-platform/sites/example.com/local.settings.php'</span><span style="color: #007700">);<br />&nbsp; }<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>If these files exist they are loaded at run time by Drupal.  As you can probably surmise from the paths to these files, <code>local.settings.php</code> is for site-specific customizations and <code>global.inc</code> is for Aegir-wide customization.</p>

<p>Let's look at these files in more detail.  We'll use customization of user session cookies as an example.  If you look at the <code>settings.php</code> file generated by Aegir you see that it sets more conservative php settings for cookies (<code>@ini_set(&#039;session.cookie_lifetime&#039;,&nbsp; 0);</code> i.e. cookies expire immediately) than are in the <code>default.settings.php</code> packaged with Drupal (<code>@ini_set(&#039;session.cookie_lifetime&#039;,&nbsp; 2000000);</code> i.e. 2 million seconds, which is just over 23 days).</p>

<h3>Site-specific Customization</h3>

<p>The <code>local.settings.php</code> file by default does not exist in a new Aegir site installation so you have to create it.  Continuing with our example of user session cookies, let's override the Aegir default.</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /> </span><span style="color: #FF8000"># site-specific Drupal customization<br /><br /># override Aegir-generated cookie policy for sites - set cookies to expire after a week (604,800 seconds)<br /></span><span style="color: #007700">@</span><span style="color: #0000BB">ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'session.cookie_lifetime'</span><span style="color: #007700">, </span><span style="color: #0000BB">604800</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>Note that because <code>local.settings.php</code> is included after the variables are set in the main <code>settings.php</code> it's customizations takes precedence.</p>

<p>Now, whenever you clone a site or migrate it between platforms, Aegir moves a copy of <code>local.settings.php</code> as well.</p>

<h4>Using drush_hook_provision_drupal_config</h4>

<p>You can also use the API to add module-specific site configurations with hook_provision_drupal_config
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /> </span><span style="color: #007700">* </span><span style="color: #0000BB">Append PHP code to Drupal</span><span style="color: #DD0000">'s settings.php file.<br /> * <br /> * To use templating, return an include statement for the template.<br /> *<br /> * @param $uri<br /> *&nbsp;&nbsp; URI for the site.<br /> * @param $data<br /> *&nbsp;&nbsp; Associative array of data from provisionConfig_drupal_settings::data.<br /> *<br /> * @return<br /> *&nbsp;&nbsp; Lines to add to the site'</span><span style="color: #0000BB">s settings</span><span style="color: #007700">.</span><span style="color: #0000BB">php file</span><span style="color: #007700">.<br /> *<br /> * @</span><span style="color: #0000BB">see provisionConfig_drupal_settings<br /> </span><span style="color: #007700">*/<br />function </span><span style="color: #0000BB">drush_hook_provision_drupal_config</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">, </span><span style="color: #0000BB">$config</span><span style="color: #007700">) {<br />&nbsp; return </span><span style="color: #DD0000">'$conf[\'reverse_proxy\'] = TRUE;'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>For example it could look like this
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">drupalwiki_provision_drupal_config</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">, </span><span style="color: #0000BB">$config</span><span style="color: #007700">) {<br />&nbsp; </span><span style="color: #0000BB">$extra </span><span style="color: #007700">= </span><span style="color: #0000BB">drush_get_option</span><span style="color: #007700">(</span><span style="color: #DD0000">'site_extra_settings'</span><span style="color: #007700">, </span><span style="color: #DD0000">''</span><span style="color: #007700">);<br />&nbsp; </span><span style="color: #FF8000">// remove window CR<br />&nbsp; </span><span style="color: #0000BB">$extra </span><span style="color: #007700">= </span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"\r"</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$extra</span><span style="color: #007700">);<br />&nbsp; return </span><span style="color: #0000BB">$extra</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>That is used to add the site settings added by the UI in the hosting backend implemented in <a href="https://github.com/EugenMayer/hosting_site_settings" title="https://github.com/EugenMayer/hosting_site_settings">https://github.com/EugenMayer/hosting_site_settings</a></p>

<h3>Aegir-wide Customization</h3>

<p>In some situations you may want to implement the same configuration settings on all your Aegir sites.  This is where <code>global.inc</code> comes in.  Note that <code>global.inc</code> is now included in <code>settings.php</code> <strong>before</strong> <code>local.settings.php</code>, so that Aegir system administrators no longer retain the ability to override configuration changes in <code>local.settings.php</code>, but instead it is possible to override global settings per site (read why this has been changed: <a href="http://drupal.org/node/1044938" title="http://drupal.org/node/1044938">http://drupal.org/node/1044938</a> - note: this change is available since 0.4-rc1 release).</p>

<p>For example, say the system administrator wanted to limit users' session lifetimes to a maximum of one day they could create a <code>global.inc</code> as follows:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /> </span><span style="color: #FF8000"># Aegir-wide Drupal customization<br /><br /># override Aegir-generated cookie policy for all sites - set cookies to expire after a day (86,400 seconds)<br /></span><span style="color: #007700">@</span><span style="color: #0000BB">ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'session.cookie_lifetime'</span><span style="color: #007700">, </span><span style="color: #0000BB">86400</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>You can even set more granular policy within <code>global.inc</code> (however it makes more sense to keep site-specific overrides in the local.settings.php):</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /> </span><span style="color: #FF8000"># Aegir-wide Drupal customization<br /><br /># override Aegir-generated cookie policy for all sites - set cookies to expire after a day (86,400 seconds)<br /></span><span style="color: #007700">@</span><span style="color: #0000BB">ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'session.cookie_lifetime'</span><span style="color: #007700">, </span><span style="color: #0000BB">86400</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000"># Make the aegir front-end server more secure by expiring cookies immediately<br /></span><span style="color: #007700">if (</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/hostmaster/"</span><span style="color: #007700">, </span><span style="color: #0000BB">$conf</span><span style="color: #007700">[</span><span style="color: #DD0000">'install_profile'</span><span style="color: #007700">])) {<br />&nbsp; </span><span style="color: #FF8000"># set cookies to expire immediately on hostmaster<br />&nbsp; </span><span style="color: #007700">@</span><span style="color: #0000BB">ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'session.cookie_lifetime'</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>If you are using Aegir to manage multiple remote webservers, you will need to run the Verify task on the webserver in order to push global.inc to the remote machine.</p>

<p>Note: on some Aegir installations (e.g. alpha14) the permissions on <code>/var/aegir/config</code> are insufficent for Apache to properly include the <code>global.inc</code> file.  If you find that the configuration settings in <code>global.inc</code> are being ignored, change the permissions with <code>chmod a+x /var/aegir/config</code>.  This only has to be applied to the config directory as the sub directory and file permissions should be correct.</p>

<p>If you have other configuration examples, create a wiki and reference it here.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-63.html?destination=node%2F71%23comment-form">Login</a> or <a href="../../../../../user/register/index-63.html?destination=node%2F71%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-63.html?destination=node%2F71%23comment-form">Login</a> or <a href="../../../../../user/register/index-63.html?destination=node%2F71%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-3007" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/injecting-drushrcphp/index.html">Injecting into drushrc.php</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The <code>drushrc.php</code> file can be changed in two ways:</p>

<ol>
<li>by changing the templates used for the Drushrc context (see the <a href="http://api.aegirproject.org/api/aegir/provision3%21provision.api.php/function/hook_provision_config_load_templates/7.x-3.x">hook_provision_config_load_templates()</a> hook)</li>
<li>by creating a <code>local.drushrc.php</code> file in the site-specific folder (e.g. <code>sites/example.com/local.drushrc.php</code></li>
</ol>

<p>This is a stub. You can put more stuff here and it would be prettier.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-64.html?destination=node%2F3007%23comment-form">Login</a> or <a href="../../../../../user/register/index-64.html?destination=node%2F3007%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-64.html?destination=node%2F3007%23comment-form">Login</a> or <a href="../../../../../user/register/index-64.html?destination=node%2F3007%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-515" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../contrib-modules/index.html">Contributed Modules</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc12">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Aegir_7.x-3.x"><span class="toc-number">1. </span>Aegir 7.x-3.x</a></li>
	<li class="toc-level-1"><a href="#Extensions_to_Hostmaster_frontend"><span class="toc-number">2. </span>Extensions to Hostmaster (frontend)</a>
<ol>
	<li class="toc-level-2"><a href="#Verified_in_Aegir_2.x"><span class="toc-number">2.1. </span>Verified in Aegir 2.x</a></li>
	<li class="toc-level-2"><a href="#Aegir_1.x"><span class="toc-number">2.2. </span>Aegir 1.x</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Extensions_to_Provision_backend"><span class="toc-number">3. </span>Extensions to Provision (backend)</a></li>
	<li class="toc-level-1"><a href="#Themes"><span class="toc-number">4. </span>Themes</a></li>
	<li class="toc-level-1"><a href="#Puppet_modules_and_Chef_cookbooks"><span class="toc-number">5. </span>Puppet modules and Chef cookbooks</a></li>
	<li class="toc-level-1"><a href="#Others"><span class="toc-number">6. </span>Others</a></li>
	<li class="toc-level-1"><a href="#Your_module_here"><span class="toc-number">7. </span>Your module here?</a></li>
</ol>
</div>
</div>

<h2 id="Aegir_7.x-3.x">1. Aegir 7.x-3.x</h2>

<p><a href="../../../../../content/contrib-modules/contribs-aegir-7x-3x/index.html">Contrib modules for the upcomming version are listed on a sub page</a></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Extensions_to_Hostmaster_frontend">2. Extensions to Hostmaster (frontend)</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Verified_in_Aegir_2.x">2.1. Verified in Aegir 2.x</h3>

<dl>
<dt><a href="https://drupal.org/project/hosting_tasks_extra">Aegir HTTP basic authentication</a> (now included in hosting_tasks_extra)</dt>
<dd>This module allows you to protect sites with passwords.</dd>

<dt><a href="http://drupal.org/project/hosting_server_titles">Hosting server titles</a></dt>
<dd>This is a really simple module that allows you to change the names of servers that are displayed in lists in the Hosting frontend when choosing what server to use for something.</dd>

<dt><a href="http://drupal.org/project/hosting_site_backup_manager">Hosting site Backup Manager</a></dt>
<dd>Add a backups tab to a site node. It extends the default backup functionality with the ability to download a backup over HTTP.</dd>

<dd>Now also includes the functionality from <a href="http://drupal.org/project/hosting_backup_gc">Hosting backup garbage collection</a> and <a href="http://drupal.org/project/hosting_backup_queue">Hosting backup queue</a></dd>

<dt><a href="http://drupal.org/project/hosting_site_git">Hosting site Git</a></dt>
<dd>This is a simple module for the Aegir project that adds a 'Git pull', 'Git checkout' and 'Git clone' task for sites.</dd>

<dt><a href="http://drupal.org/project/hosting_platform_git">Hosting platform Git</a></dt>
<dd>Provides integration with Aegir that allows provisioning a platform from a git repository (also allows specifying the branch or tag name)</dd>

<dt><a href="http://drupal.org/project/hosting_tasks_extra">Hosting tasks extra</a></dt>
<dd>This module extends Aegir hostmaster (and drush/provision) with some additional tasks. Such as: cache-clear and registry-rebuild.</dd>

<dd>Now also includes the functionality from <a href="https://github.com/computerminds/aegir_http_basic">Aegir HTTP basic authentication</a></dd>

<dt><a href="http://drupal.org/project/hosting_dblogin">Hosting database login</a></dt>
<dd>Provides a link to login into a PHPMyAdmin instance (or other db management web software) configured for the current site database server. Requires dblogin to be installed on the site.</dd>

<dt><a href="http://drupal.org/project/hosting_piwik">Aegir Piwik integration</a></dt>
<dd>Makes it easy to connect an Aegir instance and a Piwik instance.  When you create a site in Aegir, the site is registered in Piwik.  When you verify the site in Aegir, new site aliases (if any) get added to Piwik.  Also adds system variables to settings.php in order to integrate properly with the <a href="http://www.drupal.org/project/piwik">Piwik</a> module.</dd>
</dl>

<p><strong>Note: There's a good chance that other Aegir 1.x contrib modules also work on 2.x</strong></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Aegir_1.x">2.2. Aegir 1.x</h3>

<dl>
<dt><a href="http://drupal.org/project/uc_hosting">Aegir Ubercart Integration</a></dt>
<dd>This module allows you to sell an gir client, with quotas and access to specific platforms, through Ubercart . It automates a number of set-up tasks from the moment the order ...</dd>

<dt><a href="https://github.com/computerminds/aegir_http_basic">Aegir HTTP basic authentication</a></dt>
<dd>This module allows you to protect sites with passwords.</dd>

<dt><a href="https://github.com/poetaster/aegir_http_basic_ldap">Aegir HTTP basic LDAP authentication</a></dt>
<dd>A fork of the above to allow you to specify an LDAP server and Require (ldap filter) string for authentication of 'sites'.</dd>

<dt><a href="http://drupal.org/project/aegir_feeds">Aegir feeds</a></dt>
<dd>This is a very basic module that provides feeds integration with Aegir . Features Provides mapping targets for Aegir site nodes, allowing you to create new sites from a feed or file upload.</dd>

<dt><a href="http://drupal.org/project/hosting_piwik">Aegir Piwik integration</a></dt>
<dd>Makes it easy to connect an Aegir instance and a Piwik instance.  When you create a site in Aegir, the site is registered in Piwik.  When you verify the site in Aegir, new site aliases (if any) get added to Piwik.  Also adds system variables to settings.php in order to integrate properly with the <a href="http://www.drupal.org/project/piwik">Piwik</a> module.</dd>

<dt><a href="http://drupal.org/project/aegir_rules">Aegir Rules</a></dt>
<dd>Aegir Rules provides Rules integration for the Aegir.</dd>

<dt><a href="https://github.com/computerminds/aegir_make_working_copy">Aegir Drush Make Platform working-copy</a></dt>
<dd>This feature allows you to specify 'working-copy' when adding a platform using a Drush makefile. Working-copy means your .git subdirectories are preserved in the platform, which may be useful for development purposes.</dd>

<dt><a href="http://mig5.net/content/aegir-subfolder-support">Aegir Subfolders</a></dt>
<dd>Support for 'example.com/subsite1' style sites in Aegir (experimental as of July 2012)</dd>

<dt><a href="http://drupal.org/project/hosting_platform_pathauto">Hosting Platform Pathauto</a></dt>
<dd>This is an add-on module for the Aegir hosting system: <a href="http://aegirproject.org/" title="http://aegirproject.org/">http://aegirproject.org/</a> This module simply makes a little time-saving tweak when creating a new platform: ...</dd>

<dt><a href="http://drupal.org/project/hosting_queue_runner">Hosting queue runner</a></dt>
<dd>This module allows the Hosting tasks queue for the Aegir project to be 'daemonized' so that tasks are run as soon as possible instead of waiting for a cron run. This makes Aegir appear much more responsive. This module was inspired by the Waiting queue project. Requirements You will need ...</dd>

<dt><a href="http://drupal.org/project/hosting_reinstall">Hosting Reinstall</a></dt>
<dd>The Hosting Reinstall module provides a frontend for the <a href="http://drupal.org/project/provision_reinstall">Provision Reinstall</a> module so that you can reinstall any sites via Hostmaster (Aegir).</dd>

<dt><a href="http://drupal.org/project/hosting_backup_gc">Hosting backup garbage collection</a></dt>
<dd>This is an add-on module for the Aegir hosting system: <a href="http://aegirproject.org/" title="http://aegirproject.org">http://aegirproject.org</a> Introduction This module allows you to specify how long Aegir should retain backups for. You can specify, ...</dd>

<dt><a href="http://drupal.org/project/hosting_backup_queue">Hosting backup queue</a></dt>
<dd>This is a simple module for the Aegir project that allows scheduling of backups. E.g. backup sites every hour, day or month. The module allows for the general settings to be applied to all sites, ...</dd>

<dt><a href="http://drupal.org/project/hosting_site_backup_manager">Hosting site Backup Manager</a></dt>
<dd>Add a backups tab to a site node. It extends the default backup functionality with the ability to download a backup over HTTP.</dd>

<dt><a href="http://drupal.org/project/hosting_site_git">Hosting site Git</a></dt>
<dd>This is a simple module for the Aegir project that adds a 'Git pull', 'Git checkout' and 'Git clone' task for sites.</dd>

<dt><a href="http://drupal.org/project/hosting_upload">Hosting upload</a></dt>
<dd>This module allows administrators to add platforms to aegir and extend platforms and sites with modules, themes, libraries without the need of ssh access.</dd>

<dt><a href="http://drupal.org/project/hosting_profile_roles">Hosting Profile Roles</a></dt>
<dd>Hosting Profile Roles extends Aegir to enable more control over what role(s) a client is assigned during site install. Since, by default, Aegir client's are given UID1 during site installs, this module also allows UID1 to be assigned to another user.</dd>

<dt><a href="http://drupal.org/project/hosting_server_titles">Hosting server titles</a></dt>
<dd>This is a really simple module that allows you to change the names of servers that are displayed in lists in the Hosting frontend when choosing what server to use for something.</dd>

<dt><a href="../../../../311/index.html">Services API Support</a></dt>
<dd>Integrates the Services API framework into the Hostmaster suite of tools. It allows Aegir managers the ability to build Services API connections over any of the available servers for Services API.</dd>

<dt><a href="http://drupal.org/project/hosting_advanced_cron">Hosting Advanced Cron</a></dt>
<dd>This module allows an administrator to set the default cron interval globally and to override that interval for individual sites.</dd>

<dt><a href="http://drupal.org/project/hosting_features">Hosting Features</a></dt>
<dd>This module provides a Task to Hostmaster that provides integration with a site's Features. (In beta as of June 1,2012)</dd>

<dt><a href="http://drupal.org/project/hosting_notifications">Hosting Notifications</a></dt>
<dd>This is a module that integrates with the Notifications framework. This allows you to receive notifications about task execution in various formats.</dd>

<dt><a href="http://drupal.org/project/hosting_task_gc">Hosting Task Garbage Collection</a> (merged into Aegir 7.x-3.x)</dt>
<dd>This module will delete rows in the {hosting_task} and {hosting_task_log} tables. (In alpha as of June 1,2012)</dd>

<dt><a href="http://drupal.org/project/hosting_remote_import">Hosting Remote Import</a></dt>
<dd>This Drupal module provides a UI for fetching sites from remote Aegir servers. (In development as of June 1, 2012)</dd>

<dt><a href="http://drupal.org/project/hosting_varnish">Hosting Varnish</a></dt>
<dd>Allows the Varnish cache for Aegir-managed sites to be purged via the user interface. (In alpha as of June 1,2012)</dd>

<dt><a href="http://drupal.org/project/hosting_civicrm_cron">Hosting CivicCRM Cron</a></dt>
<dd>This module provides the ability to trigger CiviCRM cron jobs on sites hosted on the Aegir Hosting System.</dd>

<dt><a href="http://drupal.org/project/hosting_tasks_extra">Hosting tasks extra</a></dt>
<dd>This module extends Aegir hostmaster (and drush/provision) with some additional tasks. Such as: cache-clear and registry-rebuild.</dd>

<dt><a href="http://drupal.org/project/hosting_filemanager">Hosting Filemanager</a></dt>
<dd>This module provides a web file browser for viewing files under sites and platforms. (In beta as of August 29,2012)</dd>

<dt><a href="http://drupal.org/sandbox/mccrodp/1819860">Hosting Signup Settings</a></dt>
<dd>This module is dependent on hosting_signup module in the hosting package of Aegir. It allows the Signup form at /hosting/signup to be configured. (Sandbox project, October 22, 2012)</dd>

<dt><a href="https://github.com/doka/uc_hosting_client">Hosting Client Roles</a></dt>
<dd>Client Roles module integrates Aegir user roles into hosting_products as product
feature. With this module you can assign Aegir user roles to Ubercart products, and sell
them as hosting products. This module is part of the "Hosting &amp; Ubercart Integration" package, and depends on uc_hosting and uc_hosting_products modules</dd>

<dt><a href="http://drupal.org/project/hosting_solr">Hosting Solr</a></dt>
<dd>Works with <a href="http://drupal.org/project/provision_solr">Provision Solr</a> to give Aegir the ability to manage Solr servers and and gives sites a Solr database.</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Extensions_to_Provision_backend">3. Extensions to Provision (backend)</h2>

<dl>
<dt><a href="http://drupal.org/project/provision_boost">Provision boost support</a></dt>
<dd>the Aegir project and therefore depends on the provision backend and expects the Aegir environment to be functional. Quickstart Download the provision_boost code into your /var/aegir/.drush/ Download ...</dd>

<dt><a href="http://drupal.org/project/provisionacl">Provision ACL support</a></dt>
<dd>This drush command aims to provide preliminary ACL support for the Aegir backend . The objective here is to allow administrators to set more granular access policies on files managed by Aegir and resolve more hairy access permissions requirements than what is usually allowed by the Aegir core. ...</dd>

<dt><a href="http://drupal.org/project/project_status">Project Status</a></dt>
<dd>Project status is an extension for drush which takes a list of drupal platforms as arguments and returns a list of modules which are not in use by any site within these platforms. It is also optionally able to list modules which are use, by platform and site.</dd>

<dt><a href="http://drupal.org/project/provision_civicrm">Provision CiviCRM</a></dt>
<dd>A Drush module to automatically setup Drupal instances with the CiviCRM Constituent Relationship Management solution. It is specifically aimed towards the Aegir project.</dd>

<dt><a href="http://drupal.org/sandbox/helmo/1283656">Provision Backup Platform</a></dt>
<dd>This hooks into deleting a platform and creates a simple tar backup.</dd>

<dt><a href="http://drupal.org/project/kplatforms">kPlatforms</a></dt>
<dd>Koumbit's "standard Drupal platforms", a set of makefiles to build and maintain development and production platforms easily.</dd>

<dt><a href="http://drupal.org/project/provision_git">Provision Git</a></dt>
<dd>Provision Git is a backend Drush module. It provides 4 drush commands. (In alpha as of June 1,2012)</dd>

<dt><a href="http://drupal.org/project/provision-mergelog">Provision Merge Log</a></dt>
<dd>This Aegir extension allows you to automate fetching and merging logs from multiple servers part of the same cluster in a single logfile for later analysis with various analysis tools</dd>

<dt><a href="http://drupal.org/project/provision_cdn">Provision CDN</a></dt>
<dd>This is a simple module and drush script for that allows you to enable CDN support per site in Aegir. (In development as of June 1,2012)</dd>

<dt><a href="http://drupal.org/project/provision_profile_settings">Provision profile settings</a></dt>
<dd>Incredibly simple extension for provision that allows install profiles to easily inject settings into settings.php for provisioned sites.</dd>

<dt><a href="http://drupal.org/project/provision_newrelic">Provision New Relic</a></dt>
<dd>This is a simple extension that exposes all sites in New Relic, so you can monitor each sites performance.</dd>

<dt><a href="http://drupal.org/project/provision_solr">Provision Solr</a></dt>
<dd>Works with <a href="http://drupal.org/project/hosting_solr">Hosting Solr</a> to give Aegir the ability to manage Solr servers and and gives sites a Solr database.</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Themes">4. Themes</h2>

<ul>
<li>Koumbit has provided it's <a href="http://drupal.org/project/eldir_kt">custom Aegir theme</a> as a sample subtheme of <a href="http://drupal.org/project/eldir">Eldir</a>.</li>
<li><a href="https://www.drupal.org/project/saeven">Saeven</a>, a clone of the core theme Seven, based on Omega 4 or 5, clean, simple and responsive.</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Puppet_modules_and_Chef_cookbooks">5. Puppet modules and Chef cookbooks</h2>

<p>Those projects allow you to manage Aegir instance(s) through Puppet. Chef recipes also welcome, we don't discriminate.</p>

<ul>
<li><a href="http://drupal.org/project/puppet-aegir">Aegir Puppet module</a></li>
<li><a href="http://drupal.org/project/puppet-drush">Drush Puppet module</a></li>
<li><a href="https://supermarket.chef.io/cookbooks/aegir2">Aegir Chef cookbook</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Others">6. Others</h2>

<dl>
<dt><a href="http://drupal.org/project/aegir-up">Aegir up</a></dt>
<dd>Aegir-up is a Drush extension that deploys a local instance of the Aegir Hosting System atop Vagrant and Virtualbox, for development and testing purposes.</dd>

<dt><a href="http://drupal.org/project/devshop">DevShop</a></dt>
<dd>DevShop is a Drupal Development Environment Manager built on Aegir.</dd>

<dd>
<p>DevShop creates Aegir platforms and sites automatically from Git URLs.  It tracks multiple Projects and allows multiple environments to be created for each Project, such as dev, test, and live.  It provides tools to Pull Code, Sync Data, Commit Features, and Run Tests on these environments, and provides a dashboard with useful links and information for developers.</p>
</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Your_module_here">7. Your module here?</h2>

<p><em>Developers:</em> Please add your contributed module here, and feel free to put install instructions or other documentation in a child page. If you are looking for ways of extending Aegir or have already done so and want to document the <em>internals</em> of your module, head over to the <a href="../../../../../contrib/index.html">extending Aegir</a> page.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-12.html?destination=node%2F515%23comment-form">Login</a> or <a href="../../../../../user/register/index-12.html?destination=node%2F515%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-12.html?destination=node%2F515%23comment-form">Login</a> or <a href="../../../../../user/register/index-12.html?destination=node%2F515%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-311" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../contrib-modules/aegir-services/index.html">Aegir Services</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><a href="http://drupal.org/project/hosting_services">Aegir Services</a> integrates the Services API framework into the Hostmaster suite of tools. It allows Aegir managers the ability to build Services API connections over any of the available servers for Services API.</p>

<p>Using Services 3.x we are aiming at full CRUD support for clients, tasks and sites, as well as read access to profiles, platforms, and eventually, packages.</p>

<p>The 2.x branch of <a href="../../../../516/index.html">Aegir Ubercart Integration</a> will take advantage of this support to provide a remote storefront functionality.</p>

<p>Please report issues and request support via the <a href="http://drupal.org/project/issues/hosting_services?categories=All">issue queue on Drupal.org</a></p>

<h2>Installation</h2>

<ol>
<li>Install <a href="../../../../../installing/index.html">Aegir</a></li>
<li>Install the <strong>dev</strong> version of <a href="http://drupal.org/project/services">services 3.x</a>, including at least one server and, ideally, an authentication server.</li>
<li>Install this module.</li>
<li><a href="http://drupal.org/node/736522">Configure your endpoint, it's resources and authentication, normally</a>.</li>
<li>Optionally, test your rest server using the included bash script, <code>hosting_services.rest_test.sh</code></li>
</ol>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-405.html?destination=node%2F311%23comment-form">Login</a> or <a href="../../../../../user/register/index-405.html?destination=node%2F311%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../311/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-12861" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/contrib-modules/contribs-aegir-7x-3x/index.html">Contribs for Aegir 7.x-3.x</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc13">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Extensions_to_Hostmaster_frontend"><span class="toc-number">1. </span>Extensions to Hostmaster (frontend)</a></li>
	<li class="toc-level-1"><a href="#Extensions_to_Provision_backend"><span class="toc-number">2. </span>Extensions to Provision (backend)</a></li>
	<li class="toc-level-1"><a href="#Themes"><span class="toc-number">3. </span>Themes</a></li>
	<li class="toc-level-1"><a href="#Puppet_modules_and_Chef_cookbooks"><span class="toc-number">4. </span>Puppet modules and Chef cookbooks</a></li>
	<li class="toc-level-1"><a href="#Others"><span class="toc-number">5. </span>Others</a></li>
	<li class="toc-level-1"><a href="#Your_module_here"><span class="toc-number">6. </span>Your module here?</a></li>
</ol>
</div>
</div>

<h2 id="Extensions_to_Hostmaster_frontend">1. Extensions to Hostmaster (frontend)</h2>

<dl>
<dt><a href="http://drupal.org/project/hosting_git">Hosting Git</a></dt>
<dd>This is a simple module for the Aegir project that adds a 'Git pull', 'Git checkout' and 'Git clone' task for sites.</dd>

<dd>The successor of Hosting site Git &amp; Hosting platform Git</dd>

<dt><a href="http://drupal.org/project/hosting_logs">Hosting Logs</a></dt>
<dd>This is a simple module for the Aegir project that adds a 'Logs' tab to sites and platforms. Showing Apache error, Git commit and watchdog logs.</dd>

<dt><a href="http://drupal.org/project/hosting_platform_pathauto">Hosting Platform Pathauto</a></dt>
<dd>This is an add-on module for the Aegir hosting system: <a href="http://aegirproject.org/" title="http://aegirproject.org/">http://aegirproject.org/</a> This module simply makes a little time-saving tweak when creating a new platform: ...</dd>

<dt><a href="https://github.com/mglaman/hosting_site_make">Hosting site make</a></dt>
<dd>Allows a site to have its modules built from a makefile in the sites directory.</dd>

<dt><a href="http://drupal.org/project/hosting_tasks_extra">Hosting tasks extra</a></dt>
<dd>This module extends Aegir hostmaster (and drush/provision) with some additional tasks. Such as: cache-clear and registry-rebuild.</dd>

<dd>Now also includes the functionality from <a href="https://github.com/computerminds/aegir_http_basic">Aegir HTTP basic authentication</a></dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Extensions_to_Provision_backend">2. Extensions to Provision (backend)</h2>

<p>Starting from Aegir 7.x-3.x the Drush component can be included in a 'drush' directory in the same git repository as the hosting module.</p>

<p>Therefore this list will be shorter then for previous versions.</p>

<dl>
<dt><a href="https://github.com/mlutfy/provision_sts">Provision STS</a></dt>
<dd>Adds the Strict Transport Security header to hosts that require SSL.</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Themes">3. Themes</h2>

<ul>
<li><a href="https://www.drupal.org/project/saeven">Saeven</a></li>
<li><a href="http://drupal.org/project/eldir">Eldir</a>. (The default theme)</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Puppet_modules_and_Chef_cookbooks">4. Puppet modules and Chef cookbooks</h2>

<p>Those projects allow you to manage Aegir instance(s) through Puppet. Chef recipes also welcome, we don't discriminate.</p>

<ul>
<li><a href="http://drupal.org/project/puppet-aegir">Aegir Puppet module</a></li>
<li><a href="http://drupal.org/project/puppet-drush">Drush Puppet module</a></li>
<li><a href="https://supermarket.chef.io/cookbooks/aegir3">Aegir3 Chef Cookbook</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Others">5. Others</h2>

<dl>
<dt><a href="http://drupal.org/project/aegir-up">Aegir up</a></dt>
<dd>Aegir-up is a Drush extension that deploys a local instance of the Aegir Hosting System atop Vagrant and Virtualbox, for development and testing purposes.</dd>

<dt><a href="http://drupal.org/project/devshop">DevShop</a></dt>
<dd>DevShop is a Drupal Development Environment Manager built on Aegir.</dd>

<dd>
<p>DevShop creates Aegir platforms and sites automatically from Git URLs.  It tracks multiple Projects and allows multiple environments to be created for each Project, such as dev, test, and live.  It provides tools to Pull Code, Sync Data, Commit Features, and Run Tests on these environments, and provides a dashboard with useful links and information for developers.</p>
</dd>

<dt><a href="https://github.com/Lab43/aegir-pathologic-files">Aegir Pathologic Files</a></dt>
<dd>A tiny Drupal Module to simplify file paths in content. This helps prevent broken images when the site directory name changes. Requires an apache rewrite rule to point /files to /sites/example.com/files, which Aegir provides by default.</dd>

<dd>This module is not for hostmaster, but for the sites hosted under Aegir.</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Your_module_here">6. Your module here?</h2>

<p><em>Developers:</em> Please add your contributed module here, and feel free to put install instructions or other documentation in a child page. If you are looking for ways of extending Aegir or have already done so and want to document the <em>internals</em> of your module, head over to the <a href="../../../../../contrib/index.html">extending Aegir</a> page.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-65.html?destination=node%2F12861%23comment-form">Login</a> or <a href="../../../../../user/register/index-65.html?destination=node%2F12861%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-65.html?destination=node%2F12861%23comment-form">Login</a> or <a href="../../../../../user/register/index-65.html?destination=node%2F12861%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2325" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/contrib-modules/devshop-provision/index.html">DevShop Provision</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Homepage: <a href="http://drupal.org/project/devshop" title="http://drupal.org/project/devshop">http://drupal.org/project/devshop</a></p>

<h1>DevShop Provision</h1>

<p>Drupal development infrastructure made easy.</p>

<p>This module provides the backend commands needed to 
deploy and manage sites using the DevShop git and features 
based development workflow.</p>

<h2>About DevShop</h2>

<p>The goals of DevShop are...</p>

<ol>
<li>to simplify management of multiple environments for multiple Drupal projects.</li>
<li>to provide web-based tools that streamline the Drupal site building workflow.</li>
<li>to provide a common, open-source infrastructure for Drupal development shops.</li>
</ol>

<h2>Installation</h2>

<p>To install devshop_provision, simply use drush:</p>

<p>$ drush dl devshop_provision</p>

<p>Or, you can download the source code to any available drush commands folder,
such as /usr/share/drush or ~/.drush</p>

<h2>Usage</h2>

<p>DevShop Provision works by providing a new Provision class called "Project".</p>

<p>To start, you must have a Project drush alias.  Using the DevShop+Hostmaster
system will make this much easier, but if you wish to only use the backend, you
can create a project alias with provision-save, for project NAME:
<div class="codeblock"><code>&nbsp; $ drush provision-save project_NAME --context_type=project --code_path=/var/aegir/projects/NAME --git_url=http://git.url/to/repo.git --base_url=NAME.server.com</code></div></p>

<p><div class="codeblock"><code>&nbsp;&nbsp;&nbsp; $ drush provision-save project_NAME --project_name=NAME --context_type=project --code_path=/var/aegir/projects/NAME --git_url=git@github.com:devudo/drupal-flat.git --base_url=NAME.server.com</code></div></p>

<h2>Commands</h2>

<p>DevShop contains a set of features that make Drupal site building within a
version-controlled code workflow quick and easy.</p>

<p>Currently you must create new platforms within a project in hostmaster.  Once created, you can execute the following commands:</p>

<h2>1. Pull Code</h2>

<p><div class="codeblock"><code>&nbsp; $ drush @project_NAME provision-devshop-pull ENVIRONMENT</code></div></p>

<p>This task runs on the dev platform for this project. It runs git pull, and
  optionally runs new updates, reverts features, and clears caches.  It is used
  to keep the dev server up to date on every commit via the devshop_pull module,
  and can be used as the deployment task.</p>

<ul>
<li>Git Pull the code for your site's platform.</li>
<li>Then, all optionally:

<ul>
<li>Run update.php.</li>
<li>Revert all Features modules</li>
<li>Clear caches</li>
</ul></li>
</ul>

<h2>2. Commit Features</h2>

<p><div class="codeblock"><code>&nbsp; $ drush @project_NAME provision-devshop-commit ENVIRONMENT --message=&quot;My Commit&quot;</code></div></p>

<p>This task integrates with Features.module to make it very easy to commit
  your changes to your features.</p>

<ul>
<li>Calls drush features-update-all</li>
<li>Commits the result, with a part automated and part customized commit message.</li>
<li>(Optionally) pushes the commits.</li>
<li>(Optionally) force-reverts after a commit.</li>
</ul>

<h2>3. Sync Content</h2>

<p><div class="codeblock"><code>&nbsp; $ drush @project_NAME provision-devshop-sync SOURCE_ENVIRONMENT DESTINATION_ENVIRONMENT</code></div></p>

<p>This task makes it easy to syncronize the database and files down from other
  environments within the project.</p>

<p>WARNING: This will DESTROY the destination site's database!</p>

<p>This task:</p>

<ul>
<li>(optionally) Pulls code</li>
<li>Drops the @destination database.</li>
<li>Creates an SQL dump from @source.</li>
<li>Copies the SQL dump to the local system (if @source is a remote).</li>
<li>Imports the SQL dump into @destination database.</li>
<li>(optionally) Runs update.php.</li>
<li>(optionally) Runs features-revert-all.</li>
<li>(optionally) Clears all caches.</li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-66.html?destination=node%2F2325%23comment-form">Login</a> or <a href="../../../../../user/register/index-66.html?destination=node%2F2325%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-66.html?destination=node%2F2325%23comment-form">Login</a> or <a href="../../../../../user/register/index-66.html?destination=node%2F2325%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2326" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/content/contrib-modules/devshop-provision/commands/index.html">Commands</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><h1>$ drush --filter=devshop_provision</h1>

<p><div class="codeblock"><code>All commands in devshop_provision: (devshop_provision)<br /> provision-devshop-co&nbsp; Export the site&#039;s Features and commit the result.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> mmit (pdc)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> provision-devshop-pu&nbsp; Pull &amp; verify platform code and (optionally) run update.php, clear cache, and revert features. <br /> ll (pdp)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> provision-devshop-sy&nbsp; Sync database (and files, coming soon) from a chosen source site.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> nc (pds)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> provision-devshop-te&nbsp; Run a group of SimpleTest tests.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> st (pdt)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div></p>

<h1>$ drush provision-devshop-commit --help</h1>

<p><div class="codeblock"><code>Export the site&#039;s Features and commit the result.<br /><br />Examples:<br /> drush @project_mysite&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Recreates and Commits all features from the dev environment of @project_mysite with an additional commit <br /> provision-devshop-commit dev&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; message.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> --message=&quot;changed some settings&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /><br /><br />Arguments:<br /> environment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The name of the environment to commit from. <br /><br /><br />Options:<br /> --message&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Add a commit message&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> --revert&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Force revert all features after exporting and committing. <br /><br /><br />Aliases: pdc</code></div></p>

<h1>$ drush provision-devshop-pull --help</h1>

<p><div class="codeblock"><code>Pull &amp; verify platform code and (optionally) run update.php, clear cache, and revert features.<br /><br />Examples:<br /> drush @project_mysite&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Triggers a git pull and a clear cache command on @project_mysite&#039;s dev and test environments. <br /> provision-devshop-pull dev test --cache&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /><br /><br />Arguments:<br /> environments&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A list of environment names to Pull Code to. <br /><br /><br />Options:<br /> --update&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Run update.php after code pull.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> --revert&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Revert all features after code pull. <br /> --cache&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Clear all caches after code pull.&nbsp;&nbsp;&nbsp; <br /><br /><br />Aliases: pdp</code></div></p>

<h1>$ drush provision-devshop-sync --help</h1>

<p><div class="codeblock"><code>Sync database (and files, coming soon) from a chosen source site.<br /><br />Examples:<br /> drush @project_mysite&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Syncs the database from for project_mysite&#039;s live to&nbsp; project_mysite&#039;s dev server. <br /> provision-devshop-sync live dev&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /><br /><br />Arguments:<br /> from&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Environment to sync from. <br /> to&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Environment to sync to.&nbsp;&nbsp; <br /><br /><br />Options:<br /> --update&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Run update.php after content sync.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> --revert&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Revert all features after content sync. <br /> --cache&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Clear all caches after content sync.&nbsp;&nbsp;&nbsp; <br /> --files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sync site files.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /><br /><br />Aliases: pds</code></div></p>

<h1>$ drush provision-devshop-test --help</h1>

<p><div class="codeblock"><code>Run a group of SimpleTest tests.<br /><br />Arguments:<br /> environment&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The name of the environment to run tests on. <br /><br /><br />Options:<br /> --tests-to-run&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The list of tests to run.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> --sync-from-live&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sync contents from Live before running tests. <br /><br /><br />Aliases: pdt</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-67.html?destination=node%2F2326%23comment-form">Login</a> or <a href="../../../../../user/register/index-67.html?destination=node%2F2326%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-67.html?destination=node%2F2326%23comment-form">Login</a> or <a href="../../../../../user/register/index-67.html?destination=node%2F2326%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-526" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/contrib-modules/provision-acl/index.html">Provision ACL</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This page documents the <a href="http://drupal.org/project/provisionacl">Provision ACL extension</a> to Aegir which allows more granular access control over your sites files and directories.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc14">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Install_instructions"><span class="toc-number">1. </span>Install instructions</a>
<ol>
	<li class="toc-level-2"><a href="#Download_and_install_provision"><span class="toc-number">1.1. </span>Download and install provision</a></li>
	<li class="toc-level-2"><a href="#Enable_ACLs_on_your_filesystem"><span class="toc-number">1.2. </span>Enable ACLs on your filesystem</a></li>
	<li class="toc-level-2"><a href="#Install_ACL_support_package"><span class="toc-number">1.3. </span>Install ACL support package</a></li>
	<li class="toc-level-2"><a href="#Create_a_UNIX_group"><span class="toc-number">1.4. </span>Create a UNIX group</a></li>
	<li class="toc-level-2"><a href="#Add_users_to_the_group"><span class="toc-number">1.5. </span>Add users to the group</a></li>
	<li class="toc-level-2"><a href="#Create_a_client"><span class="toc-number">1.6. </span>Create a client</a></li>
	<li class="toc-level-2"><a href="#Create_a_site"><span class="toc-number">1.7. </span>Create a site</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#What_it_does"><span class="toc-number">2. </span>What it does</a></li>
	<li class="toc-level-1"><a href="#LDAP_integration"><span class="toc-number">3. </span>LDAP integration</a></li>
	<li class="toc-level-1"><a href="#API_-_how_to_add_ACL_support_to_your_Aegir_extension"><span class="toc-number">4. </span>API - how to add ACL support to your Aegir extension</a></li>
	<li class="toc-level-1"><a href="#Caveats_ie._what_it_does_not"><span class="toc-number">5. </span>Caveats (ie. what it does not)</a></li>
	<li class="toc-level-1"><a href="#Debugging"><span class="toc-number">6. </span>Debugging</a></li>
	<li class="toc-level-1"><a href="#Notes"><span class="toc-number">7. </span>Notes</a></li>
</ol>
</div>
</div>

<h1 id="Install_instructions">1. Install instructions</h1>

<p>First, you'll need a running Aegir install (1.0-rc3 or later), see <a href="../../../../../installing/index.html" title="http://community.aegirproject.org/installing">http://community.aegirproject.org/installing</a>. Most (if not all) of these commands will have to be run as root (or using sudo, etc.)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Download_and_install_provision">1.1. Download and install provision</h2>

<pre><code>drush dl provisionacl-6.x
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Enable_ACLs_on_your_filesystem">1.2. Enable ACLs on your filesystem</h2>

<pre><code>mount -o remount,acl /
</code></pre>

<p>Here we assume everything is under the root (<code>/</code>) filesystem here, otherwise run this command for every filesystem Aegir will work on (e.g. <code>/srv</code>, <code>/var</code> or <code>/home</code>).</p>

<p>You also need to edit your <code>/etc/fstab</code> for this configuration to survive reboots.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Install_ACL_support_package">1.3. Install ACL support package</h2>

<pre><code>apt-get install acl
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Create_a_UNIX_group">1.4. Create a UNIX group</h2>

<p>In this case we choose a group called "devs" but you can choose another name.</p>

<pre><code>groupadd devs
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Add_users_to_the_group">1.5. Add users to the group</h2>

<p>Add one or more UNIX users that you want to give access to that group. For an existing user (socrates32), this would look like:</p>

<pre><code>usermod -a -G devs socrates32
</code></pre>

<p>For a new user (ergonlogic), this would look like:</p>

<pre><code>useradd -G devs ergonlogic
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Create_a_client">1.6. Create a client</h2>

<p>Create a client (should be called "devs" for this example) in the frontend at /node/add/client.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Create_a_site">1.7. Create a site</h2>

<p>Create a site for the client in the frontend at /node/add/site.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="What_it_does">2. What it does</h1>

<p>When the site is installed, members of the "devs" group will be able to write to the sites' directories (e.g. upload files and modules) and run drush commands on the site (yes, including site aliases, although see caveats below).</p>

<p>This works also for existing sites; make sure you create a group matching the internal name of the existing client and reverify the site.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="LDAP_integration">3. LDAP integration</h1>

<p>Provisionacl supports LDAP groups as well. Ensure that an LDAP client is running and that the 'aegir' user can see the LDAP-provided groups:</p>

<pre><code>getent groups
</code></pre>

<p>You may need to restart the Name Service Cache Daemon (nscd):</p>

<pre><code>/etc/init.d/nscd restart
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="API_-_how_to_add_ACL_support_to_your_Aegir_extension">4. API - how to add ACL support to your Aegir extension</h1>

<p>To change ACLs on files, you should use something like this:</p>

<pre><code>if (function_exists('provisionacl_set_acl')) {
    provisionacl_files_acls(d()-&gt;site_path . '/mysettings.php');
}
</code></pre>

<p>You can optionnally pass a group as an argument, but it will guess that from the client name of the site. Also note that this will raise a drush error if setfacl fails, but just set a warning if the group doesn't exist.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Caveats_ie._what_it_does_not">5. Caveats (ie. what it does not)</h1>

<p>Giving shell access to users in Aegir is still insecure, see this upstream issue: <a href="http://drupal.org/node/762138">#762138</a>.</p>

<p>We aim to refactor this into the Aegir core in 2.x, but in the meantime this should provide a good workaround for the limitations of the existing permission system.</p>

<p>This will only work in 1.0 and above, as it needs the "client_name" field to be populated.</p>

<p>You will need to change your $HOME variable for aliases to work, because of this bug in drush: <a href="http://drupal.org/node/1104438">#1104438</a>. Example:</p>

<p><div class="codeblock"><code>env HOME=/var/aegir drush @hostmaster cc all</code></div></p>

<p>See also <a href="../../../../494/index.html">this post for context and design</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Debugging">6. Debugging</h1>

<p>If for some reason you have lost the ACLs on the directories and you need to restore them, use the following commands, which is basically what the module does:</p>

<p><div class="codeblock"><code>cd sites/example.com<br />setfacl -R -m user:aegir:rwx .<br />setfacl -R -m default:user:aegir:rwx .<br />setfacl -R -m group:www-data:rwx .<br />setfacl -R -m d:group:www-data:rwx .<br />setfacl -R -m group:cl-group:rwx .<br />setfacl -R -m default:group:cl-admin:rwx .</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Notes">7. Notes</h1>

<p>This page is the reference documentation for the <a href="https://drupal.org/project/provisionacl">Provision ACL module page on Drupal.org</a> - keep this in mind when editing please.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-68.html?destination=node%2F526%23comment-form">Login</a> or <a href="../../../../../user/register/index-68.html?destination=node%2F526%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-68.html?destination=node%2F526%23comment-form">Login</a> or <a href="../../../../../user/register/index-68.html?destination=node%2F526%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-516" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../516/index.html">Ubercart Integration</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This module provides several features to ubercart products on an Aegir platform.</p>

<h2>Requirements</h2>

<ul>
<li>Hostmaster 6.x-1.0 or higher</li>
<li>Ubercart 6.x-2.4 or higher</li>
<li>Patience</li>
</ul>

<h2>Installation</h2>

<ol>
<li>Download the module and its dependencies into sites/all/modules on your hostmaster platform (<code>drush @hostmaster dl uc_hosting ubercart</code> should work)</li>
<li>Activate the clients feature for hostmaster (<code>admin/hosting/features</code>)</li>
<li>Enable the module uc_hosting_products. This should enable all dependencies (<code>drush @hostmaster en uc_hosting_products</code>)</li>
</ol>

<h2>Creating your first site product</h2>

<p><strong>N.B.</strong> A video introduction covering configuration is available from the DrupalCon London session <a href="http://london2011.drupal.org/conference/sessions/aegir-based-business-models">Aegir-based Business Models</a> (starting at 26:30).</p>

<ol>
<li>Create a product. Make sure it is not shippable. (<code>node/add/product</code>)</li>
<li>Edit the product. Go to the features tab.</li>
<li>Choose the "Create a site and adjust quotas accordingly" feature. It should use the sku of your product automatically.</li>
<li>For single-site products, make sure, on the product feature form, to check off "Force clients to create their site on purchase" if you want to be sure people create their site.</li>
<li>Now all you need is a drupal platform that any user can create sites on and you are ready to go. (<code>node/add/platform</code>)</li>
</ol>

<h2>Creating more complex offerings using product kits</h2>

<p>The method we recommend for creating complex offerings, including multiple site quotas and access to restricted platforms, is via Ubercart product kits.</p>

<ol>
<li>Enable uc_product_kit.</li>
<li>Create one or more uc_hosting products.</li>
<li>Create a product kit with these products in them in the appropriate quantities.</li>
</ol>

<h2>Support</h2>

<p>You can report bugs, request support and propose patches <a href="http://drupal.org/project/issues/uc_hosting">via our issue queue on Drupal.org</a>.</p>

<h2>Development</h2>

<p>If you would like to use uc_hosting to develop your own Aegir dependant product features, be sure to <a href="../../../../../creating-product-features-using-uchosting-1x/index.html">read the relevant documentation</a>.</p>

<p>Check out the <a href="../../../../108/index.html">roadmap</a>.</p>

<h2>Other Resources</h2>

<ul>
<li><a href="../../../../../index.html">Aegir community site</a></li>
<li><a href="http://www.ubercart.org/docs">Ubercart Documentation</a></li>
<li>#aegir IRC channel on <a href="http://freenode.net/">freenode</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-69.html?destination=node%2F516%23comment-form">Login</a> or <a href="../../../../../user/register/index-69.html?destination=node%2F516%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-69.html?destination=node%2F516%23comment-form">Login</a> or <a href="../../../../../user/register/index-69.html?destination=node%2F516%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-888" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../contrib-modules/provision-civicrm/index.html">Provision CiviCRM</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><a href="https://drupal.org/project/provision_civicrm">provision_civicrm</a> helps to manage the installation and upgrades of CiviCRM in Drupal sites managed with Aegir.</p>

<p>CiviCRM is not a typical Drupal module. It is a third-party system that integrates with Drupal, WordPress and Joomla for its front-end and permission system. CiviCRM has its own installer, upgrade system and cron. The "provision_civicrm" module helps to manage any CiviCRM+Drupal site as any other Drupal site managed in Aegir.</p>

<h3>Requirements</h3>

<ul>
<li>Aegir 2.x or 3.x</li>
<li><a href="https://drupal.org/project/hosting_civicrm">hosting_civicrm</a> must be installed in the hostmaster front-end (~/hostmaster-x-y/sites/example.org/modules).</li>
</ul>

<h3>Installation</h3>

<p>Download the provision_civicrm module as the "aegir" user:</p>

<pre><code>drush dl provision_civicrm-6.x-2.x
</code></pre>

<p>This should install the module in ~/.drush/provision_civicrm.</p>

<p>NB: provision_civicrm 6.x-2.x is a Drush module, and works with both Aegir 2 and Aegir 3. However, for Aegir 3, you must use the 7.x-3.x branch of the hosting_civicrm module.</p>

<h3>Creating a CiviCRM platform</h3>

<p>provision_civicrm assumes that if you have a CiviCRM installation in your sites/all/modules/civicrm, then this is a CiviCRM platform and CiviCRM should be installed automatically.</p>

<p>(A cleaner way, in theory, would be to have an install profile and let the user configure it through the front-end, patches welcome! -- however, you do not want any site to simply enable CiviCRM from the Drupal admin/build/modules, so having dedicated platforms for CiviCRM makes sense in any case.)</p>

<p>A sample drush makefile is provided with provision_civicrm.</p>

<p>Assuming you are running as the user 'aegir', whose $HOME is /var/aegir/, save this in a file such as ~/makefiles/drupal-6.22-civicrm-3.3.4.make</p>

<p>Then create the new platform:</p>

<pre><code>mkdir ~/platforms/drupal-6.22-civicrm-3.3.4
cd ~/platforms/drupal-6.22-civicrm-3.3.4
drush make ~/makefiles/drupal-6.22-civicrm-3.3.4.make
</code></pre>

<p>You can now add your platform in the Aegir front-end and then create new sites.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-406.html?destination=node%2F888%23comment-form">Login</a> or <a href="../../../../../user/register/index-406.html?destination=node%2F888%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../888/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-13160" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/content/administrator/post-install-configuration/create-sudo-user-server-administration/index.html">Create a SUDO user for server administration</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_602 first"><a href="../../../../../category/keywords/sudo/index.html" rel="tag" title="">sudo</a></li>
<li class="taxonomy_term_2"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_603 last"><a href="../../../../../category/keywords/users/index.html" rel="tag" title="">users</a></li>
</ul></div><p>Sometimes you will need to administer your server beyond what you can do as the Aegir user.</p>

<p>Examples include installing additional software or editing PHP configuration.</p>

<p>It's not recommended to use the <code>root</code> user for administering things as it can be easy to make mistakes that could break your system.</p>

<p>Instead of running as root, it is recommended to create a user for yourself that has sudo privileges.</p>

<h2>Create a user with SUDO privileges</h2>

<p>In ubuntu/debian systems, creating a user and giving them the ability to run commands with <code>sudo</code> is easy with the <code>adduser</code> command.</p>

<p>Think of a username and password for yourself, then run the following commands as root:</p>

<pre>
root@aegir:~# adduser bob
Adding user `bob' ...
Adding new group `bob' (1001) ...
Adding new user `bob' (1001) with group `bob' ...
Creating home directory `/home/bob' ...
Copying files from `/etc/skel' ...
Enter new UNIX password: 
Retype new UNIX password: 
passwd: password updated successfully
Changing the user information for bob
Enter the new value, or press ENTER for the default
    Full Name []: Bob
    Room Number []: 
    Work Phone []: 
    Home Phone []: 
    Other []: 
Is the information correct? [Y/n] y
root@aegir:~#
</pre>

<p>Then add them to the "sudo" user group:</p>

<pre>
root@aegir:~# adduser bob sudo
Adding user `bob' to group `sudo' ...
Adding user bob to group sudo
Done.
root@aegir:~# 
</pre>

<p>Then you can switch to the "bob" user using <code>sudo su</code>, or login via ssh with your password.</p>

<pre>
root@aegir:~# sudo su - bob
bob@aegir:~$
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-70.html?destination=node%2F13160%23comment-form">Login</a> or <a href="../../../../../user/register/index-70.html?destination=node%2F13160%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-70.html?destination=node%2F13160%23comment-form">Login</a> or <a href="../../../../../user/register/index-70.html?destination=node%2F13160%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2799" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/content/administrator/post-install-configuration/experimental-aegir-2-ubuntu-1204-apache-php/index.html">Experimental: Aegir 2 on Ubuntu 12.04 with apache, php-fpm</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>These notes describe a possible way of installing Apache with fastcgi using php5-fpm.
The below configuration works but is experimental.</p>

<p>On a Ubuntu 12.04 box:</p>

<h2>Install Aegir2 from Debian packages</h2>

<p>Follow <a href="../../../../../installing/debian/index.html" title="http://community.aegirproject.org/installing/debian">http://community.aegirproject.org/installing/debian</a>. Below is a shortened form.</p>

<p>Add the Aegir package "Software Source" repository:
<div class="codeblock"><code>echo &quot;deb <a href="http://debian.aegirproject.org/" title="http://debian.aegirproject.org">http://debian.aegirproject.org</a> stable main&quot; | sudo tee -a /etc/apt/sources.list.d/aegir-stable.list<br />wget -q <a href="http://debian.aegirproject.org/key.asc" title="http://debian.aegirproject.org/key.asc">http://debian.aegirproject.org/key.asc</a> -O- | sudo apt-key add -</code></div></p>

<p>Install aegir2:
<div class="codeblock"><code>sudo apt-get update<br />sudo apt-get install mysql-server<br />sudo mysql_secure_installation<br />sudo apt-get install aegir2</code></div></p>

<p>If the installation fails, it might be that your FQDN is not set or your postfix is not configured.</p>

<h2>Verify your aegir site is working</h2>

<p>Navigate your browser to the FQDN of your aegir server. You need to see the "Welcome to Aegir" page.</p>

<h2>Modify the configuration to use fastcgi / php5-fpm</h2>

<p>Edit <code>/etc/apt/sources.list</code> and enable the multiverse repository (it's needed for the libapache2-mod-fastcgi package).</p>

<p>Then install php5-fpm and make apache use it:
<div class="codeblock"><code>sudo apt-get update<br />sudo apt-get install php5-fpm libapache2-mod-fastcgi<br />sudo apt-get --purge remove libapache2-mod-php5</code></div></p>

<p>Modify <code>/etc/php5/fpm/pool.d/www.conf</code>
Make it listen on socket, instead of IP:
<div class="codeblock"><code>;listen = 127.0.0.1:9000<br />listen = /var/run/php-fpm.sock</code></div></p>

<p>Create <code>/etc/apache2/conf.d/php-fpm.conf</code> with this content:
<div class="codeblock"><code>ScriptAlias /php5.fastcgi /var/www/fastcgi<br />FastCGIExternalServer /var/www/fastcgi -socket /run/php-fpm.sock<br />AddHandler php-fastcgi .php<br />Action php-fastcgi /php5.fastcgi virtual<br /><br />Options FollowSymLinks ExecCGI<br /><br />&lt;Directory /var/www/fastcgi&gt;<br />&nbsp; Options ExecCGI FollowSymLinks<br />&nbsp; SetHandler fastcgi-script<br />&nbsp; Order allow,deny<br />&nbsp; Allow from all<br />&lt;/Directory&gt;</code></div></p>

<p>Enable apache modules:
<div class="codeblock"><code>sudo a2enmod actions alias fastcgi</code></div></p>

<p>Restart php5-fpm and apache to load the new configs: 
<div class="codeblock"><code>sudo service php5-fpm restart<br />sudo service apache2 restart</code></div></p>

<h2>Verify that you can still reach your Aegir site</h2>

<p>Navigate your browser to the FQDN of your aegir server. This time, you are using php5-fpm. Verify e.g. via phpinfo().</p>

<p>--<br />
Page author: Marji Cermak <a href="mailto:marji@morpht.com">&#109;&#97;&#x72;&#x6a;&#x69;&#x40;&#x6d;&#x6f;&#x72;ph&#116;&#46;&#99;&#111;&#109;</a>, <a href="http://morpht.com/" title="http://morpht.com">http://morpht.com</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-71.html?destination=node%2F2799%23comment-form">Login</a> or <a href="../../../../../user/register/index-71.html?destination=node%2F2799%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-71.html?destination=node%2F2799%23comment-form">Login</a> or <a href="../../../../../user/register/index-71.html?destination=node%2F2799%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1226" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../handbook/administrator/post-install-configuration/using-proxy-cache-accelerate-platform-build/index.html">Using a proxy cache to accelerate platform builds</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>While building (and re-building) platforms using makefiles and the Aegir front-end (node/add/platform) is great, it has a number of minor annoyances. They're slow, and consume lots of bandwidth, but worse still, even a small hiccup in drupal.org (or other) infrastructure can break a platform build, which requires starting from scratch each time.</p>

<p>When you maintain platforms with upwards of 300 modules, themes and libraries, such as with <a href="http://drupal.org/project/kplatforms">kPlatforms</a>, and you start to deploy these to multiple clients' <a href="http://www.koumbit.org/en/services/AegirVPS">Aegir servers</a>, those minor annoyances can become significant challenges.</p>

<p>There is good documentation on setting this up for use with Drush Make already, such as this <a href="http://reluctanthacker.rollett.org/using-squid-caching-server-drush-module-downloads">blog post</a>. However, there are some gotchas when doing so in Aegir. Most of the suggested solutions involve something like setting environment variables in ~/.bashrc, which works fine if you're running 'drush make' yourself in a login shell. However, since the Aegir is running in a non-interactive shell, there isn't a opportunity to set environment variables.</p>

<p>Thankfully, Drush Make supports curl, and opts for it automatically if it's installed. Careful reading of curl's manpage indicates that:</p>

<pre><code>[curl] always [...] checks for a default config file and uses it if found.
</code></pre>

<p>So, in the end, all that's required is a /var/aegir/.curlrc file containing:</p>

<pre><code>proxy = "http://&lt;proxy_host&gt;[:port]"
</code></pre>

<p>Thus a basic configuration on Debian would involve installing a proxy, such as Squid:</p>

<pre><code># apt-get install squid3
</code></pre>

<p>Then add an acl in /etc/squid3/squid.conf allowing access from your local network, e.g.:</p>

<pre><code>acl localnet src 192.168.0.0/16
http_access allow localnet
</code></pre>

<p>Restart Squid and you're good to go:</p>

<pre><code># /etc/init.d/squid3 restart
</code></pre>

<p>Testing that Aegir is actually using your new proxy cache, and that Squid is actually caching the makefile projects involves taking a quick look at the logs of the Squid server:</p>

<pre><code># tail -f /var/log/squid3
</code></pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-407.html?destination=node%2F1226%23comment-form">Login</a> or <a href="../../../../../user/register/index-407.html?destination=node%2F1226%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../1226/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-10" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../upgrading/index.html">Upgrade Guide</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc15">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Introduction"><span class="toc-number">1. </span>Introduction</a></li>
	<li class="toc-level-1"><a href="#Upgrade_options"><span class="toc-number">2. </span>Upgrade options</a></li>
	<li class="toc-level-1"><a href="#New_release_of_Drupal_core"><span class="toc-number">3. </span>New release of Drupal core?</a></li>
</ol>
</div>
</div>

<h2 id="Introduction">1. Introduction</h2>

<p>Upgrading Aegir is designed to be as easy as it possibly can be, and regularly improves over time as the developers attempt to streamline the process for users.</p>

<p>Nonetheless, the upgrade process can seem a little daunting to users. This is mainly because some expectation arises that because Aegir is built on Drupal, and is made for managing Drupal sites, it seems reasonable to expect the upgrade process to be as straightforward as, say, upgrading a regular Drupal site.</p>

<p>Aegir is a powerful system that goes beyond a normal Drupal application by being split into two parts: a frontend (the browser-based control panel) and the backend (bits on the system in /var/aegir, such as Drush and Drush extensions), along with a system user on your server that runs command-line scripts and restarts services, and cronjobs.</p>

<p>Typically what this means is that when it comes time to upgrade Aegir, you not only have to upgrade the frontend site, but also update the components that reside in the 'backend'.</p>

<p>But don't panic! We have instructions and even a script to run, to take care of almost all of it for you, eliminating as much as possible the chance for human error.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrade_options">2. Upgrade options</h2>

<p>There are three options you can choose to upgrade your Aegir install when a new release comes up:</p>

<ul>
<li><a href="../../../../../upgrading/debian/index.html">Upgrades using Debian packages</a></li>
<li><a href="../../../../../upgrading/script/index.html">Upgrades using the upgrade.sh.txt script</a></li>
<li><a href="../../../../../upgrading/manual/index.html">Manual upgrades</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="New_release_of_Drupal_core">3. New release of Drupal core?</h2>

<p>Just as you would use the Migrate task in Aegir to upgrade one of your sites to a new copy of Drupal core, you can follow the UPGRADE.txt to upgrade your actual Aegir frontend system to a new copy of Drupal core too. The upgrade process (including the script) will always fetch the latest available copy of Drupal core to place the frontend on.</p>

<p>Currently you cannot upgrade the Aegir site itself from the frontend with a Migrate task as you do for your managed sites. This may change in the future, but has not been developed yet.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-72.html?destination=node%2F10%23comment-form">Login</a> or <a href="../../../../../user/register/index-72.html?destination=node%2F10%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-72.html?destination=node%2F10%23comment-form">Login</a> or <a href="../../../../../user/register/index-72.html?destination=node%2F10%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-429" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../upgrading/manual/index.html">Manual Upgrade</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_21 first"><a href="../../../../../taxonomy/term/21/index.html" rel="tag" title="">manual</a></li>
<li class="taxonomy_term_2"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_22 last"><a href="../../../../../taxonomy/term/22/index.html" rel="tag" title="">upgrade</a></li>
</ul></div><p>This section outlines the requirements for doing a manual upgrade of Aegir to a new release. Before going ahead with this, you probably want to read the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific notes</a>.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc16">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Conventions_and_Tips"><span class="toc-number">1. </span>Conventions &amp; Tips</a></li>
	<li class="toc-level-1"><a href="#Upgrading_Overview"><span class="toc-number">2. </span>Upgrading Overview</a>
<ol>
	<li class="toc-level-2"><a href="#Upgrading_drush"><span class="toc-number">2.1. </span>Upgrading drush</a></li>
	<li class="toc-level-2"><a href="#Upgrading_the_backend"><span class="toc-number">2.2. </span>Upgrading the backend</a></li>
	<li class="toc-level-2"><a href="#Upgrading_the_frontend"><span class="toc-number">2.3. </span>Upgrading the frontend</a></li>
	<li class="toc-level-2"><a href="#What_hostmaster-migrate_does"><span class="toc-number">2.4. </span>What hostmaster-migrate does</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Upgrading_to_AEgir_1.x"><span class="toc-number">3. </span>Upgrading to AEgir 1.x</a>
<ol>
	<li class="toc-level-2"><a href="#Upgrading_drush_and_drush_make"><span class="toc-number">3.1. </span>Upgrading drush and drush make</a></li>
	<li class="toc-level-2"><a href="#Upgrading_the_1.x_backend"><span class="toc-number">3.2. </span>Upgrading the 1.x backend</a></li>
	<li class="toc-level-2"><a href="#Upgrading_the_1.x_frontend"><span class="toc-number">3.3. </span>Upgrading the 1.x frontend</a></li>
	<li class="toc-level-2"><a href="#Special_configurations_and_troubleshooting"><span class="toc-number">3.4. </span>Special configurations and troubleshooting</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Upgrading_to_AEgir_2.x"><span class="toc-number">4. </span>Upgrading to AEgir 2.x</a>
<ol>
	<li class="toc-level-2"><a href="#Upgrading_drush-1"><span class="toc-number">4.1. </span>Upgrading drush</a></li>
	<li class="toc-level-2"><a href="#Upgrading_the_2.x_backend"><span class="toc-number">4.2. </span>Upgrading the 2.x backend</a></li>
	<li class="toc-level-2"><a href="#Upgrading_the_2.x_frontend"><span class="toc-number">4.3. </span>Upgrading the 2.x frontend</a></li>
	<li class="toc-level-2"><a href="#Special_configurations_and_troubleshooting-2"><span class="toc-number">4.4. </span>Special configurations and troubleshooting</a></li>
</ol>
</li>
</ol>
</div>
</div>

<h1 id="Conventions_and_Tips">1. Conventions &amp; Tips</h1>

<p>All instructions and in general all commands must be run as aegir user, so all
permissions are always set correctly.</p>

<p>To become aegir user you can issue this command:</p>

<pre><code>su -s /bin/sh aegir
</code></pre>

<p>(Note you must run this as root or prefix with sudo).</p>

<p>Note that /bin/sh is an example. You may wish to instead use the shell of your
choice, i.e /bin/bash</p>

<p>A standard umask of 022 is assumed. This is the default on most systems.</p>

<p>We assume that drush is in your path, if it is installed in <code>/var/aegir/drush/drush.php</code>, replace all occurences of <code>drush</code> by <code>/var/aegir/drush/drush.php</code> in the following steps, or add the following alias:</p>

<pre><code>alias drush=/var/aegir/drush/drush.php
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Upgrading_Overview">2. Upgrading Overview</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrading_drush">2.1. Upgrading drush</h2>

<p>As part of your Aegir upgrade, you need to upgrade Drush to the latest stable version compatible with the target Aegir release. AEgir 1.x <em>only</em> works with version 4.5.  Versions 5 - 7 have been known to work with AEgir 2.x, however  the Drush developers recommend version 6 as the most stable.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrading_the_backend">2.2. Upgrading the backend</h2>

<p>After drush is updated, you must then proceed to upgrade the backend. The reason for upgrading the backend first before the frontend, is that the frontend upgrade process is instigated by the backend using Drush Make. Thus you need to be running the new backend first in order to successfully produce a new frontend.</p>

<p>In general, we try to keep the backend and the frontend compatible with each other during release cycles. That is: provision 1.8 and hosting 1.9 will always be able to talk to each other, but hosting 2.0 will have trouble talking to the 1.9 backend, so you need to upgrade the backend first when you do a major upgrade (for example, 1.9 -&gt; 2.0).</p>

<p>Bottomline: first you upgrade the backend, then the frontend.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrading_the_frontend">2.3. Upgrading the frontend</h2>

<p>Once your backend is upgraded, you can upgrade your frontend. Think of this as the backend fetching a new copy of Drupal core and the Hostmaster frontend application onto your server, and then moving the Aegir site's settings.php and other bits and pieces over to the new codebase.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="What_hostmaster-migrate_does">2.4. What hostmaster-migrate does</h2>

<p>The command will make sure the target directory is a valid Aegir install. If the directory does not exist, provision will use drush_make to fetch and assemble the correct version of the front end for the specific release of the backend you are running.</p>

<p><code>hostmaster-migrate</code> will also completely replace the crontab entry for the aegir user.</p>

<p>The command above will fetch the latest stable Drupal release, so it can simply be run again when a new security release of Drupal is made available.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Upgrading_to_AEgir_1.x">3. Upgrading to AEgir 1.x</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrading_drush_and_drush_make">3.1. Upgrading drush and drush make</h2>

<p>As part of your Aegir upgrade, you need to upgrade Drush to the latest stable version compatible with the target Aegir release. Aegir 1.x does <strong>not</strong> support Drush 5, although 2.x does.</p>

<p>If you are using the Drush Debian packages, the package should be upgraded through:</p>

<pre><code>apt-get install drush
</code></pre>

<p>Otherwise, since drush 4.x is capable of upgrading itself, you can just run:</p>

<pre><code>drush dl drush-7.x-4.5
</code></pre>

<p>If you are running a version before 4.x, use the following set of commands instead:</p>

<pre><code>pear channel-discover pear.drush.org
pear install drush/drush-4.5.0
</code></pre>

<p>Provision 0.4 has added a new dependency on drush_make, which will also need to be installed to upgrade the front end if you are upgrading from a pre-0.4 release.</p>

<p>If you are upgrading from an earlier 0.4 release, replace your copy of drush_make with the latest recommended release.</p>

<pre><code>drush dl drush_make-6.x --destination="$HOME/.drush"
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrading_the_1.x_backend">3.2. Upgrading the 1.x backend</h2>

<p>Upgrading the backend is as simple as replacing your copy of Drush, Provision, and if necessary, Drush Make, with the new versions if available. Keep a copy of the old Provision and Drush in case something goes wrong in the frontend.</p>

<pre><code>drush dl provision-6.x --destination=$HOME/.drush
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrading_the_1.x_frontend">3.3. Upgrading the 1.x frontend</h2>

<p>Before upgrading, we set a few key variables to make the process easier. You <strong>must</strong> replace the arguments those variables to match your configuration. This means replacing <code>$AEGIR_DOMAIN</code> by the URL of your Aegir install, <code>$AEGIR_VERSION</code> with the version number of the Aegir you are trying to install, and also <code>$OLD_AEGIR_DIR</code> with the path to the previous directory where Aegir was installed.</p>

<p>The directory passed to <code>hostmaster-migrate</code> must be an absolute path to where you want the new release to be stored.</p>

<pre><code>OLD_AEGIR_DIR=/var/aegir/hostmaster-6.x-1.8
AEGIR_VERSION=6.x-1.11
AEGIR_DOMAIN=aegir.example.com
</code></pre>

<p>To upgrade your frontend, run the following commands, replacing the variables as described below:</p>

<pre><code>cd $OLD_AEGIR_DIR
drush hostmaster-migrate $AEGIR_DOMAIN $HOME/hostmaster-$AEGIR_VERSION
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Special_configurations_and_troubleshooting">3.4. Special configurations and troubleshooting</h2>

<p>If the upgrade fails, try running it again with the <code>--debug</code> flag:</p>

<pre><code>cd $OLD_AEGIR_DIR
drush hostmaster-migrate aegir.example.com $HOME/hostmaster-$AEGIR_VERSION --debug
</code></pre>

<p>If you have customized your Aegir installation and are maintaining your own makefile, you can use the <code>--makefile</code> flag so the platform is created with another makefile than the default. Be warned that this may create problems if the makefile doesn't include the right Aegir modules.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Upgrading_to_AEgir_2.x">4. Upgrading to AEgir 2.x</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrading_drush-1">4.1. Upgrading drush</h2>

<p>Install Drush 6.x per the directions given at the <a href="https://github.com/drush-ops/drush">Drush repository</a>.  The maintainers have deprecated the PEAR installation procedure and are encouraging everyone to install Drush via the Composer dependency management tool.</p>

<p>You should also remove your copy of <code>drush_make</code> from <code>$HOME/.drush</code>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrading_the_2.x_backend">4.2. Upgrading the 2.x backend</h2>

<p>Upgrading the backend is as simple as replacing your copy of Drush &amp; Provision with the new versions if available. Keep a copy of the old Provision and Drush in case something goes wrong in the frontend.</p>

<pre><code>drush dl --destination=/var/aegir/.drush provision-6.x-2.0
</code></pre>

<p>Drush 5+ has a commandfile cache which you need to clear before installing Aegir:</p>

<pre><code>drush cache-clear drush
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrading_the_2.x_frontend">4.3. Upgrading the 2.x frontend</h2>

<p>Before upgrading, we set a few key variables to make the process easier. You <strong>must</strong> replace the arguments those variables to match your configuration. This means replacing <code>$AEGIR_DOMAIN</code> by the URL of your Aegir install, <code>$AEGIR_VERSION</code> with the version number of the Aegir you are trying to install, and also <code>$OLD_AEGIR_DIR</code> with the path to the previous directory where Aegir was installed.</p>

<p>The directory passed to <code>hostmaster-migrate</code> must be an absolute path to where you want the new release to be stored.</p>

<pre><code>OLD_AEGIR_DIR=/var/aegir/hostmaster-6.x-1.11
AEGIR_VERSION=6.x-2.0
AEGIR_DOMAIN=aegir.example.com
</code></pre>

<p>To upgrade your frontend, run the following commands, replacing the variables as described below:</p>

<pre><code>cd $OLD_AEGIR_DIR
drush hostmaster-migrate $AEGIR_DOMAIN $HOME/hostmaster-$AEGIR_VERSION
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Special_configurations_and_troubleshooting-2">4.4. Special configurations and troubleshooting</h2>

<p>Read the <a href="../../../../../upgrading/path/index.html">upgrade path notes again</a>, you <em>will</em> have missed something.</p>

<p>If the upgrade fails, try running it again with the <code>--debug</code> flag:</p>

<pre><code>cd $OLD_AEGIR_DIR
drush hostmaster-migrate aegir.example.com $HOME/hostmaster-$AEGIR_VERSION --debug
</code></pre>

<p>If you have customized your Aegir installation and are maintaining your own makefile, you can use the <code>--makefile</code> flag so the platform is created with another makefile than the default. Be warned that this may create problems if the makefile doesn't include the right Aegir modules.</p>

<p>If the update fails due to a bug in module Hosting, it will ask you to run "drush hostmaster-resume help".  That command does not exist.  Try this one instead.</p>

<pre><code>drush --debug @hostmaster hostmaster-resume /var/aegir/hostmaster-6.x-1.11 /var/aegir/hostmaster-6.x-2.0
</code></pre><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-73.html?destination=node%2F429%23comment-form">Login</a> or <a href="../../../../../user/register/index-73.html?destination=node%2F429%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-73.html?destination=node%2F429%23comment-form">Login</a> or <a href="../../../../../user/register/index-73.html?destination=node%2F429%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-432" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../upgrading/debian/index.html">Automatic upgrades with Debian packages</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_23 first"><a href="../../../../../taxonomy/term/23/index.html" rel="tag" title="">Debian</a></li>
<li class="taxonomy_term_2"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_22 last"><a href="../../../../../taxonomy/term/22/index.html" rel="tag" title="">upgrade</a></li>
</ul></div><script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc17">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Regular_update_process"><span class="toc-number">1. </span>Regular update process</a></li>
	<li class="toc-level-1"><a href="#Upgrading_from_non-Debian_installs"><span class="toc-number">2. </span>Upgrading from non-Debian installs</a></li>
	<li class="toc-level-1"><a href="#Custom_distributions"><span class="toc-number">3. </span>Custom distributions</a>
<ol>
	<li class="toc-level-2"><a href="#Keeping_custom_distributions_up_to_date"><span class="toc-number">3.1. </span>Keeping custom distributions up to date</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Rolling_back_the_upgrade"><span class="toc-number">4. </span>Rolling back the upgrade</a></li>
	<li class="toc-level-1"><a href="#Recovering_a_Failed_Upgrade"><span class="toc-number">5. </span>Recovering a Failed Upgrade</a></li>
</ol>
</div>
</div>

<h2 id="Regular_update_process">1. Regular update process</h2>

<p>Make sure you have the Aegir repository in your sources.list, as per the <a href="../../../../../installing/debian/index.html#Adding_the_project_repositories">installation docs</a>.</p>

<p>If you are upgrading from a Debian installation whereby you used the koumbit.org repositories, you should change this entry in your sources.list to be debian.aegirproject.org as per the instructions linked to above, and run apt-get update to refresh.</p>

<p>If you want to upgrade all packages in one shot, use:</p>

<pre><code>apt-get update
apt-get install aegir
</code></pre>

<p>Note that you can upgrade Aegir in steps. Upgrading your backend to the Debian package should be as simple as running:</p>

<pre><code>apt-get install aegir-provision
</code></pre>

<p>Upgrading the frontend to the Debian package works identically:</p>

<pre><code>apt-get install aegir-hostmaster
</code></pre>

<p>As during install, you can use the DEBUG variable to run Drush in debugging mode:</p>

<pre><code>env DEBUG=yes apt-get install aegir-hostmaster
</code></pre>

<p><em>Note: the DEBUG flag is deprecated. In 1.x releases, it is accepted, but in 2.x it won't. You should use DPKG_DEBUG instead, it is usable starting from 1.1-4.</em></p>

<p><strong>2.x note</strong>: to upgrade to 2.x, use: <code>apt-get install aegir2</code>.</p>

<p><strong>Note on contrib modules</strong>: some Aegir-specific <a href="../../../../../contrib/index.html">contrib modules</a> may have been installed on your Aegir deployment. This may fail if you are doing a major upgrade. In this case, you will probably want to disable those contrib modules. Look for directories in <code>~aegir/.drush</code> or <code>/usr/share/drush/commands</code> or other components of the drush commandfiles search path, and move them out of the way. After the upgrade, download the new versions of the modules that are compatible with the new Aegir release.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Upgrading_from_non-Debian_installs">2. Upgrading from non-Debian installs</h2>

<p>The Debian package supports migrating from existing installs. You will need to move /var/aegir/.drush/provision out of the way before going ahead:</p>

<pre><code>tar cfz /var/aegir/backups/provision.tgz /var/aegir/.drush/provision
rm -rf /var/aegir/.drush/provision
</code></pre>

<p>You'll also need to go through steps 1 through 3 of <a href="../../../../../installing/debian/index.html#Adding_the_Koumbit_repositories">Automatic install on Debian</a>.</p>

<p>Then just install the package as if you were installing from scratch.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Custom_distributions">3. Custom distributions</h2>

<p>If you have your own makefile, you can go ahead with the above process, but change the makefile to the one you want:</p>

<pre><code>echo debconf aegir/makefile string /var/aegir/makefiles/aegir/aegir-koumbit.make | debconf-set-selections
apt-get install aegir
</code></pre>

<p>Usually no questions are asked when upgrading - this allows you to specify the makefile path for your custom distribution of Aegir, even if you're upgrading. It's also how you can switch distributions.</p>

<p>An example aegir-koumbit.make file could look like:</p>

<p><div class="codeblock"><code>core = 6.x<br />api = 2<br /><br />includes[aegir] = &quot;/usr/share/drush/commands/provision/aegir.make&quot;<br /><br />projects[] = module_filter</code></div></p>

<p>Note that for this to work, you will need the patch from <a href="http://drupal.org/node/1118616">this issue</a>, allowing drush_make to reference absolute system paths.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Keeping_custom_distributions_up_to_date">3.1. Keeping custom distributions up to date</h3>

<p>This section describes how to upgrade the code for custom distributions in between debian package upgrades. Here, we assume that Aegir is already installed through the debian package.</p>

<ol>
<li>Create a new Aegir makefile, or update the custom Aegir makefile. (You can use the makefile in drupal.org/project/provision as a starting point.)</li>
<li>Add modules/features/themes/libraries/whatever to the makefile. Ex:
<div class="codeblock"><code>&nbsp;&nbsp;&nbsp; projects[] = token<br />&nbsp;&nbsp;&nbsp; projects[] = views</code></div></li>
<li>Follow the manual upgrade path:

<ul>
<li>drush @hostmaster hostmaster-migrate URL /path/to/platform --makefile='/path/to/makefile'</li>
<li>Hope it's all green (no errors). If errors, fix makefile.</li>
<li>A new platform should exist, the new site should be in there, verifying. If the task is not running, check that hosting-queue-runner is running. If it's not, restart it using '/etc/init.d/hosting-queue-runner force-reload'. (Since hostmaster changed location, it is normal for hosting-queue-runner to crash at this point.)</li>
<li>When the debian package is upgraded, it should create a new hostmaster platform automatically. (You can test this with dpkg --configure.)</li>
</ul></li>
</ol>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Rolling_back_the_upgrade">4. Rolling back the upgrade</h2>

<p>If something went wrong with the upgrade, you can rollback by deleting the hostmaster site and redeploying on the older platform:</p>

<pre><code>drush @hostmaster provision-delete
vi ~/.drush/hostmaster.alias.drushrc.php
</code></pre>

<p>...And edit the alias to make the following changes:</p>

<pre><code>1. change the platform to point to the older platform alias
2. change the platform root path
3. change the site path
</code></pre>

<p>During the upgrade, a backup was done and you need to find which backup file it was in the backups directory. Use this backup to redeploy the older platform:</p>

<pre><code>drush @hostmaster provision-deploy ~/backups/hostmaster.date.tgz
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Recovering_a_Failed_Upgrade">5. Recovering a Failed Upgrade</h2>

<p>When using the Regular Update Process and you encounter an error it leaves the debian package in a broken state.</p>

<p>First you need to figure out why it failed.  For example is there a permission problem?<br />
Once you determined the issue correct it and clean up the environment.  It could be necessary to remove the new hostmaster platform.  It is up to you to determine what state aegir is in.</p>

<p>Next you need to fix the broken package by running the fix-broken parameter:</p>

<pre><code>apt-get install -f 
</code></pre>

<p>This tells the debian package system to start through the process again.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-311.html?destination=node%2F432%23comment-form">Login</a> or <a href="../../../../../user/register/index-311.html?destination=node%2F432%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../432/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-431" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../upgrading/script/index.html">Automatic upgrades with upgrade.sh script</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This page describes the upgrade script in the Provision repository that tries to  automate much of the upgrade process.</p>

<p><strong>NOTE:</strong> <em>At this time neither the Aegir 1.1 nor the Aegir 2.0 upgrade scripts are working for all setups.  We recommend you use the <a href="../../../../../upgrading/manual/index.html">Manual upgrades</a> instead.</em></p>

<p>It is imperative that you read the <a href="../../../../../upgrading/path/index.html">version-specific upgrade notes</a> before attempting to run the upgrade.sh script, as the script will assume you have your system set up appropriately to handle the upgrade process.</p>

<p>You can download the upgrade.sh script for Aegir 2.4 with the following command:</p>

<pre><code>wget -O upgrade.sh 'http://drupalcode.org/project/provision.git/blob_plain/refs/tags/6.x-2.4:/upgrade.sh.txt'
</code></pre>

<p>or for AEgir 3.0 with the following command:</p>

<pre><code>wget -O upgrade.sh 'http://drupalcode.org/project/provision.git/blob_plain/refs/tags/7.x-3.0:/upgrade.sh.txt'
</code></pre>

<p>Make sure you download it to somewhere that the aegir user can access in order to execute it.</p>

<p>You may need to edit the script to set any variables that are different from the defaults, for example to upgrade to a different Aegir version.</p>

<p>To do the upgrade, just run the script:</p>

<pre><code>su -s /bin/sh aegir -c "sh upgrade.sh"
</code></pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-289.html?destination=node%2F431%23comment-form">Login</a> or <a href="../../../../../user/register/index-289.html?destination=node%2F431%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../431/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-552" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../upgrading/path/index.html"> Version-specific &amp; upgrade path information</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc18">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#General_upgrade_path_recommendations"><span class="toc-number">1. </span>General upgrade path recommendations</a></li>
	<li class="toc-level-1"><a href="#Changes_in_the_2.0_release"><span class="toc-number">2. </span>Changes in the 2.0 release</a>
<ol>
	<li class="toc-level-2"><a href="#hosting-queue-runner_renamed_hosting-queued"><span class="toc-number">2.1. </span>hosting-queue-runner renamed hosting-queued</a></li>
	<li class="toc-level-2"><a href="#queue_daemon_enabled_by_default"><span class="toc-number">2.2. </span>queue daemon enabled by default</a></li>
	<li class="toc-level-2"><a href="#hosting_platform_pathauto_module_bundled_with_Aegir"><span class="toc-number">2.3. </span>hosting_platform_pathauto module bundled with Aegir</a></li>
	<li class="toc-level-2"><a href="#hosting-task_--force"><span class="toc-number">2.4. </span>hosting-task --force</a></li>
	<li class="toc-level-2"><a href="#Deprecated_functions_removed"><span class="toc-number">2.5. </span>Deprecated functions removed</a></li>
	<li class="toc-level-2"><a href="#New_Provision_class_naming_convention"><span class="toc-number">2.6. </span>New Provision class naming convention</a></li>
	<li class="toc-level-2"><a href="#Client_node_type_changes"><span class="toc-number">2.7. </span>Client node type changes</a></li>
	<li class="toc-level-2"><a href="#SSL_and_IP_allocation_refactoring_changes"><span class="toc-number">2.8. </span>SSL and IP allocation refactoring changes</a>
<ol>
	<li class="toc-level-3"><a href="#Backend"><span class="toc-number">2.8.1. </span>Backend</a></li>
	<li class="toc-level-3"><a href="#Frontend"><span class="toc-number">2.8.2. </span>Frontend</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#Debian_package_name_changed"><span class="toc-number">2.9. </span>Debian package name changed</a></li>
	<li class="toc-level-2"><a href="#Platform_drushrc.php_moved"><span class="toc-number">2.10. </span>Platform drushrc.php moved</a></li>
	<li class="toc-level-2"><a href="#Class_auto-loading"><span class="toc-number">2.11. </span>Class auto-loading</a></li>
	<li class="toc-level-2"><a href="#Other_database_changes"><span class="toc-number">2.12. </span>Other database changes</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Changes_in_the_1.0_release"><span class="toc-number">3. </span>Changes in the 1.0 release</a>
<ol>
	<li class="toc-level-2"><a href="#Git_dependency"><span class="toc-number">3.1. </span>Git dependency</a></li>
	<li class="toc-level-2"><a href="#DNS_Configuration"><span class="toc-number">3.2. </span>DNS Configuration</a></li>
	<li class="toc-level-2"><a href="#Unzip_dependency"><span class="toc-number">3.3. </span>Unzip dependency</a></li>
	<li class="toc-level-2"><a href="#Database_configuration"><span class="toc-number">3.4. </span>Database configuration</a></li>
	<li class="toc-level-2"><a href="#Apache_configuration"><span class="toc-number">3.5. </span>Apache configuration</a></li>
</ol>
</li>
</ol>
</div>
</div>

<h1 id="General_upgrade_path_recommendations">1. General upgrade path recommendations</h1>

<p>In general, you shouldn't skip major releases. That is, if you are running 0.3, you should upgrade to 1.0 or 1.1, not 2.0. Upgrades within a stable branch (1.0 to 1.1, 2.0 to 2.1) are fully supported, and you can skip minor versions (1.0 to 1.2 should work fine), but you should always upgrade to the latest stable release if you are coming from a different release branch.</p>

<p>The rest of this page documents what version-specific changes happened that you need to make manual modifications to. If you are running the Debian packages, you probably don't need to configure anything here.</p>

<p>The <a href="../../../../../upgrading/index.html">upgrade process</a> should make this clear, but keep in mind that you need to upgrade the backend (drush, provision) before the frontend (drupal, hostmaster profile, etc).</p>

<p>Provision/Drush <strong>contrib</strong> modules might require additional attention. As there is no version checking, the safest method is probably to move the module out of your .drush folder and later add the version compatible with the new Aegir version.</p>

<p>Hosting/Drupal <strong>contrib</strong> modules should also be handled carefully. If these were installed into the hostmaster site's directory, then they should be moved automatically to the new hostmaster platform during the upgrade. On the other hand, if they were installed on the platform, you'll need to provide the hostmaster-migrate or Debian package with a custom makefile. The default makefile in Provision (aegir.make) can be used as a model for this.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Changes_in_the_2.0_release">2. Changes in the 2.0 release</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="hosting-queue-runner_renamed_hosting-queued">2.1. hosting-queue-runner renamed hosting-queued</h2>

<p>The popular module <code>hosting-queue-runner</code> has been merged in the 2.0 release. In the process, it has been renamed to the more appropriate <code>hosting-queued</code>. The init script is also now installed directly with the Debian package, and started on install or upgrade.</p>

<p>You will, however, need to manually enable to module for the daemon to work (still):</p>

<pre><code>drush @hostmaster en hosting_queued
</code></pre>

<p>Also, if you are migrating from an install using <code>hosting-queue-runner</code>, you will need to remove the old module and startup script. Enabling <code>hosting-queued</code> will already have disabled and uninstalled the module from Drupal, but you need to cleanup your filesystem:</p>

<pre><code>rm /etc/init.d/hosting-queue-runner
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="queue_daemon_enabled_by_default">2.2. queue daemon enabled by default</h2>

<p>The above queue daemon is now enabled by default by the Debian package, and is properly restarted on upgrades. It can be disabled after install if necessary using the following comamnds:</p>

<pre><code>service hosting-queued stop
su aegir -c "drush @hostmaster pm-disable hosting_queued"
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="hosting_platform_pathauto_module_bundled_with_Aegir">2.3. hosting_platform_pathauto module bundled with Aegir</h2>

<p>The popular module <code>hosting_platform_pathauto</code> has been bundled in the 2.0 release. 
If you installed it module manually then now is probably the time to remove your copy.
Aegir 2.0-alpha1 comes bundled with hosting_platform_pathauto-2.0-beta1.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="hosting-task_--force">2.4. hosting-task --force</h2>

<p>You used to be able to run <code>hosting-task &lt;nid&gt;</code> to re-run a task by its node ID. Because hosting-task now checks if the task is really queued, this can't be used to retry existing tasks directly, unless you use the <code>--force</code> argument. So this:</p>

<p><div class="codeblock"><code>drush @hostmaster hosting-task 1234</code></div></p>

<p>becomes:</p>

<p><div class="codeblock"><code>drush @hostmaster hosting-task --force 1234</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Deprecated_functions_removed">2.5. Deprecated functions removed</h2>

<p>If you are using any of those functions in your custom code, lookup in the 1.x documentation to see the replacement functions, as they have been removed from 2.x:</p>

<ul>
<li>hosting_alias_count_sites() (same as !hosting_alias_allow_domain())</li>
<li>hosting_site_exists() (same as !hosting_alias_allow_domain())</li>
<li>hosting_get_client_by_email() (use hosting_get_client() instead)</li>
<li>hosting_import_client() dropped the second argument (organization)</li>
<li>hosting_task_list_embedded() (use hosting_task_list() or hosting_task_list_table())</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="New_Provision_class_naming_convention">2.6. New Provision class naming convention</h2>

<p>Provision classes used to start with provisionConfig_ or provisionService_, but these are now Provision_Config_ and Provision_Service_ respectively.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Client_node_type_changes">2.7. Client node type changes</h2>

<ul>
<li>the email field was removed from the client, now you need a user associated with the client. this was already the case in 1.x but the existing field wasn't touched.</li>
<li>the client_email field was removed from the site object</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="SSL_and_IP_allocation_refactoring_changes">2.8. SSL and IP allocation refactoring changes</h2>

<p>The <a href="https://drupal.org/node/1126640">SSL IP allocation refactoring</a> has changed a good few things in the API and the way SSL certificates are managed.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Backend">2.8.1. Backend</h3>

<p>The following functions are gone from the backend:</p>

<ul>
<li><a href="http://api.aegirproject.org/api/Provision/http--http.ssl.inc/function/provisionService_http_ssl%3A%3Aassign_certificate_ip/6.x-1.x">provisionService_http_ssl::assign_certificate_ip</a></li>
<li><a href="http://api.aegirproject.org/api/Provision/http--http.ssl.inc/function/provisionService_http_ssl%3A%3Aget_ip_certificate/6.x-1.x">Provision_Service_http_ssl::get_ip_certificate</a> .</li>
<li><a href="http://api.aegirproject.org/api/Provision/http--http.ssl.inc/function/provisionService_http_ssl%3A%3Afree_certificate_ip/6.x-1.x">Provision_Service_http_ssl::free_certificate_ip</a></li>
<li>Provision_Service_http_ssl::clear_certs()</li>
</ul>

<p>Certificates are not tracked from the backend anymore, other than to make sure that we delete a certificate when it's not used anymore. So we still use *.receipt files, but just to mark a site to SSL certificate association, not the IP allocation. The SSL directory in <code>~/config/server_foo/ssl.d/uri/</code> is removed when no site use that directory anymore.</p>

<p>The backend now expects the frontend to send an <code>ip_address</code> field and stopped sending a <code>site_ip_addresses</code> to the frontend.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Frontend">2.8.2. Frontend</h3>

<p>The <code>hosting_ip_addresses</code> table changes. A unique key has been added and it is now only for servers. It is used by the new hosting_ssl_cert_ips table to map those server IP addresses to certificates.</p>

<p>A new field for the IP (ip_address) is sent from the frontend during site install/verify tasks. The field is not present in non-ssl sites. It is the non-resolved IP address of the server assigned to the SSL certificate and must be used by the backend to write the vhost.</p>

<p>SSL certificates are removed from the frontend when sites using it are deleted.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Debian_package_name_changed">2.9. Debian package name changed</h2>

<p>To allow both packages to coexist in the same Debian archive, the name of the packages of the 2.x series have changed.</p>

<ul>
<li><code>aegir -&gt; aegir2</code></li>
<li><code>aegir-provision -&gt; aegir2-provision</code></li>
<li><code>aegir-hostmaster -&gt; aegir2-hostmaster</code></li>
<li><code>aegir-cluster-slave -&gt; aegir2-cluster-slave</code></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Platform_drushrc.php_moved">2.10. Platform drushrc.php moved</h2>

<p>From Drush 5 documentation:</p>

<pre><code>Drush 5 no longer looks for aliases, configs or command files in the Drupal
root folder, so if you previously used drushrc.php files in the Drupal root
you will need to move the file to sites/all/drush/drushrc.php.
</code></pre>

<p>Since Aegir 2 requires Drush 5 (or later), Provision now follows this standard, and places a platform's drushrc.php in sites/all/drush/drushrc.php.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Class_auto-loading">2.11. Class auto-loading</h2>

<p>Provision has been refactored to use class autoloading. This simplifies use of classes, as it obviates the need to explicitly include the files in which the class and it's parent classes are defined. In addition, it standardizes the placement of class definitions within a hierarchical file-system structure and will make name-spacing simpler if/when we begin to adopt Symfony components.</p>

<p>More info in the manual under <a href='../../../../../content/contrib/class-auto-loading/index.html'>Extending Aegir - Class auto-loading</a></p>

<p>This may also affect certain contrib extensions that used to have to reside in the provision directory itself. These extensions should probably be removed prior to the upgrade, and re-installed afterwards with an Aegir2-compatible version.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Other_database_changes">2.12. Other database changes</h2>

<p>The <code>release_id</code> column was dropped. This column wasn't used anywhere in the code and was present only in some installs, see <a href="https://drupal.org/node/1882708">issue #1882708</a> for details.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Changes_in_the_1.0_release">3. Changes in the 1.0 release</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Git_dependency">3.1. Git dependency</h2>

<p>If you intend on upgrading your system to the bleeding edge version of the code from our git repositories, you will need the git program installed.  On Debian, this means:</p>

<pre><code>apt-get install git-core
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="DNS_Configuration">3.2. DNS Configuration</h2>

<p>Aegir requires that the hostname returned by the <code>hostname</code> and <code>uname -n</code>
shell commands, resolves to the IP address for this server.</p>

<p>Shell commands as root:</p>

<pre><code>AEGIR_HOST=`uname -n`
resolveip $AEGIR_HOST
</code></pre>

<p>If the command returns your IP address, you are all set. If it returns
an error you will need to edit your <code>/etc/hosts</code> file.</p>

<p>(Mac OSX  notes: if you are running on OS X you will not likely have a resolveip  binary.  Just substitute 
  <code>ping $AEGIR_HOST</code>
).</p>

<p>First line of this file looks like:</p>

<p>127.0.0.1  localhost</p>

<p>Simply add all domains you want to this line. e.g:</p>

<p>127.0.0.1  localhost $AEGIR_HOST $AEGIR_DOMAIN other1 other2</p>

<p>To be clear you cannot put $AEGIR_HOST $AEGIR_DOMAIN  in your  hosts file.  Put in whatever  uname -n  returns  for $AEGIR_HOST and what ever  domain you want to use  f or  $AEGIR_DOMAIN  (real  domain or faked in hosts file).   In OS X     uname -n will return whatever you put in  System  Preferences -&gt; Sharing -&gt; Computer Name.  I added that value  (iMac 27  for me) to /etc/hosts and my faked aegir  domain  as follows:</p>

<p><code>127.0.0.1&nbsp; localhost&nbsp; iMac27&nbsp; aegir.local </code></p>

<p>If you only intend to use Aegir on a single server, it is acceptable for
the resolved IP address to be the '127.0.0.1' loopback address.</p>

<p>If you intend to manage multiple servers using Aegir, you will need to
make sure that the IP address is the public IP of this server.</p>

<p>Finally, set an $AEGIR_IP environment variable for use in the Database
configuration step below.</p>

<p>Shell commands as root::
    AEGIR_IP=<code>resolveip $AEGIR_HOST | awk {'print $6'}</code></p>

<p>(If running  OS X  or are otherwise missing  resolveip   and you just want to use Aegir on your computer use  you can do this:
AEGIR_IP=127.0.0.1</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Unzip_dependency">3.3. Unzip dependency</h2>

<p>As of the 0.4-alpha3 release, 'unzip' is a required dependency on your server
in order to successfully extract the jquery.ui library that is part of some UI
improvements. On Debian, this means:</p>

<p>Shell commands::</p>

<p>apt-get install unzip</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Database_configuration">3.4. Database configuration</h2>

<p>To make sure that the Aegir backend, and all the possible web servers can
reach your database server, you need to configure mysql to listen on all
the public IP addresses available to it.</p>

<p>/etc/mysql/my.cnf configuration line to comment out::
    bind-address    = 127.0.0.1</p>

<p>Now you need to restart mysql, to clear any caches.</p>

<p>Shell command as root::
    /etc/init.d/mysql restart</p>

<p>Because you have already installed Aegir when it was using the generic grants,
you will need to create new grants using the public IP address and hostname
of this server.</p>

<p>Shell command ::
    mysql -uroot -p mysql</p>

<p>You need to generate the following grants using the hostname returned by the
<code>uname -n</code> command, and the IP address that the <code>resolveip</code> command returns
for that hostname.</p>

<p>You need to re-use the pasword you had for the account before.</p>

<p>Shell commands::</p>

<pre><code>mysql -u root -p -e "GRANT ALL ON *.* to 'aegir_root'@'$AEGIR_HOST' IDENTIFIED BY 'xxxx' WITH GRANT OPTION;"
mysql -u root -p -e "GRANT ALL ON *.* to 'aegir_root'@'$AEGIR_IP' IDENTIFIED BY 'xxxx' WITH GRANT OPTION;"
</code></pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Apache_configuration">3.5. Apache configuration</h2>

<p>This release introduces multi-server support and required reorganizing
the Apache configuration files in ~aegir/config. Instead of having all
files in config/vhost.d, they are now split between vhost.d, platform.d
and a single apache.conf. The vhost.d directory is for virtual hosts,
platform.d is for platform-specific configuration and apache.conf is the
server-wide configuration file.</p>

<p>You will need to change the line you added to either the httpd.conf file 
or /etc/apache2/conf.d/aegir file during installation.</p>

<p>Open your httpd.conf file and modify::</p>

<pre><code>Include /var/aegir/config/vhost.d
</code></pre>

<p>To read ::</p>

<pre><code>Include /var/aegir/config/apache.conf
</code></pre>

<p>If you are upgrading from 0.4 releases between alpha8 and (including) alpha14,
you will need to rename your conf.d directory to post.d in Apache and pre.d in
Nginx. Example, in Apache::</p>

<p>mv /var/aegir/config/server_master/apache/{conf.d,post.d}</p>

<p>Now log into Aegir, and verify the hostmaster platform. This will generate
the correct apache.conf file and restart Apache.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-312.html?destination=node%2F552%23comment-form">Login</a> or <a href="../../../../../user/register/index-312.html?destination=node%2F552%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../552/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-12" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../uninstalling/index.html">Uninstalling Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>There is no formal method for uninstalling Aegir, but there is also no real mystery either since the system tries to keep itself together in one location, typically /var/aegir.</p>

<p>Below are the steps to completely remove all traces of Aegir from your server. We also include to leave Aegir intact, but destroy its data, attempting to reset to a almost post-install setup.</p>

<p>Ideally, you would delete all sites and all platforms from the system first. That would take care of deleting all databases and users. But this can take some time and is annoying, so we provide instructions on how to destroy everything.</p>

<h1>WARNING</h1>

<p>Obviously if you have any sites and platforms currently managed by Aegir, you would want to move them out of the /var/aegir area before you delete it! Ensure you have set up your sites and platforms elsewhere, with Apache vhost files etc in their typical locations, or at least out of harm's way before attempting this.</p>

<p><strong>WARNING: Performing these steps will remove Aegir from your server and may result in loss of data. Use with caution.</strong></p>

<p>Run these commands as a privileged user (such as root). We assume your Aegir installation resides in /var/aegir.</p>

<h1>Backup</h1>

<p>You probably want to backup everything before trashing it.</p>

<p>Backup all you need to keep from the /var/aegir/ directory.</p>

<p>Backup your database server, we'll be also destroying that.</p>

<h1>Uninstall script</h1>

<p>Aegir 2.x comes with a <code>hostmaster-uninstall</code> script that allows you to automate good chunks of the steps below.</p>

<h1>Destroying the data</h1>

<p>Aegir manages three types of data:</p>

<ul>
<li>configuration files - yes, we consider those as data</li>
<li>site and platform files</li>
<li>site databases</li>
</ul>

<h2>Trashing configuration files</h2>

<p>This step is optional if you are going to remove everything anyways.</p>

<pre>
rm /var/aegir/.drush/*alias.drushrc.php
rm -r /var/aegir/config/*
</pre>

<h2>Trashing site and platform files</h2>

<p>At this point, you could still probably recover by verifying the platforms, which would recreate config files. At this point we start really destroying data.</p>

<pre>
rm -r /var/aegir/platforms/*
rm -r /var/aegir/hostmaster-*
</pre>

<h2>Drop the databases and db users</h2>

<p>There are no generic instructions for this, since every system differs. Essentially you can perform this within a MySQL shell</p>

<p><code>mysql -u root -p</code></p>

<p>Use the <code>DROP DATABASE $databasename;</code> syntax to drop databases. and <code>DROP USER $user;</code> to delete users, example:</p>

<pre><code>DROP DATABASE aegirexamplecom;
DROP USER aegirexamplecom@localhost;
</code></pre>

<p>This removes the Aegir user, assuming you have not created any site. If you did, you may want to cleanup those sites if you are going to delete them anyways. To see a list of GRANTs that Aegir has made for your database users, you can use a command like the following:</p>

<p><div class="codeblock"><code>USE mysql;<br />SELECT User,Host FROM user WHERE Host=&#039;localhost&#039; AND User &lt;&gt; &#039;root&#039; AND User &lt;&gt; &#039;debian-sys-maint&#039;;<br />SELECT Host,Db,User FROM db WHERE User &lt;&gt; &#039;&#039;;</code></div></p>

<p>In Debian, the following will remove all non-system users (which may include non-aegir users!!!).</p>

<p><strong>WARNING: DO NOT RUN THIS BEFORE CHECKING WHAT WILL BE DELETE BY RUNNING THE SELECT ABOVE!! THIS WILL DELETE ALL USERS FROM YOUR MYSQL DATABASE!!!</strong></p>

<p><div class="codeblock"><code>DELETE FROM db WHERE User &lt;&gt; &#039;&#039;;<br />DELETE FROM user WHERE Host=&#039;localhost&#039; AND User &lt;&gt; &#039;root&#039; AND User &lt;&gt; &#039;debian-sys-maint&#039;;<br />FLUSH PRIVILEGES;</code></div></p>

<p>Then you will need to <code>DROP DATABASE</code> for every database.</p>

<p>Consult the <a href="http://dev.mysql.com/doc/refman/5.1/en/grant.html">GRANT</a> and <a href="http://dev.mysql.com/doc/refman/5.1/en/drop-user.html">DROP</a> documentation from MySQL for more information.</p>

<h2>Remove the aegir user's crontab</h2>

<p><code>crontab -r -u aegir</code></p>

<h1>Removing everything</h1>

<p>At this point, we have removed all data that Aegir manages and we would be ready to reinstall the frontend. If we want to remove all traces, however, there's more work to do.</p>

<h2>Remove /var/aegir</h2>

<p><code>rm -rf /var/aegir</code></p>

<h2>Delete the aegir user</h2>

<p><code>userdel aegir</code></p>

<p>This will also remove the user from the www-data group.</p>

<h2>Remove the user from sudoers</h2>

<p><code>visudo</code></p>

<p>Remove the line that looks something like</p>

<p><code>aegir ALL=NOPASSWD: /usr/sbin/apache2ctl</code></p>

<p>Save and exit the file.</p>

<h2>Delete the symlink/include from Apache</h2>

<p>Depending on your installation and OS this may vary.</p>

<p>Generally:</p>

<pre><code>rm /etc/apache2/conf.d/aegir.conf
</code></pre>

<p>If your Include statements were contained in a global system <code>httpd.conf</code> file or similar, you will need to remove these lines manually.</p>

<p>Restart Apache when you have completed this.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-74.html?destination=node%2F12%23comment-form">Login</a> or <a href="../../../../../user/register/index-74.html?destination=node%2F12%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-74.html?destination=node%2F12%23comment-form">Login</a> or <a href="../../../../../user/register/index-74.html?destination=node%2F12%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2753" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/administrator/extracting-drupal-site-aegir/index.html">Extracting a Drupal site from Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>You may occasionally want to take a Drupal site hosted on a server managed with Aegir and put it somewhere else. This is pretty easy, but not quite as simple as moving a normal Drupal site not managed by Aegir from one machine to another. In brief, you have to copy the site, delete the drushrc.php file, and replace settings.php with a copy of the default configuration file. More specifically:</p>

<ul>
<li>download the same copy of drupal core to the new server (and re-apply core patches, if any)</li>
<li>copy sites/all/ to the new server</li>
<li>copy the Aegir backup of your site to the new server and unzip in sites/yoursite.com/</li>
<li>create a database on the new server &amp; import the database backup</li>
<li>copy sites/community.aegirproject.org/default.settings.php to sites/yoursite.com/settings.php</li>
<li>D7: copy custom site aliases in sites/sites.php (if any) to the new server</li>
<li>D6: replicate site alias symlinks in sites/ (if any) on the new server</li>
<li>copy custom configuration in local.settings.php (if any) to settings.php</li>
<li>edit settings.php to add the database authentication details for the new server</li>
</ul>

<p>That's it!</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-75.html?destination=node%2F2753%23comment-form">Login</a> or <a href="../../../../../user/register/index-75.html?destination=node%2F2753%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-75.html?destination=node%2F2753%23comment-form">Login</a> or <a href="../../../../../user/register/index-75.html?destination=node%2F2753%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-950" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/administrator/troubleshooting-aegir/index.html">Troubleshooting Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Aegir is a complex system that depends on a number of components being properly integrated. This can obviously lead to difficulties on occasion. However, fear not! In all likelihood, any problem you can get yourself into has probably already been solved, and documented in this section. Just one of the benefits of using a popular open source system ;)</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-76.html?destination=node%2F950%23comment-form">Login</a> or <a href="../../../../../user/register/index-76.html?destination=node%2F950%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-76.html?destination=node%2F950%23comment-form">Login</a> or <a href="../../../../../user/register/index-76.html?destination=node%2F950%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-321" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../321/index.html">How to fix a stuck task</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>It is possible a task may run longer than expected and you suspect something has gone wrong. It is even possible the task may cause a server to become unresponsive. Restarting the server will not stop the task, although it may make the server become responsive again.</p>

<p>To stop a Task, find the related task node (install: mysite.com) in the content list: /admin/content/node/overview, and delete it. This will stop Aegir from trying to run the task.</p>

<p>In the case of a site install, it may also be necessary to also delete the node for the site itself. The site may have actually installed properly. Verify the affected platform and see if Aegir imports the site. If so, you may need to reset the password to gain access to the new site. If the site doesn't import in the verify, delete any files from the sites folder on the selected platform and either try again and/or research why the task may have failed.</p>

<p>It can also be very helpful to try running tasks from the command line with drush (the entire Aegir web frontend is basically a user-friendly interface to a series of drush commands). You can see which command is being run by looking at a task node in Aegir. For example, if you are having problems verifying a site, you could run: <br />
<code>drush @mysite.com provision-verify --debug</code></p>

<p>Another option is to run the hosting task itself within the hostmaster context, which will then invoke the drush command on the applicable site. You can find the task node ID in the web frontend (look at the URL generated by Aegir to create the popup box which shows the log). If the task ID was 1234, you would then run this from the command line:  <br />
<code>drush @hostmaster hosting-task 1234 --debug</code></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-77.html?destination=node%2F321%23comment-form">Login</a> or <a href="../../../../../user/register/index-77.html?destination=node%2F321%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-77.html?destination=node%2F321%23comment-form">Login</a> or <a href="../../../../../user/register/index-77.html?destination=node%2F321%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-751" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../debugging/index.html">Debugging Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Installation and configuration of Aegir has been greatly simplified with the release of .deb packages. However, for other operating systems, or for those installing manually, making a mistake during the installation or upgrade of Aegir or Drush is easy to do, and these tips identify some of the most common mistakes.</p>

<h3>The Aegir User</h3>

<ul>
<li>Make sure you have an aegir user (who we call the Aegir User) and that the Aegir User is properly configured on your server:

<ul>
<li><code>cat /etc/passwd</code> prints all users.  Find the line <code>aegir:x:1000:1000:,,,:/var/aegir:/bin/bash</code>.  <code>aegir</code> usually is the Aegir User.  Be cautious about using a different username, and <strong>do not</strong>use an existing user or a user that will have any other role on the server.  The Aegir User should only be used for Aegir activities.</li>
<li>Verify the Aegir install directory is the user's home.  Usually, the Aegir directory is <code>/var/aegir</code>.  Be cautious about installing Aegir in a different directory only because you are likely to get confused and nearly all the documentation assumes you have used <code>/var/aegir</code></li>
<li>Make sure that the node that defines your Aegir server (e.g., <code>www.example.com/node/2</code>) identifies the <code>Script User</code> as your Aegir User.  (You can find this node by clicking on the Servers menu tab and then clicking on the server URI shown in the list that appears of Aegir servers.)</li>
<li>All this is detailed in the install profile wizard</li>
</ul></li>
<li><strong>Do not run aegir as root!</strong> - It's an unsafe and unsupported configuration that is known to cause problems</li>
</ul>

<h3>Make Sure drush Is Installed Properly</h3>

<ul>
<li>Make sure that the node that defines your Aegir Server has the correct path to drush.

<ul>
<li>See <code>/var/aegir/drush/readme.txt</code> for install instructions</li>
</ul></li>
<li>Check your Drush setup:

<ul>
<li>Always run drush as your aegir user, and never as "root".</li>
<li>Make sure that the Provision module is in the <code>aegir/.drush/provision/</code> directory.</li>
<li>Make sure that the Hosting module is in <code>~aegir/hostmaster-0.x/profiles/hostmaster/modules/hosting</code> (substitute the platform <code>hostmaster-0.x</code> to match the directory on your system in which you have installed the Drupal code that is running your Aegir site)</li>
<li>Run "drush help" and make sure that "provision" commands appear.  "hosting" commands will not appear in the latest (after 2009/05/18) Drush versions, unless Drupal can be fully bootstrapped</li>
</ul></li>
</ul>

<h3>Apache</h3>

<ul>
<li>Make sure the Aegir User can restart Apache without a password and that the corresponding command is defined in your Aegir Server Node

<ul>
<li>As your Aegir User, run the command shown in the "Restart command" field in your Aegir Server Node to ensure that your Aegir User can restart Apache</li>
<li>On Ubuntu, it's <code>sudo /usr/sbin/apache2ctl graceful</code>.  The command should execute and return without asking for a password when run as the Aegir User</li>
</ul></li>
<li>Make sure Apache can parse its configuration 

<ul>
<li>On Ubuntu, <code>sudo apache2ctl configtest</code> should report "System Ok"</li>
</ul></li>
</ul>

<h3>Other Things</h3>

<ul>
<li>On a Linux system, check that /etc/sudoers is chmod 440 (i.e., read only for the file owner and group, which is usually root)</li>
<li>Attempt to run the cron tasks manually from the command line

<ul>
<li><code>php /var/aegir/drush/drush.php --root=/var/aegir/hostmaster-0.x --uri=http://youraegirsite.com hosting-tasks --debug</code></li>
</ul></li>
<li>Or you can retry a specific task form the command line

<ul>
<li><code>php /var/aegir/drush/drush.php --root=&#039;/var/aegir/hostmaster-0.4-alpha5&#039; --uri=&#039;youraegirsite.net&#039; hosting-task &lt;nid of the task&gt; --debug </code></li>
</ul></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-78.html?destination=node%2F751%23comment-form">Login</a> or <a href="../../../../../user/register/index-78.html?destination=node%2F751%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-78.html?destination=node%2F751%23comment-form">Login</a> or <a href="../../../../../user/register/index-78.html?destination=node%2F751%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-3065" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/content/administrator/troubleshooting-aegir/strict-warning-error/index.html">&quot;strict warning&quot; error</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_567 first"><a href="../../../../../category/keywords/non-static/index.html" rel="tag" title="">non-static</a></li>
<li class="taxonomy_term_566"><a href="../../../../../category/keywords/strict/index.html" rel="tag" title="">strict</a></li>
<li class="taxonomy_term_565"><a href="../../../../../category/keywords/strict-warning/index.html" rel="tag" title="">strict warning</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p><strong>Aegir 2.x returns the following error message</strong></p>

<p>strict warning: Non-static method view::load() should not be called statically in /var/aegir/hostmaster-6.x-2.1/profiles/hostmaster/modules/views/views.module on line 1113.</p>



<p><strong>Cause</strong></p>

<p>It's due to a conflict between Views 3.x and PHP 5.4. For example, your server uses PHP 5.4 or more recent. And you updated Drupal core for Aegir to Drupal 6.34 or more recent and this error message is showing on all Aegir pages.</p>



<p><strong>Solutions</strong></p>

<p>Option 1: Install "<a href="http://drupal.org/project/disable_messages">disable_messages</a>" module. And disable all messages related to:</p>

<blockquote>
<code>strict .*.</code>
</blockquote>

<p><a href="http://www.howtoeverything.net/linux/drupal/selectively-hide-strict-warning-errors-php-5.4-drupal-6.x-views">Read more here</a>, under <em>"How to hide only specific error messages to specific users"</em> section.</p>

<p>Option 2: Patch Views 3.x. Read more at <a href="https://www.drupal.org/node/780156" title="https://www.drupal.org/node/780156">https://www.drupal.org/node/780156</a> or <a href="https://www.drupal.org/node/893128#comment-4760978" title="https://www.drupal.org/node/893128#comment-4760978">https://www.drupal.org/node/893128#comment-4760978</a></p>

<p>Option 3: Turn off Strict warnings in your "php.ini" file. Read more at <a href="https://www.drupal.org/node/1833170#comment-6994142" title="https://www.drupal.org/node/1833170#comment-6994142">https://www.drupal.org/node/1833170#comment-6994142</a> or <a href="https://www.drupal.org/node/465332#comment-6533810" title="https://www.drupal.org/node/465332#comment-6533810">https://www.drupal.org/node/465332#comment-6533810</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-79.html?destination=node%2F3065%23comment-form">Login</a> or <a href="../../../../../user/register/index-79.html?destination=node%2F3065%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-79.html?destination=node%2F3065%23comment-form">Login</a> or <a href="../../../../../user/register/index-79.html?destination=node%2F3065%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-546" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../546/index.html">Community coordination guide</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This section of the manual aims to document common release practices and coordination within the community.</p>

<p>This includes:</p>

<ul>
<li><a href="../../../../32/index.html">The release process</a></li>
<li><a href="../../../../187/index.html">The release workflow</a></li>
<li>Roadmap planning (<a href="../../../../../roadmap/2/index.html">version 2.0</a> and <a href="../../../../../roadmap/3/index.html">version 3.0</a>)</li>
<li><a href="../../../../../scrums/index.html">Weekly scrums</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-80.html?destination=node%2F546%23comment-form">Login</a> or <a href="../../../../../user/register/index-80.html?destination=node%2F546%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-80.html?destination=node%2F546%23comment-form">Login</a> or <a href="../../../../../user/register/index-80.html?destination=node%2F546%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-32" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/release-process/index.html">Release process</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p><strong>This page is being moved to <a href="https://aegir.readthedocs.org/en/latest/community/release-process/" title="https://aegir.readthedocs.org/en/latest/community/release-process/">https://aegir.readthedocs.org/en/latest/community/release-process/</a> </strong></p>

<p>This page aims to document our release process. It documents the release cycle, but also the steps required to make a release.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc19">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#The_release_cycle"><span class="toc-number">1. </span>The release cycle</a></li>
	<li class="toc-level-1"><a href="#Steps_for_a_release"><span class="toc-number">2. </span>Steps for a release</a>
<ol>
	<li class="toc-level-2"><a href="#Make_sure_Jenkins_is_all_green"><span class="toc-number">2.1. </span>Make sure Jenkins is all green</a></li>
	<li class="toc-level-2"><a href="#Verify_that_drupal-org.make_specifies_up-to-date_versions"><span class="toc-number">2.2. </span>Verify that drupal-org.make specifies up-to-date versions</a></li>
	<li class="toc-level-2"><a href="#Generating_the_release_notes"><span class="toc-number">2.3. </span>Generating the release notes</a></li>
	<li class="toc-level-2"><a href="#Running_the_release.sh_script"><span class="toc-number">2.4. </span>Running the release.sh script</a>
<ol>
	<li class="toc-level-3"><a href="#Optional:_new_Eldir_release"><span class="toc-number">2.4.1. </span>Optional: new Eldir release</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#Test_the_manual_install_in_Jenkins"><span class="toc-number">2.5. </span>Test the manual install in Jenkins</a></li>
	<li class="toc-level-2"><a href="#Build_the_Debian_packages"><span class="toc-number">2.6. </span>Build the Debian packages</a></li>
	<li class="toc-level-2"><a href="#Test_the_upgrade_in_Jenkins"><span class="toc-number">2.7. </span>Test the upgrade in Jenkins</a></li>
	<li class="toc-level-2"><a href="#Creating_release_nodes_on_Drupal.org"><span class="toc-number">2.8. </span>Creating release nodes on Drupal.org</a></li>
	<li class="toc-level-2"><a href="#Build_the_release_in_Jenkins_again"><span class="toc-number">2.9. </span>Build the release in Jenkins again</a></li>
	<li class="toc-level-2"><a href="#Publish_the_Debian_packages"><span class="toc-number">2.10. </span>Publish the Debian packages</a></li>
	<li class="toc-level-2"><a href="#Publish_the_release_notes_widely"><span class="toc-number">2.11. </span>Publish the release notes widely</a></li>
</ol>
</li>
</ol>
</div>
</div>

<h1 id="The_release_cycle">1. The release cycle</h1>

<p>In general, each major Aegir release comprises a simultaneous release of all the modules that are part of the project. We generally go through several testing releases (alphas, betas &amp; RCs) before doing the first stable release on a branch.</p>

<ul>
<li>First an <strong>alpha</strong> is released to test new functionalities and to accomplish the goals decided in the <a href="../../../../35/index.html">Project Roadmap</a> for that major version. Example: <code>0.4-alpha1</code>, <a href="../../../../../0/index-4.html"><code>0.4-alpha15</code></a></li>
<li>When we have covered most of the functionalities outlined in the <a href="../../../../../roadmap/index.html">roadmap</a>, we push out <strong>beta releases</strong> until no more critical issues show up. This is generally considered a <em>soft feature freeze</em>. Example: <a href="../../../../../0/index-3.html"><code>0.4-beta1</code></a></li>
<li>Then we go into <em>full feature freeze</em> and release a <strong>first release candidate</strong> (RC). Then a stable release branch is created, and the development branch is kept opened for development for the next stable release. This is generally considered a <em>soft API freeze</em>. Release candidates are made as long as critical bugs are found. Example: <a href="../../../../../0/index.html"><code>0.4-rc1</code></a>, <a href="../../../../360/index.html">freeze announcement</a></li>
<li>Once the development branch has no known critical bugs, the <strong>stable release</strong> is announced. From there on only critical fixes (security, critical performance and critical bugfixes) are committed to the stable branch, and stable releases are published (without alpha/beta/RC) directly on the stable branch. The stable branch is in <strong>full API freeze</strong>. New features are generally committed to the development branch.</li>
</ul>

<p>See also <a href="../../../../../content/branch-and-tagging-conventions/index.html">the tag and branch naming convention</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Steps_for_a_release">2. Steps for a release</h1>

<p>For the specifics of release naming conventions and the cycle, see <a href="../../../../187/index.html">the branch naming convention</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Make_sure_Jenkins_is_all_green">2.1. Make sure Jenkins is all green</h2>

<p>Look into <a href="http://ci.aegirproject.org/">Jenkins</a> to see if all tasks have been performed without errors since the last commit. If there is an error, fix it before the release.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Verify_that_drupal-org.make_specifies_up-to-date_versions">2.2. Verify that drupal-org.make specifies up-to-date versions</h2>

<p>In the hostmaster project we maintain our own drupal-org.make file.
Check that e.g. the ctools version specified is not out-dated.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Generating_the_release_notes">2.3. Generating the release notes</h2>

<p>We build complete release notes for every release. Those are made up of a summary of the release, an outline of key changes, of known issues, install and upgrade instructions and a full list of bugfixes and new features.</p>

<p>Using <a href="https://www.drupal.org/project/grn">Git Release Notes for Drush</a></p>

<p><code>drush rn 7.x-3.0-alpha1 7.x-3.0-alpha2</code></p>

<p>The developers then proceed to format/edit the list of fixes as well as list other significant information/changes for this release. These notes end up becoming the Release Notes for the release, which are also entered in the <code>debian/changelog</code> file by the script below.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Running_the_release.sh_script">2.4. Running the release.sh script</h2>

<p>Each time we make a new release, we run a script called <code>release.sh</code> in provision.</p>

<p>This script should only be used by the core dev team when doing an official release. If you are not one of those people, you probably shouldn't be running this.</p>

<p>This script does all the 'hard' work in that it doesn't forget all the very many places to edit version numbers etc of relevant documentation and other scripts. This includes install.sh.txt and upgrade.sh.txt.</p>

<p><em>note from just after 7.x-3.0-beta1</em>: It's probably a good idea to disable the Jenkins jobs named 'D_aegir-debian*'. This could prevent later troubles in the 'Publish the Debian packages' section.</p>

<p>Paraphrasing from the script itself:</p>

<p><div class="codeblock"><code>The following operations will be done:<br /> 0. prompt you for a debian/changelog entry<br /> 1. change the makefile to download tarball<br /> 2. change the upgrade.sh.txt version<br /> 3. display the resulting diff<br /> 4. commit those changes to git<br /> 5. lay down the tag<br /> 6. revert the commit<br /> 7. (optionally) push those changes<br /><br />The operation can be aborted before step 7. Don&#039;t forget that as<br />long as changes are not pushed upstream, this can all be reverted (see<br />git-reset(1) and git-revert(1) ).</code></div></p>

<p>Next, we need to add the tag in hostmaster, and push it to the d.o repos. So in short, this sums up as:</p>

<p><div class="codeblock"><code>cd provision<br />sh release.sh 1.10<br />cd ../hostmaster<br />git tag 6.x-1.10<br />git push origin 6.x-1.10</code></div></p>

<p>Notice how we just provide the Aegir release number (<code>1.10</code>) to the release script, not the Drupal branch (<code>6.x</code>), which is hardcoded in the script to remove potential confusion.</p>

<p><strong>Special, for 2.x:</strong> While we wait for core support in drush (<a href="https://drupal.org/node/1991764">issue #1991764</a>) we need to manually modify the makefiles in hostmaster, drupal-org.make and hostmaster.make to point to the tags we lay down manually in hostmaster, hosting and provision (and maybe eldir). So this ends up being:</p>

<p><div class="codeblock"><code>cd provision<br />sh release.sh 2.0<br />cd ../hostmaster<br />git pull<br />git tag 6.x-2.0<br />git push origin 6.x-2.0<br />cd ../hosting<br />git pull<br />git tag 6.x-2.0<br />git push origin 6.x-2.0</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Optional:_new_Eldir_release">2.4.1. Optional: new Eldir release</h3>

<p>If we do a major release (say a point zero release), we may want to make a new release of the theme (<a href="https://drupal.org/project/eldir">Eldir</a>). This can also be performed if there enough new changes on the theme to warrant a new release on its own.</p>

<p>To do a new release of Eldir:</p>

<ol>
<li>tag and push the tag</li>
<li>update the version to fetch in hostmaster.make</li>
<li><a href="https://drupal.org/node/add/project-release/452774">create a release node</a> for Eldir</li>
</ol>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Test_the_manual_install_in_Jenkins">2.5. Test the manual install in Jenkins</h2>

<p>Before making a full release, test the release in Jenkins. To do so, start a build of the  launch the <a href="http://ci.aegirproject.org/job/S_aegir_6.x-1.x_install/">S_aegir_6.x-1.x_install job</a> (or <a href="http://ci.aegirproject.org/job/S_aegir_6.x-2.x_install/">S_aegir_6.x-2.x_install job</a> for 2.x) with the following parameters:</p>

<ul>
<li>the right release as the <code>AEGIR_VERSION</code> parameter</li>
<li>the <code>DRUSH_VERSION</code> to match what is required for this release. (Currently '4.5' for Aegir 1.x)</li>
</ul>

<p>If the build fails, delete the remote tags (using <code>git push origin :6.x-1.7</code>, for example), fix the bugs and start again.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Build_the_Debian_packages">2.6. Build the Debian packages</h2>

<p>Build the package and upload to <a href="http://debian.aegirproject.org/" title="http://debian.aegirproject.org/">http://debian.aegirproject.org/</a>. Jenkins can build and upload a Debian package for you with <a href="http://ci.aegirproject.org/job/S_aegir-debian-official/">the S_aegir-debian-official job</a>.</p>

<p>If you need to move the tags again, you will need to clear the testing archive using the <a href="http://ci.aegirproject.org/job/R clear repo/">R clear repo job</a>, with the testing argument.</p>

<p>You can also build and upload the package yourself as explained in these <a href="../../../../543/index.html">detailed instructions</a>. We first upload the package to the <code>testing</code> distribution, and it gets migrated down into <code>stable</code> after tests.</p>

<p><strong>Special, for 2.x</strong>: build the package manually, see <a href="../../../../543/index.html">detailed instructions</a>. It should be something like:</p>

<pre><code>./release.sh 2.0-rc5
git reset --hard 6.x-2.0-rc5
git-buildpackage <a href="mailto:-kanarcat@koumbit.org">-kanarcat@koumbit.org</a> --git-builder=debuild
dput aegir build-area/aegir2-provision_2.0~rc5_amd64.changes
</code></pre>

<p>See the <a href="../../../../543/index.html">detailed instructions</a> for the dput configuration.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Test_the_upgrade_in_Jenkins">2.7. Test the upgrade in Jenkins</h2>

<p>Once both of those tasks have executed successfully, you can test the upgrade of the Debian packages by running the following Jenkins job:</p>

<p><a href="http://ci.aegirproject.org/view/Upgrades/job/U aegir 6.x-1.x deb upgrade/" title="http://ci.aegirproject.org/view/Upgrades/job/U%20aegir%206.x-1.x%20deb%20upgrade/">http://ci.aegirproject.org/view/Upgrades/job/U%20aegir%206.x-1.x%20deb%2...</a></p>

<p>(Note that this test is currently non-functional)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Creating_release_nodes_on_Drupal.org">2.8. Creating release nodes on Drupal.org</h2>

<p>Once the tags are pushed and release notes published, we create a release node with an excerpt of (and a link to) the release notes so that tarballs are created and issue queue versions updated.</p>

<p>This needs to be done in the <a href="https://drupal.org/node/add/project-release/195997">hostmaster</a> and <a href="https://drupal.org/node/add/project-release/196005">provision</a> (and <a href="https://drupal.org/node/add/project-release/196008">hosting</a>  and (maybe) <a href="https://drupal.org/node/add/project-release/452774">eldir</a> for 2.x) projects on Drupal.org.</p>

<p>Note: this could be <a href="http://drupal.org/node/1050618">automated</a> with the right stuff on Drupal.org.</p>

<p><strong>Special, for 2.x</strong>: make sure release nodes are created in order! The projects shipped with hostmaster (hosting, eldir, etc) need to be fully released before the hostmaster release node is created!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Build_the_release_in_Jenkins_again">2.9. Build the release in Jenkins again</h2>

<p>At this point, it's possible that the tarballs on Drupal.org were not created properly. We want to test the real procedure, so run a your build again, but choose 'package' as the <code>AEGIR_FETCH_MODE</code>. <a href="http://ci.aegirproject.org/job/S_aegir_6.x-1.x_install/">S_aegir_6.x-1.x_install job</a></p>

<p>Note: The link provided may reference the wrong test, since there doesn't appear to be an AEGIR_FETCH_MODE parameter.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Publish_the_Debian_packages">2.10. Publish the Debian packages</h2>

<p>Finally, when the Debian packages are tested you will need to pull them into the stable release channel:</p>

<p><a href="http://ci.aegirproject.org/view/Release scripts/job/R repo pull/" title="http://ci.aegirproject.org/view/Release%20scripts/job/R%20repo%20pull/">http://ci.aegirproject.org/view/Release%20scripts/job/R%20repo%20pull/</a></p>

<p><strong>2.x note</strong>: we pull to testing (and stable since the betas), manually:</p>

<pre><code>reprepro copy testing unstable aegir2
reprepro copy testing unstable aegir2-hostmaster
reprepro copy testing unstable aegir2-provision
reprepro copy testing unstable aegir2-cluster-slave
</code></pre>

<p><strong>3.x note</strong>: we pull to stable (since the betas), manually:</p>

<pre><code>reprepro@zeus:~$ reprepro copy stable unstable aegir3
reprepro@zeus:~$ reprepro copy stable unstable aegir3-hostmaster
reprepro@zeus:~$ reprepro copy stable unstable aegir3-provision
reprepro@zeus:~$ reprepro copy stable unstable aegir3-cluster-slave
</code></pre>

<p>If Jenkins has managed to build .debs and upload them before you've have a chance to pull them into testing/stable, you can manually remove them like so:</p>

<pre><code>reprepro remove unstable aegir2-cluster-slave aegir2 aegir2-provision aegir2-hostmaster
</code></pre>

<p>This should be prevented by disabling the Jenkins jobs named 'D_aegir-debian*' before starting to push the release tags.</p>

<p>You can then re-upload the new .debs you've generated, using the '-f' (force) flag:</p>

<pre><code>dput -f aegir build-area/aegir2-provision_2.3_amd64.changes
</code></pre>

<p>After doing that, you can re-run the 'copy' commands to publish the .debs to the appropriate releases.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Publish_the_release_notes_widely">2.11. Publish the release notes widely</h2>

<p>Once all this is done and the tarballs are generated, the release notes are published in:</p>

<ul>
<li>The <a href="../../../../66/index.html">handbook</a> (this is where the release notes live!)</li>
<li>A link to the release notes on the <a href="../../../../../index.html">frontpage block</a></li>
<li>An <a href="../../../../add/event/index.html">event in the calendar</a></li>
<li>A <a href="../../../../add/discussion/index.html">discussion post</a> (don't forget to make it 'sticky' &amp; remove stickiness from the previous announcement)</li>
<li>Update the version in the <a href="../../../../../upgrading/script/index.html">script upgrade page</a></li>
<li>The topic of the IRC channel</li>
<li>The aegir-announce mailing list (<a href="mailto:announce@lists.aegirproject.org">announce@lists.aegirproject.org</a>.)</li>
<li>Twitter as @aegirproject</li>
</ul>

<p>Optionally, blog posts on <a href="http://koumbit.org/">koumbit.org</a>, <a href="http://mig5.net/">mig5.net</a>, and elsewhere may go into further detail about significant changes, screencasts etc.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-18.html?destination=node%2F32%23comment-form">Login</a> or <a href="../../../../../user/register/index-18.html?destination=node%2F32%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-18.html?destination=node%2F32%23comment-form">Login</a> or <a href="../../../../../user/register/index-18.html?destination=node%2F32%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-543" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../debian/index.html">Building and working with the debian packages</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p>Debian is one of the main supported operating systems in Aegir. For other systems, see <a href="../../../../../handbook/operating-system-support/index.html">Operating System Support</a>. See also the following instructions:</p>

<ul>
<li><a href="../../../../../installing/debian/index.html">Install using Debian packages</a></li>
<li><a href="../../../../../upgrading/debian/index.html">Upgrade using Debian packages</a></li>
</ul>

<p>The following is aimed at developers wishing to maintain their own Debian packages or work within the packaging framework.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc20">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Basic_requirements"><span class="toc-number">1. </span>Basic requirements</a></li>
	<li class="toc-level-1"><a href="#Building_a_package_for_a_new_release"><span class="toc-number">2. </span>Building a package for a new release</a></li>
	<li class="toc-level-1"><a href="#Building_a_branch_package"><span class="toc-number">3. </span>Building a branch package</a></li>
	<li class="toc-level-1"><a href="#Installing_packages_manually"><span class="toc-number">4. </span>Installing packages manually</a></li>
	<li class="toc-level-1"><a href="#Developing_on_Debian"><span class="toc-number">5. </span>Developing on Debian</a></li>
	<li class="toc-level-1"><a href="#Package_versioning"><span class="toc-number">6. </span>Package versioning</a></li>
	<li class="toc-level-1"><a href="#Adding_a_new_uploader"><span class="toc-number">7. </span>Adding a new uploader</a></li>
	<li class="toc-level-1"><a href="#Replacing_an_expired_key"><span class="toc-number">8. </span>Replacing an expired key</a></li>
	<li class="toc-level-1"><a href="#How_the_archive_was_built"><span class="toc-number">9. </span>How the archive was built</a></li>
</ol>
</div>
</div>

<h2 id="Basic_requirements">1. Basic requirements</h2>

<p>You need the following packages to build the Aegir Debian packages:</p>

<pre><code>apt-get install devscripts git-buildpackage
</code></pre>

<p>See also the section below on <em><a href="#Adding_a_new_uploader">Adding a new uploader</a></em>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Building_a_package_for_a_new_release">2. Building a package for a new release</h2>

<p>Assuming we have just released 2.0-alpha2, those instructions will merge that code into the <code>upstream</code> branch (which is used to create the Debian diff) and then merged again in the <code>debian</code> branch (where the Debian code lives). We then use <code>git-buildpackage</code> to build the package and tag it, then push those changes back in the repository.</p>

<p><div class="codeblock"><code>cd provision<br />git pull<br />(if you previously ran release.sh)<br />git reset --hard 6.x-2.0-rc1<br />(otherwise run this next line)<br />dch -v 2.0~alpha2 -D unstable new upstream release<br />git-buildpackage -kanarcat@koumbit.org<br />dput aegir ../build-area/aegir-provision_2.0~alpha2_i386.changes</code></div></p>

<p><em>Note</em>: notice how the version number is slightly different in Debian - we use the "magic" ~ separator to indicate that <code>2.0~alpha2</code> is actually lower than <code>2.0</code>...</p>

<p>The packages are initially uploaded to the "unstable" repository for initial test builds. The idea is that this final package can be moved to "testing" for broader testing, using the command:</p>

<p><div class="codeblock"><code>sudo -u reprepro reprepro -b /srv/reprepro/ copy testing unstable aegir2 aegir2-provision aegir2-hostmaster aegir2-cluster-slave</code></div></p>

<p>When confirmed as ready, it is migrated to the stable repository, using the command:</p>

<p><div class="codeblock"><code>sudo -u reprepro reprepro -b /srv/reprepro/ copy stable testing aegir2 aegir2-provision aegir2-hostmaster aegir2-cluster-slave</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Building_a_branch_package">3. Building a branch package</h2>

<p>Sometimes you want to have a test package for a given branch without going through a full release. Here how it's done.</p>

<p><div class="codeblock"><code>git checkout debian<br />git merge 6.x-1.x<br />git describe<br />dch -v 1.0~rc3+28-1<br />git-buildpackage --git-tag -kanarcat@koumbit.org</code></div></p>

<p>This is also available in the Debian package as:</p>

<p><div class="codeblock"><code>./debian/rules jenkins-build-auto</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_packages_manually">4. Installing packages manually</h2>

<p><div class="codeblock"><code>dpkg -i aegir-provision_1.0~rc3+g6632e6e-1_all.deb</code></div></p>

<p>We also make sure our custom makefile fetches the right one from provision:</p>

<p><div class="codeblock"><code>-includes[aegir] = &quot;http://drupalcode.org/project/provision.git/blob_plain/6.x-1.0-rc3:/aegir.make&quot;<br />+includes[aegir] = &quot;http://drupalcode.org/project/provision.git/blob_plain/6.x-1.x:/aegir.make&quot;</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Developing_on_Debian">5. Developing on Debian</h2>

<p>To develop third party extensions to Aegir on Debian, it is recommended to install the Debian packages. If you are working on Aegir core, this could be a bit trickier since the files are not where you expect them to be and are not deployed as git repositories however.</p>

<p>You can, however, copy in place a .git directory using the following:</p>

<p><div class="codeblock"><code>git clone --branch=6.x-1.0-rc7 <a href="http://git.drupal.org/project/provision<br />cp" title="http://git.drupal.org/project/provision<br />cp">http://git.drupal.org/project/provision<br />cp</a> -Rp provision/.git /usr/share/drush/commands/provision/.git<br />cd /usr/share/drush/commands/provision<br />git stash</code></div></p>

<p>This will bring back a bunch of files that are removed from the Debian package, so it will yield warnings on uninstall of the Debian package but it should otherwise work.</p>

<p>You can do something similar with the frontend.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Package_versioning">6. Package versioning</h2>

<p>The stable repository should contain the latest release. The testing repository will also contain the latest release (unless we're in the process of building a release) but could have fixes to the Debian package that are being tested. The unstable repository is automatically built from the stable branch and may be broken.</p>

<p>To see what changes are done to the Debian package, see the <a href="http://drupalcode.org/project/provision.git/blob/refs/heads/debian:/debian/changelog">debian/changelog</a> which is maintained on the <a href="http://drupalcode.org/project/provision.git/shortlog/refs/heads/debian">debian branch</a>. To see which version of the package is currently available in the repository, you will unfortunately need to parse the Packages file for <a href="http://debian.koumbit.net/debian/dists/unstable/main/binary-amd64/Packages">unstable</a>, <a href="http://debian.koumbit.net/debian/dists/testing/main/binary-amd64/Packages">testing</a> or <a href="http://debian.koumbit.net/debian/dists/stable/main/binary-amd64/Packages">stable</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Adding_a_new_uploader">7. Adding a new uploader</h2>

<p>To enable a new maintainer to upload to the Debian repository at debian.aegirproject.org, something like the following steps will have to be followed:</p>

<p>Create a ~/.dput.cfg with the following entry:
<div class="codeblock"><code># See /etc/dput.cf for examples<br />[aegir]<br />login&nbsp;&nbsp;&nbsp;&nbsp; = *<br /># login&nbsp;&nbsp;&nbsp;&nbsp; = another_username<br />fqdn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = debian.aegirproject.org<br />method&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = scp<br />incoming&nbsp;&nbsp;&nbsp; = ~reprepro/incoming</code></div></p>

<p>Next, GPG keys will have to be authorized to upload to the repository:</p>

<p><div class="codeblock"><code>sudo -u reprepro -i<br />gpg --search-keys foo@bar.com<br />gpg --fingerprint <a href="mailto:foo@bar.com">foo@bar.com</a> ; gpg --check-sigs <a href="mailto:foo@bar.com">foo@bar.com</a> # check if this is the real key<br />echo allow * by key 1234ABCD &gt;&gt; /srv/reprepro/conf/uploaders</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Replacing_an_expired_key">8. Replacing an expired key</h2>

<p><div class="codeblock"><code>gpg --gen-key<br />gpg --list-keys<br />gpg --keyserver pgp.mit.edu --send-keys &lt;key id&gt;<br />sudo -u reprepro -i<br />gpg --search-keys &lt;key id&gt;<br />gpg --fingerprint <a href="mailto:foo@bar.com">foo@bar.com</a> ; gpg --check-sigs <a href="mailto:foo@bar.com">foo@bar.com</a> # check if this is the real key<br />echo allow * by key &lt;key id&gt; &gt;&gt; /srv/reprepro/conf/uploaders</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_the_archive_was_built">9. How the archive was built</h2>

<p>The following documentation was used: <a href="https://wiki.koumbit.net/RepreproConfiguration" title="https://wiki.koumbit.net/RepreproConfiguration">https://wiki.koumbit.net/RepreproConfiguration</a></p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-81.html?destination=node%2F543%23comment-form">Login</a> or <a href="../../../../../user/register/index-81.html?destination=node%2F543%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-81.html?destination=node%2F543%23comment-form">Login</a> or <a href="../../../../../user/register/index-81.html?destination=node%2F543%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-35" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../roadmap/1/index.html">1.0 roadmap</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This is a brief outline of development plans for Aegir.</p>

<p><strong>Update</strong>: this roadmap is not up to date anymore. Effectively, 0.4 and parts of 0.5 and 0.6 were all squashed into an API-stable 1.0 release published on Drupal.org in spring 2011. 1.0 is now in maintenance mode and only critical bugfixes will be accepted in the tree. This roadmap is therefore superseded by the <a href="../../../../523/index.html">2.0 roadmap</a>.</p>

<p>Note that all formal Aegir releases (ie. not those marked, "alpha", "beta" or "release candidates" or "RC") are production-ready. We strive hard to maintain good code quality and Q/A by frequent releases and <a href="../../../../32/index.html">alpha/beta/RC stages before those formal releases</a> so even if the releases are marked 0.x, it's not because they are not stable or ready, it's simply because the <em>API</em> is not stable (see below).</p>

<h2>0.1 - "Sites" - Single platform support</h2>

<p>Solid release for Drupal 5 platform.
Will not be able to upgrade.
Production ready.</p>

<h2>0.2 - "Upgrades" - Multiple platforms support</h2>

<p>Support for more than one Drupal release.
Support for migration between Drupal releases. Experimental support for remote SQL servers.
Frontend still in Drupal 5.</p>

<h2>0.3 - "d6" - Drupal 6 frontend support</h2>

<p>In the backend: bugfix release of 0.2.
In the frontend: port to Drupal 6.</p>

<h2>0.4 - "Cloud" - Multiple servers support</h2>

<p>Support ssh as communication channel between multiple servers (see <a href="http://drupal.org/node/366418">this issue</a>)
Move sites between servers, and support for multiple db servers and moving between them.</p>

<p><a href="http://groups.drupal.org/node/25841">Release goals for 0.4</a></p>

<h2>0.5 - "apt-get" - proper deployment procedures</h2>

<p>proper deployment procedures (features? proper project management? etc)</p>

<h2>0.6 - "UX" - User interface improvements</h2>

<p>Clean up and make the user interface friendlier.</p>

<h2>1.0 - "API" -  API freeze</h2>

<p>A <a href="http://drupal.org/node/270263">stable</a>, <a href="http://drupal.org/node/270261">published API</a> for Hostmaster modules that will be frozen during the whole lifetime of the 1.0 branch to ease long term support for third party extensions.</p>

<h1>From there on...</h1>

<h2>Extension modules</h2>

<p>There is also a host (pun intended) of provisioning tasks that it would be nice to see created:</p>

<ul>
<li>LDAP (open LDAP)</li>
<li>Solr Search (Tomcat)</li>
<li>Jabber (ejabberd)</li>
<li>DNS (Bind, DNSmasq etc - Actually already implemented in the 0.4 line)</li>
<li>Pound (load balancer)</li>
<li>Email (Zimbra)</li>
<li>An RDF triple store (needs more research)</li>
<li>Asterisk (voicemail, proxy)</li>
</ul>

<h2>Mass site operation modules</h2>

<ul>
<li>Search (could be related to Solr)</li>
<li>Statistics (info on nodes/comments/users etc. across all / many sites)</li>
<li>Logging (centralized logging overview, might just be web interface for syslog)</li>
<li>Spam / Comment moderation (we had some discussion about writing a Mollom module that works across sites)</li>
</ul>

<p>Feel free to <a href="../../../../18/index.html">contact the developers</a> if you are interested in pitching in to work on one or more aspects of Aegir.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-82.html?destination=node%2F35%23comment-form">Login</a> or <a href="../../../../../user/register/index-82.html?destination=node%2F35%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-82.html?destination=node%2F35%23comment-form">Login</a> or <a href="../../../../../user/register/index-82.html?destination=node%2F35%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-523" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../roadmap/2/index.html">2.0 roadmap</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Following the <a href="../../../../488/index.html">Drupalcon Chicago 2011 BOFs discussion</a>, the community came up with a series of ideas and wishlist items for the upcoming 2.0 release. This roadmap may be updated or trimmed down as development goes ahead.</p>

<p>We do not commit to doing <em>all</em> of this for 2.0, this is mostly a wishlist of what people expressed were priorities for them during the brainstorm. If people want things to move forward, they will need to submit patches or create feature branches, basically lead development on the feature you want. This page can be used to coordinate overall leadership of those issues, while pointing to the Drupal.org issue queues for the specifics.</p>

<p>This roadmap supersedes the previous <a href="../../../../../roadmap/1/index.html">1.0 roadmap</a>.</p>

<p><em>Update</em>: this roadmap is very ambitious, and should be considered more as a "wishlist". What we agreed on during <a href="../../../../../content/weekly-scrum-irc-log-2012-02-06/index.html">the february 6th 2012 scrum</a> was that we would focus on those items, in order of higher to lower priority:</p>

<ol>
<li>Autoloaded classes (means we drop support for PHP 5.2 and below)</li>
<li>Drush 5 support</li>
</ol>

<p>Once all those are done, 2.x should go in beta and once there are no criticals, it gets release, even if we don't have all the other features listed below.</p>

<p><strong>Update</strong>: this is superseded by this roadmap: <a href="../../../../../discuss/another-stab-short-and-long-term-roadmap-aegir-2x-and-3x/index.html" title="http://community.aegirproject.org/discuss/another-stab-short-and-long-term-roadmap-aegir-2x-and-3x">http://community.aegirproject.org/discuss/another-stab-short-and-long-te...</a></p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc21">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Drush_collaboration"><span class="toc-number">1. </span>Drush collaboration</a>
<ol>
	<li class="toc-level-2"><a href="#Sending_more_code_upstream"><span class="toc-number">1.1. </span>Sending more code upstream</a></li>
	<li class="toc-level-2"><a href="#Removing_common_code"><span class="toc-number">1.2. </span>Removing common code</a></li>
	<li class="toc-level-2"><a href="#Standard_archive_support"><span class="toc-number">1.3. </span>Standard archive support</a></li>
	<li class="toc-level-2"><a href="#Unit_testing"><span class="toc-number">1.4. </span>Unit testing</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Multi-server_improvements"><span class="toc-number">2. </span>Multi-server improvements</a>
<ol>
	<li class="toc-level-2"><a href="#From_a_hub-spoke_to_a_mesh_model"><span class="toc-number">2.1. </span>From a hub-spoke to a mesh model</a></li>
	<li class="toc-level-2"><a href="#Improve_cluster_support_done_and_backported_to_1.7"><span class="toc-number">2.2. </span>Improve cluster support (done &amp; backported to 1.7)</a></li>
	<li class="toc-level-2"><a href="#Optimizing_clones_and_migrates"><span class="toc-number">2.3. </span>Optimizing clones and migrates</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Modularization_of_more_systems"><span class="toc-number">3. </span>Modularization of more systems</a>
<ol>
	<li class="toc-level-2"><a href="#Modular_backup_system"><span class="toc-number">3.1. </span>Modular backup system</a></li>
	<li class="toc-level-2"><a href="#Modular_platform_support"><span class="toc-number">3.2. </span>Modular platform support</a></li>
	<li class="toc-level-2"><a href="#Modular_queuing_system"><span class="toc-number">3.3. </span>Modular queuing system</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Other_features"><span class="toc-number">4. </span>Other features</a>
<ol>
	<li class="toc-level-2"><a href="#Automatic_upgrades"><span class="toc-number">4.1. </span>Automatic upgrades</a></li>
	<li class="toc-level-2"><a href="#PostgreSQL_backend_support"><span class="toc-number">4.2. </span>PostgreSQL backend support</a></li>
	<li class="toc-level-2"><a href="#Statistics_improvements"><span class="toc-number">4.3. </span>Statistics improvements</a></li>
	<li class="toc-level-2"><a href="#Full_DNS_support"><span class="toc-number">4.4. </span>Full DNS support</a></li>
	<li class="toc-level-2"><a href="#Improved_intersite_security"><span class="toc-number">4.5. </span>Improved intersite security</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Contrib_modules"><span class="toc-number">5. </span>Contrib modules</a>
<ol>
	<li class="toc-level-2"><a href="#Other_modules_roadmaps"><span class="toc-number">5.1. </span>Other modules roadmaps</a></li>
</ol>
</li>
</ol>
</div>
</div>

<h1 id="Drush_collaboration">1. Drush collaboration</h1>

<p>We want to collaborate more with the good people in the <a href="http://drush.ws/">Drush project</a>. We had good conversations at Drupalcon and hope to keep on having more about how to do staging, sharing code, working with contexts and aliases and so on.</p>

<p>This collaboration should permeate the whole 2.0 release cycle, as a lot of goals here overlap work already happening in the Drush project. We have a long tradition of leading development of new features in Drush, by first implementing them in Provision, and we should continue that trend, with a focus on merging those changes back up into Drush, and eventually removing them from Provision in 2.0.</p>

<p><a href="http://koumbit.org/">Koumbit</a> plans to keep on taking care of the Drush Debian packages and coordinate with the Drush team as much as possible.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Sending_more_code_upstream">1.1. Sending more code upstream</h2>

<p>Our "contexts" code could be refactored and sent upstream. provision-save would be a likely first target, along with the persistent "contexts" classes. Note that we have hit a <a href="https://drupal.org/node/955018">significant wall in the current API</a> because it is hard to interoperate with existing server and site contexts from the outside of the class, so that's something that should be cleared up before going ahead with those merges.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Removing_common_code">1.2. Removing common code</h2>

<p>At the very least, we should start removing common code between site-install and provision-install. The new drush archive command should also replace our builtin provision-backup, and provision-save may be refactored around drush_save_config() too (see <a href="https://drupal.org/node/736686">issue #736686 for this</a>).</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Standard_archive_support">1.3. Standard archive support</h2>

<p>... which brings us to the <a href="http://groups.drupal.org/node/106754">standard archive format</a>. Drush and Aegir developers have collaborated to create a common format to export and import Drupal sites. A single archive could bundle one or many sites, including site-wide code, so this is a significant difference (and improvement) over the current de-facto Aegir standard.</p>

<p>We want to support that new format. Full multi-site archives should be imported as platforms, while Aegir could keep on exporting single-site archives for standard platforms, like OpenAtrium or other distributions.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Unit_testing">1.4. Unit testing</h2>

<p>Drush has started to implement unit testing with PHPUnit in Drush 5 (see <a href="http://drupalcode.org/project/drush.git/tree/HEAD:/tests">the tests directory</a> for samples), and we should jump in that party, extending those classes and unit-testing the hell out of Aegir itself. That will make merging features into Drush easier and make sure we have no regressions while doing so.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Multi-server_improvements">2. Multi-server improvements</h1>

<p>While Aegir 1.0 has multi-server support, it is far from ideal or complete, and we wish to harden that design in 2.0.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="From_a_hub-spoke_to_a_mesh_model">2.1. From a hub-spoke to a mesh model</h2>

<p>The current model where there is one main server (the "hub") where all platforms and sites are created and then synced to remote servers (the "spokes") seems to be showing scalability issues and concerns about where the authoritative data should be.</p>

<p>For example, it's currently not recommended to allow developpers to access sites on remote servers, as the authoritative data resides on the hostmaster site. Another issue is that aliases are maintained only on the master server, and therefore are not accessible on remote servers. Finally, the fact that drush and provision are not installed on remote servers make some operations unnecessarily slow as we need to make the operation locally and then sync the result.</p>

<p>The alternative has yet to be discussed. We especially want to chime in with the Drush community here to see how the best practices should be. The conversation has started, and with the migration of Drupal.org to git, a lot of possibilities just opened up, with a lot of people being all of a sudden more familiar with this excellent too.</p>

<p>In general, it should be possible to expect remote servers to have drush and provision installed and be relatively independent from the "master" server. A design like this could eventually mean that Aegir could manage other Aegir sites and upgrade them. It is the "mesh" design, of which the "hub and spoke" model is only a subset.</p>

<p>This follows the practice of "tools not policy" we are heading towards: we leave the mesh vs hub/spoke decision to the site administrators and provide the tools to support both approaches the best we can.</p>

<p><a href="http://koumbit.org/">Koumbit</a> plans to spearhead this effort this summer.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Improve_cluster_support_done_and_backported_to_1.7">2.2. Improve cluster support (done &amp; backported to 1.7)</h2>

<p>The current multi-server model doesn't support clusters and shared filesystems very well. Aegir 2.0 should allow scaling your web hosts horizontally by spreading a single site amongst multiple servers. While 1.0 can setup sites on remote servers, it follows more the concept of "sharding", spreading different sites amongst different servers than load balancing all sites amongst all servers.</p>

<p>This involves supporting load balancers (e.g. IPVs, Pound, Varnish), maybe through the existing "cluster" service, but also shared filesystems (e.g. NFS, OCFS, GFS, GlusterFS), maybe through a new "fileserver" service.</p>

<p><a href="http://koumbit.org/">Koumbit</a> plans to spearhead this effort this summer.</p>

<p><strong>Update</strong>: this has been implemented with the "web_pack" module, which will be released with 1.7, deprecating the cluster module. 2.x will remove support for the current "cluster" module. See also the <a href="../../../../../content/web-clusters/index.html">updated documentation</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Optimizing_clones_and_migrates">2.3. Optimizing clones and migrates</h2>

<p>We quickly mentionned git support above, but this could lead to significant improvements, for example by using <code>git clone --shared</code> instead of the traditional "backup and deploy" approach to clone/migrate sites.</p>

<p>There is certainly the possibility of rewriting clone to optimize away "backup and deploy" and merge them in a single operation that could use copy on write mechanisms like hardlinks (<code>cp -al</code>), git tricks (<code>git clone --shared</code>) or filesystem snapshots (e.g. <a href="https://btrfs.wiki.kernel.org/index.php/FAQ#What_is_a_snapshot.3F">BTRFS snapshot directory/file support</a>).</p>

<p>Once deploy is optimized, we could consider hooking it the Drupal 7 or third party unit tests to rollback on such failures.</p>

<p>Those optimizations would need to integrate with and support the multi-server model elegantly too, especially the hypothetical fileserver service.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Modularization_of_more_systems">3. Modularization of more systems</h1>

<p>Aegir 1.0 is already pretty modular: "services" are an abstract concept that can be implemented and inherited. For example, the "HTTP service" has four implementations: Apache, Apache-SSL, Nginx and Nginx-SSL. The database and DNS layers are also abstracted that way.</p>

<p>But more can be done here.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Modular_backup_system">3.1. Modular backup system</h2>

<p>Right now backups can be pretty heavy and use the venerable (<a href="http://www.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=1#HISTORY">1979!</a>) tar backup format and utilities, which made Aegir portable to almost any UNIX operating system. It's a good start, but it's highly inefficient. As mentionned above for the clone and migrate optimization, we could also use modern filesystem features like snapshots or use git support. Another suggestion was to use <a href="http://aws.amazon.com/s3">S3</a> or similar services for offsite backups.</p>

<p>The basic idea here is that backups should be extendable - if you want to backup in your shoebox, Aegir should allow you to write a plugin for it. There was some initial work done by computerminds <a href="https://github.com/computerminds/aegir_backup_storage">on github</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Modular_platform_support">3.2. Modular platform support</h2>

<p>This is also known as the <a href="https://drupal.org/node/1044678">alien platform support</a>, that is - being able to install other "things" than Drupal in the backend, for example (oh the heresy!) <a href="https://drupal.org/node/1044692">Wordpress</a>. This involves ripping apart the "platform" code in the frontend and the backend to make it more CMS-agnostic, so that Drupal is just <em>one</em> of the implementations.</p>

<p>This would make sense of course if at least another implementation would be supported. This could also involve merging the site and platform creation forms for those platforms that do not support multi-site like Drupal does (so that creating a site effectively create a platform).</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Modular_queuing_system">3.3. Modular queuing system</h2>

<p>The current queuing system is what we informally call the "ghetto queue". It's a cron job that pulls tasks from a MySQL database. While this scales well for a few sites, on busy servers it's a total nightmare, especially for mass migrations. Tasks stack up and concurrency is not managed at all. This needs to be completely redone.</p>

<p>A possibility is to use Drupal 7's abstracted <a href="http://api.drupal.org/api/drupal/modules--system--system.queue.inc/group/queue/7">queue API</a> and let administrators implement their own queuing system according to their local APIs.</p>

<p>The new queuing system could be a key part in how the multi-server "mesh" model would be implemented. It could also be how non-Drush backends could be handled by Aegir - in that scenario, Aegir would become an interface for a <a href="../../../../284/index.html">standard queuing system</a>, yet to be determined, although a lot of ideas are flying around: Jenkins/Hudson, AMPQ, Drush itself, etc. See <a href="../../../../284/index.html">this evaluation</a> for that decision.</p>

<p><a href="http://koumbit.org/">Koumbit</a> plans to spearhead this effort this summer.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Other_features">4. Other features</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Automatic_upgrades">4.1. Automatic upgrades</h2>

<p>There were a few discussions around managing platforms automatically. The <a href="http://lists.aegirproject.org/pipermail/aegir/2011-January/000026.html">implementation of hosting-import</a> is one of the building blocks of this, but there remains some fine-tuning for this to work out of the box, especially for new users, some of which have <a href="https://drupal.org/node/1111148">requested that we can build makefiles straight from the frontend</a>, a bit like how it's done on <a href="http://drushmake.me/">drushmake.me</a>. One could also use feature servers feeds to update their platforms. Again, we should leave the policy to the user or at least make this pluggable.</p>

<p>This mostly consists of automating the creation of new platforms, the upgrade of sites between platforms and garbage collection of old platforms.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="PostgreSQL_backend_support">4.2. PostgreSQL backend support</h2>

<p>The backend database layer (the "db class") now supports only MySQL, that is, while the Aegir frontend could technically run in PostgreSQL (although that is <a href="https://drupal.org/node/548882">still unsure</a>), the backend can't create sites in a PostgreSQL database.</p>

<p>Most of the work here will be around supporting user credentials handling, creation and destruction, which are fairly different between postgres and MySQL. The issue for this is <a href="https://drupal.org/node/585796">#585796</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Statistics_improvements">4.3. Statistics improvements</h2>

<p>Work has already started at <a href="http://koumbit.org/">Koumbit</a> to implement a "statistics" queue that would mostly pull Apache logfiles and parse it for size (and CPU timing) information. This is to implement bandwidth and CPU quotas, but could be extended in a more generic "statistics" queue that would collect all sorts of information:</p>

<ul>
<li>if your Drupals need to be upgraded or are secure (the basic "status report")</li>
<li>how many modules/themes/profiles/libraries are installed (populating the frontend data)</li>
<li>how many users/nodes/fields instances do you have?</li>
</ul>

<p>All this could be collected in a nice dashboard that would outline client, site or platform-specific information.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Full_DNS_support">4.4. Full DNS support</h2>

<p>The DNS support in the backend is already pretty mature, but it's not really intuitive how it works and how to integrate it into existing infrastructures. <a href="https://drupal.org/node/922280">Issue #922280</a> details all the next steps required here, but we can already say we hope to have a <a href="https://drupal.org/node/922250">zonefile editor</a> in the frontend, probably based on D7 entities, <a href="https://drupal.org/node/922252">reasonable access control for zones</a>, <a href="https://drupal.org/node/922274">registrar support</a> and <a href="https://drupal.org/node/922264">"host my mail on gmail button" type of wizards</a>.</p>

<p>This could potentially be <a href="http://groups.drupal.org/node/138209">picked up by a GSoC student</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Improved_intersite_security">4.5. Improved intersite security</h2>

<p>We are already going through some hoops to make sure the database credentials are not accessible from one site to the other. The credentials are stored in the Apache environment and cleared out as soon as they are used, which makes finding them in settings.php impossible. <a href="http://koumbit.org/">Koumbit</a> has also worked on a <a href="http://drupal.org/project/provisionacl">Provision ACL</a> module that implements POSIX ACLs on files which allow more granular access controls on files.</p>

<p>But there are <a href="https://drupal.org/node/762138">other security issues remaining</a> that we should be looking into, especially the way Drush and Drupal are bootstrapped during tasks, which is currently insecure.</p>

<p><a href="http://koumbit.org/">Koumbit</a> plans to spearhead this effort this summer.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Contrib_modules">5. Contrib modules</h1>

<p>Other contrib modules may have different roadmaps, but they must respect the release naming conventions. Contrib modules should aim for a 1.y release now, that will be compatible with the 1.x series. 2.x modules should be ported to Drupal 7 and follow the API (in development) of the 2.x series. Modules do not have to follow the minor version numbers of Aegir. For example, Provision ACL 1.1 is compatible with any release of the 1.x core series.</p>

<p>We are also considering making point releases of the backend and the frontend independent, so that Provision 1.1 and Hostmaster 1.2 could be release independently.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Other_modules_roadmaps">5.1. Other modules roadmaps</h2>

<p>This is a short index of other modules roadmaps to 2.0:</p>

<ul>
<li><a href="../../../../109/index.html">Ubercart integration (uc_hosting 2.0)</a></li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-410.html?destination=node%2F523%23comment-form">Login</a> or <a href="../../../../../user/register/index-410.html?destination=node%2F523%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../523/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-616" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../roadmap/2.0/d7-port-dns-editor-plan-google-summer-code-2011/index.html">D7 port &amp; DNS editor plan (google summer of code 2011)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><em>Plan for porting Aegir to D7 and creating a DNS editor. A project for Google Summer of Code 2011.</em></p>

<p><strong>Please offer advice on how to improve the plan I've outlined below.</strong></p>

<p><strong>Relevant links:</strong>
<a href="http://drupal.org/sandbox/seth.vincent/1140244">Hostmaster sandbox for GSOC2011</a></p>

<p><strong>Before May 24:</strong></p>

<ul>
<li>Review Git docs and other resources to learn more about using Git.</li>
<li>Review issues/patches relevant to D7 port and DNS editor. </li>
<li>Review api.aegirproject.org and community.aegirproject.org/developing.</li>
<li>Discuss planned work with aegir maintainers.</li>
<li>Refine plan below based on what I've learned from the handbook, api, and aegir maintainers.</li>
</ul>

<p><strong>Week one:</strong> Work on porting Aegir theme Eldir to Drupal 7. Finalize plans for porting the Aegir modules and install profile.</p>

<p><strong>Week two:</strong> Finish porting Eldir to Drupal 7. Port the Aegir Hosting module to Drupal 7.</p>

<p><strong>Weeks three through six:</strong> Port the Task, Client, DB Server, Package, Platform, Site, and Web Server modules to Drupal 7. Test ported modules.</p>

<p><strong>Weeks six through nine:</strong> Port modules Alias, Clone, Cron, Migrate, Quota, Signup, Task, and Web Cluster to Drupal 7. Test ported modules.</p>

<p><strong>Weeks ten and eleven:</strong> Work on the DNS zonefile editor.</p>

<p><strong>Weeks twelve and thirteen:</strong> Continue testing ported projects and the DNS zonefile editor. Update documentation to reflect changes in the upgrade to Drupal 7.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-412.html?destination=node%2F616%23comment-form">Login</a> or <a href="../../../../../user/register/index-412.html?destination=node%2F616%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../616/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-181" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/index.html">Weekly Scrums</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Since we have now a bigger team of people interested in the project (contributors in the queue, outside the queue, people at Koumbit, the community site, my my!!), we (koumbit) feel it would be important to start doing weekly scrums again.</p>

<p>Nothing complicated: just a 15 minutes where we agree we try to be available on IRC to talk about various issues that have or will come up during the week. No work, just talk.. to quote wikipedia:</p>

<blockquote>
<ul><li>The meeting starts precisely on time.</li>
<li>All are welcome, but only pigs [devs] may speak</li>
<li>The meeting is timeboxed to 15 minutes</li>
<li>The meeting should happen at the same location and same time every day</li>
<li>During the meeting, each team member answers three questions:</li>
<ul><li>What have you done since yesterday?</li>
<li>What are you planning to do today?</li>
<li>Do you have any problems preventing you from accomplishing your goal?</li></ul></ul>

(It is the role of the ScrumMaster to facilitate resolution of these impediments. Typically this should occur outside the context of the Daily Scrum so that it may stay under 15 minutes.)
</blockquote>

<p>These occur via IRC on the #aegir channel twice a week at separate times:</p>

<p><strong>Every Monday at 20h00 UTC</strong>. This works out to be:</p>

<ul>
  <li>11h00 in Los Angeles, USA (PDT)</li>
  <li>15h00 in Montreal, Canada; New York, USA (EDT)</li>
  <li>19h00 in London, UK (GMT)</li>
  <li>06h00 in Melbourne, Australia (EST)(on Tuesday)</li>
</ul>

<p>(See <a href="http://www.timeanddate.com/worldclock/meetingdetails.html?year=2011&amp;month=11&amp;day=7&amp;hour=20&amp;min=0&amp;sec=0&amp;p1=165&amp;p2=136&amp;p3=152&amp;p4=137">this useful tool</a> for how we settled on those times.)</p>

<p><strong>Every Thursday at 10h00 UTC</strong>. This works out to be:</p>

<ul>
  <li>03h00 in Los Angelas, USA (PDT)</li>
  <li>06h00 in Montreal, Canada; New York, USA (EDT)</li>
  <li>11h00 in London, UK</li>
  <li>12h00 (noon) in Warsaw, Poland</li>
  <li>20h00 in Melbourne, Australia (EST)</li>
</ul>

<p>We will keep logs of these here for future reference.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-83.html?destination=node%2F181%23comment-form">Login</a> or <a href="../../../../../user/register/index-83.html?destination=node%2F181%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-83.html?destination=node%2F181%23comment-form">Login</a> or <a href="../../../../../user/register/index-83.html?destination=node%2F181%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1088" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/archive-2010/index.html">Archive: 2010</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p>Archive of the weekly scrum from 2010</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-84.html?destination=node%2F1088%23comment-form">Login</a> or <a href="../../../../../user/register/index-84.html?destination=node%2F1088%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-84.html?destination=node%2F1088%23comment-form">Login</a> or <a href="../../../../../user/register/index-84.html?destination=node%2F1088%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-180" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../180/index.html">Weekly Scrum IRC Log: 2010-12-02</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
(03:00:54 PM) anarcat: hi.
(03:01:08 PM) anarcat: so now is the time for our newly established weekly scrums :)
(03:01:24 PM) anarcat: of course, mig5 is not there and vertice either, but i'll still do my part,
 just to kickstart this
(03:01:32 PM) hadsie: hey anarcat
(03:01:54 PM) anarcat: hey hadsie
(03:03:30 PM) anarcat: so basically, i haven't done much wrt to aegir this week, i'm busy
 with other koumbit work
(03:03:39 PM) anarcat: you're going to hear this often from me, unfortunately :)
(03:04:03 PM) anarcat: my latest thing though is the creation of a debian package for provision
 that can install and upgrade aegir automagically, it's pretty neat and needs testing
(03:05:42 PM) anarcat: i have contacted other debian developpers to get their feedback about
 the possibility of uploading that package straight into debian
(03:07:24 PM) anarcat: the followup for the debian package happens here: 
<a href="http://drupal.org/node/490004" title="http://drupal.org/node/490004">http://drupal.org/node/490004</a> and here: <a href="http://bugs.debian.org/532923" title="http://bugs.debian.org/532923">http://bugs.debian.org/532923</a>
(03:07:36 PM) sfyn: hey folks
(03:07:36 PM) anarcat: in other news i started looking at STS here: 
<a href="http://drupal.org/node/986312" title="http://drupal.org/node/986312">http://drupal.org/node/986312</a>
(03:08:04 PM) anarcat: so that's it for my past work, in the next week i'll try to:
(03:08:22 PM) anarcat: figure out proper permissions for multi-(shell)user setups in aegir
(03:08:49 PM) anarcat: right now a lot of our devs use sudo -u aegir to do stuff and that's quite 
messy, we're going to try to figure out the minimum set of perms for that to work, maybe with 
ACLs
(03:09:03 PM) anarcat: we also need to figure out how we maintain site-specific packages in 
remote servers
(03:09:26 PM) anarcat: and i want to start fixing DNS in the frontend, but we are slowly pushing
 back our objective of having DNS in production to after christmast
(03:09:30 PM) anarcat: so that's it for me
(03:09:42 PM) anarcat: hi sfyn :)
(03:09:43 PM) anarcat: sfyn / ergonlogic / mvc : anything to add?
(03:11:24 PM) simesy: hey i actually made the scrum, (but only because I had to get up for a
 job and now I have to go :P)
(03:11:35 PM) anarcat: :)
(03:11:35 PM) anarcat: i see
(03:11:39 PM) anarcat: well, congratulations :)
(03:11:42 PM) sfyn: I have been sick all week and trying to catch up on my rpod stuff
(03:11:51 PM) sfyn: So very little progress to report
(03:11:59 PM) sfyn: I have a guy who is interested in writing tests for us
(03:12:13 PM) sfyn: Luigi - are you here?
(03:12:38 PM) sfyn: A guy in montreal, but he is a little new to the fabulous world of drupal,
 and FLOSS in general, I get the impression
(03:12:46 PM) sfyn: But he has done unit testing work before
(03:13:00 PM) sfyn: Maybe we should get him to come into the office so we can orient him
(03:13:18 PM) sfyn: hadsie: hey man
(03:14:07 PM) anarcat: thank you sfyn
(03:14:16 PM) anarcat: so our little scrum is almost over, anybody got anything to add before
 we move on?
(03:16:26 PM) anarcat: thank you for your attention, and see you next week!
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-85.html?destination=node%2F180%23comment-form">Login</a> or <a href="../../../../../user/register/index-85.html?destination=node%2F180%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-85.html?destination=node%2F180%23comment-form">Login</a> or <a href="../../../../../user/register/index-85.html?destination=node%2F180%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-196" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../196/index.html">Weekly Scrum IRC Log: 2010-12-09</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
(02:57:33 PM) ergonlogic: everyone: Weekly scrum being in ~5 mins
(02:57:57 PM) mig5: trying to wake up :)
(03:01:49 PM) anarcat: hey hey!
(03:01:55 PM) anarcat: good morning world!
(03:02:01 PM) omega8cc: hey
(03:02:10 PM) ***anarcat tries to play the gooooood moooorning vietnam cue here
(03:02:12 PM) mig5: good morning, here at least :)
(03:02:16 PM) anarcat: so
(03:02:31 PM) anarcat: welcome to our weekly scrum session, we have ... 13 minutes left
(03:02:35 PM) mig5: woot
(03:02:41 PM) anarcat: we failed at the first directive, and i'm sorry for that (start on time, damnit!)
(03:02:50 PM) ergonlogic: my fault
(03:02:51 PM) anarcat: and i'll start with my stuff, i didn't do much last week
(03:03:02 PM) anarcat: in fact, nothing i can remember
(03:03:14 PM) anarcat: next week is likely to be similar as i'm over[load]ed with thousands of internal needles
(03:03:20 PM) anarcat: that's all for me :)
(03:03:22 PM) mig5: yay
(03:03:29 PM) mig5: ok
(03:03:47 PM) mig5: to carry on that tune, i didn't do much last week, i have been trying to catch up on some tickets
(03:03:53 PM) mig5: my immediate aims are,
(03:04:04 PM) mig5: to test the debian packages now that i know they're in unstable
(03:04:07 PM) mig5: which i will do today
(03:04:24 PM) mig5: and possibly help ergonlogic with this clients permission stuff
(03:04:45 PM) mig5: after that i will start looking at the 'for review' patches in the queue per our beta2 plans
(03:04:51 PM) mig5: but that may not get to happen until next week
(03:05:01 PM) anarcat: rc2 you mean
(03:05:02 PM) mig5: that's about it from me
(03:05:06 PM) anarcat: ok
(03:05:08 PM) mig5: oh really
(03:05:10 PM) mig5: rc2?
(03:05:12 PM) anarcat: er
(03:05:13 PM) anarcat: no
(03:05:15 PM) anarcat: i don't
(03:05:16 PM) mig5: haha
(03:05:18 PM) ***anarcat is on crack, nevermind
(03:05:24 PM) anarcat: i was confusing us with drush, sorry
(03:05:29 PM) mig5: i would be happy to push for rc1 :)
(03:05:32 PM) anarcat: ergonlogic?
(03:05:48 PM) anarcat: sfyn is offline today, but i know he tried to get back into things and will keep on doing that
(03:05:50 PM) ergonlogic: well, I'm working on the permission issue that mig5 mentioned
(03:06:02 PM) ergonlogic: and the udev dependency
(03:06:11 PM) anarcat: right, about that
(03:06:22 PM) anarcat: i'm sure that moshe_work and other drush people would love to see that land in drush 4
(03:06:27 PM) ergonlogic: just trying to get into the swing of things, and familiarize myslef with some of aegir's inner workings
(03:06:32 PM) anarcat: but i'm not sure we'd make it for rc3 at this rate
(03:06:51 PM) anarcat: how do you feel about this?
(03:07:32 PM) ergonlogic: well, I think I'm about half way there on that issue
(03:07:40 PM) anarcat: alright
(03:07:41 PM) ergonlogic: but I still nee to post a patch
(03:07:47 PM) ergonlogic: s/nee/need
(03:07:48 PM) anarcat: ok
(03:08:11 PM) anarcat: *and* it would then need to be ported up to drush... so we can safely assume we won't make it into drush 4, those guys are in a rush :)
(03:08:20 PM) anarcat: speaking of drush
(03:08:28 PM) mig5: in a rush or in a drush? :)
(03:08:33 PM) anarcat: drush is that somebody omega8cc tested aegir with drush 4-rc1, and it works
(03:08:34 PM) anarcat: hehe
(03:08:35 PM) ergonlogic: groan
(03:08:40 PM) mig5: sorry..
(03:08:44 PM) anarcat: hehe
(03:08:49 PM) anarcat: alright
(03:08:55 PM) mig5: yes Vertice asked me to test that too, another thing on my todo list
(03:08:59 PM) anarcat: so
(03:09:00 PM) mig5: glad someone else did
(03:09:02 PM) anarcat: i guess one last thing
(03:09:32 PM) anarcat: we heard from vertice finally and he's coming back after a small hiatus, he's going to concentrate on documentation stuff and helping us figuring [stuff] out
(03:09:40 PM) anarcat: he's also eager (hehe) to release an rc
(03:09:45 PM) anarcat: so maybe it's something we should consider
(03:09:49 PM) ***anarcat looking at rc bugs
(03:10:22 PM) mig5: we have had the benefit of not having too many new criticals. i think if we can tie off some existing patches, we could look at that perhaps
(03:10:26 PM) anarcat: so most of those are postponed (so needs testing and closed: worksforme)
(03:10:44 PM) mig5: do you have a link to the rc bugs
(03:10:50 PM) anarcat: http://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=1&amp;categories=All
(03:11:05 PM) anarcat: one is the freaky multiserver thing, i'd like adrian or somebody else to look at that one as i don't have the resources or time or brain to look into this
(03:11:11 PM) anarcat: that one is <a href="http://drupal.org/node/976300" title="http://drupal.org/node/976300">http://drupal.org/node/976300</a>
(03:11:20 PM) anarcat: the other one is the site form optimisation: <a href="http://drupal.org/node/955854" title="http://drupal.org/node/955854">http://drupal.org/node/955854</a>
(03:11:27 PM) anarcat: which could be postponed to post 0.4
(03:11:33 PM) anarcat: so we need testing, basically
(03:11:39 PM) mig5: yeah i'm still not convinced the multiserver thing is just someone trying to do something we don't support at all (i.e spoke vs mesh model)
(03:11:42 PM) mig5: yep
(03:11:49 PM) anarcat: alright
(03:12:03 PM) anarcat: so i would favor more a testing + rc1 than a beta2 at this point
(03:12:07 PM) ergonlogic: I'm into testing the multi-server stuff, if that's on the menu
(03:12:17 PM) anarcat: ergonlogic: it is, take a look at <a href="http://drupal.org/node/976300" title="http://drupal.org/node/976300">http://drupal.org/node/976300</a>
(03:12:20 PM) ergonlogic: and dns
(03:12:29 PM) anarcat: dns + ssl integration needs testing too: <a href="http://drupal.org/node/934908" title="http://drupal.org/node/934908">http://drupal.org/node/934908</a>
(03:12:44 PM) anarcat: and this should probably just be closed: <a href="http://drupal.org/node/950118" title="http://drupal.org/node/950118">http://drupal.org/node/950118</a> (new servers probably work fine)
(03:12:52 PM) anarcat: that one is more hairy: <a href="http://drupal.org/node/884090" title="http://drupal.org/node/884090">http://drupal.org/node/884090</a>
(03:12:57 PM) anarcat: not suer about it
(03:13:12 PM) anarcat: but really, i believe we could just test those quickly and release next week, how about that?
(03:13:56 PM) mig5: sounds good, perhaps late next week, allowing me my thursday/friday where i can spend like a whole day looking at some of this
(03:13:56 PM) ergonlogic: I'll look into provisioning some new servers :)
(03:14:02 PM) anarcat: ok
(03:14:04 PM) anarcat: awesome
(03:14:07 PM) anarcat: okay, anybody else has something to add here?
(03:14:24 PM) anarcat: so thank you for attending, and have a nice day!
(03:14:31 PM) ergonlogic: cheers!
(03:14:34 PM) mig5: cheers
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-86.html?destination=node%2F196%23comment-form">Login</a> or <a href="../../../../../user/register/index-86.html?destination=node%2F196%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-86.html?destination=node%2F196%23comment-form">Login</a> or <a href="../../../../../user/register/index-86.html?destination=node%2F196%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-210" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../210/index.html">Weekly Scrum IRC Log: 2010-12-16</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><pre>

07:00 &lt;@mig5> scrum time
07:00 &lt;@anarcat> hi
07:00 &lt;@mig5> morning
07:01 &lt;@anarcat> good morning!
07:01 &lt;@anarcat> not much to report on my side again, other than i forgot to book a session for drupalcon :/
07:01 &lt;@mig5> hehe
07:01 &lt;@anarcat> we're working on LDAP support and we'll focus on intersite security after christmas
07:01 &lt;@mig5> i did make a tweet after i saw there are three aegir related proposals
07:01 &lt;@mig5> oh sweet! LDAP++
07:01 &lt;@anarcat> add a way for aegir to run tasks as a real user instead of itself, so that site A can't see site B's stuff
07:03 &lt;@mig5> cool - that's it from you?
07:04 &lt;@anarcat> yes, sorry
07:04 &lt;@mig5> no worries
07:04 &lt;@mig5> ok, so (again) i haven't done much
07:05 &lt;@mig5> i tried to address some of the for review tickets in the queue, committing two of hadsie's work which i tested
07:05 &lt;@anarcat> that's much :)
07:05 &lt;@mig5> i didn't get to test your debian packages against another squeeze install but i did comment on the ticket about what i think the issue is there
07:05 &lt;@anarcat> yeah, you're right about the issues, feel free to fix if you have time
07:06 &lt;@mig5> but mainly i have been just staring at the queue and feeling out of steam (again), I wonder whether it is time to look at adding more people to the project
07:06 &lt;@anarcat> i agree
07:06 &lt;@mig5> as i feel i'm getting less and less useful, and vertice is taking a break etc,
07:06 &lt;@mig5> and you are tied up a lot with internal stuff (which is fine)
07:06 &lt;@anarcat> i don't feel you're less and less useful though :P
07:07 &lt;@mig5> well that's ok :) i think it speaks for itself
07:07 &lt;@mig5> and things have slowed down so lets get some more hands on deck basically.
07:07 &lt;@mig5> also, i have a client at the moment who is interested in seeing two things happen:
07:07 &lt;@mig5> a dns frontend and scheduled tasks
07:07 &lt;@mig5> Steven Jones has been doing great work with scheduled tasks and created a contrib project hosting_backup_queue
07:08 &lt;@mig5> i was going to ask whether Koumbit were already working on a dns frontend
07:08 &lt;@mig5> we can discuss that later if you like
07:08 &lt;@mig5> and that's about it from me
07:09 &lt;@anarcat> ok, anybody else?
07:09 &lt;@mig5> maybe it would be nice to summarise these scrum sessions as a 'weekly aegir news' email to the mailing list, making people aware of stuff like Steven Jones' contrib project etc
07:09 &lt;@anarcat> mig5: i have ideas on the frontend: 1) there should be code we can resurrect from older git repos and 2) i have a workflow for the blacklisting algorithm (can't let anyone host any zone can't we...)
07:09 &lt;@anarcat> yep
07:10 &lt;@mig5> i am happy to do so
07:11 &lt;@mig5> (re: news)
07:11 &lt;@mig5> ok -we are 11 minutes in anyone else have anything to add?
07:12 &lt; erutan> re: news to save time you could always just dump the relevant irc log onto the open atrium site
07:12 &lt;@mig5> we do that already, yep
07:12 &lt;@mig5> maybe that's enough.
07:12 &lt;@anarcat> yeah...
07:13 &lt;@anarcat> alright, thanks for coming everyone!
07:13 &lt;@mig5> cheers
07:13 &lt;@mig5> cheers
07:14 &lt;@mig5> adding the irc log now
07:15 &lt; noecc> mig5: anarcat: vertice: and others  You have done great things with aegir.  Don't let your steamlessness get you down.
07:15 &lt;@anarcat> :)
07:15 &lt;@anarcat> thanks :)
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-87.html?destination=node%2F210%23comment-form">Login</a> or <a href="../../../../../user/register/index-87.html?destination=node%2F210%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-87.html?destination=node%2F210%23comment-form">Login</a> or <a href="../../../../../user/register/index-87.html?destination=node%2F210%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-225" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../225/index.html">Weekly Scrum IRC Log: 2010-12-23</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><p>Note that none of the core devs were in attendance for this session. Regardless, this is the discussion that ensued:</p>

<pre>
(03:01:56 PM) darthsteven: Is the scrum at 2005?
(03:05:10 PM) ergonlogic: I guess I could start, pending the arrival of the core devs
(03:05:28 PM) ergonlogic: This week I upgraded to beta2 and began testing remote servers
(03:05:58 PM) ergonlogic: the beta2 upgrade required debugging some misconfiguration I had done previously, but otherwise everything seems to be working fine
(03:06:32 PM) ergonlogic: so far, I can verify a remote platform, but can't yet provision a site on it
(03:06:48 PM) ergonlogic: so that'll be something I look at over the holidays
(03:07:03 PM) ergonlogic: finally, I published and api site
(03:07:27 PM) ergonlogic: currently at api.ergonlogic.net, but hopefully api.aegirproject.org will point ot it soon
(03:07:34 PM) ergonlogic: that's it for me
(03:07:49 PM) ergonlogic: happy holidays everyone
(03:08:07 PM) eft_: I started a Why Aegir wiki <a href="../../../../217/index.html" title="http://community.aegirproject.org/node/217">http://community.aegirproject.org/node/217</a>
(03:08:35 PM) eft_: hope to add some graphics at some point
(03:08:50 PM) eft_: we need to market Aegir more :)
(03:09:50 PM) ergonlogic: eft_: agreed about the mktg, but the move to beta seems to have helped already
(03:10:35 PM) eft_: how so?  do you mean the perception of getting out of alpha?
(03:11:21 PM) omega8cc: I submitted my first attempt to resolve the issue with remote files being removed on site verify, testing it is welcome: <a href="http://drupal.org/node/976300#comment-3855932" title="http://drupal.org/node/976300#comment-3855932">http://drupal.org/node/976300#comment-3855932</a>
(03:13:15 PM) omega8cc: the issue is mentioned on <a href="../../../../../0/index-2.html" title="http://community.aegirproject.org/0.4-beta2">http://community.aegirproject.org/0.4-beta2</a>
(03:14:00 PM) ergonlogic: eft_: yes
(03:14:31 PM) omega8cc: oh, and  <a href="http://www.drupal7releaseparty.org/" title="www.drupal7releaseparty.org">www.drupal7releaseparty.org</a> is hosted on Aegir
(03:14:52 PM) eft_: cool
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-88.html?destination=node%2F225%23comment-form">Login</a> or <a href="../../../../../user/register/index-88.html?destination=node%2F225%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-88.html?destination=node%2F225%23comment-form">Login</a> or <a href="../../../../../user/register/index-88.html?destination=node%2F225%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1089" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/archive-2011/index.html">Archive: 2011</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p>Archive of the weekly scrums from 2011</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-89.html?destination=node%2F1089%23comment-form">Login</a> or <a href="../../../../../user/register/index-89.html?destination=node%2F1089%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-89.html?destination=node%2F1089%23comment-form">Login</a> or <a href="../../../../../user/register/index-89.html?destination=node%2F1089%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-240" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../240/index.html">Weekly Scrum IRC Log: 2011-01-07</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>
07:01 &lt;@mig5&gt; Scrum time
07:01 &lt;@mig5&gt; who is here for the meeting, anarcat?
07:01 &lt;@mig5&gt; nope :)
07:01 &lt;@mig5&gt; sfyn: 
07:02 &lt;@mig5&gt; well i'll start. another week gone by without looking at DNS, but we have a good roadmap now thanks to anarcat, i may start looking at that today
07:03 &lt;@mig5&gt; we're now compatible with drush 4 (at the moment)
07:03 &lt;@mig5&gt; i cleaned up some of the hostmaster profile thanks to drush 4's supporting of drupal_set_message being sent to stdout during install profile execution, which identified some legacy stuff that could be removed
07:04 &lt;@mig5&gt; i'm going to look at dns, upgrades, and some multiserver stuff today hopefully
07:05 &lt;@mig5&gt; i also hope to look at darthsteven's new contrib module hosting_backup_gc <a href="http://drupal.org/project/hosting_backup_gc" title="http://drupal.org/project/hosting_backup_gc">http://drupal.org/project/hosting_backup_gc</a>
07:05 &lt;@mig5&gt; and am trying to think of a nice way to let people list their contrib modules on teh community site. i wonder if we should have an inbuilt Featureserver for that sortof thing to let people upload them
07:05 &lt;@mig5&gt; thats it from me (i am talking to myself anyway? :) )
07:06 &lt;@mig5&gt; i'll leave it for another 5 min and if nothing happens, will drop that into the logs
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-90.html?destination=node%2F240%23comment-form">Login</a> or <a href="../../../../../user/register/index-90.html?destination=node%2F240%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-90.html?destination=node%2F240%23comment-form">Login</a> or <a href="../../../../../user/register/index-90.html?destination=node%2F240%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-250" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../250/index.html">Weekly Scrum IRC Log: 2011-01-14</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
06:59 &lt;@anarcat&gt; SCRUM START NOW!
06:59 &lt;@anarcat&gt; welcome everyone :)
06:59 &lt;@anarcat&gt; i'll start with myself
06:59 &lt;@anarcat&gt; i am just out of a lenghty (2.5 week) vacation
06:59 &lt;@anarcat&gt; which was very good
06:59 &lt;@anarcat&gt; i have done absolutely no aegir work since decembre
07:00 &lt;@anarcat&gt; and i don't plan on doing anything until monday
07:00 &lt;@anarcat&gt; at which point we'll update our prod server to head and try to make it work
07:00 &lt;@anarcat&gt; i had big unexpected issues last time with that <a href="http://drupal.org/node/1003700" title="http://drupal.org/node/1003700">http://drupal.org/node/1003700</a>
07:00 &lt;@anarcat&gt; in general, i feel there's something very fishy with aliases, i feel this affects more than one of my server instances\
07:00 &lt;@anarcat&gt; i suspect it may be related to drush 3.3 or the drush package of
07:01 &lt;@anarcat&gt; so i'll be working on that
07:01 &lt;@anarcat&gt; i have also a huge backlog of internal aegir issues that may yield a few bugfixes
07:01 &lt;@anarcat&gt; this will be a good Q/A to maybe lead to an RC somewhere next week
07:01 &lt;@anarcat&gt; so that's it for me
07:01 &lt;@mig5&gt; nice one
07:02 &lt;@mig5&gt; i've not done much except, updated our makefiles to depend on drush 4 and new drush make
07:02 &lt;@mig5&gt; i also updated the upgrade script to remove some hardcoded crap and be more consistent with the install.sh
07:02 &lt;@anarcat&gt; coool
07:02 &lt;@mig5&gt; i *wanted* to work on DNS but sorry, I am just really struggling to do anything aegir :(
07:02 &lt;@anarcat&gt; you've actually done some real work, crazy ;)
07:02 &lt;@mig5&gt; well not really.. :s
07:03 &lt;@mig5&gt; finally, i'll just note on what i think is our most critical bug right now, and i hope to focus on this instead
07:03 &lt;@mig5&gt; <a href="http://drupal.org/node/976300" title="http://drupal.org/node/976300">http://drupal.org/node/976300</a>
07:03 &lt;@anarcat&gt; Vertice: anything to add? how is the DNS change coming up?
07:03  * anarcat takes a look
07:03 &lt;@mig5&gt; verify a remote platform/site and it deletes shit in your site's /files dir :s
07:03 &lt;@anarcat&gt; right, ok
07:03 &lt;@anarcat&gt; mig5: i think it's good to sync only some files and not the whole dir
07:03 &lt;@mig5&gt; because we do these crazy syncs of the entire codebase *after just syncing the settings.php, and then the drushrc.php, etc*
07:03 &lt;@mig5&gt; yes
07:04 &lt;@mig5&gt; anyway, can discuss that later, just wanted to mention what i think i'll focus on for the moment
07:04 &lt;@anarcat&gt; that's very good.
07:04 &lt;@mig5&gt; and that's it from me
07:04 &lt;@anarcat&gt; and it it's RC indeed
07:04 &lt;@anarcat&gt; i need Vertice to do changes to the DNS to activate ergonlogic's API site so we have api.aegirproject.org
07:04 &lt;@anarcat&gt; anyone else wants to add something?
07:04 &lt;@mig5&gt; i'd like to add to that and possibly take over the hosting of aegirproject.org at least, so we can get that updated
07:05 &lt; ergonlogic&gt; thanks anarcat
07:05 &lt;@mig5&gt; or possibly even take over the DNS for aegirproject.org itself, in the event i ever need to move the mailing list server or something
07:05 &lt; eft_&gt; mig5 : +1 to that idea
07:05 &lt;@mig5&gt; just for the sake of speed, but it's up to devseed
07:05 &lt;@anarcat&gt; yeah
07:05 &lt;@anarcat&gt; i don't mind you hosting that, koumbit can also host DNS and the site
07:05 &lt;@mig5&gt; yeah either way :)
07:05 &lt;@anarcat&gt; i offered this to Vertice, i expect us to have DNS soon
07:05 &lt;@mig5&gt; cool
07:05 &lt;@anarcat&gt; (us = koumbit)
07:05 &lt;@mig5&gt; yep
07:06 &lt;@anarcat&gt; but for the site, yeah, it would be important to at least have a backup ...
07:06 &lt;@mig5&gt; darthsteven: feel free to chime in - you've been doing great work with contrib aegir stuff
07:06 &lt; darthsteven&gt; ah okay
07:06 &lt; eft_&gt; either way, it would be nice to increase the cookie timeout on community.aegir.org
07:06 &lt;@anarcat&gt; yeah, if anyone else wants to jump in, feel free to talk :)
07:06 &lt; darthsteven&gt; So I've been thinking mostly
07:06 &lt;@anarcat&gt; if you're doing dev on aegir, now's the time to talk (after darthsteven :)
07:06 &lt; darthsteven&gt; Mainly about provision contexts
07:07 &lt; darthsteven&gt; and provision-save and services and how all the pieces fit together
07:07 &lt; darthsteven&gt; I have an outline for a handbook page(s) that should document most of what's going on
07:08 &lt;@mig5&gt; oh that'd be nice. since you have chosen the bit that no-one understands how it really is meant to work :)
07:08 &lt; darthsteven&gt; Nothing new in contrib land from me this week
07:08 &lt;@anarcat&gt; cool
07:08 &lt;@anarcat&gt; i think Vertice did some work in that direction in the handbook already
07:08 &lt;@anarcat&gt; ok
07:08 &lt;@anarcat&gt; anyone else?
07:08 &lt; darthsteven&gt; mig5: yeah, it is complex...
07:08 &lt; darthsteven&gt; that's it from me
07:08 &lt;@mig5&gt; yes darthsteven <a href="../../../../41/index.html" title="http://community.aegirproject.org/node/41">http://community.aegirproject.org/node/41</a> have a read of that if you've not already
07:09 &lt;@anarcat&gt; cool
07:09 &lt;@anarcat&gt; ok last call, anyone else?
07:09 &lt;@anarcat&gt; anybody have time to log this into the community site?
07:09 &lt;@mig5&gt; sure
07:09 &lt;@mig5&gt; thanks all! goodscrum
07:10 &lt;@anarcat&gt; thanks!
07:10 &lt;@anarcat&gt; happy new year everybody, and thanks for attending!
07:10 &lt;@anarcat&gt; SCRUM END!
07:10 &lt; darthsteven&gt; 
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-91.html?destination=node%2F250%23comment-form">Login</a> or <a href="../../../../../user/register/index-91.html?destination=node%2F250%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-91.html?destination=node%2F250%23comment-form">Login</a> or <a href="../../../../../user/register/index-91.html?destination=node%2F250%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-264" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../264/index.html">Weekly Scrum IRC Log: 2011-01-20</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
(03:00:17 PM) anarcat: welcome to our weeeeekly scrum!
(03:00:28 PM) anarcat: good morning, good evening, wherever you are!
(03:00:39 PM) anarcat: those new to the scrum can read on them here; <a href="../../../../../scrums/index.html" title="http://community.aegirproject.org/scrums">http://community.aegirproject.org/scrums</a>
(03:00:43 PM) anarcat: otherwise i'll start
(03:00:57 PM) anarcat: yesterday i upgraded our prod server from alpha14 to beta2, and it went well
(03:01:00 PM) anarcat: mostly without an hitch
(03:01:05 PM) anarcat: i was really surprised, actually
(03:01:15 PM) anarcat: i expected to see the weird issues with aliases
(03:01:27 PM) anarcat: <a href="http://drupal.org/node/1003700" title="http://drupal.org/node/1003700">http://drupal.org/node/1003700</a>
(03:01:30 PM) anarcat: but i didn't
(03:01:34 PM) mig5: pretty smooth upgrades from the later alphas
(03:01:44 PM) anarcat: however, when upgrading a client from alpha6, i had issues with the upgrade path
(03:01:56 PM) anarcat: <a href="http://drupal.org/node/973826" title="http://drupal.org/node/973826">http://drupal.org/node/973826</a>
(03:02:08 PM) anarcat: the above contains a nice demonstration on how to fix the issues
(03:02:22 PM) anarcat: i am not sure we should fix anything there, as it's really hairy to fix and affects very few people
(03:02:25 PM) anarcat: not worth it, i think
(03:02:32 PM) anarcat: i have filed a bunch of bug nevertheless
(03:02:36 PM) anarcat: after our prod upgrade
(03:02:40 PM) anarcat: had performance issues with the migrate page
(03:02:51 PM) anarcat: which we fixed: <a href="http://drupal.org/node/1033072" title="http://drupal.org/node/1033072">http://drupal.org/node/1033072</a>
(03:02:59 PM) anarcat: that needs testing, but maybe I can just merge it now
(03:03:13 PM) anarcat: we also have numerous issues with the site form that remain
(03:03:15 PM) anarcat: esp <a href="http://drupal.org/node/1033078" title="http://drupal.org/node/1033078">http://drupal.org/node/1033078</a>
(03:03:23 PM) anarcat: ie. the ssl cert selection doesn't pop up
(03:03:37 PM) anarcat: and that page is still slow as hell
(03:03:41 PM) anarcat: which may be related to <a href="http://drupal.org/node/955854" title="http://drupal.org/node/955854">http://drupal.org/node/955854</a>
(03:03:59 PM) anarcat: so that's it for last week
(03:04:06 PM) mig5: wow! :)
(03:04:09 PM) anarcat: next week i'll try to fix a shitload of bugs i have in the backlog
(03:04:15 PM) anarcat: that other koumbit workers reported
(03:04:24 PM) anarcat: mostly upgrade issues, sometimes contrib-modules (e.g. date) related
(03:04:27 PM) ergonlogic: anarcat++
(03:04:38 PM) anarcat: once i'm through this, i am thinking of looking again at a RC release
(03:04:45 PM) mig5: anarcat has taken over skynet again
(03:04:49 PM) anarcat: but i am curious what others think about this
(03:04:58 PM) anarcat: mig5: i wish...
(03:05:07 PM) anarcat: i still struggle to free some time for aegir here
(03:05:12 PM) anarcat: but that may get better with time
(03:05:17 PM) anarcat: my focus right now is stabilising our thing
(03:05:24 PM) mode (+v grugnog_laptop) by ChanServ
(03:05:30 PM) mig5: i am the opposite, i have the time but not the skills :)
(03:05:33 PM) anarcat: targeting feb. for stabilisation, then working on security during feb.
(03:05:39 PM) mig5: yes for RC, that's a good idea
(03:05:49 PM) mig5: i even forgot we agreed to jump from 0.4 to 1.0
(03:05:52 PM) mig5: in september
(03:06:01 PM) anarcat: re. taht, we still have 2 RC bugs
(03:06:04 PM) anarcat: <a href="http://drupal.org/node/1003908" title="http://drupal.org/node/1003908">http://drupal.org/node/1003908</a>
(03:06:07 PM) anarcat: <a href="http://drupal.org/node/993944" title="http://drupal.org/node/993944">http://drupal.org/node/993944</a>
(03:06:10 PM) anarcat: The bulk operations form for site listings shouldn't list install and import tasks
(03:06:14 PM) anarcat: ssl rollback failure
(03:06:25 PM) anarcat: we should consider the option of rolling back the bulk ops shit if it breaks stuff
(03:06:32 PM) anarcat: but that seems like an easy thing to fix
(03:06:36 PM) anarcat: the ssl rollback sounds more hairy
(03:06:46 PM) anarcat: but i think we can ship an RC with it as a known issue
(03:06:51 PM) mig5: yeah.. i opened a ticket here and there about bulk ops. not really major bugs, just little niggly things
(03:06:53 PM) anarcat: that's it for me
(03:06:55 PM) mig5: yeah
(03:07:01 PM) mig5: ok
(03:07:09 PM) anarcat: go mig5 !
(03:07:13 PM) mig5: in classic mig5 style i have done nothing
(03:07:15 PM) mig5: EXCEPT
(03:07:18 PM) mig5: <a href="http://drupal.org/node/976300" title="http://drupal.org/node/976300">http://drupal.org/node/976300</a>
(03:07:26 PM) mig5: i fixed our major and possibly only data-loss bug
(03:07:39 PM) mig5: that was deleting stuff from a site's 'files'dir on a remote server on every verify
(03:07:43 PM) mig5: and hence migrate, etc.
(03:07:52 PM) anarcat: "just that"
(03:07:56 PM) anarcat: dude that's awesome
(03:08:00 PM) mig5: that was a major aegirwtf but it seems to be ok now
(03:08:07 PM) omega8cc: that fix makes rc possible, imo
(03:08:08 PM) anarcat: cool
(03:08:32 PM) anarcat: right
(03:08:36 PM) anarcat: mig5: what's up next week?
(03:08:43 PM) mig5: i don't think i've done anything else :s i have given up on the idea of getting anywhere with the dns stuff, so i won't make promises there
(03:08:44 PM) anarcat: dns? ;)
(03:08:47 PM) mig5: haha
(03:08:47 PM) anarcat: Vertice: you there?
(03:08:51 PM) mig5: damn
(03:08:52 PM) anarcat: hehe
(03:08:55 PM) anarcat: it's okay
(03:09:05 PM) anarcat: our discussion helped me rehash the roadmap, so it's all good
(03:09:39 PM) anarcat: mig5: anything else?
(03:09:53 PM) mig5: this is weird: <a href="http://drupal.org/node/1025972" title="http://drupal.org/node/1025972">http://drupal.org/node/1025972</a> and i think i've reproduced it, so i will probably take a look at that
(03:10:06 PM) mig5: it's not *too* critical but it means remote servers need a manual apache restart or something, after the task completes
(03:10:14 PM) anarcat: right
(03:10:15 PM) anarcat: ok
(03:10:15 PM) mig5: so this is just stability stuff
(03:10:22 PM) mig5: that's it from me
(03:10:28 PM) anarcat: i have seen weird ordering issues like this even in local, but i never found it to be a bug so far
(03:10:31 PM) anarcat: okay
(03:10:34 PM) anarcat: omega8cc / ergonlogic / others: any comments? what you did last week / will do next week?
(03:10:37 PM) anarcat: Vertice: ?
(03:11:10 PM) darthsteven: I didn't get chance to write up 'contexts' this week
(03:11:19 PM) darthsteven: But hope to next week
(03:11:23 PM) anarcat: awesome
(03:11:27 PM) anarcat: otherwise i want to say that we (the aegir project) are always looking for new blood
(03:11:34 PM) darthsteven: That's it from me
(03:11:49 PM) mig5: nice darthsteven, i am looking forward to learning how this stuff works :)
(03:11:55 PM) omega8cc: from me - I made a few important changes to nginx configuration and plan to submit all of them shortly, also next week I plan to submit nginx installer, promised long time ago
(03:11:59 PM) ergonlogic: nothing really on my end, though I've noticed some odd behaviour since updating to beta2, so I'll be looking through open issues and filing some bugs possibly this week
(03:12:12 PM) anarcat: we need testers (dl new release and report bugs, test existing issues), documentors (community.aegirproject.org/handbook!) and developpers (submit and review patches and we will love you and give you commit access)
(03:12:35 PM) anarcat: ergonlogic: awesome!
(03:12:44 PM) anarcat: omega8cc: patches to hostmaster-install? or bash scripting?
(03:13:28 PM) anarcat: otherwise, anybody else has somethign to say?
(03:13:35 PM) ergonlogic: oh, also DNS for api.aegirproject.org should shortly be working (thanks Anarcat!), so check out that resource
(03:13:42 PM) omega8cc: anarcat: mostly nginx conf templates, installer script (very simple bash) and some UI improvements
(03:13:58 PM) ergonlogic: It exposes some pretty spotty documentation in the code
(03:14:15 PM) anarcat: oh right, we are in the processing of transfering the dns to a new registrar (yay gandi.net!) and hopefully that will go without an hitch
(03:14:23 PM) anarcat: omega8cc: i'd love to see this factored into hostmaster-install
(03:14:33 PM) anarcat: ergonlogic: those could be reported as bugs, maybe...
(03:14:43 PM) mig5: sure
(03:14:45 PM) anarcat: ergonlogic: Vertice expressed interest in working on those documentation issues
(03:14:55 PM) anarcat: okay, so that's pretty much it, thanks for attending our daily scrum!
(03:15:03 PM) mig5: cheers
(03:15:05 PM) anarcat: have a nice day, wherever you are!
(03:15:09 PM) ergonlogic: that's what I had in mind, with maybe some doc patches where I can grok the code
(03:15:16 PM) anarcat: can somebody file this in the OA site?
(03:15:19 PM) darthsteven: Bad docs are bugs for sure
(03:15:21 PM) omega8cc: anarcat: that is simple installer and how-to for standalone nginx based installs,
(03:15:23 PM) ergonlogic: I got it
(03:15:29 PM) anarcat: ergonlogic: thanks
(03:15:37 PM) anarcat: scrum over, see you again next week :)
(03:15:38 PM) anarcat: ciao !
(03:15:40 PM) darthsteven: Thanks everyone
(03:15:43 PM) ergonlogic: Take care
(03:15:47 PM) omega8cc: ciao
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-92.html?destination=node%2F264%23comment-form">Login</a> or <a href="../../../../../user/register/index-92.html?destination=node%2F264%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-92.html?destination=node%2F264%23comment-form">Login</a> or <a href="../../../../../user/register/index-92.html?destination=node%2F264%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-280" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../280/index.html">Weekly Scrum IRC Log: 2011-01-27</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
07:01 &lt;@anarcat&gt; morning!
07:01 &lt;@anarcat&gt; scrum is late omg! ;)
07:01 &lt;@mig5&gt; hai!
07:01 &lt;@mig5&gt; oops
07:01 &lt;@anarcat&gt; sorry i'm late :)
07:01 &lt;@mig5&gt; too many emails to read
07:01 &lt;@anarcat&gt; first rule of scrums : start on time damnit! ;)
07:01 &lt; eft_&gt; people still use email?
07:02 &lt;@mig5&gt; only 1 minute off. i blame timezones
07:02 &lt;@anarcat&gt; so anyways
07:02 &lt;@anarcat&gt; i almost caught up on all my issues
07:03 &lt;@anarcat&gt; i reported a few following significant upgrades
07:03 &lt;@anarcat&gt; maybe that was last week
07:03 &lt;@mig5&gt; I think so :)
07:03 &lt;@anarcat&gt; i want to make rc tonight
07:03 &lt;@mig5&gt; !
07:03 &lt;@anarcat&gt; oh, we have deployed our first d7 platform here
07:03 &lt;@mig5&gt; nicely done.hefring in here runs on d7
07:04 &lt;@anarcat&gt; still waiting on actual tests for this - i think i'll just merge it in: <a href="http://drupal.org/node/1033072" title="http://drupal.org/node/1033072">http://drupal.org/node/1033072</a>
07:04 &lt;@anarcat&gt; i agree with <a href="http://drupal.org/node/1039168" title="http://drupal.org/node/1039168">http://drupal.org/node/1039168</a> that path shouldn't be editable
07:04 &lt;@anarcat&gt; and well, that's it!
07:04 &lt;@mig5&gt; nice!
07:04 &lt;@anarcat&gt; i think that koumbit will rework its own roadmap next week, so i'll keep you up to date on that
07:04 &lt;@anarcat&gt; so how about an rc?
07:04 &lt;@mig5&gt; yes please do merge that in, i have heard a number of people add those indexes themselves and report good results
07:05 &lt;@mig5&gt; an rc sounds good
07:05 &lt;@mig5&gt; i would like to fix this <a href="http://drupal.org/node/1004526" title="http://drupal.org/node/1004526">http://drupal.org/node/1004526</a>
07:05 &lt;@mig5&gt; this functionality got ripped out for some reason in like, June
07:05 &lt;@mig5&gt; so it's not critical, but i hate seeing good work disappear
07:05 &lt;@anarcat&gt; ah
07:05 &lt;@anarcat&gt; yeah, agreed
07:06 &lt;@mig5&gt; i'll briefly run through what i've been doing in the last 48 hours
07:06 &lt;@mig5&gt; i've mainly been trying to stabilise a bunch of shit
07:06 &lt;@mig5&gt; You could create platforms and servers with the same names/hostnames, leading to Duplicate entries and context clashes
07:06 &lt;@mig5&gt; <a href="http://drupal.org/node/1039010" title="http://drupal.org/node/1039010">http://drupal.org/node/1039010</a> 
              <a href="http://git.aegirproject.org/?p=hostmaster.git;a=commitdiff;h=772cd8c2b5e864e113d3961603885e5eab31d632" title="http://git.aegirproject.org/?p=hostmaster.git;a=commitdiff;h=772cd8c2b5e864e113d3961603885e5eab31d632">http://git.aegirproject.org/?p=hostmaster.git;a=commitdiff;h=772cd8c2b5e...</a>
07:07 &lt;@mig5&gt; Drush 4.x is broken in terms of rsyncing stuff to remote servers, so I reverted HEAD to use 3.3. see <a href="http://drupal.org/node/1041386" title="http://drupal.org/node/1041386">http://drupal.org/node/1041386</a>
07:07 &lt;@mig5&gt; Drush Make beta10 is broken re: remote makefile referencing. So upped to beta11. <a href="http://drupal.org/node/979656" title="http://drupal.org/node/979656">http://drupal.org/node/979656</a>
07:07 &lt;@mig5&gt; committed that fix for that Quota bug: <a href="http://drupal.org/node/1003666" title="http://drupal.org/node/1003666">http://drupal.org/node/1003666</a>
07:07 &lt;@mig5&gt; Some deprecated ereg_replace thing in provision
07:07 &lt;@mig5&gt; uid 1 was not mapped to client 1 in hosting_client_user which broke some client-based platform access control <a href="http://drupal.org/node/996578" title="http://drupal.org/node/996578">http://drupal.org/node/996578</a>
07:08 &lt;@mig5&gt; unconed identified an infinite loop with provision-save and contexts: <a href="../../../../267/index.html" title="http://community.aegirproject.org/node/267">http://community.aegirproject.org/node/267</a>
07:08 &lt;@mig5&gt; I couldn't reproduce the infinite loop but can confirm clusters simply don't work
07:08 &lt;@anarcat&gt; about that uid1 thing - i thought uid1 was bypassing all access checks?
07:08 &lt;@anarcat&gt; i think ergonlogic had problems with that in the past too
07:08 &lt;@anarcat&gt; i see
07:08 &lt;@mig5&gt; it *was* at some point
07:08 &lt;@anarcat&gt; it'd be nice that node/267 be reported as a real bug...
07:08 &lt;@mig5&gt; but i decided, if we are letting people check a box granting access to that user, then maybe it should just work as expected
07:08 &lt;@anarcat&gt; too bad ppl report issues on community.a.o
07:08 &lt;@anarcat&gt; agreed
07:08 &lt;@mig5&gt; if it bypasses the checks, it should probably not even be a checklist option, 
07:08 &lt;@mig5&gt; so i just fixed it the other way
07:08  * anarcat nods
07:08 &lt;@anarcat&gt; ok
07:09 &lt;@mig5&gt; yes unconed, He supplied me with a patch that seems to fix clusters! but concerned that I still couldn't reproduce the infinite loop.
07:09 &lt;@mig5&gt; xk has similar issues, so I put the patch there for review: <a href="http://drupal.org/node/1016890" title="http://drupal.org/node/1016890">http://drupal.org/node/1016890</a>
07:09 &lt;@anarcat&gt; cool
07:09 &lt;@mig5&gt; and finally that Aliases thing
07:09 &lt;@mig5&gt; (phew! yes i did take notes in preparation for this scrum :)
07:09 &lt;@mig5&gt; that's me done
07:09 &lt;@anarcat&gt; man you're awesome
07:09 &lt;@anarcat&gt; do you plan to be as awesome next week? ;)
07:10 &lt;@mig5&gt; i can try, but i might balance it out by throwing in some migressions
07:10 &lt;@mig5&gt; :)
07:10 &lt; eft_&gt; my efforts are barely worth mentioning
07:10 &lt; eft_&gt; I didn't mention last week that I contributed a small wiki : using drush_make to optimize workflow <a href="../../../../256/index.html" title="http://community.aegirproject.org/node/256">http://community.aegirproject.org/node/256</a>
07:11 &lt;@mig5&gt; eft_: yes, nice article!
07:11 &lt;@anarcat&gt; mig5: excellent :)
07:11 &lt;@anarcat&gt; okay, anyone else has anything to add?
07:11 &lt;@anarcat&gt; anybody scared of an RC?
07:11 &lt;+omega8cc&gt; This week (well, in the last minute) I rewrote and finally submitted for review two commits: one to add Nginx related how-to in the docs/INSTALL.txt - <a href="http://drupal.org/node/1042402" title="http://drupal.org/node/1042402">http://drupal.org/node/1042402</a> and second (too big probably, sorry!) with many improvements for Nginx configuration templates: <a href="http://drupal.org/node/1042312" title="http://drupal.org/node/1042312">http://drupal.org/node/1042312</a>. I promise to submit future changes in the small incremental chunks instead of one big update. Next week I plan to submit even more Nginx related improv
07:11 &lt;+omega8cc&gt; and will debug mysterious issue - Aegir fails to rewrite paths in the "files" table on second and next site rename tasks, it works only on the first rename and I reproduced it on more than 5 imported sites, so something for sure interesting to debug and submit a patch (I hope). Also, I plan to finally work on some multiserver deployments and hope to help to find a fix for Drush 4.1 - <a href="http://drupal.org/node/1041386" title="http://drupal.org/node/1041386">http://drupal.org/node/1041386</a>. That is it from me.
07:12 &lt;@anarcat&gt; omega8cc: your first line was stripped
07:12 &lt;@anarcat&gt; at Nginx related improv
07:12 &lt;@mig5&gt; nice, yes i freaked out the other day not knowing how to set up aegir with just nginx :) so those docs would be great
07:12 &lt;@anarcat&gt; thanks omega8cc ! :)
07:13 &lt;@anarcat&gt; your work is really appreciated, i wonder if we shouldn't just commit the huge patch with the hope that next ones will be incremental :)
07:13 &lt;@anarcat&gt; esp. considering you also use git, you should really "commit often" :)
07:13 &lt;@anarcat&gt; okay, anybody else?
07:13 &lt;@mig5&gt; anRC would be great - either way, yes definitely a new release, there are some annoying and critical bugs in beta2 (the data loss multiserver one for one)
07:13 &lt; eft_&gt; any word from devseed on moving c.a.o. ?
07:13 &lt;@mig5&gt; oh yes. or a.o
07:14 &lt;@mig5&gt; does anyone want to work on a drupalised version of a.o? and maybe give it to anarcat to host (or i can host it)
07:14 &lt;@mig5&gt; i can't theme for shit, so I'm out :)
07:14 &lt; eft_&gt; how much is there?
07:14 &lt;@anarcat&gt; mig5: i don't think we should drupalize a.o, actually
07:14 &lt;@mig5&gt; ah, cool that's fine with me
07:14 &lt;@anarcat&gt; just leave it like this, but remove the time-changing stuff
07:14 &lt;@anarcat&gt; and yeah we can host it
07:14 &lt;@mig5&gt; i remember adrian mentioning it
07:15 &lt;@anarcat&gt; oh, the DNS transfer of a.o and .com is stuck
07:15 &lt;@mig5&gt; everyone is annoyed at the g.d.o link, so if we could change that at least
07:15 &lt;@mig5&gt; ah
07:15 &lt;@anarcat&gt; email problems between gandi and devseed
07:15 &lt;@anarcat&gt; yeah
07:15 &lt;@anarcat&gt; but they wanted to transfer ownership of the domains too
07:15 &lt;@anarcat&gt; and i started the xfer
07:15 &lt;@mig5&gt; oh i see
07:16 &lt;@anarcat&gt; but anyways, yeah, transfer the NS and we'll go ahead from there
07:16 &lt;@anarcat&gt; okay, that's it for the scrum folks, thanks for attendign!
07:16  * anarcat heading for a sandwich
07:16 &lt;@mig5&gt; cheers
07:16 &lt; eft_&gt; later
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-93.html?destination=node%2F280%23comment-form">Login</a> or <a href="../../../../../user/register/index-93.html?destination=node%2F280%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-93.html?destination=node%2F280%23comment-form">Login</a> or <a href="../../../../../user/register/index-93.html?destination=node%2F280%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-301" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../301/index.html">Weekly Scrum IRC Log: 2011-02-03</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>
06:59 &lt;@anarcat&gt; scrum time!
06:59 &lt;@anarcat&gt; mig5: you there?
06:59 &lt;@mig5&gt; yep
06:59 &lt;@anarcat&gt; omega8cc / ergonlogic / others... scrum starts now
06:59 &lt;@anarcat&gt; mig5: you wanna start?
06:59 &lt;@anarcat&gt; need to remove my skis
07:00 &lt;@mig5&gt; ok
07:00 &lt;@mig5&gt; i haven't done much, i still would like testers of <a href="http://drupal.org/node/1004526" title="http://drupal.org/node/1004526">http://drupal.org/node/1004526</a>
07:00 &lt;@mig5&gt; but it sounds like we have two different issues there
07:00 &lt;@mig5&gt; and that i misunderstood the first issue
07:01 &lt;@mig5&gt; drush 4 remains unusable at least for multiserver, i had some difficulty convincing the drush guys that it was their problem <a href="http://drupal.org/node/1041386" title="http://drupal.org/node/1041386">http://drupal.org/node/1041386</a>
07:01 &lt;@anarcat&gt; i wanted to test that and <a href="http://drupal.org/node/1016890" title="http://drupal.org/node/1016890">http://drupal.org/node/1016890</a> for ya before the RC
07:01 &lt;@mig5&gt; yes it's that cluster thing and the aliases that would be nice to get in before the RC
07:01 &lt;@mig5&gt; oh
07:02 &lt;@mig5&gt; and the package indexes
07:02 &lt;@mig5&gt; which i confirmed did seem to speed things up even on my tiny system
07:02 &lt;@mig5&gt; so do go ahead and merge that
07:02 &lt;@mig5&gt; that's all from me I think :s
07:02 &lt;@anarcat&gt; okay
07:02 &lt;@anarcat&gt; i can take a look at the drush 4 issue
07:03 &lt;@anarcat&gt; they are correct that the API is not supposed to change in dr4
07:03 &lt;@anarcat&gt; so if it's a dr bug, we'll have to wait until dr5 for a fix
07:03 &lt;@mig5&gt; yeah, on the other hand, they have completely reversed the logic
07:03 &lt;@mig5&gt; mmm.
07:03 &lt;@anarcat&gt; which is fine because dr5 is coming soon
07:03 &lt;@mig5&gt; o rly. fair enough!
07:03 &lt;@anarcat&gt; i'll weigh in on that one and we'll see
07:03 &lt;@anarcat&gt; on my side
07:03 &lt;@anarcat&gt; i haven't done much. :)
07:03 &lt;@anarcat&gt; still swamped with internal work here
07:04 &lt;@anarcat&gt; i wanted to do an RC, but failed to find time, i have scheduled time to review patches and do the RC on monday
07:04 &lt;@mig5&gt; oh nice, thanks
07:04 &lt;@anarcat&gt; maybe we should stick with 3.3 for aegir 4
07:04 &lt;@anarcat&gt; if you want to take care of the release before that, that's fine with me too though :)
07:04 &lt;@anarcat&gt; otherwise well i opened a few crazy issues
07:05 &lt;@mig5&gt; oh i need to try and reproduce omega8cc's report here: <a href="http://drupal.org/node/1047922" title="http://drupal.org/node/1047922">http://drupal.org/node/1047922</a> . not sure that's drush 4's fault, unless we know it works fine on 
              3.3 too
07:05 &lt;@anarcat&gt; most notably the exportable backup and wordpress support craziness
07:05 &lt;@mig5&gt; haha
07:06 &lt;@anarcat&gt; also, we have migrated to koumbit's DNS servers so i can do DNS changes if people need that to happen from now on
07:06 &lt;@anarcat&gt; api.aegirproject.org is up
07:06 &lt;@anarcat&gt; and aegirproject.org has been fixed
07:06 &lt;@mig5&gt; awesome stuff
07:07 &lt;@anarcat&gt; i think this is it for me too, i'm getting more and more towards freeing up my time to work on aegir, and we are aiming to work on our internal roadmap
                 'real soon' here at koumbit
07:07 &lt;@anarcat&gt; anybody else wants to cue in?
07:08 &lt;@anarcat&gt; anybody else is awake? :)
07:09 &lt;@anarcat&gt; so i guess this just makes for a short scrum! :)
07:09 &lt;@mig5&gt; no problem - i can go back to bed :)
07:10 &lt; kvanderw&gt; anarcat: what is a scrum? and could dummies help?
07:10 &lt;@anarcat&gt; thank you all
07:11 &lt;@anarcat&gt; kvanderw: <a href="../../../../../scrums/index.html" title="http://community.aegirproject.org/scrums">http://community.aegirproject.org/scrums</a>

</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-94.html?destination=node%2F301%23comment-form">Login</a> or <a href="../../../../../user/register/index-94.html?destination=node%2F301%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-94.html?destination=node%2F301%23comment-form">Login</a> or <a href="../../../../../user/register/index-94.html?destination=node%2F301%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-340" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../340/index.html">Weekly Scrum IRC Log: 2011-02-10</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first last"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
</ul></div><pre>
07:00 &lt;@anarcat&gt; aaaalright
07:00 &lt;@anarcat&gt; hellow everybodyyy!
07:00 &lt;@anarcat&gt; welcome to our weekly scrums
07:00 &lt;@anarcat&gt; (we need a bot for that cheering crap - anyways)
07:00 &lt;@anarcat&gt; i
07:00 &lt;@anarcat&gt; have done nothing again. :P
07:00 &lt;@anarcat&gt; actually, that's not true
07:00 &lt;@anarcat&gt; i have done a good review of the queue
07:00 &lt;@anarcat&gt; to try to prepare for the RC
07:01 &lt;@anarcat&gt; committed a bunch of things lying around
07:01 &lt;@mig5&gt; you've done great
07:01 &lt;@anarcat&gt; and then univate decided to submit a bunch of patches on top of that, so i'll have to start all over again
07:01 &lt;@anarcat&gt; univate: thanks ;)
07:01 &lt;@anarcat&gt; yeah, it's been good
07:01 &lt;@anarcat&gt; i still have to review my own internal aegir shit before we go towards a release
07:01 &lt;@anarcat&gt; we have around 200+ issues in our internal queue, it's a mess
07:02 &lt;@anarcat&gt; we had a marketing meeting today where we determined our priorities, but i am not sure i should talk about that now ;)
07:02 &lt;@mig5&gt; :)
07:02 &lt;@anarcat&gt; expect another announce soon
07:02 &lt;@anarcat&gt; we are in talks with devseed to migrate the OA site (community.a.o) to Koumbit (? or mig5 ?) THIS MONDAY!
07:03 &lt;@anarcat&gt; so consider this the first announcement:
07:03 &lt;@anarcat&gt; ON MONDAY, 16H EST, the community site will go down for a migration
07:03 &lt;@anarcat&gt; (that's about the same time as now +1h)
07:03 &lt;@anarcat&gt; i still hope that we can RC next week, which will mean creating the 0.4.x branch
07:04 &lt;@anarcat&gt; but before that, i want to do some tests on my side and review our queue
07:04 &lt;@anarcat&gt; we had a weird issue with cron not running on a site here, that i have trouble making a diagnostic of
07:04 &lt;@anarcat&gt; with that
07:04 &lt;@anarcat&gt; i think i am done, mig5 ?
07:04 &lt;@mig5&gt; ok
07:04 &lt;@mig5&gt; not much to report, other than i think the only real blocker to getting an rc out, is that the upgrade path is broken
07:05 &lt;@mig5&gt; <a href="http://drupal.org/node/1056864" title="http://drupal.org/node/1056864">http://drupal.org/node/1056864</a>
07:05 &lt;@anarcat&gt; i was scared to read that issue
07:05 &lt;@mig5&gt; i really need to speak to unconed about this since it's his patch, 
07:05 &lt;@mig5&gt; and only he understands it, it's like talking to another Vertice :)
07:06 &lt;@anarcat&gt; good good :)
07:06 &lt;@mig5&gt; that's really all from me :s
07:06 &lt;@anarcat&gt; plans for next week?
07:06 &lt;@mig5&gt; to try and fix that, I suppose
07:06 &lt;@anarcat&gt; cool
07:07 &lt;@anarcat&gt; (as an aside, we just found this code in /var/aegir/fuck.php on our prod server, before destroying it, i pastebin'd it in the idea it might be useful for others: <a href="http://pastebin.com/163byC1z" title="http://pastebin.com/163byC1z">http://pastebin.com/163byC1z</a>)
07:07 &lt;@anarcat&gt; (i am not sure what it does)
07:07 &lt;@mig5&gt; wtf
07:07 &lt;@anarcat&gt; okay, anyone else?
07:07 &lt;+omega8cc&gt; Last week I worked on some new features in the Nginx for Aegir configuration, like improved caching and performance (patches to be submitted), and tested everything with Drush 4 and 5 (head)
07:07 &lt;+omega8cc&gt; Now still working on issues like <a href="http://drupal.org/node/1056864" title="http://drupal.org/node/1056864">http://drupal.org/node/1056864</a>, and hope to fix more Drush related issues next week to get Aegir Drush 4 compatible. That is it from me :)
07:08 &lt;@anarcat&gt; adrinux / darthsteven / EclipseGc / ergonlogic / grugnog_ / mvc / sfyn / skwashd / univate : you're all aegir contributors and welcome to say hi during this scrum - what you're working on these days... etc
07:08 &lt;@anarcat&gt; thanks omega8cc !
07:08 &lt;+darthsteven&gt; Sure...
07:08 &lt;@mig5&gt; oh yeas darthsteven wrote some killer docs :)
07:08 &lt;+darthsteven&gt; I added the first part if some docs about context
07:09 &lt;+darthsteven&gt; More to follow, and extra docs about services too
07:09 &lt;+EclipseGc&gt; anarcat: oh awesome
07:09 &lt;+darthsteven&gt; That's it from me
07:09 &lt;@anarcat&gt; thanks darthsteven
07:10 &lt;+EclipseGc&gt; all of my time these days has been devoted to non-aegir-specific Drupal 7 work these days, though I do see a number of potential point of collaboration on various items in D7 for whenever aegir decides to make that jump
07:10 &lt;@anarcat&gt; EclipseGc: have you done d6 to d7 porting work?
07:10 &lt;@anarcat&gt; would you be interested in contributing to that?
07:11 &lt;+EclipseGc&gt; anarcat: I've worked on ctools/page_manager porting to D7 yes, as well as my own context_admin
07:11 &lt;@anarcat&gt; how's that going? :)
07:12 &lt;+EclipseGc&gt; anarcat: very good all things considered, native support for all entity types in page_manager is a pretty freaking awesome thing
07:12 &lt;@anarcat&gt; :)
07:12 &lt;@anarcat&gt; alright
07:12 &lt;@anarcat&gt; thank you EclipseGc
07:12 &lt;@anarcat&gt; anyone else has anything to add to this mighty scrum?
07:13 &lt;+EclipseGc&gt; anarcat: from an aegir perspective, (as an example) if say, "site nodes" became "site entities" in the D7 version, we could still utilize panels to display the site information (not that we're doing that now, but it is a possibility)
07:13 &lt;@anarcat&gt; oh, an idea i had: we should have a "wildcard domains" variable in the frontend for wildcards pointing to the aegir server while we fix DNS, then when people create sites, they can just type the left part of the domain and choose the wildcard from a dropdown
07:13 &lt;@anarcat&gt; EclipseGc: right, ok
07:13 &lt;@anarcat&gt; EclipseGc: should we wait for d7 before creating the "dns zone" content-type for example?
07:13 &lt;@anarcat&gt; how easy is it to declare entities programmatically?
07:14 &lt;@anarcat&gt; anyways, i have to head out now, so thanks everyone for attending, and have a nice day
07:14 &lt;+EclipseGc&gt; anarcat: well, the only way to declare an entity is programatically, there's no... entity ui or anything that allows you to build new entities
07:14 &lt;@anarcat&gt; can anyone take care of uploading this to the community site?
07:14 &lt;@anarcat&gt; EclipseGc: ok
07:14 &lt;+EclipseGc&gt; anarcat: thus far, a new entity, front to back all manual is minimum about 400 lines of code if you want it to be fairly usable
07:15 &lt;@mig5&gt; yeah i'll sort it later
07:15 &lt;@anarcat&gt; EclipseGc: ow?
07:15 &lt;+EclipseGc&gt; anarcat: I'm hoping that fago's entity_api and ctools can have a meeting of the minds and do something really great to make all of that (including user interfaces) much easier
07:16 &lt;+EclipseGc&gt; but that is still non-existent yet, and many people are uncomfortable depending on entity_api at the moment (though I hear it cuts down on the necessary code for an entity significantly)
07:16 &lt;@anarcat&gt; aand how easy is it to port existing content types to that ... stuff?
07:16 &lt;+EclipseGc&gt; anarcat: I'm going to change your vocabulary real quick (if you don't mind) just so there's no confusion
07:17 &lt;@anarcat&gt; i really have to head out, but feel free, i'll read on later tonight
07:17 &lt;@anarcat&gt; ciao everyone
07:17 &lt;+EclipseGc&gt; anarcat: "content types" or what we call node types in D6 and below are actually "bundles" (generic term) of the node entity now.  You can still call them whatever you like, but to be precise I usually say "node bundles".  All entity types can have bundles
07:18 &lt;@anarcat&gt; fuck
07:18 &lt;@anarcat&gt; sorry, screwed up there
07:18 &lt;@anarcat&gt; EclipseGc: got it :)
07:18 &lt;@anarcat&gt; ciao for real
07:18 &lt;+omega8cc&gt; cia
07:18 &lt;+omega8cc&gt; o
07:18 &lt;+omega8cc&gt; :)
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-95.html?destination=node%2F340%23comment-form">Login</a> or <a href="../../../../../user/register/index-95.html?destination=node%2F340%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-95.html?destination=node%2F340%23comment-form">Login</a> or <a href="../../../../../user/register/index-95.html?destination=node%2F340%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-356" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../356/index.html">Weekly Scrum IRC Log: 2011-02-17</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first last"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
</ul></div><pre>
07:00 &lt;@anarcat&gt; so welcome to our weekly scrum
07:01 -!- JoshBenner_ [~quassel@pool-173-59-14-26.phlapa.fios.verizon.net] has joined #aegir
07:01 &lt;@anarcat&gt; so to start with - i had a major fuckup with the community site with a verify that went bad
07:01 &lt;@anarcat&gt; because the alias didn't have the profile set in
07:01 &lt;@anarcat&gt; i documented all this in here <a href="../../../../355/index.html" title="http://community.aegirproject.org/node/355">http://community.aegirproject.org/node/355</a>
07:01 &lt;@mig5&gt; reading that now. why did oyu need to manually run provision-deploy rather than standard migrate?
07:02 &lt;@anarcat&gt; mig5: because the site wasn't in aegir at first
07:02 &lt;@mig5&gt; gotcha
07:02 &lt;@anarcat&gt; i was importing from devseed
07:02 &lt;@mig5&gt; oh ofcourse *slaps forehead*
07:02 &lt;@anarcat&gt; maybe i should clarify that.. but anyways
07:02 &lt;@mig5&gt; no i'm just a dick and just woke up :)
07:02 &lt;@anarcat&gt; other than that, this week i have struggled with the issue queue
07:02 &lt;@mig5&gt; +1...
07:03 &lt;@anarcat&gt; specificall with that eugene guy which apparently decided we were evil and decided to develop his own stuff privately and stop collaborating on the queue
07:03 &lt;@anarcat&gt; i wrote a response in the issue queue, but i wanted to share here that it pissed me off real bad to hear somebody just go away like this because we're not being nice enough
07:03 &lt;@anarcat&gt; when he's treating us with abuse and duplicate issues
07:04 &lt;@anarcat&gt; hopefully he will not come back to the queue but share his work with others so that we don't reinvent the wheel
07:04 &lt;@anarcat&gt; one of those duplicate issues is this: <a href="http://drupal.org/node/1058918" title="http://drupal.org/node/1058918">http://drupal.org/node/1058918</a>
07:05 &lt;@mig5&gt; his hosting_folders feature was just wrong anyway
07:05 &lt;@anarcat&gt; apparently eugene had a contrib module to fix this, but because i marked his issue as duplicate of mine, he got angry and removed his code from github
07:05 &lt;@anarcat&gt; but anyways, we talked about this vhost customization thing, and people were suggesting that it should be in contrib, but i feel like i disagree - if it's safe, it could be in core couldn't it?
07:05 &lt;@mig5&gt; the subfolder stuff?
07:06 &lt;@anarcat&gt; no no
07:06 &lt;@anarcat&gt; <a href="http://drupal.org/node/1058918" title="http://drupal.org/node/1058918">http://drupal.org/node/1058918</a>
07:06 &lt;@anarcat&gt; the custom vhost stuff
07:06 &lt;@mig5&gt; ah
07:06 &lt;+omega8cc&gt; in core, imo
07:06 &lt;@anarcat&gt; right
07:06 &lt; eft_&gt; anarcat: that's moving vhost config  into front end?
07:07 -!- Artusamak is now known as Artusamak_afk
07:07 &lt;@anarcat&gt; so anyways, that's about it for me - i'll try to work more on the issue queue and make an RC during next week unless there are objections here
07:07 &lt;@anarcat&gt; eft_: no
07:07 &lt;@anarcat&gt; mig5: next!
07:07 &lt; eft_&gt; anarcat: that's great that you migrated c.a.o. - do we still need the 1700 EST downtime in the header of this channel
07:07 &lt;@anarcat&gt; eft_: no
07:07 -!- anarcat changed the topic of #aegir to: Aegir hosting system 0.4-beta2 released! <a href="../../../../../0/index-2.html" title="http://community.aegirproject.org/0.4-beta2">http://community.aegirproject.org/0.4-beta2</a> | Issue queue: <a href="http://is.gd/edalY" title="http://is.gd/edalY">http://is.gd/edalY</a> | read this before asking: <a href="../../../../../bugs/index.html" title="http://community.aegirproject.org/bugs">http://community.aegirproject.org/bugs</a> | scrums on thursdays 2000UTC
07:08 &lt;@mig5&gt; i've done nothing all week due to some hectic work and basically some of our users killing my love for the project.
07:08 &lt;@mig5&gt; i fixed a minor bug here or there
07:08 &lt;@mig5&gt; and will likewise attack the queue some more, i think we should rc soonor we'll just be forever trying to battle that
07:08 &lt;@anarcat&gt; yeah
07:08 &lt;@anarcat&gt; agreed
07:09 &lt;@mig5&gt; that's it from me
07:09 &lt;@anarcat&gt; seems like the only blocker is the ssl rollback, which we could roll into another rc
07:09  * eft_ wishes he had more to offer than nitpicks about channel headers
07:09 -!- Artusamak_afk is now known as Artusamak
07:09 &lt;@anarcat&gt; let's just RC the fucking thing
07:09 &lt;@anarcat&gt; mig5: if you feel like it - just do it, and ignore the issue queue ;)
07:09 &lt; eft_&gt; mig5: any progress on your workflow diags?
07:09 &lt;@anarcat&gt; eft_: you can fight with trolls in the issue queue and get them off our backs :)
07:09 &lt;+omega8cc&gt; go with RC - to avoid "one more thing" syndrome == release 3 years later ;)
07:09 &lt;@anarcat&gt; there's a lot of triage work that is needed in the queue, that mostly anyone could do
07:09 &lt;@mig5&gt; eft_: that was just for a client proposal, it wasn't very good, <a href="http://greenbeedigital.com.au/files/aegir_workflow.jpg" title="http://greenbeedigital.com.au/files/aegir_workflow.jpg">http://greenbeedigital.com.au/files/aegir_workflow.jpg</a>
07:10 &lt;@anarcat&gt; mig5: anything else?
07:10 &lt;@mig5&gt; anarcat: nope, that's it, i might release today then if i get time
07:10 &lt; eft_&gt; anarcat: bon cop, bad cop
07:10 &lt;@anarcat&gt; eft_: ouaip :)
07:10 &lt;@anarcat&gt; Vertice / adrinux / darthsteven / grugnog / mvc / omega8cc / sfyn / ergonlogic / univate_: anybody else got something to add to our scrum?
07:10 &lt;@anarcat&gt; mig5: that would be just amazing :)
07:10 &lt;+omega8cc&gt; not much from me this week, I only made barracuda/octopus compatible with Debian 6 and Ubuntu 10.10 plus some new fixes for Nginx config
07:11 &lt;@anarcat&gt; okay, anyone else?
07:11 &lt;+ergonlogic&gt; nothing from me
07:11 &lt;+omega8cc&gt; hope to work on contrib module for solr cores automatic setup - integrated with skwashd work
07:11 &lt;@anarcat&gt; univate_: thanks for those patches, btw, keep em coming!
07:11 &lt;@anarcat&gt; omega8cc: that would be freakin awesome!
07:12 &lt;@anarcat&gt; omega8cc: we got config for secure multi-core setups if you're interested... in our wiki
07:12 &lt;+omega8cc&gt; yep
07:12 &lt;@mig5&gt; anarcat: would love a review of <a href="http://drupal.org/node/1005014" title="http://drupal.org/node/1005014">http://drupal.org/node/1005014</a>
07:12 &lt;@mig5&gt; (re:univate)
07:12 &lt;@anarcat&gt; mig5: got it, maybe tomorrow
07:12 &lt;@anarcat&gt; mig5: but don't wait for this to rc
07:12 &lt;@mig5&gt; ok
07:12 &lt;+omega8cc&gt; anarcat: I will check that, thanks!
07:12 &lt;@anarcat&gt; okay, anyone else?
07:13 &lt;+ergonlogic&gt; now that community.aegirproject.org is hosted at Koumbit, I could help if there's any issues with the site itself
07:13 &lt;+ergonlogic&gt; just let me know
07:13 &lt;@mig5&gt; eft_: wanted thesession_timeout something or other to be raised
07:13 &lt;@mig5&gt; so that it remembers you're loged in
07:13 &lt;@mig5&gt; logged* bah.
07:13 &lt;@anarcat&gt; ergonlogic: yeah, i think mig5 had issues with some images you could help with
07:13 &lt;@anarcat&gt; mig5: ^?
07:14 &lt;@mig5&gt; which images?
07:14 &lt;@anarcat&gt; mig5: i don't recall
07:14 &lt;@anarcat&gt; istr there was some thumbnail problem... wasn't there?
07:14 &lt;@mig5&gt; oh yes
07:14 &lt; eft_&gt; yea
07:14 &lt;@mig5&gt; possibly an atrium bug or something weird
07:14 &lt;@anarcat&gt; yeah
07:14 &lt;@mig5&gt; <a href="../../../../76/index.html" title="http://community.aegirproject.org/node/76">http://community.aegirproject.org/node/76</a>
07:14 &lt;@anarcat&gt; well now we have root, so let us know what we need to do :)
07:14 &lt;@mig5&gt; the href to that is the full size image, but it *always* loads the thumbnail
07:14 &lt;@anarcat&gt; ergonlogic can take care of it or i can help
07:14 &lt;+ergonlogic&gt; ok, I'll take a look
07:15 &lt;@anarcat&gt; okay, i gotta go
07:15 &lt;@anarcat&gt; and the scrum is over, thanks for attending, people!
07:15 &lt;@anarcat&gt; and have a nice day
07:15 &lt;@mig5&gt; cheers
07:15 &lt;+ergonlogic&gt; thanks all
07:15 &lt; eft_&gt; ciao
07:15 &lt;+omega8cc&gt; ciao
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-96.html?destination=node%2F356%23comment-form">Login</a> or <a href="../../../../../user/register/index-96.html?destination=node%2F356%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-96.html?destination=node%2F356%23comment-form">Login</a> or <a href="../../../../../user/register/index-96.html?destination=node%2F356%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-383" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../383/index.html">Weekly Scrum IRC Log: 2011-02-23</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><div class="codeblock"><code>17:00:00&nbsp; * anarcat **** WEEEKLY SCRUM TIME!!! ****<br />17:00:07 &lt;@anarcat&gt; alright, welcome everybody<br />17:00:16 &lt;jcapelo&gt; ok thx<br />17:00:34 &lt;@anarcat&gt; darthsteven: sfyn EclipseGc Vertice : our weekly scrum has started!<br />17:00:40 &lt;@anarcat&gt; it seems that our new developer didn&#039;t make it<br />17:00:44 &lt;@mig5&gt; bugger<br />17:00:45 &lt;+EclipseGc&gt; :-(<br />17:00:50 &lt;@anarcat&gt; or is stuck behind the netsplit...<br />17:01:03 &lt;@mig5&gt; oh true, he was here before<br />17:01:13 &lt;@anarcat&gt; anyways, let&#039;s start<br />17:01:22 &lt;@anarcat&gt; so i have worked on upgrading our server to rc1<br />17:01:25 &lt;@anarcat&gt; our prod server<br />17:01:32 &lt;@anarcat&gt; and people are yelling at me because everything is slower<br />17:01:38 &lt;@anarcat&gt; so i wanted to yell back at univate ;)<br />17:01:41 &lt;@anarcat&gt; but he&#039;s not here :)<br />17:01:47 &lt;@anarcat&gt; so i&#039;ll just yell in the void<br />17:01:50 &lt;@anarcat&gt; which is better<br />17:01:53 &lt;@mig5&gt; have you tried his patch<br />17:01:57 &lt;@anarcat&gt; anyways i&#039;ll test the patches he sent to see if that fixes it<br />17:02:04 &lt;@anarcat&gt; but in the meantime i had a more urgent matter to attend to<br />17:02:10 &lt;@mig5&gt; i find it odd it only affects upgrades (fresh installs are quire fast for me)<br />17:02:19 &lt;@anarcat&gt; the UPPGRADE PATH (wooooo...)<br />17:02:20 &lt;@anarcat&gt; <a href="http://drupal.org/node/1068280<br />17:02:32" title="http://drupal.org/node/1068280<br />17:02:32">http://drupal.org/node/1068280<br />17:02:32</a> &lt;@anarcat&gt; mig5: it is quite odd<br />17:02:59 &lt;@anarcat&gt; mig5: maybe it&#039;s because upgrades have all modules installed and certain tasks (e.g. migrate) take more time to build their forms<br />17:03:07 &lt;@mig5&gt; ah!<br />17:03:17 &lt;@mig5&gt; thanks. that&nbsp; was annoyingly confusing<br />17:03:26 &lt;@anarcat&gt; what was?<br />17:03:33 &lt;@mig5&gt; not understanding why<br />17:03:35 &lt;@mig5&gt; and now i do :)<br />17:03:37 &lt;@anarcat&gt; anyways, i do think it&#039;s the wrong approach to build all forms now, it&#039;s slow<br />17:03:41 ::: mattmcmanus [~mattmcman@207.103.158.84] has quit [Quit: That&#039;s it! I QUIT! I can&#039;t take it anymore!]<br />17:03:47 &lt;@mig5&gt; yep. we copy temp tables&nbsp; etc there for migrate<br />17:03:50 &lt;@anarcat&gt; so maybe we should have a metadata field instead<br />17:03:52 &lt;@anarcat&gt; yeah, fuck it<br />17:04:05 &lt;@anarcat&gt; so we&#039;ll use the cache as a workaround, but send univate back to do his homework there<br />17:04:11 &lt;@mig5&gt; agreed<br />17:04:15 &lt;@anarcat&gt; alright\<br />17:04:30 &lt;@anarcat&gt; regarding the upgrade path, i think we agreed me and mig5 that he would do some regression testing on master, is that right?<br />17:04:41 &lt;@mig5&gt; sure thing<br />17:04:56 &lt;@anarcat&gt; there are two commits (one in hostmaster, one in provision) that are only in head and need to be merged in 0.4 once they are tested without regression and fixing the upgrade path from 0.3<br />17:05:23 &lt;@anarcat&gt; the one in provision needs to be actually <em>reverted</em> in master when the merge occurs too, because it&#039;s a 0.4-specific upgrade path that we can drop from master<br />17:05:24 &lt;@mig5&gt; ok<br />17:05:49 &lt;@anarcat&gt; i&#039;ll try to work full day on aegir tomorrow to try to settle some issues here<br />17:06:17 &lt;@anarcat&gt; i think that&#039;s all for me, i&#039;m happy to see a new dev join the project, and i hope we can welcome more!<br />17:06:33 &lt;@mig5&gt; anarcat++<br />17:06:55 &lt;@mig5&gt; ok, as for me, i&#039;ve done nothing as usual unfortunately<br />17:07:04 &lt;@anarcat&gt; as usual, i do not believe you :P<br />17:07:10 &lt;@mig5&gt; no, this time i haven&#039;t<br />17:07:14 &lt;@mig5&gt; i&#039;ve been scared of the queue<br />17:07:17 &lt;@anarcat&gt; so what haven&#039;t you done<br />17:07:37 &lt;@mig5&gt; i&#039;ll test the upgrade path, i haven&#039;t even really looked at the issue queue since Eugen has discovered it :)<br />17:07:55&nbsp; * EclipseGc just sliced his finger open on a grape juice package...<br />17:07:56 &lt;@anarcat&gt; istr that you actually answered a few things in the queue and here<br />17:08:08 &lt;talengix&gt; i have finally sucessfully installed aegir and i get Aegir is now installed. You can visit it at <a href="http://aegir.talengix.com/user/reset/1/1298497788/3644fc5f6ead4cf4d3a0c7f0dcf1f04b<br />17:08:08" title="http://aegir.talengix.com/user/reset/1/1298497788/3644fc5f6ead4cf4d3a0c7f0dcf1f04b<br />17:08:08">http://aegir.talengix.com/user/reset/1/1298497788/3644fc5f6ead4cf4d3a0c7...</a> &lt;talengix&gt; but the page is blank. i have restarted httpd and I have ensured 127.0.0.1&nbsp; localhost $AEGIR_HOST $AEGIR_DOMAIN are in my host file. what else could it be?<br />17:08:10 &lt;@anarcat&gt; EclipseGc: bleeding edge! ;)<br />17:08:15 &lt;+EclipseGc&gt; seriously<br />17:08:24 &lt;@anarcat&gt; alright<br />17:08:33 &lt;@anarcat&gt; anyone else has anything to add to our weekly scrum?<br />17:08:33 &lt;@mig5&gt; anyone else?<br />17:08:35 &lt;@mig5&gt; snap<br />17:08:36 &lt;+EclipseGc&gt; so, I set up a new rc1 for myself<br />17:08:37 &lt;@anarcat&gt; hehe<br />17:08:59 &lt;+EclipseGc&gt; trying to put together a hosted system for my own dev outside of the MAMP package<br />17:09:08 &lt;+EclipseGc&gt; so, first ++ really easy to install these days<br />17:09:26 &lt;+EclipseGc&gt; second, trying to hunt down why an install profile that works in MAMP won&#039;t install for aegir<br />17:09:57 &lt;@anarcat&gt; awesome<br />17:09:58 &lt;+EclipseGc&gt; kind of lost, but... I do have some clues, will need to follow up with people more knowledgeable than myself probably to get anywhere, but still... that&#039;s what I did<br />17:10:02 &lt;@anarcat&gt; ok<br />17:10:10 &lt;@anarcat&gt; are you still interested in the d7 port?<br />17:10:42 &lt;+EclipseGc&gt; I AM interested, I&#039;m unsure of what I will have time for beyond advising<br />17:10:47 &lt;@anarcat&gt; i see<br />17:10:49 &lt;@anarcat&gt; ah mig5, regarding this: <a href="../../../../377/index.html#comment-411" title="http://community.aegirproject.org/node/377#comment-411">http://community.aegirproject.org/node/377#comment-411</a> - i think we&#039;ll have to live with some vagueness in the documentation, people will need to figure it out themselves, can&#039;t them?<br />17:11:01 &lt;+EclipseGc&gt; anarcat: sort of interested in trying to get ctools to a point to make that sort of dev easier for everyone<br />17:11:27 &lt;@anarcat&gt; mig5: if we have a thing that says something like &quot;VERSION is the version you are trying to install, it&#039;s usually found on the frontpage of community.aegirproject.org&quot; and use VERSION or OLD_VERSION everywhere in the<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; doc...<br />17:11:44 &lt;@anarcat&gt; EclipseGc: yeah, i was kind of scared of your ctools/features/hostmaster profile reshuffling there :)<br />17:11:50 &lt;@mig5&gt; anarcat: they ought to be able to, but sometimes it seems there&#039;s only maybe 10% of our users who have ever used linux before :) aegir is an &#039;attractive toy&#039; it seems..<br />17:11:58 &lt;@anarcat&gt; EclipseGc: you should setup a sandbox for that on git.drupal.org when we migrate, so people can test it out<br />17:11:59 &lt;@mig5&gt; i am not that worried, i just want all of us to be aware of those issues<br />17:12:06 &lt;@anarcat&gt; mig5: awesome<br />17:12:07 ::: omega8cc [~omega8cc@85.17.159.47] has joined #aegir<br />17:12:07 ::: basic<code>[~basic@iade105lmp02.blackmesh.com] has joined #aegir&amp;#10;17:12:07 ::: CitizenKane [~quassel@chat.qniformchat.com] has joined #aegir&amp;#10;17:12:08 ::: mvc [~mvc@shell.koumbit.net] has joined #aegir&amp;#10;17:12:08 ::: skwashd [~skwashd@phpgroupware/skwashd] has joined #aegir&amp;#10;17:12:08 ::: kvanderw [~kvanderw@mds-65-64-85-204.meridiandata.com] has joined #aegir&amp;#10;17:12:08 ::: gusaus [~gusaus@drupal.org/user/22137/view] has joined #aegir&amp;#10;17:12:08 ::: NeoID_ [~NeoID@cm-188.126.198.152.customer.telag.net] has joined #aegir&amp;#10;17:12:08 ::: TrevorT [~paulius.p@78.61.219.185] has joined #aegir&amp;#10;17:12:08 ::: SeanBannister [Sean@ppp118-208-132-239.lns20.bne1.internode.on.net] has joined #aegir&amp;#10;17:12:08 ::: josh_k [~josh_k@drupal.org/user/3313/view] has joined #aegir&amp;#10;17:12:08 ::: bertodsera [~quassel@109.251.3.19] has joined #aegir&amp;#10;17:12:08 ::: j0nathan [~j0nathan@modemcable012.160-130-66.mc.videotron.ca] has joined #aegir&amp;#10;17:12:08 ::: Chipie [~Chipie@mue-88-130-78-004.dsl.tropolys.de] has joined #aegir&amp;#10;17:12:08 ::: mthart [~mthart@pool-108-13-215-142.lsanca.fios.verizon.net] has joined #aegir&amp;#10;17:12:08 ::: joestewart|afk [~joestewar@69.172.231.35] has joined #aegir&amp;#10;17:12:08 ::: Zelfje [~Zelfje@30-80-ftth.onsneteindhoven.nl] has joined #aegir&amp;#10;17:12:08 ::: Letharion [~letharion@94-247-168-189-static.serverhotell.net] has joined #aegir&amp;#10;17:12:08 ::: univate [~chris@202-173-171-10.dyn.iinet.net.au] has joined #aegir&amp;#10;17:12:08 ::: ServerMode/#aegir [+vvvo omega8cc mvc skwashd univate] by leguin.freenode.net&amp;#10;17:12:08 ::: scyrma [~scyrma@drupal.org/user/1261/view] has joined #aegir&amp;#10;17:12:11 &amp;lt;@anarcat&amp;gt; frak&amp;#10;17:12:15 &amp;lt;@anarcat&amp;gt; okay&amp;#10;17:12:16 ::: basic</code> [~basic@iade105lmp02.blackmesh.com] has quit [Changing host]<br />17:12:16 ::: basic` [~basic@osuosl/staff/basic] has joined #aegir<br />17:12:18 ::: AquaticDisorder [~quassel@cpc11-chwo3-0-0-cust135.perr.cable.virginmedia.com] has quit [Ping timeout: 248 seconds]<br />17:12:18 &lt;@mig5&gt; whoa<br />17:12:23 &lt;@anarcat&gt; univate: you missed part of the scrum :)<br />17:12:25 &lt;@anarcat&gt; omega8cc: scrum time!<br />17:12:32 &lt;@anarcat&gt; mvc / skwashd : scrum time<br />17:12:51 &lt;+EclipseGc&gt; anarcat: yeah, I literally have 14 patches for ctools that I&#039;m running in production<br />17:13:09 ::: Irishgringo [~chatzilla@c-66-229-63-143.hsd1.fl.comcast.net] has quit [Ping timeout: 272 seconds]<br />17:13:12 ::: catatonicrelapse [~catatonic@adsl-67-67-217-158.dsl.austtx.swbell.net] has joined #aegir<br />17:13:13 &lt;@anarcat&gt; summary of the scrum so far: i&#039;m fixing the upgrade path, mig5 is scared of the queue and will do some regrsesion testing, EclipseGc has some patches for hostmaster.profile and is testing installs<br />17:13:14 &lt;+EclipseGc&gt; anarcat: so there&#039;s a lot of work left to do and a lot of signoff from earl left to get, but... I&#039;m pretty confident<br />17:13:28 &lt;@anarcat&gt; we have this low-hanging fruit for documentors, which is reshuffling the installation manual<br />17:13:33 &lt;@anarcat&gt; <a href="../../../../377_br/_17_13_41/index.html" title="http://community.aegirproject.org/node/377<br />17:13:41">http://community.aegirproject.org/node/377<br />17:13:41</a> &lt;@anarcat&gt; if somebody wants to start working on that, that would be awesome<br />17:13:59 &lt;+EclipseGc&gt; anarcat: also worth mentioning that, for REALLY big aegir installs, D7 hold some interesting search possibilities<br />17:14:11 &lt;+EclipseGc&gt; i.e. an aegir with lots of sites<br />17:14:14 &lt;@anarcat&gt; EclipseGc: ... and probably horrible performance issues possibilities ;)<br />17:14:29 &lt;@anarcat&gt; so anyways<br />17:14:30 &lt;+EclipseGc&gt; anarcat: well, not from search<br />17:14:34 &lt;+EclipseGc&gt; but D7 maybe yes...<br />17:14:36 &lt;@anarcat&gt; EclipseGc: right<br />17:14:45 &lt;@anarcat&gt; i think that&#039;s it for our scrum, which was a bit disturbed by our netsplit<br />17:14:59 &lt;@anarcat&gt; if people have things to add to the scrum, freel free to add that now<br />17:15:02&nbsp; * EclipseGc shakes fist @ netsplit<br />17:15:06 &lt;@anarcat&gt; i don&#039;t have to run anywhere this time :)<br />17:16:33 &lt;@anarcat&gt; univate: we really need to rework that patch of yours for the VBO stuff, it&#039;s a release critical<br />17:19:31 &lt;@anarcat&gt; now for something completely different<br />17:20:11 &lt;@anarcat&gt; <a href="http://www.youtube.com/watch?v=CsQd2n99zS4<br%20/>17:20:15" title="http://www.youtube.com/watch?v=CsQd2n99zS4<br />17:20:15">http://www.youtube.com/watch?v=CsQd2n99zS4<br />17:20:15</a> ::: scientist_ [~scientist@132.207.169.202] has joined #aegir<br />17:21:03 &lt;+EclipseGc&gt; anarcat: nice<br />17:21:10 &lt;+EclipseGc&gt; anarcat: definitely awesome<br />17:21:14 &lt;@anarcat&gt; :)<br />17:21:22 &lt;@anarcat&gt; i can take care of uploading the log into the community site for once<br />17:21:28 &lt;@anarcat&gt; unless mig5 has alraedy done it?<br />17:21:49 ::: Slydder1 [~chuck@dslb-088-072-212-004.pools.arcor-ip.net] has quit [Quit: Leaving.]<br />17:22:44 ::: joestewart [~joestewar@69.172.231.35] has joined #aegir<br />17:22:55 ::: bertodsera_ [~quassel@109.251.3.19] has joined #aegir<br />17:22:55 &lt;+EclipseGc&gt; anarcat: <a href="http://www.youtube.com/watch?v=dmoDLyiQYKw<br%20/>17:23:15" title="http://www.youtube.com/watch?v=dmoDLyiQYKw<br />17:23:15">http://www.youtube.com/watch?v=dmoDLyiQYKw<br />17:23:15</a> &lt;@anarcat&gt; uh, and unless that wasn&#039;t clear, the scrum is over :)</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-97.html?destination=node%2F383%23comment-form">Login</a> or <a href="../../../../../user/register/index-97.html?destination=node%2F383%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-97.html?destination=node%2F383%23comment-form">Login</a> or <a href="../../../../../user/register/index-97.html?destination=node%2F383%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-463" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../463/index.html">Weekly Scrum IRC Log: 2011-03-09</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_6 first last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
09:01 &lt;@anarcat&gt; mig5: hey
09:01 &lt;@mig5&gt; up for scrum or inconvenient time?
09:01 &lt;@anarcat&gt; i can't believe i can't find those revisionsw <a href="http://drupal.org/node/1068280#comment-4131534" title="http://drupal.org/node/1068280#comment-4131534">http://drupal.org/node/1068280#comment-4131534</a>
09:01 &lt;@anarcat&gt; hey, scrum time, look at that
09:01 &lt;@anarcat&gt; sure
09:01 &lt;@anarcat&gt; at a session here, but it still works :)
09:01 &lt;@mig5&gt; alright, go! :)
09:02 &lt;@mig5&gt; actually
09:02 &lt;@mig5&gt; first, i believe i saw you mention that this scrum time is inconvenient for you 
09:02 &lt;@anarcat&gt; did something fuckup on d.o or something?
09:02 &lt;@mig5&gt; drupalcon aside
09:02 &lt;@mig5&gt; anarcat: you'll have to be more specific about d.o fuckups :)
09:02 &lt;@anarcat&gt; every first wednesday of the month i have a meeting during this scrum
09:02 &lt;@mig5&gt; ah. let's move it then
09:03 &lt;@anarcat&gt; what's convenient for ya?
09:03 &lt;@mig5&gt; the following day, but i think that's when it used to be for you
09:04 &lt;@mig5&gt; and you couldn't do later
09:04 &lt;@anarcat&gt; right
09:04 &lt;@anarcat&gt; that is correct
09:04 &lt;@mig5&gt; so maybe we go earlier in the week
09:04 &lt;@anarcat&gt; yeah, i can do the day before or before before
09:04 &lt;@mig5&gt; let's do day before, so Wednesday for us, unless it's a problem for univate
09:04 &lt;@anarcat&gt; got it
09:04 &lt;@mig5&gt; anyway!
09:04 &lt;@anarcat&gt; tuesday for us
09:04 &lt;@mig5&gt; d.o issues?
09:04 &lt;@anarcat&gt; right
09:05 &lt;@anarcat&gt; so about the upgrade path
09:05 &lt;@anarcat&gt; <a href="http://drupal.org/node/1068280#comment-4131534" title="http://drupal.org/node/1068280#comment-4131534">http://drupal.org/node/1068280#comment-4131534</a>
09:05 &lt;@mig5&gt; i noticed i committed a change to provision and all my old commits are still unattributed to my user account. yay
09:05 &lt;@anarcat&gt; that comment refers to two patches that are supposedly on head
09:05 &lt;@anarcat&gt; and that i can't find
09:05 &lt;@mig5&gt; hmm
09:05 &lt;@mig5&gt; they're in master aren't they?
09:05 &lt;@anarcat&gt; i can't find them
09:05 &lt;@anarcat&gt; git fetch
09:06 &lt;@anarcat&gt; git show f64487706638
09:06 &lt;@anarcat&gt; fatal: ambiguous argument 'f64487706638': unknown revision or path not in the working tree.
09:06 &lt;@mig5&gt; <a href="http://drupalcode.org/project/hostmaster.git/commitdiff/75191804926c5c299faded5d2325053e33916155" title="http://drupalcode.org/project/hostmaster.git/commitdiff/75191804926c5c299faded5d2325053e33916155">http://drupalcode.org/project/hostmaster.git/commitdiff/75191804926c5c29...</a>
09:06 &lt;@mig5&gt; <a href="http://drupalcode.org/project/hostmaster.git/commitdiff/a8dfee3391cb89f0aa96f96edc3593559b7de11d" title="http://drupalcode.org/project/hostmaster.git/commitdiff/a8dfee3391cb89f0aa96f96edc3593559b7de11d">http://drupalcode.org/project/hostmaster.git/commitdiff/a8dfee3391cb89f0...</a>
09:06 &lt;@mig5&gt; are you sure your origin is not git.aegirproject.org ? :)
09:06 &lt;@anarcat&gt; um
09:07 &lt;@anarcat&gt; well
09:07 &lt;@anarcat&gt; those are not the commits i am looking for
09:07 &lt;@mig5&gt; oh
09:07 &lt;@anarcat&gt; that above comment refers to two other commits
09:07 &lt;@mig5&gt; oh oops
09:08 &lt;@mig5&gt; yeah i don't see it
09:08 &lt;@mig5&gt; weird
09:08 &lt;@anarcat&gt; oh well
09:08 &lt;@anarcat&gt; maybe i didn't push them and it works anyways... (?!)
09:08 &lt;@anarcat&gt; anywho
09:08 &lt;@anarcat&gt; so i wanted to merge shit in and release rc2 this week
09:09 &lt;@anarcat&gt; i talked to a bunch of people here at drupalcon about aegir
09:09 &lt;@anarcat&gt; i just did a aegir 101 session to about 20 people
09:09 &lt;@mig5&gt; nice
09:09 &lt;@mig5&gt; how'd that go
09:10 &lt;@anarcat&gt; pretty well
09:10 &lt;@anarcat&gt; people didn't really *want* to install aegir so that part didn't really work
09:10 &lt;@anarcat&gt; but we had good exchanges and dispelled common myths
09:10 &lt;@anarcat&gt; and gave away cool stickers :)
09:10 &lt;@anarcat&gt; we have a roadmap session planned for tomorrow
09:10 &lt;@anarcat&gt; at 2, in missouri again
09:10 &lt;@anarcat&gt; and then we are thinking of having a doc/code sprint on friday
09:11 &lt;@mig5&gt; nice
09:11 &lt;@anarcat&gt; maybe help people out writing drush extensions, and a bunch of other ideas
09:11 &lt;@mig5&gt; we have about 20 'for reviews' in the queues
09:11 &lt;@anarcat&gt; yeah
09:11 &lt;@mig5&gt; mostly eugen :P
09:11 &lt;@anarcat&gt; i'll try to throw people at those
09:11 &lt;@anarcat&gt; we may have new people to get into the project
09:11 &lt;@mig5&gt; excellent
09:11 &lt;@anarcat&gt; i met with shrop, EclipseGc and others
09:11 &lt;@anarcat&gt; what else
09:12 &lt;@anarcat&gt; i want to release rc2 :P
09:12 &lt;@mig5&gt; well - you can, i didn't see any errors doing an upgrade to master from 0.3
09:12 &lt;@anarcat&gt; i was hoping someone could shed light on this - but maybe i'll just do it myself: <a href="http://drupal.org/node/1081528" title="http://drupal.org/node/1081528">http://drupal.org/node/1081528</a>
09:12 &lt;@mig5&gt; regardless of that missing commit
09:12 &lt;@anarcat&gt; oh, and i have pushed 6.x-1.x as the stable branch
09:12 &lt;@anarcat&gt; for provision
09:13 &lt;@mig5&gt; yeah that sounds expected: drupal keeps those paths in the db, you need to cache clear before it fixes itself up, so your theory is probably right there
09:13 &lt;@mig5&gt; that would happen with or without a Migrate task, basically
09:13 &lt;@mig5&gt; but would be nice for Migrate to fix it
09:13 &lt;@anarcat&gt; and for hostmaster now
09:13 &lt;@anarcat&gt; cool
09:14 &lt;@anarcat&gt; so i'll look at that before the release
09:14 &lt; shrop&gt; anarcat: you have aegir stickers?
09:14 &lt; shrop&gt; that would be cool
09:14 &lt;@anarcat&gt; shrop: yes!
09:14 &lt;@anarcat&gt; of course :)
09:14 &lt; shrop&gt; ok.. want one tomorrow at the meetup if you have any.. :)
09:14 &lt;@anarcat&gt; come to the bof tomorrow :)
09:14 &lt;@anarcat&gt; of course
09:14 &lt; shrop&gt; will do
09:14 &lt;@anarcat&gt; alright
09:14 &lt;@anarcat&gt; so what else for the scrum
09:14 &lt;@anarcat&gt; we did a little spike on the install docs manual for the purpose of the session
09:15 &lt;@anarcat&gt; i'd actually like to get a debian package working for rc2, but i'm not sure i'll have time to do this
09:15 &lt;@anarcat&gt; ideally, we'd get rc2 out during that code sprint
09:15 &lt;@mig5&gt; maybe for 1.0 :)
09:15 &lt;@anarcat&gt; ok, i think that's it for me
09:16 &lt;@anarcat&gt; well, i'd like the package to be tested :)
09:16 &lt;@mig5&gt; i've got nothing to report. univate, you here?
09:16 &lt;@mig5&gt; omega8cc?
09:16 &lt; univate&gt; hey
09:16 &lt; hefring&gt; eh oh
09:17 &lt;@mig5&gt; did you want to add anything to the scrum?
09:17 &lt;@anarcat&gt; mig5: i have merged the two commits you mentionned on the stable branch
09:18 &lt;@mig5&gt; cheers
09:19 &lt;@anarcat&gt; and then some more
09:19 &lt;@mig5&gt; i dont fully understand omega8cc's patches here <a href="http://drupal.org/node/949044#comment-4144944" title="http://drupal.org/node/949044#comment-4144944">http://drupal.org/node/949044#comment-4144944</a>
09:19 &lt;@mig5&gt; +  $form_state['values']['parameters']['new_uri'] = $url; // force lowercase
09:19 &lt;@mig5&gt; does that variable assignment really force lowercase?
09:20 &lt;@mig5&gt; maybe it's for readability.
09:20 &lt;@mig5&gt; anyway
09:21 &lt;@anarcat&gt; that doesn't force lowercase
09:21 &lt;@anarcat&gt; at all
09:22 &lt;@anarcat&gt; otherwise, i think that's it for our scrum
09:23 &lt;@mig5&gt; yep
09:23 &lt;@mig5&gt; thanks all
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-98.html?destination=node%2F463%23comment-form">Login</a> or <a href="../../../../../user/register/index-98.html?destination=node%2F463%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-98.html?destination=node%2F463%23comment-form">Login</a> or <a href="../../../../../user/register/index-98.html?destination=node%2F463%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-490" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../490/index.html">Weekly Scrum IRC Log: 2011-03-15</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_6 first last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
09:01 &lt;@anarcat&gt; alright
09:01 &lt;@anarcat&gt; scrum time
09:01 &lt;@anarcat&gt; mig5 / univate / Vertice / darthsteven / mvc / omega8cc : scrum time
09:01 &lt;+omega8cc&gt; hello!
09:01 &lt; hefring&gt; que tal
09:01 &lt;@mig5&gt; morning
09:01 &lt;+darthsteven&gt; Hello!
09:01 &lt; hefring&gt; hello
09:01 &lt;@anarcat&gt; ghankstef / mrbaileys / sfyn_ / shrop / / others i forgot: welcome to our weekly scrum! feel free to jump in!
09:02 &lt;@anarcat&gt; so welcome everybody
09:02 &lt;@anarcat&gt; we're back from drupalcon! it was an insane week
09:02 &lt;@anarcat&gt; so i'll start with that
09:02 &lt;@anarcat&gt; crazy
09:02 &lt;@anarcat&gt; week
09:02 &lt;+omega8cc&gt; and sk]washd!
09:02 &lt;@anarcat&gt; met a bunch of people
09:02 &lt;@anarcat&gt; oh yeah! skwashd !
09:02 &lt;@anarcat&gt; even though we didn't have a formal aegir session schedule (which is strange considering there were 5 submitted), we did host 2 bofs and a training session, plus a code sprint
09:03 &lt;@anarcat&gt; i met with about 30-40 people to talk about aegir during those session
09:03 &lt;@mig5&gt; someone must've been anti-aegir on the organising committee :)
09:03 &lt;@anarcat&gt; for me the best session was the roadmap session, of which my coworker mvc posted a summary here: <a href="../../../../488/index.html" title="http://community.aegirproject.org/node/488">http://community.aegirproject.org/node/488</a>
09:03 &lt; skwashd&gt; anarcat, we should've had 34 at the initimate session alone :)
09:03 &lt;@anarcat&gt; mig5: i actually suspect it's because there weren't "big names" submitting a session
09:04 &lt;@anarcat&gt; skwashd: that's right!
09:04 &lt;@mig5&gt; ah ;)
09:04 &lt;@anarcat&gt; and i was late to the intimate aegir session, which sucked, but it was my only "free" day during the whole week
09:04 &lt;@anarcat&gt; koumbit *drove* to chicago, which was insane
09:04 &lt;@anarcat&gt; 1400km one way, so around 3000 km of driving, 30h total...
09:04 &lt;@anarcat&gt; lots of fun and spilled coffee
09:04 &lt;@anarcat&gt; oh and i scratch the fucking car when parking it in a narrow street
09:05 &lt;@anarcat&gt; 4500$CAD in damage, believe it or not
09:05 &lt;@anarcat&gt; lots of fun
09:05 &lt;@anarcat&gt; anyways
09:05 &lt;@mig5&gt; haha
09:05 &lt;@anarcat&gt; so we're passing the hat to pay for the stupid koumbit van ... ;) (kdding)
09:05 &lt;@anarcat&gt; we *almost* got rc2 released
09:05 &lt;@anarcat&gt; i was about to push the tags when they cut off power and wifi in the code sprint
09:05 &lt;@anarcat&gt; but mig5 ended up doing the last mile on that
09:06 &lt;@mig5&gt; sort of
09:06 &lt;@anarcat&gt; i personnally met with shrop, cashwilliams, ghankstef, joestewart, and probably others i forget here :)
09:06 &lt;@anarcat&gt; i feel that our presence there got people interested in participating in the project and i got that objective at least partially accomplished
09:07 &lt;@anarcat&gt; with people comitting to watching and helping in the queues, and i helped people review patches in the code sprint
09:07 &lt;@mig5&gt; it sounded like it had a better bof/community spirit than san francisco
09:07 &lt;@mig5&gt; which is excellent
09:07 &lt;@anarcat&gt; yeah
09:07 &lt;@anarcat&gt; we did more BOFs
09:07 &lt;@anarcat&gt; i think it's better for us to do BOFs than formal sessions - people know of aegir, we need to make it work now :)
09:08 &lt;@anarcat&gt; i closed 10-20 tickets in the issue queue and pissed of eugen again
09:08  * mig5 claps
09:08 &lt;@anarcat&gt; we're down to around 5-10 needs review tickets
09:08 &lt; ghankstef&gt; it works  great  -  except for when it doesn;t  : )  but when it does its really really great
09:08 &lt;@anarcat&gt; this week i am working from home so i am hoping to get more aegir work done than usual
09:08 &lt;@anarcat&gt; but so far i'm failing, mostly because of internal poutine again
09:09 &lt;@mig5&gt; you've got chips and gravy inside you?
09:09 &lt;@mig5&gt; :)
09:09 &lt;@anarcat&gt; i hope to get into it tomorrow and get a solid 3 days
09:09 &lt;@anarcat&gt; haha
09:09 &lt;@anarcat&gt; i mean internal to koumbit :P
09:09 &lt;@mig5&gt; :)
09:09 &lt;@anarcat&gt; and it's french fries and gravy and cheese, for your information :)
09:09 &lt;@anarcat&gt; but enough with quebecois cuisine
09:09 &lt;@anarcat&gt; i think i'm done when i start to talk about poutine :)
09:09 &lt;@anarcat&gt; ah, yeah
09:10 &lt;@anarcat&gt; this week i hope to get working on "i want to run drush on my sites as a regular user"
09:10 &lt;@anarcat&gt; which promises to be a real PITA
09:10 &lt;@anarcat&gt; and also working on the 2.x roadmap, after feedback from the community
09:10 &lt;@anarcat&gt; so that's it for me - next!
09:11 &lt;@mig5&gt; i did nothing except push out rc2, which went horribly wrong, but mostly works
09:11 &lt;@mig5&gt; next! :)
09:11 &lt;@anarcat&gt; haha
09:11 &lt;@anarcat&gt; a bit more on that though - we weren't able to tag hostmaster, because of a bug on d.o
09:11 &lt;@anarcat&gt; we're pushing the limits on git and install profiles on d.o, and that's cool for those people, they like us :)
09:11 &lt;@anarcat&gt; everybody is quite happy and proud that aegir is back on d.o
09:11 &lt;@anarcat&gt; if feels good
09:11 &lt;@anarcat&gt; ah and for everyone that contributed to aegir here:
09:12 &lt;@anarcat&gt; i had a *lot* of thanks and good feedback on the project
09:12 &lt;@anarcat&gt; people *love* aegir
09:12 &lt;@anarcat&gt; they are very grateful and thank me for my involvement
09:12 &lt;@anarcat&gt; so i want to share that with the team here
09:12 &lt;@anarcat&gt; because i couldn't possibly have done this alone, so you all share this credit :)
09:12 &lt;@anarcat&gt; mig5: you really should have been there :)
09:13 &lt;@mig5&gt; i doubt i'll ever make another drupalcon
09:13 &lt;@mig5&gt; the two times of the year are awful for me frankly
09:13 &lt;@mig5&gt; anyways
09:13 &lt;@anarcat&gt; that's too bad
09:13 &lt;@mig5&gt; i'll look at that core dump/segfault issue you're having
09:13 &lt;@mig5&gt; i have never reproduced it
09:13 &lt;@anarcat&gt; you don't *have* to come twice a year :)
09:13 &lt;@mig5&gt; but i feel i understand the *reason* for unconed's patch
09:13 &lt;@anarcat&gt; if you have xdebug enabled, it's not a core dump, it's a loop
09:13 &lt;@mig5&gt; right
09:14 &lt;@mig5&gt; but i've never seen the segfault myself, is what i mean
09:14 &lt;@anarcat&gt; yeah
09:14 &lt;@anarcat&gt; you need to reference a non-existing platform
09:14 &lt;@mig5&gt; unconed explained it was something about the stdin context in drush that caused a loop of loading the @self or @server_msater alias
09:14 &lt;@mig5&gt; ahy
09:14 &lt;@mig5&gt; ah*
09:14 &lt;@mig5&gt; he tried to specifically exclude the @server_master context in his patch, which fixed clusters in this case, but broke install/migrate
09:14 &lt;@mig5&gt; anyway, that's for the tickets, i won't noise up the scrum now
09:15 &lt;@anarcat&gt; alright, anyone else?
09:15 &lt;+omega8cc&gt; I did nothing new "inside" the project last week. There are still some Nginx config improvements waiting for review in the queue, but..
09:15 &lt;+omega8cc&gt; I released Barracuda and Octopus 1.0-boa-T to celebrate Aegir 1.0-rc2, which introduces support for Squeeze and Maverick, with even more speed improvements, so..
09:16 &lt;+omega8cc&gt; I *think* we are already as fast as Mercury (formerly Pantheon) out of the box ;) Seriously, it needs some testing to confirm. That is it from me!
09:16 &lt;@anarcat&gt; alright!
09:16 &lt;@anarcat&gt; people looking for low-hanging fruits!
09:16 &lt;@anarcat&gt; **** THIS IS YOU! ****
09:16 &lt;@anarcat&gt; http://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=8&amp;priorities=All&amp;categories=All
09:16 &lt;@anarcat&gt; this is the "needs review" queue
09:17 &lt;@anarcat&gt; what you need to do in there is to pick an issue in there, try to reproduce the issue described
09:17 &lt;@anarcat&gt; if you can't reproduce, close the issue (can't reproduce)
9:17 &lt;@anarcat&gt; if you can, try to apply the patch to see if it fixes the thing for you, if it does mark it RTBC (ready to be committed), if not, "needs work"
09:17 &lt;@anarcat&gt; there is also work to be done in the documentation
09:18 &lt;@anarcat&gt; we have reworked the manual, actually ergonlogic did
09:18 &lt;@anarcat&gt; <a href="../../../../../notebook/index.html" title="http://community.aegirproject.org/notebook">http://community.aegirproject.org/notebook</a>
09:19 &lt;@anarcat&gt; followup on documentation is in the "documentation" category in hostmaster
09:19 &lt;@anarcat&gt; see also <a href="../../../../377/index.html" title="http://community.aegirproject.org/node/377">http://community.aegirproject.org/node/377</a>
09:19 &lt;@anarcat&gt; we specifically need help on the upgrade document
09:19 &lt;@anarcat&gt; and reorganising the "using aegir" section
09:19 &lt;@anarcat&gt; so if nobody has anything else to add
9:19 &lt;@anarcat&gt; i think that's it for our scrum this week
09:20 &lt;@anarcat&gt; thanks for everyone for attending
09:20 &lt; ghankstef&gt; I will have a look at the upgrade doc   see if I can add  to it
09:20 &lt;@anarcat&gt; ghankstef: alright!
09:20 &lt; ghankstef&gt; Will give me a good excuse to update an old aegir  site
09:20 &lt; ghankstef&gt; oh yeah its all empty
09:20 &lt;@anarcat&gt; well
09:21 &lt; ghankstef&gt; guess I can improve on that a bit
09:21 &lt;@anarcat&gt; it's not really empty - i feel ergonlogic forgot to update the status page
09:21 &lt;@anarcat&gt; it seems the UPGRADE.txt was migrated into separate wiki pages
09:21 &lt;@mig5&gt; the sub pages are where it's at
09:21 &lt;@anarcat&gt; maybe it can be merged in one page
09:21 &lt;@mig5&gt; the wrapper page is a bit bare
09:21 &lt;@anarcat&gt; i think we should throw everything in the parent page there
09:22 &lt;+omega8cc&gt; and the structure is too deep now
09:22 &lt;@anarcat&gt; alright
09:22 &lt;@anarcat&gt; that's it for me folks, going back in my "trying to code" hole :)
09:23 &lt;@mig5&gt; thanks all
09:23 &lt;+omega8cc&gt; thanks!
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-99.html?destination=node%2F490%23comment-form">Login</a> or <a href="../../../../../user/register/index-99.html?destination=node%2F490%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-99.html?destination=node%2F490%23comment-form">Login</a> or <a href="../../../../../user/register/index-99.html?destination=node%2F490%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-513" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../513/index.html">Weekly Scrum IRC Log: 2011-03-29</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_6 first last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
08:58 &lt;@anarcat&gt; alright, so we're 1 minute away from the scrum, but i'll start anyways :P
08:59 &lt;@anarcat&gt; i'm a bit in a rush since we're going to replace a switch at the datacenter in about an hour
08:59 &lt;@mig5&gt; np
08:59 &lt;@anarcat&gt; which could affect community.a.o momentarily
08:59 &lt;@anarcat&gt; we had a few issues with the server
08:59 &lt;@anarcat&gt; it was replaced with a spare recently and we diagnosed a problem with a corrupted bios
08:59 &lt;@anarcat&gt; our hw provider is running more tests and we hope to get the original server back online shortly
09:00 &lt;@anarcat&gt; as for actual dev
09:00 &lt;@anarcat&gt; i have worked on provisionacl recently and got it in good shape
09:00 &lt;@anarcat&gt; i hope to deploy it in production here this week and get rid of our ugly sudo -u aegir kludges we were giving to workers
09:00 &lt; Aurorus&gt; sounds interesting anarcat
09:00 &lt;@anarcat&gt; so now not only can worker access modules/ files/ etc without problems, but they can run drush commands as their regular user
09:01 &lt;@anarcat&gt; *plus* this gives access to the regular drush aliases
09:01 &lt;@anarcat&gt; although there are still warnings (fixed in drush 5 and drush 4-head)
09:01 &lt;@anarcat&gt; i'm working on having site aliases respect drush -i
09:01 &lt;@anarcat&gt; i have worked a lot on the debian packages too, they are mostly ready
09:02 &lt; Aurorus&gt; anarcat: Are there plans to allow the deletion of sites and platforms that fail verify?
09:02 &lt;@anarcat&gt; provision is packaged, and there's a meta-package for hostmaster that downloads provision
09:02 &lt;@anarcat&gt; i also want to get the debian packages finished this week and we'll update the docs accordingly
09:02 &lt;@anarcat&gt; hopefully we can ship 1.0 with debian
09:02 &lt;@anarcat&gt; i started coordination of the rc3 release, but we have a significant blocker with d.o that refuses to release hostmaster
09:03 &lt;@anarcat&gt; see <a href="http://drupal.org/node/1105824" title="http://drupal.org/node/1105824">http://drupal.org/node/1105824</a>
09:03 &lt;@anarcat&gt; for the drush issues: <a href="http://drupal.org/node/1104450" title="http://drupal.org/node/1104450">http://drupal.org/node/1104450</a> and <a href="http://drupal.org/node/957182" title="http://drupal.org/node/957182">http://drupal.org/node/957182</a>
09:04 &lt;@anarcat&gt; i am going to work more on security in the coming weeks, i plan to work two weeks in a retreat in the woods with internet access :)
09:04 &lt;@anarcat&gt; i will make sure we don't bootstrap evil modules so that allowing access to modules and themes is secure
09:04 &lt;@anarcat&gt; i'd like to release rc3 tomorrow
09:05 &lt;@anarcat&gt; i am thinking of starting work on the d7 port and ldap integration for 2.x during the next two weeks
09:05 &lt;@anarcat&gt; and koumbit has done its internal roadmap and we'll be working hard on 2.x for the summer
09:05 &lt;@anarcat&gt; i think that's pretty much it for me!
09:05 &lt;@mig5&gt; nice one. you have given yourself a lot of work as usual :)
09:05 &lt;@anarcat&gt; i am glad to see that crazy stuff darthsteven has been doing here :) <a href="http://www.computerminds.co.uk/articles/aegir-tasks-daemon" title="http://www.computerminds.co.uk/articles/aegir-tasks-daemon">http://www.computerminds.co.uk/articles/aegir-tasks-daemon</a>
09:05 &lt;@anarcat&gt; i think it should be merged in
09:06 &lt;@anarcat&gt; well, if anyone wants to pick up rc3 or similar things, be my guest :)
09:06 &lt;@mig5&gt; i read that: i think the queue thing would be good in aegir, hopefully doesn't have too many dependencies?
09:06 &lt;@anarcat&gt; drush especially needs a lot of love - and we'll need to work with them for aegir 2.0, which i suspect will support only drush 5 or above
09:06 &lt;@anarcat&gt; mig5: seems to be standalone contrib!
09:06 &lt;@mig5&gt; ok cool
09:06 &lt;@anarcat&gt; it's just a ghetto php daemon :)
09:06 &lt;@anarcat&gt; what Vertice didn't want :)
09:06 &lt;@mig5&gt; i thought it deopeneded on some obscure launchd-like OSX daemon
09:07 &lt;@mig5&gt; but i admit i didn't read it thoroughly
09:07 &lt;@anarcat&gt; darthsteven: recommends supervisor, but it's just to keep the php script alive - you could use whatever you want
09:07 &lt;@anarcat&gt; hey, we could even use the cronjob to restart the daemon if it fails
09:07 &lt;@mig5&gt; anyway: not much from me, as usual. i basically encountered some significant stability issues with the master branch, and fixed it as best as I could, though I worry i broke some of your ideas there. <a href="http://drupal.org/node/1106768" title="http://drupal.org/node/1106768">http://drupal.org/node/1106768</a>
09:08 &lt;@mig5&gt; i found the bug while writing my aegir build test in jenkins, which was exactly what it was designed to do (although it didn't literally fail the test :) )
09:08 &lt;@mig5&gt; and that's the other main thing i've been toying with (jenkins), although it's at an early stage in terms of aegir tests.
09:08 &lt;@anarcat&gt; cool :)
09:08 &lt;@mig5&gt; but i think we could use it more and more
09:08 &lt;@anarcat&gt; that is freakin awesome
09:08 &lt;@anarcat&gt; can you paste urls for that here?
09:08 &lt;@anarcat&gt; i'm really lazy, nevermind :)
09:09 &lt;@mig5&gt; sure <a href="http://jenkins.greenbeedigital.com.au:8080/job/aegir install/" title="http://jenkins.greenbeedigital.com.au:8080/job/aegir%20install/">http://jenkins.greenbeedigital.com.au:8080/job/aegir%20install/</a>
09:09 &lt;@mig5&gt; i'd like to at least give you or other developers access to that properly, so you can run tests
09:09 &lt;@mig5&gt; at my expense :)
09:09 &lt;@mig5&gt; as i figure you might catch migressions, and do me a favour
09:09 &lt;@mig5&gt; :)
09:10 &lt;@anarcat&gt; haha
09:10 &lt;@anarcat&gt; well, in this case the regression was mine wasn't it ;)
09:10 &lt;@mig5&gt; no matter
09:10 &lt;@mig5&gt; one other thing:
09:10 &lt;@mig5&gt; i'm less worried than you re: drupal.org's issues in releasing hostmaster
09:10 &lt;@mig5&gt; i think it would be nice
09:10 &lt;@mig5&gt; but it's not a blocker in my opinion
09:10 &lt;@anarcat&gt; ok
09:10 &lt;@mig5&gt; as our design works around it already
09:11 &lt;@anarcat&gt; ... since we depend on git
09:11 &lt;@mig5&gt; yeah
09:11 &lt;@anarcat&gt; ok
09:11 &lt;@anarcat&gt; but the release.sh doesn't know that :p
09:11 &lt;@mig5&gt; ah, true :)
09:11 &lt;@anarcat&gt; so i almost released a broken rc3 here :)
09:11 &lt;@mig5&gt; don't worry, i broke rc2
09:11 &lt;@mig5&gt; but i ignored it :)
09:11 &lt;@anarcat&gt; eh
09:11 &lt;@anarcat&gt; ok
09:12 &lt;@anarcat&gt; so if you want to break^Wrelease rc3 tomorrow, or anytime, in fact, be my guest
09:12 &lt;@mig5&gt; don't want to make more work for us in the release.sh though. but, i'm afraid i'm still crippled with a 'don't wait for drupal.org to catch up with us' mentality :)
09:12 &lt;@mig5&gt; ok
09:12 &lt;@anarcat&gt; that's alright
09:13 &lt;@anarcat&gt; alright, anyone else?
09:13 &lt;@mig5&gt; i'll have some time, this time tomorrow
09:13 &lt;@anarcat&gt; omega8cc doesn't seem to be here, so i'll talk for her a little :)
09:13 &lt;@anarcat&gt; she found a vhost injection vulnerability in the alias
09:13 &lt;@mig5&gt; oh yeah
09:13 &lt;@anarcat&gt; it was fixed in head and I *think* i merged in stable
09:13 &lt;@mig5&gt; did the security team say anything?
09:13 &lt;@anarcat&gt; which is why i wanted to make a release
09:13 &lt;@anarcat&gt; yeah
09:13 &lt;@anarcat&gt; no embargo, just release
09:14 &lt;@anarcat&gt; since it's not a stable release, it's ok
09:14 &lt;@mig5&gt; ok
09:14 &lt;@anarcat&gt; so don't tag it as a security release either, because then it gets unpublished and all the shit
09:14 &lt;@mig5&gt; she has some nginx batch updates in the queue as well, since we never really test those ourselves, we should probably just roll them in
09:15 &lt;@mig5&gt; they missed rc2 already
09:15 &lt;@mig5&gt; <a href="http://drupal.org/project/issues?text=&amp;projects=hosting%2C+provision%2C+eldir%2C+Hostmaster+%28Aegir%29&amp;status=8&amp;priorities=All&amp;categories=All" title="http://drupal.org/project/issues?text=&amp;projects=hosting%2C+provision%2C+eldir%2C+Hostmaster+%28Aegir%29&amp;status=8&amp;priorities=All&amp;categories=All">http://drupal.org/project/issues?text=&amp;projects=hosting%2C+provision%2C+...</a>
09:15 &lt;@anarcat&gt; yup
09:15 &lt;@anarcat&gt; a good review of the needs review patches would be good, but not mandatory
09:15 &lt;@anarcat&gt; too bad we got that silly security issue otherwise that would have been 1.0 :P
09:15 &lt;@mig5&gt; oh well. i admit i didn't read the security vulnerability properly. how was it exploitable?
09:15 &lt;@anarcat&gt; darthsteven: please do submit a patch for that stuff, it seems like gold
09:15 &lt;@mig5&gt; i spose i could find the ticket
09:16 &lt;@anarcat&gt; oh and i think we should fix this too: <a href="http://drupal.org/node/1108810" title="http://drupal.org/node/1108810">http://drupal.org/node/1108810</a>
09:16 &lt;@anarcat&gt; Files in sites/example.org/private are accessible.
09:16 &lt;@mig5&gt; yeah
09:16 &lt;@anarcat&gt; this is the security issue: <a href="http://drupal.org/node/1098304" title="http://drupal.org/node/1098304">http://drupal.org/node/1098304</a>
09:16 &lt;@anarcat&gt; i thought the private files was already done
09:16 &lt;@mig5&gt; i thought we could stick it in the platform vhost
09:16 &lt;@mig5&gt; the deny all
09:16 &lt;@mig5&gt; his .htaccess is probably being ignored for that reason
09:17 &lt;@mig5&gt; in that we don't have AllowOverride
09:17 &lt;@anarcat&gt; yes, the .htaccess are ignored, on purpose
09:17 &lt;@mig5&gt; yep
09:17 &lt;@anarcat&gt; okay folks, i need to go!
09:17 &lt;@mig5&gt; so i thought we could inject that into the template ourselves
09:17 &lt;@mig5&gt; sound sane?
09:17 &lt;@mig5&gt; ok
09:17 &lt;@anarcat&gt; yep
09:17 &lt;@mig5&gt; have fun with your switch
09:17 &lt;@mig5&gt; cheers
09:17 &lt;@anarcat&gt; hehe i will :)
09:17 &lt;@anarcat&gt; ciao ciao
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-100.html?destination=node%2F513%23comment-form">Login</a> or <a href="../../../../../user/register/index-100.html?destination=node%2F513%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-100.html?destination=node%2F513%23comment-form">Login</a> or <a href="../../../../../user/register/index-100.html?destination=node%2F513%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-541" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../541/index.html">Weekly Scrum IRC Log: 2011-04-05</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
(06:02:27 PM) anarcat: mig5 / Vertice / darthsteven / EclipseGc / mvc / omega8cc / sfyn / skwashd / ergonlogic : scrum time!
(06:02:35 PM) EclipseGc: anarcat: yay
(06:02:43 PM) anarcat: joestewart: scrum!
(06:02:48 PM) darthsteven: crouch...touch...engage
(06:02:52 PM) anarcat: shrop / univate : scrum!
(06:02:57 PM) anarcat: alright
(06:03:31 PM) anarcat: so welcome everybody, sorry i'm little late :)
(06:03:35 PM) anarcat: i got tons of stuff :)
(06:03:39 PM) anarcat: first
(06:03:41 PM) anarcat: master is dead
(06:03:52 PM) anarcat: being an anarchist and all, no masters no god and everything ;)
(06:04:00 PM) anarcat: more seriously - we're all on 6.x-1.x now
(06:04:09 PM) anarcat: it was too much of a pain to sync that all the time
(06:04:20 PM) EclipseGc: heh
(06:04:32 PM) darthsteven: anarcat: has the master branch actually been removed now?
(06:04:40 PM) anarcat: darthsteven: yes, it's dead.
(06:04:49 PM) darthsteven: cool
(06:04:51 PM) anarcat: also, i have cleaned up the docs regarding the branch naming conventions here: <a href="../../../../187/index.html" title="http://community.aegirproject.org/node/187">http://community.aegirproject.org/node/187</a>
(06:04:59 PM) ergonlogic: long live 6.x-1.x!
(06:05:05 PM) anarcat: reviews of that from the docs team would be welcome
(06:05:18 PM) anarcat: speaking of which, we talked about having maintainers for various sections of the project
(06:05:28 PM) anarcat: the first of which is the docs team, spearheaded by darthsteven and ergonlogic
(06:05:40 PM) anarcat: i don't remember the full list of teams, but i'll dig it out later
(06:05:55 PM) anarcat: so congrats to the docs team for the awesome work so far, more on that from darthsteven ltr i guess
(06:06:00 PM) anarcat: i did the roadmap for 2.0
(06:06:07 PM) anarcat: <a href="../../../../../roadmap/2/index.html" title="http://community.aegirproject.org/roadmap/2.0">http://community.aegirproject.org/roadmap/2.0</a>
(06:06:16 PM) anarcat: everyone is strongly encouraged to review and augment
(06:06:21 PM) anarcat: and especially take tasks
(06:06:48 PM) anarcat: koumbit will *not* do everything in there, but we *will* make a 2.0 release to deploy our changes in production, so the stuff that's not being taken care of will be pushed to 3.0
(06:07:12 PM) arianek is now known as arianekPHONE
(06:07:13 PM) anarcat: i would love to get betas for 2.0 released by the end of summer, with rcs in automn (ie. koumbit runnin 2.x in production by the end of the summer)
(06:07:21 PM) anarcat: we release rc3
(06:07:24 PM) anarcat: i want to release rc4
(06:07:26 PM) anarcat: tonight
(06:07:32 PM) EclipseGc: yay
(06:07:32 PM) anarcat: we have a bunch more changes
(06:07:47 PM) anarcat: especially the symlink stuff  (now sites are symlinked into /var/aegir/clients  for easier access)
(06:07:53 PM) anarcat: provisionacl has been updated to fix the perms there too
(06:08:08 PM) anarcat: debian packages have been released and uploaded to debian.koumbit.net
(06:08:11 PM) mig5: whoop, daylight savings screwed me. morning
(06:08:23 PM) EclipseGc: morning mig5
(06:08:26 PM) anarcat: morning mig5 ! :)
(06:08:47 PM) anarcat: there's been a few bugs with the debian packages, mostly with the new installs (because i'm mostly testing upgrades from our existing installs)
(06:08:56 PM) anarcat: upgrades work well, installs need testing but should work now
(06:09:11 PM) anarcat: the docs have been updated so that the manual install doesn't use install.sh
(06:09:16 PM) anarcat: which has been removed from the tree
(06:09:23 PM) anarcat: completely
(06:09:33 PM) anarcat: and the manual docs have been updated to use hostmaster-install instead
(06:09:40 PM) anarcat: and favor the debian automatic installs through packages
(06:10:01 PM) anarcat: koumbit will deploy the stable branch in staging tonight or tomorrow and rc4 in prod tomorrow
(06:10:06 PM) anarcat: that's about it for me i think
(06:10:17 PM) anarcat: oh and i'm in a retreat in the woods to code like crazy for a week or two
(06:10:31 PM) omega8cc: haha
(06:10:31 PM) anarcat: i'm trying to work on the d7 port, but if people want to join that effort, that would be welcome
(06:10:43 PM) anarcat: i'll also focus on bootstrap security, as i see fun
(06:10:49 PM) anarcat: prioritisation welcome
(06:10:53 PM) anarcat: ok, next!
(06:10:58 PM) mig5: i've done nothing, i'm sick and also have busted my back. also, i fly to europe end of next week, what great timing
(06:11:06 PM) mig5: so i don't expect you'll get much out of me until end of may now
(06:11:31 PM) mig5: that's it for my pep talk
(06:11:35 PM) anarcat: yay! ;)
(06:11:38 PM) omega8cc: mig5: welcome to eu!
(06:11:41 PM) anarcat: well, rest and get well :)
(06:11:45 PM) mig5: thanks
(06:11:57 PM) EclipseGc: I also have done nothing, but anarcat if you're doing a 7.x upgrade I would love to be available in any capacity that you might find useful. Be that review, or just as someone to bounce ideas at
(06:12:08 PM) anarcat: EclipseGc: gotcha
(06:12:19 PM) anarcat: so let's welcome our new dev here - darthsteven , do you have something to share?
(06:12:33 PM) darthsteven: sure
(06:13:02 PM) darthsteven: So, prompted by ergonlogic's issue, I asked for commit access to aegir to work on the documentation
(06:13:13 PM) mode (+o darthsteven) by anarcat
(06:13:14 PM) darthsteven: and it was granted
(06:13:23 PM) anarcat: great timing :)
(06:13:30 PM) EclipseGc: woot, now he can kick us all
(06:13:36 PM) darthsteven: hurrah!
(06:13:46 PM) darthsteven: (no idea how to though)
(06:13:49 PM) anarcat: congratulations! :)
(06:13:55 PM) darthsteven: so yeah, just been working on some docs
(06:13:57 PM) anarcat: darthsteven: /kick EclipseGc now now
(06:13:58 PM) anarcat: ;)
(06:13:59 PM) omega8cc: darthsteven: congrats!
(06:14:05 PM) EclipseGc: :-(
(06:14:10 PM) omega8cc: lol
(06:14:12 PM) darthsteven: and wrote an article about passing data from the Aegir frontend to the backend
(06:14:12 PM) anarcat: EclipseGc: just kidding :)
(06:14:15 PM) EclipseGc: heh
(06:14:23 PM) ***EclipseGc saw that
(06:14:32 PM) mode (+v shrop) by anarcat
(06:14:45 PM) EclipseGc: <a href="http://www.computerminds.co.uk/articles/storing-data-aegir" title="http://www.computerminds.co.uk/articles/storing-data-aegir">http://www.computerminds.co.uk/articles/storing-data-aegir</a>
(06:14:58 PM) anarcat: darthsteven: that's nice!
(06:15:04 PM) anarcat: darthsteven: we should copy that into the manual somewhere...
(06:15:14 PM) darthsteven: from our work on the docs so far, I wonder if we wanted to clean up the API before the 1.0 final release?
(06:15:23 PM) darthsteven: it's not hugely consistent
(06:15:27 PM) EclipseGc: heh
(06:15:38 PM) mode (+v ergonlogic) by anarcat
(06:15:42 PM) darthsteven: but that would mean big changes I guess, so 2.0 stuff
(06:15:54 PM) ergonlogic: I've been promoted
(06:15:56 PM) anarcat: darthsteven: i would also think that api changes at this point would be a bit daring
(06:16:14 PM) anarcat: darthsteven: i would rather tag those inconsistencies as issues for 2.x
(06:16:17 PM) darthsteven: sure
(06:16:19 PM) anarcat: darthsteven: but document, document
(06:16:32 PM) anarcat: also, i think we should aim for a short 1.0 release cycle
(06:16:35 PM) darthsteven: so, plans are to add lots more documentation over the next days/weeks
(06:16:41 PM) anarcat: esp. because we're having api issues and so on
(06:16:42 PM) darthsteven: that's it for me
(06:16:46 PM) anarcat: alright
(06:16:57 PM) anarcat: thanks darthsteven and welcome again in the crew
(06:17:07 PM) anarcat: so a parenthesis on the statuses in this channel
(06:17:13 PM) anarcat: +o is for developers
(06:17:37 PM) anarcat: we're all equal there - if you need access to some resource on aegirproject.org or drupal.org, just ask and it will be granted
(06:17:47 PM) anarcat: +v is for (currently) occasional contributors
(06:17:53 PM) anarcat: it's the way to become a dev :)
(06:18:09 PM) anarcat: end of parenthesis
(06:18:19 PM) anarcat: so anyone else has something to add to our (late) scrum?
(06:18:19 PM) anarcat: omega8cc: ?
(06:18:53 PM) omega8cc: nothing from me this week, I'm sick, but hope to add something next week
(06:18:57 PM) anarcat: i can speak quickly for sfyn, who made his first official release of uc_hosting (1.0-beta1), ubercart integration
(06:19:06 PM) anarcat: which we're going to deploy soon
(06:19:18 PM) anarcat: also, we'll need to figure out where the heck univate has gone :)
(06:19:25 PM) anarcat: if anybody saw him, let me know ;)
(06:19:49 PM) ergonlogic: So, for my part, I've actually been pretty busy... 
(06:19:57 PM) ergonlogic: testing some of the aegir contrib modules
(06:20:09 PM) ergonlogic: some functional updates to the community site (spread out over the past few weeks really)... and more to come
(06:20:19 PM) ergonlogic: Some documentation, though I feel I need to better understand how to document hooks properly... 
(06:20:28 PM) ergonlogic: I'll be trying to debug some issues on api.aegirproject.org
(06:20:42 PM) ergonlogic: And I have a new Aegir contrib module (<a href="https://github.com/ergonlogic/hosting_saas" title="https://github.com/ergonlogic/hosting_saas">https://github.com/ergonlogic/hosting_saas</a>) that denies uid1 to clients creating sites, and assignes them a role of our choosing
(06:20:52 PM) ergonlogic: which I'll release shortly on d.o, I think
(06:21:05 PM) ergonlogic: that's it, I think
(06:21:06 PM) anarcat: for hooks, we need to add sample code for it to make sense, e.g. hook_post_install()
(06:21:26 PM) darthsteven: ergonlogic: Feel free to ask me about documentation!
(06:21:30 PM) EclipseGc: ergonlogic: nice
(06:21:31 PM) anarcat: ah - ergonlogic and darthsteven - do we want to refactor your code straight into 1.0 core? or maybe we should wait for 2.x?
(06:21:33 PM) ergonlogic: I've some experience with a coule now, so I can try to put something together
(06:21:43 PM) ergonlogic: s/coule/could
(06:22:14 PM) darthsteven: anarcat: we're working in a branch of 1.0
anarcat AntiNSA-AFK 
(06:22:32 PM) anarcat: darthsteven: for docs, but i was talking about the scheduling, the dispatcher, and saas stuff
(06:22:46 PM) darthsteven: anarcat: ah okay
(06:22:48 PM) anarcat: darthsteven: i think we can merge that branch in rc4 - it's really all just docs
(06:23:10 PM) anarcat: i also think we can merge documentation into 1.x releases after 1.0
(06:23:23 PM) ergonlogic: I'd be happy for aegir core to appropriate hosting_saas
(06:23:34 PM) anarcat: so anyways, i think that's it for our scrum
(06:23:35 PM) ergonlogic: I think it might mean another promotion ;)
(06:23:44 PM) anarcat: hopefully we'll have rc4 ready tonight or tomorrow
(06:23:48 PM) EclipseGc: yay
(06:23:53 PM) anarcat: and 1.0 ready by next week or something
(06:23:54 PM) EclipseGc: mass migrate will come back :-D
(06:24:00 PM) anarcat: EclipseGc: yeah, i fixed it
(06:24:02 PM) darthsteven: cool
(06:24:04 PM) EclipseGc: anarcat: yeah I saw
(06:24:05 PM) ergonlogic: sounds good
(06:24:10 PM) EclipseGc: anarcat: thx for that :-D
(06:24:27 PM) anarcat: if someone wants to volunteer for the 1.x branch maintenance, i'd be happy to explain how that works and help with the work
(06:24:42 PM) ergonlogic: 
(06:24:45 PM) EclipseGc: lol
(06:24:48 PM) anarcat: ergonlogic: :P
(06:25:02 PM) anarcat: ergonlogic / darthsteven : i think i was too quick about the offer to merge the modules in core - let's do that merge in 2.x instead
(06:25:13 PM) darthsteven: anarcat: agreed
(06:25:29 PM) anarcat: okay, who wants the amazing and wonderful job of uploading the log in the site?
(06:25:31 PM) ergonlogic: k
(06:25:38 PM) ergonlogic: I'll do it
(06:25:47 PM) anarcat: great!
(06:26:04 PM) anarcat: thanks everyone for coming
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-101.html?destination=node%2F541%23comment-form">Login</a> or <a href="../../../../../user/register/index-101.html?destination=node%2F541%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-101.html?destination=node%2F541%23comment-form">Login</a> or <a href="../../../../../user/register/index-101.html?destination=node%2F541%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-578" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-04-12/index.html">Weekly Scrum IRC Log: 2011-04-12</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>
23:02 darthsteven: mig5: ping
23:02 darthsteven: anarcat: ping
23:02 darthsteven: Scrum?
23:02 hefring: Every Tuesday at 22h00 UTC: 15h00 San Francisco, USA (PST), 18h00 Montreal, Canada (EDT), 23h00 London, UK (CET), 08h00 (Wednesday) Melbourne, Australia (EST)
23:03 darthsteven: Guess this is going to be a quiet scrum then...
23:03 darthsteven: Well, I'll start
23:04 obicke: go for it
23:04 darthsteven: I've not done a whole lot of extra documentation, just all the constants in hostmaster, and a couple more hooks
23:04 darthsteven: I've been chasing ergonlogic about the api.a.o site not updating, he should be looking at it soon
23:05 darthsteven: hoping to still push some more docs before the 1.0 final release
23:05 darthsteven: that's it from me
23:05 darthsteven: anyone else?
23:06 darthsteven: EclipseGc, ergonlogic, grugnog, mvc, omega8cc, sfyn, shrop, skwashd or anyone else have anything to add?
23:06 obicke:  obicke is trying to round up anarcat and ergonlogic
23:07 EclipseGc:  EclipseGc was not reading
23:07 EclipseGc:  EclipseGc has nothing to add
23:08 shrop: Nothing at this point
23:08 shrop: When is v1 coming out?
23:09 darthsteven: soon
23:10 EclipseGc:  EclipseGc would like to point out his new power-module though <a href="http://drupal.org/project/path_profiler" title="http://drupal.org/project/path_profiler">http://drupal.org/project/path_profiler</a>
23:11 darthsteven: I'll give this scrum until 22:15UTC
23:14 sethvincent: darthsteven: where are the api docs located?
23:15 darthsteven: sethvincent: api.aegirproject.org
23:15 sethvincent: thanks
23:16 darthsteven: that's the end of the scrum then
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-102.html?destination=node%2F578%23comment-form">Login</a> or <a href="../../../../../user/register/index-102.html?destination=node%2F578%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-102.html?destination=node%2F578%23comment-form">Login</a> or <a href="../../../../../user/register/index-102.html?destination=node%2F578%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-601" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-04-19/index.html">Weekly Scrum IRC Log: 2011-04-19</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><pre>
[22:00:51]  &lt;@anarcat&gt;  alright, welcome everybody to our weekly scrum
[22:01:04]  &lt;@anarcat&gt;  i'm your host for this week and we have a wonderful agenda :)
[22:01:09]  &lt;@anarcat&gt;  enough with the bull
[22:01:14]  &lt;@anarcat&gt;  1.0 IS RELEASED!!!!!
[22:01:17]  &lt;@anarcat&gt;  YEEHAAA! :)
[22:01:24]  &lt;@mvc&gt;  :)
[22:01:26]  &lt;@darthsteven&gt;  YEAH!!!
[22:01:26]  &lt;@anarcat&gt;  *AND* we have found our first RC bug!
[22:01:33]  &lt;@anarcat&gt;  <a href="http://drupal.org/node/1132514" title="http://drupal.org/node/1132514">http://drupal.org/node/1132514</a>
[22:01:38]  &lt;@anarcat&gt;  d5 migrations are fucked! :)
[22:01:42]  &lt;@anarcat&gt;  so that's already fixed and great
[22:01:48]  &lt;@anarcat&gt;  and i am thinking of making 1.1 already
[22:02:06]  &lt;@anarcat&gt;  also, we found a low-hanging fruit here to make exportable backups easy: <a href="http://drupal.org/node/1047992" title="http://drupal.org/node/1047992">http://drupal.org/node/1047992</a>
[22:02:17]  &lt;@anarcat&gt;  and i merged this in by mistake in 1.x, but now i think i won't revert it
[22:02:36]  &lt;@anarcat&gt;  <a href="http://drupalcode.org/project/provision.git/patch/1edd757f95b3f86a84ba72" title="http://drupalcode.org/project/provision.git/patch/1edd757f95b3f86a84ba72">http://drupalcode.org/project/provision.git/patch/1edd757f95b3f86a84ba72</a>...
[22:02:43]  &lt;@anarcat&gt;  if anyone opposes, feel free to revert
[22:03:03]  &lt;@anarcat&gt;  it's not an API change, and it's a nice quick fix to have people with SFTP access able to download backups of their sites
[22:03:09]  &lt;@anarcat&gt;  so i think it would be nice to get this in
[22:03:18]  &lt;@anarcat&gt;  koumbit is now running 1.0 in production
[22:03:35]  &lt;@anarcat&gt;  and we're going to test head 1.x tomorrow, and if that works well we'll release 1.1
[22:03:46]  &lt;@anarcat&gt;  what else, what else
[22:04:04]  &lt;@anarcat&gt;  did i mention we have a candidate student for the summer of code?
[22:04:16]  &lt;@anarcat&gt;  <a href="http://www.google-melange.com/gsoc/proposal/review/google/gsoc2011/sdv_3" title="http://www.google-melange.com/gsoc/proposal/review/google/gsoc2011/sdv_3">http://www.google-melange.com/gsoc/proposal/review/google/gsoc2011/sdv_3</a>...
[22:04:19]  &lt;@anarcat&gt;  here, i mentionned it
[22:04:24]  * mapleleaf has quit (Quit: ChatZilla 0.9.86.1 [Firefox 3.6.16/20110319135224])
[22:04:24]  &lt;@anarcat&gt;  results should be announced somewhere next week
[22:04:33]  &lt;@anarcat&gt;  his focus would be on the d7 port and maybe dns
[22:04:40]  &lt;@anarcat&gt;  so i decided to hold off on those tasks for now
[22:04:54]  * Chipie has quit (Quit: Leaving.)
[22:04:55]  &lt;@anarcat&gt;  i will however look more at inter site security
[22:04:57]  &lt;@darthsteven&gt;  all very cool
[22:05:02]  * FatGuyLaughing has quit (Quit: FatGuyLaughing)
[22:05:09]  &lt;@anarcat&gt;  and queueing, and i'd like to talk with darthsteven about that, but prolly more next week
[22:05:16]  &lt;@anarcat&gt;  so that's about it for me
[22:05:49]  &lt;@anarcat&gt;  mig5 darthsteven ergonlogic mvc omega8cc sfyn shrop skwashd - something to add to our weekly scrum?
[22:05:55]  &lt;@darthsteven&gt;  yup
[22:06:20]  &lt;@anarcat&gt;  oh, and of course, i forgot: <a href="../../../../../discuss/2x-branch-created/index.html" title="http://community.aegirproject.org/discuss/2x-branch-created">http://community.aegirproject.org/discuss/2x-branch-created</a> 2.x is opened for dev, and i merged the chained cert support there
[22:06:33]  &lt;@darthsteven&gt;  I've just come from a Drupal Meetup where I saw that drupal 5 migration bug demoed
[22:06:42]  &lt;@darthsteven&gt;  and now I know what caused it
[22:06:44]  &lt;@darthsteven&gt;  :)
[22:06:58]  &lt;@anarcat&gt;  and now you can tell them it's fixed already :)_
[22:07:17]  &lt;@darthsteven&gt;  So I took a look at at patch to add SSL chained certificates to provision
[22:07:32]  &lt;@darthsteven&gt;  It needed a bit of cleanup, but was okay
[22:07:43]  &lt;@anarcat&gt;  i agree, and merged it into 2.x
[22:08:06]  &lt;@darthsteven&gt;  I think I added some docs since the last scrum, and ergonlogic got the api.c.o site working
[22:08:36]  &lt;@darthsteven&gt;  ermm...that's it for me, nothing else Aegir related really
[22:08:45]  &lt;@darthsteven&gt;  hoping to write more docs though...
[22:08:51]  &lt;@darthsteven&gt;  done
[22:08:55]  &lt;@darthsteven&gt;  anyone else?
[22:09:09]  &lt;@anarcat&gt;  cool
[22:09:22]  &lt;@anarcat&gt;  omega8cc: ?
[22:09:35]  &lt;@anarcat&gt;  omega8cc: you mentionned something about tracking 2.x, can you expand on that?
[22:09:36]  &lt;@omega8cc&gt; I released Barracuda/Octopus 1.0-boa-T-8 with Aegir 1.0
[22:10:08]  &lt;@omega8cc&gt; anarcat: just switched to 2.x to continue with patches related to Nginx
[22:10:22]  &lt;@anarcat&gt;  i am, in general, a bit worried that we won't get as much testing on 2.x than we have on 1.x now that 1.x is declared stable, but i'll try to run 2.x on my home server - we were also thinking of running 2.x on a dev server at koumbit, but that has yet to happen
[22:10:26]  &lt;@anarcat&gt;  omega8cc: cool, nice to hear
[22:11:04]  &lt;@omega8cc&gt; anarcat: I will use 2.x in Barracuda head, so people will test it and I hope to get more feedback
[22:11:08]  &lt;@anarcat&gt;  cool
[22:11:31]  &lt;@anarcat&gt;  i was thinking of reworking the platform access control for april, we set that as a target, so maybe that will land in 2.x and maybe get merged in 1.x if it doesn't break any apis
[22:11:41]  &lt;@omega8cc&gt; interesting that 5.x to 6.x to 7.x migrations worked for me
[22:11:48]  &lt;@anarcat&gt;  i am still looking for ways to radically change 2.x so that it's really different from 1.x :P
[22:12:01]  &lt;@omega8cc&gt; but I tested it only on basic core installs
[22:12:07]  &lt;@anarcat&gt;  i see
[22:12:12]  &lt;@anarcat&gt;  nice to hear anyways :)
[22:12:13]  &lt;@ryanarmstrong&gt;    anarcat: cross-site stats :P
[22:12:21]  &lt;@ryanarmstrong&gt;    *goes back into the background*
[22:13:25]  &lt;@anarcat&gt;  oh, darthsteven - this could use some more eyes as it touches on the context/services stuff that you may be familiar with: <a href="http://drupal.org/node/1074966" title="http://drupal.org/node/1074966">http://drupal.org/node/1074966</a>
[22:13:41]  &lt;@anarcat&gt;  omega8cc: thanks for your feedback
[22:13:44]  &lt;@anarcat&gt;  anyone else?
[22:13:54]  &lt;@anarcat&gt;  ryanarmstrong: you'll have to expand on that after the scrum :)
[22:14:03]  &lt;@ryanarmstrong&gt;    will do, didn't want to derail :)
[22:14:07]  &lt;@omega8cc&gt; we need UI improved in 2.x, I will submit patches soon, and will propose Fetaures integration etc
[22:14:17]  &lt;@anarcat&gt;  omega8cc: great idea!
[22:14:31]  &lt;@anarcat&gt;  omega8cc: one idea about features was to drop our idea of "features" in favor of features.module
[22:14:38]  &lt;@darthsteven&gt;  anarcat: yeah I saw that, and it is on my radar, but I've not used any of the DNS stuff, but could look at the code anyways
[22:14:57]  &lt;@omega8cc&gt; right, and move install profile to profiler
[22:15:06]  &lt;@omega8cc&gt; maybe
[22:15:10]  &lt;@anarcat&gt;  omega8cc: yeah
[22:15:20]  &lt;@anarcat&gt;  omega8cc: ergonlogic was saying it was a good upgrade path to d7
[22:15:33]  &lt;@anarcat&gt;  alright
[22:15:35]  &lt;@omega8cc&gt; anarcat: yes, noticed that
[22:15:47]  &lt;@anarcat&gt;  we're pretty much done here, thanks for attending our scrum session and see you next week!
[22:16:02]  &lt;@darthsteven&gt;  I'm not sure that converting to features features would get us much, as we don't use CCK/fields
[22:16:07]  &lt;@anarcat&gt;  anyone wants to upload this log to the com site?
[22:16:26]  &lt;@darthsteven&gt;  will do
[22:16:28]  &lt;@anarcat&gt;  darthsteven: indeed..
[22:16:31]  &lt;@anarcat&gt;  darthsteven: cool! tx
[22:16:59]  &lt;@anarcat&gt;  darthsteven: as for the dns issue, it's not as much for the DNS but for the part where he changes the way config information is stored in the services objects
[22:17:03]  &lt;@anarcat&gt;  hairy stuff
[22:17:09]  &lt;@anarcat&gt;  alright, scrum end!
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-103.html?destination=node%2F601%23comment-form">Login</a> or <a href="../../../../../user/register/index-103.html?destination=node%2F601%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-103.html?destination=node%2F601%23comment-form">Login</a> or <a href="../../../../../user/register/index-103.html?destination=node%2F601%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-612" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-04-26/index.html">Weekly Scrum IRC Log: 2011-04-26</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><div class="codeblock"><code>[22:00:05]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; hello everyone!<br />[22:00:09]&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; &#039;ello<br />[22:00:10]&nbsp;&nbsp; &lt;anarcat&gt; welcome to our weeeeekly scrum!<br />[22:00:27]&nbsp; &lt;anarcat&gt; tons of great news this week<br />[22:00:34] &lt;anarcat&gt; sethvincent: scrum time<br />[22:00:41]&nbsp; &lt;sethvincent&gt; hello!<br />[22:00:41]&nbsp;&nbsp; &lt;hefring&gt; hey<br />[22:01:05]&nbsp; &lt;anarcat&gt; so alright, i&#039;ll start by welcoming our new google summer of code student that will work on the d7 port and dns frontend<br />[22:01:12]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; sethvincent: congratulations on your admission! :)<br />[22:01:23]&nbsp;&nbsp; &lt;sethvincent&gt; thanks! i&#039;m pretty excited about it<br />[22:01:24] &lt;anarcat&gt; now, for my stuff<br />[22:01:28]&nbsp;&nbsp;&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; sethvincent: congrats<br />[22:01:56]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i worked some time on the drush unit testing stuff and have a patch for drush 5 to refactor the unit testing code so we can test functions directly<br />[22:02:14]&nbsp; &lt;anarcat&gt; i will work on unit testing before reshuffling the backend too much, which should make 2.x more robust throughout the refactoring<br />[22:02:30]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; we upgraded everything to 1.1<br />[22:02:34]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; which i released last week<br />[22:02:46]&nbsp;&nbsp; &lt;anarcat&gt; and our stable release seems to be well.. pretty stable :)<br />[22:03:01]&nbsp;&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; heh<br />[22:03:02]&nbsp; &lt;anarcat&gt; sethvincent: i was wondering if we could make an announcement for your project, that would make nice publicity :)<br />[22:03:14]&nbsp;&nbsp;&nbsp; &lt;sethvincent&gt; ok. that sounds good.<br />[22:03:30]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; oh, and i met with ubuntu people at the local launch party to get help with the backport of drush in there, should followup shortly<br />[22:03:33]&nbsp; &lt;anarcat&gt; that&#039;s it for me<br />[22:03:34]&nbsp;&nbsp;&nbsp; &lt;shrop&gt;&nbsp;&nbsp; hey hey<br />[22:04:20]&nbsp; &lt;anarcat&gt; oh, next week, i&#039;ll work on that announcement, we&#039;re deploying provision ACL internally big time here, and i&#039;ll work more on the new jenkins server we have (thanks mig5!) and unit testing - that&#039;s all<br />[22:04:25] &lt;anarcat&gt; anyone else?<br />[22:04:33] &lt;anarcat&gt; sethvincent: maybe you want to introduce yourself a little? :)<br />[22:04:45]&nbsp;&nbsp; &lt;sethvincent&gt; sure.<br />[22:05:19]&nbsp;&nbsp;&nbsp; &lt;sethvincent&gt; i&#039;ll be working on the d7 port and dns.<br />[22:05:32] &lt;anarcat&gt; alright :)<br />[22:05:41]&nbsp;&nbsp; &lt;anarcat&gt; and i&#039;ll be your mentor, from what i understand :)<br />[22:05:44]&nbsp; &lt;sethvincent&gt; i&#039;m a student at the evergreen state college, where i also work part time as an advisor to the student newspaper there<br />[22:06:04]&nbsp; &lt;anarcat&gt; (if anyone else wants to help with that, that would be cool, btw)<br />[22:06:36]&nbsp;&nbsp;&nbsp; &lt;shrop&gt;&nbsp;&nbsp; d7 ports and dns stuff?<br />[22:06:37]&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; is the plan to move all our major components to entities?<br />[22:06:47]&nbsp;&nbsp;&nbsp; &lt;sethvincent&gt; yeah, i&#039;m excited to hear any advice y&#039;all have on the d7 port and dns<br />[22:06:52] &lt;anarcat&gt; right<br />[22:06:55]&nbsp;&nbsp;&nbsp; &lt;sethvincent&gt; entities does look like the way to go<br />[22:06:59]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; so we alraedy have a few things on the table here<br />[22:07:10]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; univate has a patch to refactor the install profile with profiler and use features more<br />[22:07:16]&nbsp; &lt;anarcat&gt; that will certainly facilitate the port<br />[22:07:30]&nbsp; &lt;anarcat&gt; that&#039;s in http://drupal.org/node/517620<br />[22:07:45] &lt;anarcat&gt; as for entities, yes, i figured that most of our current content type should probably become entities<br />[22:08:11]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; that, in turn, will facilitate implementation of the DNS frontend, which will be also based on entities<br />[22:08:21]&nbsp; &lt;anarcat&gt; and will provide a good use case for creating a new &quot;hosting&quot; content-type<br />[22:08:36] &lt;anarcat&gt; having documentation on how to actually do that while it&#039;s coded would be useful too in the manual<br />[22:08:52]&nbsp; &lt;anarcat&gt; i think that&#039;s all my brain has to offer now for that :)<br />[22:09:01]&nbsp;&nbsp;&nbsp; * FatGuyLaughing has quit (Quit: FatGuyLaughing)<br />[22:09:08] &lt;anarcat&gt; sethvincent: you should get familiar with git and work on a development branch, at the very least<br />[22:09:26]&nbsp;&nbsp;&nbsp; * FatGuyLaughing has joined #aegir<br />[22:09:34]&nbsp;&nbsp; &lt;shrop&gt;&nbsp;&nbsp; anarcat: Will there be a dev branch for d7? sorry if I missed that<br />[22:09:37]&nbsp;&nbsp; &lt;anarcat&gt; or maybe work in a sandbox for the time being, not sure it&#039;s appropriate to give you full commit access from the start<br />[22:09:41]&nbsp; * FatGuyLaughing has quit (Client Quit)<br />[22:09:42]&nbsp; &lt;anarcat&gt; shrop: there will certainly be!<br />[22:09:53]&nbsp; * realityloop has joined #aegir<br />[22:09:59]&nbsp; &lt;shrop&gt;&nbsp;&nbsp; cool. Just checked and didn&#039;t see it yet, but wanted to be sure.<br />[22:10:04]&nbsp;&nbsp;&nbsp; &lt;sethvincent&gt; ok. i have some git experience. i&#039;ll start out with a sandbox<br />[22:10:32]&nbsp;&nbsp; &lt;anarcat&gt; cool<br />[22:10:37] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; sethvincent: congrats!<br />[22:10:58]&nbsp;&nbsp; &lt;anarcat&gt; awesome<br />[22:11:09]&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; sethvincent: be sure to let us all know where you sandbox is<br />[22:11:16] &lt;EclipseGc&gt;&nbsp;&nbsp; your*<br />[22:11:29]&nbsp;&nbsp;&nbsp; &lt;sethvincent&gt; ok. what will be the best way to share things like that?<br />[22:11:34] &lt;anarcat&gt; i&#039;m sure it will be quite popular :)<br />[22:11:41]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; hum<br />[22:11:43]&nbsp; &lt;shrop&gt;&nbsp;&nbsp; Just caught up on sethvincent&#039;s position here.. great!<br />[22:12:11]&nbsp; &lt;anarcat&gt; sethvincent: maybe here? http://community.aegirproject.org/maintainers<br />[22:12:22]&nbsp;&nbsp; &lt;sethvincent&gt; anarcat: ok<br />[22:12:23]&nbsp; &lt;anarcat&gt; omega8cc: maybe you want to add pointers to your repos in there, btw<br />[22:12:43] &lt;anarcat&gt; sethvincent: otherwise, what&#039;s the next step for you and us? :)<br />[22:12:44] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; anarcat: right, good idea<br />[22:12:59]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; and if anyone else has anything to add to our scrum, now is a good time - we&#039;re almost done!<br />[22:13:04]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; darthsteven, you awake? :)<br />[22:14:19]&nbsp;&nbsp; &lt;sethvincent&gt; anarcat: i need to study some of the general changes from d6 to d7, the aegir api, and write out a plan for the d7 port.<br />[22:15:13] &lt;sethvincent&gt; google code expects students to start coding somewhere around may 24, but i&#039;d like to do a slow start earlier than that so that by may 24 i&#039;ve already made some progress.<br />[22:15:33] &lt;anarcat&gt; i see<br />[22:15:43]&nbsp;&nbsp;&nbsp; * arianekWORK has quit (Quit: Smell ya later)<br />[22:15:44]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; so between now and the 24th you start documenting a plan is that right?<br />[22:16:13]&nbsp; &lt;anarcat&gt; the right place for this is probably the handbook on the community site<br />[22:16:19]&nbsp; &lt;sethvincent&gt; yeah. a plan, studying documentation, and getting to know the mentors is what&#039;s listed on the google summer of code site, i think.<br />[22:16:20]&nbsp; &lt;sethvincent&gt; ok<br />[22:16:51]&nbsp;&nbsp; &lt;anarcat&gt; i have done some of that documentation here: http://community.aegirproject.org/developing/architecture<br />[22:16:56]&nbsp;&nbsp; &lt;anarcat&gt; before starting some coding, at least<br />[22:17:01]&nbsp;&nbsp;&nbsp; &lt;sethvincent&gt; ok<br />[22:17:49]&nbsp;&nbsp; &lt;anarcat&gt; alright, so welcome on board again, and thanks everyone for attending our scrum session!</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-104.html?destination=node%2F612%23comment-form">Login</a> or <a href="../../../../../user/register/index-104.html?destination=node%2F612%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-104.html?destination=node%2F612%23comment-form">Login</a> or <a href="../../../../../user/register/index-104.html?destination=node%2F612%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-623" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-05-03/index.html">Weekly Scrum IRC Log: 2011-05-03</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_7 last"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
</ul></div><p><div class="codeblock"><code>[22:01:15]&nbsp;&nbsp;&nbsp; * anarcat SCRUM TIME!<br />[22:01:24]&nbsp;&nbsp;&nbsp; * anarcat cues boom-boom beat<br />[22:01:30]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; alrighty<br />[22:01:40] &lt;anarcat&gt; so<br />[22:01:56]&nbsp;&nbsp; &lt;anarcat&gt; what i&#039;ll do this week: finish setting up the new jenkins server, and work on drush/provision unit testing in 2.x<br />[22:02:07]&nbsp;&nbsp; &lt;anarcat&gt; i have fixed a pesky issue in the site form editing<br />[22:02:09]&nbsp; &lt;shrop&gt;&nbsp;&nbsp; Haha<br />[22:02:22] * trainer has joined #aegir<br />[22:02:31]&nbsp; &lt;anarcat&gt; and we&#039;re struggling with a core dump in d7 installs on our production server we can&#039;t reproduce in staging, really weird<br />[22:02:39]&nbsp; &lt;anarcat&gt; if anyone got more info, let me know<br />[22:02:52] &lt;anarcat&gt; that&#039;s it for me<br />[22:03:02]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; anyone else?<br />[22:03:07] &lt;sethvincent&gt; i&#039;ll go<br />[22:03:11] &lt;anarcat&gt; c_mcintosh: you said you had something to mention for our scrum?<br />[22:03:18] * arianek is now known as arianek_afk<br />[22:03:20]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; sethvincent: go ahead!<br />[22:03:28]&nbsp;&nbsp; &lt;sethvincent&gt; sandbox: http://drupal.org/sandbox/seth.vincent/1140244<br />[22:03:43]&nbsp; &lt;sethvincent&gt; and the plan: http://community.aegirproject.org/roadmap/2.0/d7-port-dns-editor-plan-go...<br />[22:03:51]&nbsp;&nbsp;&nbsp; &lt;gmclelland&gt;&nbsp; is hostmaster-pause still a valid drush command? It tells me could not be found?<br />[22:04:01] &lt;sethvincent&gt; if anyone has advice on the plan that i wrote up please let me know<br />[22:04:08]&nbsp; &lt;anarcat&gt; gmclelland: please wait after the scrum :)<br />[22:04:20]&nbsp;&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; sethvincent: I&#039;ll read through it<br />[22:04:33]&nbsp;&nbsp; &lt;sethvincent&gt; i&#039;ve been doing studying of the docs, and that&#039;s what i&#039;ll keep working on over the next week<br />[22:04:47] * scottrigby has joined #aegir<br />[22:04:48]&nbsp;&nbsp; * anarcat reading up<br />[22:04:49] &lt;sethvincent&gt; @EclipseGc thanks!<br />[22:04:57]&nbsp;&nbsp; &lt;anarcat&gt; sethvincent: sounds good!<br />[22:05:04]&nbsp;&nbsp;&nbsp; * arianek_afk has quit (Remote host closed the connection)<br />[22:05:06]&nbsp;&nbsp; &lt;sethvincent&gt; cool. that&#039;s it for me.<br />[22:05:20] &lt;anarcat&gt; sethvincent: do you plan on reviewing the existing work in the issue queue?<br />[22:05:25]&nbsp; &lt;anarcat&gt; that&#039;s where most of the stuff is so far<br />[22:05:31]&nbsp;&nbsp;&nbsp; &lt;sethvincent&gt; ah. yes<br />[22:06:13]&nbsp; &lt;anarcat&gt; i&#039;m happy to see a plan, so far it looks sound<br />[22:06:23]&nbsp; &lt;sethvincent&gt; ok<br />[22:06:53]&nbsp;&nbsp; &lt;anarcat&gt; sethvincent: you should authentify with nickserv when you hang around here, it will give you +v, which is a good way to get notified when the scrum starts<br />[22:07:03]&nbsp;&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; I&#039;m hoping to get to do this this week or next, but I&#039;m actually intending on screwing around with drupal commerce some to see if I can get an outside of aegir D7 + DC platform requesting that aegir provision new sites<br />[22:07:19] &lt;anarcat&gt; we may make the channel +m (moderated, so only voiced users can talk) eventually so that will make it really important you authentify<br />[22:07:23]&nbsp;&nbsp;&nbsp; &lt;sethvincent&gt; anarcat: ok. i&#039;ll do that<br />[22:07:23]&nbsp;&nbsp; &lt;anarcat&gt; and that goes for everybody :)<br />[22:07:45]&nbsp;&nbsp; &lt;anarcat&gt; EclipseGc: cool - note that c_mcintosh is working on that<br />[22:08:05]&nbsp;&nbsp;&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; anarcat: <a href="http://drupal.org/project/hostmaster_plus" title="http://drupal.org/project/hostmaster_plus">http://drupal.org/project/hostmaster_plus</a> I assume?<br />[22:08:07] &lt;anarcat&gt; koumbit is also rolling out a new ecommerce frontend that will talk with aegir through XMLRPC, maybe in collaboration with c_mcintosh, we&#039;ll see<br />[22:08:42]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; wtf<br />[22:08:43]&nbsp; &lt;anarcat&gt; no<br />[22:08:57]&nbsp;&nbsp; &lt;anarcat&gt; c_mcintosh: that&#039;s not a good module name<br />[22:09:12]&nbsp;&nbsp; &lt;anarcat&gt; c_mcintosh: first, it should be called hosting_* as hostmaster is the profile name<br />[22:09:19]&nbsp;&nbsp; &lt;anarcat&gt; c_mcintosh: second, &quot;plus&quot; doesn&#039;t mean anything<br />[22:09:30]&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; anarcat: I was just intending on trying to get a straight up drush provisioning call going and requiring that they be on the same server<br />[22:09:38] * Met4physica has quit (Quit: Leaving)<br />[22:10:31]&nbsp;&nbsp; &lt;anarcat&gt; EclipseGc: not sure what you mean there<br />[22:10:40]&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; anarcat: meh, no worries<br />[22:11:04] &lt;EclipseGc&gt;&nbsp;&nbsp; anarcat: I&#039;ve not even gotten to dig in yet, so, nothing to see here ;-)<br />[22:11:09]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; my turn?<br />[22:11:36] &lt;anarcat&gt; darthsteven: go ahead! :)<br />[22:12:11]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; Well, I looked at running cron using wget for D7 and popped a fix into the 2.x branch<br />[22:12:35]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; I think the change is pretty simple, and could be easily backported to 1.x<br />[22:12:59]&nbsp;&nbsp; &lt;darthsteven&gt; Also, I have been thinking about the scheduled task problem<br />[22:13:24]&nbsp; &lt;darthsteven&gt; so plan for coming week is more docs and coming up with a firm plan for scheduled/recurring task<br />[22:13:29] &lt;darthsteven&gt; that&#039;s all<br />[22:14:15]&nbsp; &lt;anarcat&gt; cool<br />[22:14:21] &lt;anarcat&gt; i commented on your issue, but basically it&#039;s a great idea<br />[22:14:30]&nbsp; &lt;anarcat&gt; so we&#039;re almost done with our scrum here<br />[22:14:45]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; if anyone else has something to add, speak now or be silent for... a week ;)<br />[22:14:51] &lt;anarcat&gt; just kidding, you can speak whenever :P<br />[22:14:55]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I don&#039;t have anything special to report this week - it was a little spring holiday for me, but next week I plan to work on some Nginx related docs for c.a.o.<br />[22:14:57]&nbsp;&nbsp; &lt;anarcat&gt; but now is the best time to get feedback!<br />[22:15:02]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; awesome<br />[22:15:09]&nbsp; &lt;anarcat&gt; omega8cc: thanks for that cron.php fix btw<br />[22:15:13]&nbsp;&nbsp; &lt;darthsteven&gt; awesome module: http://drupal.org/project/hosting_platform_pathauto<br />[22:15:24]&nbsp; &lt;anarcat&gt; you guys were making me crazy with that to and fro :)<br />[22:15:42]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; darthsteven: yeah, that&#039;s freaking awesome<br />[22:15:46]&nbsp; &lt;anarcat&gt; we need to merge it into 2.x<br />[22:15:53] * ipwa has quit (Quit: ipwa)<br />[22:15:55] &lt;darthsteven&gt; or just add to the makefile?<br />[22:16:42] * sethvincent has quit (Quit: Page closed)<br />[22:17:31]&nbsp;&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; add to makefile<br />[22:17:32]&nbsp; &lt;EclipseGc&gt;&nbsp;&nbsp; ftw<br />[22:17:46]&nbsp; * dob_ has quit (Read error: Connection reset by peer)<br />[22:17:50]&nbsp;&nbsp; &lt;anarcat&gt; i think it should be in<br />[22:18:07]&nbsp; * dob_ has joined #aegir<br />[22:18:15] &lt;anarcat&gt; but whatever...<br />[22:18:20]&nbsp; &lt;darthsteven&gt; anyone else<br />[22:18:24]&nbsp; &lt;anarcat&gt; the biggest problem right now is that it hardcodes /var/aegir<br />[22:18:29]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; want to say anything?<br />[22:18:30]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i think we&#039;re done!<br />[22:18:37] &lt;anarcat&gt; or late<br />[22:18:45]&nbsp; &lt;anarcat&gt; and since we&#039;re not allowed to be late, we&#039;re done :P<br />[22:18:48]&nbsp; &lt;anarcat&gt; ciao everyone<br />[22:18:52]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; thanks for attending :)</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-105.html?destination=node%2F623%23comment-form">Login</a> or <a href="../../../../../user/register/index-105.html?destination=node%2F623%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-105.html?destination=node%2F623%23comment-form">Login</a> or <a href="../../../../../user/register/index-105.html?destination=node%2F623%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-639" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-05-10/index.html">Weekly Scrum IRC Log: 2011-05-10</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p><div class="codeblock"><code>[12:14am] anarcat: darthsteven mig5 bgm ergonlogic mvc joestewart omega8cc sfyn shrop skwashd univate_ : scrum time!<br />[12:14am] anarcat: alright<br />[12:14am] anarcat: so for my part i haven&#039;t done much aegir work in the last week<br />[12:14am] anarcat: i was swamped with sysadmin duties and other koumbit stuff<br />[12:15am] anarcat: i am trying to fix that damn d7 segfault problem we&#039;re having and i&#039;m stuck<br />[12:15am] anarcat: i will try to find sometime this week to finally setup the new jenkins server and start to work on provision unit tests<br />[12:15am] anarcat: sfyn something else to add to our scrum? <br />[12:15am] anarcat: omega8cc ?<br />[12:15am] omega8cc: I&#039;m still busy writing some Nginx related updated docs for c.a.o when I have some rare free minutes, and in the meantime Barracuda and Octopus have been finally moved to d.o, yay!<br />[12:15am] omega8cc: See <a href="http://drupal.org/project/barracuda" title="http://drupal.org/project/barracuda">http://drupal.org/project/barracuda</a> and <a href="http://drupal.org/project/octopus" title="http://drupal.org/project/octopus">http://drupal.org/project/octopus</a>, so we can co-operate better now.<br />[12:15am] anarcat: yay!<br />[12:16am] anarcat: awesome<br />[12:16am] omega8cc: Next week I plan to publish the docs I collected so far. That is it for me.<br />[12:16am] sfyn: Since last I came I started rolling out releases for uc_hosting<br />[12:16am] sfyn: I am working on the next one this week and then I am porting the puppy to D7<br />[12:17am] sfyn: And implementing remote storefronts, which means I am going to start working on services<br />[12:17am] anarcat: awesome<br />[12:17am] Pathin left the chat room. (Ping timeout: 252 seconds)<br />[12:17am] sfyn: cmcintosh has convinced me, along with 8 of his friends, to go with servicesapi<br />[12:17am] sfyn: also<br />[12:17am] anarcat: it seems our gsoc student is missing, but he&#039;s going to work on the d7 port of hostmaster, so you may want to coordinate with him on that<br />[12:18am] sfyn: quota api, and particularly the sites implementation of it could use some love, and i&#039;ve noticed that platforms being locked prevent you from changing anything on a site at all<br />[12:18am] sfyn: anarcat: what is his nick on irc?<br />[12:18am] anarcat: sfyn: he&#039;s sethvincent<br />[12:18am] Pathin joined the chat room.<br />[12:18am] sfyn: anarcat: and maybe you could fire over his email<br />[12:18am] anarcat: about platforms being locked - yeah, another user reported something like this recently<br />[12:18am] anarcat: sfyn: not sure i have his email, lemme check<br />[12:19am] sfyn: thanks<br />[12:19am] sfyn: one last thing<br />[12:19am] anarcat: done<br />[12:19am] sfyn: this discussion: http://community.aegirproject.org/discuss/aegir-and-phpmyadmin<br />[12:20am] sfyn: has a question about deploying phpmyadmin on slave servers, would be cool if someone could chip in with experience with those<br />[12:20am] anarcat: note that i haven&#039;t followed the issue queue or the community site in about a week, so i&#039;m a bit lagging <br />[12:20am] Pasqualle left the chat room. (Ping timeout: 240 seconds)<br />[12:20am] sfyn: anarcat: received and thanks<br />[12:20am] anarcat: i see<br />[12:21am] Artusamak is now known as Artusamak_afk.<br />[12:21am] anarcat: not sure i have time for this right now, but i would just set it up as a separate vhost<br />[12:21am] anarcat: and no need to set it up on all servers...<br />[12:21am] anarcat: anyways, we need some integration there so that mysql servers get configured in PMA<br />[12:21am] anarcat: i think therE&#039;s an issue for that<br />[12:21am] anarcat: anyone else for the scrum?<br />[12:23am]  sfyn chirps like a cricket<br />[12:24am] mvc: did i mention my pet drush module here lately?<br />[12:24am] mvc: http://drupal.org/sandbox/mvc/1142496<br />[12:24am] anarcat: mvc: i don&#039;t think you did!<br />[12:24am] anarcat: sweet<br />[12:24am] mvc: it reports which projects (as in groups of modules) are in use by different sites in one or more platforms<br />[12:25am] anarcat: good work<br />[12:25am] mvc: as soon as i get around to testing it with d5 and d7 i&#039;ll move it out of the sandbox<br />[12:25am] anarcat: isn&#039;t status-report a bit confusing as a command name? i would expect that command to give me similar results than the status report page in the drupal site...<br />[12:26am] anarcat: otherwise, cool<br />[12:26am] omega8cc: there is some promising contrib to review, if you can help<br />[12:26am] Pathin left the chat room. (Quit: Lost terminal)<br />[12:27am] obrienmd: mvc: really intersted in testing that, will do so ASAP... agree w/ anarcat on the command name though<br />[12:27am] omega8cc: see http://drupal.org/node/1144968<br />[12:27am] FatGuyLaughing left the chat room. (Quit: FatGuyLaughing)<br />[12:29am] anarcat: alright<br />[12:29am] anarcat: oh<br />[12:29am] anarcat: another thing<br />[12:29am] anarcat: koumbit is going to make a presentation at drupalcon this year<br />[12:29am] anarcat: i would have loved to talk with darthsteven about this, i guess we can catch up later this week<br />[12:29am] anarcat: but basically, we&#039;re going to send the proposal soon, the deadline is the 15th, iirc<br />[12:30am] anarcat: so there we go<br />[12:30am] anarcat: i think that covers it for our scrum<br />[12:30am] anarcat: thanks everybody for attending<br />[12:30am] anarcat: and see you next week!<br />[12:30am]  anarcat scrum over!<br />[12:30am] omega8cc: ciao<br />[12:30am] sfyn: salut<br />[12:30am] szczym: see you</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-106.html?destination=node%2F639%23comment-form">Login</a> or <a href="../../../../../user/register/index-106.html?destination=node%2F639%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-106.html?destination=node%2F639%23comment-form">Login</a> or <a href="../../../../../user/register/index-106.html?destination=node%2F639%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-663" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-05-24/index.html">Weekly Scrum IRC Log: 2011-05-24</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><div class="codeblock"><code>[22:00:11]&nbsp;&nbsp;&nbsp; * anarcat SCRUM TIME!<br />[22:00:27]&nbsp;&nbsp;&nbsp; &lt;j0nathan&gt;&nbsp;&nbsp;&nbsp; hi<br />[22:00:35]&nbsp;&nbsp; &lt;anarcat&gt; darthsteven / mig5 / bgm / grugnog / joestewart / mvc / omega8cc / sethvincent / / sfyn / shrop : scrum time!<br />[22:00:35]&nbsp;&nbsp;&nbsp; &lt;hefring&gt; anarcat: 2 days 8 hours ago &lt;mig5&gt; tell anarcat I don&#039;t know if one can export. I am happy to copy-and-paste, can you make me an admin of the system when you get a chance<br />[22:00:38]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; hallo :)<br />[22:00:50] &lt;anarcat&gt; mig5: sure will!<br />[22:00:54] &lt;anarcat&gt; so i&#039;ll start by saying<br />[22:00:54] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; hello!<br />[22:00:54]&nbsp;&nbsp; &lt;hefring&gt; que tal<br />[22:00:55]&nbsp; &lt;anarcat&gt; hi!<br />[22:00:55]&nbsp; &lt;hefring&gt; hola<br />[22:00:56] &lt;anarcat&gt; :)<br />[22:01:09]&nbsp;&nbsp; &lt;anarcat&gt; i&#039;ve got a few thinsg to touch base on<br />[22:01:18]&nbsp; &lt;anarcat&gt; darthsteven: we need to talk about drupalcon<br />[22:01:31] &lt;anarcat&gt; darthsteven: we&#039;d like to see if you could participate in the training<br />[22:01:40]&nbsp; &lt;anarcat&gt; also<br />[22:01:53] &lt;anarcat&gt; i&#039;ll be going to the drush code sprint in boston 27-28 of june<br />[22:02:04]&nbsp; &lt;anarcat&gt; and i&#039;ll probably be around boston during the weekend too for the design camp<br />[22:02:12]&nbsp;&nbsp; &lt;anarcat&gt; so if anybody wants to hang out or say hi<br />[22:02:13]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; hi :)<br />[22:02:18]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; what else<br />[22:02:35]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i&#039;ll look in the sites security issues this week - the stuff about sites being visible by anonymous users<br />[22:02:50]&nbsp;&nbsp; &lt;anarcat&gt; i know that sfyn is working on the uc_hosting module real hard, and got a 1.0 release out (or almost)<br />[22:03:11]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; we&#039;re looking at creating a d7 ubercart frontend that could talk to the aegir backend using cmcintosh&#039;s services_api stuff<br />[22:03:14] * henk_ has quit (Remote host closed the connection)<br />[22:03:22] &lt;anarcat&gt; so i think that&#039;s it for me!<br />[22:03:33]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; deadline for drupalcon votes is tomorrow, please vote for our sessions!<br />[22:03:50]&nbsp; &lt;anarcat&gt; http://london2011.drupal.org/conference/proposed-sessions?track=All&amp;expe...<br />[22:03:54]&nbsp; &lt;anarcat&gt; anyone else?<br />[22:04:38] &lt;sethvincent&gt; i will officially start coding for gsoc today!<br />[22:04:50]&nbsp;&nbsp; &lt;anarcat&gt; yaaay! :)<br />[22:04:57]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; sethvincent: so what do you need help on now?<br />[22:05:07]&nbsp;&nbsp;&nbsp; &lt;sethvincent&gt; i&#039;ll be getting started by making a branch in my snadbox to test out the relevant patches in the issue queue<br />[22:05:20]&nbsp;&nbsp;&nbsp; * peterm95018 has quit (Quit: peterm95018)<br />[22:05:24]&nbsp;&nbsp; &lt;anarcat&gt; cool<br />[22:05:34] &lt;anarcat&gt; take a look at this one, i think that&#039;s a key issue: http://drupal.org/node/517620<br />[22:06:11]&nbsp; &lt;sethvincent&gt; right, that seems like the main one i need to work with<br />[22:06:20]&nbsp; &lt;anarcat&gt; okay<br />[22:06:27] &lt;anarcat&gt; if you need any help, please do let me know<br />[22:06:53]&nbsp; &lt;anarcat&gt; sethvincent: anything else?<br />[22:06:54]&nbsp; &lt;sethvincent&gt; i figure once i start testing out patches, doing a test run through coder upgrade and such things i&#039;ll have a list of questions i could use help with<br />[22:06:55]&nbsp;&nbsp; &lt;anarcat&gt; anyone else?<br />[22:07:02] &lt;anarcat&gt; awesome<br />[22:07:02]&nbsp; &lt;sethvincent&gt; that&#039;s about it for me.<br />[22:07:05] &lt;anarcat&gt; sethvincent: ping me any time<br />[22:07:07]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; as an aside, if anybody hangs around the channel wants some training for aegir, please look at http://london2011.drupal.org/page/aegir-hosting-system-deep-dive<br />[22:07:09]&nbsp; &lt;sethvincent&gt; ok. thanks<br />[22:07:28]&nbsp;&nbsp; &lt;anarcat&gt; darthsteven / mig5 / josh_k / omega8cc / shrop : anything to add to our weekly scrum?<br />[22:07:54]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i can add for myself that i will be reviewing the patch queue tomorrow and try to get some of those commits in, and who knows - get 1.2 out the door? :)<br />[22:07:59] &lt;joestewart&gt;&nbsp; I posted a couple of simple patches that should be easy to review.<br />[22:08:06]&nbsp;&nbsp; &lt;josh_k&gt;&nbsp; I am currently working a small side project to try and get universities to use aegir<br />[22:08:15] &lt;anarcat&gt; awesome!<br />[22:08:21] &lt;anarcat&gt; double-awesome! ;)<br />[22:08:22]&nbsp;&nbsp; &lt;josh_k&gt;&nbsp; if it works, it should mean more users and hopefully more support (of the good kind)<br />[22:08:26] &lt;josh_k&gt;&nbsp; :)<br />[22:08:29]&nbsp;&nbsp; &lt;anarcat&gt; great :)<br />[22:08:35] &lt;anarcat&gt; joestewart: thanks for the patches<br />[22:09:06]&nbsp;&nbsp; &lt;anarcat&gt; alright, anyone else?<br />[22:10:15]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; omega8cc: ?<br />[22:10:18]&nbsp; &lt;anarcat&gt; maybe?<br />[22:10:48]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; not much this week, still working on new docs for aegir/nginx<br />[22:10:59]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; plus some video maybe<br />[22:11:04]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; good<br />[22:11:56] &lt;anarcat&gt; alright<br />[22:12:05]&nbsp; &lt;anarcat&gt; so i think that does it for our scrum, thanks everyone for attending!<br />[22:12:20]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; if anyone has anything to add, i&#039;ll stick around another 3 minutes, but in the meantime i&#039;ll upload the log to the site<br />[22:12:21]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; ciao</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-107.html?destination=node%2F663%23comment-form">Login</a> or <a href="../../../../../user/register/index-107.html?destination=node%2F663%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-107.html?destination=node%2F663%23comment-form">Login</a> or <a href="../../../../../user/register/index-107.html?destination=node%2F663%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-666" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-05-31/index.html">Weekly Scrum IRC Log: 2011-05-31</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><div class="codeblock"><code>[22:00:12]&nbsp;&nbsp;&nbsp; * anarcat SCRUM TIME!<br />[22:00:19]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; so welcome to our weekly scrum and blablablablabla :)<br />[22:00:26]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; I WANT TO RELEASE 1.2! :)<br />[22:00:42]&nbsp;&nbsp;&nbsp; &lt;Aciid&gt;&nbsp;&nbsp; more aegir harder faster stronger<br />[22:00:43]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i&#039;ve been itching to make a new release, and since we have a few good patches in, i thought it&#039;d be a good idea<br />[22:00:54]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i could do it on thursday<br />[22:00:56]&nbsp;&nbsp;&nbsp; &lt;sfyn&gt;&nbsp;&nbsp;&nbsp; WOW THAT SOUNDS GREAT ANARCAT! Is that the release we only talk about in all-caps?<br />[22:01:00]&nbsp;&nbsp; &lt;anarcat&gt; if nobody freaks out until then<br />[22:01:07]&nbsp; &lt;anarcat&gt; sfyn: no, it&#039;s not. :)<br />[22:01:22]&nbsp; * bwood has joined #aegir<br />[22:01:27]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i&#039;ve been mostly focused on working on the stable branch so far<br />[22:01:35] &lt;anarcat&gt; but i merged stuff around<br />[22:01:42]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i wonder where our gsoc student is<br />[22:02:12]&nbsp;&nbsp; &lt;anarcat&gt; i&#039;ll be reviewing the patches sitting in the queue, so if you want to submit a patch for 1.x, now is a good time to push it up to RTBC<br />[22:02:19]&nbsp; &lt;anarcat&gt; and that&#039;s about it for me!<br />[22:02:31] &lt;anarcat&gt; anyone else got something to announce here?<br />[22:02:43]&nbsp; &lt;sfyn&gt;&nbsp;&nbsp;&nbsp; nope<br />[22:02:49] &lt;anarcat&gt; oh and i&#039;ll be working on the dupe client/site visible to anon stuff too this week<br />[22:02:57]&nbsp; * FransK has quit (Ping timeout: 258 seconds)<br />[22:03:23]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; since nobody is saying anything, i&#039;ll just bring something on a completely unrelated note: http://anarcat.koumbit.org/2011-05-23-construire-une-antenne-quad-en-ville<br />[22:03:33]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; morning<br />[22:03:41]&nbsp; &lt;anarcat&gt; i&#039;m building a huge ham radio antenna, 15&#039;x15&#039;x14&#039;, 11&#039; in the air<br />[22:03:43]&nbsp; &lt;anarcat&gt; heey mig5 !<br />[22:03:46]&nbsp; &lt;sfyn&gt;&nbsp;&nbsp;&nbsp; anarcat: wow that really is very unrelated<br />[22:03:50]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; omg i woke up in time for a scrum<br />[22:03:56]&nbsp;&nbsp;&nbsp; &lt;jmcclelland&gt; anarcat: i only now saw your response to <a href="http://drupal.org/node/1083366" title="http://drupal.org/node/1083366">http://drupal.org/node/1083366</a>. I&#039;d like to follow up and see if we can come up with a reasonable strategy before your next release.<br />[22:03:59]&nbsp;&nbsp; &lt;anarcat&gt; mig5: omgomgomg! :)<br />[22:04:24]&nbsp; &lt;sfyn&gt;&nbsp;&nbsp;&nbsp; Would this perhaps be a good time to mention I won&#039;t be going to London, and so Koumbit will need a third aegir dev interested in participating in our training?<br />[22:04:27]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; mig5: i changed the DNS records as you asked<br />[22:04:43] &lt;anarcat&gt; sfyn: i already mentionned this to darthsteven, we&#039;ll see where it goes<br />[22:04:46] &lt;sfyn&gt;&nbsp;&nbsp;&nbsp; sl;ash helping us to deliver our training<br />[22:04:49]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; thanks anarcat. darthsteven has sudo on that box now so there&#039;s more hands on deck<br />[22:04:53]&nbsp; &lt;sfyn&gt;&nbsp;&nbsp;&nbsp; anarcat: ah, ok, thanks<br />[22:05:07]&nbsp; &lt;anarcat&gt; we&#039;re having trouble getting him to sync in during the scrum these days, maybe we can retune our schedule...<br />[22:05:29]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; mig5: great!<br />[22:05:46] &lt;anarcat&gt; jmcclelland: i&#039;m not sure we can get that in 1.x, actually - it seems like this would change the API in a significant way...<br />[22:05:53]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; jmcclelland: but we can certainly <em>talk</em> about this :)<br />[22:05:56]&nbsp;&nbsp; &lt;anarcat&gt; and at least get a fix in 2.x<br />[22:06:04]&nbsp;&nbsp;&nbsp; &lt;jmcclelland&gt; ok - i understand.<br />[22:06:49]&nbsp;&nbsp; &lt;anarcat&gt; jmcclelland: but yeah, thanks a lot for getting involved, that issue is ... hard :)<br />[22:06:58]&nbsp; &lt;anarcat&gt; alrighty<br />[22:07:02] &lt;anarcat&gt; anyone else wants to jump in?<br />[22:07:08]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; doing cool aegir stuff?<br />[22:07:13]&nbsp; &lt;anarcat&gt; building crazy ham radio antennas? :)<br />[22:07:25]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; hehe<br />[22:07:37] &lt;sfyn&gt;&nbsp;&nbsp;&nbsp; I am working on an extension to provision to provision ham radio antennaes<br />[22:07:38]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i&#039;ve nothing else to add, i only worked on the jenkins machine since coming back from overseas<br />[22:07:58]&nbsp; &lt;anarcat&gt; sfyn: you&#039;re so lying :P<br />[22:08:11]&nbsp;&nbsp;&nbsp; &lt;sfyn&gt;&nbsp;&nbsp;&nbsp; anarcat: no it should be ready by quarter 5, 2019<br />[22:08:32]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; ok cool<br />[22:08:34]&nbsp; &lt;anarcat&gt; mig5: okay!<br />[22:08:46]&nbsp; &lt;anarcat&gt; mig5: i am not sure where to go with that other vserver now<br />[22:08:53]&nbsp; &lt;anarcat&gt; i&#039;ve been busy with other stuff so i couldn&#039;t take care of that<br />[22:09:22]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; mig5: what do you think of a 1.2 thursday?<br />[22:09:31]&nbsp;&nbsp; &lt;anarcat&gt; or friday in your timezone :)<br />[22:09:39]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; (iirc)<br />[22:10:45]&nbsp;&nbsp; * bwood has quit (Quit: bwood)<br />[22:10:49]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; should be ok, i&#039;ll be &#039;around&#039;<br />[22:10:57]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; what other vserver are you referring to<br />[22:11:24]&nbsp; &lt;anarcat&gt; mig5: the other jenkins server?<br />[22:11:27]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; the original jenkins machine is my own jenkins machine that runs stuff on lots of my servers, so i&#039;ve just dropped those old aegir jobs since migrating them<br />[22:11:47]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; didn&#039;t you setup a separate jenkins server for me to play with?<br />[22:11:49] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; the reason we moved it was so i could give you sudo on a machine without exposing my evil little secrets :)<br />[22:11:56]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; the new jenkins server is for you to play with<br />[22:12:06]&nbsp;&nbsp; &lt;anarcat&gt; oh, so that new ip is excatly that!<br />[22:12:07]&nbsp; &lt;anarcat&gt; i see<br />[22:12:11]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yep<br />[22:12:12]&nbsp; &lt;anarcat&gt; so you migrated all the jobs!<br />[22:12:13]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; awesome<br />[22:12:21]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yes so go crazy :)<br />[22:12:23]&nbsp;&nbsp; &lt;anarcat&gt; okay, then i guess that&#039;s one thing less on my list :)<br />[22:12:24]&nbsp; &lt;anarcat&gt; great!<br />[22:12:30]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i think we intended on not building &#039;cloud&#039; machines but doing aegir installs directly on that box from git<br />[22:12:33]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; one thing i want to do is autobuild debian packges<br />[22:12:40]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; oooh yes<br />[22:12:40] &lt;anarcat&gt; yeah that too<br />[22:12:44]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; do we still do the cloud thing?<br />[22:12:48]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yes for now<br />[22:12:55]&nbsp; &lt;anarcat&gt; okay so here&#039;s my idea<br />[22:13:00]&nbsp; &lt;anarcat&gt; we can chain jobs right?<br />[22:13:03] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yep<br />[22:13:05]&nbsp; &lt;anarcat&gt; so we have a job that builds the package<br />[22:13:11] &lt;anarcat&gt; another that installs it!<br />[22:13:15]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; dumb and simple :)<br />[22:13:17]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; perfect<br />[22:13:32]&nbsp; &lt;anarcat&gt; oh wait, there&#039;s another one (duh) - another one removes the package! :)<br />[22:13:34]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; and we can chain an install + upgrade too<br />[22:13:40]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; totally<br />[22:13:45]&nbsp; &lt;anarcat&gt; so we can have a builder for the last release<br />[22:13:56]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; then use that package to install then chain with the upgrade<br />[22:14:13] &lt;anarcat&gt; the intricacies of this are just scary for a jenkins newbie like me, but it looks promising<br />[22:14:19]&nbsp; &lt;anarcat&gt; i tried the openid plugin again<br />[22:14:25]&nbsp; &lt;anarcat&gt; and it failed on me again<br />[22:14:37]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; chaining seems pretty straightforward in jenkins: and it&#039;s smart enough to know whether to not build if the previous job failed, etc<br />[22:14:37]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; problem is - i became the openid_provider maintainer now, so i have no excuse left :P<br />[22:14:40]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; hrm<br />[22:14:40]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; haha<br />[22:15:15] &lt;anarcat&gt; kinda sucks :P<br />[22:15:43]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; fuckity fuck :)<br />[22:15:48]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; too funny<br />[22:15:50]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; yeah<br />[22:15:55] &lt;anarcat&gt; so anyways<br />[22:16:00]&nbsp;&nbsp; &lt;anarcat&gt; i think that&#039;s it for our scrum folks!<br />[22:16:03]&nbsp; &lt;anarcat&gt; thanks for attending!<br />[22:16:11]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; cheers</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-108.html?destination=node%2F666%23comment-form">Login</a> or <a href="../../../../../user/register/index-108.html?destination=node%2F666%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-108.html?destination=node%2F666%23comment-form">Login</a> or <a href="../../../../../user/register/index-108.html?destination=node%2F666%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-669" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-06-07/index.html">Weekly Scrum IRC Log: 2011-06-07</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><div class="codeblock"><code>[15:00]&nbsp; * anarcat SCRUM TIME!<br />[15:00] &lt;@anarcat&gt; welcome everybody<br />[15:00] &lt;+sfyn&gt; hello<br />[15:00] &lt;@anarcat&gt; so this is our weekly scrum<br />[15:00] &lt;j0nathan&gt; halo<br />[15:00] &lt;@anarcat&gt; and i&#039;ll be your host, jolly-o-anarcat<br />[15:00] &lt;@anarcat&gt; this week<br />[15:00] &lt;@anarcat&gt; i want to release 1.2<br />[15:00] &lt;@anarcat&gt; i know i said that last week<br />[15:00] &lt;@anarcat&gt; but i failed<br />[15:00] &lt;@anarcat&gt; so i&#039;ll try again :)<br />[15:00] &lt;@anarcat&gt; if you guys have patches to review or commit, now is a good time<br />[15:00] &lt;@anarcat&gt; i&#039;ll do a sprint tomorrow and try to release thursday<br />[15:01] &lt;@anarcat&gt; also<br />[15:01] &lt;@anarcat&gt; koumbit wants to blog about &quot;cool things done with aegir&quot; - we have a few on our end<br />[15:01] &lt;@anarcat&gt; but if you guys have good examples, bring it!<br />[15:01] &lt;@anarcat&gt; you can send sample sites or blurbs or text or whatever to me on irc here or by email at anarcat@koumbit.org<br />[15:01] &lt;@anarcat&gt; what else what else<br />[15:02] &lt;@anarcat&gt; i think that&#039;s it for me, other than the fact that i&#039;m probably supposed to harrass our gsoc student here<br />[15:02] &lt;@anarcat&gt; sethvincent: prod!<br />[15:02] &lt;+sethvincent&gt; hello!<br />[15:02] &lt;@anarcat&gt; <em>prod</em> <em>prod</em> :)<br />[15:02] == dunkoh [~dunkoh@MW-ESR1-72-49-37-45.fuse.net] has joined #aegir<br />[15:02] &lt;@anarcat&gt; hey seth, how&#039;s it going<br />[15:02] &lt;@anarcat&gt; can you give us a little progress update?<br />[15:02] &lt;+sethvincent&gt; sorry. classes here have just finished, so i&#039;ll be more active starting this week.<br />[15:03] &lt;+sfyn&gt; yay<br />[15:03] &lt;@anarcat&gt; yay! :)<br />[15:03] &lt;+sfyn&gt; !<br />[15:03] &lt;+sethvincent&gt; i&#039;ve been working on porting eldir first.<br />[15:03] &lt;+sethvincent&gt; made a few initial commits of that work<br />[15:03] &lt;+sethvincent&gt; applied the &#039;turn features into features&#039; patch and have been looking through the changes that introduces<br />[15:04] &lt;+sethvincent&gt; and that&#039;s about it<br />[15:04] &lt;@anarcat&gt; okay, those commits don&#039;t seem to be pushed on drupal.org, please do so when you can!<br />[15:04] &lt;@univate&gt; I am willing to help out with some of that &quot;features&quot; stuff if you need it<br />[15:04] &lt;@anarcat&gt; good work<br />[15:04] &lt;@anarcat&gt; awesome!<br />[15:04] == dunkoh [~dunkoh@MW-ESR1-72-49-37-45.fuse.net] has quit [Client Quit]<br />[15:04] &lt;@anarcat&gt; univate: please do! i understand you had good contributions there<br />[15:04]&nbsp; * sfyn raises his hand<br />[15:04] &lt;@anarcat&gt; in fact, if you want to help sethvincent by reviewing and merging his patches in, that&#039;s great<br />[15:04] &lt;@anarcat&gt; sfyn: go right ahead<br />[15:04] &lt;@anarcat&gt; i think seth was done<br />[15:04] == jerryitt [~jerry@ip-78-137-175-99.dsl.digiweb.ie] has joined #aegir<br />[15:05] &lt;+sethvincent&gt; cool. so far all the stuff i&#039;m working on is here: http://drupal.org/sandbox/seth.vincent/1140244<br />[15:05] &lt;+sfyn&gt; not much done, but I have started working on the servicesAPI imp from the hostmaster_plus module<br />[15:05] &lt;+sfyn&gt; Bit of a mess, but I am hosting that work on github for now<br />[15:05] &lt;+sfyn&gt; https://github.com/sfyn/hosting_services<br />[15:05] == AquaticDisorder [~AquaticDi@cpc2-chwo3-0-0-cust50.perr.cable.virginmedia.com] has joined #aegir<br />[15:05] &lt;+sfyn&gt; The big news - the module can now be installed<br />[15:05] &lt;@univate&gt; I have a couple a major projects that are planning to use aegir, so hoping to have a a bit more time focused on this<br />[15:05] &lt;@anarcat&gt; sethvincent: i see... the url linked from the gsoc page is wrong: http://www.google-melange.com/gsoc/proposal/review/google/gsoc2011/sdv_3333/1#<br />[15:05] &lt;+sfyn&gt; I am waiting to hear back from cmcintosh - the original author - before publishing to d.org<br />[15:06] &lt;+sethvincent&gt; anarcat: oh! i&#039;ll fix that<br />[15:06] &lt;@anarcat&gt; sfyn: why isn&#039;t that on drupal.org?<br />[15:06] &lt;@anarcat&gt; oh nevermind :)<br />[15:06] &lt;@anarcat&gt; sfyn: i think you should go ahead and publish<br />[15:06] &lt;+sfyn&gt; I agree<br />[15:06] &lt;+sfyn&gt; if mr. mac doesn&#039;t get back to me by friday I will<br />[15:06] &lt;@anarcat&gt; ok<br />[15:07] &lt;@anarcat&gt; great<br />[15:07] &lt;+sfyn&gt; YOU HEAR THAT CMCINTOSH?<br />[15:07] &lt;@anarcat&gt; SFYN: I DON&#039;T THINK HE&#039;S HERE!<br />[15:07] &lt;@anarcat&gt; ;)<br />[15:07] &lt;@anarcat&gt; alright, enough yelling :)<br />[15:07] &lt;+sfyn&gt; maybe he will read the scrum log later<br />[15:07] == FatGuyLaughing [~FatGuyLau@65.64.83.127] has quit [Quit: FatGuyLaughing]<br />[15:07] &lt;@darthsteven&gt; my turn<br />[15:07] &lt;@anarcat&gt; sfyn, if you&#039;re done, i think we can move on to mig5 or darthsteven<br />[15:07] &lt;@anarcat&gt; alright :)<br />[15:07]&nbsp; * sfyn clams up<br />[15:08] &lt;@mig5&gt; nothing from me this week i&#039;m afraid<br />[15:08] &lt;@darthsteven&gt; so, this week I&#039;ve been reviewing a few issues and committing some of my patches to the 7.x branch and 6.x too<br />[15:08] &lt;@mig5&gt; i hear the distribution relesae node issue was fixed<br />[15:08] &lt;@darthsteven&gt; thinking about things to do with cron<br />[15:08] &lt;@anarcat&gt; darthsteven: cool<br />[15:08] &lt;@anarcat&gt; mig5: yes, at last!!!<br />[15:08] &lt;@darthsteven&gt; I&#039;m going to hit documentation hard over the next few weeks<br />[15:09] &lt;@darthsteven&gt; to live up to my &#039;documentation maintainer&#039; title :)<br />[15:09] &lt;@anarcat&gt; cool :)<br />[15:09] &lt;@anarcat&gt; that&#039;s great!<br />[15:09] &lt;@darthsteven&gt; I&#039;d also like to get api.aegirproject.org sorted out<br />[15:09] &lt;@darthsteven&gt; cause it&#039;s a bit of a mess at the moment<br />[15:09] &lt;@anarcat&gt; darthsteven: we should really move the api site to our aegir server, that would fix a lot of shit<br />[15:09] &lt;@anarcat&gt; yeah<br />[15:09] &lt;@anarcat&gt; ergonlogic was proposing we move to d7 too<br />[15:10] &lt;@darthsteven&gt; we can discuss in the issue...<br />[15:10] &lt;@anarcat&gt; yeah<br />[15:10] &lt;@darthsteven&gt; that&#039;s it from me<br />[15:10] == ipwa [~ipwa@190.222.35.202] has joined #aegir<br />[15:10] &lt;@anarcat&gt; alright<br />[15:10] &lt;@darthsteven&gt; anyone else?<br />[15:10] &lt;@anarcat&gt; mig5: anything to add?<br />[15:10] &lt;@mig5&gt; nope<br />[15:10] &lt;@anarcat&gt; otherwise i think we&#039;re kind of done here<br />[15:10] &lt;@anarcat&gt; thanks everyone for attending, and see you on the other side of 1.2 :)<br />[15:10] &lt;@anarcat&gt; oh<br />[15:10] &lt;+sfyn&gt; cya all next week<br />[15:10] &lt;@anarcat&gt; another thing<br />[15:11] &lt;@anarcat&gt; i am trying to remove aegir from ubuntu<br />[15:11] &lt;@anarcat&gt; because it currently ships with 0.3<br />[15:11] &lt;+sfyn&gt; oops<br />[15:11] &lt;@anarcat&gt; which is confusing some people<br />[15:11] &lt;@anarcat&gt; and is blocking the drush backport<br />[15:11] &lt;@anarcat&gt; but that seems to be hard<br />[15:12] &lt;@anarcat&gt; if anyone wants to help in the ubuntu effort, that would be apprecitated: https://bugs.launchpad.net/ubuntu/+source/aegir-provision/+bug/793567<br />[15:12] &lt;@anarcat&gt; and https://bugs.launchpad.net/ubuntu/+source/drush/+bug/755169<br />[15:12] &lt;@anarcat&gt; so that&#039;s about it<br />[15:12] &lt;@anarcat&gt; thanks again everyone</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-109.html?destination=node%2F669%23comment-form">Login</a> or <a href="../../../../../user/register/index-109.html?destination=node%2F669%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-109.html?destination=node%2F669%23comment-form">Login</a> or <a href="../../../../../user/register/index-109.html?destination=node%2F669%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-718" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-06-21/index.html">Weekly Scrum IRC Log: 2011-06-21</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
21:59 &lt;@anarcat&gt; hey
21:59 &lt;@anarcat&gt; gooood morning vietnam!
22:00 &lt;@mig5&gt; HELO
22:00 &lt;@anarcat&gt; alright
22:00  * anarcat SCRUM TIME!
22:00 &lt;@anarcat&gt; gosh this is early
22:00 &lt;@anarcat&gt; so welcome everyone
22:00 &lt;@darthsteven&gt; heh
22:01 &lt;@anarcat&gt; i'm your sleepy host, unless another timezone feels less jetlagged :)
22:01 &lt;@mig5&gt; getting sleepy :)
22:01 &lt;@darthsteven&gt; I'm your less sleepy host then
22:01 &lt;@anarcat&gt; yay! :)
22:01 &lt;@darthsteven&gt; Welcome to the scrum for 21 Jun 2011
22:01 &lt;@darthsteven&gt; Who wants to speak first?
22:01 &lt;@darthsteven&gt; anarcat?
22:01 &lt;@anarcat&gt; i can try! :)
22:02 &lt;@anarcat&gt; so i haven't published 1.2, but this time i have a good excuse
22:02 &lt;@anarcat&gt; we're really almost there - i want to test the debian packages first
22:02 &lt;@anarcat&gt; i was able to make an autobuilder in jenkins
22:02 &lt;@anarcat&gt; so jenkins now has a pgp key and can build packages. both from the debian branch and from the 1.x branch
22:02 &lt;@anarcat&gt; <a href="https://drupal.org/node/1183926" title="https://drupal.org/node/1183926">https://drupal.org/node/1183926</a>
22:02 &lt;@darthsteven&gt; cool
22:03 &lt;@anarcat&gt; there are a good few questions in there that i'd like feedback about
22:03 &lt;@anarcat&gt; esp. from mig5
22:03 &lt;@mig5&gt; awesome, you are now our CI ninja :)
22:03 &lt;@anarcat&gt; crap :)
22:03 &lt;@darthsteven&gt; anything else anarcat?
22:03 &lt;@anarcat&gt; well, there's this daemon thing :)
22:04 &lt;@anarcat&gt; i played with darthsteven's queue runner, and it's awesom
22:04 &lt;@anarcat&gt; we're running it in production, working very well, got people impressed
22:04 &lt;@anarcat&gt; i want to merge it in 2.x
22:04 &lt;@anarcat&gt; and port our dispatcher to the d7 queue system
22:04 &lt;@anarcat&gt; i think we should make queue-runner 1.1
22:04 &lt;@anarcat&gt; i think that's about it for me!
22:05 &lt;@darthsteven&gt; mig5?
22:05 &lt;@darthsteven&gt; (thanks anarcat)
22:05 &lt;@anarcat&gt; welcome!
22:05 &lt;@mig5&gt; nothing from me this week, i need to catch up on the jenkins changes
22:05 &lt;@darthsteven&gt; okay, cool
22:05 &lt;@darthsteven&gt; I'll go next...
22:06 &lt;@darthsteven&gt; I looked at the daemon for running tasks with anarcat
22:06 &lt;@darthsteven&gt; resulting in a 1.1 release, which anarcat hasn't noticed :)
22:06 &lt;@anarcat&gt; haha cool
22:06 &lt;@darthsteven&gt; We also got the api site sorted last week, though mostly not down to me
22:06 &lt;@darthsteven&gt; which is ace!
22:07 &lt;@mig5&gt; nice
22:07 &lt;@darthsteven&gt; I added a new hook to enable friendly names for servers in lists of servers
22:07 &lt;@darthsteven&gt; and released a module that uses the hook
22:07 &lt;@darthsteven&gt; <a href="http://drupal.org/project/hosting_server_titles" title="http://drupal.org/project/hosting_server_titles">http://drupal.org/project/hosting_server_titles</a>
22:08 &lt;@darthsteven&gt; I think I added a ton of documentation the week before too
22:08 &lt;@darthsteven&gt; which was nice
22:08 &lt; chouchou&gt; Hello,
22:08 &lt;@anarcat&gt; cool
22:08 &lt;@darthsteven&gt; but that's it from me
22:08 &lt; chouchou&gt; pls i have an issue,
22:08 &lt;@anarcat&gt; note that i documented the 2.x api changes here <a href="../../../../../upgrading/path/index.html" title="http://community.aegirproject.org/upgrading/path">http://community.aegirproject.org/upgrading/path</a>
22:08 &lt; chouchou&gt; first, i wouuld like to know how do I change the drush gid download source ?
22:08 &lt;@darthsteven&gt; chouchou: We're in the middle of a scrum, please hold for the end, then you can ask
22:08 &lt;@anarcat&gt; i think we should keep that page in mind when we change the API
22:08 &lt;@darthsteven&gt; anyone else have anything for the scrum?
22:09 &lt;+omega8cc&gt; I finally started publishing some nginx related docs on <a href="http://www.omega8.cc/" title="www.omega8.cc">www.omega8.cc</a> and will extract from there to re-post on c.a.o handbook, also some new nginx patches are in testing and should be sumitted for review shortly, we are sponsoring also Aegir session at <a href="http://drupaldesigncamp.net/" title="http://drupaldesigncamp.net">http://drupaldesigncamp.net</a> next week!
22:09 &lt;@darthsteven&gt; awesome
22:09 &lt;@mig5&gt; props to shrop who has done great work on the community site sorting some stuff out
22:09 &lt;@darthsteven&gt; omega8cc: anything else?
22:09 &lt;@anarcat&gt; all good
22:09 &lt;+omega8cc&gt; that is it from me, i think
22:10 &lt;@anarcat&gt; ah, note that i'll be at the drush test sprint next week, so i will probably miss the scrum
22:10 &lt;@anarcat&gt; if you guys have specifics of things i should work on with drush, let me know!
22:11 &lt;@darthsteven&gt; anyone else have anything to add?
22:11 &lt;@darthsteven&gt; I'll give it a minute...
22:11 &lt;@anarcat&gt; well, i'd like to chat quickly with mig5 about the jenkins stuff
22:11 &lt;@anarcat&gt; mig5: did you read up on the issue?
22:11 &lt;@mig5&gt; this one? <a href="https://drupal.org/node/1183926" title="https://drupal.org/node/1183926">https://drupal.org/node/1183926</a>
22:12 &lt;@anarcat&gt; mig5: upy
22:12 &lt;@anarcat&gt; yup*
22:12 &lt;@anarcat&gt; basically, we need to decide this:
22:12 &lt;@anarcat&gt; 1. do we install/remove/update/whatnot on the jenkins server? (be scared)
22:12 &lt;@anarcat&gt; 2. do we install using dpkg -i or do we upload to debian.koumbit.net's unstable repository and use apt-get? (the latter has the disadvantage of having 
                 to wait a undetermined delay for repo to catchup, but has the upside of broadening the test capabilities)
22:12 &lt;@anarcat&gt; i am thinking more and more of this as a build bot, with packges uploaded to debian.koumbit.net/unstable
22:13 &lt;@anarcat&gt; and then everyone can test them, including jenkins or "the cloud", from jenkins
22:13 &lt;@mig5&gt; 1. is fine with me but i was already scared :) but as far as I can tell, it's the only way to sanely chain tasks.. (as opposed to an isolated 
              cloud-generated VPS)
22:14 &lt;@mig5&gt; the fundamental thing i want to do with theses tests, is pretend like we are a user
22:14 &lt;@anarcat&gt; well that's the thing, if we upload to debian.k.n, then we can run install/upgrade/whatever independently...
22:14 &lt;@mig5&gt; except with preseeding :)
22:14 &lt;@mig5&gt; so i think the apt-get is good
22:14 -!- bgm_ is now known as bgm
22:14 &lt;@anarcat&gt; ok
22:14 &lt;@anarcat&gt; mig5: do you know about jenkins's "tasks"?
22:14 -!- bgm [~bgm@2607:f748:1200:105::5] has quit [Changing host]
22:14 -!- bgm [~bgm@pdpc/supporter/active/bgm] has joined #aegir
22:14 &lt;@mig5&gt; no
22:14 &lt;@anarcat&gt; ok
22:14 &lt;@mig5&gt; i've only done build steps
22:15 &lt;@anarcat&gt; i tried to play with that, but i don't feel it's what we need, basically...
22:15 &lt;@anarcat&gt; it's a weird thing
22:15 &lt;@anarcat&gt; so okay, that's cool
22:15 -!- mode/#aegir [+v shrop] by ChanServ
22:15 &lt;@anarcat&gt; i think i'll try to setup fabric stuff to deploy debian packages remotely
22:15 &lt;@anarcat&gt; and of course upload to debian.k.n
22:15 &lt;@mig5&gt; deploy as in send to koumbit.d.n ?
22:15 &lt;@mig5&gt; er
22:15 &lt;@mig5&gt; ah
22:15 &lt;@anarcat&gt; and fix the preseed
22:16 &lt;@mig5&gt; so by deploy debian packages remotely you mean, build on fresh VPS?
22:16 &lt;@mig5&gt; as i am not against the former
22:16 &lt;@anarcat&gt; deploy as in ssh cloud.vps.foo 'apt-get install aegir; drush provision-tests ; apt-get remove aegir'
22:16 &lt;@mig5&gt; so long as we can clean up our mess on the jenkins server
22:17 &lt;@anarcat&gt; well, i'm worried about not being able to do that
22:17 &lt; chouchou&gt; are you free now?
22:17 &lt;@mig5&gt; my main worry about cloud.vps.foo is we may lose the ability to chain builds
22:17 &lt;@anarcat&gt; *and* about interop problems with jenkins itself
22:17 &lt;@darthsteven&gt; Anyone else have anything for the scrum? Otherwise we'll wrap it up there, and leave mig5 and anarcat to it...
22:17 &lt;@anarcat&gt; darthsteven: yup, ok
22:17 &lt;@darthsteven&gt; 
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-110.html?destination=node%2F718%23comment-form">Login</a> or <a href="../../../../../user/register/index-110.html?destination=node%2F718%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-110.html?destination=node%2F718%23comment-form">Login</a> or <a href="../../../../../user/register/index-110.html?destination=node%2F718%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-734" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-06-28/index.html">Weekly Scrum IRC Log: 2011-06-28</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><div class="codeblock"><code>[22:01:28]&nbsp; &lt;darthsteven&gt;&nbsp; scrum time!<br />[22:01:35]&nbsp; &lt;darthsteven&gt;&nbsp; who wants to go first?<br />[22:01:51]&nbsp; &lt;darthsteven&gt;&nbsp; me?<br />[22:01:55]&nbsp; &lt;darthsteven&gt;&nbsp; okay, if you insist<br />[22:02:09]&nbsp; &lt;darthsteven&gt;&nbsp; I&#039;ve not done much since last week<br />[22:02:27]&nbsp; &lt;darthsteven&gt;&nbsp; Don&#039;t really have anything to report<br />[22:02:36]&nbsp; &lt;darthsteven&gt;&nbsp; that&#039;s it from me!<br />[22:02:43]&nbsp; &lt;darthsteven&gt;&nbsp; anyone else have anything to add?<br />[22:03:08]&nbsp; &lt;mig5&gt;&nbsp; i&#039;ve done nothing this week either.. sadly I don&#039;t see things changing from that, either..<br />[22:03:16]&nbsp; &lt;shrop&gt;&nbsp; darthsteven: I hope to add more docs to community.aegirproject.org soon. Some ldap config info for Active Driectory<br />[22:03:29]&nbsp; &lt;mig5&gt;&nbsp; nice<br />[22:03:34]&nbsp; &lt;darthsteven&gt;&nbsp; awesome<br />[22:03:42]&nbsp; &lt;darthsteven&gt;&nbsp; anyone else?<br />[22:04:15]&nbsp; &lt;omega8cc&gt;&nbsp; I fixed a few bugs in the Nginx config, submit even more patches for review and also discovered we don&#039;t support D7 properly yet: http://drupal.org/node/1196034<br />[22:04:15]&nbsp; &lt;hefring&gt;&nbsp; <a href="http://drupal.org/node/1196034" title="http://drupal.org/node/1196034">http://drupal.org/node/1196034</a> =&gt; Paths to images are broken in D7 after site clone/rename =&gt; Provision, Code, critical, needs work, 2 comments, 1 IRC mention<br />[22:05:08]&nbsp; &lt;darthsteven&gt;&nbsp; oh hello, that&#039;s a bit of a showstopper<br />[22:05:31]&nbsp; &lt;darthsteven&gt;&nbsp; anyone else?<br />[22:05:45]&nbsp; &lt;omega8cc&gt;&nbsp; and that is it from me, I think, I plan to submit even more patches next/this week<br />[22:06:04]&nbsp; &lt;darthsteven&gt;&nbsp; Thank you omega8cc<br />[22:06:13]&nbsp; &lt;darthsteven&gt;&nbsp; anyone else have anything to add/discuss?<br />[22:06:36]&nbsp; * mrconnerton has joined #aegir<br />[22:06:41]&nbsp; &lt;omega8cc&gt;&nbsp; so, what about 1.2?<br />[22:07:05]&nbsp; &lt;omega8cc&gt;&nbsp; are we waiting for anarcat probably?<br />[22:07:27]&nbsp; &lt;darthsteven&gt;&nbsp; I think that anarcat was working to get the debian packages built and tested automatically before releasing 1.2<br />[22:07:36]&nbsp; &lt;darthsteven&gt;&nbsp; and we need to fix the issue you found<br />[22:07:43]&nbsp; &lt;omega8cc&gt;&nbsp; yeah<br />[22:08:20]&nbsp; &lt;darthsteven&gt;&nbsp; Well, we&#039;ll end the scrum there I think<br />[22:08:27]&nbsp; &lt;darthsteven&gt;&nbsp; thanks for coming<br />[22:08:33]&nbsp; &lt;darthsteven&gt;&nbsp; logs?<br />[22:08:33]&nbsp; &lt;hefring&gt;&nbsp; yeah, ok, i admit, i&#039;m logging this channel in <a href="http://hefring.mig5.net/bot/log/aegir" title="http://hefring.mig5.net/bot/log/aegir">http://hefring.mig5.net/bot/log/aegir</a> - ask me about log bookmark too ;)<br />[22:08:45]&nbsp; &lt;darthsteven&gt;&nbsp; hefring: log bookmark?<br />[22:08:45]&nbsp; &lt;hefring&gt;&nbsp; http://hefring.mig5.net/bot/log/aegir/2011-06-28#T88506</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-111.html?destination=node%2F734%23comment-form">Login</a> or <a href="../../../../../user/register/index-111.html?destination=node%2F734%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-111.html?destination=node%2F734%23comment-form">Login</a> or <a href="../../../../../user/register/index-111.html?destination=node%2F734%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-741" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-07-05/index.html">Weekly Scrum IRC Log: 2011-07-05</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>
<div class="codeblock"><code>[22:01:04]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; scrum time<br />[22:01:12]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; hello!<br />[22:01:12]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; anarcat sends his apologies for this week<br />[22:01:25]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; but I hear he had a good time at the drush sprint and got some good work done, so hopefully we&#039;ll hear more about that soon<br />[22:02:03] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; me, i once again didn&#039;t do anything.. oh, I did add to the jenkins deb install of aegir to uninstall and purge the packages before destroying<br />[22:02:13]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; which is a final good test of those packages<br />[22:02:18] &lt;halcyonCorsair&gt;&nbsp; omega8cc: i&#039;m trying a barracuda/octopus upgrade before i try again<br />[22:02:40] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i think we are well overdue for a 1.2 release, I am conscious there are a lot of patches from omega8cc for review (I think?) so we should get those in<br />[22:02:53]&nbsp;&nbsp; &lt;halcyonCorsair&gt;&nbsp; omega8cc: but i was having trouble replicating the site installation commands, i think there might have been some arguments i was missing?<br />[22:02:55]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; halcyonCorsair: please wait 15 minutes, we have scrum time<br />[22:02:56]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; that&#039;s it from me, over to darthsteven and omega8cc<br />[22:03:27] &lt;darthsteven&gt; sure<br />[22:03:52] * Harley has joined #aegir<br />[22:03:56]&nbsp;&nbsp; &lt;darthsteven&gt; I got the Jenkins deb install of aegir working<br />[22:04:07]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; epic<br />[22:04:13] &lt;darthsteven&gt; and worked on getting notification integration with Aegir<br />[22:04:26]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; http://drupal.org/project/hosting_notifications<br />[22:04:42]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; oh nice. i saw somewhere a sandbox link but it had disappeared<br />[22:04:47]&nbsp;&nbsp; &lt;darthsteven&gt; So I now get push notifications on my iPhone when Aegir tasks fail<br />[22:04:51]&nbsp;&nbsp; &lt;darthsteven&gt; which is nice<br />[22:04:58]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; write-up coming soon<br />[22:05:02] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; nice. Notifo?<br />[22:05:11]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; that&#039;s it from me<br />[22:05:25]&nbsp;&nbsp; &lt;darthsteven&gt; (using prowl, but whatever messaging module supports is possible)<br />[22:05:36]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; gotcha<br />[22:06:23]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; omega8cc, anything to add? other than &#039;commit my patches you bastards&#039; :)<br />[22:06:42]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; ok, so I want to attack that weird critical today: <a href="http://drupal.org/node/1196034" title="http://drupal.org/node/1196034">http://drupal.org/node/1196034</a> and it lock all our upgrades schedule currently, and then will submit next round of improvements to the Nginx config plus - yay! Aegir UI patches!<br />[22:06:42] &lt;hefring&gt; <a href="http://drupal.org/node/1196034" title="http://drupal.org/node/1196034">http://drupal.org/node/1196034</a> =&gt; Paths to images are broken in D7 after site clone/rename =&gt; Provision, Code, critical, needs work, 3 comments, 3 IRC mentions<br />[22:07:52]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; cool!<br />[22:07:55]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; and that is it from me, but the UI changes are long overdue and I want to share them finally<br />[22:09:09] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; omega8cc: i wonder if that patch of yours needs to be applied to the deploy_7.inc file?<br />[22:09:13]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; as opposed to deploy.inc<br />[22:09:18] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; but i&#039;ve forgotten how it all works<br />[22:09:54] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; don&#039;t think it would change that result anyway<br />[22:09:57]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; mig5: that is exactly what I think, it misses d7 specific stuff there completely<br />[22:10:04] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; strange<br />[22:10:08]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; yeah<br />[22:10:15] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; anyway - anyone else got something to add to the scrum? ergonlogic?<br />[22:10:25]&nbsp; &lt;joestewart&gt;&nbsp; not directly on aegir but I posted two patches to drush_make that are useful for aegir. one that adds ability to set options in the makefile - <a href="http://drupal.org/node/1206340" title="http://drupal.org/node/1206340">http://drupal.org/node/1206340</a> the other updated a patch that allows setting working-copy per project - http://drupal.org/node/958844<br />[22:10:25] &lt;hefring&gt; <a href="http://drupal.org/node/1206340" title="http://drupal.org/node/1206340">http://drupal.org/node/1206340</a> =&gt; introduce an options array in the root level of the makefile =&gt; Drush Make, Code, normal, needs review, 0 comments, 1 IRC mention<br />[22:10:26]&nbsp;&nbsp;&nbsp; &lt;hefring&gt; <a href="http://drupal.org/node/958844" title="http://drupal.org/node/958844">http://drupal.org/node/958844</a> =&gt; PATCH: Allow [working-copy] in makefile as well as on commandline =&gt; Drush Make, Code, normal, needs review, 18 comments, 1 IRC mention<br />[22:10:42]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; nice, I saw the working-copy patch update<br />[22:11:08]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; also see Owen&#039;s Drush sprint overview here for those interested: http://civicactions.com/blog/2011/jun/30/drush_code_sprint_report<br />[22:11:29]&nbsp; * CraHan is now known as CraHan_out<br />[22:11:52]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; ok, scrum done I think, and i&#039;ll do the log<br />[22:11:56] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; thanks all<br />[22:12:04]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; thanks!</code></div>
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-112.html?destination=node%2F741%23comment-form">Login</a> or <a href="../../../../../user/register/index-112.html?destination=node%2F741%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-112.html?destination=node%2F741%23comment-form">Login</a> or <a href="../../../../../user/register/index-112.html?destination=node%2F741%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-749" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-07-12/index.html">Weekly Scrum IRC Log: 2011-07-12</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_7"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
(08:01:34 AM) anarcat: heey scrum time
(08:01:39 AM) anarcat: mig5 / darthsteven : scrum!
(08:01:45 AM) anarcat: omega8cc / sfyn / shrop : scrum time
(08:01:52 AM) anarcat: am i the only one awake? :)
(08:01:59 AM) omega8cc: hello!
(08:02:01 AM) ergonlogic: anarcat: not the *only* one
(08:02:14 AM) ergonlogic: hi all
(08:02:35 AM) anarcat: hello ergonlogic !
(08:02:50 AM) anarcat: so welcome to our weekly scrum
(08:02:52 AM) anarcat: i don't have much to say
(08:02:57 AM) anarcat: i've been away for a while
(08:03:03 AM) anarcat: vacations, drush sprint, etc
(08:03:12 AM) anarcat: i'll try to do a reportback of that great drush sprint soon
(08:03:36 AM) anarcat: but basically, i worked on jenkins, debian packaging and cleaning up the drush bootstrap process to make real unit tests possible
(08:03:49 AM) anarcat: so we can now test *functions* (instead of just commands) in the drush unit test framework
(08:03:53 AM) anarcat: which will be useful for provision
(08:03:54 AM) anarcat: now
(08:04:01 AM) anarcat: how's 1.x doing?
(08:04:14 AM) anarcat: i have on my tuesday todo (and had for a while) to release 1.2
(08:04:27 AM) anarcat: so i'm thinking to test the 1.x debian packages all over the place then just release the damn thing
(08:04:53 AM) anarcat: how does that sound?
(08:04:55 AM) omega8cc: anarcat: there are patches waiting in the queue
(08:05:02 AM) anarcat: ah darn :)
(08:05:05 AM) anarcat: omega8cc: your patches? :)
(08:05:07 AM) omega8cc: ;)
(08:05:10 AM) omega8cc: yep
(08:05:13 AM) anarcat: hehe ok
(08:05:17 AM) anarcat: that shouldn't be a big issue
(08:05:26 AM) omega8cc: simple stuff
(08:05:59 AM) anarcat: ok, so i'll merge that in before release
(08:06:09 AM) omega8cc: thanks
(08:06:09 AM) anarcat: so one last thing for me
(08:06:17 AM) anarcat: i'll be going on a looong holiday around drupalcon
(08:06:33 AM) anarcat: i'm leaving on august 3rd for europe, then going to drupalcon, then i'm gone for september
(08:06:54 AM) anarcat: so that could stall dev of 2.x for a little longer, but i'll be back in full force after that
(08:07:22 AM) anarcat: ah and before i forget: darthsteven: our hosting-queue-runner daemon disappeared here for the first time ever, not sure why, i'll try to track it down today
(08:07:29 AM) anarcat: okay, anyone else has something to add here?
(08:07:45 AM) ergonlogic: For my part, I posted an Aegir extension module on d.o: Hosting Profile Roles
(08:07:50 AM) ergonlogic: ... and I've begun hacking on a couple more
(08:07:55 AM) ergonlogic: And worked on a couple small patches to Drush
(08:08:09 AM) ergonlogic: I've been testing .deb installs on some client VPSs, which has been going smoothly
(08:08:12 AM) omega8cc: not much from me this week, besides fixed support for open public and vudeola
(08:08:33 AM) omega8cc: err, videola
(08:08:52 AM) ergonlogic: ooh, lullabot's published it now?
(08:08:56 AM) omega8cc: yep
(08:09:04 AM) ergonlogic: I'll have to check it out
(08:09:14 AM) omega8cc: and merged my fix already
(08:09:44 AM) Aciid: oh no, videola. I hope it doesn't catch on at the company that we should start offerin sites with it..
(08:09:56 AM) Aciid: videola's performance and seek capabilities are horrible
(08:10:08 AM) Aciid: or maybe it's lullabot's CDN
(08:11:28 AM) anarcat: alright, anyone else?
(08:11:43 AM) ***anarcat notices our gsoc student missing
(08:11:52 AM) anarcat: has he checked in at all while i was gone?
(08:12:13 AM) omega8cc: I didn't notice
(08:12:26 AM) anarcat: that's reallly too bad
(08:12:32 AM) anarcat: i'll have to do an evaluation soon
(08:12:57 AM) ergonlogic: oh, one other things (not to do with our GSoC student), Koumbit is now accepting donations in support of the Aegir Project
(08:13:15 AM) ergonlogic: there's a link on the front page of community.aegirproject.org
(08:14:29 AM) ergonlogic: if/when we receive any donations, we'll have to figure out how to disburse them
(08:14:33 AM) anarcat: ergonlogic: yeah, mig5 wanted to talk about this, actually
(08:14:55 AM) anarcat: ergonlogic: he was suggesting we (koumbit) get a rackspace cloud account and deal with the donations
(08:14:59 AM) anarcat: where are the donations going now?
(08:15:16 AM) ergonlogic: anarcat: Koumbit's PayPal acct
(08:15:23 AM) anarcat: ok, good
(08:15:46 AM) anarcat: alright
(08:15:57 AM) anarcat: so if there's nobody else, that will be it for our weekly scrum!
(08:16:13 AM) ergonlogic: I'll post to the community site
(08:16:28 AM) omega8cc: thanks
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-113.html?destination=node%2F749%23comment-form">Login</a> or <a href="../../../../../user/register/index-113.html?destination=node%2F749%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-113.html?destination=node%2F749%23comment-form">Login</a> or <a href="../../../../../user/register/index-113.html?destination=node%2F749%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-760" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-07-19/index.html">Weekly Scrum IRC Log: 2011-07-19</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>

22:00 &lt;@anarcat&gt; alright
22:00 &lt;@anarcat&gt; scrum time!
22:00 &lt;+omega8cc&gt; oh
22:01 &lt;@mig5&gt; I didn't know if it had moved time yet or what :)
22:01 &lt;@anarcat&gt; darthsteven: scrum!
22:01 -!- Irssi: #aegir: Total of 75 nicks [4 ops, 0 halfops, 4 voices, 67 normal]
22:01 &lt;@anarcat&gt; so hi
22:01 &lt;@anarcat&gt; i am not sure what to do about the time
22:01 &lt;@anarcat&gt; steven says he can't attend every week because it's too late
22:02 &lt;@anarcat&gt; mig5: and you seem also to have issue about i
22:02 &lt;@mig5&gt; not ideal for everyone, ever.. maybe we just tolerate a 'rotation' of devs who might not always be here
22:02 &lt;@anarcat&gt; t
22:02 &lt;@mig5&gt; maybe it helps that I never have anything to add... :/
22:02 &lt;@anarcat&gt; well
22:02 &lt;@anarcat&gt; i will be on a holiday for two months
22:02 &lt;@anarcat&gt; so maybe we can flip that around somehow
22:03 &lt;@anarcat&gt; <a href="http://www.timeanddate.com/worldclock/meetingdetails.html?year=2011&amp;month=7&amp;day=18&amp;hour=7&amp;min=0&amp;sec=0&amp;p1=165&amp;p2=136&amp;p3=152&amp;p4=137" title="http://www.timeanddate.com/worldclock/meetingdetails.html?year=2011&amp;month=7&amp;day=18&amp;hour=7&amp;min=0&amp;sec=0&amp;p1=165&amp;p2=136&amp;p3=152&amp;p4=137">http://www.timeanddate.com/worldclock/meetingdetails.html?year=2011&amp;mont...</a> 
22:03 &lt;@anarcat&gt; ?
22:03 &lt;@anarcat&gt; 8hAM london, 5PM melbourne, midnight LA
22:04 &lt;@mig5&gt; we'll see if darthsteven complains about the early start :)
22:04 &lt;@mig5&gt; fine with me
22:04 &lt;@darthsteven&gt; Fine with me
22:04 &lt;@anarcat&gt; 2 am EDT
22:04 &lt;@anarcat&gt; anyways
22:04 &lt;@anarcat&gt; i don't know what to do
22:04 &lt;@anarcat&gt; and i wish somebody else would figure it out basically :P
22:05 &lt;+omega8cc&gt; fine with me too ^^
22:05 &lt;@mig5&gt; it won't ever work until I quit :)
22:05 &lt;@darthsteven&gt; Could we rotate early and late on alternate weeks?
22:05 &lt;@anarcat&gt; we could!
22:05 &lt;@anarcat&gt; and really, we need to keep in mind we don't absolutely need to readjust for seth
22:05 &lt;@anarcat&gt; he was pretty clear about that
22:06 &lt;@darthsteven&gt; So long as it's not too confusing
22:06 &lt;@anarcat&gt; he can (and should) provide feedback in other ways
22:06 &lt;@anarcat&gt; the 8AM is kinda hard on some people here though
22:06 &lt;@anarcat&gt; so anyways
22:07 -!- Chipie [~Chipie@mue-88-130-106-140.dsl.tropolys.de] has quit [Quit: Leaving.]
22:07 &lt;@anarcat&gt; to be clear - i would rather see both of you guys (mig5 and darthsteven) than bring seth back in the loop and loose you :P
22:07 &lt;@anarcat&gt; so i suggest we stick to the schedule at least until i leave for europe
22:07 &lt;@mig5&gt; don't worry too much
22:07 &lt;@anarcat&gt; then you guys can organize as you want
22:07 &lt;@mig5&gt; sure
22:07 &lt;@anarcat&gt; which brings me to
22:08 &lt;@anarcat&gt; somebody should probably take over gsoc mentorship while i'm gone
22:08 &lt;@anarcat&gt; i may have *some* time to followup, but really not a lot
22:08 &lt;@anarcat&gt; i'll be traveling all over the place and I won't be able to prod seth
22:08 &lt;@anarcat&gt; and he needs prodding :P
22:08 &lt;@anarcat&gt; so if somebody could take that over, that would be cool
22:09 -!- redShadow[2V] [~redShadow@93-62-151-43.ip23.fastwebnet.it] has joined #aegir
22:09 &lt;@anarcat&gt; it's just sending an email from time to time to say "hey what's up" - he's usually pretty responsive
22:09 &lt;@anarcat&gt; i tried to encourage him to document hist stuff on the commmunity site
22:09 &lt;@mig5&gt; ok. I am probably doing the least all round so I will step up
22:09 &lt;@anarcat&gt; and we reoriented his roadmap
22:09 &lt;@anarcat&gt; which he needs to document
22:09 &lt;@anarcat&gt; mig5: awesome!
22:09 &lt;@mig5&gt; if you could brief me in an email on the current status, maybe cc him
22:09 &lt;@anarcat&gt; mig5: i can forward you the relevant communications
22:09 &lt;@mig5&gt; so i'm up to date
22:09 &lt;@mig5&gt; snap
22:09 &lt;@anarcat&gt; hehe
22:09 &lt;@anarcat&gt; cool
22:09 &lt;@anarcat&gt; so that will be it
22:10 &lt;@anarcat&gt; i will probably receive the "hey you need to evaluate this guy" at the end of the program, but we'll cross that bridge when we get there
22:10 &lt;@anarcat&gt; alright
22:10 &lt;@anarcat&gt; now
22:10 &lt;@anarcat&gt; i released 1.2
22:10 &lt;@anarcat&gt; whooohooo!
22:10 &lt;@anarcat&gt; <a href="../../../../../1/index-10.html" title="http://community.aegirproject.org/1.2">http://community.aegirproject.org/1.2</a>
22:10 -!- romaingar [5d197493@gateway/web/freenode/ip.93.25.116.147] has joined #aegir
22:10 &lt;@mig5&gt; thanks for that anarcat, it got a good response
22:10 &lt;@anarcat&gt; omega8cc found what seems to be a critical with the new cron code: <a href="https://drupal.org/node/1222208" title="https://drupal.org/node/1222208">https://drupal.org/node/1222208</a>
22:11 &lt;@anarcat&gt; i tried to roll out a patch for it and it failed to work, and i'm totally puzzled as to why
22:11 &lt;@darthsteven&gt; Cool
22:11 &lt;@anarcat&gt; i don't see the same issue at all here
22:11 &lt;@mig5&gt; i wondered if it was nginx specific, caching HTTP results
22:11 &lt;@anarcat&gt; and i'm about to give up on it for now, as we don't see the bug at koumbit
22:11 &lt;@anarcat&gt; mig5: s/was/is/
22:11 &lt;@anarcat&gt; the issue is still there
22:11 &lt;@mig5&gt; yeah.
22:11 &lt;@anarcat&gt; so i don't get it
22:11 &lt;@anarcat&gt; the original code *was* broken, but with the patch it should be fine
22:12 &lt;@anarcat&gt; <a href="http://drupalcode.org/project/hostmaster.git/commitdiff/f46c7ce" title="http://drupalcode.org/project/hostmaster.git/commitdiff/f46c7ce">http://drupalcode.org/project/hostmaster.git/commitdiff/f46c7ce</a>
22:12 &lt;@mig5&gt; it would not be the first time i've seen nginx cache a 404
22:12 &lt;+omega8cc&gt; there is no caching there
22:12 &lt;+omega8cc&gt; none
22:12 &lt;@mig5&gt; 2 days is too much though
22:12 &lt;@mig5&gt; ok
22:12 &lt;@darthsteven&gt; Not sure I have time, but will try to look if I can
22:12 &lt;+omega8cc&gt; just one 403 error locks the queue
22:13 &lt;@anarcat&gt; omega8cc: and you did try the patch?
22:13 &lt;@anarcat&gt; omega8cc: do you see this watchdog entry?         watchdog('hosting_cron', 'cron failed on site %site with error %error', array('%site' =&gt; $site-&gt;title, '%error' =&gt; $response-&gt;error), WATCHDOG_NOTICE);
22:13 &lt;+omega8cc&gt; yes, and reported failure there
22:13 &lt;@anarcat&gt; we'll need more juice to figure that one out
22:13 &lt;+omega8cc&gt; yes, it says 403, as before, for site taken offline for maintenance
22:14 &lt;+omega8cc&gt; this should be easy to reproduce
22:14 &lt;@anarcat&gt; ok
22:14 &lt;@anarcat&gt; so anyways, maybe darthsteven will look into it
22:14 &lt;@anarcat&gt; we can talk more about it after the scrum
22:14 &lt;@anarcat&gt; i monopolized the space too long :)
22:14 &lt;@anarcat&gt; otherwise yeah, release++
22:14 &lt;@anarcat&gt; the debian packages kick major asses
22:15 &lt;@anarcat&gt; and we're deploying a bunch of vservers with those
22:15 &lt;@anarcat&gt; so it's fun
22:15 &lt;@anarcat&gt; that's about it for me, anyone else?
22:15 &lt;@mig5&gt; nothing here
22:16 &lt;@anarcat&gt; darthsteven?
22:16 &lt;@anarcat&gt; oh crap, that should be a continue, not a break
22:16 &lt;@anarcat&gt; i'm on acid
22:16 &lt;@anarcat&gt; ffs
22:17 &lt;@mig5&gt; ??
22:17 &lt;@mig5&gt; ah
22:17 &lt;@anarcat&gt; anyways, i have a fix for the cron thing
22:17 &lt;@mig5&gt; haha
22:17 &lt;@darthsteven&gt; I've been on holiday, and not had time to do anything Aegir related
22:17 &lt;@darthsteven&gt; Will do something Aegir related in the next week for sure
22:17 &lt;@darthsteven&gt; Need to check up on our Drupalcon presentation with anarcat
22:18 &lt;@anarcat&gt; darthsteven: any specific time you want to do this?
22:18 &lt;+omega8cc&gt; hah, break does just that - breaks things! lol
22:18 &lt;@darthsteven&gt; anarcat: not fussy about a time
22:18 &lt;@mig5&gt; failed to fail failed :)
22:19 &lt;@darthsteven&gt; anarcat: soon though, as I think they need things from us?
22:20 &lt;@anarcat&gt; yeah, i've been kind of sloppy with this
22:20 &lt;@anarcat&gt; darthsteven: maybe we can talk later today?
22:21 &lt;@anarcat&gt; omega8cc: try cb0c2d2

22:21 &lt;@darthsteven&gt; sure, I'm around for the next 3 hours or so...
22:21 -!- scientist [~scientist@206.248.137.227] has joined #aegir
22:21 &lt;@anarcat&gt; ok
22:21 &lt;+omega8cc&gt; anarcat: sure, thanks
22:21 &lt;@anarcat&gt; i think that's it for our scrum unless somebody else wants to kick in...
22:21 &lt;@anarcat&gt; who's it?
22:22 &lt;@anarcat&gt; (who wants to upload the scrum log, that is)
22:22 &lt;@mig5&gt; i'll do it
22:22 &lt;@darthsteven&gt; I can
22:22 &lt;@darthsteven&gt; oh
22:22 &lt;+omega8cc&gt; :)
22:22 &lt;@darthsteven&gt; go for it mig5
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-114.html?destination=node%2F760%23comment-form">Login</a> or <a href="../../../../../user/register/index-114.html?destination=node%2F760%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-114.html?destination=node%2F760%23comment-form">Login</a> or <a href="../../../../../user/register/index-114.html?destination=node%2F760%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-794" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-07-26/index.html">Weekly Scrum IRC Log: 2011-07-26</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>
[12:00pm] anarcat scrum time!
[12:00pm] anarcat: hello people
[12:00pm] univate: hello
[12:00pm] anarcat: welcome to our morning weekly scrum
[12:00pm] omega8cc: hi
[12:00pm] anarcat: hey univate what's up
[12:00pm] anarcat: alright
[12:00pm] You left the chat by being disconnected from the server.
[12:01pm] You rejoined the room.
[12:01pm] You were granted voice by ChanServ.
[12:01pm] anarcat: univate: i don't know! 
[12:01pm] anarcat: so our gsoc student is supposed to take care of that, but i didn't get any news from him since the evaluation
[12:02pm] anarcat: which is really too bad
[12:02pm] anarcat: i'll try to ping him by email now
[12:02pm] mig5: anarcat: please send me an email before you go, re GSOC student
[12:02pm] mig5: or cc me on that one ^^
[12:02pm] anarcat: alright, i'll do this right away
[12:02pm] anarcat: other than that, i think that's it for me
[12:03pm] mig5: nothing new from me, all my time atm is taken up by work and study
[12:03pm] anarcat: alright, sounds like me except s/work and study/vacation/ 
[12:04pm] anarcat: mig5: @gmail is okay?
[12:04pm] mig5: sure
[12:04pm] omega8cc left the chat room. (Ping timeout: 240 seconds)
[12:04pm] You are now known as omega8cc.
[12:06pm] anarcat: okay, anyone else?
[12:06pm] anarcat: darthsteven: ping
[12:06pm] anarcat: omega8cc: how are the cron jobs?
[12:07pm] darthsteven: anarcat: pong!
[12:07pm] Irishgringo joined the chat room.
[12:07pm] anarcat: ha!
[12:07pm] anarcat: darthsteven: anything for the scrum?
[12:07pm] anarcat: darthsteven: we need to coordinate for the training and the session
[12:07pm] omega8cc: anarcat: it works great, but it should probably go in 1.3 no? as it is a critical for all users
[12:07pm] darthsteven: nothing for the scrum 
[12:07pm] anarcat: darthsteven: ok
[12:07pm] anarcat: darthsteven: i'm leaving the internets for a while on the 1st, so we would need to coordinate this week... email?
[12:08pm] anarcat: omega8cc: well, not for *all*, the drush method works fine right?
[12:08pm] darthsteven: anarcat: sure
[12:08pm] omega8cc: yeah, so it is critical in 50% 
[12:08pm] anarcat: okay
[12:08pm] anarcat: i don't think i'll be making a 1.3 release now
[12:09pm] anarcat: if someone else wants to, be my guest!
[12:09pm] omega8cc: as long as we have crush method as default, it is fine
[12:09pm] omega8cc: drush
[12:09pm] anarcat: univate: so the d7 port is handled by seth.vincent's sandboxes on drupal.org, if you want to followup on that it would be great
[12:09pm] omega8cc: uh, Lion autocorrection is crazy
[12:11pm] univate: anarcat: ok i will try and track down what is there
[12:11pm] anarcat: univate: can you give me your mail addy again
[12:14pm] univate: looks like seth.vincents last commits to his sandbox projects were 5 weeks ago
[12:15pm] anarcat: quite possible
[12:15pm] anarcat: he kinda stalled on the project at some point
[12:15pm] anarcat: i'll push him again now
[12:18pm] anarcat: so what's the next scrum time?
[12:18pm] welly left the chat room. (Quit: Textual IRC Client: <a href="http://www.textualapp.com/" title="http://www.textualapp.com/">http://www.textualapp.com/</a>)
[12:18pm] anarcat: i won't be coordinating the next ones until october 1st
[12:19pm] anarcat: so we need someone to take that over, or we suspend those for a while
[12:19pm] mig5: I don't think we agreed on a new time, i'll coordinate with darthsteven / omega8cc
[12:20pm] mig5: if we can't agree on a good time we'll suspend them or rotate people
[12:20pm] anarcat: ok
[12:20pm] mig5: or i'll move to europe 
[12:20pm] omega8cc:                          
[12:21pm] omega8cc: it should be easy to find good time for EU/AU
[12:23pm] mig5: yeah
[12:24pm] jonhattan left the chat room. (Quit: llevar una chaquete de guns'n'roses)
[12:24pm] anarcat: there was a time proposal here: <a href="../../../../../discuss/new-scrum-time-our-gsoc-student/index.html" title="http://community.aegirproject.org/discuss/new-scrum-time-our-gsoc-student">http://community.aegirproject.org/discuss/new-scrum-time-our-gsoc-student</a>
[12:28pm] omega8cc: mig5: what time works best for you? morning, evening?
[12:36pm] Egyptian[Laptop] joined the chat room.
[12:40pm] omega8cc: so maybe <a href="http://bit.ly/qGhjDr" title="http://bit.ly/qGhjDr">http://bit.ly/qGhjDr</a> ?
[12:40pm] mig5: evening usually better for me
[12:41pm] omega8cc: 7, 8 or 9 pm?
[12:41pm] mig5: 8 or 9 is fine, that link above is fine with me
[12:41pm] mig5: let's see what darthsteven says
[12:41pm] omega8cc: k
[12:41pm] anarcat: mig5: ping
[12:41pm] mig5: pong
[12:42pm] q-rban left the chat room. (Remote host closed the connection)
[12:42pm] q0rban joined the chat room.
[12:43pm] anarcat:        <a href="../../../../../handbook/project-history/index.html" title="http://community.aegirproject.org/handbook/project-history">http://community.aegirproject.org/handbook/project-history</a>    
[12:44pm] mig5: that's quite good! when did that appear
[12:44pm] scientist joined the chat room.
[12:45pm] anarcat: i just wrote it
[12:45pm] mig5: nice
[12:45pm] mig5: some of that would be good in the wikipedia page
[12:46pm] mig5: (for those of you who missed it: <a href="http://en.wikipedia.org/wiki/Aegir_Hosting_System" title="http://en.wikipedia.org/wiki/Aegir_Hosting_System">http://en.wikipedia.org/wiki/Aegir_Hosting_System</a> )
[12:46pm] anarcat: yeah, that's why i wrote it
[12:46pm] mig5:                          
[12:47pm] Irishgringo left the chat room. (Quit: ChatZilla 0.9.87 [Firefox 5.0.1/20110707182747])
[12:47pm] omega8cc: nice!
[12:48pm] mig5: in other news, i rejoined twitter, and now feel dirty
[12:49pm] mig5: and am studying for my OSCP, so if you find I discover any XSS or other holes in aegir, you know why  <a href="http://www.offensive-security.com/online-information-security-training/penetration-testing-backtrack/" title="http://www.offensive-security.com/online-information-security-training/penetration-testing-backtrack/">http://www.offensive-security.com/online-information-security-training/p...</a>
[12:50pm] scottalan joined the chat room.
[12:51pm] darthsteven: mig5, omega8cc: 10AM UTC is fine with me
[12:52pm] omega8cc: mig5: I already grabbed that book about security thanks to your tweets, so it is a good thing ()
[12:54pm] omega8cc: darthsteven, mig5: so let's change the scrum time to <a href="http://bit.ly/qGhjDr" title="http://bit.ly/qGhjDr">http://bit.ly/qGhjDr</a> then for the summer
[12:54pm] darthsteven: agreed
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-115.html?destination=node%2F794%23comment-form">Login</a> or <a href="../../../../../user/register/index-115.html?destination=node%2F794%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-115.html?destination=node%2F794%23comment-form">Login</a> or <a href="../../../../../user/register/index-115.html?destination=node%2F794%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-795" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-08-02/index.html">Weekly Scrum IRC Log: 2011-08-02</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
20:00 &lt;@mig5> ok, scrum time
20:00 &lt;@mig5> as usual, no news from me this week :P
20:00 &lt;@mig5> anarcat is away as we know
20:00 &lt;@mig5> I have not heard from the GSOC student, so I will follow that up
20:01 &lt;@mig5> there are currently no criticals in the queue which is nice, although I have vaguely heard about some issues with the cron queue, someone let me know if that's still an issue
20:01 &lt;@mig5> aaaand I can't think of anything else significant, other than thanks to omega8cc for donating to hefring :)
20:02 &lt;+omega8cc> haha
20:02 &lt;@mig5> go for it darthsteven, omega8cc
20:02 &lt;@darthsteven> I've done a little bit of work on the Aegir session for Drupalcon
20:02 &lt;@darthsteven> hope to have that completed by the end of the week
20:02 &lt;@mig5> oh nice
20:03 &lt;@darthsteven> And then I hope to start writing docs again, but am away on holiday a lot over the next little while
20:03 &lt;@darthsteven> but that's it from me
20:03 -!- aegir-jenkins [~PircBot@173-203-101-207.static.cloud-ips.com] has quit [Ping timeout: 252 seconds]
20:03 &lt;@darthsteven> omega8cc?
20:04 &lt;+omega8cc> I didn't submit any new patches, but I promise I will - related to the UI, soon
20:04 &lt;+omega8cc> also, I released 1.0-boa-T-8.9, and it is using Aegir head
20:04 &lt;+omega8cc> so good for receiving more feedback
20:05 &lt;+omega8cc> and I noticed the sites cron is still an issue on some servers, when web based method is used
20:05 &lt;+omega8cc> I will debug this and post more details soon
20:05 &lt;@mig5> i am tired of this one in the queue: <a href="http://drupal.org/node/1111572" title="http://drupal.org/node/1111572">http://drupal.org/node/1111572</a> - I have been planning on removing a chunk of code from provision for that for a while, so I might do that in the 7.x branch and see how it goes
20:05 &lt; hefring> <a href="http://drupal.org/node/1111572" title="http://drupal.org/node/1111572">http://drupal.org/node/1111572</a> => Undefined index: profiles deploy.provision.inc:84 => Provision, Code, normal, needs work, 14 comments, 2 IRC mentions
20:06 &lt;@mig5> it is harmless but people keep carrying on about it
20:06 &lt;@mig5> we have a fresh bug from ergonlogic too <a href="http://drupal.org/node/1236490" title="http://drupal.org/node/1236490">http://drupal.org/node/1236490</a>
20:06 &lt; hefring> <a href="http://drupal.org/node/1236490" title="http://drupal.org/node/1236490">http://drupal.org/node/1236490</a> => "View client" permission broken => Hostmaster (Aegir), Code, normal, active, 0 comments, 1 IRC mention
20:06 -!- aegir-jenkins [~PircBot@173-203-101-207.static.cloud-ips.com] has joined #aegir
20:07 &lt;@mig5> aegir-jenkins returns.. that was weird
20:07 &lt;@mig5> it's been up for over 100 days now, \o/
20:07 &lt;@darthsteven> mig5: 1111572, can we set up a test case that invokes that code, remove it and then see if anything breaks/changes
20:07 &lt;+omega8cc> aegir-jenkins: welcome back :)
20:07 -aegir-jenkins:#aegir- omega8cc did you mean me? Unknown command 'welcome'
20:07 -aegir-jenkins:#aegir- Use '!78jujdd7yujufyyshhayuuufhhysjjhyew9i2 help' to get help!
20:07 &lt;@mig5> hah
20:07 &lt;+omega8cc> haha
20:08 &lt;@mig5> oops, and there goes anarcat's clever idea to 'hide' the jenkins command...
20:08 &lt;@darthsteven> hehe
20:08 &lt;@darthsteven> that's genius!
20:08 &lt;@darthsteven> anyone else have anything for the scrum?
20:09 &lt;@mig5> darthsteven: that's the thing re: test case: we don't scan packages in the site-specific dir, which means those values are always null. anyway i promise to look at it
20:09 &lt;@darthsteven> ok
20:09 &lt; Aciid> I have something , never setup a VM with Amazon AWS
20:09 &lt;@mig5> ok, scrum done, unless ergonlogic has anything to add
20:09 &lt; Aciid> <a href="http://pastebin.com/pRt4UNeg" title="http://pastebin.com/pRt4UNeg">http://pastebin.com/pRt4UNeg</a> - mail sent by Amazon
20:10 &lt;+omega8cc> so, thanks for attending!
20:10 &lt;@mig5> cheers
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-116.html?destination=node%2F795%23comment-form">Login</a> or <a href="../../../../../user/register/index-116.html?destination=node%2F795%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-116.html?destination=node%2F795%23comment-form">Login</a> or <a href="../../../../../user/register/index-116.html?destination=node%2F795%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-883" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-09-13/index.html">Weekly Scrum IRC Log: 2011-09-13</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>

[20:15:26]  &lt;@darthsteven&gt;  Scrum time
[20:15:30]  &lt;@darthsteven&gt;  at last!
[20:15:49]  &lt;@mig5&gt; yeah sorry about that
[20:15:52]  &lt;@mig5&gt; i have neglected it a bit
[20:16:14]  &lt;@darthsteven&gt;  ping: darthsteven, mig5, ergonlogic, grugnog, mvc, omega8cc, sfyn, skwashd (time for a scrum!)
[20:16:23]  &lt;@darthsteven&gt;  mig5: I kept forgetting to have them!
[20:16:33]  &lt;@darthsteven&gt;  do you want to go first?
[20:16:52]  &lt;@darthsteven&gt;  mig5: do you want to go first?
[20:17:04]  &lt;@mig5&gt; sure, that's easy: i've done nothing as usual
[20:17:06]  &lt;@mig5&gt; :)
[20:17:09]  &lt;@omega8cc&gt; lol
[20:17:13]  &lt;@mig5&gt; sigh
[20:17:26]  &lt;@mig5&gt; i want to look at getting those jenkins tasks into provision, but i haven't begun
[20:18:18]  &lt;@mig5&gt; i have built some cool automatic deployments using jenkins + aegir, all tracking changes in git, which i want to screencast soon
[20:18:28]  &lt;@mig5&gt; zero-touch deployment of dev &gt; stage &gt; live, good fun
[20:18:36]  &lt;@darthsteven&gt;  mig5: awesome!
[20:18:39]  &lt;@mig5&gt; anyway, that's me..
[20:18:57]  &lt;@darthsteven&gt;  mig5: Thanks!
[20:19:08]  &lt;@darthsteven&gt;  omega8cc: anything from yourself?
[20:19:27]  &lt;@omega8cc&gt; I already forgot what I did in the last few weeks :p but it was something, I'm sure! seriously, I probably helped with some drush issues and now working on a new theme, including mobile version for hostmaster
[20:19:46]  &lt;@mig5&gt; ooer
[20:19:53]  &lt;@darthsteven&gt;  cool! (the theme stuff, not forgetting things)
[20:20:21]  &lt;@darthsteven&gt;  omega8cc: anything else?
[20:20:50]  &lt;@omega8cc&gt; and the app for iOS and Android maybe is in the works, leveraging Aegir api where possible
[20:21:11]  &lt;@omega8cc&gt; but it is an Apple-like secret! lol
[20:21:44]  &lt;@darthsteven&gt;  heh, well the scrum logs don't get published anywhere ;)
[20:21:56]  &lt;@omega8cc&gt; but first, I will submit some simple UI related patches for the current theme
[20:22:02]  &lt;@omega8cc&gt; haha
[20:22:26]  &lt;@omega8cc&gt; I have some problems with it
[20:22:56]  &lt;@omega8cc&gt; I don't want to include ctools and stuff just to override some blocks, for example
[20:23:12]  &lt;@omega8cc&gt; so some patches will need to hit the core instead
[20:23:19]  &lt;@omega8cc&gt; I mean hostmaster
[20:23:40]  &lt;@darthsteven&gt;  omega8cc: ok, well I reckon we might end up with ctools in 7.x-2.x before long anyway
[20:23:58]  &lt;@darthsteven&gt;  because I want views in there :)
[20:24:09]  &lt;@darthsteven&gt;  omega8cc: anything else?
[20:25:06]  &lt;@omega8cc&gt; features_extra requires ctools, but we could too easily end up with fatcore instead of smallcore then
[20:25:08]  * skwashd stands up
[20:25:46]  &lt;@omega8cc&gt; so, features are nice, but always
[20:25:58]  &lt;@omega8cc&gt; but not* always, err
[20:26:28]  &lt;@omega8cc&gt; and that is it from me, I guess
[20:27:10]  &lt;@darthsteven&gt;  cool, thanks for the work on Aegir, as always
[20:27:17]  &lt;@darthsteven&gt;  skwashd: do you want to go next?
[20:27:45]  &lt;@skwashd&gt;  darthsteven: i have done 50% more work than mig5 on the same tasks as he has
[20:27:58]  &lt;@skwashd&gt;  darthsteven: and i plan to double my efforts on that task this week
[20:28:23]  &lt;@mig5&gt; that sounds believable
[20:28:30]  &lt;@omega8cc&gt; haha
[20:28:31]  &lt;@darthsteven&gt;  skwashd: sorry, what task was that?
[20:28:39]  &lt;@mig5&gt; trolling
[20:28:43]  &lt;@skwashd&gt;  darthsteven: doing fuck all for aegir
[20:28:46]  &lt;@darthsteven&gt;  heh
[20:29:07]  &lt;@darthsteven&gt;  well, thanks for keeping us in the loop :)
[20:29:16]  &lt;@darthsteven&gt;  skwashd: anything else?
[20:29:22]  &lt;@skwashd&gt;  mig5: i said i'd only done 50% more than you ... if we're talking about trolling there would be another 0 in there :P
[20:29:41]  &lt;@darthsteven&gt;  moving on...
[20:29:45]  &lt;@darthsteven&gt;  I'll go next
[20:29:46]  &lt;@skwashd&gt;  darthsteven: no
[20:30:06]  &lt;@darthsteven&gt;  I fixed an issue with PHP 5.2 and Drupal 7.8
[20:30:50]  &lt;@darthsteven&gt;  I've asked about spinning the theme out of hostmaster, back into it's own project <a href="http://drupal.org/node/1269212" title="http://drupal.org/node/1269212">http://drupal.org/node/1269212</a>
[20:30:51]  &lt;@hefring&gt;  <a href="http://drupal.org/node/1269212" title="http://drupal.org/node/1269212">http://drupal.org/node/1269212</a> =&gt; Spin Eldir back out to its own project =&gt; Hostmaster (Aegir), Code, normal, needs review, 0 comments, 1 IRC mention
[20:31:17]  &lt;@darthsteven&gt;  I built a 'harness' for testing Eldir for Drupal 7: <a href="http://drupal.org/sandbox/darthsteven/1267494" title="http://drupal.org/sandbox/darthsteven/1267494">http://drupal.org/sandbox/darthsteven/1267494</a>
[20:31:37]  &lt;@darthsteven&gt;  I.e. it's a 'port' of Hostmaster's HTML output for D7
[20:32:09]  &lt;@darthsteven&gt;  finally I have ported Eldir to D7: <a href="https://github.com/darthsteven/eldir" title="https://github.com/darthsteven/eldir">https://github.com/darthsteven/eldir</a>
[20:32:23]  &lt;@darthsteven&gt;  building on the work of Seth (SoC student)
[20:33:00]  &lt;@darthsteven&gt;  I think I've also fixed various little things in Aegir and tried to process the queues a little
[20:33:42]  &lt;@darthsteven&gt;  Future plans are to possibly make the 7.x-2.x branch actually use D7, and begin the porting...
[20:34:05]  * beautifulmind has joined #aegir
[20:34:15]  &lt;@darthsteven&gt;  that's it from me
[20:34:22]  &lt;@darthsteven&gt;  anyone else?
[20:36:20]  &lt;@darthsteven&gt;  I'll give them a minute...
[20:37:46]  &lt;@darthsteven&gt;  <code>&lt;/scrum&gt;</code>
[20:37:51]  &lt;@darthsteven&gt;  Thanks everyone!

</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-117.html?destination=node%2F883%23comment-form">Login</a> or <a href="../../../../../user/register/index-117.html?destination=node%2F883%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-117.html?destination=node%2F883%23comment-form">Login</a> or <a href="../../../../../user/register/index-117.html?destination=node%2F883%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-891" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-09-20/index.html">Weekly Scrum IRC Log: 2011-09-20</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>

20:01 &lt;@darthsteven&gt; scrum in 1 minute!
20:02 &lt;@darthsteven&gt; mig5, mvc, omega8cc, sfyn, skwashd; scrum in 1 min
20:03 &lt;@darthsteven&gt; scrum time!
20:03 &lt;+omega8cc&gt; hello!
20:03 &lt;@darthsteven&gt; scrum?
20:03 &lt; hefring&gt; scrum is Every Tuesday at 10h00 UTC: 03h00 San Francisco, USA (PST), 06h00 Montreal, Canada (EDT), 11h00 London, UK (CET), 20h00 Melbourne, Australia 
                 (EST)
20:03 &lt;@darthsteven&gt; indeed it is hefring
20:03 &lt;@darthsteven&gt; botsnack
20:03 &lt; hefring&gt; skynet thanks YOU!
20:03 &lt;@darthsteven&gt; who wants to go first?
20:04 &lt;@mig5&gt; just made it..
20:04 &lt;@darthsteven&gt; mig5: Hello!
20:04 &lt;@mig5&gt; you go firsst, you have been on fire in the queue!
20:05 &lt;@darthsteven&gt; I fixed some issues that were in the queue, and worked on the site form a little
20:05 &lt;@darthsteven&gt; Hopefully we can now handle database passwords that include special characters
20:05 &lt;@darthsteven&gt; though we may be chasing that one around a few more dark corners yet
20:06 &lt;@darthsteven&gt; I'd like some feedback about the site form changes (which are in a dev branch)
20:06 &lt;@darthsteven&gt; the issue is...
20:06 &lt;@darthsteven&gt; <a href="http://drupal.org/node/1282280" title="http://drupal.org/node/1282280">http://drupal.org/node/1282280</a>
20:06 &lt; hefring&gt; <a href="http://drupal.org/node/1282280" title="http://drupal.org/node/1282280">http://drupal.org/node/1282280</a> =&gt; Clean up the hosting form javascript =&gt; Hostmaster (Aegir), Code, normal, needs review, 2 comments, 1 IRC mention
20:06 &lt;@darthsteven&gt; I would really appreciate some reviews of that
20:07 &lt;@mig5&gt; i never understood any of that as i don't grok javascript - i'm glad you're tackling it
20:07 &lt;@darthsteven&gt; It's basically just adding an AJAX spinner, so you know that something is happening...
20:07 &lt;@mig5&gt; so i'm not sure how helpful i can be there but hopefully others..
20:07 &lt;@mig5&gt; ah right
20:07 &lt;@darthsteven&gt; even just a test and 'I like the look of that' or 'Can we do this' would be helpful
20:08 &lt;@darthsteven&gt; Also
20:08 &lt;@darthsteven&gt; I installed Drupal 8 using Aegir last night, and it worked!
20:08 &lt;@darthsteven&gt; which isn't a major surprise, but it is fun
20:08 &lt;@darthsteven&gt; that's it from me
20:08 &lt;@darthsteven&gt; who wants to go next?
20:09 &lt;@mig5&gt; nothing from me, i see you want to add some drupal8 tests into jenkins, i can do that
20:09 &lt;@mig5&gt; still way too busy right now to look at moving tests into provision
20:09 &lt;@mig5&gt; hopefully more time early october when i go full-time consultant
20:10 &lt;@darthsteven&gt; mig5: do you have time for a quick chat after the scrum about Aegir stuff?
20:10 &lt;@mig5&gt; should do, it's either you or dinner, whatever happens first
20:10 &lt;@mig5&gt; :)
20:11 &lt;@darthsteven&gt; mig5: been thinking about the tests stuff, have some ideas and thoughts about it...
20:11 &lt;@darthsteven&gt; mig5: anything else to add?
20:11 &lt;@mig5&gt; nope, other than to say thanks to you specifically for working the issue queue like a nutter this week
20:11 &lt;@darthsteven&gt; mig5: thanks for coming to the scrum even if you don't have much to report!
20:11 &lt;@mig5&gt; keep it up but don't burn out :)
20:11 &lt;@darthsteven&gt; mig5: these are my normal levels of involvement in projects... :)
20:12 &lt;@darthsteven&gt; anyone else have anything for the scrum?
20:12 &lt;+omega8cc&gt; I don't have anything new related to the Aegir core this week to report, however I worked on some BOA new features and there is a chance I will submit some new patches for Nginx config (and finally) the menu/UI.
20:12 &lt;+omega8cc&gt; darthsteven: and also thanks for your work in the queue!
20:12 &lt;@darthsteven&gt; omega8cc: awesome!
20:13 &lt;@mig5&gt; omega8cc: i expect to hear you move into Linode Tokyo soon ;)
20:13 &lt;@darthsteven&gt; omega8cc: I think we should make tiding up the UI a priority for 2.x
20:13 &lt;@mig5&gt; sorry offtopic
20:13 &lt;@mig5&gt; apparently there was a drupal montreal on
20:13 &lt;@darthsteven&gt; anyone else?
20:13 &lt;@mig5&gt; i read some french tweets about it
20:13 &lt;@mig5&gt; something about an 'albert method', a guy from koumbit did a talk
20:14 &lt;@mig5&gt; i am keen to find out more, there are slides somewhere, search on twitter under #aegir
20:14 &lt;@mig5&gt; i think it's deployment-related, i'll see if i can find out more and get some english-language focus on it as it looked interesting
20:15 &lt;@darthsteven&gt; cool
20:15 &lt;+omega8cc&gt; <a href="http://t.co/gv7OisUe" title="http://t.co/gv7OisUe">http://t.co/gv7OisUe</a>
20:15 &lt;+omega8cc&gt; or http://twitter.com/#!/omega8cc/status/114783126844223488
20:16 &lt;@mig5&gt; oh nice already in english
20:16 &lt;+omega8cc&gt; yep
20:16 &lt;@mig5&gt; again, soon, i will have a new screencast up
20:16 &lt;@mig5&gt; about my 'zero touch' deployment for aegir
20:16 &lt;@mig5&gt; using jenkins
20:16 &lt;@mig5&gt; that 'reacts' to git push in de/v/stage/live environments
20:16 &lt;@darthsteven&gt; mig5: cool, have you seen that someone is doing screencasts of Aegir stuff?
20:16 &lt;@mig5&gt; that will come 'soon' ;)
20:16 &lt;@darthsteven&gt; mig5: that would be awesome
20:16 &lt;@mig5&gt; darthsteven: yes i did, i watched one
20:17 &lt;+omega8cc&gt; mig5: cool! finally! :)
20:17 &lt;@darthsteven&gt; mig5: I've not watched them...so I've no idea if they're any good
20:17 &lt;@darthsteven&gt; To finish the scrum, I'd like to say...
20:18 &lt;@darthsteven&gt; that we seem to have had a bump in contributors, which is really cool!
20:18 &lt;@mig5&gt; yes! rock on, patchers!
20:18 &lt;@darthsteven&gt; There are also a few people who've started using Aegir, and are now blogging about the project
20:18 &lt;@mig5&gt; thanks GuyPaddock and halcyonCorsair
20:18 &lt;@darthsteven&gt; The 'Wedful' thing springs to mind
20:19 &lt;@mig5&gt; yes and hadsie, i think that was the first commercial 'payment' aegir system that implemented our api
20:19 &lt;+omega8cc&gt; right
20:19 &lt;@darthsteven&gt; So, with a bit of effort we make Aegir 2.x happen fast, and be super awesome in every way!
20:19 &lt;@darthsteven&gt; anyway
20:19 &lt;@darthsteven&gt; that's it for this scrum!
20:19 &lt;@mig5&gt; the pantheon project is getting a lot of publicity right now, i am keen to see people publish 'how to make your own pantheon' with aegir :)
20:19 &lt;@mig5&gt; just to balance things out :)
20:19 &lt;@mig5&gt; thanks scrummers
20:19 &lt;@darthsteven&gt; Thanks for attending
20:19 &lt;+omega8cc&gt; thanks
20:19 &lt;@darthsteven&gt; who wants to do the log thing?
20:20 &lt;@mig5&gt; i can
20:20 &lt;@darthsteven&gt; thanks!
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-118.html?destination=node%2F891%23comment-form">Login</a> or <a href="../../../../../user/register/index-118.html?destination=node%2F891%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-118.html?destination=node%2F891%23comment-form">Login</a> or <a href="../../../../../user/register/index-118.html?destination=node%2F891%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-895" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-09-27/index.html">Weekly Scrum IRC Log: 2011-09-27</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>
[10:02am] darthsteven: mig5, ergonlogic, grugnog, mvc, omega8cc, sfyn: scrum time!
[10:02am] omega8cc: hello!
[10:02am] darthsteven: Welcome to our weekly Aegir Scrum
[10:02am] darthsteven: Who would like to go first?
[10:03am] merro left the chat room.
[10:04am] darthsteven: omega8cc: would you like to start us off?
[10:04am] beautifulmind joined the chat room.
[10:05am] omega8cc: darthsteven: all my nginx related new stuff is a bit delayed as it needs more testing
[10:05am] omega8cc: so I didn't submit any patches yet, but I hope to be able to do it this week
[10:06am] omega8cc: also new boa release has been delayed for this reason
[10:06am] darthsteven: okay
[10:06am] darthsteven: well, looking forward to reviewing those bits
[10:06am] merro joined the chat room.
[10:07am] darthsteven: anyone else?
[10:08am] darthsteven: I'll go next then
[10:08am] darthsteven: I factored out the Jenkins tests to a drush command in provision
[10:09am] darthsteven: so we can run them locally without python or Jenkins
[10:09am] darthsteven: which is nice
[10:09am] omega8cc: wow
[10:09am] darthsteven: We can also have different tests for the different branches now too
[10:10am] darthsteven: the tests are pretty basic, as we'll be using the Drush testing framework in a bit, when Drush 5 is out, but for now they're pretty basic
[10:10am] darthsteven: also
[10:10am] dfrt:  /t
[10:10am] darthsteven: I made the Jekins scripts use configuration from Jenkins, rather than new code in the repo
[10:11am] darthsteven: so we can do releases much more easily
[10:11am] darthsteven: speaking of which
[10:11am] darthsteven: We release 1.4 
[10:11am] darthsteven: *released
[10:11am] darthsteven: Fixing a security issue
[10:11am] darthsteven: Also
[10:11am] darthsteven: I created the 6.x-2.x branch, which was where the 7.x-2.x branch was
[10:11am] darthsteven: because...
[10:12am] darthsteven: 7.x-2.x now contains Drupal 7 code!
[10:12am] darthsteven: hurrah!
[10:12am] darthsteven: Porting is underway
[10:12am] omega8cc:
[10:12am] darthsteven: I was going to let everyone know via the community site, but couldn't because that had issues with the OA upgrade that was forced upon it
[10:12am] darthsteven: I will do that today though
[10:14am] omega8cc: darthsteven: so, is our gSoC student work/idea already cancelled, I suppose? as you are doing it currently
[10:14am] darthsteven: omega8cc: As far as I can tell, nothing really came of that
[10:14am] omega8cc: yeah 
[10:15am] darthsteven: we can always get him porting one of the modules if that's not the case
[10:15am] darthsteven: gSoC is over afaik anyway
[10:15am] darthsteven: Anyone else want to say anything?
[10:15am] omega8cc: so we may want to update our room header
[10:20am] szczym left the chat room. (Read error: Operation timed out)
[10:22am] omega8cc: darthsteven: Thanks for leading the work and our scrum! I can submit the log to c.a.o if you wish
[10:22am] darthsteven: end of scrum!
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-119.html?destination=node%2F895%23comment-form">Login</a> or <a href="../../../../../user/register/index-119.html?destination=node%2F895%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-119.html?destination=node%2F895%23comment-form">Login</a> or <a href="../../../../../user/register/index-119.html?destination=node%2F895%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-924" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../scrums/weekly-scrum-irc-log-2011-10-18/index.html">Weekly Scrum IRC Log: 2011-10-18</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>
[21:00:33]  &lt;@darthsteven&gt;  anarcat, darthsteven, mig5, mvc, sfyn, skwashd: Scrum time!
[21:10:03]  &lt;@mig5&gt; sorry, nothing to report
[21:12:45]  &lt;@darthsteven&gt;  ok
[21:12:47]  &lt;@darthsteven&gt;  thanks!
[21:13:16]  &lt;@darthsteven&gt;  I applied some nasty patches to get the debian package installing correctly with drush 4.5
[21:13:46]  &lt;@darthsteven&gt;  I also got to the bottom of the problem when installing on debian, where it would consume all CPU and memory
[21:13:52]  &lt;@darthsteven&gt;  which anarcat then fixed!
[21:13:53]  &lt;@mig5&gt; excellent. do we need to roll a new release for that drush issue?
[21:14:57]  &lt;@darthsteven&gt;  I think we do
[21:15:08]  &lt;@darthsteven&gt;  I was going to add an issue to the queue
[21:15:20]  &lt;@darthsteven&gt;  See if we can do a release without anarcat :)
[21:15:58]  &lt;@mig5&gt; :)
[21:20:50]  &lt;@darthsteven&gt;  anyone else?
[21:21:06]  &lt;@darthsteven&gt;  speak now, or hold until next week...
[21:21:29]  &lt;@darthsteven&gt;  oh, and I just posted about changing the times of these: <a href="../../../../../discuss/change-scrum-time/index.html" title="http://community.aegirproject.org/discuss/change-scrum-time">http://community.aegirproject.org/discuss/change-scrum-time</a>
[21:36:06]  &lt;@darthsteven&gt;  okay
[21:36:13]  &lt;@darthsteven&gt;  official end of scrum there
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-120.html?destination=node%2F924%23comment-form">Login</a> or <a href="../../../../../user/register/index-120.html?destination=node%2F924%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-120.html?destination=node%2F924%23comment-form">Login</a> or <a href="../../../../../user/register/index-120.html?destination=node%2F924%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-941" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-01/index.html">Weekly Scrum IRC Log: 2011-11-01</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
[21:00:57]     Scrum time!
[21:01:00]     scrum?
[21:01:00]     scrum is Every Tuesday at 10h00 UTC: 03h00 San Francisco, USA (PST), 06h00 Montreal, Canada (EDT), 11h00 London, UK (CET), 20h00 Melbourne, Australia (EST)
[21:01:08]    go!
[21:01:19]     shall I go first?
[21:01:26]     okay, if you insist
[21:01:40]     Aegir 1.5 is out!
[21:01:42]     Hurrah
[21:01:47]    \o/
[21:01:57]     Anarcat helped in advisory role
[21:02:17]     which means at least two people can complete the full release process, independently
[21:02:26]    excellent
[21:02:50]     and we found that Jenkins actually does most of the work, and we could get it to do most of the rest of Debian stuff very easily
[21:02:57]     other things:
[21:03:10]     I did some bug fixes
[21:03:29]     I completely re-factored the 6.x-2.x branch of provision to use autoloading for classes
[21:03:41]     so we can support contrib add-ons for provision
[21:03:51]     I still need to document those changes
[21:04:01]     will try to get a few mins to do that today
[21:04:31]     also, I increased the number of things tested by Jenkins, and improved the quality of the code running the tests a little
[21:04:44]     resulting in less code all round :)
[21:05:05]     Also, made the upgrade tests take parameters
[21:05:09]     which is handy
[21:05:29]     also we now test PHP 5.2, every 24 hours if there are changes
[21:05:32]     that's it from me
[21:05:39]     mig5 want to go next?
[21:05:48]    ok - incredible efforts as always darthsteven, thanks
[21:05:52]    that's amazing work
[21:06:20]    me - very little as always - i simply built a new debian squeeze image with backported php 5.2 from lenny, so that we could do those php 5.2 tests
[21:06:57]    i'm pondering giving an aegir talk at <a href="http://drupaldownunder.org/" title="http://drupaldownunder.org">http://drupaldownunder.org</a> in January 2012, only a couple monts away now, but i'd like to diverge away from the usual 'how to install aegir, basic usage' thing we always do, as a lot of people will have seen that
[21:07:08]    any suggestions or ideas, let me know.
[21:07:11]    that's about it from me
[21:08:10]     mig5: thanks as always
[21:08:47]     anyone else?
[21:09:00]     mig5: we can chat talks after the scrum?
[21:09:23]    sure
[21:10:13]     anyone else? I'll give you a minute!
[21:11:31]     okay
[21:11:36]     thanks for attending mig5
[21:11:37]    i'll do log
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-121.html?destination=node%2F941%23comment-form">Login</a> or <a href="../../../../../user/register/index-121.html?destination=node%2F941%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-121.html?destination=node%2F941%23comment-form">Login</a> or <a href="../../../../../user/register/index-121.html?destination=node%2F941%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-952" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-14/index.html">Weekly Scrum IRC Log: 2011-11-14</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
07:01 &lt;@mig5> well, scrum time :)
07:01 &lt;@mig5> (I think!)
07:01 &lt;@mig5> anarcat: ergonlogic: ^^
07:01 &lt;@mig5> I'll start. I've got myself back into the swing of things a bit, fixed some minor bugs, accidentally even committed some fixes by mistake that I wanted 
              reviews of first, oh well :)
07:01 &lt;@mig5> cleared out some old stuff in the queue that is irrelevant, are actually support requests, etc
07:02 &lt;@mig5> submitted a talk for Drupal Down Under 
07:02 &lt;@mig5> <a href="http://drupaldownunder.org/session/aegir-skynet-drupal" title="http://drupaldownunder.org/session/aegir-skynet-drupal">http://drupaldownunder.org/session/aegir-skynet-drupal</a>
07:02 &lt;@mig5> I'm making some stickers and tshirts for that conference to give away and generally spruik Aegir
07:03 &lt;@mig5> welcome back darthsteven 
07:03 &lt;@darthsteven> awesome stuff!
07:03 &lt;@darthsteven> (my IRC reflector is doing funny things)
07:03 &lt;@mig5> so, I'm hoping to continue to fix some small-ish bugs, help in the queue, etc
07:03 &lt;@darthsteven> awesome stuff
07:03 &lt;@mig5> i don't think i'll ever be a crazy big committer to the project since code is obviously not my biggest skill
07:04 &lt;@mig5> but i'd like to get your help to make me contribute in some obvious way, even if it's just writing news/blog posts, managing the community portal etc
07:04 &lt;@mig5> and perhaps be the '1.x' maintainer for basic bug fixes?
07:04 &lt;@darthsteven> awesome, will try to push you :)
07:04 &lt;@mig5> leaving you to concentrate on 2.x or something like that
07:04 &lt;@mig5> these are just ideas anyway
07:05 &lt;@mig5> anyway I think that's it for me. someone review my patches in the queue! :)
07:05 &lt;@mig5> onto you darthsteven 
07:05 &lt;@anarcat> hey
07:05 &lt;@darthsteven> ok
07:05 &lt;@darthsteven> hey hey
07:05 &lt;@anarcat> yay, i didnt miss the scrum :)
07:05 &lt;@mig5> yay!
07:05 &lt;@anarcat> go ahead darthsteven :)
07:06 &lt;@darthsteven> I didn't do too much this week, I did some issue queue re-assignment
07:06 &lt;@darthsteven> I set up some Jenkins jobs to monitor code style of hosting and provision using the Coder review module
07:06 &lt;@darthsteven> see: <a href="http://ci.aegirproject.org/view/Code reviews/" title="http://ci.aegirproject.org/view/Code%20reviews/">http://ci.aegirproject.org/view/Code%20reviews/</a>
07:07 &lt;@mig5> oh nice
07:07 &lt;@darthsteven> not sure I'll have much time to work on stuff this week, but hoping to get back to 2.x asap
07:07 &lt;@anarcat> nice
07:07 &lt;@darthsteven> anarcat: over to you
07:08 &lt;@anarcat> uh
07:08 &lt;@anarcat> not much on my side either :)
07:08 &lt;@anarcat> i am now a debian developer
07:08 &lt;@mig5> \o/
07:08 &lt;@anarcat> and so i have pushed ergonlogic's drush_make package into debian
07:08 &lt;@anarcat> my glorious achievements can be seen here: <a href="http://qa.debian.org/developer.php?login=anarcat" title="http://qa.debian.org/developer.php?login=anarcat">http://qa.debian.org/developer.php?login=anarcat</a>
07:09 &lt;@anarcat> i will try to start working again on 2.x this week, as my replacement is coming to an end
07:09 &lt;@anarcat> but it's not easy
07:09 &lt;@mig5> you are not allowed to quit :)
07:09 &lt;@anarcat> i have worked on 1.5 release last week a little and found a critical bug in the debian package, which hosed a client server here
07:09 &lt;@anarcat> yeah
07:09 &lt;@anarcat> but it's all fine now
07:09 &lt;@anarcat> and we discovered that most of the debian build stuff is now automated by jenkins, which is freaking cool
07:09 &lt;@anarcat> and i support mig5 as a 1.x maintainer
07:10 &lt;@mig5> ouch. so that critical bug only affected the debian package?
07:10 &lt;@anarcat> yeah
07:10 &lt;@mig5> do we need to reroll? lots of people use it now
07:10 &lt;@anarcat> <a href="../../../../../1/index-7.html#Known_issues" title="http://community.aegirproject.org/1.5#Known_issues">http://community.aegirproject.org/1.5#Known_issues</a>
07:10 &lt;@mig5> ah
07:10 &lt;@mig5> :)
07:10 &lt;@anarcat> aka <a href="https://drupal.org/node/1328316" title="https://drupal.org/node/1328316">https://drupal.org/node/1328316</a>
07:10 &lt;@anarcat> it's been rerolled already
07:10 &lt;@anarcat> i wouldn't have let that one sit there :)
07:10 &lt;@mig5> right right
07:10 &lt;@mig5> :)
07:10 &lt;@anarcat> so next steps for me
07:10 -!- darthsteven_ [~darthstev@109.123.86.70] has joined #aegir
07:10 -!- mode/#aegir [+o darthsteven_] by ChanServ
07:10 &lt;@anarcat> backport drush_make, once it hits tseting
07:10 &lt;@anarcat> testing*
07:11 &lt;@anarcat> look into merging the daemon into 2.x, the sites/ directory magic and unit testing
07:11 &lt;@anarcat> those impatient to see drush_make hit testing/backports can reload franatically this page: <a href="http://packages.qa.debian.org/d/drush-make.html" title="http://packages.qa.debian.org/d/drush-make.html">http://packages.qa.debian.org/d/drush-make.html</a>
07:12 &lt;@anarcat> oh, and we have submitted a Aegir training proposal for Denver
07:12 &lt;@darthsteven> good stuff anarcat
07:12 &lt;@anarcat> so i guess that means we'll go to denver :)
07:13 &lt;@anarcat> well, i think that's it
07:13 &lt;@mig5> ok, anyone else?
07:13 &lt;@mig5> ergonlogic ^^
07:13 &lt;@anarcat> i think he's off
07:13 &lt;@mig5> ok
07:13 &lt;@anarcat> he was at drupalcamp toronto
07:13 &lt;@anarcat> and is resting
07:13 &lt;@mig5> oh that's right, i believe there was some aegir stuff happening there via him?
07:14 &lt;@mig5> cool
07:14 &lt;@anarcat> he presented aegir to some folks there and i heard through the grapevine that we may see derek again :)
07:14 &lt;@mig5> who's derek?
07:14 &lt;@anarcat> mig5: spiderman - worked on the dns stuff?
07:14 &lt;@mig5> oh right!
07:14 &lt;@mig5> I remember
07:15 &lt;@mig5> ok, i'm off for breakfast. happy ot upload the log when i'm back in 20 min or so
07:15 &lt;@mig5> thanks all!
07:15 &lt;@anarcat> awesome
07:15 &lt;@anarcat> yeah, i think that's it
07:16 &lt;@darthsteven> thanks!
07:16 &lt;@darthsteven> I think we need to do a 1.6 release for <a href="https://drupal.org/node/1330018" title="https://drupal.org/node/1330018">https://drupal.org/node/1330018</a> sooner rather than later
07:17 &lt;@darthsteven> that bug is entirely my fault btw, major lack of testing on my part
07:17 &lt;@anarcat> i see
07:17 &lt;@anarcat> well, now you know how to make a release, maybe you can train mig5 to do it? :)
07:18 &lt;@darthsteven> sure
07:29 &lt;@darthsteven> I'll teach Jenkins how to do releases first
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-122.html?destination=node%2F952%23comment-form">Login</a> or <a href="../../../../../user/register/index-122.html?destination=node%2F952%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-122.html?destination=node%2F952%23comment-form">Login</a> or <a href="../../../../../user/register/index-122.html?destination=node%2F952%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-960" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-21/index.html">Weekly Scrum IRC Log: 2011-11-21</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>
07:00 &lt;@mig5&gt; ok, time for a quick scrum
07:00 &lt;@mig5&gt; good morning
07:00 &lt;@mig5&gt; it appears darthsteven sends his apologies!
07:00 &lt;@darthsteven&gt; Nothing from me, will do a 1.6 release tomorrow if I have time!
07:00 &lt;@mig5&gt; so ping anarcat, ergonlogic, etc
07:00 &lt;@mig5&gt; oh he's here! :)
07:00 &lt;@mig5&gt; cool
07:00 &lt;@mig5&gt; thanks darthsteven 
07:00 &lt;@darthsteven&gt; Now I'm gone...
07:01 &lt;@mig5&gt; not much from me this week: I posted the first of a fortnightly Aegir newsletter last wednesday, I got some good feedback from anarcat but that was 
              about it :)
07:01 &lt;@mig5&gt; ok. 1.6 release will be tomorrow
07:01 &lt;@mig5&gt; my stickers have arrived, i ordered way too many for DrupalDownUnder, maybe I'll send some in the post to people :)
07:02 &lt;@mig5&gt; we fixed the Reset Password bug that broke resetting of passwords in Drupal 5, so that will go into the 1.6 release which is nice
07:02 &lt;@mig5&gt; that's all from me I think. anarcat?
07:03 &lt; teeyza&gt; so anyone have any ideas why my aegir wont upgrade?
07:03 &lt;@mig5&gt; right, i have a feeling anarcat isn't here, and we have a hijacker, so I might end the scrum earlier than usual..
07:03 &lt;@mig5&gt; thanks all
07:14 &lt;@anarcat&gt; oops
07:14 &lt;@anarcat&gt; missed the scrum
07:14 &lt;+ergonlogic&gt; sorry
07:14 &lt;@anarcat&gt; mig5 / darthsteven : pong
07:14 &lt;@mig5&gt; hehe
07:14 &lt;@anarcat&gt; we were in our own planning session over here, maybe we can touchbase on that
07:14 &lt;@mig5&gt; sure thing
07:15 &lt;@anarcat&gt; we are reorienting my work a bit, away from <a href="../../../../../discuss/back-vacation/index.html" title="http://community.aegirproject.org/discuss/back-vacation">http://community.aegirproject.org/discuss/back-vacation</a>
07:15 &lt; teeyza&gt; my apologies mig i was corrected, so were stuck on step 4 of the that link
07:15 &lt;@anarcat&gt; we'll focus on the debian packaging and puppet manifests
07:15 &lt;@anarcat&gt; i'm going to work on a provision-upgrade command which will be basically like drush upgrade
07:15 &lt;@anarcat&gt; but really safe
07:15 &lt;@anarcat&gt; and designed specifically with the upgrade of aegir itself in mind
07:16 &lt;@anarcat&gt; so that we can ship the files with the aegir-hostmaster package
07:16 &lt;@anarcat&gt; and overwrite existing files, and run the update and so on
07:16 &lt;@anarcat&gt; we're also going to work on D7 LDAP integration so that Drupal can be used to manage LDAP groups and user memberships
07:16 &lt;@mig5&gt; will that open itself up to <a href="http://drupal.org/node/711746" title="http://drupal.org/node/711746">http://drupal.org/node/711746</a> in any way?
07:16 &lt; hefring&gt; <a href="http://drupal.org/node/711746" title="http://drupal.org/node/711746">http://drupal.org/node/711746</a> =&gt; allow upgrade of hostmaster sites from the frontend =&gt; Hosting, Code, minor, postponed, 3 comments, 1 IRC mention
07:16 &lt;@anarcat&gt; which is a bit offtopic here
07:16 &lt;@anarcat&gt; mig5: i don't know
07:16 &lt;@anarcat&gt; maybe
07:17 &lt;@mig5&gt; we need that external queue daemon :)
07:17 &lt;@anarcat&gt; so those are our priorities, shifting the other ones in the list down
07:17 &lt;@anarcat&gt; yes
07:17 &lt;@anarcat&gt; so that's still in the list
07:17 &lt;@anarcat&gt; but probably after christmas if not summer
07:17 &lt;@mig5&gt; sure
07:17 &lt;@anarcat&gt; same with unit tests, which get pushed away
07:17 &lt;@anarcat&gt; we're going to also sponsor more uc_hosting and hosting_services development
07:18 &lt;@anarcat&gt; with sfyn waiting to do a lot of improvements there, apparently
07:18 &lt;@anarcat&gt; expect the "official puppet module for aegir" to come out soon
07:18 &lt;@anarcat&gt; oh
07:18 &lt;@mig5&gt; awesome! :) 
07:18 &lt;@anarcat&gt; and just random name-dropping here: openstack.
07:18 &lt;@anarcat&gt; that's it for me.
07:18 &lt;@mig5&gt; thanks anarcat
07:18 &lt;+sfyn&gt; 3~hey folks
07:19 &lt;+sfyn&gt; guess its scrum time
07:19 &lt;@mig5&gt; hey sfyn 
07:19 &lt;+ergonlogic&gt; for my part, I'll be helping with the aegir puppet module
07:19 &lt;+ergonlogic&gt; yeah... a little late
07:19 &lt; teeyza&gt; hey mig, you have any other suggestions i could try?
07:19 &lt;@anarcat&gt; sfyn: it *was* :)
07:19 &lt;@mig5&gt; teeyza: please wait a bit, we are in the middle of a regular meeting
07:19 &lt;+ergonlogic&gt; and otherwise continuing to push aegir-up towards a release
07:19 &lt;+sfyn&gt; oops
07:19 &lt; teeyza&gt; kk
07:19 &lt;@anarcat&gt; sfyn: we had a great discussion on prioritizing work for aegir in the following week here
07:19 -!- mode/#aegir [+m] by anarcat
07:20 -!- mode/#aegir [+v mig5] by anarcat
07:20 -!- mode/#aegir [+v darthsteven] by anarcat, anarcat
07:20 &lt;@mig5&gt; thanks..
07:20 &lt;+ergonlogic&gt; that's most of it for me
07:20 &lt;+sfyn&gt; short term my efforts are more on civicrm support right now
07:20 &lt;@anarcat&gt; sfyn: we'll be looking from feedback from you about estimates on how much time we should spend on hostnig_services integration this year
07:20 &lt;@mig5&gt; i'm very interested in the aegir puppet stuff, i use vagrant for dev now, let me know if you need extra eyes on that :)
07:20 &lt;@anarcat&gt; mig5: we certainly will!
07:20 &lt;+ergonlogic&gt; mig5: indeed, yes!
07:21 &lt;@mig5&gt; and i know puppet pretty well these days
07:21 &lt;@anarcat&gt; now that's cool
07:21 &lt;+sfyn&gt; anarcat: hosting_services is a mess right now
07:21 &lt;@anarcat&gt; sfyn: and yes, maybe we need to add provision_civi to our shopping list, if it's not budgeted in other teams
07:21 &lt;@mig5&gt; although ergonlogic taught me you can preseed directly in puppet, didn't know that :)
07:21 &lt;+ergonlogic&gt; :)
07:21 &lt;@anarcat&gt; sfyn: how much hours does that mean, "mess"? ;)
07:22 &lt;+sfyn&gt; anarcat: means i don't know
07:22 &lt;@anarcat&gt; sfyn: awesome
07:22 &lt;@anarcat&gt; sfyn: i've put a mostly random guess of 100h
07:22 &lt;@anarcat&gt; maybe we can try to fine-grain the thing in smaller iterations
07:22 &lt;@anarcat&gt; and do a better estimate
07:22 &lt;@anarcat&gt; but we don't need to do it now :)
07:22 &lt;@anarcat&gt; just a heads up that we'd like to push this out
07:22 &lt;@anarcat&gt; for the next reflexion meeting
07:22 &lt;+sfyn&gt; anarcat: ok
07:23 &lt;@anarcat&gt; alright, i think that's it for our part of the scrum, unless sfyn or ergonlogic have anything to add
07:23 &lt;+sfyn&gt; anarcat: I will break down the work for both projects over the week
07:23 &lt;@anarcat&gt; sfyn: awesome
07:23 -!- mode/#aegir [-m] by anarcat
07:23 &lt;@mig5&gt; thanks guys
07:23 &lt;+ergonlogic&gt; no, I'm done
07:23 &lt;@anarcat&gt; sorry for the censorship here :)
07:23 &lt;+sfyn&gt; thats it for me
07:23 &lt;@anarcat&gt; thanks\
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-123.html?destination=node%2F960%23comment-form">Login</a> or <a href="../../../../../user/register/index-123.html?destination=node%2F960%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-123.html?destination=node%2F960%23comment-form">Login</a> or <a href="../../../../../user/register/index-123.html?destination=node%2F960%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-970" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2011-11-28/index.html">Weekly Scrum IRC Log: 2011-11-28</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
<div class="codeblock"><code>[06:59:18]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; scrum time in 1 minute i believe?<br />[06:59:25]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; darthsteven: anarcat: ergonlogic:<br />[06:59:45]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; oh yeah!<br />[07:00:04] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; ok!<br />[07:00:10]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; scrum is now<br />[07:00:17] &lt;anarcat&gt; hi<br />[07:00:21]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i haven&#039;t done much this week at all :/<br />[07:00:29] * anarcat neither<br />[07:00:30]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; and i just woke up so I can&#039;t remember if I did :)<br />[07:00:58]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; well! if darthsteven doesn&#039;t show up, that&#039;s a very quick scrum! haha<br />[07:01:26]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; I think ergonlogic worked on some new taxonomy/tagging/categorisation of discussion threads in the community site<br />[07:01:29]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i am yet to test it out<br />[07:01:40]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; tomorrow i&#039;ll write my fortnightly aegir newsletter - do you think it should be monthly instead?<br />[07:02:04]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; yeah<br />[07:02:05] &lt;anarcat&gt; makes sense<br />[07:02:17]&nbsp; &lt;anarcat&gt; i was ill for two days last week, kinda knocked me off<br />[07:02:24]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; the big news in it will be that 1.6 was released. speaking of that - we got a couple of good feedback on that release, and no big bug reports, so it must have been one of our most stable in a while<br />[07:02:30]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; sorry to hear you were ill<br />[07:02:30]&nbsp;&nbsp; &lt;anarcat&gt; cool<br />[07:02:47] &lt;anarcat&gt; i did some debian work on my side, and the more i think about it, the more i wish to package hostmaster properly...<br />[07:02:58]&nbsp; &lt;anarcat&gt; i may work on that soon-ish<br />[07:03:04]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; properly in what sense?<br />[07:03:10]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; via debian official repos?<br />[07:03:15]&nbsp;&nbsp; &lt;anarcat&gt; properly as in, with the php files actually in the package<br />[07:03:16]&nbsp;&nbsp; &lt;anarcat&gt; yes<br />[07:03:32]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; from memory we had some catch22 there<br />[07:03:35]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; but that&#039;s further down the road<br />[07:03:42]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; next step for me is ldap work<br />[07:03:43]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; oh you mean with core inside it<br />[07:03:50]&nbsp; &lt;anarcat&gt; yeah<br />[07:03:53] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; awesome<br />[07:04:04]&nbsp; &lt;anarcat&gt; basically, this would mean that we would drun drush_make during the build, not during the install<br />[07:06:08]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; right right<br />[07:06:16]&nbsp; &lt;anarcat&gt; that&#039;s about it for me<br />[07:06:21]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; thanks<br />[07:06:23]&nbsp;&nbsp; &lt;anarcat&gt; let&#039;s wait another 10 to see if our friends show up<br />[07:06:27] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yep<br />[07:06:44]&nbsp; &lt;anarcat&gt; oh! ergonlogic wasn&#039;t voiced!<br />[07:06:50]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; hahaha<br />[07:06:51]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; aha<br />[07:06:56]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; geeeez us tyrants<br />[07:07:03]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; Hi all, sorry I&#039;m late<br />[07:07:11]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; hi!<br />[07:07:11]&nbsp; &lt;hefring&gt; privet<br />[07:07:20]&nbsp;&nbsp; &lt;anarcat&gt; hum<br />[07:07:41]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; oh my site, and hefring, are now managed by Jenkins :) whaaaaat?<br />[07:07:52] &lt;anarcat&gt; ergonlogic: you do not seem to be identified with nickserv, which is why you are not voiced<br />[07:07:52]&nbsp; &lt;ergonlogic&gt;&nbsp; so, yeah I added a simpler tagging mechanism on c.a.o<br />[07:08:33]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I normally am...<br />[07:08:34] &lt;ergonlogic&gt;&nbsp; anyway, you can now tag without having to edit the node<br />[07:08:47]&nbsp; &lt;ergonlogic&gt;&nbsp; and we can filter discussions by keyword<br />[07:09:17] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; sweet *me goes and filters out all mention of centos/redhat* :)<br />[07:09:38]&nbsp; &lt;ergonlogic&gt;&nbsp; this was mostly in response to a suggestion by AquaticDisorder to have per-OS discussions<br />[07:09:46]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; exactly :)<br />[07:10:06]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; hmm i search for &#039;centos&#039; and i get no results<br />[07:10:13] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; same with &#039;debian&#039;<br />[07:10:25] &lt;ergonlogic&gt;&nbsp; are there any nodes tagged as such?<br />[07:10:30]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; oh duh<br />[07:10:32]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; probably not! :)<br />[07:10:49] &lt;ergonlogic&gt;&nbsp; it&#039;s using the &#039;keywords&#039; vocabulary<br />[07:10:55]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; does it only search discussion threads?<br />[07:10:56]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; gotcha<br />[07:11:00]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; which previously hadn;t been available for discussions<br />[07:11:04]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; so it&#039;s probably that we have few tagged nodes<br />[07:11:04]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yep<br />[07:11:10]&nbsp; &lt;ergonlogic&gt;&nbsp; for now, just discussions<br />[07:11:17]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; sorry still trying to wake up :)<br />[07:11:22] &lt;ergonlogic&gt;&nbsp; :)<br />[07:12:00]&nbsp;&nbsp; &lt;anarcat&gt; hey this reminds me - the twitter block seems to be broken<br />[07:12:07]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yeah was looking at that the other day<br />[07:12:08]&nbsp;&nbsp; &lt;anarcat&gt; last post is from may or something<br />[07:12:09]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i can&#039;t work it out<br />[07:12:24] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; was looking at the view, but i think it&#039;s the feeds system itself... the feed URL is correct<br />[07:12:32]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; and I&#039;m finally re-focusing on getting openatria.com running as a reference implemnetation of the Aegir-SaaS stack stuff I&#039;d been working on<br />[07:12:33]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i think it&#039;s just not pulling in new items properly<br />[07:12:50] &lt;anarcat&gt; that sounds like a reasonable assumption<br />[07:12:54] &lt;ergonlogic&gt;&nbsp; and expect an alpha release of aegir-up this week<br />[07:13:17]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I can take a look at that<br />[07:14:34]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; re being identified... I switched to using a proxy, could that exaplain it?<br />[07:14:36]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; maybe something for after the scrum: i noticed we can&#039;t install aegir on a non-standard port. eg port 8080 (for vagrant direct 8080 to 8080 mapping)<br />[07:14:57]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; we totally ignore --http_port in hostmaster-install. not sure why, it *ought* to be trivial surely? (famous last words)<br />[07:16:42]&nbsp; &lt;ergonlogic&gt;&nbsp; mig5: re vagrant, at one point I had aegir set up with dns, and then just added my vagrantbox as a dns server in resolv.conf<br />[07:18:32] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; ah so you got arund the login links being port 80 etc by resolving them back to the vagrant machine itself, and the port 80 then NAT to the 8080 on the vagrant box too<br />[07:18:49]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i stil lreckon we should support non-standard port on fresh install: what if I want to put varnish in front of my aegir box for example<br />[07:18:54]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; sure i can fiddle about after the install but yeah<br />[07:19:01]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; anyway - i think we are done for scrum<br />[07:19:04]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; agreed<br />[07:19:07]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; darthsteven appears MIA today<br />[07:19:13]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; thanks all</code></div>
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-124.html?destination=node%2F970%23comment-form">Login</a> or <a href="../../../../../user/register/index-124.html?destination=node%2F970%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-124.html?destination=node%2F970%23comment-form">Login</a> or <a href="../../../../../user/register/index-124.html?destination=node%2F970%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-981" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2011-12-12/index.html">Weekly Scrum IRC Log: 2011-12-12</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_6 first last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
[07:01:33]    scrum time - any devs here? anarcat: ergonlogic:
[07:01:38]     hey
[07:01:38]     eh oh
[07:01:39]     yes
[07:01:41]    I believe darthsteven is currently at a Drupal meetup
[07:01:44]    hello!
[07:01:44]     ni hao
[07:01:49]     very little for me again
[07:01:57]     i have released this nifty module that waglo wrote: <a href="http://drupal.org/project/dblogin" title="http://drupal.org/project/dblogin">http://drupal.org/project/dblogin</a>
[07:02:16]    ooh interesting
[07:02:51]     Hello!
[07:02:51]     yo
[07:02:56]    very little from me too. i sent out a silly newsletter last wednesday to be in timing for Vertice's 1 year anniversary
[07:02:59]    hey darthsteven, you made it! :)
[07:03:03]     Nothing from me today, hoping to do some real work on Aegir soon though!
[07:03:09]     hey darthsteven
[07:03:18]     darthsteven: i was wondering - how is the d7 port?
[07:03:19]     mig5: Thanks for that
[07:03:32]     Hah, stalled
[07:03:45]     I have 0 time to spend on aegir at the moment
[07:03:49]     i see
[07:03:52]     i know your pain
[07:03:53]     That will change in Jan
[07:03:58]     cool
[07:04:12]     i note that ohloh thinks we have decreasing overtime development
[07:04:23]    probably true
[07:04:26]     I'm trying to convince my employer to sponsor some of my time on Aegir
[07:05:01]     Pretty much will be able to spend 1 day every three weeks
[07:05:18]     Sorry, I'll be quiet now.
[07:05:30]     ok
[07:05:36]     pretty much the same situation for me
[07:05:55]     so basically, we're looking for sponsors and workforce :)
[07:06:38]     Yup
[07:07:08]     I want to donate money to the project, can someone let me know how :)
[07:07:43]     don't we have a paypal account? :)
[07:07:59]    i think koumbit do ;)
[07:08:14]     ah right, that's what that button does
[07:08:31]     i wonder how many donatiosn we receive there
[07:08:36]    me too :P
[07:08:37]  * anarcat will take a look
[07:10:08]     the answer is 0$
[07:10:15]    whee
[07:10:28]    i thought i recalled ergonlogic or someone thanking some people in some release notes
[07:10:44]     interestingly enough, 6 of those are "incomplete transaction"
[07:10:59]     people donating between 18 and 100$ have canceled their submission, apparently
[07:11:10]    yeah 'http://community.aegirproject.org/1.3'
[07:11:11]    oh ok
[07:11:19]    weird
[07:11:35]     yeah
[07:11:37]     i wonder
[07:11:48]     i see my failed donation there, and it happened after i hit cancel in paypal
[07:11:54]     i'll try to do a real donation to see if it works
[07:13:20]    me too
[07:13:21]     this shit doesn't work
[07:13:28]    seemed to work for me
[07:13:29]     dude, did you just donate a lot?
[07:13:34]    $50
[07:13:43]     yeah
[07:13:47]     mig5: it says: En attente (Incomplete Transaction)
[07:13:49]    that's a lot?
[07:13:50]    hmm
[07:13:53]    that's no good
[07:13:54]     well, for a test :)
[07:14:18]    i got a transaction id but no confirmation email
[07:14:45]    it doesn't show up in my paypal activity though
[07:14:50]    so probably just didn't do anything
[07:15:15]     civicrm, i love you
[07:15:26]     so that button freaking doesn't work
[07:15:40]     ergonlogic: the donate button in the community site doesn't work
[07:15:57]     we should just create a paypal account for the project and be done with it, remove the koumbit intermediary
[07:16:09]    i think we'll need more dev hands on deck.. let's be honest.. devseed left us, and many others, in the lurch, and i don't think we ever fully recovered
[07:16:12]     mig5 / darthsteven : ... and then us three can share the access in some way
[07:16:22]    i wish i could code a bit better or i'd do it, but i don't think it's my strength
[07:16:38]     i agree we need more people
[07:16:45]     i will not comment on your skills, you never listen to me :P
[07:17:00]    will i git log | grep migression to make my point? :)
[07:17:22]    anyways. next month i am at Drupal DownUnder talking aegir, i'll try and evangelise and drum up dev interest
[07:17:29]    oh! how was Drupalcamp NYC, how did the session go?
[07:17:43]     the session went well!
[07:17:56]     i got to talk with the pantheon guys about how they do intersite security, it was really interesting
[07:18:10]    ah nice
[07:18:20]    are they in fact doing multisite?
[07:18:40]     yeah, they switched away from one vserver per site
[07:18:48]    interesting
[07:19:28]      not sure the context, but seeing pantheon and aegir in the same chat sounds exciteing
[07:19:54]    it's good to trade war stories :)
[07:20:13]     hehe
[07:20:20]     yeah, it was great
[07:20:33]    what amazes me about pantheon is the deliberate simplicity of it.. not too many features, quite spartan in its approach
[07:20:47]    you have to be good to avoid feature creep like that
[07:20:58]    anyways - shall we call that a scrum end?
[07:21:13]     yes, i think we're done
</pre>

<p></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-125.html?destination=node%2F981%23comment-form">Login</a> or <a href="../../../../../user/register/index-125.html?destination=node%2F981%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-125.html?destination=node%2F981%23comment-form">Login</a> or <a href="../../../../../user/register/index-125.html?destination=node%2F981%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-999" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-01-09/index.html">Weekly Scrum IRC Log: 2012-01-09</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>
14:56       mig5@&gt; shall we do a scrum darthsteven anarcat ergonlogic omega8cc
15:02    anarcat@&gt; oh yes!
15:02    anarcat@&gt; scrum time!
15:03   omega8cc+&gt; hi!
15:03    hefring &gt; privet
15:03    anarcat@&gt; alright
15:04    anarcat@&gt; well, for myself i am just back from vacation
15:04    anarcat@&gt; still swamped with a lot of non-aegir related work
15:04    anarcat@&gt; but hopefully i will get to fix some pesky issues that have been bothering our clients and workers here
15:05    anarcat@&gt; one low hanging fruit we have is to deploy those module automatically on new sites: <a href="http://drupal.org/node/1157114" title="http://drupal.org/node/1157114">http://drupal.org/node/1157114</a>
15:05    hefring &gt; <a href="http://drupal.org/node/1157114" title="http://drupal.org/node/1157114">http://drupal.org/node/1157114</a> =&gt; DB Login =&gt; 0 comments, 1 IRC mention
15:06 (*)  anarcat looking for the second one
15:06    anarcat@&gt; <a href="http://drupal.org/project/environment_indicator" title="http://drupal.org/project/environment_indicator">http://drupal.org/project/environment_indicator</a>
15:06    anarcat@&gt; there
15:06    anarcat@&gt; the other things are: exportable backups and the pesky files directory
15:06    anarcat@&gt; i am looking for ways to optimise the migrations
15:06    anarcat@&gt; because right now we end up tarring and untarring a lot of the same crap every week
15:07    anarcat@&gt; and i'm looking for ways to optimise that
15:07    anarcat@&gt; so suggestions welcome there
15:07    anarcat@&gt; the exportable backups is just to have a way to hardlink the backup in the @hostmaster/files directory with a hard-to-guess filename so that only the user can download it
15:11       mig5@&gt; interesting
15:11       mig5@&gt; sorry, dealing with a nagios alert here at the same time
15:11    anarcat@&gt; fun :)
15:11    anarcat@&gt; i think that's pretty much it for me
15:12       mig5@&gt; not much from me this week.. need to find some more time to look at <a href="http://drupal.org/node/1388906" title="http://drupal.org/node/1388906">http://drupal.org/node/1388906</a> again. would be nice to test the nginx stuff more, not that we don't trust omega8cc of course :)
15:12    hefring &gt; <a href="http://drupal.org/node/1388906" title="http://drupal.org/node/1388906">http://drupal.org/node/1388906</a> =&gt; It is possible to break Nginx based install with upload progress by enabling nginx_ssl feature =&gt; Provision, Code, critical, needs review, 5 comments, 1 IRC mention
15:12       mig5@&gt; i'm otherwise just swamped with work, it's insane
15:12    anarcat@&gt; i know how you feel
15:12    anarcat@&gt; my return from vacation is insane
15:12       mig5@&gt; i give my aegir talk at Druapl DownUnder on saturday, should be good
15:12       mig5@&gt; how was NYC ?
15:12    anarcat@&gt; we had a compromised ftp account that sent out 30k spams on my first day :P
15:12       mig5@&gt; ugh!
15:12    anarcat@&gt; it was good
15:12    anarcat@&gt; it was only one day!
15:12    anarcat@&gt; but i did a aegir pres with ergonlogic
15:12    anarcat@&gt; and i think we got a few people in
15:13    anarcat@&gt; i met with the pantheon guys, and they have a *great* product
15:13    anarcat@&gt; not open source of course :P
15:13       mig5@&gt; yeah. it's nice and simple
15:13    anarcat@&gt; but they really got somethign going with their dev/staging/prod thingy
15:13       mig5@&gt; yes and non-free :(
15:13 ergonlogic &gt; hi
15:13    anarcat@&gt; well, i got invite codes
15:13    anarcat@&gt; i promised josh_k_ i would try to crack their thing
15:13       mig5@&gt; haha
15:13    anarcat@&gt; so far didn't find the time
15:13    anarcat@&gt; but they really have good security tools
15:14    anarcat@&gt; they are using cgroups, fcgi (or similar)
15:14       mig5@&gt; David Strauss knows his stuff
15:14    anarcat@&gt; so basically, you are renting out process groups
15:14       mig5@&gt; and that valhalla filesystem he's using for clustering and HA, sounds interesting
15:14    anarcat@&gt; as opposed to whole vservers, which was the old way
15:14    anarcat@&gt; yeah that's nice too
15:14       mig5@&gt; what are they using underneath: debian?
15:14       mig5@&gt; or redhat?
15:14    anarcat@&gt; i didn't troll, so i don't know ;)
15:14       mig5@&gt; i seem to recall a redhat feature that rented processes
15:15    anarcat@&gt; well, cgroups allow for fine-grained process isolation
15:15    anarcat@&gt; cgroups is the kernel option that allows vservers (or linux containers as the call them now) to work
15:15       mig5@&gt; yeh
15:15    anarcat@&gt; they also use selinux
15:15    anarcat@&gt; they seem really into it
15:15    anarcat@&gt; pretty cool
15:15    anarcat@&gt; anyways
15:15       mig5@&gt; i'm surprised they don't just build a machine per client or something.. it's not that expensive these days
15:15    anarcat@&gt; enough with pantheon :P
15:15       mig5@&gt; yeah :)
15:15    anarcat@&gt; mig5: that's what they were doing before
15:16    anarcat@&gt; i think it was *more* expensive than clustering in a single box
15:16    anarcat@&gt; you got to get some edge in some place
15:16    anarcat@&gt; so anyways
15:16    anarcat@&gt; ergonlogic hi!
15:16    anarcat@&gt; ergonlogic: something to add to our first scrum of the year?
15:16    anarcat@&gt; (or is it?)
15:16    anarcat@&gt; :)
15:16 ergonlogic &gt; well, I'm just back from vacation too
15:16    anarcat@&gt; welcome back :)
15:17 ergonlogic &gt; so trying to get back into the swing of things
15:17 ergonlogic &gt; I'm working out the kinks to start doing to Aegir 101 screencasts
15:17 ergonlogic &gt; s/to/some/g
15:17 ergonlogic &gt; and fighting with vimeo... they don;t like .ogv apparently
15:18    anarcat@&gt; them basterds :)
15:18 ergonlogic &gt; but anyway, just "how to create a site with Aegir" kinda stuff
15:18 ergonlogic &gt; introductory for new clients, at this point
15:19 ergonlogic &gt; other than that, just before the holidays, anarcat and I published a couple puppet modules
15:19 ergonlogic &gt; one for drush and another for aegir
15:19 ergonlogic &gt; on d.o
15:19    anarcat@&gt; oh yeah we did!
15:19    anarcat@&gt; actually *you* did :)
15:19 ergonlogic &gt; well, I published them, sure...
15:19    anarcat@&gt; but yeah, we polished a aegir module
15:19 ergonlogic &gt; but *we* worked on getting them publishable
15:19    anarcat@&gt; unfortunately it still relies on debian
15:19    anarcat@&gt; ie. it doesn't do the manual install if you're *not* on debian
15:19       mig5@&gt; oh, exciting! where are the modules?
15:19    anarcat@&gt; which would have been awesome
15:20 ergonlogic &gt; I posted a dozen or so issues on them for cleanup 
15:20    anarcat@&gt; well, it *should* be on <a href="../../../../../contrib-modules/index.html" title="http://community.aegirproject.org/contrib-modules">http://community.aegirproject.org/contrib-modules</a>
15:20    anarcat@&gt; but it isn't :P
15:20       mig5@&gt; i'll work this into a new aegir newsletter :)
15:20 ergonlogic &gt; I'll get the urls
15:20    anarcat@&gt; and i'll add them to the page
15:20 ergonlogic &gt; <a href="http://drupal.org/project/puppet-aegir" title="http://drupal.org/project/puppet-aegir">http://drupal.org/project/puppet-aegir</a>
15:20 ergonlogic &gt; <a href="http://drupal.org/project/puppet-drush" title="http://drupal.org/project/puppet-drush">http://drupal.org/project/puppet-drush</a>
15:21       mig5@&gt; i love this: server goes down, hosting company's support system and all their nameservers go down as well. excellent
15:21       mig5@&gt; if it wasn't for DNS cache they'd be uncontactable to tell them about it
15:21 (*)  anarcat notices the twitter block on c.a.o is still broken
15:21 ergonlogic &gt; they depend on a couple other puppet modules, one from Koumbit, and another from RiseUp, which is documented on the project pages
15:21    anarcat@&gt; mig5: dns -&gt; ouch
15:21 ergonlogic &gt; sigh...
15:21       mig5@&gt; great stuff re: puppet
15:22       mig5@&gt; looking forward to trying that
15:22 ergonlogic &gt; anyway, I also updated Aegir Up to use the new puppet modules
15:22 ergonlogic &gt; <a href="http://drupal.org/project/aegir-up" title="http://drupal.org/project/aegir-up">http://drupal.org/project/aegir-up</a>
15:22 ergonlogic &gt; using git subtrees
15:22    anarcat@&gt; mig5: another thing for your newsletter: arch linux support! <a href="../../../../389/revisions/view/2683/2684/index.html" title="http://community.aegirproject.org/node/389/revisions/view/2683/2684">http://community.aegirproject.org/node/389/revisions/view/2683/2684</a>
15:23       mig5@&gt; yes! saw that
15:23 ergonlogic &gt; so I now have about a dozen branches to wrangle
15:23       mig5@&gt; and did you see darthsteven's crazy article where he mass-migrated sites between two aegirs
15:23 ergonlogic &gt; but seems more maintainable than sub-modules
15:23 ergonlogic &gt; indeed yes!
15:23 ergonlogic &gt; I want to try it out this week or next
15:24 ergonlogic &gt; the mass migration stuff looks very cool
15:24 ergonlogic &gt; it's also the initial reason I started aegir-up, to test that sort of thing
15:25    anarcat@&gt; <a href="../../../../../contrib-modules/index.html#Puppet_modules" title="http://community.aegirproject.org/contrib-modules#Puppet_modules">http://community.aegirproject.org/contrib-modules#Puppet_modules</a>
15:25 ergonlogic &gt; anarcat: thanks!
15:26 ergonlogic &gt; I think that's it from me...
15:26    anarcat@&gt; ok, i think we're done then
15:27   omega8cc+&gt; I'm also back at work and plan to port some never submitted patches to 1.x, as we (boa) are using already 2.x code so it was a bit out of sync between boa and official Nginx support in Aegir 1.x
15:27 ergonlogic &gt; I'd really appreciate some feedback on Aegir-up, btw
15:27    anarcat@&gt; unless darthsteven magically flys in
15:27    anarcat@&gt; with his cape
15:27    anarcat@&gt; oh, omega8cc ! hi! :)
15:27   omega8cc+&gt; plus, I promised to submit standalone Aegir on Nginx how-to (step by step). We also tested and helped to fix a few distros so they work with Aegir and this list grows nicely :)
15:27   omega8cc+&gt; hi anarcat! and all
15:27    anarcat@&gt; nice!
15:27    anarcat@&gt; omega8cc: any work on a debian package for nginx? :)
15:28   omega8cc+&gt; anarcat: there is chance it will be soon! on the table already
15:28   omega8cc+&gt; as we are moving with everything to things like deb, puppet etc
15:28 darthsteve@&gt; Sorry I missed the scrum!
15:28    anarcat@&gt; nice!
15:28 darthsteve@&gt; In another meeting
15:28    anarcat@&gt; i am really happy to hear that!
15:29    anarcat@&gt; omega8cc: if you need help with the package, i already have ideas on how to do it
15:29 darthsteve@&gt; Nothing really to add though
15:29 ergonlogic &gt; omega8cc: I'd be happy to integrate nginx patches to the puppet-aegir module :)
15:29 ergonlogic &gt; hi steve
15:29    anarcat@&gt; omega8cc: basically, i think that it can be done without creating a new package - just add "| nginx" as a dependency and make a debconf dialog (or autodetection) to figure out which to setup
15:29 ergonlogic &gt; steven
15:29   omega8cc+&gt; anarcat: I will ask for your assistance for sure, thanks!
15:29 darthsteve@&gt; Hoping to get back to working on Aegir within the next few weeks.
15:29 darthsteve@&gt; Sorry for interrupting!
15:30   omega8cc+&gt; anarcat: exactly, it shouldn't be a separate package
15:30 ergonlogic &gt; darthsteven: thanks for the mass migration write-up
15:30    anarcat@&gt; cool
15:30 ergonlogic &gt; darthsteven: I'll be trying it out soon
15:30   omega8cc+&gt; ergonlogic: sure, I will let you know
15:31 darthsteve@&gt; ergonlogic: Yeah, no doubt I removed a vital part of it while writing it up. Pester me of that's the case
15:31 ergonlogic &gt; darthsteven: you can bet on it ;)
15:32 darthsteve@&gt; Some of it will be in Aegir core at some point, so I'd rather find the bugs now :)
15:33   omega8cc+&gt; darthsteven: hi, in the meantime we (boa) are testing the 2.x code in production :)
15:34   omega8cc+&gt; so far, absolutely no issues
15:34 darthsteve@&gt; omega8cc: Hehe, just you wait...
15:35   omega8cc+&gt; ;)
15:35 darthsteve@&gt; omega8cc: Though hopefully we can get some more tests written
15:40 ergonlogic &gt; ok then... so, I'll assume that's the end of the scrum and post the log to c.a.o
15:40       mig5@&gt; thanks ergonlogic
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-126.html?destination=node%2F999%23comment-form">Login</a> or <a href="../../../../../user/register/index-126.html?destination=node%2F999%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-126.html?destination=node%2F999%23comment-form">Login</a> or <a href="../../../../../user/register/index-126.html?destination=node%2F999%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1042" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-06/index.html">Weekly Scrum IRC Log: 2012-02-06</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <pre>
14:59 darthsteve@&gt; scrum in a couple of mins
15:02 darthsteve@&gt; mig5, anarcat, EclipseGc, ergonlogic, hadsie, mvc, omega8cc, sfyn, skwashd: scrum!
15:04    anarcat@&gt; yay!
15:04    anarcat@&gt; i'm here for once
15:04 ergonlogic+&gt; hi there
15:04    anarcat@&gt; hey ergonlogic
15:04   omega8cc+&gt; hi
15:04     hadsie+&gt; hey
15:04    hefring &gt; eh oh
15:05    anarcat@&gt; alright, should i start? i have lots to say :)
15:05    anarcat@&gt; so i'll just go ahead
15:05 ergonlogic+&gt; sure
15:05    anarcat@&gt; alright
15:05    anarcat@&gt; i wrote this crazy web_pack module last week
15:05    anarcat@&gt; in basically 3 hours, i fixed most of the issues i was having with our multi-server support, or at least the "cluster" use case
15:06    anarcat@&gt; i have posted this article requesting comments for total replacement of the current cluster module with the new implementation:
15:06    anarcat@&gt; <a href="../../../../../discuss/are-people-using-cluster-module/index.html#comment-1286" title="http://community.aegirproject.org/discuss/are-people-using-cluster-module#comment-1286">http://community.aegirproject.org/discuss/are-people-using-cluster-modul...</a>
15:06    anarcat@&gt; s/#comment.*//
15:06    anarcat@&gt; anyways
15:06 darthsteve@&gt; cool
15:06    anarcat@&gt; the idea is to stop syncing the damn platforms and sites all over the place all the time
15:06    anarcat@&gt; we only sync the ~aegir/config directory and reload apache
15:06 darthsteve@&gt; replace replace replace
15:07    anarcat@&gt; we assume /var/aegir/platforms is NFS-mounted
15:07    anarcat@&gt; which brings me to: i think we should install the hostmaster platform in /var/aegir/platforms
15:07    anarcat@&gt; it's inconsistent to have it where it is, and i don't see what purpose it serves
15:07    anarcat@&gt; + it makes sharing "all the platforms" harder
15:07    anarcat@&gt; food for thought
15:07    anarcat@&gt; i have also worked on the provisionacl module
15:07    anarcat@&gt; to make the sites directory accessible to the client group
15:08    anarcat@&gt; but there are a few snafus in there that need working out
15:08    anarcat@&gt; basically: <a href="http://drupal.org/node/1428526" title="http://drupal.org/node/1428526">http://drupal.org/node/1428526</a>
15:08    hefring &gt; <a href="http://drupal.org/node/1428526" title="http://drupal.org/node/1428526">http://drupal.org/node/1428526</a> =&gt; Files created by www-data user =&gt; Provision ACL support, Code, normal, active, 0 comments, 1 IRC mention
15:08    anarcat@&gt; and <a href="http://drupal.org/node/1416056" title="http://drupal.org/node/1416056">http://drupal.org/node/1416056</a>
15:08    hefring &gt; <a href="http://drupal.org/node/1416056" title="http://drupal.org/node/1416056">http://drupal.org/node/1416056</a> =&gt; give access to entire site directory (was: add support for .git) =&gt; Provision ACL support, Code, normal, active, 8 comments, 1 IRC mention
15:08    anarcat@&gt; otherwise i am trying to think more about how to optimise the migrate task so that it doesn't tar and untar all those damn files all the time
15:09    anarcat@&gt; so far i came up with the idea that files/ should be a symlink to a version-controlled storage
15:09    anarcat@&gt; and that therefore shouldn't eb backed up
15:09    anarcat@&gt; so backups would now mean "backup the database", not "backup the filesystem"
15:09    anarcat@&gt; that would be a plugin, i guess
15:09    anarcat@&gt; i had a bit more time to work on aegir these days, which feels good
15:10     hadsie+&gt; that would be awesome :)
15:10 darthsteve@&gt; hmminteresting
15:10    anarcat@&gt; especially since it's client work paying for that
15:10    anarcat@&gt; looking for more of those opportunities here
15:10    anarcat@&gt; oh and i had issues... with 2.x
15:10    anarcat@&gt; i wrote the pack module for 2.x, but since we don't deploy 2.x anywhere, i had to backport it to 1.x, which means now i have 4 branches (2 per module, 2 per version) for this simple module
15:11    anarcat@&gt; kind of stupid
15:11 darthsteve@&gt; ouch
15:11    anarcat@&gt; i also wonder if that module could just be contrib, i didn't bother
15:11    anarcat@&gt; i think that's it for me
15:11 darthsteve@&gt; well looks like you got up to lots of stuff
15:11 darthsteve@&gt; thanks!
15:11    anarcat@&gt; :)
15:11 darthsteve@&gt; anyone else want to go next?
15:12 ergonlogic+&gt; you?
15:12 ergonlogic+&gt; ok, me then
15:13 darthsteve@&gt; ergonlogic: you go
15:13 ergonlogic+&gt; I've been mostly working on Open Atrium features these past couple weeks
15:13 ergonlogic+&gt; and not enough on Aegir
15:13 darthsteve@&gt; tut tut
15:13 ergonlogic+&gt; but that should change soon, as I gear up to launch openatria.com
15:13 darthsteve@&gt; oh cool
15:13 ergonlogic+&gt; I'll basically be solidifying the contrib modules I've written
15:14 ergonlogic+&gt; but that ususally involves some patches to aegir too
15:14 ergonlogic+&gt; I also nee to update aegir-up, as an update to vagrant has now broken it
15:14 ergonlogic+&gt; and I realized that at least 2 people other than myself were using it
15:14 ergonlogic+&gt; so that'll be a priority this week
15:15 ergonlogic+&gt; and I'll be reworking our puppet modules
15:15 ergonlogic+&gt; mostly to parameterize the classes
15:15 darthsteve@&gt; awesome
15:15 (*)  anarcat notes that vagrant has now hit debian unstable, which means he may start using it... some day :P
15:15 darthsteve@&gt; need to talk to you about those puppet modules...
15:15 ergonlogic+&gt; so we can point to other db servers, etc.
15:15    anarcat@&gt; darthsteven: can do
15:15 ergonlogic+&gt; darthsteven: whenever you'd like
15:16    anarcat@&gt; snap :)
15:16 ergonlogic+&gt; anyway, that's my plan for the coming weeks
15:16 darthsteve@&gt; cool, thanks also
15:16    anarcat@&gt; alright, we're splurging out of our timebox here
15:16    anarcat@&gt; anyone else?
15:16 ergonlogic+&gt; oh, and I'd like to get back to screencasting, but that'll probably have to wait
15:16 darthsteve@&gt; me!
15:16    anarcat@&gt; go go ! :)
15:16 darthsteve@&gt; I've been working on something called 'Pergola'
15:16 darthsteve@&gt; which is an open source version of the Pantheon server setup scripts
15:17 darthsteve@&gt; using puppet
15:17 darthsteve@&gt; so not much Aegir time
15:17    anarcat@&gt; whoa
15:17 darthsteve@&gt; but, been trying to get back into Aegir stuff
15:17    anarcat@&gt; "A pergola, arbor or arbour is a garden feature forming a shaded walkway, passageway or sitting area of vertical posts or pillars that usually support cross-beams and a sturdy open lattice, often upon which 
                   woody vines are trained. As a type of gazebo, it may also be an extension of a building, or serve as protection for an open terrace or a link between pavilions."
15:17    anarcat@&gt; - wikipedia
15:17 darthsteve@&gt; and think about the D7 port and 6.x-2.x etc.
15:17    anarcat@&gt; pergola isn't aegir driven?
15:18 darthsteve@&gt; also, I did a migration the other day that failed in a really horrible way
15:18 darthsteve@&gt; which was interesting
15:18    anarcat@&gt; indeed
15:18    anarcat@&gt; horrible as in killing kittens?
15:18 darthsteve@&gt; Will talk about Pergola after the scrum, mentioned it, because that's where I've been spending my time :)
15:18    anarcat@&gt; ok
15:18 darthsteve@&gt; horrible as in the apache config got rolled back, but the site's files did not
15:19    anarcat@&gt; we should talk about [67].x-2.x after too
15:19    anarcat@&gt; ouch
15:19 darthsteve@&gt; I had a look at Pantheon and dev cloud for inspiration for getting Aegir easier to use
15:19 darthsteve@&gt; seeing how/if they handle 'platforms' and 'sites'
15:19    anarcat@&gt; yeah, they really have their shit together
15:20 darthsteve@&gt; but that's it from me
15:20 darthsteve@&gt; anyone else?
15:20    anarcat@&gt; hadsie ? omega8cc ?
15:20    anarcat@&gt; don't be shy, we'd love to hear you talk about your aegir work! :)
15:20   omega8cc+&gt; I have a ton of patches collected for nginx config, ready to submit, but who will have a time to review them? mig5 maybe? :)
15:20   omega8cc+&gt; Anyway, it is a first step to fully (finally) sync my already fork with upstream before I will be able to seriously get the .deb thing done for nginx folks right, which is the next step to get done.
15:21    anarcat@&gt; if they're marked as needs review, i may just do that, because i'm considering a 1.7 release with the pack module :)
15:21    anarcat@&gt; nice, we should talk
15:21   omega8cc+&gt; ok,  expect a flood there :)
15:21   omega8cc+&gt; And that is it from me, I guess.
15:21    anarcat@&gt; alright
15:21    anarcat@&gt; so unless hadsie or anyone else has something to add, i guess we can close this scrum
15:21    anarcat@&gt; and thank you everyone for attending!
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-127.html?destination=node%2F1042%23comment-form">Login</a> or <a href="../../../../../user/register/index-127.html?destination=node%2F1042%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-127.html?destination=node%2F1042%23comment-form">Login</a> or <a href="../../../../../user/register/index-127.html?destination=node%2F1042%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1069" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-13/index.html">Weekly Scrum IRC Log: 2012-02-13</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><pre>
<div class="codeblock"><code>[06:59:17]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; scrum?<br />[06:59:17]&nbsp;&nbsp; &lt;hefring&gt; Every Monday at 20h00 UTC: 12h00 San Francisco, USA (PDT), 15h00 Montreal, Canada (EDT), 20h00 London, UK (GMT), 07h00 (Tuesday) Melbourne, Australia (EST)<br />[07:00:10]&nbsp; &lt;ergonlogic&gt;&nbsp; hi all<br />[07:00:46]&nbsp;&nbsp; &lt;darthsteven&gt; hi all!<br />[07:00:54]&nbsp; &lt;anarcat&gt; hi<br />[07:00:54]&nbsp;&nbsp; &lt;hefring&gt; what&#039;s up<br />[07:01:22]&nbsp;&nbsp; &lt;anarcat&gt; so i can start i guess<br />[07:01:30]&nbsp;&nbsp; &lt;anarcat&gt; i have worked a bit more on aegir in the last week<br />[07:01:40]&nbsp;&nbsp; &lt;anarcat&gt; i have merged the pack branch into 1.x and 2.x<br />[07:01:47]&nbsp;&nbsp; &lt;anarcat&gt; assuming that it was okay to ship 1.7 with it<br />[07:01:59]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i am working on the import documentation today<br />[07:02:11]&nbsp;&nbsp; &lt;anarcat&gt; what else<br />[07:02:19]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; oh, i want to merge the debian branch into 1.x and 2.x<br />[07:02:23]&nbsp;&nbsp; &lt;anarcat&gt; so that we can start building 2.x packages<br />[07:02:38]&nbsp;&nbsp; &lt;anarcat&gt; we need to figure out *where* they would be uploaded, because that would override the 1.x packages<br />[07:02:46]&nbsp;&nbsp; &lt;anarcat&gt; but maybe we can just make another reprepro archive or something<br />[07:03:06] &lt;anarcat&gt; what else what else<br />[07:03:22]&nbsp; &lt;anarcat&gt; oh<br />[07:03:31]&nbsp;&nbsp; &lt;anarcat&gt; i would really like to see us switch to vagrant for jenkins<br />[07:03:35]&nbsp; &lt;anarcat&gt; but i have no time to take care of it<br />[07:03:45]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i am tired of false positives and i&#039;d like to be able to test aegir with vagrant<br />[07:03:58]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; vagrant should hit debian testing this week, so i&#039;ll install it at hme and may start playing with it<br />[07:04:09]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; other than that, don&#039;t count on me for vagrant stuff too much :)<br />[07:04:12]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; alright, that&#039;s it for me<br />[07:04:36]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; k, thanks anarcat<br />[07:04:43]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I&#039;ll go next<br />[07:04:54]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; http://community.aegirproject.org/content/content/administrator/post-ins...<br />[07:04:58]&nbsp; &lt;anarcat&gt; go!<br />[07:05:10]&nbsp; &lt;ergonlogic&gt;&nbsp; I&#039;ve updated aegir-up to run on the latest vagrant (0.9.8)<br />[07:05:28]&nbsp; &lt;ergonlogic&gt;&nbsp; and I&#039;ve been using it to improve the puppet-aegir module<br />[07:06:00]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; so, I have plenty of experience with aegir running on vagrant, but none w/ Jenkins<br />[07:06:40]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I&#039;ve been poking around a bit<br />[07:07:17]&nbsp;&nbsp; &lt;darthsteven&gt; cool beans<br />[07:07:24]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; but I&#039;d prefer to help someone with more jenkins experience, rather than try to do it myself<br />[07:07:50]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; anyway, we can now specify all the hostmaster variables in the puppet module<br />[07:08:00] &lt;ergonlogic&gt;&nbsp; and I&#039;m currently working on supporting manual installs<br />[07:08:18] &lt;ergonlogic&gt;&nbsp; and I&#039;m stuck at &#039;hostmaster-install&#039; but I think I see a light at the end of the tunnel<br />[07:08:29]&nbsp; &lt;ergonlogic&gt;&nbsp; that&#039;s pretty much it for me<br />[07:09:11]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; me next<br />[07:09:19]&nbsp; &lt;darthsteven&gt; I&#039;ve had some time to fix some bugs!<br />[07:09:21]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; yey!<br />[07:09:37] &lt;anarcat&gt; yay!<br />[07:09:41] &lt;darthsteven&gt; so 1.7 will have many fewer notices in the logs<br />[07:09:57]&nbsp; &lt;darthsteven&gt; and the site form now works in Internet Explorer<br />[07:09:58] &lt;darthsteven&gt; :)<br />[07:10:01]&nbsp;&nbsp; &lt;anarcat&gt; wow<br />[07:10:04]&nbsp; &lt;ergonlogic&gt;&nbsp; nice<br />[07:10:04] &lt;anarcat&gt; incredible<br />[07:10:07]&nbsp;&nbsp; &lt;anarcat&gt; IE6? :P<br />[07:10:12]&nbsp; &lt;darthsteven&gt; fixing some more simple bugs tonight<br />[07:10:17] &lt;darthsteven&gt; hah!<br />[07:10:19] &lt;darthsteven&gt; not likely<br />[07:10:21]&nbsp;&nbsp; &lt;anarcat&gt; sorry for the swearing ;)<br />[07:10:29]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; should we look at releasing 1.7 soon?<br />[07:10:30]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; that&#039;s it from me<br />[07:11:17]&nbsp;&nbsp; &lt;anarcat&gt; it seems that omega8cc has a few patches sitting in the queue, i think mig5 looked at a few of those, but we should probably factor them in<br />[07:11:37]&nbsp; &lt;anarcat&gt; also, it seems to me that we should punish omega8cc with commit access, for too long they have been submitting good patches for nginx ;)<br />[07:11:37] &lt;ergonlogic&gt;&nbsp; if we do a 1.7 soon, I&#039;d suggest we stick with Drupal 6.23, as 6.24 seems to have a couple bugs<br />[07:11:46] &lt;anarcat&gt; crap<br />[07:12:11] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; heh, I&#039;m still in the &#039;port hundreds of Nginx config changes from BOA fork to Aegir 1.x and 2.x&#039; phase.<br />[07:12:14]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I didn&#039;t realize how far it got, but we will get it back in sync with our dear upstream again :)<br />[07:12:26]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i am happy to hear that! :)<br />[07:12:30]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; We are almost there, anyway.<br />[07:12:42] &lt;anarcat&gt; i am especially curious to see that &quot;no create content stupid submenu&quot; patch :)<br />[07:12:48]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; 6.24 is fine with two patches<br />[07:12:52]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; that would be a great improvement<br />[07:13:03]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; yeah<br />[07:13:05] &lt;anarcat&gt; we could ship with patches to the makefile...<br />[07:13:45]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; alright, anyone else?<br />[07:13:50]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; If we&#039;re going forward with a 1.7, I&#039;ll post an issue to track it<br />[07:14:16]&nbsp; &lt;ergonlogic&gt;&nbsp; omega8cc: if you could comment there with the patches, that would be great<br />[07:14:30]&nbsp;&nbsp; &lt;anarcat&gt; ergonlogic: let&#039;s<br />[07:14:37]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I&#039;m on it<br />[07:15:06]&nbsp;&nbsp; &lt;anarcat&gt; alright, anyone else has something to add to our scrum?<br />[07:15:16]&nbsp; &lt;anarcat&gt; otherwise i think we&#039;re done, thanks everyone for your attention<br />[07:15:57]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; ergonlogic: basically: <a href="https://github.com/omega8cc/pressflow6/commit/97b8df2795e9565ffff5dcaa00" title="https://github.com/omega8cc/pressflow6/commit/97b8df2795e9565ffff5dcaa00">https://github.com/omega8cc/pressflow6/commit/97b8df2795e9565ffff5dcaa00</a>... and https://github.com/omega8cc/pressflow6/commit/4b05a210c4234714104149c3ef...<br />[07:16:40]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; there are two major issues only, both listed at http://drupal.org/drupal-7.12<br />[07:16:41]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; omega8cc: are those patches upstream?<br />[07:16:48]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; http://drupal.org/node/1439120<br />[07:16:48]&nbsp;&nbsp; &lt;hefring&gt; <a href="http://drupal.org/node/1439120" title="http://drupal.org/node/1439120">http://drupal.org/node/1439120</a> =&gt; Release 1.7 =&gt; Hostmaster (Aegir), Code, normal, active, 0 comments, 1 IRC mention<br />[07:17:35]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I&#039;ll post the scrum log to c.a.o</code></div>
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-128.html?destination=node%2F1069%23comment-form">Login</a> or <a href="../../../../../user/register/index-128.html?destination=node%2F1069%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-128.html?destination=node%2F1069%23comment-form">Login</a> or <a href="../../../../../user/register/index-128.html?destination=node%2F1069%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1087" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-20/index.html">Weekly Scrum IRC Log: 2012-02-20</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p><div class="codeblock"><code>[07:03:14]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; scrum time anarcat darthsteven ergonlogic omega8cc<br />[07:03:58]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; hi<br />[07:03:58]&nbsp;&nbsp; &lt;hefring&gt; hi<br />[07:04:10]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i&#039;ve not done much other than commit a patch here or there from others<br />[07:04:21]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; we have a few RTBC that we should probably look at before the next release http://drupal.org/project/issues?text=&amp;projects=hosting%2C+provision%2C+...<br />[07:04:36]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; and a fair few for review http://drupal.org/project/issues?text=&amp;projects=hosting%2C+provision%2C+...<br />[07:04:46]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; I&#039;m not able to make the scrum, sorry.<br />[07:05:15]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i suggest we also switch the aegir.make in the 6.x-1.x branch to start building drupal 6.23 or whatever, so we can be sure it works..<br />[07:05:25]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; np thanks darthsteven<br />[07:05:57]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; oh, we probably already build drupal 6.24 in the makefile. meh<br />[07:06:00]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; that makes sense<br />[07:06:11] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; anyway, not much else from me<br />[07:06:33]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; for my part, I&#039;ve been working on the puppet module<br />[07:06:39] &lt;ergonlogic&gt;&nbsp; and aegir-up<br />[07:06:58] &lt;ergonlogic&gt;&nbsp; so, we can now pass preseed info to the .deb<br />[07:07:15] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; cool!<br />[07:07:20]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; and a number of othr parameters if we go with a &#039;manual&#039; install<br />[07:08:03]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; and there&#039;s even a $aegir_dev_build variable that will build everything from the git repos, and preserver the .git repos<br />[07:08:35]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; oh nice. i&#039;m looking forward to using that :)<br />[07:08:39]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; :)<br />[07:09:08]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I&#039;ll be going over most of that with anarcat this week, and whatever passes muster will go into the master branch<br />[07:09:28]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; that&#039;s most of what I&#039;ve been up to<br />[07:09:42]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; thanks ergonlogic<br />[07:09:57]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; have we got anarcat here, or is he M.I.A this week<br />[07:10:12]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i&#039;ll keep it open for 5 or so min, in case omega8cc also arrives<br />[07:10:19]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; hi<br />[07:10:26]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I think he was pretty swamped today<br />[07:10:37]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I started new clean repos for both Provision and Hostmaster changes we have made in our BOA fork (it went too far out of sync in the meantime) and started submitting patches upstream, but it is just a start in a right direction.<br />[07:10:54] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; great!<br />[07:10:56]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I plan to work more on that, this week. That is pretty much everything I have to report today.<br />[07:11:24]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; omega8cc: see those RTBC tickets i linked above<br />[07:11:26]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; a couple are nginx ones<br />[07:11:38]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; should they be ignored in lieu of your new clean repos?<br />[07:11:42]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; mig5: I will check all of them<br />[07:11:49]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; thanks<br />[07:11:56]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; they seem to be ssl specific<br />[07:11:59] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; if they apply cleanly, no problem<br />[07:15:08]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; btw, undocumented aegir treasure of the week: passing &#039;--working-copy&#039; to hostmaster install will propagate down to &#039;drush make aegir.make&#039;<br />[07:15:26]&nbsp; &lt;ergonlogic&gt;&nbsp; that is &#039;drush hostmaster-install&#039;<br />[07:15:30] &lt;anarcat&gt; oh scrum<br />[07:15:35] &lt;anarcat&gt; missed that sry<br />[07:16:01]&nbsp; &lt;ergonlogic&gt;&nbsp; anarcat: go ahead<br />[07:18:11]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; hi<br />[07:18:11]&nbsp;&nbsp; &lt;hefring&gt; bonjour<br />[07:18:15]&nbsp; &lt;anarcat&gt; i want to release 1.7<br />[07:18:33]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; \o/<br />[07:18:34]&nbsp; &lt;anarcat&gt; i will try to at least fixup the debian branches on wednesday, but i would also like to release 1.7<br />[07:19:06]&nbsp; * anarcat reading the backlog<br />[07:19:39]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; alright uh<br />[07:19:47]&nbsp;&nbsp; &lt;anarcat&gt; so yeah, i got ahead pretty good on that<br />[07:19:59] &lt;anarcat&gt; but the debian and release script cleanup will really take hold when we do that release<br />[07:20:06]&nbsp; &lt;anarcat&gt; so i&#039;d like to do that, and improve the docs, in one swoop<br />[07:20:49]&nbsp; &lt;anarcat&gt; alright, i think that&#039;s it for me<br />[07:20:57]&nbsp;&nbsp; &lt;anarcat&gt; cheers everyone<br />[07:21:02]&nbsp; &lt;ergonlogic&gt;&nbsp; k, thanks<br />[07:21:08]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; anyone else?<br />[07:21:25] &lt;ergonlogic&gt;&nbsp; if not, I&#039;ll post the log to c.a.o</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-129.html?destination=node%2F1087%23comment-form">Login</a> or <a href="../../../../../user/register/index-129.html?destination=node%2F1087%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-129.html?destination=node%2F1087%23comment-form">Login</a> or <a href="../../../../../user/register/index-129.html?destination=node%2F1087%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1110" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-02-27/index.html">Weekly Scrum IRC Log: 2012-02-27</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><p><div class="codeblock"><code>[07:00:23]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; Scrum time?<br />[07:00:33]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yep<br />[07:01:30]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; don&#039;t everyone go at once! :)<br />[07:01:37]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; I can start<br />[07:01:45]&nbsp; &lt;cmcintosh&gt;&nbsp;&nbsp; by all means<br />[07:02:07] &lt;anarcat&gt; alright<br />[07:02:08]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; not much from me, I committed a few patches mainly from omega8cc for nginx stuff, and a couple other small bugs. figured i&#039;d get a few fixes in before 1.7<br />[07:02:17]&nbsp; &lt;anarcat&gt; scrum scrum scrum scrum scrumscrumscrum<br />[07:02:24]&nbsp; &lt;darthsteven&gt; Awesome stuff<br />[07:02:26]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; go for it<br />[07:02:43]&nbsp;&nbsp;&nbsp; &lt;cmcintosh&gt;&nbsp;&nbsp; i have been working on building a integrated workflow using git / aegir tasks<br />[07:03:13]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; alright<br />[07:03:18]&nbsp; &lt;cmcintosh&gt;&nbsp;&nbsp; for now it will only have support for git but hoping to have api in it for addition of other types of repos<br />[07:03:36]&nbsp; &lt;anarcat&gt; that&#039;s cool<br />[07:03:42] &lt;cmcintosh&gt;&nbsp;&nbsp; yea<br />[07:03:48]&nbsp; &lt;anarcat&gt; alright, is that all?<br />[07:04:00]&nbsp;&nbsp;&nbsp; * anarcat is <em>eager</em> to go (haha)<br />[07:04:04]&nbsp;&nbsp;&nbsp; &lt;cmcintosh&gt;&nbsp;&nbsp; i also may be submitting a patch to tasks / platforms module to fix the issues i have been seeing with adding custom tasks into platform<br />[07:04:11] &lt;cmcintosh&gt;&nbsp;&nbsp; anarcat, go go go!<br />[07:04:14]&nbsp;&nbsp; &lt;anarcat&gt; alright<br />[07:04:16]&nbsp; &lt;anarcat&gt; i&#039;ve been testing file descriptors overflow all weekend<br />[07:04:24] &lt;darthsteven&gt; Hehe<br />[07:04:27] &lt;anarcat&gt; running simulations creating billions of file descriptors<br />[07:04:32]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; and just now, it failed<br />[07:04:33]&nbsp; &lt;anarcat&gt; Resource id #2147480111<br />[07:04:34]&nbsp; &lt;anarcat&gt; 105 fd: Resource id #-2147483648, restartingstarting almost infinite loop to overflow PHP resources (file descriptors), press enter to continue or control-c to abort<br />[07:04:40]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; so drum roll please<br />[07:04:49]&nbsp; &lt;anarcat&gt; we&#039;ll now see if pcntl_exec() fixes the shit<br />[07:04:49]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; Nice<br />[07:04:58] &lt;anarcat&gt; (drum roll?)<br />[07:04:59] &lt;anarcat&gt; whatever<br />[07:05:00] &lt;anarcat&gt; 105 fd: Resource id #-2147483648, restartingstarting almost infinite loop to overflow PHP resources (file descriptors), press enter to continue or control-c to abort<br />[07:05:03]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; Resource id #111<br />[07:05:06] &lt;anarcat&gt; Resource id #10111<br />[07:05:08]&nbsp;&nbsp; &lt;anarcat&gt; so there you go<br />[07:05:11]&nbsp; &lt;anarcat&gt; it fixes the shit!<br />[07:05:21]&nbsp;&nbsp; &lt;anarcat&gt; the fix is to re-exec the daemon, the bug doesn&#039;t survive pcntl_exec()<br />[07:05:38]&nbsp; &lt;anarcat&gt; so i think we could just re-exec the daemon after N tasks OR x seconds<br />[07:05:42]&nbsp;&nbsp; &lt;darthsteven&gt; Isn&#039;t that what we do already?<br />[07:05:49]&nbsp; &lt;anarcat&gt; well, we do it after a timeout<br />[07:06:01]&nbsp;&nbsp; &lt;anarcat&gt; my guess is that for a serie of heavy tasks that isn&#039;t enough<br />[07:06:06]&nbsp;&nbsp; &lt;darthsteven&gt; Ah right<br />[07:06:10] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; so is this related to that <a href="http://drupal.org/node/1454316" title="http://drupal.org/node/1454316">http://drupal.org/node/1454316</a> ?<br />[07:06:11]&nbsp; &lt;hefring&gt; <a href="http://drupal.org/node/1454316" title="http://drupal.org/node/1454316">http://drupal.org/node/1454316</a> =&gt; Provision recurses infinitely on reading in context =&gt; Provision, Code, normal, active, 6 comments, 1 IRC mention<br />[07:06:12]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; say like 20 migrates<br />[07:06:15] &lt;anarcat&gt; mig5: no<br />[07:06:18] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; ok<br />[07:06:20]&nbsp;&nbsp; &lt;anarcat&gt; it&#039;s in the hosting_queue_runner<br />[07:06:25]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; oh right<br />[07:06:28] &lt;anarcat&gt; alright, so that was my crazy shit<br />[07:06:32]&nbsp;&nbsp; &lt;anarcat&gt; i want to release 1.7 soonish<br />[07:06:36]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i am not sure i&#039;ll have time this week<br />[07:06:41]&nbsp; &lt;anarcat&gt; and besides we should wait for 6.25<br />[07:06:46]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yep<br />[07:06:50]&nbsp; &lt;anarcat&gt; ah<br />[07:06:53]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; which is not far away thanks to that #drupalwtf<br />[07:07:01]&nbsp; &lt;anarcat&gt; and i want to introduce omega8cc as a new core committer<br />[07:07:18] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; +1, we endlessly spoke of it but never did it :)<br />[07:07:25] &lt;anarcat&gt; we have already discussed this in the past, but i talked with omega8cc and we agreed that we could give commit access with the understanding that it is limited to nginx stuff<br />[07:07:26]&nbsp;&nbsp; &lt;darthsteven&gt; Cool<br />[07:07:31] &lt;anarcat&gt; which we can&#039;t really review anyways<br />[07:07:33]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i would prefer not to blindly commit patches with my current migression rate<br />[07:07:46] &lt;anarcat&gt; omega8cc: see? mig5 is just like you :P<br />[07:07:48]&nbsp; &lt;anarcat&gt; so<br />[07:07:54]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; :)<br />[07:07:55]&nbsp;&nbsp; &lt;anarcat&gt; omega8cc: welcome in the team, and congratulations<br />[07:08:06]&nbsp;&nbsp; &lt;anarcat&gt; i think that&#039;s it for me, i can take care of christening the commit access<br />[07:08:07]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; thank you! :)<br />[07:08:24]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; next!<br />[07:08:39]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; omega8cc: Do you want to go next?<br />[07:09:07]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; omega8cc: your account is omega8cc on d.o?<br />[07:09:08]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; darthsteven: thanks, I will be last<br />[07:09:12]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; yes<br />[07:09:26]&nbsp; &lt;anarcat&gt; omega8cc: you now have access to provision<br />[07:09:32]&nbsp;&nbsp; &lt;darthsteven&gt; Okay, mig5 were you done?<br />[07:09:57]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; omega8cc: you now have access to hostmaster<br />[07:10:04]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; darthsteven: yep<br />[07:10:19] &lt;darthsteven&gt; I&#039;ll go next then<br />[07:10:22]&nbsp;&nbsp; &lt;darthsteven&gt; :)<br />[07:10:35]&nbsp;&nbsp; &lt;darthsteven&gt; Right, I had a slightly busy weekend<br />[07:10:46] &lt;anarcat&gt; while i&#039;m here, i removed tbosviel and univate from the maintainers ACL, as we haven&#039;t seen them forever<br />[07:11:07]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; sure<br />[07:11:11] &lt;darthsteven&gt; And I&#039;ve pushed forward the D7 rewrite<br />[07:11:29]&nbsp; &lt;darthsteven&gt; Note that I&#039;m calling it a rewrite and not a port<br />[07:11:45]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; awesome. I tried to drum up a bit of interest on twitter re: that<br />[07:11:48]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; There&#039;s just too much baggage and D7 really does change the way that you build sites<br />[07:12:22]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; There&#039;s quite a bit of discussion around entities vs. nodes already<br />[07:12:27] &lt;anarcat&gt; fair enough<br />[07:12:35]&nbsp; &lt;anarcat&gt; yeah, that&#039;s really interesting! i joined in there too<br />[07:12:49]&nbsp; &lt;darthsteven&gt; And so I want to facilitate that going forward, and reach consensus over the next few weeks<br />[07:12:52]&nbsp; &lt;anarcat&gt; i don&#039;t have strong opinions on the matter, as i am not familiar enough with d7, but i&#039;m happy to see the talks move ahead<br />[07:12:59] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; likewise ^^<br />[07:13:17]&nbsp; &lt;cmcintosh&gt;&nbsp;&nbsp; i think entities would be great<br />[07:13:23]&nbsp; &lt;darthsteven&gt; I&#039;m targeting Drupalcon Europe for the release<br />[07:13:30]&nbsp; &lt;anarcat&gt; sweet<br />[07:13:31]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; thanks for leading this darthsteven, it feels like it&#039;s got fresh air pumped into it again :)<br />[07:13:33]&nbsp;&nbsp; &lt;anarcat&gt; that would be awesome<br />[07:13:40]&nbsp;&nbsp;&nbsp; &lt;cmcintosh&gt;&nbsp;&nbsp; let me know i am getting some paid time for aegir dev and may be able to swing some time towards d7<br />[07:13:42]&nbsp; &lt;darthsteven&gt; So 6 or 18 months :p<br />[07:13:49] &lt;anarcat&gt; cmcintosh: that would be great<br />[07:13:52]&nbsp;&nbsp; &lt;anarcat&gt; haha<br />[07:14:03] &lt;darthsteven&gt; cmcintosh: That would be awesome<br />[07:14:10] &lt;anarcat&gt; darthsteven: oh and that would fit well with the offers for sponsorship for the subdir support<br />[07:14:13]&nbsp;&nbsp; &lt;anarcat&gt; did you guys see that?<br />[07:14:35]&nbsp;&nbsp; &lt;cmcintosh&gt;&nbsp;&nbsp; plus i need to sit down and upgrade aegir services for 3.x<br />[07:14:44]&nbsp;&nbsp; &lt;darthsteven&gt; anarcat: As you say in the issue, there needs to be community consensus on the rewrite, as otherwise no one will want to maintain it<br />[07:15:11] &lt;darthsteven&gt; cmcintosh: Hopefully, in D7 services integration will be so much easier<br />[07:15:24]&nbsp; &lt;darthsteven&gt; Thats it from me I think<br />[07:15:33] &lt;cmcintosh&gt;&nbsp;&nbsp; sounds awesome<br />[07:15:35]&nbsp;&nbsp; &lt;darthsteven&gt; Would happily chat nodes vs entities at some point<br />[07:15:45]&nbsp;&nbsp; &lt;darthsteven&gt; (at a pub at the moment)<br />[07:15:45] &lt;anarcat&gt; darthsteven: well, my point is more that the person that will do the upgrade should have the final say<br />[07:15:52]&nbsp;&nbsp; &lt;anarcat&gt; as i expect it will be you :P<br />[07:16:00]&nbsp;&nbsp;&nbsp; &lt;cmcintosh&gt;&nbsp;&nbsp; darthsteven, you got any code snipets for adding tasks to platforms on d6, would be great to review to see if im doing things right here<br />[07:16:37] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; cmcintosh: did you give an aegir talk at Sandcamp last month?<br />[07:16:40]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; cmcintosh: I think it was the Drupal gardens importer, which is on d.o somewhere<br />[07:16:53] &lt;anarcat&gt; so i wanted to add this http://drupal.org/node/705026#comment-5655840<br />[07:16:54]&nbsp;&nbsp;&nbsp; &lt;hefring&gt; <a href="http://drupal.org/node/705026" title="http://drupal.org/node/705026">http://drupal.org/node/705026</a> =&gt; Allow creation of mysite.com/site1 and mysite.com/site2 type of sites =&gt; Hostmaster (Aegir), Code, major, needs work, 29 comments, 1 IRC mention<br />[07:17:05]&nbsp; &lt;anarcat&gt; it looks like we have people interested in sponsoring proper subdir support implementations<br />[07:17:10]&nbsp; &lt;cmcintosh&gt;&nbsp;&nbsp; no i was going to but didnt make it<br />[07:17:13]&nbsp; &lt;anarcat&gt; and that would fit well with darthsteven&#039;s timeline for d7<br />[07:17:41]&nbsp; &lt;darthsteven&gt; anarcat: If you could get the backend able to do that, I could get a frontend ship shape to drive it<br />[07:17:48] &lt;anarcat&gt; that would be awesome<br />[07:18:05]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i have zero cycles now, esp. since i am looking at 1.7 and sites dir improvements<br />[07:18:09]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; how would we do it.. with &#039;Alias&#039; in vhosts or something?<br />[07:18:12]&nbsp; &lt;anarcat&gt; but it&#039;s certainly something we need<br />[07:18:13]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; Though I have some ideas of how it could work in the backend too :)<br />[07:18:14]&nbsp; &lt;anarcat&gt; mig5: yeah.<br />[07:18:23]&nbsp; &lt;anarcat&gt; i think that&#039;s the best idea so far<br />[07:18:25] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i can&#039;t fathom how we&#039;ll be able to do migrations of sites, e.g if they are sharing the one vhost ServerName<br />[07:18:33]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; but need to be on separate platforms<br />[07:18:40] &lt;anarcat&gt; aliases do that<br />[07:18:40]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i guess we&#039;d have to just maintain the individual Alias somehow<br />[07:18:43] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yeah<br />[07:18:44] &lt;anarcat&gt; yeah<br />[07:18:56] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; anyway - i think this is falling outside scrum, shall we tie it off?<br />[07:18:59] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; anything to add ergonlogic ?<br />[07:19:01] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; oh!<br />[07:19:02]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; omega8cc! :)<br />[07:19:08] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; don&#039;t think you&#039;ve had your turn<br />[07:19:08]&nbsp;&nbsp; &lt;anarcat&gt; yeah!<br />[07:19:17]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I will take this opportunity and will finally sync Nginx stuff between BOA fork and our upstream in the next 2-3 days, but it will require a small flood of Nginx related patches. So we should have nicely polished Nginx config before 1.7 release.<br />[07:19:31]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; oops, sorry &#039;bout that<br />[07:19:39]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; Thanks for the commit access!<br />[07:19:47]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; we forgot to make sure you <em>wanted</em> it! :)<br />[07:19:48]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I will do my best<br />[07:20:07]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; mig5: i <em>did</em> ask before the scrum :)<br />[07:20:13]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; mig5: which was the key bit we were missing :)<br />[07:20:17]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; oh good<br />[07:20:19]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; yes :)<br />[07:20:23]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; &#039;they forced me into core dev&#039; <em>sniff</em><br />[07:20:28] &lt;anarcat&gt; haha<br />[07:20:30] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; haha<br />[07:21:20] &lt;ergonlogic&gt;&nbsp; for my part, I&#039;m planning on a beta release of aegir-up this week, and to start migrating hostmaster.profile to the Profiler library<br />[07:21:24]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; that&#039;s it<br />[07:21:35]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; sorry for missing it :-/<br />[07:21:41] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; great stuff. will the hostmaster profile rewrite be for 6.x-2.x or just the 7.x port?<br />[07:21:46]&nbsp;&nbsp;&nbsp; &lt;cmcintosh&gt;&nbsp;&nbsp; darthsteven, can you get me a link to the dl for that module<br />[07:21:53] &lt;cmcintosh&gt;&nbsp;&nbsp; doesnt seem to be anything in the repo on d.o<br />[07:22:42]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; cmcintosh: http://drupal.org/sandbox/darthsteven/1178192<br />[07:22:57] &lt;ergonlogic&gt;&nbsp; both 6.x and 7.x, I figure<br />[07:23:14]&nbsp;&nbsp; &lt;darthsteven&gt; cmcintosh: http://drupalcode.org/sandbox/darthsteven/1178192.git/tree/refs/heads/6....<br />[07:23:26]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; alright I think we&#039;ll call that a scrum<br />[07:23:32] &lt;darthsteven&gt; Yup<br />[07:23:33]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; I&#039;ll do a fresh Aegir Newsletter today I think<br />[07:23:36]&nbsp; &lt;darthsteven&gt; Thanks guys<br />[07:23:38]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; thanks all</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-130.html?destination=node%2F1110%23comment-form">Login</a> or <a href="../../../../../user/register/index-130.html?destination=node%2F1110%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-130.html?destination=node%2F1110%23comment-form">Login</a> or <a href="../../../../../user/register/index-130.html?destination=node%2F1110%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1138" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-05/index.html">Weekly Scrum IRC Log: 2012-03-05</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><p><div class="codeblock"><code>[07:00:08]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; anarcat, darthsteven, mig5, EclipseGc, ergonlogic, mvc, omega8cc, shrop, skwashd: Scrum time!<br />[07:01:48]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; anyone else here?<br />[07:03:00]&nbsp;&nbsp;&nbsp; &lt;@omega8cc&gt;&nbsp;&nbsp; ah, it&#039;s Monday again?<br />[07:03:56]&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; it is!<br />[07:04:07]&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; wouldd you like to go firs this week?<br />[07:04:13]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; *first<br />[07:06:09]&nbsp;&nbsp; &lt;@iler&gt;&nbsp;&nbsp; :)<br />[07:06:33]&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; no?<br />[07:06:38]&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; okay well I&#039;ll go then<br />[07:06:48]&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; scrum<br />[07:06:52]&nbsp;&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; sry<br />[07:06:56]&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; Hello!<br />[07:06:56]&nbsp;&nbsp; &lt;@hefring&gt;&nbsp;&nbsp;&nbsp; what&#039;s up<br />[07:07:09]&nbsp;&nbsp; * penyaskito has quit (Ping timeout: 252 seconds)<br />[07:07:10]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; So last Friday I spent the day working on the D7 port<br />[07:07:35]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; lots of initial looking at entity module and getting some of our entities set up<br />[07:07:53] &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; nothing major to report, only that it&#039;s going to take a while to port :)<br />[07:08:23]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; I added a couple of command line options to our mysqldump command<br />[07:08:36]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; and broke aegir doing so, but then fixed it, so all is well<br />[07:08:40]&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; that&#039;s it from me?<br />[07:08:47]&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; anarcat: do you want to go next?<br />[07:09:01] &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; (that is it from me, btw)<br />[07:09:25]&nbsp;&nbsp;&nbsp; * scor has joined #aegir<br />[07:09:35] &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; yep<br />[07:09:38]&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; so<br />[07:09:57]&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; i&#039;ll work on the 1.7 release tomorrow<br />[07:10:03]&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; i hope to have time to wrap it up<br />[07:10:14]&nbsp;&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; i think omega8cc merged their patches in so the timing seems ripe<br />[07:10:17]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; cool<br />[07:10:21] &lt;@scor&gt;&nbsp;&nbsp; <a href="../../../../../content/installing/automatic-installat/index.html" title="http://community.aegirproject.org/content/installing/automatic-installat">http://community.aegirproject.org/content/installing/automatic-installat</a>... says the current Ubuntu Server LTS is 11.04. however according to <a href="https://wiki.ubuntu.com/LTS" title="https://wiki.ubuntu.com/LTS">https://wiki.ubuntu.com/LTS</a> it does not seem that 11.04 is LTS<br />[07:10:25] * svendecabooter has quit (Remote host closed the connection)<br />[07:10:38]&nbsp;&nbsp;&nbsp; &lt;@iler&gt;&nbsp;&nbsp; scor: It&#039;s not, 10.04 is<br />[07:10:54]&nbsp;&nbsp;&nbsp; &lt;@scor&gt;&nbsp;&nbsp; so this documentation applies to 10.04?<br />[07:10:55]&nbsp; &lt;@iler&gt;&nbsp;&nbsp; And next one is 12.04<br />[07:10:56]&nbsp;&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; koumbit reprioritised its roadmap and we&#039;ll look at migrate optimisations next, trying to consolidate the files/ directory outside of the migrate<br />[07:11:07]&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; scor/iler: we&#039;re mid-scrum please keep chatter to a minimum until after (in about 10 mins)<br />[07:11:10]&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; then we&#039;ll look at subsite support<br />[07:11:19]&nbsp; &lt;@scor&gt;&nbsp;&nbsp; darthsteven: oops sorry will come back later<br />[07:11:27] &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; anarcat: awesome<br />[07:11:55] &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; then we&#039;ll look at securing verify from code injection. e.g. by not running cc all and by looking directly in the system table instead of bootstrapping the site<br />[07:12:11]&nbsp;&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; so that remote acces to the sites dir is more secure<br />[07:12:18] &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; so that&#039;s our roadmap for the next year<br />[07:12:21] &lt;@omega8cc&gt;&nbsp;&nbsp; nice<br />[07:12:39] &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; most of those will be done on 2.x, and we&#039;ll start deploying those for willing guinea pigs<br />[07:12:39]&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; lovely<br />[07:12:50]&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; so i&#039;ll probably setup a 2.x debian archive too<br />[07:13:21] &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; i feel sick last week so i didn&#039;t do much work other than that planning<br />[07:13:25] &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; that&#039;s it for me<br />[07:13:35]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; awesome, thanks anarcat<br />[07:13:37]&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; omega8cc?<br />[07:13:40]&nbsp;&nbsp;&nbsp; &lt;@omega8cc&gt;&nbsp;&nbsp; ok<br />[07:13:51]&nbsp;&nbsp; &lt;@omega8cc&gt;&nbsp;&nbsp; Last week I merged in all Nginx related fixes and improvements we already have tested and used in BOA, and also fixed some missing Nginx config bits between 6.x-1.x and 6.x-2.x.<br />[07:14:04]&nbsp;&nbsp;&nbsp; &lt;@omega8cc&gt;&nbsp;&nbsp; This week I plan to commit some UX improvements in hostmaster we have in BOA for a long time already, in a separate branch of course, for review.<br />[07:14:19]&nbsp;&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; cool<br />[07:14:20] &lt;@omega8cc&gt;&nbsp;&nbsp; and that is it from me, I think.<br />[07:14:22] * q-rban is now known as q0rban<br />[07:14:34]&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; awesome work omega8cc<br />[07:14:45]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; I&#039;ve been getting lots of emails about issues being updated/fixed<br />[07:14:47]&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; omega8cc: you think the stuff you merged is ready for release? :)<br />[07:15:11]&nbsp;&nbsp;&nbsp; &lt;@omega8cc&gt;&nbsp;&nbsp; anarcat: haha, it is used in production for months!<br />[07:15:23]&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; cool :)<br />[07:15:33]&nbsp; &lt;@omega8cc&gt;&nbsp;&nbsp; darthsteven: thanks, I promised the flood :)<br />[07:15:33] &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; omega8cc: oh, and i saw you&#039;re looking at working on nginx debian packaging<br />[07:15:39] * patcon has joined #aegir<br />[07:15:40]&nbsp;&nbsp; &lt;@omega8cc&gt;&nbsp;&nbsp; yes<br />[07:15:47]&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; omega8cc: we may want to sync up on that as i will work on having easier to build 2.x packages<br />[07:15:53]&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; so that would be the right place to dev that<br />[07:16:04] &lt;@omega8cc&gt;&nbsp;&nbsp; I agree<br />[07:16:11]&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; expect that tomorrow<br />[07:16:22] &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; alright anything else?<br />[07:16:25]&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; we&#039;re hitting our timebox<br />[07:16:42]&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; i know that ergonlogic has proposed to split hostmaster in eldir/hosting/hostmaster parts back again<br />[07:16:49] &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; i&#039;d be curious to hear what ppl think of that<br />[07:17:09]&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; it makes sense for Eldir, but not for hosting<br />[07:17:36]&nbsp;&nbsp;&nbsp; &lt;@anarcat&gt;&nbsp;&nbsp;&nbsp; well, there&#039;s an issue opened about his<br />[07:17:41] &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; indeed :)<br />[07:17:57]&nbsp;&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; end of scrum unless anyone else wants to chip in in the next 15 seconds...<br />[07:18:38]&nbsp;&nbsp; &lt;@darthsteven&gt;&nbsp;&nbsp;&nbsp; that&#039;s a scrum then folks</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-131.html?destination=node%2F1138%23comment-form">Login</a> or <a href="../../../../../user/register/index-131.html?destination=node%2F1138%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-131.html?destination=node%2F1138%23comment-form">Login</a> or <a href="../../../../../user/register/index-131.html?destination=node%2F1138%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1182" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-12/index.html">Weekly Scrum IRC Log: 2012-03-12</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p><div class="codeblock"><code>[07:01:35]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; scrum time!<br />[07:03:44]&nbsp; &lt;ergonlogic&gt;&nbsp; hi<br />[07:04:30]&nbsp;&nbsp; &lt;darthsteven&gt; hello!<br />[07:04:30]&nbsp;&nbsp; &lt;hefring&gt; salut<br />[07:04:37]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; hi<br />[07:04:37]&nbsp;&nbsp; &lt;hefring&gt; hello<br />[07:04:56]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; hefring: botsnack<br />[07:04:56]&nbsp;&nbsp;&nbsp; &lt;hefring&gt; thanks omega8cc :)<br />[07:05:39]&nbsp;&nbsp; * scientist_ has joined #aegir<br />[07:05:50]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I believe anarcat is on vacation, and has found his way out to the woods<br />[07:05:55] &lt;darthsteven&gt; mig5: scrum?<br />[07:06:02] &lt;ergonlogic&gt;&nbsp; so he won&#039;t likely be joining us<br />[07:06:20]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; I shall kick things off by saying well done to Anarcat for getting the 1.7 release done<br />[07:06:31]&nbsp; &lt;darthsteven&gt; and well done to omega8cc for getting tons of stuff into that release<br />[07:06:42]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; that&#039;s it from me<br />[07:06:52]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; :)<br />[07:07:11]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; My work on porting Hostmaster BOA UI improvements to 6.x-2.x is still in progress, so I&#039;m submitting some minor Nginx patches in the meantime. Not much to report this week.<br />[07:08:21]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; However, I&#039;m really tired with this bug: http://drupal.org/node/1004526<br />[07:08:22] &lt;hefring&gt; <a href="http://drupal.org/node/1004526" title="http://drupal.org/node/1004526">http://drupal.org/node/1004526</a> =&gt; Automatic aliases are not persisted across rename and clone =&gt; Hostmaster (Aegir), Code, major, needs work, 25 comments, 3 IRC mentions<br />[07:08:33]&nbsp; &lt;darthsteven&gt; ah yes, that one<br />[07:08:34] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; it causes tons of support requests<br />[07:08:44]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; so I plan to attack it<br />[07:09:20]&nbsp;&nbsp; &lt;darthsteven&gt; ok cool<br />[07:09:36]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; it is a major Aegir WTF/fail for most of our users<br />[07:11:49]&nbsp;&nbsp; * SqyD has joined #aegir<br />[07:12:25] * penyaskito has joined #aegir<br />[07:12:45]&nbsp;&nbsp; &lt;darthsteven&gt; indeed<br />[07:12:49]&nbsp;&nbsp; &lt;darthsteven&gt; anything else?<br />[07:12:58]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; that is it from me<br />[07:13:09]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; For my part I submitted some issues and patches to port Hostmaster to the Profiler library, making sub-profiles possible, and fairly easy. This also required a ptch to Provision to support alternative profile names.<br />[07:14:00]&nbsp; &lt;ergonlogic&gt;&nbsp; I also depends on splitting Eldir and Hosting back out of Hostmaster for the 6.x-2.x branch, and I submitted an issue on that as well<br />[07:14:23]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; yeah, I&#039;m not 100% sure where I feel about a split tbh<br />[07:14:34]&nbsp; &lt;ergonlogic&gt;&nbsp; ok<br />[07:15:03]&nbsp;&nbsp; &lt;darthsteven&gt; it&#039;s a good idea for us, but not sure if it will confuse people, and lead to lots of where should I post this issue type questions?<br />[07:15:15] &lt;darthsteven&gt; but I can see the benefits too<br />[07:15:21]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; well, we already get lots of that<br />[07:15:57]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I&#039;m pretty sure it will confise some people<br />[07:16:08] &lt;ergonlogic&gt;&nbsp; but the other projects already exist<br />[07:16:56] &lt;darthsteven&gt; yup<br />[07:17:04]&nbsp; &lt;darthsteven&gt; anywayanyone got anything else to add?<br />[07:17:18]&nbsp; &lt;ergonlogic&gt;&nbsp; Beyond making hosting and eldir reusable, I think it could also make engagement in the project easier<br />[07:17:18]&nbsp;&nbsp;&nbsp; * Artusamak_afk is now known as Artusamak<br />[07:18:55]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; possibly<br />[07:18:57] &lt;ergonlogic&gt;&nbsp; anyway, I&#039;s also been making lots of headway with Aegir-up, which now supports full development builds of Aegir, including custom (i.e. sandbox) provision repos and alternative branches<br />[07:19:05]&nbsp;&nbsp; &lt;darthsteven&gt; awesome<br />[07:19:19]&nbsp; &lt;darthsteven&gt; got a link for that work?<br />[07:19:23]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; along with custom aegir.make makefiles<br />[07:20:07]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; a bit short on docs, but http://community.openatria.com/team/node/552<br />[07:20:29]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; Aegir-up itself is at http://drupal.org/project/aegir-up<br />[07:20:50] &lt;ergonlogic&gt;&nbsp; that&#039;s about it from me<br />[07:21:13] &lt;apassi&gt;&nbsp; I have a aegir installed on two server, now when i create server content type from other to other, then aegir ui does not work anymore on other server, why?<br />[07:21:43] &lt;darthsteven&gt; thanks ergonlogic<br />[07:21:52]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; i think we&#039;ll call that a scrum then<br />[07:22:02]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; anyone care to do the logs?<br />[07:22:06]&nbsp; &lt;ergonlogic&gt;&nbsp; I can<br />[07:22:20]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; ergonlogic: thanks<br />[07:22:34]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; darthsteven: can we discuss splitting hosting/eldir?<br />[07:22:47] &lt;darthsteven&gt; ergonlogic: sure, can you give me ten mins?<br />[07:22:47]&nbsp; &lt;ergonlogic&gt;&nbsp; darthsteven: I&#039;d like to make sure I understand your reservations<br />[07:22:52]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; sure<br />[07:23:10] &lt;ergonlogic&gt;&nbsp; hefring: logs<br />[07:23:21]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; gah, what is that command again?<br />[07:23:27] &lt;ergonlogic&gt;&nbsp; hefring: timestamp<br />[07:23:31]&nbsp;&nbsp; &lt;darthsteven&gt; hefring: log pointer?<br />[07:23:31]&nbsp;&nbsp;&nbsp; &lt;hefring&gt; http://hefring.mig5.net/bot/log/aegir/2012-03-12#T182454<br />[07:23:42] &lt;ergonlogic&gt;&nbsp; right... thanks</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-132.html?destination=node%2F1182%23comment-form">Login</a> or <a href="../../../../../user/register/index-132.html?destination=node%2F1182%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-132.html?destination=node%2F1182%23comment-form">Login</a> or <a href="../../../../../user/register/index-132.html?destination=node%2F1182%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1210" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-19/index.html">Weekly Scrum IRC Log: 2012-03-19</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><div class="codeblock"><code>[06:47:48]	&lt;darthsteven&gt;	hefring: Tell anarcat that I&#039;ll be unable to make the scrum tonight but I&#039;ve only done one issue, which was getting MySQL passwords escaped properly when installing, so in theory we can use special characters in root passwords just fine.<br />[06:47:49]	&lt;hefring&gt;	darthsteven: I&#039;ll pass that on when anarcat is around.<br />[06:51:19]	* penyaskito has quit (Quit: Saliendo)<br />[07:01:31]	&lt;mig5&gt;	scrum time<br />[07:01:36]	&lt;mig5&gt;	thanks darthsteven for the message<br />[07:02:05]	&lt;mig5&gt;	nothing from me this week! suspect it will be a quiet scrum<br />[07:02:15]	&lt;mig5&gt;	anarcat: omega8cc: ergonlogic: go for it<br />[07:02:50]	&lt;ergonlogic&gt;	yep<br />[07:03:31]	&lt;ergonlogic&gt;	for my part, I wrote a cron queue for CiviCRM<br />[07:04:02]	&lt;ergonlogic&gt;	<a href="http://drupal.org/project/hosting_civicrm_cron" title="http://drupal.org/project/hosting_civicrm_cron">http://drupal.org/project/hosting_civicrm_cron</a><br />[07:04:11]	&lt;anarcat&gt;	sorry, i gotta go<br />[07:04:11]	&lt;hefring&gt;	anarcat: 16 min 23 sec ago &lt;darthsteven&gt; Tell anarcat that I&#039;ll be unable to make the scrum tonight but I&#039;ve only done one issue, which was getting MySQL passwords escaped properly when installing, so in theory we can use special characters in root passwords just fine.<br />[07:04:30]	&lt;ergonlogic&gt;	as part of last week&#039;s Koumbit provision_civicrm sprint<br />[07:04:51]	&lt;anarcat&gt;	nothing much to say from me anyways, 1.7 was released i am happy, and i will work on optimise migrate next<br />[07:04:53]	&lt;ergonlogic&gt;	and I continue to work on aegir-up<br />[07:04:54]	&lt;anarcat&gt;	ciao!<br />[07:05:03]	&lt;anarcat&gt;	!po<br />[07:05:04]	&lt;ergonlogic&gt;	that&#039;s it for me<br />[07:05:15]	&lt;mig5&gt;	thanks guys<br />[07:05:40]	&lt;mig5&gt;	i&#039;ll keep it open for 5 min in case omega8cc drops in<br />[07:06:26]	&lt;omega8cc&gt;	hi!<br />[07:06:26]	&lt;hefring&gt;	yo<br />[07:06:30]	&lt;omega8cc&gt;	While no progress on my end in regard to UI improvements ported from BOA Hostmaster yet, I have found an easy way to manage extra ftps/lshell accounts per Aegir client with access strictly limited to attached sites, everything done in a one bash script outside of Aegir, and it will be included in BOA-2.0.3<br />[07:07:17]	&lt;mig5&gt;	sounds interesting<br />[07:07:20]	&lt;omega8cc&gt;	and that is the end of news this week :)<br />[07:08:08]	&lt;omega8cc&gt;	the script: <a href="http://drupalcode.org/project/barracuda.git/blob/HEAD:/aegir/tools/auto-" title="http://drupalcode.org/project/barracuda.git/blob/HEAD:/aegir/tools/auto-">http://drupalcode.org/project/barracuda.git/blob/HEAD:/aegir/tools/auto-</a>...<br />[07:10:20]	&lt;mig5&gt;	alright, thanks all!<br />[07:10:31]	&lt;omega8cc&gt;	it creates/purges extra accounts using built-in lshell features, it doesn&#039;t sync with Aegir passwords, so it gives extra control over granting and revoking access (manually)<br />[07:10:38]	&lt;omega8cc&gt;	thanks!</code></div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-133.html?destination=node%2F1210%23comment-form">Login</a> or <a href="../../../../../user/register/index-133.html?destination=node%2F1210%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-133.html?destination=node%2F1210%23comment-form">Login</a> or <a href="../../../../../user/register/index-133.html?destination=node%2F1210%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1234" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-03-26/index.html">Weekly Scrum IRC Log: 2012-03-26</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p><div class="codeblock"><code>[06:59:46]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; mig5 omega8cc: scrum?<br />[07:00:14]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; darthsteven &amp; anarcat indicated they wouldn&#039;t be able to make it today<br />[07:00:57]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; ergonlogic: we may need to re-schedule it then?<br />[07:01:20]&nbsp; &lt;ergonlogic&gt;&nbsp; yep, anarcat had asked to re-schedule for an hour earlier<br />[07:02:05]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; ergonlogic: makes sense also here, as it is now 10pm cet, not sure about mig5?<br />[07:02:44]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; hi there<br />[07:02:44] &lt;hefring&gt; mig5: 2 hours 39 min ago &lt;darthsteven&gt; Tell mig5 that I&#039;ll be unable to make the scrum again, I&#039;ve worked on fixing some bugs, including one major one that I introduced in 1.7. I would suggest that we should release 1.8 soonish. I also did some work on aegir-up to make it super useful for developing aegir itself.<br />[07:03:09]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i am OK for it to be rescheduled - however, if it moves earlier in the day, i won&#039;t be showing up :)<br />[07:03:14]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; and i think that&#039;s ok, to be honest...<br />[07:03:25]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; we&#039;ve spent years to trying to accomodate for everyone and i think it&#039;s the wrong approach<br />[07:03:44] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i&#039;ll send updates via hefring in advance, and read scrum notes afterward<br />[07:03:45]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; mig5: ok<br />[07:03:54] &lt;ergonlogic&gt;&nbsp; mig5: do you have a suggestion?<br />[07:04:09]&nbsp; &lt;ergonlogic&gt;&nbsp; nobody wants to exclude anyone else<br />[07:04:14]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; nope. any later is too late for the europeans<br />[07:04:24]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; any earlier, i will not wake up (hard enough already :) )<br />[07:04:42]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; and by the time the europeans are getting up, it&#039;s late for me, so same problem<br />[07:04:56] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; reversed<br />[07:04:59] &lt;ergonlogic&gt;&nbsp; yep<br />[07:05:06]&nbsp; &lt;ergonlogic&gt;&nbsp; no wins<br />[07:05:22]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; mig5: hah, hefring could help a bit, but it is then not really interactive :) 22pm cet is still ok for me<br />[07:05:56]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i&#039;m not fussed on &#039;exclusion&#039;, it&#039;s simply the nature of things :) i&#039;d sooner see four or 5 of you talking, via logs, than three of us<br />[07:06:35]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; nothing new from me anyway this week - darthsteven has been amazing in the issue queues, fixed a lot of things. and it looks like i need to finally check out aegir-up<br />[07:06:59]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; or maybe let&#039;s schedule two scrums on Monday/Tuesday then? so we could choose which scrum to attend?<br />[07:07:02]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; well, we do alot of communicating outside the scrums, so I don;t think it&#039;s essential<br />[07:07:22]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; omega8cc: that&#039;s another good idea<br />[07:07:35]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yes a morning/night scrum could be interesting :)<br />[07:07:47]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; though maybe monday/thursday, or something<br />[07:07:54]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; so it&#039;s spread out a bit more?<br />[07:08:02]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; sometimes I work late in the night cet<br />[07:08:03]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yep<br />[07:08:05]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; good idea<br />[07:08:20]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; yeah, same here (late nights)<br />[07:09:11]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; so let&#039;s convert the old problem into this new idea<br />[07:09:35] &lt;ergonlogic&gt;&nbsp; so, monday afternoons, one hour earlier<br />[07:09:48]&nbsp; &lt;ergonlogic&gt;&nbsp; and thursdays when it&#039;s convenient for mig5?<br />[07:10:31]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; later, we could perhaps schedule the monday ones earlier to be easier on the europeans...<br />[07:10:44]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; sure, is thursday ok for you mig5?<br />[07:10:48]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i&#039;m confused on when is &#039;monday afternoon&#039; - afternoon for who?<br />[07:10:57]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; re aegir-up, I&#039;min the process of turning it into a drush extension<br />[07:11:00] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; thursday is fine for me - at <em>this</em> time, or the other end of the day?<br />[07:11:16]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; mig5: well, for me, obviously :P<br />[07:12:06] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; mig5: be the host of the thursday scrum and choose the hour :)<br />[07:12:21]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; mig5: I meant one hour earlier than current time on mondays (for now)<br />[07:12:30]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; for the Monday scrums<br />[07:12:56]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; yes, go one hour earlier on the mondays - as i&#039;ll likely just drop out of those, so make it convenient for you<br />[07:13:12]&nbsp; &lt;ergonlogic&gt;&nbsp; right<br />[07:14:27]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; and perhaps we go the opposite for Thursday<br />[07:14:27]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; http://www.timeanddate.com/worldclock/meetingdetails.html?year=2012&amp;mont...<br />[07:14:47]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; so it&#039;s the time in montreal for oyu that is for me right now, but europeans and asia-pacific can join in<br />[07:15:36]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; or perhaps one hour earlier, same as you&#039;re going to make it for monday<br />[07:15:49] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; http://www.timeanddate.com/worldclock/meetingdetails.html?year=2012&amp;mont...<br />[07:16:18]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; this will work for me, but maybe 9pm would be better<br />[07:16:21] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; right<br />[07:16:55]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; ok sure<br />[07:17:17]&nbsp; &lt;ergonlogic&gt;&nbsp; alright, I&#039;ve update the monday scrums on c.a.o<br />[07:17:38] &lt;ergonlogic&gt;&nbsp; I&#039;ll leave it to one of you to add the second scrum time?<br />[07:17:57]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; mig5: :)<br />[07:18:18] &lt;ergonlogic&gt;&nbsp; I guess we can just remove &#039;weekly&#039; from those pages now :)<br />[07:18:29]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; yep<br />[07:20:00]&nbsp; &lt;ergonlogic&gt;&nbsp; hefring tell darthsteven we&#039;re moving the Monday scrums up by 1 hour (for now) as per anarcat&#039;s request, and starting a second one on Thursdays, to accomodate Mig5 and Omega8cc<br />[07:20:00]&nbsp;&nbsp; &lt;hefring&gt; ergonlogic: I&#039;ll pass that on when darthsteven is around.<br />[07:20:20]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; hefring tell anarcat we&#039;re moving the Monday scrums up by 1 hour (for now) as per your request, and starting a second one on Thursdays, to accomodate Mig5 and Omega8cc<br />[07:20:20] &lt;hefring&gt; ergonlogic: I&#039;ll pass that on when anarcat is around.<br />[07:21:02]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I still need to take a look at this aegir-up stuff, but am I correct you are rewriting it as a drush ext?<br />[07:21:10]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; k, so, let&#039;s wrap this up, unless anyone had anything substantive?<br />[07:21:14]&nbsp; &lt;ergonlogic&gt;&nbsp; omega8cc: yep<br />[07:21:27]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; awesome!<br />[07:21:27] &lt;ergonlogic&gt;&nbsp; the basics are in place<br />[07:21:39]&nbsp; &lt;ergonlogic&gt;&nbsp; with drush wrappers around the shell scripts I&#039;d written<br />[07:21:57]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; but I&#039;ll start new commands natively in drush, and port the rest as time permits<br />[07:22:31]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; hefring: log pointer<br />[07:22:31] &lt;hefring&gt; http://hefring.mig5.net/bot/log/aegir/2012-03-26#T187514<br />[07:22:39] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I have very little to report this week, basically a bit of simple magic in Aegir and Drush 4.6-dev to make it work with Drupal 8<br />[07:22:53] &lt;ergonlogic&gt;&nbsp; omega8cc: yeah, that was nice!<br />[07:23:17]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I haven&#039;t tried it out yet, but nice to see!<br />[07:23:42]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; that was not really a magic, rather boring search/replace, but still, it is nice it works<br />[07:24:01]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; drush 5 was released<br />[07:24:33] &lt;ergonlogic&gt;&nbsp; so we might want to start moving aegir to it<br />[07:24:43] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; yeah, but it drops drupal 5 support and we are not compatible yet, afaik<br />[07:24:58] &lt;ergonlogic&gt;&nbsp; there are a couple issues about it, yeah<br />[07:25:04] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; so we have a choice in the meantime<br />[07:25:36]&nbsp; &lt;ergonlogic&gt;&nbsp; well, I guess that can be one of the differentiators for 2.x? no more D5?<br />[07:27:07]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; yeah, however we have still people on pressflow 5, but it will be a good selling point to give them EOL for d5 support in Aegir<br />[07:27:31]&nbsp; &lt;ergonlogic&gt;&nbsp; drush also supports COMMANDFILE.drush4.inc, or something similar<br />[07:28:08] &lt;ergonlogic&gt;&nbsp; so we could keep our current functionality for backward compatibility<br />[07:28:16]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; didn&#039;t know that, nice<br />[07:28:19]&nbsp; &lt;ergonlogic&gt;&nbsp; but it would mean alot more code to maintain<br />[07:28:38] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; yeah, not worth the effort probably<br />[07:29:04]&nbsp; &lt;ergonlogic&gt;&nbsp; it&#039;s an option, if we want to deprecate D5 support, I guess<br />[07:29:59] &lt;ergonlogic&gt;&nbsp; either way drush 5 is the future, and allows for some nifty things<br />[07:30:02]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; anyway<br />[07:30:12]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I&#039;ll post the log</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-134.html?destination=node%2F1234%23comment-form">Login</a> or <a href="../../../../../user/register/index-134.html?destination=node%2F1234%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-134.html?destination=node%2F1234%23comment-form">Login</a> or <a href="../../../../../user/register/index-134.html?destination=node%2F1234%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1290" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-09/index.html">Weekly Scrum IRC Log: 2012-04-09</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p><div class="codeblock"><code>[05:02:08]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; anarcat mig5 omega8cc darthsteven everyone: scrum?<br />[05:02:34]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; hi<br />[05:02:34]&nbsp;&nbsp; &lt;hefring&gt; what&#039;s up<br />[05:02:45]&nbsp;&nbsp; &lt;anarcat&gt; hi<br />[05:02:45]&nbsp;&nbsp; &lt;hefring&gt; eh oh<br />[05:02:48]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; same hour? i think we have moved it, no?<br />[05:02:56] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; oh<br />[05:02:57]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; we&#039;d moved it to this time<br />[05:03:04]&nbsp; &lt;ergonlogic&gt;&nbsp; from an hour later<br />[05:03:28]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; ah, so it is still 9pm cet, k<br />[05:04:19]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; so, there appears to have been lots of activity in the issue queues these past couple weeks...<br />[05:04:33]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; anyone want to speak to that?<br />[05:04:49]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; or other stuff we&#039;ve been working on?<br />[05:05:24]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; well, I worked on a workarounds/fixes for two issues<br />[05:05:38] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; both a year old<br />[05:05:48]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; the famous http://drupal.org/node/1004526<br />[05:05:49]&nbsp;&nbsp;&nbsp; &lt;hefring&gt; <a href="http://drupal.org/node/1004526" title="http://drupal.org/node/1004526">http://drupal.org/node/1004526</a> =&gt; Automatic aliases are not persisted across rename and clone =&gt; Provision, Code, major, needs review, 32 comments, 4 IRC mentions<br />[05:06:00] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; and another: http://drupal.org/node/1088472<br />[05:06:01]&nbsp; &lt;hefring&gt; <a href="http://drupal.org/node/1088472" title="http://drupal.org/node/1088472">http://drupal.org/node/1088472</a> =&gt; Introduce simple switch for changing write permissions to support plugin manager (Drupal App Store) =&gt; Provision, Code, normal, needs review, 17 comments, 3 IRC mentions<br />[05:06:48]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; patches for review submitted<br />[05:07:05] &lt;ergonlogic&gt;&nbsp; great!<br />[05:07:19]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; however, they are not really fixes, just a workarounds<br />[05:08:18]&nbsp;&nbsp; &lt;anarcat&gt; alright that&#039;s good<br />[05:08:28] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; now I&#039;m packing BOA as a deb monster so also Nginx based Aegir installed from deb should be available soon<br />[05:08:31]&nbsp; &lt;anarcat&gt; i don&#039;t think i&#039;ll have time to review this now, but it&#039;s good to see some progress on that<br />[05:08:40]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; ok<br />[05:08:52]&nbsp;&nbsp; &lt;anarcat&gt; omega8cc: someone was asking about nginx + debian here earlier, you may want to join forces<br />[05:08:55]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; and that is it from me<br />[05:09:02]&nbsp;&nbsp; &lt;anarcat&gt; cweagans it was<br />[05:09:37]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; anarcat: it should be easy, but any help is appreciated, sure!<br />[05:09:42]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; right<br />[05:09:56]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; as for myself, not much to say here<br />[05:10:20]&nbsp; &lt;anarcat&gt; i am looking forward to having more time to work on aegir, but we are doing major infrastructure work on our old cluster here and it&#039;s taking a lot of manhours<br />[05:10:35] &lt;anarcat&gt; then i will look at optimising migrate<br />[05:10:47]&nbsp;&nbsp; &lt;anarcat&gt; and doing an estimate for those folks who want to chip in to implement subsites<br />[05:12:45]&nbsp; &lt;millette&gt;&nbsp;&nbsp;&nbsp; salut<br />[05:12:45]&nbsp;&nbsp;&nbsp; &lt;hefring&gt; hello<br />[05:12:47]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; anarcat: k, anything else?<br />[05:12:55]&nbsp;&nbsp; &lt;anarcat&gt; uh i think that&#039;s it for me<br />[05:12:59] &lt;ergonlogic&gt;&nbsp; hi millette!<br />[05:13:13] &lt;millette&gt;&nbsp;&nbsp;&nbsp; anarcat, could you provide me with an aegir install somewhere so I can do my packages patch properly?<br />[05:13:21]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; millette: we&#039;re just in the middle of our weekly scrum<br />[05:13:32]&nbsp; &lt;millette&gt;&nbsp;&nbsp;&nbsp; salut ergonlogic - ack - I&#039;ll stay tuned<br />[05:13:59]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; for my part, I&#039;ve finished porting Aegir-up to a drush extension now<br />[05:14:29]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; and I&#039;vebegun work on a utility server to provide dns, squid-proxy, git and jenkins servers<br />[05:14:41] &lt;ergonlogic&gt;&nbsp; so I&#039;ll be poking around the jenkins test scripts<br />[05:14:51]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; that&#039;s about it from me<br />[05:15:10] &lt;ergonlogic&gt;&nbsp; omega8cc: was there a Thursday scrum?<br />[05:15:49]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; ergonlogic: no, I was here but I didn&#039;t met anyone here :/<br />[05:16:07]&nbsp; &lt;ergonlogic&gt;&nbsp; omega8cc: alright<br />[05:16:27]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; so then, if there&#039;s nothing else, I&#039;ll post this to the community site<br />[05:16:36] &lt;flexgrip&gt;&nbsp;&nbsp;&nbsp; Has anyone enabled CORS on an nginx/BOA install before?<br />[05:16:39]&nbsp; &lt;ergonlogic&gt;&nbsp; hefring: log pointer<br />[05:16:39] &lt;hefring&gt; http://hefring.mig5.net/bot/log/aegir/2012-04-09#T192145<br />[05:16:40] &lt;anarcat&gt; alirght<br />[05:16:42]&nbsp; &lt;anarcat&gt; thanks ergonlogic<br />[05:16:46]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; thanks<br />[05:16:54]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; :)</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-135.html?destination=node%2F1290%23comment-form">Login</a> or <a href="../../../../../user/register/index-135.html?destination=node%2F1290%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-135.html?destination=node%2F1290%23comment-form">Login</a> or <a href="../../../../../user/register/index-135.html?destination=node%2F1290%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1297" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-12/index.html">Weekly Scrum IRC Log: 2012-04-12</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><div class="codeblock"><code>[21:01:31]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; alright! i actually made it, almost on time, to the second scrum of the week<br />[21:01:39] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i missed the first few weeks, and i&#039;m meant to be the one hosting it. epic<br />[21:01:50]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; darthsteven: anarcat: ergonlogic: if you&#039;re around<br />[21:02:04]&nbsp; &lt;darthsteven&gt; mig5: hello!<br />[21:02:37] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i updated the python-cloudfiles installation on the jenkins server, and raised a sleep timeout limit that was causing all our jenkins builds to fail, as rackspace takes ages to build from our images these days sadly<br />[21:02:55]&nbsp; &lt;darthsteven&gt; cool<br />[21:03:07] &lt;darthsteven&gt; not cool about rackspace though<br />[21:03:11]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i then suckered myself into working more on what was meant to be a trivial patch, and now has left me bewildered and confused http://drupal.org/node/1503824<br />[21:03:12] &lt;hefring&gt; <a href="http://drupal.org/node/1503824" title="http://drupal.org/node/1503824">http://drupal.org/node/1503824</a> =&gt; hosting_site_count() ignores disabled sites =&gt; Hostmaster (Aegir), Code, normal, needs work, 5 comments, 1 IRC mention<br />[21:03:16]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; like the last 20 or so patches over the last 2 years<br />[21:03:24] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; that&#039;s about it from me!<br />[21:03:46]&nbsp;&nbsp;&nbsp; * rv0 has quit (Read error: Connection reset by peer)<br />[21:03:54]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; some of our builds in jenkins are still broken, this seems to be related to installing deb files via dpkg, which i haven&#039;t figured out yet<br />[21:04:26]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; weird requirements like nfs-common, and the drush-make deb, etc.. and my attempt to fix it saw that restarting portmap or something failed. haven&#039;t had time to look at.<br />[21:06:05]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; sorry if I&#039;ve added to your confusion in that issue<br />[21:06:25] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; nah it&#039;s not you. any developer would be fine with it<br />[21:06:43]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; iam just not made of the same stuff and never have been. i should find something i&#039;m good at and stick with it :)<br />[21:06:54]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; don&#039;t have a coder brain<br />[21:07:50]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; okay, well the efforts are appreciated<br />[21:07:54]&nbsp;&nbsp; &lt;darthsteven&gt; shall I go next?<br />[21:08:06] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; please!<br />[21:08:17]&nbsp; &lt;darthsteven&gt; well, I&#039;ve looked at a couple of issues in the queue<br />[21:08:52]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; notably: 1185690<br />[21:09:10] &lt;darthsteven&gt; which is running through jenkins now<br />[21:09:13] &lt;darthsteven&gt; a minor fix<br />[21:09:34]&nbsp; &lt;darthsteven&gt; We&#039;ll release 1.8 next week<br />[21:09:38] &lt;darthsteven&gt; I think<br />[21:09:42]&nbsp; &lt;darthsteven&gt; that&#039;s it from me<br />[21:09:59]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; nice, thanks<br />[21:11:07] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; real shame that we lost data from the community site<br />[21:11:14] &lt;mig5&gt;&nbsp;&nbsp;&nbsp; niccolo wrote something interesting in response to http://community.aegirproject.org/discuss/wheres-aegir-drupalcon-denver<br />[21:11:36]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; about how it feels like the project is sort of losing its spark, so to speak, in the wake of other beasts like pantheon<br />[21:11:45]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i&#039;ve been wondering about that and how we can get that spark back<br />[21:12:02]&nbsp;&nbsp; &lt;darthsteven&gt; indeed<br />[21:12:13]&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; it&#039;s probably in the eye of the beholder, of course.. some might feel it&#039;s very new and exciting and others less so<br />[21:12:33]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; but i don&#039;t think we ever fully recovered from the developmentseed departure<br />[21:12:40]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; yup<br />[21:13:41]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; I haven&#039;t got much to suggest, given I myself struggle with immense motivation issues. ho, hum<br />[21:13:55]&nbsp; &lt;darthsteven&gt; I&#039;m now working at least a day week, at work, on Aegir<br />[21:14:00]&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; that&#039;s unreal :)<br />[21:14:26]&nbsp;&nbsp;&nbsp; &lt;mig5&gt;&nbsp;&nbsp;&nbsp; i wanted to ask how you currently do your deployments etc<br />[21:14:31]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; so hoping to get some of the longer standing bugs sorted out<br />[21:15:19] &lt;darthsteven&gt; and some of the more complicated bugs that would take a few hours to set up multiple servers etc.</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-136.html?destination=node%2F1297%23comment-form">Login</a> or <a href="../../../../../user/register/index-136.html?destination=node%2F1297%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-136.html?destination=node%2F1297%23comment-form">Login</a> or <a href="../../../../../user/register/index-136.html?destination=node%2F1297%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1313" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-16/index.html">Weekly Scrum IRC Log: 2012-04-16</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p><div class="codeblock"><code>[04:59:05]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; darthsteven anarcat mig5 omega8cc: scrum?<br />[04:59:33]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; yep, i can<br />[04:59:43]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; k, great<br />[05:00:03] &lt;ergonlogic&gt;&nbsp; was a Thursday scrum last week, which is good to see<br />[05:01:06] &lt;ergonlogic&gt;&nbsp; discussion of 1.8 release this week?<br />[05:01:14] &lt;anarcat&gt; cool<br />[05:01:22] &lt;anarcat&gt; the thursday scrum is at 7hAM is that right?<br />[05:01:31] &lt;anarcat&gt; i am worried about the dual scrums<br />[05:01:45]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; anarcat: I think it&#039;s like 4am here in Mtl<br />[05:01:52]&nbsp; &lt;anarcat&gt; i feel it&#039;s splitting the community<br />[05:01:57] &lt;anarcat&gt; it&#039;s 6am here<br />[05:02:09]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; ah, ok, well, no difference to me :)<br />[05:02:25] &lt;anarcat&gt; so anyways<br />[05:02:30]&nbsp;&nbsp; &lt;anarcat&gt; i really think we should release 1.8 soon<br />[05:02:35]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i am not sure i will have time to do this now<br />[05:02:42]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; but maybe we can call for patches before the release<br />[05:02:47] &lt;ergonlogic&gt;&nbsp; since we log them, I think we&#039;ll be ok, as long as we bother to read the ones we miss<br />[05:02:52]&nbsp;&nbsp; &lt;anarcat&gt; i have worked on provisionacl last week<br />[05:03:02]&nbsp; &lt;anarcat&gt; and i have made it so it changes the mode on the whole sites directory<br />[05:03:10]&nbsp;&nbsp; &lt;anarcat&gt; so that users can create local.settings.php or .git and so on<br />[05:03:17]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; this fixes a bunch of issues at koumbit<br />[05:03:21]&nbsp; &lt;ergonlogic&gt;&nbsp; sweet<br />[05:03:28]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; but makes securing aegir harder<br />[05:03:46]&nbsp; &lt;anarcat&gt; i still have to do that estime for the subsites thing<br />[05:04:38]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; and i am looking at moving files/modules/... out of the sites directory, maybe even making the whole directory a symlink<br />[05:04:51] &lt;anarcat&gt; that&#039;s about it for me<br />[05:05:03]&nbsp; &lt;ergonlogic&gt;&nbsp; moving them to clients/?<br />[05:05:21] &lt;anarcat&gt; yeah, basically<br />[05:05:38]&nbsp; &lt;ergonlogic&gt;&nbsp; that&#039;d probably simplify sftp and such<br />[05:06:05]&nbsp; &lt;ergonlogic&gt;&nbsp; ok, well on my part, I&#039;ve been granted commit access to drush-vagrant<br />[05:06:23]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; so I&#039;m migrating a bunch of code from aegir-up over there<br />[05:06:43]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; which should help to stabilize aegir-up somewhat<br />[05:07:05] &lt;ergonlogic&gt;&nbsp; as I tease apart the templating framework for vagrant, and the template that deploys Aegir<br />[05:07:55]&nbsp;&nbsp; &lt;anarcat&gt; that&#039;s good<br />[05:07:56] &lt;ergonlogic&gt;&nbsp; anyway, that and getting our AegirVPS infrastructure worted out thave been keeping me busy<br />[05:08:20]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; that latter, I might blog about in a week or two, once I&#039;ve got it running the way I&#039;d like<br />[05:08:29]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; cool<br />[05:08:44] &lt;ergonlogic&gt;&nbsp; and so that aegir-up can create a working local environment that more or less matches it<br />[05:09:18] &lt;ergonlogic&gt;&nbsp; I&#039;ve started a second template to work similarly to aegir-up, that includes a Jenkins server<br />[05:10:22]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; it&#039;s also planned to have bind, squid and git servers<br />[05:11:08]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; so it can be the local end of a continuous integration workflow, but it depends on drush-vagrant stabilizing a bit more first<br />[05:11:17]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; anyway, that&#039;s pretty much it from me<br />[05:11:48]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; darthsteven omega8cc mig5 others: anything to add?<br />[05:12:15]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I fixed a few small bugs in the nginx config so it should now just work with dotdeb build, as it should be recommended build for nginx based installs on Debian, then started to review the code missing in 2.x, as there are patches committed only in 1.x, however so far only 3 are tagged, but I will review also previous months to find them all<br />[05:12:34]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; http://drupal.org/project/issues?text=&amp;projects=provision%2C+hosting%2C+...<br />[05:13:27]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; then I will move to the deb based build, finally<br />[05:13:47] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I mean, to make the deb install working with nginx<br />[05:14:13]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; and that is it from me, I guess<br />[05:14:56]&nbsp; &lt;ergonlogic&gt;&nbsp; darthsteven, mig5, anyone else?<br />[05:15:33]&nbsp; &lt;ergonlogic&gt;&nbsp; Office hours are worth noting<br />[05:15:40]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; right<br />[05:15:46]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; http://community.aegirproject.org/content/office-hours<br />[05:15:49]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; great idea<br />[05:15:59]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; agreed<br />[05:16:51]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; anarcat: aha, that&#039;s what&#039;s scheduled for 4:00am :)<br />[05:17:06]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; anyway, I&#039;ll post the log<br />[05:17:10]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; hefring: log pointer</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-137.html?destination=node%2F1313%23comment-form">Login</a> or <a href="../../../../../user/register/index-137.html?destination=node%2F1313%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-137.html?destination=node%2F1313%23comment-form">Login</a> or <a href="../../../../../user/register/index-137.html?destination=node%2F1313%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1374" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-26/index.html">Weekly Scrum IRC Log: 2012-04-26</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
20:06 &lt;+omega8cc> scrum?
20:06 &lt; hefring> Every Monday at 20h00 UTC: 12h00 San Francisco, USA (PDT), 15h00 Montreal, Canada (EDT), 20h00 London, UK (GMT), 07h00 (Tuesday) Melbourne, Australia (EST)
20:08 &lt;@mig5> oops
20:08 &lt;@mig5> in an hour i think?
20:08 &lt;+omega8cc> no, now! :)
20:09 &lt;+omega8cc> mig5: is this 21h00 in Melbourne, Australia (EST)?
20:09 &lt;@mig5> hmm, it's 20h00 here
20:09 &lt;+omega8cc> heh
20:09 &lt;+omega8cc> so we need to fix this <a href="../../../../../scrums/index.html" title="http://community.aegirproject.org/scrums">http://community.aegirproject.org/scrums</a>
20:09 &lt;@mig5> maybe i moved back and the rest of you stayed where oyu are
20:09 &lt;+omega8cc> as it says 12h00 (noon) in Warsaw, Poland
20:09 &lt;@mig5> now is fine, if that's the normal time
20:09 &lt;@mig5> i think i must've moved back
20:09 &lt;@mig5> so it was EDT before
20:10 &lt;@mig5> ok, scrum :P
20:10 &lt;+omega8cc> ah
20:10 &lt;@mig5> i have nothing to add anyway!
20:11 &lt;+omega8cc> Nothing new to report from me today, but I do have an idea I want to discuss later.
20:11 &lt;+omega8cc> We have some concept-grade, half-baked modules for importing the site into Aegir (or migrating between Aegir instances), plus many how-tos etc. But what we really need is an aegir_connector, like in this demo: <a href="http://vimeo.com/41020017" title="http://vimeo.com/41020017">http://vimeo.com/41020017</a> This is what I want to get done right in the next month or two.
20:13 &lt;+omega8cc> mig5: so we need to fix the hours at <a href="../../../../../scrums/index.html" title="http://community.aegirproject.org/scrums">http://community.aegirproject.org/scrums</a> as it should much your time when it is a good time in AU
20:13 &lt;+omega8cc> match*
20:13 &lt;@mig5> now is fine, i'll just change melbourne's time
20:14 &lt;+omega8cc> ok
20:15 &lt;@mig5> i can only add that i played with the Pack module and managed to get it working. i think the docs for Pack need a lot of work, and there are some 'gotchas' such as the aegir UID/GID needing to  match between systems or aegir fails to chmod/chown during rsyncs etc
20:15 &lt;@mig5> and, i wrote some neat Jenkins/Fabric magic that automatically tags install profile repositories and updates stub makefiles and does tag-based deployment with drush make etc
20:15 &lt;@mig5> for a client
20:15 &lt;@mig5> hope to release it soon
20:16 &lt;+omega8cc> wow
20:16 &lt;@mig5> finally i hope to do another aegir newsletter soon, it's been a while
20:16 &lt;+omega8cc> sounds great
20:16 &lt;@mig5> when i say 'updates stub makefiles' i mean, updated the [tag] = xxxxx for that install profile referenced in the stub makefile
20:17 &lt;@mig5> in otherwords allows a user to manually kick off a 'Build' in jenkins and it does the whole tagged release.. standard provision-migrate etc but with proper tags etc.
20:18 &lt;@mig5> anyways, small scrum i think. i think we also didn't have one on tuesday, too bad..
20:18 &lt;+omega8cc> mig5: you remember Vertice idea to have makefiles subscribed via some feed and auto-generating new platforms?
20:18 &lt;@mig5> yeah
20:18 &lt;@mig5> that would be neat
20:19 &lt;@mig5> you'd need something faster than cron to subscribe to it though
20:19 &lt;@mig5> jenkins is faster atm
20:19 &lt;@mig5> maybe, erm, node.js :) /me runs
20:20 &lt;+omega8cc> haha, I think we need more stuff like that, to help adoption, as all those Hpowerful workflows with Jenkins etc are just over the head of 99% of the audience we could attract
20:20 &lt;@mig5> of course
20:22 &lt;+omega8cc> and that is my plan (and it always has been) to make it easy for people who don't really have a chance to be a power users, but want the benefits of using the Aegir stuff with their mouse only (almost)
20:24 &lt;+omega8cc> because, you know, power users prefer command line and ci stuff etc anyway, so they will never really help in Aegir adoption, because power users are always a small percent of the audience
20:24 &lt;@mig5> yes it's been good that you stick to your audience :)
20:24 &lt;@mig5> the real world
20:24 &lt;+omega8cc> both are real
20:25 &lt;+omega8cc> just a different scale
20:27 &lt;+omega8cc> ok
20:27 &lt;+omega8cc> hefring: botsnack
20:27 &lt; hefring> delicious!
20:27 &lt;+omega8cc> scrum 
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-138.html?destination=node%2F1374%23comment-form">Login</a> or <a href="../../../../../user/register/index-138.html?destination=node%2F1374%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-138.html?destination=node%2F1374%23comment-form">Login</a> or <a href="../../../../../user/register/index-138.html?destination=node%2F1374%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1415" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-04-30/index.html">Weekly Scrum IRC Log: 2012-04-30</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><div class="codeblock"><code>[05:01:07]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; darthsteven / mig5 / EclipseGc / ergonlogic / mvc / omega8cc / sfyn / shrop / skwashd : scrum time!<br />[05:02:33]&nbsp; &lt;anarcat&gt; ... anyone around? :)<br />[05:02:33]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; awesome<br />[05:02:36]&nbsp; &lt;anarcat&gt; yay!<br />[05:02:36] &lt;ergonlogic&gt;&nbsp; hi<br />[05:02:40]&nbsp;&nbsp; &lt;anarcat&gt; hi<br />[05:02:40]&nbsp;&nbsp; &lt;hefring&gt; eh oh<br />[05:02:52]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; hi<br />[05:02:52]&nbsp;&nbsp; &lt;hefring&gt; bonjour<br />[05:02:53]&nbsp; &lt;anarcat&gt; hefring freakout<br />[05:02:59] &lt;anarcat&gt; hey omega8cc<br />[05:03:04] &lt;anarcat&gt; alright, who wants to start?<br />[05:03:12] * feizing has joined #aegir<br />[05:03:28]&nbsp; &lt;darthsteven&gt; Who wants to go first?<br />[05:04:09]&nbsp;&nbsp; &lt;anarcat&gt; i can go, i don&#039;t have much to say, i&#039;m afraid<br />[05:04:25] &lt;anarcat&gt; i made a new release of provisionacl that is much more liberal about file permissions<br />[05:04:32]&nbsp;&nbsp;&nbsp; &lt;shrop&gt;&nbsp;&nbsp; hello<br />[05:04:54]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; we recovered from a catastrophic operator failure on our aegir install 2 weeks ago (drush @hostmaster &lt; wrongdb.sql =&gt; lots of fun)<br />[05:05:01]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; hi shrop<br />[05:05:17] &lt;shrop&gt;&nbsp;&nbsp; ergonlogic: hey there :)<br />[05:05:21] &lt;anarcat&gt; which outlined a few bugs in import and that critical SSL bug that was fixed in 1.8 (thanks darthsteven !)<br />[05:05:44]&nbsp;&nbsp; &lt;anarcat&gt; i&#039;m still looking at finding time to do the estimate for subsites support<br />[05:05:53]&nbsp;&nbsp; &lt;anarcat&gt; that&#039;s about it for me i think<br />[05:07:00]&nbsp; &lt;darthsteven&gt; thanks<br />[05:07:26]&nbsp;&nbsp; &lt;darthsteven&gt; my irc connection is not so great, so I&#039;ll go next<br />[05:08:25]&nbsp; &lt;darthsteven&gt; I got 6.x-2.x working with Drush 5<br />[05:08:39]&nbsp;&nbsp; &lt;darthsteven&gt; which was reasonably easy<br />[05:08:54]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; but, there are a couple of upstream bugs that need fixing in Drush first<br />[05:09:09] &lt;darthsteven&gt; <a href="http://drupal.org/node/1554092" title="http://drupal.org/node/1554092">http://drupal.org/node/1554092</a> is particularly nasty for us<br />[05:09:10]&nbsp; &lt;hefring&gt; <a href="http://drupal.org/node/1554092" title="http://drupal.org/node/1554092">http://drupal.org/node/1554092</a> =&gt; drush_invoke_process uses 100% CPU =&gt; Drush, Base system (internal API), critical, needs review, 2 comments, 2 IRC mentions<br />[05:09:24]&nbsp; &lt;anarcat&gt; wtf<br />[05:09:44]&nbsp; &lt;darthsteven&gt; not sure how Drush 5 was released with that issue, but there we go<br />[05:10:05]&nbsp;&nbsp; &lt;darthsteven&gt; hopefully that&#039;ll get fixed soon, I&#039;ve posted a patch<br />[05:10:16]&nbsp; * feizingDROID has joined #aegir<br />[05:10:16] &lt;darthsteven&gt; I pushed a few other fixes in 6.x-1.x<br />[05:10:41]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; including my fix for seg-faults/infinite loops when using contexts<br />[05:10:58]&nbsp;&nbsp; &lt;darthsteven&gt; hopefully ergonlogic will tell me that it fixed his issue earlier<br />[05:11:04]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; that&#039;s it from me!<br />[05:11:12]&nbsp; &lt;anarcat&gt; niiice<br />[05:11:28]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; darthsteven: well, it gave a more useful error message, but in the end it was a case of PEBKAC<br />[05:11:29]&nbsp;&nbsp; &lt;anarcat&gt; you could mention you singlehandedly released yet another awesome aegir release? :)<br />[05:11:46]&nbsp; &lt;anarcat&gt; ergonlogic: most of those are PEBKAC, the idea is exactly to give a useful error message :)<br />[05:11:56]&nbsp; &lt;darthsteven&gt; anarcat: wasn&#039;t that the week before :)<br />[05:12:01] &lt;ergonlogic&gt;&nbsp; then the patch worked worderfully!<br />[05:12:03]&nbsp;&nbsp; * anarcat out of it ;)<br />[05:12:05]&nbsp;&nbsp; &lt;darthsteven&gt; ergonlogic: can we chat afterward?<br />[05:12:14]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; darthsteven: of course<br />[05:12:16]&nbsp;&nbsp; &lt;darthsteven&gt; next!<br />[05:12:19]&nbsp;&nbsp;&nbsp; &lt;darthsteven&gt; ergonlogic?<br />[05:12:25]&nbsp; &lt;ergonlogic&gt;&nbsp; ok<br />[05:12:37]&nbsp;&nbsp; * David_Hernandez has quit (Quit: Saliendo)<br />[05:12:47]&nbsp; &lt;ergonlogic&gt;&nbsp; well, I updated api.aegirproject.org today with the new branches and such<br />[05:12:55]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; thanks for the poke darthsteven<br />[05:13:05]&nbsp; &lt;ergonlogic&gt;&nbsp; I&#039;d been meaning to do that for awhile<br />[05:13:40]&nbsp; &lt;ergonlogic&gt;&nbsp; otherwise falling a little too deep doe the rabbit hole of Drush development<br />[05:14:16] &lt;anarcat&gt; oh boy :)<br />[05:14:19]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; I&#039;d love to see provision&#039;s context stuff split off into it&#039;s own extension<br />[05:14:31]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; as I&#039;m rolling my own aliases fro drush-vagrant<br />[05:14:55] &lt;ergonlogic&gt;&nbsp; and I tried to grok how to add a new context type<br />[05:15:05]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; but well, I couldn&#039;t<br />[05:15:25]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; and a dependency on provision seemed a little steep<br />[05:15:42]&nbsp; &lt;ergonlogic&gt;&nbsp; anyway, that&#039;s most of it for me<br />[05:16:01]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; oh, I also noticed that there isn;t a drush 5 git branch<br />[05:16:17] &lt;ergonlogic&gt;&nbsp; everything is going into master<br />[05:17:02]&nbsp; &lt;anarcat&gt; i am not sure that drush 6 devel has started<br />[05:17:08] &lt;darthsteven&gt; ergonlogic: did you moshe&#039;s response: http://drupal.org/node/1554762<br />[05:17:09]&nbsp;&nbsp;&nbsp; &lt;hefring&gt; <a href="http://drupal.org/node/1554762" title="http://drupal.org/node/1554762">http://drupal.org/node/1554762</a> =&gt; Clarify git branches =&gt; Drush, Miscellaneous, normal, fixed, 2 comments, 1 IRC mention<br />[05:17:31]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; just saw it now<br />[05:17:42]&nbsp; &lt;anarcat&gt; wtf<br />[05:17:53]&nbsp; &lt;anarcat&gt; how can the releases be any different if they are on the same branch?<br />[05:18:48]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; everything goes into drush 5 until they have to break the API?<br />[05:18:54]&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; hmm, ok<br />[05:19:45]&nbsp; &lt;anarcat&gt; alright<br />[05:19:47]&nbsp; &lt;anarcat&gt; you done ergonlogic ?<br />[05:19:50]&nbsp;&nbsp;&nbsp; &lt;ergonlogic&gt;&nbsp; yep<br />[05:19:52]&nbsp; &lt;anarcat&gt; omega8cc: you next?<br />[05:20:05]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; I have fixed a few issues in the Nginx config and made it compatible with 1.1.8 and later, so also 1.2.0, on the fly<br />[05:20:12] &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; Also, I have discovered this new critical, which caused enough wtf issues (broken configs) on hostmaster upgrade for Nginx users in the past: http://drupal.org/node/1552430<br />[05:20:13] &lt;hefring&gt; <a href="http://drupal.org/node/1552430" title="http://drupal.org/node/1552430">http://drupal.org/node/1552430</a> =&gt; Hostmaster upgrade/migrate doesn&#039;t update @server_master drush alias and web server config files =&gt; Provision, Code, critical, needs review, 8 comments, 1 IRC mention<br />[05:20:22]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; And that&#039;s it from me, today.<br />[05:20:49]&nbsp;&nbsp; &lt;anarcat&gt; mind if i prod you for the debian package? :)<br />[05:21:01]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; where is the development happening?<br />[05:21:15]&nbsp; &lt;anarcat&gt; also, i have given you autoop here, since well, you are core now :)<br />[05:21:19]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; hah, still in the works<br />[05:21:24]&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; ah<br />[05:21:30]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; thanks :)<br />[05:21:59]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; and &quot;still in the works&quot; means no progress, in this case :/<br />[05:22:04]&nbsp;&nbsp;&nbsp; * simg has left #aegir ()<br />[05:22:06]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; alright<br />[05:22:23]&nbsp; &lt;anarcat&gt; well, if you would push your work somewhere, people could jump in and give a hand...<br />[05:22:35] &lt;anarcat&gt; i&#039;d certainly be curious to see the work<br />[05:22:36]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; sure, will doo<br />[05:23:01]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; this week, promise :)<br />[05:23:16]&nbsp;&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; we also need this, finally<br />[05:23:33]&nbsp;&nbsp; &lt;omega8cc&gt;&nbsp;&nbsp;&nbsp; so chances are it will happen<br />[05:24:04]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; awesome<br />[05:24:12]&nbsp; &lt;anarcat&gt; darthsteven: i commented on that loop bug<br />[05:24:26]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; i think that is all for our scrum<br />[05:24:37]&nbsp;&nbsp;&nbsp; &lt;anarcat&gt; unless there are other additions, i think we&#039;ll wrap it up here<br />[05:24:50] * feizingDROID has quit (Quit: Bye)<br />[05:25:27]&nbsp; &lt;darthsteven&gt; that is all</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-139.html?destination=node%2F1415%23comment-form">Login</a> or <a href="../../../../../user/register/index-139.html?destination=node%2F1415%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-139.html?destination=node%2F1415%23comment-form">Login</a> or <a href="../../../../../user/register/index-139.html?destination=node%2F1415%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1452" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-05-10/index.html">Weekly Scrum IRC Log: 2012-05-10</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>

20:01 &lt;@mig5&gt; scrum time!
20:02 &lt;@mig5&gt; darthsteven: anarcat: ergonlogic
20:02 &lt;@darthsteven&gt; Hello!
20:02 &lt; hefring&gt; salut
20:03 &lt;@mig5&gt; i've recently started using the pack feature, as a very large client of mine will probably use it soon, so i decided to eat the dogfood and transitioned my own infrastructure onto a 5-server high-availability environment :)
20:03 &lt;@mig5&gt; my main issue has been <a href="http://drupal.org/node/1555398" title="http://drupal.org/node/1555398">http://drupal.org/node/1555398</a>
20:03 &lt; hefring&gt; <a href="http://drupal.org/node/1555398" title="http://drupal.org/node/1555398">http://drupal.org/node/1555398</a> =&gt; MySQL GRANTs aren't given for multiple servers in Web Pack =&gt; Hostmaster (Aegir), Code, normal, active, 18 comments, 1 IRC mention
20:03 &lt;@mig5&gt; we have some funny corner cases with mysql grants
20:03 &lt;@mig5&gt; not actually limited to pack module, but to a case where a webserver might have multiple ip addresses in the same LAN assigned to it
20:03 &lt;@mig5&gt; and mysql might pick the wrong *source* IP to make the mysql connection attempt in order to fetch those to use for grants
20:04 &lt;@mig5&gt; i've worked around it in my case there. but anyway that's basically all i'm thinking about at the moment
20:07 &lt;@mig5&gt; darthsteven: can we catch up after the scrum?
20:07 &lt;@mig5&gt; presuming the scrum isn't done already :)
20:07 &lt;@darthsteven&gt; (we can)
20:08 &lt;@darthsteven&gt; that's great
20:08 &lt;@darthsteven&gt; I saw lots of comments on that issue :)
20:08 &lt;@darthsteven&gt; shall I go next?
20:08 &lt;@mig5&gt; yeah i got a bit carried away - but it was really hard to find *what* was the problem
20:08 &lt;@mig5&gt; sure
20:09 &lt;@darthsteven&gt; didn't really do too much this week
20:09 &lt;@darthsteven&gt; got a fix for the Drush invoke issue in Drush 5 in: <a href="http://drupal.org/node/1554092" title="http://drupal.org/node/1554092">http://drupal.org/node/1554092</a>
20:09 &lt; hefring&gt; <a href="http://drupal.org/node/1554092" title="http://drupal.org/node/1554092">http://drupal.org/node/1554092</a> =&gt; drush_invoke_process uses 100% CPU =&gt; Drush, Base system (internal API), critical, fixed, 13 comments, 3 IRC mentions
20:10 &lt;@darthsteven&gt; and working with the Drush peeps to get <a href="http://drupal.org/node/1550574" title="http://drupal.org/node/1550574">http://drupal.org/node/1550574</a> sorted too
20:10 &lt; hefring&gt; <a href="http://drupal.org/node/1550574" title="http://drupal.org/node/1550574">http://drupal.org/node/1550574</a> =&gt; drush_invoke_process doesn't pass through alias =&gt; Drush, Base system (internal API), normal, active, 4 comments, 1 IRC mention
20:11 &lt;@darthsteven&gt; we should be able to support Drush 5 easily when that one is done
20:11 &lt;@darthsteven&gt; at the moment the 6.x-2.x branch has a workaround
20:11 &lt;@darthsteven&gt; but 6.x-2.x still works with Drush 5
20:11 &lt;@darthsteven&gt; that's it from me!
20:11 &lt;@darthsteven&gt; next?
20:11 &lt;@mig5&gt; nice!
20:12 &lt;@mig5&gt; i suspect that'll be it, it's only 6:12am in montreal
20:12 &lt;@mig5&gt; i'll wait a few min
20:20 &lt;@mig5&gt; ok i think that's it
20:20 &lt;@mig5&gt; thanks
20:22 &lt;@darthsteven&gt; thank you too
</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-140.html?destination=node%2F1452%23comment-form">Login</a> or <a href="../../../../../user/register/index-140.html?destination=node%2F1452%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-140.html?destination=node%2F1452%23comment-form">Login</a> or <a href="../../../../../user/register/index-140.html?destination=node%2F1452%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1524" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/scrums/weekly-scrum-irc-log-2012-05-28/index.html">Weekly Scrum IRC Log: 2012-05-28</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_7 first"><a href="../../../../../taxonomy/term/7/index.html" rel="tag" title="">scrum</a></li>
<li class="taxonomy_term_6 last"><a href="../../../../../taxonomy/term/6/index.html" rel="tag" title="">weekly scrums</a></li>
</ul></div><pre>
[05:02:37]  &lt;@darthsteven&gt;  anarcat, mig5, omega8cc, EclipseGc, mvc, sfyn, shrop, skwashd: scrum?
[05:02:43]  &lt;@anarcat&gt;  yay
[05:03:49]  &lt;@darthsteven&gt;  shall I go first?
[05:03:55]  &lt;@darthsteven&gt;  I've done not a lot
[05:03:58]  &lt;@shrop&gt;    Not at my computer, but will watch from mobile. Cheers!
[05:04:09]  &lt;@darthsteven&gt;  released 1.9 a little while ago
[05:04:23]  &lt;@anarcat&gt;  upgrade went through like a breeze here
[05:04:24]  &lt;@darthsteven&gt;  that's it from me!
[05:04:30]  &lt;@anarcat&gt;  alright
[05:04:31]  &lt;@darthsteven&gt;  next!
[05:04:43]  &lt;@anarcat&gt;  well, for me, thanks to omega8cc's grant, i have been able to free up more time for the project
[05:04:53]  &lt;@anarcat&gt;  my first focus was on urgent drush security issues
[05:05:07]  &lt;@anarcat&gt;  <a href="http://drupal.org/node/671906" title="http://drupal.org/node/671906">http://drupal.org/node/671906</a>
[05:05:09]  &lt;@hefring&gt;  <a href="http://drupal.org/node/671906" title="http://drupal.org/node/671906">http://drupal.org/node/671906</a> =&gt; mysql credentials leak in drush sqlc =&gt; Drush, PM (dl, en, up ...), critical, needs review, 44 comments, 3 IRC mentions
[05:05:33]  &lt;@anarcat&gt;  this is mostly fixed, but i have found deep issues in the sql code and other credentials leaks that are not yet fixd
[05:05:44]  &lt;@anarcat&gt;  my progress can be followed here: <a href="http://drupal.org/user/1274/track" title="http://drupal.org/user/1274/track">http://drupal.org/user/1274/track</a>
[05:06:01]  &lt;@anarcat&gt;  and here: <a href="http://drupal.org/user/1274/track/code" title="http://drupal.org/user/1274/track/code">http://drupal.org/user/1274/track/code</a>
[05:06:32]  &lt;@anarcat&gt;  which reminds me: i have started work on a pretty dumb merge script for apache log files
[05:06:35]  &lt;@anarcat&gt;  <a href="http://drupal.org/project/provision-mergelog" title="http://drupal.org/project/provision-mergelog">http://drupal.org/project/provision-mergelog</a>
[05:06:51]  &lt;@anarcat&gt;  it is designed to suck apache logs from remote servers into a single file that can then be parsed by logfile analysis software
[05:07:11]  &lt;@anarcat&gt;  i have done some tests with awstats, and it works well, considering awstats haven't been updated in 3 years
[05:07:17]  &lt;@anarcat&gt;  btw, piwik sucks for that
[05:07:21]  &lt;@darthsteven&gt;  cool!
[05:07:31]  &lt;@anarcat&gt;  while it *can* process those logfiles, it's not reliable at all and makes *ONE HIT PER LINE* on the webserver
[05:07:42]  &lt;@anarcat&gt;  which is a lot of fun if the piwik site is in the logfile itself :P
[05:08:03]  &lt;@anarcat&gt;  i have also dug my head in the SSL code again, and found quite a lot of issues
[05:08:14]  &lt;@anarcat&gt;  found new bugs:
[05:08:15]  &lt;@anarcat&gt;  <a href="http://drupal.org/node/1603722" title="http://drupal.org/node/1603722">http://drupal.org/node/1603722</a>
[05:08:15]  &lt;@hefring&gt;  <a href="http://drupal.org/node/1603722" title="http://drupal.org/node/1603722">http://drupal.org/node/1603722</a> =&gt; deleting a site doesn't delete its SSL certificate =&gt; Hostmaster (Aegir), Code, normal, needs work, 2 comments, 1 IRC mention
[05:08:32]  &lt;@anarcat&gt;  and updated the existing one: <a href="http://drupal.org/node/1126640" title="http://drupal.org/node/1126640">http://drupal.org/node/1126640</a>
[05:08:33]  &lt;@hefring&gt;  <a href="http://drupal.org/node/1126640" title="http://drupal.org/node/1126640">http://drupal.org/node/1126640</a> =&gt; move the SSL IP allocation to the frontend =&gt; Hostmaster (Aegir), Code, normal, needs work, 20 comments, 1 IRC mention
[05:08:40]  &lt;@anarcat&gt;  but we need to redo the SSL code, it's quite crappy right now
[05:08:52]  &lt;@anarcat&gt;  i am not sure we want to ditch IP management, as SNI doesn't seem quite mature enough yet
[05:08:59]  &lt;@anarcat&gt;  so i'd like to support both SNI and non-SNI setups
[05:09:19]  &lt;@anarcat&gt;  alright what else have i done
[05:09:40]  &lt;@anarcat&gt;  well, i guess all is left is what next:
[05:09:51]  &lt;@anarcat&gt;  i will work on improving migrate performance
[05:10:09]  &lt;@anarcat&gt;  <a href="https://drupal.org/node/1484214" title="https://drupal.org/node/1484214">https://drupal.org/node/1484214</a>
[05:10:19]  &lt;@anarcat&gt;  i will attack <a href="https://drupal.org/node/1205458" title="https://drupal.org/node/1205458">https://drupal.org/node/1205458</a> shortly
[05:10:24]  &lt;@anarcat&gt;  and i'm looking for advice on how to do that
[05:10:32]  &lt;@anarcat&gt;  should files reside in the clients directory?
[05:11:00]  &lt;@anarcat&gt;  anyways, that's about it for me
[05:11:14]  &lt;@anarcat&gt;  i am going for a trip in sao paulo brasil between june 5th and 18th
[05:11:26]  &lt;@anarcat&gt;  if people want to hookup or organize a little aegir meetup there, that could be fun and useful
[05:11:32]  &lt;@anarcat&gt;  next up?
[05:12:35]  &lt;@anarcat&gt;  that was quite a monologue
[05:12:52]  &lt;@darthsteven&gt;  (all good stuff though)
[05:13:52]  &lt;@darthsteven&gt;  anyone else?
[05:14:20]  &lt;@omega8cc&gt; not much from me to report, other that we have now nice ssd machine for project testing etc
[05:15:12]  &lt;@darthsteven&gt;  indeed, thanks very much for that!
[05:15:30]  &lt;@anarcat&gt;  cool
[05:15:35]  &lt;@anarcat&gt;  who's following up on that setup?
[05:15:59]  &lt;@darthsteven&gt;  I am
[05:16:07]  &lt;@anarcat&gt;  alright
[05:16:09]  &lt;@anarcat&gt;  that's awesome
[05:16:18]  &lt;@anarcat&gt;  i noticed that ergonlogic posted something about vagrant
[05:16:21]  &lt;@darthsteven&gt;  should be able to get it sorted this week or next
[05:16:25]  &lt;@anarcat&gt;  he showed me his work, it's pretty good
[05:16:26]  &lt;@omega8cc&gt; ah, I have added r1soft backups there, just in case
[05:16:40]  &lt;@darthsteven&gt;  I'm trying to 'do it right' and set it all up using puppet
[05:18:10]  &lt;@anarcat&gt;  that's awesome
[05:19:32]  &lt;@darthsteven&gt;  we'll call that a scrum there
[05:19:34]  &lt;@darthsteven&gt;  oh
[05:20:11]  &lt;@darthsteven&gt;  actually, Drush 5 got itself a bit more sorted, and so Aegir could probably be released for Drush 5 now, if we wanted, but we'll have a better release if we wait a bit
[05:20:25]  &lt;@darthsteven&gt;  but we'll call it a scrum now.

</pre>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-141.html?destination=node%2F1524%23comment-form">Login</a> or <a href="../../../../../user/register/index-141.html?destination=node%2F1524%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-141.html?destination=node%2F1524%23comment-form">Login</a> or <a href="../../../../../user/register/index-141.html?destination=node%2F1524%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1755" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../roadmap/3/index.html">3.0 roadmap</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>We do not commit to doing <em>all</em> of this for 3.0, this is mostly a wishlist of what people expressed were priorities for them during the brainstorm. If people want things to move forward, they will need to submit patches or create feature branches, basically lead development on the feature you want. This page can be used to coordinate overall leadership of those issues, while pointing to the Drupal.org issue queues for the specifics.</p>

<p>This roadmap supersedes the previous <a href="../../../../../roadmap/2/index.html">2.0 roadmap</a>.</p>

<p>We'll start bumping items from the 2.0 roadmap over here...</p>

<ol>
<li>Drupal 7 ( or 8) port of the frontend</li>
</ol>

<h1>Port frontend to Drupal 7</h1>

<p>We were originally planning to release 1.0 with Drupal 7 support to make sure it was a "long term support" release, but this has changed - we hope to keep the release cycle short and therefore Drupal 7 was pushed back to 2.0. But it is still a target to make sure we a reliable release that will be supported for a long time.</p>

<p>Drupal 7 also introduces the concept of entities which could be very useful to lighten our many content types in the frontend. It could also be useful for DNS support as zonefiles could be modeled directly as entities.</p>

<p>This concerns of course only the port of the frontend (hostmaster.profile, eldir.theme and hosting.module), the backend already supports d7 installs and upgrades. The issue to followup is <a href="https://drupal.org/node/1261030">#1261030</a>.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-142.html?destination=node%2F1755%23comment-form">Login</a> or <a href="../../../../../user/register/index-142.html?destination=node%2F1755%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-142.html?destination=node%2F1755%23comment-form">Login</a> or <a href="../../../../../user/register/index-142.html?destination=node%2F1755%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-553" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../maintainers/index.html">Aegir core team</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir maintainers are committers that have access to the code. They are responsible for specific parts of the project and are general go-to people for various things.</p>

<ul>
<li><a href="https://drupal.org/u/cweagans">cweagans</a> - maintainer of a number of contrib modules, and contributor to several more, as well as patches to Aegir core.</li>
<li><a href="https://drupal.org/user/368613">ergonlogic</a> - Aegir Project Leader, release engineering, continuous integration testing, community site webmaster, documentation, general bugfixing, <a href="http://drupal.org/project/uc_hosting">ubercart integration</a> co-maintainer, SaaS contrib components</li>
<li><a href="https://drupal.org/user/449000">helmo</a> - hairy bugfixes and generally great contributions in the queue, maintainer for several contrib components.</li>
<li><a href="https://drupal.org/user/17028">Jon Pugh</a> - maintainer of devshop hosting/provision, provision_git, and tons of other contrib modules, submitter of many good patches</li>
<li><a href="http://drupal.org/user/539502">omega8cc</a> - nginx support <a href="http://drupal.org/sandbox/omega8cc/1111100">Provision Sandbox</a>, <a href="http://drupal.org/project/barracuda">Barracuda Project</a></li>
</ul>

<h2>Emeritus members</h2>

<p>These members have decided to take a less active role in the project. However, out of respect for them, and all their previous efforts for the Aegir Project (and the hope that they'll become more active again ;), they continue to have commit access.</p>

<ul>
<li><a href="http://drupal.org/user/1274">anarcat</a> - debian packaging, crazy late night coding splurges, general goto guy for everything</li>
<li><a href="http://drupal.org/user/153206">mig5</a> - testing, release engineering, migressions and general bugfixing</li>
<li><a href="http://drupal.org/user/99644">Steven Jones</a> - documentation, queueing and contexts stuff, Drupal 7 port, general bugfixing</li>
</ul>

<h2>Other contributors</h2>

<p>Those people have given significant contributions to the project but do not yet have complete commit access.</p>

<ul>
<li><a href="http://drupal.org/user/400944">sfyn</a> - <a href="http://drupal.org/project/uc_hosting">ubercart integration</a>, quota API</li>
<li><a href="https://drupal.org/user/103796">Deciphered</a> - views integration and other patches</li>
<li><a href="https://drupal.org/user/918342">gboudrias</a> - Contributor of a number of contrib modules, kplatforms and patches to Aegir core.</li>
</ul>

<p>Sorry if your name isn't here and you have done significant contributions!! Feel free to add it or contact us if you feel you have been forgotten...</p>

<p>All contributors of Aegir's history can also be found on <a href="http://www.ohloh.net/p/aegirproject/contributors">Ohloh.net's contributors page</a> although that doesn't count patches that were sent in the <a href="http://drupal.org/project/issues?text=&amp;projects=provision%2C+hosting%2C+hostslave%2C+eldir%2C+Hostmaster+%28Aegir%29&amp;status=Open&amp;priorities=All&amp;categories=All">Drupal.org issue queues</a>.</p>

<h2>Past contributors</h2>

<ul>
<li><a href="https://drupal.org/user/1337">vertice</a> - project founder, retired</li>
<li><a href="http://drupal.org/user/1141638">tbosviel</a> - DNS support improvements</li>
<li><a href="http://drupal.org/user/279264">univate</a> - views support and batch operations</li>
<li><a href="http://drupal.org/user/204058">seth.vincent</a> - Google Summer of Code student, working on D7 port and DNS editor. <a href="http://drupal.org/sandbox/seth.vincent/1140244">Sandbox</a></li>
</ul>

<h2>How to join the core team</h2>

<p>If you are interested in joining the core team, you should provide us with valuable patches or contribute to the issue queues significantly. The core team has access to all core git repositories for writing, so you will need to prove that you can provide good quality code through the issue queue. We usually notice such people and welcome them in the team directly, but you should also feel free to ask to join if you feel you are worthy.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-24.html?destination=node%2F553%23comment-form">Login</a> or <a href="../../../../../user/register/index-24.html?destination=node%2F553%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-24.html?destination=node%2F553%23comment-form">Login</a> or <a href="../../../../../user/register/index-24.html?destination=node%2F553%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2897" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/maintainers/aegir-co-maintainer-criteria/index.html">Aegir Co-maintainer Criteria</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The <a href="../../../../../maintainers/index.html">Aegir core team</a> is somewhat selective about inviting co-maintainers. This is largely due to the complexity of the project, and the crucial functionality it plays for many of its users.</p>

<p>Below we detail the responsibilities of co-maintainership (apart from just commit rights to git), as well as what criteria we feel are important for new team members. Co-maintainership involves taking responsibility for the project's overall well-being. This includes:</p>

<ul>
<li>Participation in the community: issue queues, IRC, community site, etc.</li>
<li>Technical involvement: bug-fixing, patch testing, new feature development and roadmap/architecture planning, release engineering, etc.</li>
<li>Maintenance of project infrastructure: debian repos, community and API sites, Jenkins, etc.</li>
<li>Community outreach: presentations and BoFs at Camps and Cons, blogging, screencasts, etc.</li>
</ul>

<p>While this isn't an exhaustive list, nor are all these activities required for membership in the core team. We're looking for new team members with regular, productive activity in one or more of the above domains. This essentially boils down to two criteria:</p>

<ul>
<li>code/patches submissions (quality over quantity) and</li>
<li>demonstrated interest in the project.</li>
</ul>

<p>If you believe that you'd make a good addition to the core team, don't hesitate to contact any of us to discuss it.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-143.html?destination=node%2F2897%23comment-form">Login</a> or <a href="../../../../../user/register/index-143.html?destination=node%2F2897%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-143.html?destination=node%2F2897%23comment-form">Login</a> or <a href="../../../../../user/register/index-143.html?destination=node%2F2897%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2896" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/maintainers/aegir-project-leadership/index.html">Aegir Project Leadership</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>With the recent transfer of leadership, the project's core team has decided to move towards a more democratic model, to ensure clearer structure and smoother transitions in the future. Debian is a shining example of this (in particular, the <a href="https://www.debian.org/devel/leader">DPL</a>), and so we will model our leadership position(s) after them.</p>

<blockquote>
<p>The Aegir Project Leader (APL) is the official representative of the Aegir Project. They have two main functions, one internal and one external.</p>
 
<p>In the external function, the Project Leader represents the Aegir Project to others. This involves giving talks and presentations about Aegir and attending trade shows, as well as building good relationships with other organizations and companies.</p>
 
<p>Internally, the Project Leader manages the project and defines its vision. They should talk to other Aegir developers, especially to active contributors to Aegir core, to see how they can assist their work. A main task of the Project Leader therefore involves coordination and communication.</p>
</blockquote>

<p>Obviously, we're a much smaller project than Debian, and so we're adopting a pretty minimalist organizational structure. That said, Debian has many other structures in place to ensure the ongoing health of a large community driven project. As the Aegir Project grows, we can appropriate additional tools to overcome any new challenges that arise.</p>

<p>Finally, the responsibilities inherent in the APL role are not exclusive to it. That is, just because it is the Project Leader's job to give presentations and coordinate our efforts, other community members should not hesitate to continue doing so themselves.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-144.html?destination=node%2F2896%23comment-form">Login</a> or <a href="../../../../../user/register/index-144.html?destination=node%2F2896%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-144.html?destination=node%2F2896%23comment-form">Login</a> or <a href="../../../../../user/register/index-144.html?destination=node%2F2896%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2506" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/maintainers/how-welcome-someone-core-team/index.html">How to welcome someone to the core team</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Once someone is deemed worthy of joining the core team, you (a core member) should make a proposal on the core mailing list to welcome the new developer. Subject should clearly state the proposal and give ample time for other developers to chime in. Usually all core team members should give their explicit approval as we try to reach consensus (and usually do) over proposals.</p>

<p>Once the member is approved on the mailing list, you should follow this checklist:</p>

<ul>
<li>give membership on the <a href="http://lists.aegirproject.org/cgi-bin/mailman/listinfo/core-lists.aegirproject.org">mailing list</a></li>
<li>grant commit access to the core repositories (<a href="https://drupal.org/node/195997/maintainers">Hostmaster</a>, <a href="https://drupal.org/node/196008/maintainers">Hosting</a>, <a href="https://drupal.org/node/196005/maintainers">Provision</a> and <a href="https://drupal.org/node/452774/maintainers">Eldir</a>)</li>
<li>grant jenkins access (simply <a href="http://ci.aegirproject.org/securityRealm/addUser">create a user</a> then go to the <a href="http://ci.aegirproject.org/configure">configuration page</a> to give him the same access as others - consider also <a href="https://drupal.org/project/vagrant_scripts_aegir">Vagrant scripts</a> used in Jenkins and maybe the <a href="https://drupal.org/sandbox/darthsteven/1286014">Aegir Jenkins scripts</a></li>
<li>grant operator status on the IRC channel (<code>/msg ChanServ flags #aegir user +*</code>) - <code>user</code> needs to be registered by the member first</li>
<li>grant admin access to the <a href="../../../../../index.html">community site</a></li>
<li>add the person to the <a href="../../../../../maintainers/index.html">core team</a> page</li>
<li>send a nice welcome email to the new member and CC the mailing list</li>
<li>optionnally: announce the great news in the next release</li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-145.html?destination=node%2F2506%23comment-form">Login</a> or <a href="../../../../../user/register/index-145.html?destination=node%2F2506%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-145.html?destination=node%2F2506%23comment-form">Login</a> or <a href="../../../../../user/register/index-145.html?destination=node%2F2506%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-929" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../development-news/index.html">Development news</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>There's an aggregated feed of all commits to the stable branches of Aegir available through yahoo pipes:</p>

<p><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=05014cd510f5bececc20212b20843117" title="http://pipes.yahoo.com/pipes/pipe.info?_id=05014cd510f5bececc20212b20843117">http://pipes.yahoo.com/pipes/pipe.info?_id=05014cd510f5bececc20212b20843117</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-146.html?destination=node%2F929%23comment-form">Login</a> or <a href="../../../../../user/register/index-146.html?destination=node%2F929%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-146.html?destination=node%2F929%23comment-form">Login</a> or <a href="../../../../../user/register/index-146.html?destination=node%2F929%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1307" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/office-hours/index.html">Office hours</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Starting from April 2012, we will be holding 'office hours' twice weekly, these are opportunities when people knowledgeable about Aegir will be around to support the community.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc22">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#When"><span class="toc-number">1. </span>When</a></li>
	<li class="toc-level-1"><a href="#Where"><span class="toc-number">2. </span>Where</a></li>
	<li class="toc-level-1"><a href="#What"><span class="toc-number">3. </span>What</a></li>
</ol>
</div>
</div>

<h3 id="When">1. When</h3>

<p>Office hours currently take place on:</p>

<ul>
<li><strong>Every Monday at 14h00 - 16h00 UTC</strong> <a href="http://www.worldtimeserver.com/convert_time_in_UTC.aspx?y=2012&amp;mo=4&amp;d=16&amp;h=14&amp;mn=0">(Convert this to my timezone)</a></li>
<li><strong>Every Thursday at 08h00 - 10h00 UTC</strong> <a href="http://www.worldtimeserver.com/convert_time_in_UTC.aspx?y=2012&amp;mo=4&amp;d=19&amp;h=8&amp;mn=0">(Convert this to my timezone)</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Where">2. Where</h3>

<p>These occur via IRC on the #aegir channel, you can read about how to get on IRC on the <a href="http://drupal.org/irc/setting-up">Drupal.org IRC page</a>. You don't need to install an IRC client on your machine to join, you can chat through your web browser.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="What">3. What</h3>

<p>We can discuss anything Aegir related, but ideally we'd use this time primarily for the following:</p>

<ol>
<li>Helping others to contribute to the Aegir project.</li>
<li>Fixing bugs in the Aegir project.</li>
<li>Adding and clarifying documentation.</li>
</ol>

<p>If you want to just pop along and be assigned something to do, just announce in the #aegir channel that you'd like to partake in office hours, and we'll take it from there!</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-147.html?destination=node%2F1307%23comment-form">Login</a> or <a href="../../../../../user/register/index-147.html?destination=node%2F1307%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-147.html?destination=node%2F1307%23comment-form">Login</a> or <a href="../../../../../user/register/index-147.html?destination=node%2F1307%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-66" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../release-notes/index.html">Release Notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Archive of release notes and changelogs</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-148.html?destination=node%2F66%23comment-form">Login</a> or <a href="../../../../../user/register/index-148.html?destination=node%2F66%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-148.html?destination=node%2F66%23comment-form">Login</a> or <a href="../../../../../user/register/index-148.html?destination=node%2F66%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-13170" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../3/index.html">3.0 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is very pleased to announce the official release of Aegir 3.0. This release ships with significant stability improvements, Drush 6 and 7 support, improved SSL, subdirectory multisite and nginx support and much, much more!</p>

<p>This release marks the deprecation of the 2.x branch. We will continue to provide security releases through the end of 2015. All Aegir users are strongly encouraged to upgrade to the 3.0 release. The upgrade has been thoroughly tested and has worked reliably for us.</p>

<p>Upgrading from Aegir 2.x moves Aegir from a Drupal 6 platform to a Drupal 7 one. The Debian package will migrate the front-end for you. While we have tested this with Aegir core, we strongly recommend disabling any contributed modules you may be running.</p>

<p>We have a very dynamic community of contrib developers, and various projects built atop Aegir. So if you were waiting for Aegir 3 to be stable, easy to install and production-ready, now is the time. The 3.x branch will be well supported as a lot of shops are running it in production already.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc23">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Major_changes"><span class="toc-number">1. </span>Major changes</a></li>
	<li class="toc-level-1"><a href="#Major_API_changes"><span class="toc-number">2. </span>Major API changes</a></li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">3. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">4. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Features_and_improvements"><span class="toc-number">5. </span>Features and improvements</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">6. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Major_changes">1. Major changes</h2>

<p>The front-end has been ported to Drupal 7. We've also raised the minimum Drush version to 6.x, and the Debian package now installs Drush via Composer. Drush 7 is also supported.</p>

<p>We've added several "Golden contrib" modules to the distribution:</p>

<ul>
<li>Hosting Remote Import</li>
<li>Hosting Site Backup Manager</li>
<li>Hosting Git</li>
<li>Hosting Tasks Extra</li>
</ul>

<p>We're planning to add additional well-supported contrib modules over the course of the Aegir 3.x lifecycle. Along similar lines, we've removed hosting_platform_pathauto, as it's built-in now.</p>

<p>We've introduced initial Drupal 8 support, though this is still a work-in-progress. This mostly depends on Drupal 8 and Drush 8 stabilizing, before we'll be able to more fully manage Drupal 8 sites.</p>

<p>Aegir 3 now supports SNI for SSL.</p>

<p>A number of significant bug fixes and stability improvements have been incorporated. Among them, we've added locking in our task queue, and improved backup reliability significantly.</p>

<p>For more information, please see the slidedeck from the presentation by ergonlogic and helmo at the Aegir Summit: <a href="../../../../../sites/community.aegirproject.org/files/aegir_core_and_contrib_-_nyc_summit_0/index.pdf" title="http://community.aegirproject.org/sites/community.aegirproject.org/files/aegir_core_and_contrib_-_nyc_summit_0.pdf">http://community.aegirproject.org/sites/community.aegirproject.org/files...</a></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Major_API_changes">2. Major API changes</h2>

<p>The API has not significantly changed, though there are a few additions. See the current API docs in the various repositories for additional details.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_and_upgrading">3. Installing and upgrading</h2>

<p>The canonical source of installation documentation is</p>

<p><a href="http://docs.aegirproject.org/en/latest/install/install/" title="http://docs.aegirproject.org/en/latest/install/install/">http://docs.aegirproject.org/en/latest/install/install/</a></p>

<p>We're in the process of converting our docs, the old version is on  <a href="../../../../../installing/index.html" title="http://community.aegirproject.org/installing">http://community.aegirproject.org/installing</a> We're tracking the conversion on <a href="https://www.drupal.org/node/2534734" title="https://www.drupal.org/node/2534734">https://www.drupal.org/node/2534734</a></p>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>Note that you should upgrade to the latest 2.x release (currently: <a href="../../../../../2/index.html">2.4</a>) before attempting the upgrade to 3.x..</p>

<p>It is still imperative that you read the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">4. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features_and_improvements">5. Features and improvements</h2>

<p>In addition to the "major changes" mentioned above, the following should also be noted.</p>

<p>Changes since 7.x-3.0-rc1:</p>

<ul>
  <li><a href="../../../../2494121/index.html">#2494121</a>: Stop servers in clusters from sync'ing back to master.</li>
  <li>Make the upgrade script slightly more verbose</li>
  <li><a href="../../../../2377819/index.html">#2377819</a>: Gzipping backups suppresses file permissions errors</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">6. Known issues</h2>

<ul>
<li>Drupal 8 support is (Chasing HEAD) not complete. You would need Drush 8 for that.</li>
<li>Drush master has an issue on Debian Wheezy (<a href="https://www.drupal.org/node/2491941" title="https://www.drupal.org/node/2491941">https://www.drupal.org/node/2491941</a>)</li>
<li>When upgrading from 6.x-2.x enable the betterlogin module manually.</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-15.html?destination=node%2F13170%23comment-form">Login</a> or <a href="../../../../../user/register/index-15.html?destination=node%2F13170%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-15.html?destination=node%2F13170%23comment-form">Login</a> or <a href="../../../../../user/register/index-15.html?destination=node%2F13170%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-13168" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../3/index-2.html">3.0-rc1 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is pleased to announce the first release candidate of the Aegir 3.x branch, after months of development. Development has been sometimes intermittent, but it is not over yet!</p>

<p>This release is tailored to make upcoming changes available to a wider audience than people ready to install from git, but also to make features more widely available and tested.</p>

<p>In the issue queues the central roadmap issue is: <a href="https://drupal.org/node/1261030">#1261030 [meta] Roadmap: Aegir 3.x (D7 port)</a></p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc24">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Major_changes"><span class="toc-number">1. </span>Major changes</a></li>
	<li class="toc-level-1"><a href="#Major_API_changes"><span class="toc-number">2. </span>Major API changes</a></li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">3. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">4. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Features_and_improvements"><span class="toc-number">5. </span>Features and improvements</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">6. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Major_changes">1. Major changes</h2>

<ul>
<li>None, mostly small bugfixes</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Major_API_changes">2. Major API changes</h2>

<p>to be determined.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_and_upgrading">3. Installing and upgrading</h2>

<p>The canonical source of installation documentation is</p>

<p><a href="http://docs.aegirproject.org/en/latest/install.html" title="http://docs.aegirproject.org/en/latest/install.html">http://docs.aegirproject.org/en/latest/install.html</a></p>

<p>We're in the process of converting our docs, the old version is on  <a href="../../../../../installing/index.html" title="http://community.aegirproject.org/installing">http://community.aegirproject.org/installing</a></p>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>Note that you should upgrade to the latest 2.x release (currently: <a href="../../../../../2/index.html">2.4</a>) before attempting the upgrade to 3.x..</p>

<p>It is still imperative that you read the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">4. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features_and_improvements">5. Features and improvements</h2>

<p>In addition to the "major changes" mentioned above, the following should also be noted.</p>

<p>Changes to hostmaster since 7.x-3.0-beta2:</p>

<ul>
  <li><a href="../../../../2522048/index.html">#2522048</a> by <a href="../../../../../u/gboudrias/index.html">gboudrias</a>: VBO security update 3.3</li>
</ul>

<p>Changes to provision since 7.x-3.0-beta2:</p>

<ul>
  <li><a href="../../../../2530904/index.html">#2530904</a> by <a href="../../../../../u/pascalanimateur/index.html">PascalAnimateur</a>: Unknown package version in Drupal 7</li>
  <li><a href="../../../../2530904/index.html">#2530904</a> by <a href="../../../../../u/pascalanimateur/index.html">PascalAnimateur</a>, <a href="../../../../../u/ybabel/index.html">ybabel</a>: Package version always set to Unknown</li>
  <li><a href="../../../../2511772/index.html">#2511772</a> by <a href="../../../../../u/danwonac---nginx/index.html">danwonac - Nginx</a>: Restore support for legacy rewrites non-clean URLs</li>
  <li><a href="../../../../2497091/index.html">#2497091</a> - The replacement string in the third line needs to be literal</li>
  <li>Clarify regex alter function API docs.</li>
  <li>Replace drupal_set_message by drush_log</li>
  <li><a href="../../../../2496417/index.html">#2496417</a>: Drupal 6 and PHP 5.6 (Debian Jessie)</li>
  <li>Match Drush 8</li>
  <li>Set port properly when generating temporary .my.cnf.</li>
</ul>

<p>Changes to hosting since 7.x-3.0-beta2:</p>

<ul>
  <li><a href="../../../../2507089/index.html">#2507089</a> by <a href="../../../../../u/gboudrias/index.html">gboudrias</a>: Dependency on overlay?</li>
  <li><a href="../../../../2446749/index.html">#2446749</a> by <a href="../../../../../u/jon-pugh/index.html">Jon Pugh</a>: Improve hosting task drush hooks and status update</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">6. Known issues</h2>

<ul>
<li>Drupal 8 support is (Chasing HEAD) not complete.</li>
<li>Drush master has an issue on Debian Wheezy (<a href="https://www.drupal.org/node/2491941" title="https://www.drupal.org/node/2491941">https://www.drupal.org/node/2491941</a>)</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-17.html?destination=node%2F13168%23comment-form">Login</a> or <a href="../../../../../user/register/index-17.html?destination=node%2F13168%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-17.html?destination=node%2F13168%23comment-form">Login</a> or <a href="../../../../../user/register/index-17.html?destination=node%2F13168%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-13152" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../3/index-3.html"> 3.0-beta2 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is pleased to announce the forth preview release (<em>beta</em>) of the Aegir 3.x branch, after months of development. Development has been sometimes intermittent, but it is not over yet!</p>

<p>This release is tailored to make upcoming changes available to a wider audience than people ready to install from git, but also to make features more widely available and tested. More beta releases will be published when there are substantial changes.</p>

<p>In the issue queues the central roadmap issue is: <a href="https://drupal.org/node/1261030">#1261030 [meta] Roadmap: Aegir 3.x (D7 port)</a></p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc25">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Major_changes"><span class="toc-number">1. </span>Major changes</a></li>
	<li class="toc-level-1"><a href="#Major_API_changes"><span class="toc-number">2. </span>Major API changes</a></li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">3. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">4. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Features_and_improvements"><span class="toc-number">5. </span>Features and improvements</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">6. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Major_changes">1. Major changes</h2>

<ul>
<li>Fixed a security issue in the protection of the files directory for multi-site.</li>
<li>Improved SSL support</li>
<li>Both Drush stable (6.6.0) and 7.x (the master branch) are supported.</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Major_API_changes">2. Major API changes</h2>

<p>to be determined.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_and_upgrading">3. Installing and upgrading</h2>

<p>The canonical source of installation documentation is</p>

<p><a href="http://docs.aegirproject.org/en/latest/install.html" title="http://docs.aegirproject.org/en/latest/install.html">http://docs.aegirproject.org/en/latest/install.html</a></p>

<p>We're in the process of converting our docs, the old version is on  <a href="../../../../../installing/index.html" title="http://community.aegirproject.org/installing">http://community.aegirproject.org/installing</a></p>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>Note that you should upgrade to the latest 2.x release (currently: <a href="../../../../../2/index.html">2.4</a>) before attempting the upgrade to 3.x..</p>

<p>It is still imperative that you read the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">4. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features_and_improvements">5. Features and improvements</h2>

<p>In addition to the "major changes" mentioned above, the following should also be noted.</p>

<p>Changes ho hostmaster since 7.x-3.0-beta1:</p>

<ul>
  <li>Add hosting_remote_import to the distro.</li>
  <li>Update the views version in our makefile.</li>
  <li>Remove hosting_platform_pathauto, as it's built-in now.</li>
</ul>

<p>Changes to provision since 7.x-3.0-beta1:</p>

<ul>
  <li>Fix protection of files dir for multi-site</li>
  <li><a href="../../../../2036333/index.html">#2036333</a>: Remove CVS deploy code.</li>
  <li>Fix queue lock name.</li>
  <li>Fix syntax error.</li>
  <li>Rework bypassing of task queue lock.</li>
  <li>Fix lock waiting for tests.</li>
  <li>Use Drupal API function for lock waiting.</li>
  <li><a href="../../../../2479345/index.html">#2479345</a>: Wait for a lock on the tasks queue to be available.</li>
  <li><a href="../../../../2479885/index.html">#2479885</a>: Remove anchors and double-escaping from regexes.</li>
  <li><a href="../../../../2479885/index.html">#2479885</a>: Fix mysql filtering regex anchors.</li>
  <li>Add provision-tests-new-run command to start testing D8.</li>
  <li><a href="../../../../2474197/index.html">#2474197</a>: Debian package for aegir3 should depend on curl</li>
  <li><a href="../../../../2475527/index.html">#2475527</a>: Catch additional DB connection failures, and provide more meaningful error messages.</li>
  <li>Generate an SSL certificate for use in the default SSL vhost.</li>
  <li>Add NameVirtualHost for SSL, regardless of IP addresses.</li>
  <li>Merge branch 'dev/mysqldump-error-check' into 7.x-3.x</li>
  <li>Fix up docs.</li>
  <li>Anchor regexes, cleanup docs.</li>
  <li>Split regexes into helper function with alter hook and static caching, and add docs for new hook.</li>
  <li>Clarify docs.</li>
  <li>Split mysqldump filtering into a helper function.</li>
  <li>Dedupe generating descriptors fro proc_open().</li>
  <li>Document new method and fix typos.</li>
  <li>Dedupe temporary mysql config generation.</li>
  <li>Fix up some syntax errors.</li>
  <li>fix comment typo</li>
  <li>handle mysqldump errors again</li>
  <li><a href="../../../../2471805/index.html">#2471805</a>: Add hook_provision_deploy_options_alter() invocations to migrate and restore, and document it in te API.</li>
  <li><a href="../../../../2471805/index.html">#2471805</a>: Add hook to allow injecting options into clone deploy tasks.</li>
  <li>Rename incorrect verify method.</li>
  <li><a href="../../../../2468203/index.html">#2468203</a>: provision-save: default profile from 'default' to 'standard'</li>
  <li>upgrade.sh: move variables to the top</li>
  <li>upgrade.sh: move function definition</li>
  <li>ssue <a href="../../../../2460023/index.html">#2460023</a>: Fix existing symlink problem in Ubuntu/Debian upgrades.</li>
  <li>Cleanup upgrade.sh script</li>
  <li>Rename DRUSH_VERSION variable to separate current and new</li>
  <li>Fix Drush version in upgrade script</li>
</ul>

<p>Changes to hosting since 7.x-3.0-beta1:</p>

<ul>
  <li>escape &lt; and &gt;</li>
  <li>D7 API update</li>
  <li>code style updates</li>
  <li>Form API update</li>
  <li>Allow sites to be installed when SSL is enabled, but no servers provide the SSL service yet.</li>
  <li>Fix typo in table class.</li>
  <li>Redirect to home page after deleting a Hosting object.</li>
  <li>Allow re-use of deleted servers' hostnames.</li>
  <li>Don't block tasks queue when running queue daemon.</li>
  <li>Release locks in other shotdown contexts.</li>
  <li>Move lock acquisition and release outside of main queue daemon loop.</li>
  <li>Fix queue lock name.</li>
  <li><a href="../../../../2479345/index.html">#2479345</a>: Refactor queue locking to use Drupal API.</li>
  <li><a href="../../../../2464949/index.html">#2464949</a>: Avoid needless saving of related nodes on context_import</li>
  <li>Fix codestyle</li>
  <li>Log which task starts processing</li>
  <li>Pass less optionss ... to prevent Unknown option errors.</li>
  <li>Stop overwriting node titles when importing context data.</li>
  <li>Fix platform migrate confirmation form status.</li>
  <li><a href="../../../../2479001/index.html">#2479001</a> by <a href="../../../../../u/mwisner/index.html">mwisner</a>: Fix platform migrate task form does not rebuild correctly</li>
  <li>Fix platform migrate form checks for sites and available target platforms.</li>
  <li>Provide a default platform.</li>
  <li>Allow platform paths to have slashes.</li>
  <li><a href="../../../../2469179/index.html">#2469179</a>: Remove duplicate call to hosting_ssl_filter_key, its in hosting_ssl_nodeapi_site_validate</li>
  <li><a href="../../../../2469179/index.html">#2469179</a>: Improve saving a new SSL key</li>
  <li><a href="../../../../2475455/index.html">#2475455</a>: Document the place for am intermediate certificate.</li>
  <li>Try again to keep warning/error jump links within overlay.</li>
  <li>Keep warning/error jump links within overlay.</li>
  <li><a href="../../../../2175619/index.html">#2175619</a>: Add links to first warning or error in task log.</li>
  <li>Fix check for a platform's path already existing.</li>
  <li><a href="../../../../2474801/index.html">#2474801</a>: Fix task cancellation.</li>
  <li>Syntax fix.</li>
  <li>Add global option to always, never or prompt to delete site backups.</li>
  <li><a href="../../../../1397798/index.html">#1397798</a> by <a href="../../../../../u/chertzog/index.html">chertzog</a>, <a href="../../../../../u/dane-powell/index.html">Dane Powell</a>, <a href="../../../../../u/et.-al/index.html">et. al.</a>: Optionally delete site backups when a site is deleted.</li>
  <li><a href="../../../../2471094/index.html">#2471094</a>: Update the site node with the database name after imports.</li>
  <li>Import site by calling the relevant function directly instead of invoking a sub-process, etc.</li>
  <li>Revert "properly import db_name after site import"</li>
  <li>Merge branch 'dev/hosting-import-dbname' into 7.x-3.x</li>
  <li>partly revert e3bb221: properly save drush output</li>
  <li>properly import db_name after site import</li>
  <li>code cleanup</li>
  <li>Improve ssl description</li>
  <li><a href="../../../../2453807/index.html">#2453807</a>: Convert clients list block to views</li>
  <li>Merge backend output.</li>
  <li><a href="../../../../2470297/index.html">#2470297</a>: Run 'hosting-import' after 'provision-import' on 'import' tasks.</li>
  <li>Revert portion of last commit, included by mistake. It will be part of the nest commit.</li>
  <li>Show backend output that was being lost.</li>
  <li><a href="../../../../2470297/index.html">#2470297</a>: Stop overwriting context prior to import.</li>
  <li>Set platform path automatically, based on title.</li>
  <li>Move site SSL fields into fieldset.</li>
  <li>Merge remote-tracking branch 'origin/dev-sni' into 7.x-3.x</li>
  <li><a href="../../../../2069431/index.html">#2069431</a>: Indicate next steps after enabling the SSL feature.</li>
  <li>Fix backup-delete form validation warnings.</li>
  <li>Fix restore form validation warning.</li>
  <li><a href="../../../../2460937/index.html">#2460937</a>: Fix backup deletion.</li>
  <li>Add some checks to backup delete validation.</li>
  <li>only warn about SNI, do not disable SSL, when IP allocation fails</li>
  <li>do not set IP address if none provided, this should permit SNI, in the frontend at least</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">6. Known issues</h2>

<ul>
<li>Drupal 8 support is (Chasing HEAD) not complete.</li>
<li>Drush master has an issue on Debian Wheezy (<a href="https://www.drupal.org/node/2491941" title="https://www.drupal.org/node/2491941">https://www.drupal.org/node/2491941</a>)</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-149.html?destination=node%2F13152%23comment-form">Login</a> or <a href="../../../../../user/register/index-149.html?destination=node%2F13152%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-149.html?destination=node%2F13152%23comment-form">Login</a> or <a href="../../../../../user/register/index-149.html?destination=node%2F13152%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-13155" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index.html">2.4 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is proud to announce the forth release in the stable 2.x release branch!</p>

<p>This maintenance release ships with a security fix for Apache installations.
Everyone is encouraged to upgrade. Re-verify is required for all sites (Views bulk operations makes this easy)</p>

<p>Also, worth noting is the simultaneous release of our <a href="../../../../../3/index-3.html">second beta for Aegir 3</a>. Debian packages are now being provided for Aegir 3, so trying it out is easier than ever!</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc26">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">3. </span>Known issues</a></li>
	<li class="toc-level-1"><a href="#Features"><span class="toc-number">4. </span>Features</a></li>
	<li class="toc-level-1"><a href="#Bug_fixes"><span class="toc-number">5. </span>Bug fixes</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is at:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections, you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade.</p>

<p><strong>N.B.</strong> <a href="https://www.drupal.org/node/2146977">Issue #2146977: Broken backward compatibility with IP based vhosts</a> may affect those upgrading from 1.x. It appears that running 'verify' tasks on all sites should resolve the issue.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">3. Known issues</h2>

<p>Being really open about our project, we have never hidden the fact that some things, sometimes, do not work in Aegir. Our <a href="http://drupal.org/project/issues?text=&amp;projects=provision%2C%20hosting%2C%20hostslave%2C%20eldir%2C%20Hostmaster%20%28Aegir%29&amp;status=Open&amp;priorities=All&amp;categories=All">issue trackers</a> are public, and we've made it a point of honor not only to document clearly what is wrong in our releases as soon as we find out about it, but also to reroll new releases when we fix it.</p>

<p>That being said, 2.4 still has a number of issues and design flaws. This is the list of <a href="https://drupal.org/project/issues?projects=provision%2C+hosting%2C+hostslave%2C+eldir%2C+Hostmaster+%28Aegir%29&amp;priorities=300">all issues marked "major" in the queue right now</a>. Most issues are now likely to be fixed in the 3.x development branch, and unlikely to be backported unless considered critical.</p>

<p>As mentioned in the previous section, <a href="https://www.drupal.org/node/2146977">Issue #2146977: Broken backward compatibility with IP based vhosts</a> is still listed as a 'critical' issue against the 2.x branch. However, it should only affect those upgrading from 1.x, and has a fairly simple work-around. If you come across this behaviour during your upgrade, please post a comment to the issue, so we can confirm that it still exists.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features">4. Features</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bug_fixes">5. Bug fixes</h2>

<ul>
<li>Just the mentioned security fix</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-150.html?destination=node%2F13155%23comment-form">Login</a> or <a href="../../../../../user/register/index-150.html?destination=node%2F13155%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-150.html?destination=node%2F13155%23comment-form">Login</a> or <a href="../../../../../user/register/index-150.html?destination=node%2F13155%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2876" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index.html">1.12 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is proud to announce the twelfth (and final!) release in the now deprecated 1.x release branch! This release was necessary to cover the new Modalframe security release that made 1.11 uninstallable. Everyone is encouraged to upgrade to the latest 2.x release.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc27">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">3. </span>Known issues</a></li>
	<li class="toc-level-1"><a href="#Features"><span class="toc-number">4. </span>Features</a></li>
	<li class="toc-level-1"><a href="#Security_fixes"><span class="toc-number">5. </span>Security fixes</a></li>
	<li class="toc-level-1"><a href="#Bug_fixes"><span class="toc-number">6. </span>Bug fixes</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">3. Known issues</h2>

<p>The modalframe upgrade broke popups, but the content is visible so it is a minor regression. Upgrade to 2.x to get a real fix.</p>

<p>Otherwise the same as the <a href="../../../../../1/index-19.html">1.11 release</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features">4. Features</h2>

<ul>
<li>Apache 2.4 is now supported in the 1.x branch, see <a href="https://drupal.org/node/2153929">#2153929</a> and <a href="https://drupal.org/node/2155445">#2155445</a> (7 weeks ago)</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Security_fixes">5. Security fixes</h2>

<ul>
<li>modal frame was updated to cover for <a href="https://drupal.org/node/2189751">SA-CONTRIB-2014-012</a> (<a href="https://drupal.org/node/2191827">#2191827</a>)</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bug_fixes">6. Bug fixes</h2>

<ul>
<li>the jQuery download URL was fixed</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-151.html?destination=node%2F2876%23comment-form">Login</a> or <a href="../../../../../user/register/index-151.html?destination=node%2F2876%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-151.html?destination=node%2F2876%23comment-form">Login</a> or <a href="../../../../../user/register/index-151.html?destination=node%2F2876%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-13157" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/release-notes/30-alphas-betas-release-candidates/index.html">3.0 alphas, betas &amp; release candidates</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This section documents all the release candidates towards the 3.0 release.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-152.html?destination=node%2F13157%23comment-form">Login</a> or <a href="../../../../../user/register/index-152.html?destination=node%2F13157%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-152.html?destination=node%2F13157%23comment-form">Login</a> or <a href="../../../../../user/register/index-152.html?destination=node%2F13157%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2999" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../3/index-4.html">3.0-alpha1 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is pleased to announce the first preview release (<em>alpha</em>) of the Aegir 3.x branch, after months of development. We have been pretty busy with the maintenance of the 2.x branch, so development has been sometimes intermittent, but it is not over yet!</p>

<p>This release is only a first of a series of alpha releases that are tailored to make upcoming changes available to a wider audience than people ready to install from git, but also to make features more widely available and tested. More alpha releases will be published when there are substantial changes.</p>

<p>In the issue queues the central roadmap issue is: <a href="https://drupal.org/node/1261030">#1261030 [meta] Roadmap: Aegir 3.x (D7 port)</a></p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc28">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Major_changes"><span class="toc-number">1. </span>Major changes</a></li>
	<li class="toc-level-1"><a href="#Major_API_changes"><span class="toc-number">2. </span>Major API changes</a></li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">3. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">4. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Features_and_improvements"><span class="toc-number">5. </span>Features and improvements</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">6. </span>Bugfixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">7. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Major_changes">1. Major changes</h2>

<ul>
<li>Frontend ported to Drupal 7</li>
<li>Raised minimum Drush version to 6.x 

<ul>
<li>Drush 7.x is supported, but that's a matter of chasing head.</li>
</ul></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Major_API_changes">2. Major API changes</h2>

<p>to be determined.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_and_upgrading">3. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>Note that you should upgrade to the latest 1.x release (currently: <a href="../../../../../1/index-3.html">1.9</a>) before attempting the upgrade to 2.x. This is especially important if you are running a pre-1.0 release (poor you!).</p>

<p>It is still imperative that you read the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">4. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features_and_improvements">5. Features and improvements</h2>

<p>In addition to the "major changes" mentioned above, the following should also be noted.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">6. Bugfixes</h2>

<p>This is a non-exhaustive list.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">7. Known issues</h2>

<ul>
<li>The devel module is listed as dependancy for the hostmaster install profile, but is not included in the drupal.org build.</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-153.html?destination=node%2F2999%23comment-form">Login</a> or <a href="../../../../../user/register/index-153.html?destination=node%2F2999%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-153.html?destination=node%2F2999%23comment-form">Login</a> or <a href="../../../../../user/register/index-153.html?destination=node%2F2999%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-6287" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../3/index-5.html">3.0-alpha2 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is pleased to announce the second preview release (<em>alpha</em>) of the Aegir 3.x branch, after months of development. Development has been sometimes intermittent, but it is not over yet!</p>

<p>This release is tailored to make upcoming changes available to a wider audience than people ready to install from git, but also to make features more widely available and tested. More alpha releases will be published when there are substantial changes.</p>

<p>In the issue queues the central roadmap issue is: <a href="https://drupal.org/node/1261030">#1261030 [meta] Roadmap: Aegir 3.x (D7 port)</a></p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc29">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Major_changes"><span class="toc-number">1. </span>Major changes</a></li>
	<li class="toc-level-1"><a href="#Major_API_changes"><span class="toc-number">2. </span>Major API changes</a></li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">3. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">4. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Features_and_improvements"><span class="toc-number">5. </span>Features and improvements</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">6. </span>Bugfixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">7. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Major_changes">1. Major changes</h2>

<ul>
<li>Improved Drupal 8 support</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Major_API_changes">2. Major API changes</h2>

<p>to be determined.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_and_upgrading">3. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>Note that you should upgrade to the latest 2.x release (currently: <a href="../../../../../2/index-2.html">2.1</a>) before attempting the upgrade to 3.x..</p>

<p>It is still imperative that you read the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">4. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features_and_improvements">5. Features and improvements</h2>

<p>In addition to the "major changes" mentioned above, the following should also be noted.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">6. Bugfixes</h2>

<p>This is a non-exhaustive list.</p>

<p>Changes since 7.x-3.0-alpha1:</p>

<ul>
  <li>Improve readability of message</li>
  <li><a href="../../../../2348173/index.html">#2348173</a> by helmo: Remove unused vars causing trouble</li>
  <li><a href="../../../../2372653/index.html">#2372653</a> by helmo: Add --no-autocommit when dumping MySQL tables</li>
  <li>typo</li>
  <li>Fix platform name in demo content</li>
  <li>don't make the example module warn so much</li>
  <li>propagate example_field properly to the backend</li>
  <li>Improve debug messages in Config classes.</li>
  <li>Nginx: Helper locations to avoid 404 on legacy images paths (subdir only)</li>
  <li>Nginx: Fix spacing</li>
  <li>Nginx: Add missing variables in subdirectory config template.</li>
  <li>don't allow d() to run before drush is fully initialized</li>
  <li>clarify little debugging markers</li>
  <li>silence the last warning, it's actually not one</li>
  <li>add debugging: when no service type is specified from the frontend, yell a warning</li>
  <li>remove dead code: $base_dir is not used anywhere in that function</li>
  <li>Split arrays and hooks to alter chmod and chgrp file operations.</li>
  <li>Add server data example module, which doesn't currently work.</li>
  <li>Add post_verify hook for site_data module.</li>
  <li>Remove legacy drush load for site data example module.</li>
  <li>revert previous commit, it's too noisy</li>
  <li>clarify traces in site_data module</li>
  <li>Nginx: Add the fix for known problem with files/imagecache in legacy D6 sites (again).</li>
  <li>Remove openatrium2 from testcase, build fails too often on external issues</li>
  <li>Update openatrium2 test platform to new tag</li>
  <li>Rename makefiles to .make extension</li>
  <li><a href="../../../../2373835/index.html">#2373835</a> by helmo | realityloop: 3.x doesn't currently install.</li>
  <li>Nginx: Fail early if any required db credentials are empty, to never create broken vhost.</li>
  <li>Nginx: Block semalt botnet (extended boa mode only)</li>
  <li>Nginx: Batch merge updates from 6.x configuration (2)</li>
  <li>Nginx: Batch merge from 6.x configuration.</li>
  <li>Correct package name in changelog</li>
  <li>Update debian package info to have aegir3 in the name</li>
  <li>Fix branch name for 7.x-3.x in debian git-buildpackage</li>
  <li><a href="../../../../2358795/index.html">#2358795</a>: Adding a "$force" parameter to setProperty() to allow overwriting of default context properties.</li>
  <li><a href="../../../../2358795/index.html">#2358795</a> Adding a provision-save to provision_verify command.</li>
  <li><a href="../../../../2361729/index.html">#2361729</a> by joestewart: Fixed D8 Platform verify doesn't add module version to package.</li>
  <li><a href="../../../../2365171/index.html">#2365171</a> by joestewart: Fixed D8 Contrib profiles in /profiles undetected.</li>
  <li><a href="../../../../2362707/index.html">#2362707</a> by joestewart: D8: update private and temporary paths after cloning</li>
  <li>allow overrides to the site-specific drushrc.php file</li>
  <li><a href="../../../../2163979/index.html">#2163979</a> - Check if field_info_field_map() is available to not break support for old D7 versions.</li>
  <li><a href="../../../../1995506/index.html">#1995506</a> by Jon Pugh: Added Implement "--profile" option for "drush hostmaster-install".</li>
  <li>Add API doc for new hook.</li>
  <li>Allow altering the list of directories to recurse into on site/platform creation.</li>
  <li>Removed a bashism</li>
  <li><a href="../../../../2348879/index.html">#2348879</a> by Deciphered, helmo: Fixed Welcome Mail - url() deprecated.</li>
  <li>Remove a trailing space char</li>
  <li>refactor</li>
  <li>Improve error handling, better message and fail earlier.</li>
  <li><a href="../../../../2300537/index.html">#2300537</a> by helmo | ergonlogic: Added Merge Provision extensions into Hosting modules.</li>
  <li>Make sure that db_port is never empty and defaults to 3306.</li>
  <li>Add drupal 8 to provision-demo-content</li>
  <li><a href="../../../../2346903/index.html">#2346903</a> by helmo: Added Always disable allow_authorize_operations.</li>
  <li><a href="../../../../2311005/index.html">#2311005</a> by Deciphered, clemens.tolboom: Fixed D8 Site install fails on undefined indexes.</li>
  <li><a href="../../../../2306055/index.html">#2306055</a> by Deciphered, realityloop, helmo, clemens.tolboom: Fixed Platform verify fails for Drupal 8 under Aegir 3.x.</li>
  <li><a href="../../../../2346967/index.html">#2346967</a> by Deciphered: Fixed Onetime login link broken.</li>
  <li>Pin test makefile of openatrium to stable version, to avoid build problems.</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">7. Known issues</h2>

<ul>
<li>Drupal 8 support is (Chasing HEAD) not complete.</li>
<li>Upgrading a hosted site from D6 to D7 has complications with Drush &gt; 7.0.0-alpha6 <a href="https://www.drupal.org/node/2382663">issue</a></li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-154.html?destination=node%2F6287%23comment-form">Login</a> or <a href="../../../../../user/register/index-154.html?destination=node%2F6287%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-154.html?destination=node%2F6287%23comment-form">Login</a> or <a href="../../../../../user/register/index-154.html?destination=node%2F6287%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-13003" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../3/index-6.html">3.0-beta1 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is pleased to announce the third preview release (<em>beta</em>) of the Aegir 3.x branch, after months of development. Development has been sometimes intermittent, but it is not over yet!</p>

<p>This release is tailored to make upcoming changes available to a wider audience than people ready to install from git, but also to make features more widely available and tested. More alpha releases will be published when there are substantial changes.</p>

<p>In the issue queues the central roadmap issue is: <a href="https://drupal.org/node/1261030">#1261030 [meta] Roadmap: Aegir 3.x (D7 port)</a></p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc30">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Major_changes"><span class="toc-number">1. </span>Major changes</a></li>
	<li class="toc-level-1"><a href="#Major_API_changes"><span class="toc-number">2. </span>Major API changes</a></li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">3. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">4. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Features_and_improvements"><span class="toc-number">5. </span>Features and improvements</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">6. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Major_changes">1. Major changes</h2>

<ul>
<li>Improved Drupal 8 support</li>
<li>Both Drush stable (6.5.0) and 7.x (the master branch) are supported.</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Major_API_changes">2. Major API changes</h2>

<p>to be determined.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_and_upgrading">3. Installing and upgrading</h2>

<p>The canonical source of installation documentation is</p>

<p><a href="http://docs.aegirproject.org/en/latest/install.html" title="http://docs.aegirproject.org/en/latest/install.html">http://docs.aegirproject.org/en/latest/install.html</a></p>

<p>We're in the process of converting our docs, the old version is on  <a href="../../../../../installing/index.html" title="http://community.aegirproject.org/installing">http://community.aegirproject.org/installing</a></p>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>Note that you should upgrade to the latest 2.x release (currently: <a href="../../../../../2/index-5.html">2.3</a>) before attempting the upgrade to 3.x..</p>

<p>It is still imperative that you read the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">4. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features_and_improvements">5. Features and improvements</h2>

<p>In addition to the "major changes" mentioned above, the following should also be noted.</p>

<p>Changes to hostmaster since 7.x-3.0-alpha2:</p>

<ul>
  <li><a href="../../../../2450683/index.html">#2450683</a> by <a href="../../../../../u/cweagans/index.html">cweagans</a>: Enable r4032login in the default hostmaster install</li>
  <li>Update the ctools version in our makefile.</li>
  <li>Update the entity API version in our makefile.</li>
  <li><a href="../../../../2421341/index.html">#2421341</a> by <a href="../../../../../u/clemens/index.html">clemens.tolboom</a>, <a href="../../../../../u/helmo/index.html">helmo</a>: Add default permissions on install</li>
  <li>Regular contrib updates for admin_menu, betterlogin and ctools</li>
  <li>Update the views version in our makefile.</li>
  <li><a href="../../../../2393567/index.html">#2393567</a>: Betterlogin's anon redirect causes issues with services</li>
</ul>

<p>Changes to hosting since 7.x-3.0-alpha2:</p>

<ul>
  <li><a href="../../../../2448855/index.html">#2448855</a> by <a href="../../../../../u/pol/index.html">Pol</a>: Makefile field not saved when importing platforms</li>
  <li>log task processing in drupal</li>
  <li><a href="../../../../2393579/index.html">#2393579</a>: Signup feature cleanup</li>
  <li><a href="../../../../2407885/index.html">#2407885</a>: refactor SSL forms - hide other SSL fields when not enabled.</li>
  <li>SSL code cleanup</li>
  <li>Rename hosting_ip_delete to _hosting_ip_delete to avoid looking like hook_delete</li>
  <li>Rename hosting_ip_load to _hosting_ip_load to avoid looking like hook_load</li>
  <li>Rename hosting_ip_validate to _hosting_ip_validate to avoid looking like hook_validate</li>
  <li>Rename hosting_ip_save to _hosting_ip_save to avoid looking like hook_save</li>
  <li>Rename hosting_ip_view to _hosting_ip_view to avoid looking like hook_view</li>
  <li>Fix typo in variable name</li>
  <li>Allow numbers in Hosting feature names.</li>
  <li>Fix logic flaw</li>
  <li>Fix remaining boolean in access grants.</li>
  <li><a href="../../../../2410603/index.html">#2410603</a>: Fix default value</li>
  <li><a href="../../../../2410603/index.html">#2410603</a>: Working copy isn't currently working</li>
  <li>Remove duplicate reaction to enabling modules.</li>
  <li>Allow scripts to skip automatic verify tasks when enabling modules by passing '--no-verify'.</li>
  <li>Hook into module being disabled</li>
  <li>node_revisions table name changed to node_revision with D7</li>
  <li><a href="../../../../2430807/index.html">#2430807</a> by <a href="../../../../../u/clemens/index.html">clemens.tolboom</a>, <a href="../../../../../u/helmo/index.html">helmo</a>: Roles order is reversed to advised order.</li>
  <li>Fix default permissions for optional submodules</li>
  <li>Fix typo in permission name</li>
  <li><a href="../../../../2432397/index.html">#2432397</a>: Add static cache to hook_node_grants</li>
  <li><a href="../../../../2430809/index.html">#2430809</a> by <a href="../../../../../u/clemens/index.html">clemens.tolboom</a>: Notice: Undefined variable: grants</li>
  <li>Do not add validation when the form elements are not added</li>
  <li><a href="../../../../2430103/index.html">#2430103</a> by <a href="../../../../../u/clemens/index.html">clemens.tolboom</a>: hosting_client: Strict warning: Only variables should be passed by reference</li>
  <li>Update db placeholders</li>
  <li><a href="../../../../2410209/index.html">#2410209</a>: Use bigint to store backup size</li>
  <li>Log which drush task hooks we're invoking.</li>
  <li><a href="../../../../2210813/index.html">#2210813</a> by <a href="../../../../../u/ergonlogic/index.html">ergonlogic</a>, <a href="../../../../../u/realityloop/index.html">realityloop</a>: Follow-up from D7 DBTNG changes</li>
  <li>Rename constant MAX_GROUP_LENGTH to HOSTING_CLIENT_MAX_GROUP_LENGTH</li>
  <li><a href="../../../../2408365/index.html">#2408365</a> by <a href="../../../../../u/clemens/index.html">clemens.tolboom</a>: Strict warning when adding new client</li>
</ul>

<p>Changes to provision since 7.x-3.0-alpha2:</p>

<ul>
  <li><a href="../../../../2457359/index.html">#2457359</a>: Stop overriding Nginx SSL settings</li>
  <li><a href="../../../../2396299/index.html">#2396299</a> by <a href="../../../../../u/ergonlogic/index.html">ergonlogic</a>: Stop comparing platform package versions when said package is installed in the site</li>
  <li>Merge branch '7.x-3.x' of git.drupal.org:project/provision into 7.x-3.x</li>
  <li>Nginx: Stop the POST flood to /autodiscover/autodiscover.xml generated by MS Office/Outlook</li>
  <li>Debian: improve setting directory permissions.</li>
  <li><a href="../../../../2193427/index.html">#2193427</a> by <a href="../../../../../u/helmo/index.html">helmo</a>: Remove Debian package requirement for Drush</li>
  <li>Make php5-gd a dependency of the aegir3-hostmaster package, as its required to install core</li>
  <li>Log site installation exception.</li>
  <li>Update absolute URLs to files for sites cloned/migrated/renamed</li>
  <li>Nginx: Use dummy db fastcgi_param placeholders if any of them is empty</li>
  <li><a href="../../../../2350695/index.html">#2350695</a> by <a href="../../../../../u/omega8cc/index.html">omega8cc</a>, <a href="../../../../../u/helmo/index.html">helmo</a>: Profile is registered twice, also as a module, which causes warning</li>
  <li>Nginx: Remove webform keyword from regex locations - fixes <a href="../../../../599/index.html">#599</a></li>
  <li>Remove Drupal 8 specific stuff from D7/D6 template.</li>
  <li>Both maintenance_mode and clean_url are ignored in Drupal 8</li>
  <li>Fix for custom cpuinfo logic.</li>
  <li>Nginx: Sync configuration improvements.</li>
  <li>Remove docs for non-existing option</li>
  <li>Add the working-copy option to hostmaster-migrate, similar to hostmaster-install</li>
  <li>hostmaster-resume was renamed to hosting-resume</li>
  <li><a href="../../../../2421543/index.html">#2421543</a> by <a href="../../../../../u/notzach/index.html">notzach</a>: Changing how Apache ServerAliases are defined</li>
  <li>Drupal 8 requires trusted_host_patterns defined in settings.php</li>
  <li>Drupal 8 requires container_yamls defined</li>
  <li>Nginx: Use safe fallback for mysteriously empty $db_port</li>
  <li>Nginx: Use reliable source for db_port to write in the vhost</li>
  <li><a href="../../../../2409085/index.html">#2409085</a> by <a href="../../../../../u/clemens/index.html">clemens.tolboom</a>: Use mutatable interface in install_8.inc</li>
  <li><a href="../../../../2387953/index.html">#2387953</a>: Remove drush-make from Debian suggest line.</li>
  <li><a href="../../../../2276557/index.html">#2276557</a> by <a href="../../../../../u/zxaos/index.html">zxaos</a>, <a href="../../../../../u/bgm/index.html">bgm</a>: allow aegir2-provision package to accept mariadb or mysql</li>
  <li>Nginx: Fix for D8-specific /cron/ location caching (extended mode only).</li>
  <li>Nginx: Fix for D8-specific /cron/ location regex.</li>
  <li>Update deploy_8.inc to sync it with improvements in deploy_7.inc</li>
  <li>Set files paths on D8 install to avoid using system default /tmp if path.temporary is not defined.</li>
  <li>Nginx: Sync headers configuration in the extended mode.</li>
  <li>Do not copy CDN aliases to the cloned site --CDN vhost.</li>
  <li>Detect and update default D8 site name, if needed.</li>
  <li><a href="../../../../2362703/index.html">#2362703</a> by joestewart - import_8 ineffective.</li>
  <li>Sync with 6.x workaround for systems with access to /data/all/cpuinfo instead of /proc/cpuinfo</li>
  <li>Sync subdirectory support.</li>
  <li>Force clean URLs for Drupal 8.</li>
  <li>The /login suffix is no longer supported in Drupal 8 and results with confusing 404 error.</li>
  <li>Avoid broken install on D8 core where sites/all doesn't exist by default.</li>
  <li><a href="../../../../2183323/index.html">#2183323</a> - Remove all remnants of $GLOBALS['conf']</li>
  <li>Fix for removed drupal_mail() which breaks Drupal 8 head install if used.</li>
  <li>Restore missing !edit_uri with hardcoded standard URI.</li>
  <li>Nginx: Drupal 8 with clean urls enabled should use /cron/ URI.</li>
  <li>Nginx: Sync config templates.</li>
  <li>Add missing code for subdirectory mode detection and support.</li>
  <li>Detect if the platform stays the same only when site name changes.</li>
  <li>Use $new_name instead of $new_uri to avoid confusion.</li>
  <li>Compare $new_uri with d()-&gt;name and not d()-&gt;uri in the Site Rename Check.</li>

</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">6. Known issues</h2>

<ul>
<li>Drupal 8 support is (Chasing HEAD) not complete.</li>
<li>The upgrade.sh.txt in provision still had Drush 5.10.0, be sure to change it to 6.5.0 before using that script.</li>
<li>The upgrade code in the Debian package could fail on an exsiting /usr/local/bin/drush file, this has been fixed in <a href="https://www.drupal.org/node/2460023" title="https://www.drupal.org/node/2460023">https://www.drupal.org/node/2460023</a></li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-155.html?destination=node%2F13003%23comment-form">Login</a> or <a href="../../../../../user/register/index-155.html?destination=node%2F13003%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-155.html?destination=node%2F13003%23comment-form">Login</a> or <a href="../../../../../user/register/index-155.html?destination=node%2F13003%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-13156" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/release-notes/older-2x-releases/index.html">Older 2.x releases</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This section documents all the older releases in the 2.x release cycle.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-156.html?destination=node%2F13156%23comment-form">Login</a> or <a href="../../../../../user/register/index-156.html?destination=node%2F13156%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-156.html?destination=node%2F13156%23comment-form">Login</a> or <a href="../../../../../user/register/index-156.html?destination=node%2F13156%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2879" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-2.html">2.1 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is proud to announce the second release in the stable 2.x release branch!</p>

<p>But first, here's a word from Antoine Beaupr:</p>

<blockquote>
  <p>This latest release of the Aegir project will be the last one for me as a release manager, as I will be stepping down from the leadership position I have filled in the 7 years of involvement in this amazing project. I will continue to contribute to the project, to a lesser extent. I will remain available, through <a href="http://koumbit.org/">Koumbit</a>, to provide high-level consulting work for Aegir. We can also now welcome <a href="http://praxis.coop/">Praxis Labs Coop</a> as a new consulting partner of the Aegir project. Praxis will help to finance ongoing Aegir development by subsidizing part of my salary, in a similar fashion to how Omega8.cc had in the past.</p>
  
  <p>Working with the Aegir project was a huge challenge, both from a technical perspective, but also from a human standpoint, as it is a large and complex project that may seem daunting for new users. But with regular releases and continuous support in the issue queue, I think we have been able to foster a great community of contributors that goes beyond what a single person can do, as Adrian proved when he left the project with the <a href="../../../../../1/index-12.html">1.0 release</a> in 2011. Christopher (ergonlogic) and other contributors have shown they are in a good position to take over that leadership role, and will do so from now on.</p>
  
  <p>Now it is my turn to move on, and I am quite proud of what I leave behind. This project allowed me to travel around the world, meet incredible people and learn a lot about hosting and provisioning. It is however time for me to move on. I have been involved with the Drupal community for over 13 years, and things, to put it lightly, have changed. PHP is attempting to become a real programming language, something that I didn't believe could or should happen, and I wish to move on to other paradigms. Python and Haskell are waiting for me around this turn in the road, and even Perl and shell scripting look awesome in comparison to those <a href="http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/">dreaded PHP years</a>. Besides, since Aegir started, lots of configuration management systems have popped up that we can leverage to host way more than PHP and Drupal: Docker, Chef, Puppet hold lots of promise for those of us who dare to get out of the NIH syndrome. Hopefully, that energy will be reusable in the Aegir project as we head towards Aegir 4!</p>
</blockquote>

<p>And so, thank you, Antoine, for all your great contributions as leader of the Aegir project! You have been an inspiration to many of us, and have provided superbly <a href="https://medium.com/tech-talk/b193a544e771">effective technical leadership</a>.</p>

<p>This release ships with support for Apache 2.4, along with updates to Drupal core and ModalframeAPI. A number of bug-fixes are included affecting deployment of Drupal 7 sites, aliases with sub-directory installs, backups, among other things. See below for the full lists of new features and bug fixes. Everyone is encouraged to upgrade.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc31">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">3. </span>Known issues</a></li>
	<li class="toc-level-1"><a href="#Features"><span class="toc-number">4. </span>Features</a></li>
	<li class="toc-level-1"><a href="#Bug_fixes"><span class="toc-number">5. </span>Bug fixes</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is at:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections, you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. Noone likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">3. Known issues</h2>

<p>Being really open about our project, we have never hidden the fact that some things, sometimes, do not work in Aegir. Our <a href="http://drupal.org/project/issues?text=&amp;projects=provision%2C%20hosting%2C%20hostslave%2C%20eldir%2C%20Hostmaster%20%28Aegir%29&amp;status=Open&amp;priorities=All&amp;categories=All">issue trackers</a> are public, and we've made it a point of honor not only to document clearly what is wrong in our releases as soon as we find out about it, but also to reroll new releases when we fix it.</p>

<p>That being said, 2.1 still has a number of issues and design flaws. This is the list of <a href="https://drupal.org/project/issues?projects=provision%2C+hosting%2C+hostslave%2C+eldir%2C+Hostmaster+%28Aegir%29&amp;priorities=300">all issues marked "major" in the queue right now</a>. Most issues are now likely to be fixed in the 3.x development branch, and unlikely to be backported unless considered critical.</p>

<ul>
<li><code>hosting-queued</code> doesn't get properly re-enabled on upgrades, see <a href="https://drupal.org/node/2114675">#2114675</a> for a workaround.</li>
<li>previous Debian packages may remove the <code>aegir.conf</code> symlink before being upgraded. this is fixed in 2.0 but will occur (it's inevitable) during upgrades from 1.x releases. details and simple workaround in <a href="https://drupal.org/node/2121263">#2121263</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features">4. Features</h2>

<ul>
<li>Apache 2.4 is now supported in the 1.x and 2.x branches, see <a href="https://drupal.org/node/2153929">#2153929</a> and <a href="https://drupal.org/node/2155445">#2155445</a></li>
<li>updated core to Drupal 6.31</li>
<li><a href="https://drupal.org/node/2191827">#2191827</a> by Jon Pugh: Update modalframe</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bug_fixes">5. Bug fixes</h2>

<ul>
<li><a href="https://drupal.org/node/2157785">#2157785</a> by helmo: Deploy_7 code lacks functionality from D6 code</li>
<li><a href="https://drupal.org/node/2169025">#2169025</a> by gboudrias: Fix non-gzipped backups can't be restored</li>
<li><a href="https://drupal.org/node/2213387">#2213387</a> by Chris Moates: Fix alias handling when using subdirs support</li>
<li>Cleanup some file permissions from 755 to 644</li>
<li><a href="https://drupal.org/node/2213787">#2213787</a> by SocialNicheGuru, helmo: Undefined property: stdClass::$ssl_key_new hosting_ssl.nodeapi.inc:252</li>
<li>Fixed reference in comment and cleanup notices</li>
<li><a href="https://drupal.org/node/2171075">#2171075</a> by helmo: Fix hostmaster-resume command options. (3 months ago) </li>
<li><a href="https://drupal.org/node/2189687">#2189687</a> Redirect to site-alias not working </li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-157.html?destination=node%2F2879%23comment-form">Login</a> or <a href="../../../../../user/register/index-157.html?destination=node%2F2879%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-157.html?destination=node%2F2879%23comment-form">Login</a> or <a href="../../../../../user/register/index-157.html?destination=node%2F2879%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2850" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-3.html">2.0 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is very pleased to announce the official release of Aegir 2.0.0. This long-awaited release ships with significant stability improvements, Drush 5 and 6 support, subdirectory multisite support, improved nginx support, native views and much, much more! We unfortunately had to drop support for Drupal 5, as Drush 5 and 6 dropped support for this unsupported Drupal release.</p>

<p>This release deprecates the 1.x branch, marking the 1.11 release as the last one of the 1.x branch. All Aegir users are strongly encouraged to upgrade to the 2.0 release. The upgrade has been thoroughly tested and works fairly reliably, except some documented minor issues.</p>

<p>We have a very dynamic community of contrib developers, and various projects built atop Aegir. So if you were waiting for Aegir 2 to be stable, easy to install, production-ready, now is the time. The 2.x branch will be well supported as a lot of shops are running it in production already.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc32">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Major_changes_in_this_release"><span class="toc-number">1. </span>Major changes in this release</a>
<ol>
	<li class="toc-level-2"><a href="#x_branch_maintenance_policy"><span class="toc-number">1.1. </span>2.x branch maintenance policy</a></li>
	<li class="toc-level-2"><a href="#The_future"><span class="toc-number">1.2. </span>The future</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">2. </span>Installing and upgrading</a>
<ol>
	<li class="toc-level-2"><a href="#Need_help"><span class="toc-number">2.1. </span>Need help?</a></li>
	<li class="toc-level-2"><a href="#Known_issues"><span class="toc-number">2.2. </span>Known issues</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Complete_list_of_changes"><span class="toc-number">3. </span>Complete list of changes</a>
<ol>
	<li class="toc-level-2"><a href="#API_changes"><span class="toc-number">3.1. </span>API changes</a></li>
	<li class="toc-level-2"><a href="#New_features"><span class="toc-number">3.2. </span>New features</a></li>
	<li class="toc-level-2"><a href="#Bugfixes"><span class="toc-number">3.3. </span>Bugfixes</a></li>
	<li class="toc-level-2"><a href="#Other_issues"><span class="toc-number">3.4. </span>Other issues</a></li>
</ol>
</li>
</ol>
</div>
</div>

<h1 id="Major_changes_in_this_release">1. Major changes in this release</h1>

<p>Since th 1.0 stable release (<a href="../../../../../1/index-12.html">1.0</a>) in April 2011, we've done an incredible amount of work. The code size nearly doubled as did the development team and user base. We have accomplished a significant number of the <a href="../../../../../roadmap/2/index.html">release goals we set for 2.0</a>, but not all. Here is a broad breakdown of the most important improvements between the 1.11 and 2.0 releases:</p>

<ul>
<li>Subdirectory multisite support

<ul>
<li>you can now have different sites in example.com/foo and example.com/bar, a great feature if you do not control DNS, as well as for local development!</li>
</ul></li>
<li>SSL improvements

<ul>
<li>IP allocation improvement: addresses can be changed, added and removed more easily, and are managed from the front-end now.</li>
<li>SSL certificate generation now has saner defaults (e.g. 2048bits)</li>
<li>better error handling</li>
</ul></li>
<li>Drush 5 &amp; 6 support

<ul>
<li>includes better support for archive-dump command</li>
<li>means we also drop the dependency on drush make 2.3, now included in Drush 5</li>
<li>support for Drush 4 has been dropped, the minimum version is now 5.5, but Drush 6 or 5.10+ is recommended.</li>
</ul></li>
<li>Packaging improvements and changes

<ul>
<li>Nginx support in the Debian package</li>
<li>now a "native" debian package</li>
<li>package name changed: it is now <code>aegir2</code>, <code>aegir2-provision</code>, etc, to avoid overwriting the previous package - note that aegir 1 and 2 can <em>not</em> be installed in parallel</li>
<li>hosting and eldir now split back in their own projects on dripal.org</li>
<li>using Drupal.org packaging tools to provide a full tarball for the whole frontend, speeding up installs significantly</li>
</ul></li>
<li>Nginx improvements:

<ul>
<li>fixed support for nginx 1.3 and newer</li>
<li>better defaults for caching</li>
<li>SSL and Nginx are now officially supported (not marked as "experimental")</li>
</ul></li>
<li>New modules:

<ul>
<li>the <code>hosting-queue-runner</code> module is now <a href="https://drupal.org/node/1189556">merged into core</a> as <code>hosting-queued</code></li>
<li>"pack" module, designed as a lightweight replacement to the "cluster" module, now available as an experimental extension</li>
</ul></li>
<li>Hosting-queued improvements

<ul>
<li>run with a lower priority ("<em>niced</em>")</li>
<li>improved portability and reliability of startup script</li>
<li>enabled by default in the Debian package</li>
<li>improved stability</li>
</ul></li>
<li>Code refactoring and improvements:

<ul>
<li>now using the Symphony autoloading code</li>
<li>fix coding style in a lot of source files</li>
<li>improved builtin test suite</li>
</ul></li>
<li>Frontend improvements:

<ul>
<li>all custom displays ported to Views and VBO</li>
<li>nicer frontpage</li>
<li>new and improved roles with more useful default permission sets</li>
</ul></li>
<li>Documentation improvements:

<ul>
<li>Our documentation initiative to <a href="http://drupal.org/node/1111254">better document the Hostmaster API</a> has progressed nicely</li>
<li>we'll be launching an updated version of our <a href="http://api.aegirproject.org/">API site</a> (along the lines of api.drupal.org) shortly, to ease exploring the code-base of the Aegir Project, see <a href="http://drupal.org/node/1111254#comment-4287518">this issue</a>. </li>
</ul></li>
</ul>

<p>For a more detailed list of new functionalities, bugfixes and API changes, see below.</p>

<p>Some goals of the <a href="../../../../../roadmap/2/index.html">original 2.0 roadmap</a> have <em>not</em> been accomplished, namely:</p>

<ul>
<li>modular backup, platform and queuing systems - although work has started on Wordpress support, and an overhaul of the Aegir architecture is considered for 4.0, which will affect queuing systems (see below)</li>
<li>DNS, PostgreSQL and statistics efforts have mostly stalled</li>
<li>clone and migrate optimizations still have to be completed</li>
<li>completely automatic upgrades have not been implemented, although the Debian package upgrades are working generally well</li>
<li>the release was about 2 months late from the <a href="../../../../../discuss/another-stab-short-and-long-term-roadmap-aegir-2x-and-3x/index.html">october 31st estimate</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="x_branch_maintenance_policy">1.1. 2.x branch maintenance policy</h2>

<p>With the 2.0 release, the Aegir project wished to adopt the growing standard of <a href="http://semver.org/">Semantic Versioning</a>. Unfortunately, the tools on Drupal.org <a href="https://drupal.org/node/1612910">do not allow 3-digits version numbers in contrib</a>, something of a blocker to allow us to use that great numbering scheme. So we will stick to our previous scheme for now, but we'll consider a switch to semver for 3.0.0.</p>

<p>No API change will be done in the 2.x branch. All core development will now happen on the 3.x branch, which shifts the focus of development to the port of the frontend to Drupal 7 (almost complete).</p>

<p>Note that the 2.x API has already been frozen for some time, since the first release candidate, to be more precise. Major changes to 2.x will not be committed unless they are first tested in 3.x and merged back. However, we wish the 2.x branch to be relatively short-lived, and it is more likely that major changes will <em>not</em> be backported from 3.x unless absolutely necessary for users needing a Drupal 6 Aegir frontend.</p>

<p>The 1.x branch is now deprecated and the 1.11 release will be the last release of that venerable branch, unless we need another release to fix the upgrade path to the 2.x branch. This is considered very unlikely. Security fixes or critical issues will therefore <em>not</em> be backported to the 1.x branch.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="The_future">1.2. The future</h2>

<p>While we're very proud of what we've accomplished in Aegir 2.0, we've also been working in parallel to port Aegir to Drupal 7. Aegir 3.0 has already begun as a fairly straight-forward port. As such, we'll be releasing our first alpha of Aegir 3 shortly. We would like to have a stable Aegir 3.0 release before the release of Drupal 8, to allow for users to transition as Drupal 6 enters its end-of-life phase.</p>

<p>The reason for the change to semantic versioning is that we've been discussing a full re-write of Aegir for some time, and would like to do so with Aegir 4. The changes are likely to be fairly drastic, and so we want to be able to keep moving Aegir 3 forward in the mean time. By moving to Drupal 7, we expect to have bought ourselves 2+ years of breathing room within which to accomplish this re-architecture and the semantic versioning system allows us to integrate major changes in the 3.x branch progressively.</p>

<p>When the Aegir project started (back in 2008), the free software options for systems management software were very limited. As a result, we wrote our own code to do things like deploying code, writing configuration files, starting and stopping services, and so forth. Now, as 2014 begins, there are a wealth of tools that perform  these functions (e.g. Puppet and Chef, but also Openshift, Docker, etc), each with their own communities supporting them. We are exploring how we might be able to leverage these tools, rather than maintaining our own partial implementations, that will never likely be as robust as these more specialized projects.</p>

<p>We feel that the time is opportune since Drupal 8 will require significant re-writing of the front-end components. In addition, re-writing the backend so completely will allow us to seriously consider moving to a programming language other than PHP; one that would be better suited to the project's long-term goals, such as Python or Ruby.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Installing_and_upgrading">2. Installing and upgrading</h1>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade.</p>

<p>For users coming from the 2.0 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<p>Note that you should upgrade to the latest 1.x release (currently: <a href="../../../../../1/index-3.html">1.9</a>) before attempting the upgrade to 2.x. This is especially important if you are running a pre-1.0 release (poor you!).</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2.1. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">2.2. Known issues</h2>

<p>Being really open about our project, we have never hidden the fact that some things, sometimes, do not work in Aegir. Our <a href="http://drupal.org/project/issues?text=&amp;projects=provision%2C%20hosting%2C%20hostslave%2C%20eldir%2C%20Hostmaster%20%28Aegir%29&amp;status=Open&amp;priorities=All&amp;categories=All">issue trackers</a> are public, and we've made it a point of honor not only to document clearly what is wrong in our releases as soon as we find out about it, but also to reroll new releases when we fix it.</p>

<p>That being said, 2.0 still has a number of issues and design flaws. This is the list of <a href="https://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=4&amp;categories=All">all issues marked "major" in the queue right now</a>. Most issues are now likely to be fixed in the 3.x development branch, and unlikely to be backported unless considered critical.</p>

<ul>
<li><code>hosting-queued</code> doesn't get properly re-enabled on upgrades, see <a href="https://drupal.org/node/2114675">#2114675</a> for a workaround.</li>
<li>Ubuntu saucy has some changes in apache config wich breaks Aegir <a href="https://drupal.org/node/2155705">#2155705</a></li>
<li>previous Debian packages may remove the <code>aegir.conf</code> symlink before being upgraded. this is fixed in 2.0 but will occur (it's inevitable) during upgrade. details and simple workaround in <a href="https://drupal.org/node/2121263">#2121263</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Complete_list_of_changes">3. Complete list of changes</h1>

<p>Her is the complete list of changes, since the 1.x branch, some of which were already mentioned in previous release notes for alpha/beta/rc releases.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="API_changes">3.1. API changes</h2>

<p>Those changes are, as usual, more explicitly documented in the <a href="../../../../../upgrading/path/index.html">upgrade path</a> documentation.</p>

<ul>
<li>hosting-task now needs a <code>--force</code> argument to run a non-queued task</li>
<li>the '--force' option also allows running tasks that appear to be running in the queue</li>
<li>functions that were deprecated in 1.x are now removed</li>
<li>the <code>email</code> and <code>client_email</code> database fields are now removed from client and site node types</li>
<li>numerous changes to the IP allocation and SSL management code</li>
<li>deprecate hosting_ip_delete_revision(), dupe of hosting_ip_delete() now that revisions are gone (8 weeks ago)</li>
<li>remove deprecated DEBUG flag in debian package</li>
<li>#1785624: Some Drupal API changes in D7 (and D8) are not used/respected properly</li>
<li>#1945950: Rename provision_drupal_sync_site_back()</li>
<li>#1083366: Make the spokes authoritative for files/ and private/ directories</li>
<li>#1812338: Refactor sync back</li>
<li>a new control file has been introduced in /etc/nginx/basic_nginx.conf to force the nginx configuration to be the "simpler" one (see #1635596)</li>
<li>#1987026: Move generated platform drushrc.php to sites/all/drush</li>
<li>Multiple files can be managed in a single context now (see <a href="https://drupal.org/node/2000038">issue #2000038</a>, <a href="https://drupal.org/node/1784108">issue #1784108</a>)</li>
<li><a href="https://drupal.org/node/1034520">#1034520</a>: Cleanup package instances when deleting sites and platforms.</li>
<li><a href="https://drupal.org/node/1830220">#1830220</a>: Drop support for Drupal 5.</li>
<li><a href="https://drupal.org/node/1975086">#1975086</a>: Move log parsing and status updates to seperate functions and call them from a shutdown function.</li>
<li>Pass the entity type when we're sync'ing package instances.</li>
<li>Save the platform field when creating a package instance record.</li>
<li>Move to individual operation callbacks for VBO tasks.</li>
<li><a href="https://drupal.org/node/2022849">#2022849</a>: Record disable and delete backups in the database.</li>
<li><a href="https://drupal.org/node/2031491">#2031491</a>: Rename SSL permission to be more descriptive.</li>
<li>Fix node grants so that proper permissions are respected on all Aegir node types.</li>
<li>Add 'administer' permissions for platforms and servers, and allow platforms to be viewed.</li>
<li><a href="http://drupal.org/node/1283738">#1283738</a>: Allow other commands to add or alter the directories to be created.</li>
<li>remove version pinning in hostmaster, our release process now again needs to modify only one makefile (<a href="https://drupal.org/node/2002114">#2002114</a>)</li>
<li><a href="http://drupal.org/node/1986928">#1986928: Provide 2.x upgrade guidance for services</a></li>
<li><a href="http://drupal.org/node/2099889">#2099889: More hosting_features checks in _drush_load hooks?</a></li>
<li><a href="http://drupal.org/node/1882708">#1882708: Unused 'release_id' field in 'hosting_platform'</a></li>
<li><a href="http://drupal.org/node/2012508">#2012508: hosting_context_name returns '@' if node not found</a></li>
<li><a href="http://drupal.org/node/1283738">#1283738: Add new hook provision_drupal_create_directories in _provision_drupal_create_directories</a></li>
<li>There is now a registry in the backend of the features enabled in the front-end (in /var/aegir/.drush/drushrc.php) which allows backend components to better determine if they should act</li>
<li>If <code>/var/aegir</code> is a symlink, it will be destroyed by the debian package, make sure the Aegir $HOME is properly set to work around that, see <a href="https://drupal.org/node/2118857">issue #2118857</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="New_features">3.2. New features</h2>

<p>In addition to the "major changes" mentioned above, the following should also be noted.</p>

<ul>
<li><a href="http://drupal.org/node/1830994">#1830994: Login directly via 'login' link</a></li>
<li><a href="http://drupal.org/node/1853588">#1853588: Sort Install profiles on Site add form</a></li>
<li><a href="http://drupal.org/node/709862">#709862: Allow drush modules to add to apache vhost config template</a></li>
<li><a href="http://drupal.org/node/1861896">#1861896: Make $type argument of function hosting_available_tasks() optional.</a></li>
<li><a href="http://drupal.org/node/1843198">#1843198: Add Content top and bottom to Eldir.</a></li>
<li><a href="http://drupal.org/node/1826074">#1826074: Add tests to ensure site directories are migrated</a></li>
<li><a href="http://drupal.org/node/1464220">#1464220: Support alternative 'Hostmaster' profiles</a></li>
<li><a href="http://drupal.org/node/610040">#610040: Add X links on listing pages</a></li>
<li><a href="http://drupal.org/node/710834">#710834: notify clients on site migrations</a></li>
<li><a href="http://drupal.org/node/1260066">#1260066: Allow use of the working copy option when creating a platform</a></li>
<li><a href="http://drupal.org/node/1047992">#1047992: exportable backups</a></li>
<li><a href="http://drupal.org/node/1189556">#1189556: Pull the queue runner into Aegir 2</a></li>
<li><a href="http://drupal.org/node/1408410">#1408410: Add microcaching to Nginx config by default</a></li>
<li><a href="http://drupal.org/node/1138104">#1138104: Tiny module to automatically fill in platform publish path based on title</a></li>
<li>#1929372: Flag tasks with logged warnings</li>
<li>#1515416: On a package page, show table listing sites and platforms using the package</li>
<li>#1853620: Add db_name to site summary</li>
<li>#1681904: Ability to configure a url to redirect to in site configuration.</li>
<li>#1968226: manage each IP individually on the server level</li>
<li>add uninstall command</li>
<li>Nginx Security: BEAST attack protection and fix for PCI compliance.</li>
<li>#1980136: Allow setting default profile from the front-end.</li>
<li>#588728: Replace custom lists with Views and VBO for sites, platforms and packages.</li>
<li>Support for installing in subdirectories (<a href="https://drupal.org/node/705026">issue #705026</a>)</li>
<li>Proper homepage on startup so non-logged-in users don't see an error page, and new users have basic instructions (<a href="https://drupal.org/node/1793740">issue #1793740</a>)</li>
<li>SSL support for clusters should now work properly (<a href="https://drupal.org/node/2000964">issue #2000964</a>)</li>
<li>New roles added: 'aegir platform manager', 'aegir administrator' (<a href="https://drupal.org/node/1403208">issue #1403208</a>)</li>
<li>Convert list of platforms to use views (<a href="https://drupal.org/node/1876350">Issue #1876350</a>)</li>
<li><a href="http://drupal.org/node/600350">#600350: provide a nice "history" of ran tasks</a></li>
<li><a href="http://drupal.org/node/1988642">#1988642: Add site by platform</a></li>
<li><a href="http://drupal.org/node/1912238">#1912238: automatically build and upload aegir 2.x packages</a></li>
<li><a href="http://drupal.org/node/585830">#585830: usability story: "How do I create a client?"</a></li>
<li><a href="http://drupal.org/node/1212086">#1212086: Platforms should be locked by default</a></li>
<li><a href="http://drupal.org/node/1403208">#1403208: Add additional roles</a></li>
<li><a href="http://drupal.org/node/1174440">#1174440: provide a way to show site's DB username/password in the frontend</a></li>
<li><a href="http://drupal.org/node/606120">#606120: Disabled sites should be class hosting-warning, enabled but problematic sites should be hosting-error</a></li>
<li><a href="https://drupal.org/node/905326">#905326</a>: Improve file path changes.</li>
<li><a href="https://drupal.org/node/1201174">#1201174</a>: Make UID1 username configurable.</li>
<li><a href="https://drupal.org/node/1345118">#1345118</a>: Make platform access control an autocomplete form.</li>
<li><a href="https://drupal.org/node/1515416">#1515416</a>: Replace listing of sites and platforms using a package with a view.</li>
<li><a href="https://drupal.org/node/1975086">#1975086</a>: Add 'update status' button to tasks.</li>
<li><a href="https://drupal.org/node/2005310">#2005310</a>: Add VBO operations to platforms view.</li>
<li><a href="https://drupal.org/node/2006074">#2006074</a>: Enable backups via VBO.</li>
<li><a href="https://drupal.org/node/2025787">#2025787</a>: Open site goto link in a new window/tab.</li>
<li><a href="https://drupal.org/node/2022813">#2022813</a>: Expose backups to Views.</li>
<li><a href="https://drupal.org/node/2027269">#2027269</a>: Update a task's status after all Drush operations are complete.</li>
<li><a href="https://drupal.org/node/2031491">#2031491</a>: Review and update permissions for all roles.</li>
<li><a href="https://drupal.org/node/2031765">#2031765</a>: Clean up VBO operations with Action Permissions.</li>
<li><a href="http://drupal.org/node/2035873">#2035873</a>: Show package 'popularity' on platform package view</li>
<li><a href="https://drupal.org/node/2036283">#2036283</a>: Make Aegir aware of site-specific packages.</li>
<li><a href="https://drupal.org/node/2036793">#2036793</a> Ignore hidden modules and profiles.</li>
<li><a href="https://drupal.org/node/2037045">#2037045</a>: Change some log statuses to better match Drush's log styling.</li>
<li><a href="https://drupal.org/node/2037965">#2037965</a>: Clean up hosting-pause.</li>
<li><a href="https://drupal.org/node/2038279">#2038279</a>: Validate email during site install.</li>
<li>Display all validation errors when adding a client, and limit to 20 suggestions.</li>
<li>Flag rollbacks as warnings in our task logs.</li>
<li>Handle package page views separately for sites and platforms.</li>
<li>Update default hosting_site views to use new access plugin for blocks, and add a couple more displays for non admin listings.</li>
<li>Add Views access plugin for hosting_site and hosting_package.</li>
<li>Add views handler to filter packages by status.</li>
<li><a href="http://drupal.org/node/2069387">#2069387</a>: Support nonstandard ports on hostmaster-install command.</li>
<li><a href="http://drupal.org/node/2067617">#2067617</a>: Allow hostmaster-install to accept '--working-copy' option.</li>
<li>Allow the redirect to the welcome page to be turned off.</li>
<li>aegir install time reduced by about 60 seconds (on a cable uplink) by using Drupal.org distributions (<a href="https://drupal.org/node/2002114">#2002114</a>)</li>
<li><a href="http://drupal.org/node/2001964">#2001964: Upgrade Views Bulk Operations 6.x-1.16</a></li>
<li><a href="http://drupal.org/node/2099057">#2099057: Allow _provision_drupal_create_directories to skip chmod</a></li>
<li><a href="http://drupal.org/node/2100251">#2100251: Implement post-enable hook for 'hosting_*' modules</a></li>
<li><a href="http://drupal.org/node/2020075">#2020075: Refactor subdirs to use proper Config class(es)</a></li>
<li><a href="http://drupal.org/node/2020079">#2020079: Multi-server subdirectory support</a></li>
<li><a href="http://drupal.org/node/2096629">#2096629: hook_provision_drupal_create_directories_alter by ref</a></li>
<li><a href="http://drupal.org/node/2086009">#2086009: Logo Cannot be changed / disabled</a></li>
<li><a href="http://drupal.org/node/2069387">#2069387: Support nonstandard ports on hostmaster-install command</a></li>
<li><a href="http://drupal.org/node/2074681">#2074681: Ports are hardcoded in hostmaster.profile</a></li>
<li><a href="http://drupal.org/node/2103173">#2103173: Provide an example of saving data to a site context</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">3.3. Bugfixes</h2>

<p>This list only shows bug fixes since the last release candidate (RC5), since the list of all bugfixes in Aegir 2 is truly enormous. Please review the individual release notes for more details, if you are curious.</p>

<ul>
<li>Improve the subdir related description in the site add/edit forms, to explain the most important details clearly enough.</li>
<li>Do not allow duplicate subdir aliases - use hosting_alias_allow_domain() in hosting_alias_validate_subdir() directly.</li>
<li>Update the inline how-to for sites in subdirs.</li>
<li><a href="../../../../2020089/index.html">#2020089</a> by ergonlogic - Allow example.com and example.com/foo domains (Hosting)</li>
<li><a href="../../../../2151475/index.html">#2151475</a> by helmo: Extra comment.</li>
<li><a href="../../../../2151371/index.html">#2151371</a> by helmo: Allow custom platform tasks.</li>
<li>security fix: SA-CORE-2013-003, fix files/ protection</li>
<li><a href="../../../../1220062/index.html">#1220062</a> fix mild security issue with login-reset links.</li>
<li>fix SSL certificate garbage collection, it was simply not working</li>
<li>reformat complex query to be more readable</li>
<li>also free SSL certificate when SSL is disabled on a site</li>
<li>check only client nodes for duplicates, closes <a href="../../../../2123355/index.html">#2123355</a></li>
<li><a href="../../../../2119101/index.html">#2119101</a>: Fix tasks are not sorted properly.</li>
<li>don't verify deleted sites, fixes <a href="../../../../2119111/index.html">#2119111</a></li>
<li>properly populate the SSL cert / IP association map</li>
<li>properly count the aegir hosting aliases, fixes <a href="../../../../2118917/index.html">#2118917</a></li>
<li>Fix malformed @defgroup.</li>
<li><a href="../../../../2085077/index.html">#2085077</a> by chertzog | ergonlogic: Fixed Invalid argument supplied for foreach() hosting.ip.inc:39.</li>
<li><a href="../../../../2126895/index.html">#2126895</a> by helmo: Upgrade.sh not compatible with Drush 6.</li>
<li><a href="../../../../2020089/index.html">#2020089</a> by ergonlogic - Allow example.com and example.com/foo domains (improved to fix a few dangerous errors) plus comments.</li>
<li>Nginx: Use text/xml mime type for .xml URLs to restore defaults.</li>
<li>Fix the check for parent site existence - we should look for drush alias file and not a vhost (which can be dummy subdir vhost).</li>
<li>Nginx: Fix aliases in redirects on the fly.</li>
<li>Nginx: Convert subdir alias name properly when used as server_name in redirection.</li>
<li><a href="../../../../2020089/index.html">#2020089</a> by ergonlogic - Allow example.com and example.com/foo domains (Apache)</li>
<li>Nginx: Redirect to working homepage for subdir based site.</li>
<li><a href="../../../../2100181/index.html">#2100181</a> by ergonlogic - Symlink missing for D6 subdir sites.</li>
<li><a href="../../../../2146711/index.html">#2146711</a> by helmo: PHP 5.3 compatible (Nginx).</li>
<li><a href="../../../../2038891/index.html">#2038891</a> by drastik: add missing --client-email option</li>
<li><a href="../../../../2020091/index.html">#2020091</a> by ergonlogic - Support subdirs with Nginx.</li>
<li>fix redirection for non-ssl hosts, issue <a href="../../../../2148671/index.html">#2148671</a> by logaritmisk</li>
<li><a href="../../../../2157785/index.html">#2157785</a> by helmo: Remove unused variables, these get written to the site's settings.php anyway.</li>
<li><a href="../../../../2157783/index.html">#2157783</a> by helmo: Deploy_7 code has an unused old_uri.</li>
<li>don't go around destroying apache configs on upgrades or removal</li>
<li>get the aegir home directory dynamically</li>
<li>rename VARLIB variable to AEGIRHOME for clarity</li>
<li>fix drush dependency: we need 5.10 to treat hostmaster as core in drush make</li>
<li>Further fixes for strict options checking in Drush 6.</li>
<li><a href="../../../../2135999/index.html">#2135999</a>: Fix for strict options checking in Drush 6.</li>
<li>Update site_data example extension with new load method.</li>
<li>Fix naming of hook in api docs.</li>
<li>be more tolerant about the way the alias gets passed from the frontend</li>
<li><a href="../../../../2117227/index.html">#2117227</a> by Ogredude - Missing newline causes syntax errors in vhost.d nginx config when redirects are enabled.</li>
<li>Copy all makefiles into Debian package.</li>
<li>Conditinally add subdirs/ to the debian package.</li>
<li>Fix .deb dependency.</li>
<li><a href="../../../../2113463/index.html">#2113463</a>: Fix take hosting_platform_pathauto out of experimental.</li>
<li><a href="../../../../1376466/index.html">#1376466</a> by Dane Powell: Fixed path not generated when copy/paste is used.</li>
<li><a href="../../../../1898252/index.html">#1898252</a> by Dane Powell: Fixed Edit option displayed on existing platforms.</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Other_issues">3.4. Other issues</h2>

<ul>
<li>#1923552: Rename 'Queue runner settings' tab to 'Queue daemon'</li>
<li>#1834036: Add 'hosting platform pathauto' to the .gitignore</li>
<li>#1785624: Some Drupal API changes in D7 (and D8) are not used/respected properly</li>
<li>#1979496: Update upgrade.sh.txt for Drush 5</li>
<li>#1974752: Document old_uri option for provision-deploy</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-158.html?destination=node%2F2850%23comment-form">Login</a> or <a href="../../../../../user/register/index-158.html?destination=node%2F2850%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-158.html?destination=node%2F2850%23comment-form">Login</a> or <a href="../../../../../user/register/index-158.html?destination=node%2F2850%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-13006" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-4.html">2.2 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>2.2 was an abortive release, due to missing updates to contrib modules. Use 2.3 instead.</p>

<p>See: <a href="../../../../../2/index-5.html" title="http://community.aegirproject.org/2.3">http://community.aegirproject.org/2.3</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-159.html?destination=node%2F13006%23comment-form">Login</a> or <a href="../../../../../user/register/index-159.html?destination=node%2F13006%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-159.html?destination=node%2F13006%23comment-form">Login</a> or <a href="../../../../../user/register/index-159.html?destination=node%2F13006%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-3100" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-5.html">2.3 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is proud to announce the third release in the stable 2.x release branch!</p>

<p>This maintenance release ships with a huge number of bug fixes since our last stable release, almost a whole year ago. There are also some security improvements for nginx users. See below for the full list of bug fixes. Everyone is encouraged to upgrade.</p>

<p>Also, worth noting is the simultaneous release of our <a href="../../../../../3/index-6.html">first beta for Aegir 3</a>. Debian packages are now being provided for Aegir 3, so trying it out is easier than ever!</p>

<p><strong>N.B.</strong> The 2.2 release was invalid, as the contrib modules included in the drupal-org.make had not been updated.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc33">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Security_improvements_for_nginx"><span class="toc-number">1. </span>Security improvements for nginx</a></li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">2. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">3. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">4. </span>Known issues</a></li>
	<li class="toc-level-1"><a href="#Features"><span class="toc-number">5. </span>Features</a></li>
	<li class="toc-level-1"><a href="#Bug_fixes"><span class="toc-number">6. </span>Bug fixes</a></li>
</ol>
</div>
</div>

<h2 id="Security_improvements_for_nginx">1. Security improvements for nginx</h2>

<p>Previously, Aegir stored SSL cipher and protocol settings per site in Nginx virtualhost configuration files. This included the enabling of SSLv3, which is vulnerable to POODLE attacks [1].</p>

<p>Because these settings were stored via templates, permanently removing SSLv3 support on Aegir-based Nginx SSL environments was not possible. These settings have now been removed from the templates that generate Nginx virtualhost files under Aegir. If you wish to either re-enable SSLv3, or otherwise alter SSL cipher and protocol settings in Nginx, we recommend you do so in the http {} context (e.g, in /etc/nginx/nginx.conf), which are applied globally and are never manipulated by Aegir.</p>

<p>Sites that were running on Nginx and had SSL enabled, should be re-verified to remove those settings.</p>

<p>Apache users (including those using SSL) were not affected.</p>

<p>[1] <a href="http://en.wikipedia.org/wiki/POODLE" title="http://en.wikipedia.org/wiki/POODLE">http://en.wikipedia.org/wiki/POODLE</a></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_and_upgrading">2. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is at:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections, you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade.</p>

<p><strong>N.B.</strong> <a href="https://www.drupal.org/node/2146977">Issue #2146977: Broken backward compatibility with IP based vhosts</a> may affect those upgrading from 1.x. It appears that running 'verify' tasks on all sites should resolve the issue.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">3. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">4. Known issues</h2>

<p>Being really open about our project, we have never hidden the fact that some things, sometimes, do not work in Aegir. Our <a href="http://drupal.org/project/issues?text=&amp;projects=provision%2C%20hosting%2C%20hostslave%2C%20eldir%2C%20Hostmaster%20%28Aegir%29&amp;status=Open&amp;priorities=All&amp;categories=All">issue trackers</a> are public, and we've made it a point of honor not only to document clearly what is wrong in our releases as soon as we find out about it, but also to reroll new releases when we fix it.</p>

<p>That being said, 2.2 still has a number of issues and design flaws. This is the list of <a href="https://drupal.org/project/issues?projects=provision%2C+hosting%2C+hostslave%2C+eldir%2C+Hostmaster+%28Aegir%29&amp;priorities=300">all issues marked "major" in the queue right now</a>. Most issues are now likely to be fixed in the 3.x development branch, and unlikely to be backported unless considered critical.</p>

<p>As mentioned in the previous section, <a href="https://www.drupal.org/node/2146977">Issue #2146977: Broken backward compatibility with IP based vhosts</a> is still listed as a 'critical' issue against the 2.x branch. However, it should only affect those upgrading from 1.x, and has a fairly simple work-around. If you come across this behaviour during your upgrade, please post a comment to the issue, so we can confirm that it still exists.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features">5. Features</h2>

<p><a href="https://www.drupal.org/node/2267057">#2267057</a>: Pre-upgrade add ctools to 6.x-2.x</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bug_fixes">6. Bug fixes</h2>

<p>Changes to hosting since 6.x-2.1:</p>

<ul>
  <li>Make it clear that subdomain (foo) and subdirectory name (foo) must be identical.</li>
  <li><a href="../../../../2333911/index.html">#2333911</a> - Restore the pre-views order of tasks in the queue blocks/lists.</li>
  <li><a href="../../../../2313327/index.html">#2313327</a> by <a href="../../../../../u/helmo-_-tvl/index.html">helmo | tvl</a>: Fixed Unknown options for provision-verify.</li>
  <li><a href="../../../../2163525/index.html">#2163525</a> by <a href="../../../../../u/helmo-_-daften/index.html">helmo | daften</a>: Fixed Aegir doesn't delete old alias on migration of site.</li>
</ul>

<p>Changes to provision since 6.x-2.1:</p>

<ul>
  <li><a href="../../../../2457359/index.html">#2457359</a>: Stop overriding Nginx SSL settings</li>
  <li>Nginx: Stop the POST flood to /autodiscover/autodiscover.xml generated by MS Office/Outlook</li>
  <li>Nginx: Use dummy db fastcgi_param placeholders if any of them is empty</li>
  <li><a href="../../../../2350695/index.html">#2350695</a> by <a href="../../../../../u/omega8cc/index.html">omega8cc</a>, <a href="../../../../../u/helmo/index.html">helmo</a>: Profile is registered twice, also as a module, which causes warning</li>
  <li>Nginx: Remove webform keyword from regex locations - fixes <a href="../../../../599/index.html">#599</a></li>
  <li>Nginx: Sync configuration improvements.</li>
  <li>Fix for custom cpuinfo logic.</li>
  <li><a href="../../../../2421543/index.html">#2421543</a> by <a href="../../../../../u/notzach/index.html">notzach</a>: Changing how Apache ServerAliases are defined</li>
  <li>Nginx: Use safe fallback for mysteriously empty $db_port</li>
  <li>Nginx: Use reliable source for db_port to write in the vhost</li>
  <li><a href="../../../../2276557/index.html">#2276557</a> by <a href="../../../../../u/zxaos/index.html">zxaos</a>, <a href="../../../../../u/bgm/index.html">bgm</a>: allow aegir2-provision package to accept mariadb or mysql</li>
  <li>Nginx: Fix for D8-specific /cron/ location caching (extended mode only).</li>
  <li>Nginx: Fix for D8-specific /cron/ location regex.</li>
  <li>Nginx: Drupal 8 with clean urls enabled should use /cron/ URI.</li>
  <li>Nginx: Sync config templates.</li>
  <li>Detect if the platform stays the same only when site name changes.</li>
  <li>Standardize inline comments.</li>
  <li><a href="../../../../2372653/index.html">#2372653</a> by <a href="../../../../../u/helmo/index.html">helmo</a>: Add --no-autocommit when dumping MySQL tables</li>
  <li>Use $new_name instead of $new_uri to avoid confusion.</li>
  <li>Compare $new_uri with d()-&gt;name and not d()-&gt;uri in the Site Rename Check.</li>
  <li>Nginx: Helper locations to avoid 404 on legacy images paths (subdir only)</li>
  <li>Nginx: Fix spacing</li>
  <li>Nginx: Add missing variables in subdirectory config template.</li>
  <li>don't allow d() to run before drush is fully initialized</li>
  <li>Nginx: Add the fix for known problem with files/imagecache in legacy D6 sites (again).</li>
  <li>Nginx: Fail early if any required db credentials are empty, to never create broken vhost.</li>
  <li>Nginx: Block semalt botnet (extended boa mode only)</li>
  <li><a href="../../../../2358977/index.html">#2358977</a> by mrP - [nginx] Aegir redirection to non-install url leads to sites/$server_name/files 404 errors (sub-dir config sync)</li>
  <li><a href="../../../../2373923/index.html">#2373923</a> by griz - https redirect problem with Nginx (fix tested)</li>
  <li>Nginx: Avoid redirect loops (really fixed).</li>
  <li>Nginx: Avoid redirect loops (fixed).</li>
  <li>Nginx: Avoid redirect loops.</li>
  <li><a href="../../../../2358977/index.html">#2358977</a> by mrP - [nginx] Aegir redirection to non-install url leads to sites/$server_name/files 404 errors.</li>
  <li>Nginx: Simplify imagecache/styles support.</li>
  <li>Nginx: Remember real site name in $main_site_name and MAIN_SITE_NAME.</li>
  <li>Sync new lines.</li>
  <li>Nginx: proper sync with Apache redirects.</li>
  <li>Revert "Issue <a href="../../../../2373923/index.html">#2373923</a> by griz - https redirect problem with Nginx"</li>
  <li><a href="../../../../2373923/index.html">#2373923</a> by griz - https redirect problem with Nginx</li>
  <li>Merge remote-tracking branch 'origin/6.x-2.x-backports' into 6.x-2.x</li>
  <li><a href="../../../../2163979/index.html">#2163979</a> - Check if field_info_field_map() is available to not break support for old D7 versions.</li>
  <li>Make sure that db_port is never empty and defaults to 3306.</li>
  <li><a href="../../../../2266997/index.html">#2266997</a> by <a href="../../../../../u/helmo/index.html">helmo</a>, <a href="../../../../../u/cweagans/index.html">cweagans</a>: Added Do not automatically enable update module when installing a site.</li>
  <li>Nginx: Update vhosts templates to match BOA improvements #unforkboa</li>
  <li>Nginx: Sanitize aliases in vhost_disabled.tpl.php to avoid: 'nginx: [warn] server name "foo.com/bar" has suspicious symbols'</li>
  <li>Fix spacing in config lines.</li>
  <li>Nginx: Update config includes to match optional BOA features improvements #unforkboa</li>
  <li>Manage extra GRANTS to allow SQL remote access via SSH tunneling which depends on '127.0.0.1' and will not work with GRANTS for 'localhost'.</li>
  <li>Add support for file generated from /proc/cpuinfo on system with no access to /proc #unforkboa</li>
  <li>Ignore paths from OS X</li>
  <li>Backport provision_hosting_feature_enabled (2)</li>
  <li>Backport provision_hosting_feature_enabled()</li>
  <li>Fix typo.</li>
  <li>Shorten and simplify the subdirs checks code.</li>
  <li>Remove legacy subdir code and update checks.</li>
  <li>Remove whitespace.</li>
  <li>Use is_readable() instead of file_exists() when checking alias existence.</li>
  <li>Use is_dir() instead of file_exists() when checking directory existence.</li>
  <li>Use is_readable() check instead of insufficient file_exists() for config includes.</li>
  <li>Remove redundant file_exists() if is_readable() is also used.</li>
  <li>Add little debugging markers.</li>
  <li>Use strict checks: is_file() and/or is_link() instead of file_exists() before attempting unlink()</li>
  <li>Fix for mysterious warning "Could not create directory ." on Hostmaster site Verify.</li>
  <li>Nginx: Fix typo in vhosts templates.</li>
  <li><a href="../../../../2330781/index.html">#2330781</a> - Use Drush native dt() wrapper instead of not always available t()</li>
  <li><a href="../../../../2329131/index.html">#2329131</a> by <a href="../../../../../u/dagomar/index.html">dagomar</a>: Fixed Uninstalled block module causes errors.</li>
  <li>Allow usage with Drush7, now that *.drush.load.inc's aren't being included.</li>
  <li><a href="../../../../2177315/index.html">#2177315</a> by <a href="../../../../../u/pwatzeels/index.html">pwatzeels</a>: Fixed Group permissions on private/temp folder not correct on remote server.</li>
  <li><a href="../../../../2296089/index.html">#2296089</a> by <a href="../../../../../u/ergonlogic/index.html">ergonlogic</a>, <a href="../../../../../u/cosmicdreams/index.html">cosmicdreams</a>: Fixed Installer can detect incorrect default web group.</li>
  <li><a href="../../../../2169287/index.html">#2169287</a> by <a href="../../../../../u/cableman0408/index.html">cableman0408</a>: Fixed Setting user name twice (fails non-default installation profile).</li>
  <li><a href="../../../../2275467/index.html">#2275467</a> by <a href="../../../../../u/kristofferwiklund/index.html">kristofferwiklund</a>: Fixed incorrect variable in Debian postinstall script for Apache 2.4</li>
  <li>Stop false-positive warnings when SSL uses a wildcard.</li>
  <li><a href="../../../../2259461/index.html">#2259461</a> by Liam McDermott - Remove too aggressive limit_conn directive in the Nginx config templates.</li>
  <li>Revert "change version information for release 2.1"</li>
  <li><a href="../../../../1168758/index.html">#1168758</a> by <a href="../../../../../u/helmo-_-acrollet/index.html">helmo | acrollet</a>: Optionally add --include-vcs argument when using drush rsync to sync remote platform.</li>
  <li>Extend provision_drupal_fetch_site with a parameter to specify site to fetch.</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-328.html?destination=node%2F3100%23comment-form">Login</a> or <a href="../../../../../user/register/index-328.html?destination=node%2F3100%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../3100/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-2877" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/content/release-notes/older-2x-releases/20-alphas-betas-release-candidates/index.html">2.0 alphas, betas &amp; release candidates</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This section documents all the release candidates towards the 2.0 release.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-160.html?destination=node%2F2877%23comment-form">Login</a> or <a href="../../../../../user/register/index-160.html?destination=node%2F2877%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-160.html?destination=node%2F2877%23comment-form">Login</a> or <a href="../../../../../user/register/index-160.html?destination=node%2F2877%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2830" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-6.html">2.0-rc5 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is is pleased to announce the fifth release candidate for the upcoming Aegir 2.0 release!</p>

<p>This release ships a <em>ton</em> of bugfixes we have found in RC4. We also finalised subdirectory support which, while it still has <a href="#">some issues</a>, is now actually working correctly, even on multiple servers. The IP allocation code for SSL on multiple servers was also fixed, making this probably the most solid multi-server Aegir release ever. We also did some API cleanups that seemed necessary before the final 2.0 release.</p>

<p>Finally, we should also mentionned that the install process was significantly sped up thanks to the use of Drupal.org distributions to ship a single tarball for the hostmaster platform instead of using a makefile to build it from its parts all the times. During out tests, the platform <code>make</code> step went from 60 seconds to 1.5 seconds, an amazing improvement!</p>

<h1>Installing and upgrading</h1>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes, with <code>2.x</code>-specific instructions outlined in <strong>bold</strong>.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. You should be able to upgrade to 2.x releases from any release in the 1.x series, but it's better to upgrade to the latest 1.x release first.</p>

<h1>Known issues</h1>

<p>Those are the critical bugs that were found in this release that you may encounter and should watch out for.</p>

<ul>
<li>There was a problem in the Debian package, the original uploads were missing some critical files (subdir support and some makefiles). This was fixed in an intermediate package named <code>2.0~rc5.1</code>.</li>
<li>If <code>/var/aegir</code> is a symlink, it will be destroyed, see <a href="https://drupal.org/node/2118857">issue #2118857</a> for a workaround.</li>
<li><code>hosting-queued</code> doesn't get properly re-enabled on upgrades, see <a href="https://drupal.org/node/2114675">#2114675</a> for a workaround.</li>
<li>Some upgrades fail with mysterious redirection failures, see <a href="https://drupal.org/node/2118061">#2118061</a> for details.</li>
<li>Some upgrades may loop over one of the update_N() functions, see <a href="https://drupal.org/node/2118917">#2118917</a> for details and workaround.</li>
<li>Upgrading through Debian packages removes the <code>aegir.conf</code> Apache configuration file, dropping all sites, during the upgrade, see <a href="https://drupal.org/node/2121263">#2121263</a>.</li>
<li>Ubuntu sausy has some changes in apache config wich breaks Aegir <a href="https://drupal.org/node/2155705">#2155705</a></li>
</ul>

<h1>Detailed list of changes</h1>

<h2>API CHANGES</h2>

<ul>
<li>remove version pinning in hostmaster, our release process now again needs to modify only one makefile (<a href="https://drupal.org/node/2002114">#2002114</a>)</li>
<li><a href="http://drupal.org/node/1986928">#1986928: Provide 2.x upgrade guidance for services</a></li>
<li><a href="http://drupal.org/node/2099889">#2099889: More hosting_features checks in _drush_load hooks?</a></li>
<li><a href="http://drupal.org/node/1882708">#1882708: Unused 'release_id' field in 'hosting_platform'</a></li>
<li><a href="http://drupal.org/node/2012508">#2012508: hosting_context_name returns '@' if node not found</a></li>
<li><a href="http://drupal.org/node/1283738">#1283738: Add new hook provision_drupal_create_directories in _provision_drupal_create_directories</a></li>
<li>the package name changed (for example) from aegir-hostmaster2 to aegir2-hostmaster, compatibility shims are available for people having installed aegir2 before, but they will be dropped in 2.0, so make sure you upgrade to this release before upgrading to aegir 2.0</li>
</ul>

<h2>NEW FEATURES</h2>

<ul>
<li>aegir install time reduced by about 60 seconds (on a cable uplink) by using Drupal.org distributions (<a href="https://drupal.org/node/2002114">#2002114</a>)</li>
<li><a href="http://drupal.org/node/2001964">#2001964: Upgrade Views Bulk Operations 6.x-1.16</a></li>
<li><a href="http://drupal.org/node/2099057">#2099057: Allow _provision_drupal_create_directories to skip chmod</a></li>
<li><a href="http://drupal.org/node/2100251">#2100251: Implement post-enable hook for 'hosting_*' modules</a></li>
<li><a href="http://drupal.org/node/2020075">#2020075: Refactor subdirs to use proper Config class(es)</a></li>
<li><a href="http://drupal.org/node/2020079">#2020079: Multi-server subdirectory support</a></li>
<li><a href="http://drupal.org/node/2096629">#2096629: hook_provision_drupal_create_directories_alter by ref</a></li>
<li><a href="http://drupal.org/node/2086009">#2086009: Logo Cannot be changed / disabled</a></li>
<li><a href="http://drupal.org/node/2069387">#2069387: Support nonstandard ports on hostmaster-install command</a></li>
<li><a href="http://drupal.org/node/2074681">#2074681: Ports are hardcoded in hostmaster.profile</a></li>
<li><a href="http://drupal.org/node/2103173">#2103173: Provide an example of saving data to a site context</a></li>
</ul>

<h2>BUG FIXES</h2>

<ul>
<li><a href="http://drupal.org/node/2110057">#2110057: Key used for signing debian package has expired</a></li>
<li><a href="http://drupal.org/node/1635628">#1635628: do not talk about a makefile if installing over an existing platform</a></li>
<li><a href="http://drupal.org/node/2103173">#2103173: Provide an example of saving data to a site context</a></li>
<li><a href="http://drupal.org/node/2109637">#2109637: upgrade.sh script fails to checkout 6.x-2.x</a></li>
<li><a href="http://drupal.org/node/2085077">#2085077: Invalid argument supplied for foreach() hosting.ip.inc:39</a></li>
<li><a href="http://drupal.org/node/2102341">#2102341: Differentiate between a feature being disabled vs absent</a></li>
<li><a href="http://drupal.org/node/2029799">#2029799: Error deleting a platform: Call to a member function succeed() on a non-object</a></li>
<li><a href="http://drupal.org/node/1971348">#1971348: Site aliases get chopped if longer than 50 characters</a></li>
<li><a href="http://drupal.org/node/2071317">#2071317: Incorrect SSL IP is deployed to servers in a web pack</a></li>
<li><a href="http://drupal.org/node/2098289">#2098289: Backup task does not detect failed database dump</a></li>
<li><a href="http://drupal.org/node/2098389">#2098389: subdirs kicks in even when subdirs module is disabled.</a></li>
<li><a href="http://drupal.org/node/1189576">#1189576: can't disable the DNS service from the frontend</a></li>
<li><a href="http://drupal.org/node/1931000">#1931000: Missing drush backend output in frontend log</a></li>
<li><a href="http://drupal.org/node/2077793">#2077793: Queue daemon collecting quotes</a></li>
<li><a href="http://drupal.org/node/2097689">#2097689: clean_urls don't work well with subdirectory</a></li>
<li><a href="http://drupal.org/node/2097363">#2097363: Add site spins forever</a></li>
<li><a href="http://drupal.org/node/1387578">#1387578: hosting_queues_cron_cmd makes unwarranted assumptions about bash availablility</a></li>
<li><a href="http://drupal.org/node/2084963">#2084963: SSL vhost does not respect Alias redirects</a></li>
<li><a href="http://drupal.org/node/2061509">#2061509: List of platforms is no longer updated to match install profile clicked at node/add/site</a></li>
<li><a href="http://drupal.org/node/2046783">#2046783: Task dialogs won't open after clearing the cache</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-161.html?destination=node%2F2830%23comment-form">Login</a> or <a href="../../../../../user/register/index-161.html?destination=node%2F2830%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-161.html?destination=node%2F2830%23comment-form">Login</a> or <a href="../../../../../user/register/index-161.html?destination=node%2F2830%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2782" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-7.html">2.0-rc4 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>An error in the manual portion of our <a href="../../../../../content/release-process/index.html">release process</a> resulted in the incorrect version of the code-base being built. See the <a href="../../../../../2/index-8.html">release notes for 2.0-rc3</a> for relevant changes since 2.0-rc2.</p>

<h1>Known bugs</h1>

<p>In addition to those listed in the <a href="../../../../../2/index-8.html">release notes for 2.0-rc3</a>, note that some people have experienced problems with downloading a patch in the main Aegir makefile. This is most likely due to problems with drupal.org's SSL certificate. If you are experiencing such an issue, there is a simple work-around: edit the aegir.make file in the provision/ directory to make the path use http:// instead of https://.</p>

<p>For a Debian-based system (including Ubuntu), this would look something like:</p>

<pre><code>$ sudo vi /usr/bin/drush/commands/provision/aegir.make
</code></pre>

<p>For 'manual' installs on other OS's, it would probably be:</p>

<pre><code>$ sudo vi /var/aegir/provision/aegir.make
</code></pre>

<p>Change the line:</p>

<pre><code>projects[drupal][patch][] = "https://drupal.org/files/common.inc_6.28.patch"
</code></pre>

<p>to read:</p>

<pre><code>projects[drupal][patch][] = "http://drupal.org/files/common.inc_6.28.patch"
</code></pre>

<p>Then re-run the install. On Debian/Ubuntu machines:</p>

<pre><code>$ sudo apt-get install aegir2
</code></pre>

<p>On manually installed systems (CentOS, etc.) as the aegir user:</p>

<pre><code>$ drush hostmaster-install
</code></pre>

<h1>Detailed list of changes</h1>

<h2>API CHANGES</h2>

<p>None.</p>

<h2>NEW FEATURES</h2>

<p>None.</p>

<h2>BUG FIXES</h2>

<ul>
  <li>Fixed makefiles to point to proper versions of projects.</li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-162.html?destination=node%2F2782%23comment-form">Login</a> or <a href="../../../../../user/register/index-162.html?destination=node%2F2782%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-162.html?destination=node%2F2782%23comment-form">Login</a> or <a href="../../../../../user/register/index-162.html?destination=node%2F2782%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2755" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-8.html">2.0-rc3 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is pleased to announce the third release candidate for the upcoming Aegir 2.0 release.</p>

<p>This release mainly fixes a couple critical bugs in 2.0-rc2 that were causing problems when sites were being cloned or renamed. We've added a couple small features, such as additional options during hostmaster-install, and allowing the redirect to the Welcome page to be turned off. Also, we've made a small addition to the API, in that there is now a hook available (<code>hook_provision_drupal_create_directories_alter()</code>) to allow altering the directories created when a site installed.</p>

<p>In order to better support PHP 5.4, we have added a patch to Drupal core to suppress E_STRICT warnings. These were harmless, but annoying. They were caused by a changed in PHP error-reporting in PHP 5.4, and the Views module's maintainers' desire to remain backward compatible with PHP 4. For more details, see: <a href="http://drupal.org/node/2060727">#2060727: Patch Drupal core to suppress E_STRICT warnings on PHP5.4.</a></p>

<p>A number of pending issues require a new stable release of Drush (5.10), so we will work with the maintainers to help get a new release out.</p>

<h1>Known issues</h1>

<p>Our release process is still done by hand instead of being more automated because we can't use our aegir distribution as core (<a href="https://drupal.org/node/1991764">issue #1991764</a>).</p>

<p><a href="https://drupal.org/node/1931000">Issue #1931000: Missing drush backend output in frontend log</a> has been fixed, but may require a <a href="https://drupal.org/node/2025527#comment-7566747">patch to Drush</a> for the use of hosting-queued.</p>

<p>Subdirectory support is still very preliminary and needs a number of issues to be fixed before completion, see <a href="https://drupal.org/node/2046167">#2046167</a> for details. Note that this will not block a stable release, since this feature is 'experimental', and additional re-factoring can occur during the stable release cycle.</p>

<h1>Detailed list of changes</h1>

<h2>API CHANGES</h2>

<ul>
  <li><a href="http://drupal.org/node/1283738">#1283738</a> by halcyonCorsair, cweagans: Allow other commands to add or alter the directories to be created.</li>
</ul>

<h2>NEW FEATURES</h2>

<ul>
  <li><a href="http://drupal.org/node/2069387">#2069387</a> by cweagans, mstenta: Support nonstandard ports on hostmaster-install command.</li>
  <li><a href="http://drupal.org/node/2067617">#2067617</a>: Allow hostmaster-install to accept '--working-copy' option.</li>
  <li>Allow the redirect to the welcome page to be turned off.</li>
</ul>

<h2>BUG FIXES</h2>

<ul>
  <li>Add E_STRICT patch to test openatrium makefile so tests will pass on PHP 5.4.</li>
  <li><a href="http://drupal.org/node/2067603">#2067603</a>: Fix original and cloned site pointing to the same database.</li>
  <li><a href="http://drupal.org/node/2048653">#2048653</a>: Ensure mysql is secure before proceeding with hostmaster install.</li>
  <li><a href="http://drupal.org/node/2060727">#2060727</a>: Patch Drupal core to suppress E_STRICT warnings on PHP5.4.</li>
  <li><a href="http://drupal.org/node/2038279">#2038279</a>: Warn of invalid account email on site install.</li>
  <li><a href="http://drupal.org/node/2055949">#2055949</a>: Fix migrate drops wrong database when domain name changes.</li>
  <li><a href="http://drupal.org/node/2074681">#2074681</a> by cweagans, mstenta: Fixed ports are hardcoded in hostmaster.profile.</li>
  <li>Use custom functions for block visibility.</li>
  <li><a href="http://drupal.org/node/1940378">#1940378</a>: Fix PHP 5.4 warning by initializing an object variable prior to assigning properties.</li>
  <li><a href="http://drupal.org/node/2050881">#2050881</a>: Call drush.php via php, since it isn't executable when installed via PEAR.</li>
  <li>Enable platform site-list block, since it had to be renamed.</li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-163.html?destination=node%2F2755%23comment-form">Login</a> or <a href="../../../../../user/register/index-163.html?destination=node%2F2755%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-163.html?destination=node%2F2755%23comment-form">Login</a> or <a href="../../../../../user/register/index-163.html?destination=node%2F2755%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2738" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-9.html">2.0-rc2 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is pleased to announce the second release candidate for the upcoming Aegir 2.0 release.</p>

<p>This release mainly fixes our project makefile that, due to an error in our build process, did not pull in the latest code. As a result, installing 2.0-rc1 actually installed a 2.0-beta2 codebase. While changes between 2.0-rc1 and 2.0-rc2 have otherwise been minimal, we invite you to explore all the new features and bugfixes in <a href="../../../../../2/index-10.html">2.0-rc1</a>.</p>

<p>Note that we have taken this opportunity to update our external dependencies, as well.</p>

<h1>Known issues</h1>

<p>Our release process is still done by hand instead of automated because we can't use our aegir distribution as core (<a href="https://drupal.org/node/1991764">issue #1991764</a>).</p>

<p><a href="https://drupal.org/node/1931000">Issue #1931000: Missing drush backend output in frontend log</a> has been fixed, but may require a <a href="https://drupal.org/node/2025527#comment-7566747">patch to Drush</a> for the use of hosting-queued.</p>

<p>Subdirectory support is still very preliminary and needs those issues to be fixed before completion, see <a href="https://drupal.org/node/2046167">#2046167</a> for details.</p>

<p><strike><a href="https://drupal.org/node/2046783">Issue #2046783: Task dialogs won't open after clearing the cache</a> was the result of updating our dependencies. Refreshing the page is usually sufficient to make modal dialogs work again.</strike> It looks like this was probably specific to the development environment, as we can no longer reproduce it.</p>

<p>A critical bug was discovered: <a href="https://drupal.org/node/2055949">Issue #2055949: Migrate drops wrong database when domain name changes</a>. It has been fixed in 6.x-2.x, and a <a href="https://drupal.org/node/2055949#comment-7713571">patch for 2.0-rc2</a> is available.</p>

<h1>Detailed list of changes</h1>

<h2>API CHANGES</h2>

<ul>
  <li>Update external dependencies.</li>
</ul>

<h2>NEW FEATURES</h2>

<p>none</p>

<h2>BUG FIXES</h2>

<ul>
  <li>Add dependency on jquery_update, so we can use the more recent version of modal_dialog.</li>
  <li>Enable login and nav blocks explicitly.</li>
  <li>treat symlinks as existing, fixes <a href="../../../../2046249/index.html">#2046249</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-164.html?destination=node%2F2738%23comment-form">Login</a> or <a href="../../../../../user/register/index-164.html?destination=node%2F2738%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-164.html?destination=node%2F2738%23comment-form">Login</a> or <a href="../../../../../user/register/index-164.html?destination=node%2F2738%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2730" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-10.html">2.0-rc1 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is pleased to announce the first release candidate for the upcoming Aegir 2.0 release.</p>

<p>This release mainly targets a few critical bugs that were found in the second beta, mostly related to ongoing Views, Drush integration and access control. We also introduce a number of new features and finally drop support for provisioning Drupal 5 sites completely (for real this time!). Along the way, we did quite a bit of API cleanup.</p>

<p>While we are in feature freeze, we have continued to add some UI improvements, since they don't affect the API. We've added some long-standing UI enhancements, and fixed a number of bugs in the views integration and other usability problems, as well as overhauling our access control. Significant improvements to the package-management system have also been introduced.</p>

<p>Our only remaining critical bugs are basically waiting on a new release of Drush, upgrade testing on Nginx and some contrib upgrade guidance documentation. If no other critical bugs are discovered during the time it takes us to fix these, we should move on to a full release of Aegir 2.0!</p>

<h1>Known issues</h1>

<p>Our release process is still done by hand instead of automated because we can't use our aegir distribution as core (<a href="https://drupal.org/node/1991764">issue #1991764</a>).</p>

<p><a href="https://drupal.org/node/1931000">Issue #1931000: Missing drush backend output in frontend log</a> has been fixed, but may require a <a href="https://drupal.org/node/2025527#comment-7566747">patch to Drush</a> for the use of hosting-queued.</p>

<p>Subdirectory support is still very preliminary and needs those issues to be fixed before completion, see <a href="https://drupal.org/node/2046167">#2046167</a> for details.</p>

<h1>Detailed list of changes</h1>

<h2>API CHANGES</h2>

<ul>
    <li><a href="https://drupal.org/node/1034520">#1034520</a>: Cleanup package instances when deleting sites and platforms.</li>
<li><a href="https://drupal.org/node/1830220">#1830220</a>: Drop support for Drupal 5.</li>
  <li><a href="https://drupal.org/node/1975086">#1975086</a>: Move log parsing and status updates to seperate functions and call them from a shutdown function.</li>
  <li>Pass the entity type when we're sync'ing package instances.</li>
  <li>Save the platform field when creating a package instance record.</li>
  <li>Move to individual operation callbacks for VBO tasks.</li>
  <li><a href="https://drupal.org/node/2022849">#2022849</a>: Record disable and delete backups in the database.</li>
  <li><a href="https://drupal.org/node/2031491">#2031491</a>: Rename SSL permission to be more descriptive.</li>
  <li>Clean up hosting_node_grants().</li>
  <li>Add 'administer' permissions for platforms and servers, and allow platforms to be viewed.</li>
</ul>

<h2>NEW FEATURES</h2>

<ul>
  <li><a href="https://drupal.org/node/905326">#905326</a> by ergonlogic, crea: Improve file path changes.</li>
  <li><a href="https://drupal.org/node/1201174">#1201174</a>: Make UID1 username configurable.</li>
  <li><a href="https://drupal.org/node/1345118">#1345118</a>: Make platform access control an autocomplete form.</li>
  <li><a href="https://drupal.org/node/1515416">#1515416</a> by ergonlogic, helmo, Deciphered: Replace listing of sites and platforms using a package with a view.</li>
  <li><a href="https://drupal.org/node/1975086">#1975086</a>: Add 'update status' button to tasks.</li>
  <li><a href="https://drupal.org/node/2005310">#2005310</a>: Add VBO operations to platforms view.</li>
  <li><a href="https://drupal.org/node/2006074">#2006074</a> by Deciphered: Enable backups via VBO.</li>
  <li><a href="https://drupal.org/node/2025787">#2025787</a> by omega8cc, ergonlogic, anarcat: Open site goto link in a new window/tab.</li>
  <li><a href="https://drupal.org/node/2022813">#2022813</a> by Deciphered: Expose backups to Views.</li>
  <li><a href="https://drupal.org/node/2027269">#2027269</a>: Update a task's status after all Drush operations are complete.</li>
  <li><a href="https://drupal.org/node/2031491">#2031491</a>: Review and update permissions for all roles.</li>
  <li><a href="https://drupal.org/node/2031765">#2031765</a>: Clean up VBO operations with Action Permissions.</li>
  <li><a href="http://drupal.org/node/2035873">#2035873</a>: Show package 'popularity' on platform package view</li>
  <li><a href="https://drupal.org/node/2036283">#2036283</a>: Make Aegir aware of site-specific packages.</li>
  <li><a href="https://drupal.org/node/2036793">#2036793</a> Ignore hidden modules and profiles.</li>
  <li><a href="https://drupal.org/node/2037045">#2037045</a> by helmo, ergonlogic: Change some log statuses to better match Drush's log styling.</li>
  <li><a href="https://drupal.org/node/2037965">#2037965</a>: Clean up hosting-pause.</li>
  <li><a href="https://drupal.org/node/2038279">#2038279</a> by ergonlogic, Jon Pugh: Validate email during site install.</li>
  <li>Display all validation errors when adding a client, and limit to 20 suggestions.</li>
  <li>Flag rollbacks as warnings in our task logs.</li>
  <li>Handle package page views separately for sites and platforms.</li>
  <li>Update default hosting_site views to use new access plugin for blocks, and add a couple more displays for non admin listings.</li>
  <li>Add Views access plugin for hosting_site and hosting_package.</li>
  <li>Add views handler to filter packages by status.</li>
</ul>

<h2>BUG FIXES</h2>

<ul>
  <li><a href="https://drupal.org/node/1238618">#1238618</a>: Fix client form validation.</li>
  <li><a href="https://drupal.org/node/1263264">#1263264</a> by ergonlogic, recidive, anarcat: Specify a type when getting a package, to avoid collisions.</li>
  <li><a href="https://drupal.org/node/1647830">#1647830</a> by sambonner: Fix Incorrect ownership of directories under sites/example.com/private/files/.</li>
  <li><a href="https://drupal.org/node/1861898">#1861898</a> by ergonlogic, Jon Pugh: Don't hardcode the types of entities to which we can attach tasks.</li>
  <li><a href="https://drupal.org/node/1975086">#1975086</a> by helmo | anarcat: Fixed updating a task when there is none.</li>
  <li><a href="https://drupal.org/node/2025355">#2025355</a>: view platform' permission broken</li>
  <li><a href="https://drupal.org/node/2026417">#2026417</a>: Disambiguate site operations.</li>
  <li><a href="https://drupal.org/node/2031491">#2031491</a>: Fix roles.</li>
  <li><a href="http://drupal.org/node/2031747">#2031747</a>: Fix Views block placement and visibility.</li>
  <li><a href="https://drupal.org/node/2038891">#2038891</a>: Add 'client_email' option to 'provision-install-backend'.</li>
  <li><a href="https://drupal.org/node/2038891">#2038891</a>: Switch from '--invoke' to '--strict=0' for backend calls.</li>
  <li><a href="https://drupal.org/node/2040285">#2040285</a> debian: properly detect webserver, again</li>
  <li><a href="http://drupal.org/node/2044251">#2044251</a> drush command '@none provision-save' could not be found</li>
  <li><a href="https://drupal.org/node/2045907">#2045907</a>: Remove extra tabs from deleted platforms.</li>
  <li>Fix php 5.4 issue</li>
  <li>Add missing unicode include for UID1 name validation.</li>
  <li>Fix update hook name.</li>
  <li>Only register shutdown function to update task status in the context of a front-end task.</li>
  <li>Don't display package block on profiles.</li>
  <li>Only show link to add clients on site form to those with proper permissions.</li>
  <li>Override hook_access functions for node_grants when hosting_client is enabled.</li>
  <li>Register node type in hosting_task's Hosting feature.</li>
  <li>Clean up Views exposed forms.</li>
  <li>Fix Views block placement and visibility.</li>
  <li>Only display client sites block on the 'view' tab.</li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-165.html?destination=node%2F2730%23comment-form">Login</a> or <a href="../../../../../user/register/index-165.html?destination=node%2F2730%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-165.html?destination=node%2F2730%23comment-form">Login</a> or <a href="../../../../../user/register/index-165.html?destination=node%2F2730%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2725" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-11.html">2.0-beta2 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is pleased to announce the second stabilization (beta) release of the Aegir 2.x branch.</p>

<p>This release mainly targets a few critical bugs that were found in the first beta, namely IP allocation on non-SSL and non-cluster sites which was completely broken and bugs the Debian package. We also introduce a few new features and finally drop support for provisionning Drupal 5 sites completely.</p>

<p>While we are in feature freeze, we have continued to add some UI improvements, since they don't affect the API. We've added some long-standing UI enhancements, and fixed a number of bugs in the views integration and other usability problems.</p>

<p>We are down to only one active critical bug. If no other critical bugs are discovered during the time it takes us to fix it, we should move on to our first release candidate!</p>

<h1>Known issues</h1>

<p>Our release process is still done by hand instead of automated because we can't use our aegir distribution as core (<a href="https://drupal.org/node/1991764">issue #1991764</a>)</p>

<p><a href="https://drupal.org/node/1931000">Issue #1931000: Missing drush backend output in frontend log</a> has been fixed, but may require a <a href="https://drupal.org/node/2025527#comment-7566747">patch to Drush</a> for the use of hosting-queued.</p>

<p>Subdirectory support is still very preliminary and needs those issues to be fixed before completion:</p>

<ul>
<li>Nginx support missing (<a href="https://drupal.org/node/2020091">issue #2020091</a>)</li>
<li>If <code>example.com/foo</code> is created, the <code>example.com</code> virtual will be overwritten and the site inaccessible under that domain (<a href="https://drupal.org/node/2020089">issue #2020089</a>)</li>
<li>Multi-server support is untested (<a href="https://drupal.org/node/2020079">issue #2020079</a>)</li>
<li>Code needs to be refactored to the new 2.x API (<a href="https://drupal.org/node/2020075">issue #2020075</a>)</li>
</ul>

<p>The move to Views has highlighted some additional issues:</p>

<ul>
<li><a href="https://drupal.org/node/2025355">#2025355: view platform' permission broken</a></li>
<li><a href="https://drupal.org/node/2005310">#2005310: No actions available on platforms view</a></li>
</ul>

<p>Fixing <a href="https://drupal.org/node/2027269">#2027269: warnings and errors in front-end pre- and post- hooks are ignored for task status</a> required a new Drush commandfile, and thus a 'drush cc drush' if upgrade between an alpha/beta release and HEAD.</p>

<p>The debian package <em>still</em> doesn't properly configure the webserver, a patch has been committed and a workaround is available in <a href="https://drupal.org/node/2040285">issue #2040285</a>.</p>

<h1>New features</h1>

<ul>
<li><a href="http://drupal.org/node/600350">#600350: provide a nice "history" of ran tasks</a></li>
<li><a href="http://drupal.org/node/1988642">#1988642: Add site by platform</a></li>
<li><a href="http://drupal.org/node/1912238">#1912238: automatically build and upload aegir 2.x packages</a></li>
<li><a href="http://drupal.org/node/585830">#585830: usability story: "How do I create a client?"</a></li>
<li><a href="http://drupal.org/node/1830220">#1830220: Drop support for Drupal 5 in 2.x</a></li>
<li><a href="http://drupal.org/node/1212086">#1212086: Platforms should be locked by default</a></li>
<li><a href="http://drupal.org/node/1403208">#1403208: Add additional roles</a></li>
<li><a href="http://drupal.org/node/1174440">#1174440: provide a way to show site's DB username/password in the frontend</a></li>
<li><a href="http://drupal.org/node/606120">#606120: Disabled sites should be class hosting-warning, enabled but problematic sites should be hosting-error</a></li>
</ul>

<h1>Bug fixes</h1>

<ul>
<li><a href="http://drupal.org/node/1992254">#1992254: restarting the mysql server crashes hosting-queued</a></li>
<li><a href="http://drupal.org/node/1761932">#1761932: Explain that updates will require the verify task to run</a></li>
<li><a href="http://drupal.org/node/1603702">#1603702: allows creation of SSL site even if there are no IPs available</a></li>
<li><a href="http://drupal.org/node/1130992">#1130992: User 1 has lost the ability to create platforms</a></li>
<li><a href="http://drupal.org/node/1126638">#1126638: two sites can take the same server IP for SSL</a></li>
<li><a href="http://drupal.org/node/1994000">#1994000: Nginx looking in wrong place for SSL setup information</a></li>
<li><a href="http://drupal.org/node/2023621">#2023621: Unable to allocate IP address for certificate, disabling SSL.</a></li>
<li><a href="http://drupal.org/node/1929454">#1929454: hosting_cron.modules requires hosting_site.module but lacks a dependency.</a></li>
<li><a href="http://drupal.org/node/2014589">#2014589: Views-based package list omits module/theme version</a></li>
<li><a href="https://drupal.org/node/2005246">#2005246: It is possible to disable Hostmaster site via bulk site operations</a></li>
<li><a href="http://drupal.org/node/2025533">#2025533: Mod Rewrite and Apache.conf symlink not created with debian package - beta2</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-166.html?destination=node%2F2725%23comment-form">Login</a> or <a href="../../../../../user/register/index-166.html?destination=node%2F2725%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-166.html?destination=node%2F2725%23comment-form">Login</a> or <a href="../../../../../user/register/index-166.html?destination=node%2F2725%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2714" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-12.html">2.0-beta1 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is pleased to announce the first stabilization (beta) release of the Aegir 2.x branch, after nearly 3 weeks of development since our second alpha release. While we had expected an additional alpha release prior to the beta cycle, development on outstanding features went smoother than foreseen. We've added some significant features, and fixed a couple bugs and (again) made some important improvements to our API.</p>

<p>This release marks our feature freeze. The intention is to limit any further changes to only critical and major bug fixes. However, exceptions may be granted on a case by case basis. Our development efforts will now move to tackling all release critical bugs. Once all of these are fixed, we'll move on to our release candidate (RC) phase. That said, we expect this release to be sufficiently stable that we intend to run it in production at Koumbit soon.</p>

<h1>Release overview</h1>

<p>This release introduces a major new feature into Aegir core: support for installing sites in subdirectories (example.com/foo, example.com/bar, etc.). This has been our number one feature request from higher education institutions, and so we hope that this will enable greater adoption within that sector. While categorized as an "experimental" feature, we feel our approach is sufficiently strong that we're considering merging this into our core site functionality.</p>

<p>Additional new features include a nice homepage, fixes to SSL support and IP allocation on clusters, and we've added a couple new roles.</p>

<p>We've also tackled a number of bugs, especially in the Debian package, which now supports installing Aegir on Nginx servers. We've also fixed some issues introduced with the new views code, and improved nginx support.</p>

<p>The project's Debian repo now includes Drush 5.9, and we have migrated the 'aegir2' packages to the Testing repository.</p>

<h1>Known issues</h1>

<ul>
<li>the debian package shows a lot of garbage when installing from scratch, which is almost harmless except that we don't see the login URL, use <code>drush @hostmaster uli</code> to get a new one, fixed in <a href="http://drupal.org/node/2002076">issue #2002076</a></li>
<li>SSL support was severely broken for single servers and could lead to loss of the SSL certificate copies when a non-SSL site is installed. See commits f0980e0..9b86038 in Provision for fixes. (fixed in issue <a href="https://drupal.org/node/2023621">#2023621</a>)</li>
<li>the Debian package is severely broken - in most configuration (e.g. clean installs but not upgrade) the install will just fail with a permission denied. See commits <a href="http://drupalcode.org/project/provision.git/commit/d4efa37">d4efa37</a> and <a href="http://drupalcode.org/project/provision.git/commit/56d1718">56d1718</a> for fixes.</li>
</ul>

<p>These are related to drush:</p>

<ul>
<li>some warnings and errors may not show up in Aegir's task logs, making it believe tasks succeeded when the actually failed. this affects only hosting-queued. (<a href="https://drupal.org/node/1931000">issue #1931000</a> / <a href="https://drupal.org/node/1982502">issue #1982502</a>)</li>
<li>our release process is now done by hand instead of automated because we can't use our aegir distribution as core (<a href="https://drupal.org/node/1991764">issue #1991764</a>)</li>
</ul>

<p>Subdirectory support is still very preliminary and needs those issues to be fixed before completion:</p>

<ul>
<li>Nginx support missing (<a href="https://drupal.org/node/2020091">issue #2020091</a>)</li>
<li>If <code>example.com/foo</code> is created, the <code>example.com</code> virtual will be overwritten and the site inaccessible under that domain (<a href="https://drupal.org/node/2020089">issue #2020089</a>)</li>
<li>Multi-server support is untested (<a href="https://drupal.org/node/2020079">issue #2020079</a>)</li>
<li>Code needs to be refactored to the new 2.x API (<a href="https://drupal.org/node/2020075">issue #2020075</a>)</li>
</ul>

<h1>API changes</h1>

<ul>
<li>Multiple files can be managed in a single context now (see <a href="https://drupal.org/node/2000038">issue #2000038</a>, <a href="https://drupal.org/node/1784108">issue #1784108</a>)</li>
</ul>

<h1>New features</h1>

<ul>
<li>Support for installing in subdirectories (<a href="https://drupal.org/node/705026">issue #705026</a>)</li>
<li>Proper homepage on startup so non-logged-in users don't see an error page, and new users have basic instructions (<a href="https://drupal.org/node/1793740">issue #1793740</a>)</li>
<li>SSL support for clusters should now work properly (<a href="https://drupal.org/node/2000964">issue #2000964</a>)</li>
<li>New roles added: 'aegir platform manager', 'aegir administrator' (<a href="https://drupal.org/node/1403208">issue #1403208</a>)</li>
<li>Convert list of platforms to use views (<a href="https://drupal.org/node/1876350">Issue #1876350</a>)</li>
</ul>

<h1>Bugfixes</h1>

<ul>
<li>Debian package support for nginx was severely broken <a href="http://drupal.org/node/2001142">issue #2001142</a></li>
<li>the views bulk operations version shipped with alpha2 had security issues, see <a href="http://drupal.org/node/2001964">issue #2001964</a></li>
<li>an update hook was incorrectly named, and has since been fixed. The updates should not be destructive, but may output errors.</li>
<li>Placement of a number of our new Views-based blocks was omitted from the install profile, and so won't appear on a fresh install. These can be manually placed on the blocks page.</li>
<li>fix warning "Invalid argument supplied for foreach()" (<a href="https://drupal.org/node/2005698">issue #2005698</a>)</li>
<li>fix "Unknown options for provision-save" error (<a href="https://drupal.org/node/1972286">issue #1972286</a>)</li>
<li>removed hardcoded checks for IP addresses in <code>settings.php</code> that belong to core (<a href="https://drupal.org/node/2013683">issue #2013683</a>)</li>
<li>Views filter for status does not tell what to filter for (<a href="https://drupal.org/node/1997088">issue #1997088</a>)</li>
<li>nginx cloaks database credentials properly now</li>
<li>configure nginx to properly talk to the default php-fpm configuration in Debian (<a href="https://drupal.org/node/1635622">issue #1635622</a>)</li>
<li>lots of fixes for the Debian package, including

<ul>
<li>Silence garbage in the install output (<a href="https://drupal.org/node/2002076">issue #2002076</a>)</li>
<li>nginx support in sudoers file (<a href="https://drupal.org/node/2001142">issue #2001142</a>)</li>
<li>nginx autodetection in Debian package (<a href="https://drupal.org/node/2003712">issue #2003712</a>)</li>
</ul></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-167.html?destination=node%2F2714%23comment-form">Login</a> or <a href="../../../../../user/register/index-167.html?destination=node%2F2714%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-167.html?destination=node%2F2714%23comment-form">Login</a> or <a href="../../../../../user/register/index-167.html?destination=node%2F2714%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2633" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-13.html">2.0-alpha2 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is pleased to announce the second preview (alpha) release of the Aegir 2.x branch, after nearly 3 months of development since our first alpha release. We've squashed a number of tenacious bugs, added some nifty features, and made some important improvements to our API. We expect at least one more alpha release before we call a feature-freeze, and begin out stabilizing and cleanup (beta) release cycle.</p>

<p>During this release cycle, we also began work on Aegir 3, a more-or-less straight port of Aegir 2 to Drupal 7. We continue to sync changes in 2.x to our 3.x branch, and look forward to continuing the port (and beginning to add new features) as soon as we've released our first stable 2.x release.</p>

<p>Our next alpha release will target getting sub-site support (example.com/site1, example.com/site2, etc.) into Aegir core as an experimental feature. This has been our number one feature request from higher education institutions, and so we intend to incorporate it into Aegir 2, in order to enable greater adoption within that sector. We have a fairly detailed implementation plan, and so feel confident that we can incorporate this major feature, in fairly short order.</p>

<h1>Release overview</h1>

<p>This release features improvements to the IP management mechanisms that were broken in the last alpha1 release. We now manage IP addresses individually, and check if an IP is in use before allowing it to be deleted.</p>

<p>We also finally leave the files alone on spokes in the multi-server model, a long-standing bug in the 1.x series that led to data loss. A lot of work was done to standardize the Nginx configuration to allow for simpler, yet optional, configurations that leave the admin in charge of choosing the optimisation methods.</p>

<p>Also, we've moved Hosting and Eldir back to their own projects, and are now included via our makefiles. This simplifies building custom install profiles, though it complicates our release process somewhat. We've also added a drupal-org.make that will eventually allow proper distribution bundling of Aegir.</p>

<p>Finally, we've moved to using Views and View Bulk Operations for our lists of sites, platforms and packages. While there remain some rough edges, this will allow much easier customization of our principal UIs. It has also significantly reduced the custom code we have to maintain, in favour of exported Views, which simplifies maintenance.</p>

<h1>Known issues</h1>

<ul>
<li>the Debian package support for nginx is severely broken <a href="http://drupal.org/node/2001142">#2001142</a></li>
<li>the views bulk operations version shipped with alpha2 has security issues, see <a href="http://drupal.org/node/2001964">#2001964</a></li>
<li>the debian package shows a lot of garbage when installing from scratch, which is almost harmless except that we don't see the login URL, use <code>drush @hostmaster uli</code> to get a new one, fixed in <a href="http://drupal.org/node/2002076">#2002076</a></li>
<li>an update hook was incorrectly named, and has since been fixed. This may cause the hook to be run again, if the site is upgraded to a newer version. The updates should not be destructive, but may output errors.</li>
<li>Placement of a number of our new Views-based blocks was omitted from the install profile, and so won't appear on a fresh install. These can be manually placed on the blocks page.</li>
</ul>

<h1>API changes</h1>

<ul>
<li>deprecate hosting_ip_delete_revision(), dupe of hosting_ip_delete() now that revisions are gone (8 weeks ago)</li>
<li>allow running tasks that appear to be running with --force</li>
<li>remove deprecated DEBUG flag in debian package</li>
<li>#1785624: Some Drupal API changes in D7 (and D8) are not used/respected properly</li>
<li>#1945950: Rename provision_drupal_sync_site_back()</li>
<li>#1083366: Make the spokes authoritative for files/ and private/ directories</li>
<li>#1812338: Refactor sync back</li>
<li>a new control file has been introduced in /etc/nginx/basic_nginx.conf to force the nginx configuration to be the "simpler" one (see #1635596: nginx: do not decide the policy for users)</li>
<li>#1987026: Move generated platform drushrc.php to sites/all/drush</li>
</ul>

<h1>New features</h1>

<ul>
<li>#1929372: Flag tasks with logged warnings</li>
<li>#1515416: On a package page, show table listing sites and platforms using the package</li>
<li>#1853620: Add db_name to site summary</li>
<li>#1681904: Ability to configure a url to redirect to in site configuration.</li>
<li>#1968226: manage each IP individually on the server level - manage IPs individually</li>
<li>add uninstall command</li>
<li>Nginx Security: BEAST attack protection and fix for PCI compliance.</li>
<li>#1980136: Allow setting default profile from the front-end.</li>
<li>#588728: Replace custom lists with Views and VBO for sites, platforms and packages.</li>
</ul>

<h1>Bugfixes</h1>

<ul>
<li>#1930670: Duplicate entry 0 for key PRIMARY in hosting_ip_addresses when installing / upgrading</li>
<li>#1907028: user warning: Table 'XXX.hosting_ip_addresses' doesn't exist</li>
<li>#1961920: nginx: [emerg] invalid number of arguments in "limit_conn_zone" directive in /etc/nginx/conf.d/aegir.conf</li>
<li>#1923490: Incorrect error message in aegir-provision2.preinst</li>
<li>#1901508: "gzip --rsyncable" is invalid on OS X</li>
<li>#1678528: Database deleted on edge cases</li>
<li>#1930740: provision-delete leaves a drushrc.php lying around</li>
<li>Nginx: Do not override Nginx name with fake Apache name.</li>
<li>#1990370: Enable Hosting feature dependencies.</li>
</ul>

<h1>Other</h1>

<ul>
<li>#1923552: Rename 'Queue runner settings' tab to 'Queue daemon'</li>
<li>#1834036: Add 'hosting platform pathauto' to the .gitignore</li>
<li>#1785624: Some Drupal API changes in D7 (and D8) are not used/respected properly</li>
<li>#1979496: Update upgrade.sh.txt for Drush 5</li>
<li>#1974752: Document old_uri option for provision-deploy</li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-168.html?destination=node%2F2633%23comment-form">Login</a> or <a href="../../../../../user/register/index-168.html?destination=node%2F2633%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-168.html?destination=node%2F2633%23comment-form">Login</a> or <a href="../../../../../user/register/index-168.html?destination=node%2F2633%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2338" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../2/index-14.html">2.0-alpha1 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is pleased to announce the first preview release (<em>alpha</em>) of the Aegir 2.x branch, after almost 2 years of development. We have been pretty busy with the maintenance of the 1.x branch, so development has been sometimes intermittent, but it is not over yet!</p>

<p>This release is only a first of a series of alpha releases that are tailored to make upcoming changes available to a wider audience than people ready to install from git, but also to make features more widely available and tested. More alpha releases will be published on a more regular basis in the weeks to come as more features from the <a href="../../../../1829/index.html">new provisional roadmap</a> are implemented. We are still considering the following:</p>

<p>We have set the following priorities:</p>

<ol>
<li>subsite support (<a href="https://drupal.org/node/705026">#705026</a>) - now that mig5 did most of the work ;)</li>
<li>nginx cleanup (<a href="https://drupal.org/node/1635596">#1635596</a>, <a href="https://drupal.org/node/1635622">#1635622</a>, <a href="https://drupal.org/node/1622846">#1622846</a>, <a href="https://drupal.org/node/1635586">#1635586</a>, <a href="https://drupal.org/node/1608910">#1608910</a>) and Nginx Debian package (<a href="https://drupal.org/node/1348560">#1348560</a>)</li>
<li>files/ sync settled (<a href="https://drupal.org/node/1083366">#1083366</a>)</li>
<li><STRIKE>SSL code cleanup (<a href="http://drupal.org/node/941870">#941870</a>, <a href="../../../../../discuss/first-quarterly-report-aegir-funding-work/index.html#SSL_and_IP_allocation_work">see also this report</a>)</strike> - done! Now onto testing and fixing the actual bugs linked from <a href="http://drupal.org/node/941870">#941870</a></li>
</ol>

<p>We would like to get those in 2.x, but since no one has really started significant work on those, we are more likely to simply postpone those to 3.x at this point.</p>

<ol>
<li>standard archive support (<a href="https://drupal.org/node/1138882">#1138882</a>, <a href="../../../../../roadmap/2/index.html#Standard_archive_support">original roadmap description</a>)</li>
<li>intersite security (the infamous <a href="https://drupal.org/node/762138">#762138</a>)</li>
<li>more intelligence in spokes (<a href="../../../../../roadmap/2/index.html#From_a_hub-spoke_to_a_mesh_model">original roadmap description</a>)</li>
</ol>

<p>Also, since every single attempt at providing a proper timeline for the final 2.0 release has failed miserably, we'll just stop trying our luck and just give up on a formal timeline. Instead, we'll just do the freaking work. :) Also remember that the <a href="http://drupal.org/node/1261030">port to Drupal 7</a> has been <a href="http://drupal.org/node/1261030">postponed to Aegir 3</a>. Aegir 1 and 2 both support provisionning Drupal 7 sites, but the frontend is running Drupal 6. We are aiming for a "straight port" (no rewrite) of the frontend for Aegir 3.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc34">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Major_changes"><span class="toc-number">1. </span>Major changes</a></li>
	<li class="toc-level-1"><a href="#Major_API_changes"><span class="toc-number">2. </span>Major API changes</a></li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">3. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">4. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Features_and_improvements"><span class="toc-number">5. </span>Features and improvements</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">6. </span>Bugfixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">7. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Major_changes">1. Major changes</h2>

<p>This first alpha already packs a lot of changes. Those release notes detail the changes since the 2.x branch was first created, all the way back two years ago, when <a href="../../../../../1/index-12.html">1.0 was released</a>. Of course, we are not detailing all the changes made in the 1.x series that are all part of the 2.x, but only the changes specific to the 2.x release.</p>

<ul>
<li>SSL improvements:

<ul>
<li><a href="https://drupal.org/node/1126640">IP allocation was moved to the backend to the frontend</a></li>
<li>SSL certificate generation now has saner defaults (e.g. 2048bits)</li>
<li>better error handling</li>
</ul></li>
<li><p>Drush 5 support</p>

<ul>
<li>includes better support for archive-dump command</li>
<li>means we also drop the dependency on drush make 2.3, now included in Drush 5</li>
<li>support for Drush 4 has been dropped, the minimum version is now 5.5</li>
</ul></li>
<li><p>Debian package improvements and changes</p>

<ul>
<li>Nginx support in the Debian package</li>
<li>now a "native" debian package</li>
<li>package name changed: it is now <code>aegir2</code>, <code>aegir-provision2</code>, etc, to avoid overwriting the previous package - note that aegir 1 and 2 can <em>not</em> be installed in parallel</li>
</ul></li>
<li>Nginx improvements:

<ul>
<li>fixed support for nginx 1.3 and newer</li>
<li>better defaults for caching</li>
<li>SSL and Nginx are now officially supported (not marked as "experimental")</li>
</ul></li>
<li>New modules:

<ul>
<li>the <code>hosting-queue-runner</code> module is now <a href="https://drupal.org/node/1189556">merged into core</a> as <code>hosting-queued</code></li>
<li>"pack" module, designed as a lightweight replacement to the "cluster" module, now available as an experimental extension</li>
</ul></li>
<li>Hosting-queued improvements

<ul>
<li>run with a lower priority ("<em>niced</em>")</li>
<li>improved portability and reliability of startup script</li>
<li>enabled by default in the Debian package</li>
</ul></li>
<li>Code refactoring and improvements:

<ul>
<li>now using the Symphony autoloading code</li>
<li>fix coding style in a lot of source files</li>
<li>improved builtin test suite</li>
<li>eldir is <a href="https://drupal.org/node/1468874">split in its own module again</a>, allowing for porting it more easily to Drupal 7</li>
</ul></li>
</ul>

<p>A more detailed log of bugfixes and improvements is available below.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Major_API_changes">2. Major API changes</h2>

<p>Those changes are, as usual, more explicitly documented in the <a href="../../../../../upgrading/path/index.html">upgrade path</a> documentation.</p>

<ul>
<li>hosting-task now needs a <code>--force</code> argument to run a non-queued task</li>
<li>functions that were deprecated in 1.x are now removed</li>
<li>the <code>email</code> and <code>client_email</code> database fields are now removed from client and site node types</li>
<li>numerous changes to the IP allocation and SSL management code</li>
</ul>

<p>Please note that the 2.x API is still not considered stable and may change without warning until 2.x is fully stabilized, see <a href="../../../../../content/release-process/index.html">our release process</a> for more information.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_and_upgrading">3. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>Note that you should upgrade to the latest 1.x release (currently: <a href="../../../../../1/index-3.html">1.9</a>) before attempting the upgrade to 2.x. This is especially important if you are running a pre-1.0 release (poor you!).</p>

<p>It is still imperative that you read the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">4. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features_and_improvements">5. Features and improvements</h2>

<p>In addition to the "major changes" mentioned above, the following should also be noted.</p>

<ul>
<li><a href="http://drupal.org/node/1830994">#1830994: Login directly via 'login' link</a></li>
<li><a href="http://drupal.org/node/1853588">#1853588: Sort Install profiles on Site add form</a></li>
<li><a href="http://drupal.org/node/709862">#709862: Allow drush modules to add to apache vhost config template</a></li>
<li><a href="http://drupal.org/node/1861896">#1861896: Make $type argument of function hosting_available_tasks() optional.</a></li>
<li><a href="http://drupal.org/node/1843198">#1843198: Add Content top and bottom to Eldir.</a></li>
<li><a href="http://drupal.org/node/1826074">#1826074: Add tests to ensure site directories are migrated</a></li>
<li><a href="http://drupal.org/node/1464220">#1464220: Support alternative 'Hostmaster' profiles</a></li>
<li><a href="http://drupal.org/node/610040">#610040: Add X links on listing pages</a></li>
<li><a href="http://drupal.org/node/710834">#710834: notify clients on site migrations</a></li>
<li><a href="http://drupal.org/node/1260066">#1260066: Allow use of the working copy option when creating a platform</a></li>
<li><a href="http://drupal.org/node/1047992">#1047992: exportable backups</a></li>
<li><a href="http://drupal.org/node/1189556">#1189556: Pull the queue runner into Aegir 2</a></li>
<li><a href="http://drupal.org/node/1408410">#1408410: Add microcaching to Nginx config by default</a></li>
<li><a href="http://drupal.org/node/1138104">#1138104: Tiny module to automatically fill in platform publish path based on title</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">6. Bugfixes</h2>

<p>This is a non-exhaustive list.</p>

<ul>
<li><a href="http://drupal.org/node/1735174">#1735174: server verification fails after configuration on pack slave servers</a></li>
<li><a href="https://drupal.org/node/1798252">#1798252: reload hosting-queued on upgrade</a></li>
<li><a href="http://drupal.org/node/1898260">#1898260: platform form should allow editiong if platform is not verified</a></li>
<li><a href="http://drupal.org/node/1435098">#1435098: Client name validate sometimes gives erroneous results</a></li>
<li><a href="http://drupal.org/node/1591720">#1591720: Illegal choice when selecting sites to verify</a></li>
<li><a href="http://drupal.org/node/1587232">#1587232: All radios labels in forms use incorrect vertical-align property value (middle)</a></li>
<li><a href="http://drupal.org/node/1218130">#1218130: checking "Hide platforms with non-default profiles" breaks D7's minimal and standard profiles</a></li>
<li><a href="http://drupal.org/node/1227954">#1227954: hosting_quota lacks a feature.module_name.inc</a></li>
<li><a href="http://drupal.org/node/528064">#528064: h2 bigger than h1 in content</a></li>
<li><a href="http://drupal.org/node/460974">#460974: improve queue admin form</a></li>
<li><a href="http://drupal.org/node/1855486">#1855486: Patch to Remove some Notices</a></li>
<li><a href="http://drupal.org/node/1881868">#1881868: SA-CONTRIB-2012-080 hasn't been applied to 6.x-2.x</a></li>
<li><a href="http://drupal.org/node/1873384">#1873384: 'Silence warning' commit broke 6.x-2.x</a></li>
<li><a href="http://drupal.org/node/1843078">#1843078: aegir 2.x debian packages fail to install</a></li>
<li><a href="http://drupal.org/node/1829430">#1829430: drush hosting-tasks broken</a></li>
<li><a href="http://drupal.org/node/1146014">#1146014: A user can see sites that don't have a client associated.</a></li>
<li><a href="http://drupal.org/node/1256508">#1256508: path aliases for deleted sites are not deleted</a></li>
<li><a href="http://drupal.org/node/1249892">#1249892: Checkboxes on provision page not aligned</a></li>
<li><a href="http://drupal.org/node/941870">#941870: failure to copy SSL certificates should abort tasks</a></li>
<li><a href="http://drupal.org/node/1334950">#1334950: permissions on /var/aegir/config/server_NAME/SERVICE prevents access</a></li>
<li><a href="http://drupal.org/node/1471928">#1471928: provision-save: Unknown options: --context_type, --platform, --server, --db_server, --profile, --client_name, --aliases</a></li>
<li><a href="http://drupal.org/node/1751006">#1751006: Make is called incorrectly</a></li>
<li><a href="http://drupal.org/node/1750974">#1750974: Unable to pass working-copy or backend-only to hostmaster install</a></li>
<li><a href="http://drupal.org/node/1204990">#1204990: Drop old database when re-deploying a site.</a></li>
<li><a href="http://drupal.org/node/1734500">#1734500: Can't run tests with Drush 4.6</a></li>
<li><a href="http://drupal.org/node/1433406">#1433406: Make hosting (specifically hosting-dispatch) work with Drush 5</a></li>
<li><a href="http://drupal.org/node/1690472">#1690472: Declaration of Provision_Service_null::__call() should be compatible with that of Provision_Service::__call() null.php:27</a></li>
<li><a href="http://drupal.org/node/1266484">#1266484: Cannot verify Drupal 7.8 with PHP 5.2</a></li>
<li><a href="http://drupal.org/node/1612044">#1612044: upgrade from 1.7 to 2.x fails because of drush 5 command file cache</a></li>
<li><a href="http://drupal.org/node/1358768">#1358768: 6.x-2.x generates multiple Undefined property errors on hostmaster install</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">7. Known issues</h2>

<p>The Debian packages were not uploaded correctly on the release day, and have been unblocked only on 2013-12-12 14:45 (UTC-5).</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-413.html?destination=node%2F2338%23comment-form">Login</a> or <a href="../../../../../user/register/index-413.html?destination=node%2F2338%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../2338/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-2878" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/release-notes/older-1x-releases/index.html">Older 1.x releases</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This section documents all the older releases in the 1.x release cycle.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-169.html?destination=node%2F2878%23comment-form">Login</a> or <a href="../../../../../user/register/index-169.html?destination=node%2F2878%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-169.html?destination=node%2F2878%23comment-form">Login</a> or <a href="../../../../../user/register/index-169.html?destination=node%2F2878%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2731" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-2.html">1.10 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is proud to announce the tenth release in the stable 1.x release branch! This release ships a moderately critical security fix (see the Security fixes section below) and a number of bugfixes that have accumulated in the issue queue since the <a href="../../../../../1/index-3.html">1.9 release</a>. Everyone is encouraged to upgrade.</p>

<p>We also want to announce that <a href="../../../../../user/54/index.html">ergonlogic</a> and <a href="../../../../../user/708/index.html">helmo</a> have joined the <a href="../../../../../maintainers/index.html">list of core maintainers</a> supporting the core development of the Aegir project. Along with the existing commitments of the Aegir core maintainer team, Aegir is well assured of continuous development and long term maintenance.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc35">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">3. </span>Known issues</a></li>
	<li class="toc-level-1"><a href="#Features"><span class="toc-number">4. </span>Features</a></li>
	<li class="toc-level-1"><a href="#Security_fixes"><span class="toc-number">5. </span>Security fixes</a></li>
	<li class="toc-level-1"><a href="#Bug_fixes"><span class="toc-number">6. </span>Bug fixes</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">3. Known issues</h2>

<p>Upgrades may fail if the SSL certificates are actually symlinks to files not readable by Aegir, a rare but legitimate use-case. A fix is available in git, see <a href="https://drupal.org/node/2046249">#2046249</a> for more information.</p>

<p>Aegir 1.x depends on Drush 4.5 or 4.6, which are available <em>only</em> in Debian squeeze backports (old stable!), which may make fresh installs or careless upgrades impossible. To workaround this issue, install the Drush package directly from backports:</p>

<pre><code>wget <a href="http://backports.debian.org/debian-backports/pool/main/d/drush/drush_4.5-2~bpo60+1_all.deb" title="http://backports.debian.org/debian-backports/pool/main/d/drush/drush_4.5-2~bpo60+1_all.deb">http://backports.debian.org/debian-backports/pool/main/d/drush/drush_4.5...</a>
dpkg -i drush_4.5-2~bpo60+1_all.deb
</code></pre>

<p>See <a href="http://packages.debian.org/squeeze-backports/all/drush/download">this page</a> for other mirrors.</p>

<p>Because of a little fumble in the <a href="../../../../../2/index-9.html">2.0-rc2</a> release process documentation, a development build of Aegir 1.x has overwritten the 1.10 official release in the stable repository. Since that development build only has the fix for <a href="https://drupal.org/node/2046249">#2046249</a>, we haven't restored the previous build and thefore the version number of the Debian package is <code>1.10+246.efcd0a3</code> instead of <code>1.10</code>. However, this also means that the hostmaster platform directory will be named <code>hostmaster-1.x</code> instead of <code>hostmaster-1.10</code>, which will make upgrades to other development releases require manual creation of the platform.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features">4. Features</h2>

<ul>
<li><a href="http://drupal.org/node/1781832">#1781832</a> by Steven Jones: Added hosting_available_tasks() should invoke alter.</li>
<li><a href="http://drupal.org/node/1760962">#1760962</a> by Jon Pugh: Added Allow any hosting task to flag itself for needing a provision-save.</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Security_fixes">5. Security fixes</h2>

<ul>
<li>Fix access control to sites.</li>
</ul>

<p>See also the security advisory (<a href="http://drupal.org/node/2044299">SA-CONTRIB-2013-059</a>) for more information.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bug_fixes">6. Bug fixes</h2>

<ul>
<li><a href="http://drupal.org/node/1990370">#1990370</a> by ergonlogic: Enable Hosting feature dependencies.</li>
<li><a href="http://drupal.org/node/1435098">#1435098</a> by Steven Jones: Fixed Client name validate sometimes gives erroneous results.</li>
<li><a href="http://drupal.org/node/1585820">#1585820</a> by Steven Jones: Fixed Can't disable the 'client" feature.</li>
<li><a href="http://drupal.org/node/1573162">#1573162</a> by mig5, Steven Jones: Fixed Drush hosting_task_()%task_rollback() invocations are never executed.</li>
<li><a href="http://drupal.org/node/1513678">#1513678</a> by Jon Pugh, fastangel: Fixed Hooks based on TASK_NAME should handle task names with dashes in them.</li>
<li><a href="http://drupal.org/node/913228">#913228</a> by Steven Jones: Fixed Unresponsive submit button in platform migration form.</li>
<li><a href="http://drupal.org/node/1441970">#1441970</a> by Steven Jones: Fixed Client Block assigned by default to non-existing region.</li>
<li><a href="http://drupal.org/node/1441970">#1441970</a> by jlscott: Fixed Client Block assigned by default to non-existing region.</li>
<li><a href="http://drupal.org/node/1597648">#1597648</a> by jlscott: Fixed Hosting Queues Summary Block is stale.</li>
<li><a href="http://drupal.org/node/2044251">#2044251</a>: Remove '@none' from call to drush_invoke_process(), since it isn't supported in Drush 4.5.</li>
<li><a href="http://drupal.org/node/1678528">#1678528</a> by helmo: Fixed Database deleted on edge cases.</li>
<li><a href="http://drupal.org/node/1912666">#1912666</a> by ergonlogic: Fixed Stable manual 6.x-1.x install test failure.</li>
<li><a href="http://drupal.org/node/1912666">#1912666</a> by ergonlogic: Fix command to run tests for 6.x-1.x.</li>
<li>Nginx: Fix typo in the location regex.</li>
<li>Nginx Security: BEAST attack protection and fix for PCI compliance.</li>
<li><a href="http://drupal.org/node/1906900">#1906900</a> by fall_0ut - Nginx microcaching not disabled on localized/prefixed admin URIs.</li>
<li>Nginx: Make upload progress configuration compatible with latest release of Nginx extension and integration module for Drupal 7.</li>
<li>Nginx: Move some dynamic directives up in the location.</li>
<li>Nginx: Better protection for private URLs from bots/spiders (2)</li>
<li>Nginx: Improve locations for static files.</li>
<li>Nginx: Better protection for private URLs from bots/spiders.</li>
<li>Nginx: Add support for <a href="http://drupal.org/project/js" title="http://drupal.org/project/js">http://drupal.org/project/js</a> module.</li>
<li>Nginx: Improve no-cache exceptions for known AJAX and webform requests.</li>
<li>Nginx: Improve performance for dynamic requests and reduce logging 404 errors.</li>
<li>Nginx: Remove duplicate location - already protected in the server template.</li>
<li>Nginx: Do not use device-specific, never working paths for Boost cache.</li>
<li>Nginx: Make json compatible with boost caching but dynamic for POST requests.</li>
<li>Nginx: Add Wysiwyg Fields support.</li>
<li>Nginx: Do not block spiders on URIs with event/calendar regex match.</li>
<li>Nginx: Avoid breaking WordPress import when WP-specific URI is used.</li>
<li>Nginx: Avoid caching /civicrm* and protect it from bots.</li>
<li>remove perlism in sed which would never match (\s).</li>
<li>explain why we do the crazy sed on dump (mysql bug)</li>
<li><a href="http://drupal.org/node/1786702">#1786702</a> by clemens.tolboom - be nice to non-aegir backups like drush archive.</li>
<li><a href="http://drupal.org/node/1788398">#1788398</a> by marvil07: Fixed Force dependency to drush &lt; 5.</li>
<li>add missing robots and files/ rules to SSL hosts.</li>
<li>remove redundant paramenters to the CSR, fix email to use a standard default.</li>
<li>clarify comment on self-signed certificates.</li>
<li><a href="http://drupal.org/node/941870">#941870</a> - check for errors when copying certificates.</li>
<li>improve error handling in SSL key generation.</li>
<li>bump up the SSL key size to 2048 bit.</li>
<li>clarify the SSL key signing code.</li>
<li>don't encrypt SSL keys only to decrypt them after.</li>
<li><a href="http://drupal.org/node/1741814">#1741814</a> by wamilton: Fixed Support For Non-Alphanumeric MySQL Passwords in provision-backup, migrate, and clone.</li>
<li><a href="http://drupal.org/node/1612252">#1612252</a> by mig5, Steven Jones: Fixed 'site_offline()' variable needs to be 'maintenance_mode()' in Drupal 7.</li>
<li><a href="http://drupal.org/node/1440646">#1440646</a> by tstoeckler, cafuego, mig5: Make Drush be runnable as Root with Provision installed.</li>
<li><a href="http://drupal.org/node/1734500">#1734500</a> by Steven Jones: Fixed Can't run tests with Drush 4.6.</li>
<li>move files and robots.txt rewrite rules to the vhost.</li>
<li><a href="http://drupal.org/node/1108810">#1108810</a> - protect the complete private files directory.</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-170.html?destination=node%2F2731%23comment-form">Login</a> or <a href="../../../../../user/register/index-170.html?destination=node%2F2731%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-170.html?destination=node%2F2731%23comment-form">Login</a> or <a href="../../../../../user/register/index-170.html?destination=node%2F2731%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1480" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-3.html">1.9 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is proud to announce the ninth release in the stable 1.x release branch! This release ships two minor security fixes and various bugfixes that have accumulated in the issue queue since the <a href="../../../../../1/index-4.html">1.8 release</a>.</p>

<p>We also want to announce that <a href="http://omega8.cc/">Omega8.cc</a> is joining the growing list of organisations financially supporting the core development of the Aegir project. In a partnership with <a href="http://koumbit.org/">Koumbit.org</a>, Omega8.cc is dedicating money to make sure <a href="../../../../../user/78/index.html">Antoine Beaupr</a>, one of the core team members, can dedicate one day a week of his time on raw Aegir development. Along with the existing commitments of <a href="http://www.computerminds.co.uk/">Computerminds</a> (Steven Jones), <a href="http://mig5.net/">mig5</a> (Miguel Jacq) and the existing commitment of <a href="http://koumbit.org/">Koumbit.org</a>, Aegir is well assured of continuous development and long term maintenance.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc36">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Features"><span class="toc-number">3. </span>Features</a></li>
	<li class="toc-level-1"><a href="#Security_fixes"><span class="toc-number">4. </span>Security fixes</a></li>
	<li class="toc-level-1"><a href="#Bug_fixes"><span class="toc-number">5. </span>Bug fixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">6. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features">3. Features</h2>

<p>No features were added in this release.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Security_fixes">4. Security fixes</h2>

<ul>
<li>Filter Drush log messages properly when viewing task logs.</li>
<li>Properly exit after calling drupal_access_denied() on package/task nodes.</li>
</ul>

<p>See also the security advisory (<a href="http://drupal.org/node/1585678">SA-CONTRIB-2012-080</a>) for more information.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bug_fixes">5. Bug fixes</h2>

<ul>
<li><a href="http://drupal.org/node/1550284">#1550284: Fixed Warningns after enabling 'web pack'.</a></li>
<li><a href="http://drupal.org/node/1549210">#1549210: Fixed Drush 'failed' errors are not correctly logged.</a></li>
<li><a href="http://drupal.org/node/1503824">#1503824: Fixed hosting_site_count() ignores disabled sites.</a></li>
<li>Fix for compatibility with Nginx 1.3.0 or newer.</li>
<li><a href="http://drupal.org/node/1555398">#1555398: ensure the master server in a Pack is given a MySQL GRANT, if it was not also @server_master</a></li>
<li>Add more verbosity to the notorious 'failed to fail' error, pointing to an item in the FAQ.</li>
<li><a href="http://drupal.org/node/1573004">#1573004: provision-migrate fails with 'Dummy connection failed to fail: mysql: option -e' requires an argument on Debian Wheezy</a></li>
<li><a href="http://drupal.org/node/1573182">#1573182: Verifying a platform should abort if it can't be bootstrapped&lt;</a></li>
<li><a href="http://drupal.org/node/1552228">#1552228: Nginx configuration for limit_conn should be compatible with version &gt;= 1.1.8</a></li>
<li><a href="http://drupal.org/node/1454316">#1454316: Fixed Provision recurses infinitely on reading in context.</a></li>
<li><a href="http://drupal.org/node/1504120">#1504120: Fixed Script user of remote servers is ignored</a></li>
<li><a href="http://drupal.org/node/1205956">#1205956: Document the Provision API</a></li>
<li>Only errors 500 and 503 are supported in fastcgi_cache_use_stale (Nginx).</li>
<li><a href="http://drupal.org/node/1544144">#1544144: Use $server_name instead of $host in all sites/ paths to avoid broken URLs to static files for domain aliases in D7 (Nginx).</a></li>
<li>Do not cache http auth requests. Use compact microcaching config (Nginx).</li>
<li>Use separate cache for spiders/bots (Nginx).</li>
<li><a href="http://drupal.org/node/1528996">#1528996: Nginx microcaching should use fastcgi_cache_valid with 5s only for 403 error.</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">6. Known issues</h2>

<p>No know issues at this time.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-171.html?destination=node%2F1480%23comment-form">Login</a> or <a href="../../../../../user/register/index-171.html?destination=node%2F1480%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-171.html?destination=node%2F1480%23comment-form">Login</a> or <a href="../../../../../user/register/index-171.html?destination=node%2F1480%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1317" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-4.html">1.8 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is proud to announce the eighth release in the stable 1.x release branch!</p>

<p>This release ships various bugfixes that have accumulated in the issue queue since the <a href="../../../../../1/index-5.html">1.7 release</a>, including a lot of fixes on Nginx support.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc37">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Features"><span class="toc-number">3. </span>Features</a></li>
	<li class="toc-level-1"><a href="#Bug_fixes"><span class="toc-number">4. </span>Bug fixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">5. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features">3. Features</h2>

<p>No features were added in this release.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bug_fixes">4. Bug fixes</h2>

<ul>
<li><a href="http://drupal.org/node/1510572">#1510572: Fixed Why do we use mktime() instead of time()</a></li>
<li><a href="http://drupal.org/node/1185690">#1185690: Fixed hosting_task_log() entries are not deleted when task is.</a></li>
<li><a href="http://drupal.org/node/1348338">#1348338: Fixed Ajax requests ignore base_url() setting - followup.</a></li>
<li><a href="http://drupal.org/node/1437856">#1437856: Fixed Display of Client Quota missing pager navigation bar</a></li>
<li><a href="http://drupal.org/node/1388542">#1388542: Fixed packages in sites/all/modules should override profile/*/modules</a></li>
<li><a href="http://drupal.org/node/1498102">#1498102: Fixed Dates and times are incorrect on freshly created tasks</a></li>
<li><a href="http://drupal.org/node/1472480">#1472480: Fixed Restrict the Task Queue to one task per site each cron run</a></li>
<li><a href="http://drupal.org/node/1493286">#1493286: Fixed SSL certificates not being created</a></li>
<li><a href="http://drupal.org/node/1485746">#1485746: Fixed MySQL root password incorrectly escaped in frontend</a></li>
<li><a href="http://drupal.org/node/1528996">#1528996: Nginx microcaching should use fastcgi_cache_valid with 1s only for upstream errors</a></li>
<li><a href="http://drupal.org/node/1472460">#1472460: Nginx configuration denies HTTP request methods: PUT, DELETE and OPTIONS and it breaks services/REST</a></li>
<li><a href="http://drupal.org/node/1534306">#1534306: Duplicate directives in the Nginx config cause issues with recommended Dotdeb Nginx build</a></li>
<li><a href="http://drupal.org/node/1528996">#1528996: Nginx microcaching shouldn't cache any upstream errors</a></li>
<li><a href="http://drupal.org/node/1524860">#1524860: Empty response 444 in Nginx confuses search bots</a></li>
<li><a href="http://drupal.org/node/1515762">#1515762: Nginx microcaching should skip all known AJAX requests</a></li>
<li><a href="http://drupal.org/node/1505370">#1505370: Conflict between Mime Type and Document Type in Nginx</a></li>
<li><a href="http://drupal.org/node/1498774">#1498774: Set higher value for map_hash_bucket_size in Nginx by default</a></li>
<li><a href="http://drupal.org/node/1283854">#1283854: Fixed Use of parameters in provision_file()-&gt;symlink() is incorrect</a></li>
<li><a href="http://drupal.org/node/1387394">#1387394: Fixed deleting a site doesn't delete soft links</a></li>
<li><a href="http://drupal.org/node/1388542">#1388542: Fixed packages in sites/all/modules should override profile/*/modules</a></li>
<li><a href="http://drupal.org/node/1486298">#1486298: Fixed End of install process is messy</a></li>
<li><a href="http://drupal.org/node/1478984">#1478984: Add Access-Control-Allow-Origin header with wildcard for static files in Nginx, also to support cdn-delivered @font-face</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">5. Known issues</h2>

<p>No know issues at this time.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-172.html?destination=node%2F1317%23comment-form">Login</a> or <a href="../../../../../user/register/index-172.html?destination=node%2F1317%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-172.html?destination=node%2F1317%23comment-form">Login</a> or <a href="../../../../../user/register/index-172.html?destination=node%2F1317%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1144" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-5.html">1.7 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is proud to announce the seventh release in the stable 1.x release branch!</p>

<p>This release ships various bugfixes that have accumulated in the issue queue since the <a href="../../../../../1/index-6.html">1.6 release</a>, including a lot of fixes on Nginx support. We also ship a new clustering module aimed at lightweight slave deployments named the <a href="../../../../../content/web-clusters/index.html">pack module</a>, designed to replace the cluster module which has performance and configuration issues.</p>

<p>Also note that 2.x development is moving ahead with Drush 5 and Drupal 7 support, along with code refactoring and other features. Debian package builds will be available shortly in a separate Debian repository.</p>

<p>We also want to take this opportunity to welcome to our <a href="../../../../../maintainers/index.html">core team</a> omega8cc, a long time contributor that will now be responsible for the maintenance of the Nginx code. Welcome on board Grace!</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc38">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Features"><span class="toc-number">3. </span>Features</a></li>
	<li class="toc-level-1"><a href="#Bug_fixes"><span class="toc-number">4. </span>Bug fixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">5. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features">3. Features</h2>

<ul>
<li><a href="http://drupal.org/node/1463494">#1463494: Radioactivity does not work with Nginx configuration</a></li>
<li><a href="http://drupal.org/node/1353608">#1353608: ad module incompatible with current nginx_simple_include.conf settings</a></li>
<li><a href="http://drupal.org/node/1259098">#1259098: nginx HTTP service should support different restart commands</a></li>
<li><a href="http://drupal.org/node/1171508">#1171508: Nginx capabilities detection is not reliable</a></li>
<li><a href="http://drupal.org/node/1408410">#1408410: Add microcaching to Nginx config by default</a></li>
<li><a href="http://drupal.org/node/1062168">#1062168: chained certificates support</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bug_fixes">4. Bug fixes</h2>

<ul>
<li><a href="http://drupal.org/node/1439196">#1439196: Don't lock the DB during backups</a></li>
<li><a href="http://drupal.org/node/1442906">#1442906: Nginx does not listen on all supplied IP addresses</a></li>
<li><a href="http://drupal.org/node/962044">#962044: Fixing broken Boost support for the home/root location in Nginx #104004</a></li>
<li><a href="http://drupal.org/node/1388906">#1388906: It is possible to break Nginx based install with upload progress by enabling nginx_ssl feature</a></li>
<li><a href="http://drupal.org/node/1346712">#1346712: Nginx config files required as includes in vhosts are not copied when Nginx SSL feature is enabled</a></li>
<li><a href="http://drupal.org/node/1444172">#1444172: Syntax error in the help description of provision-login_reset</a></li>
<li><a href="http://drupal.org/node/1346794">#1346794: Nginx SSL declarations need to be added to redirect vhosts</a></li>
<li><a href="http://drupal.org/node/1450134">#1450134: aliases are not validated in the validate step</a></li>
<li><a href="http://drupal.org/node/1435340">#1435340: node param "created" is refreshed on node_save</a></li>
<li><a href="http://drupal.org/node/1421356">#1421356: Wrong variables for files paths hardcoded for D7 sites</a></li>
<li><a href="http://drupal.org/node/1369608">#1369608: Provision shoudl add extra config for nginx ssl hosts</a></li>
<li><a href="http://drupal.org/node/1437386">#1437386: Notices from hosting_package.module</a></li>
<li><a href="http://drupal.org/node/1018596">#1018596: Aegir forms don't work in MSIE 8.0 (?)</a></li>
<li><a href="http://drupal.org/node/1405380">#1405380: drushrc file permissions are set to 0400, perhaps should be 0440</a></li>
<li><a href="http://drupal.org/node/1396326">#1396326: Mod rewrite double escapes URLs</a></li>
<li><a href="http://drupal.org/node/1359258">#1359258: Broken DB URL when installing 1.6</a></li>
<li><a href="http://drupal.org/node/1202960">#1202960: Aegir Install Script Not Picking up db information from $_SERVER</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">5. Known issues</h2>

<ul>
<li><a href="http://drupal.org/node/1493286">#1493286: SSL certificates not being created</a></li>
<li><a href="http://drupal.org/node/1498774">#1498774: Nginx version 0.7.66 or newer is required</a></li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-173.html?destination=node%2F1144%23comment-form">Login</a> or <a href="../../../../../user/register/index-173.html?destination=node%2F1144%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-173.html?destination=node%2F1144%23comment-form">Login</a> or <a href="../../../../../user/register/index-173.html?destination=node%2F1144%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-961" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-6.html">1.6 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is happy to release the seventh stable release in the 1.x branch.</p>

<p>This release fixes a regression introduced in the 1.5 release that stopped users from being able to compare sites when migrating. It also contains a number of small bug fixes and documentation fixes.</p>

<p>We recommend you upgrade your Aegir system.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc39">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">3. </span>Bugfixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">4. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">3. Bugfixes</h2>

<ul>
<li><a href="https://drupal.org/node/1333978">#1333978: add a conditional when validating site aliases to ensure that not only do no other sites use this alias, but that it isn't identical to the site name itself. Fixes a redirect loop</a></li>
<li><a href="https://drupal.org/node/1330984">#1330984: by Steven Jones: Fixed Long list of notices on site verify.</a></li>
<li><a href="https://drupal.org/node/1330018">#1330018: by Dane Powell: Fixed Can't compare platforms ('table doesn't exist' and other warnings).</a></li>
<li><a href="https://drupal.org/node/1146238">#1146238: by mig5: Fixed The Reset password task for Drupal 5.x sites creates not working one-time login link.</a></li>
<li><a href="https://drupal.org/node/1322208">#1322208: by helmo - fix provision-restore help information and add an example</a></li>
<li><a href="https://drupal.org/node/1336838">#1336838: Added documentation for --makefile to provision-save, and fixed the style.</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">4. Known issues</h2>

<p>See also <a href="../../../../../1/index-12.html#Known_issues">the 1.0 release notes</a> for known issues in the 1.x series.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-174.html?destination=node%2F961%23comment-form">Login</a> or <a href="../../../../../user/register/index-174.html?destination=node%2F961%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-174.html?destination=node%2F961%23comment-form">Login</a> or <a href="../../../../../user/register/index-174.html?destination=node%2F961%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-937" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-7.html">1.5 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_11 first last"><a href="../../../../../taxonomy/term/11/index.html" rel="tag" title="">release-notes</a></li>
</ul></div><p>The Aegir team is happy to release the sixth stable release in the 1.x branch.</p>

<p>This release fixes not being able to install Drupal 7.8 sites on PHP 5.2, an issue causing automatic installations to fail and other minor fixes.</p>

<p>We recommend you upgrade your Aegir system.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc40">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Another_special_note_for_users_of_the_Debian_packages"><span class="toc-number">1. </span>Another special note for users of the Debian packages</a></li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">2. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">3. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">4. </span>Bugfixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">5. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Another_special_note_for_users_of_the_Debian_packages">1. Another special note for users of the Debian packages</h2>

<p>We've moved the location of the Aegir packages, so you must update your apt configuration. Further details can be found the in original announcement of this change: <a href="../../../../../discuss/debian-archive-migrated-debianaegirprojectorg/index.html">Debian archive migrated to debian.aegirproject.org</a>.</p>

<p>The Debian packages also install Drush Make using a package rather than a manual download. If upgrading, you may be prompted to remove your current installation of Drush Make to continue.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_and_upgrading">2. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">3. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">4. Bugfixes</h2>

<ul>
<li><a href="http://drupal.org/node/1324502">#1324502: by Steven Jones: Fixed Drush help broken.</a></li>
<li><a href="http://drupal.org/node/1282280">#1282280: by Steven Jones: Clean up the hosting form javascript.</a></li>
<li><a href="http://drupal.org/node/1301440">#1301440: update admin_menu to 1.8</a></li>
<li><a href="http://drupal.org/node/1282172">#1282172: by GuyPaddock: Fixed hosting_task_handler_filter_hosting_task_type.</a></li>
<li><a href="http://drupal.org/node/1273554">#1273554: Fixes Clean-up for multiple warnings.</a></li>
<li><a href="http://drupal.org/node/1273468">#1273468: Fixes Typo in variable name inside hosting_package_sync() function of hosting_package.module</a></li>
<li><a href="http://drupal.org/node/1213442">#1213442: Fixes Clients are not imported from the backend correctly.</a></li>
<li><a href="http://drupal.org/node/1238560">#1238560: Fixes Updating client throws a warning about quotas.</a></li>
<li><a href="http://drupal.org/node/1283926">#1283926: by bgm: Fixed Small improvement on the trigger/views filtering in the database dump.</a></li>
<li><a href="http://drupal.org/node/1278720">#1278720: by halcyonCorsair: Fixed missing base_url() in install_send_welcome_mail() for drupal 7.</a></li>
<li><a href="http://drupal.org/node/1111572">#1111572: by helmo, Steven Jones: Fixed Undefined index: profiles deploy.provision.inc:84.</a></li>
<li><a href="http://drupal.org/node/1150274">#1150274: by Steven Jones: Fixed Undefined index: user db.drush.inc:288.</a></li>
<li><a href="http://drupal.org/node/1263544">#1263544: by GuyPaddock, Steven Jones: Fixed 'Can only throw objects in provision.config.inc, line 75'.</a></li>
<li><a href="http://drupal.org/node/1261006">#1261006: - Follow up: Tidy docs and add missing parent method.</a></li>
<li><a href="http://drupal.org/node/1266484">#1266484: - Cannot verify Drupal 7.8 with PHP 5.2</a></li>
<li><a href="http://drupal.org/node/983056">#983056: by Steven Jones: Fixed installer does not properly escape the mysql root password.</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">5. Known issues</h2>

<ul>
<li><a href="https://drupal.org/node/1328316">#1328316: failed Debian upgrades may trash the Aegir apache config</a> - fixed in the 1.5-2 Debian package</li>
<li><a href="https://drupal.org/node/1330018">#1330018: Can't compare platforms ("table doesn't exist" and other warnings)</a></li>
</ul>

<p>See also <a href="../../../../../1/index-12.html#Known_issues">the 1.0 release notes</a> for known issues in the 1.x series.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-416.html?destination=node%2F937%23comment-form">Login</a> or <a href="../../../../../user/register/index-416.html?destination=node%2F937%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../937/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-892" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-8.html">1.4 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_11 first last"><a href="../../../../../taxonomy/term/11/index.html" rel="tag" title="">release-notes</a></li>
</ul></div><p>The Aegir team is happy to release the fifth stable release in the 1.x branch.</p>

<p>This release fixes the security vulnerability <a href="http://drupal.org/node/1286536">as announced by the Drupal Security Team</a></p>

<p>This release contains no other fixes or changes: this is simply a hotfix release to fix the security vulnerability.</p>

<p>We strongly recommend you upgrade your Aegir system.</p>

<p>Note that this security issue affects the Eldir theme only. The security issue does not affect your hosted sites that are managed by Aegir, and no re-verification of sites or platforms is necessary.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc41">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">3. </span>Bugfixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">4. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">3. Bugfixes</h2>

<ul>
<li><a href="http://drupal.org/node/1286536">#1286536: DRUPAL-SA-CONTRIB-2011-041 - Hostmaster (Aegir) - Cross Site Scripting</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">4. Known issues</h2>

<ul>
<li><a href="http://drupal.org/node/1266484">#1266484: Cannot verify Drupal 7.8 with PHP 5.2</a></li>
<li><a href="http://drupal.org/node/1309080">#1309080: Drush make refuses to install, breaking the install</a> - workaround:
<div class="codeblock"><code>su - aegir<br />drush dl drush_make-6.x-2.3 --destination=$HOME/.drush</code></div></li>
<li><a href="http://drupal.org/node/1128844">#1128844: invalid FQDN can provoke memory exhaustion during install</a> - workaround: make sure your FQDN has a domain part to it (ie. <code>hostname -f</code> should return <code>foo.example.com</code>, not just <code>foo</code>)</li>
</ul>

<p>See also <a href="../../../../../1/index-12.html#Known_issues">the 1.0 release notes</a> for known issues in the 1.x serie.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-175.html?destination=node%2F892%23comment-form">Login</a> or <a href="../../../../../user/register/index-175.html?destination=node%2F892%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-175.html?destination=node%2F892%23comment-form">Login</a> or <a href="../../../../../user/register/index-175.html?destination=node%2F892%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-859" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-9.html">1.3 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is happy to release the fourth stable release in the 1.x branch. We have found only one critical bug (Drush 4.5 support) but have also fixed so many little bugs that we figured it was about time to make a new release. Also, it's becoming a bit of a tradition at DrupalCons :)</p>

<p>The major changes from 1.2 are a bunch of bug fixes for clients functionality, and a fix for the wget cron method.</p>

<p>Thank you to those who donated to the project since the previous release: harley, lol, rink &amp; arielqgold. We continue to accept donations in order to cover various project costs. As an open source project, we need the support of the community to ensure ongoing development and support. Koumbit is pleased to provide administrative support for this, and you can find the donation page on their site: <a href="http://membres.koumbit.org/en/civicrm/contribute/transact?reset=1&amp;id=5" title="http://membres.koumbit.org/en/civicrm/contribute/transact?reset=1&amp;id=5">http://membres.koumbit.org/en/civicrm/contribute/transact?reset=1&amp;id=5</a>, which is also linked to directly from the front page of the community site.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc42">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#New_features"><span class="toc-number">3. </span>New features</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">4. </span>Bugfixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">5. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="New_features">3. New features</h2>

<p>As per our maintenance policy, we have not added any new features in this release.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">4. Bugfixes</h2>

<ul>
<li><a href="http://drupal.org/node/1250068">#1250068: Drush 4.5 breaks Aegir completely</a></li>
<li><a href="http://drupal.org/node/1256372">#1256372: Drupal 7.7 site install fails with Drush 4.5</a></li>
<li><a href="http://drupal.org/node/1238588">#1238588: Problem with client internal name prefixes</a></li>
<li><a href="http://drupal.org/node/1237178">#1237178: hosting_client_validate_suggest() appears broken</a></li>
<li><a href="http://drupal.org/node/1236490">#1236490: "View client" permission broken</a></li>
<li><a href="http://drupal.org/node/1222208">#1222208: Wget method is extremely unstable and easily locks cron task completely</a></li>
<li><a href="http://drupal.org/node/1108810">#1108810: Files in sites/example.org/private are accessible.</a></li>
<li><a href="http://drupal.org/node/1223506">#1223506: cloning a site looses client site ownership</a></li>
<li><a href="http://drupal.org/node/1200066">#1200066: hosting_get_client uses client title instead of the (unique) internal name</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">5. Known issues</h2>

<ul>
<li><a href="http://drupal.org/node/1266484">#1266484: Cannot verify Drupal 7.8 with PHP 5.2</a></li>
</ul>

<p>See: <a href="../../../../../1/index-12.html#Known_issues" title="http://community.aegirproject.org/1.0#Known_issues">http://community.aegirproject.org/1.0#Known_issues</a></p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-176.html?destination=node%2F859%23comment-form">Login</a> or <a href="../../../../../user/register/index-176.html?destination=node%2F859%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-176.html?destination=node%2F859%23comment-form">Login</a> or <a href="../../../../../user/register/index-176.html?destination=node%2F859%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-752" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-10.html">1.2 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is happy to release the third stable release in the 1.x branch. We have found only one critical bug (in Nginx support) but have fixed so many little bugs that we figured it was about time to make a new release.</p>

<p>The major changes from 1.1 are that we now support the wget cron method for D7, and have fixed a lot of issues in the Nginx support. In addition, there is now the ability to "purge" platforms that Aegir might not otherwise recognize as eligible for deletion, and have robots.txt on a per-site basis. Finally, the "wget" support for cron.php has been rewritten with drupal_http_request(), so it's much faster and will detect errors properly - no more discrepancies between Aegir's idea of when cron was ran and the site's.</p>

<p>We've put in place a continuous integration server (Jenkins), which has allowed us to start automated testing of the Debian packages. This helps to ensure that automated installation of the software is stable. People wishing to test the latest development version of the 1.x tree can now install packages from the "unstable" repository; more information can be found here: <a href="../../../../../debian/index.html#Package_versionning" title="http://community.aegirproject.org/debian#Package_versionning">http://community.aegirproject.org/debian#Package_versionning</a></p>

<p>While not specific to this release, we have made extensive improvements to the documentation that can be found at <a href="../../../../../handbook/index.html" title="http://community.aegirproject.org/handbook">http://community.aegirproject.org/handbook</a>, as well as API documentation on <a href="http://api.aegirproject.org/" title="http://api.aegirproject.org">http://api.aegirproject.org</a></p>

<p>Also, we've begun to accept donations in order to cover various project costs. As an open source project, we need the support of the community to ensure ongoing development and support. Koumbit is pleased to provide administrative support for this, and you can find the donation page on their site: <a href="http://membres.koumbit.org/en/civicrm/contribute/transact?reset=1&amp;id=5" title="http://membres.koumbit.org/en/civicrm/contribute/transact?reset=1&amp;id=5">http://membres.koumbit.org/en/civicrm/contribute/transact?reset=1&amp;id=5</a>, which is also linked to directly from the front page of the community site.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc43">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#New_features"><span class="toc-number">3. </span>New features</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">4. </span>Bugfixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">5. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="New_features">3. New features</h2>

<p>As per our maintenance policy, we have keep new functionalities to a minimum. We did however, give in and merged the exportable backups feature in 1.1.</p>

<ul>
<li><a href="http://drupal.org/node/1074932">#1074932: purge option for platforms</a></li>
<li><a href="http://drupal.org/node/1173954">#1173954: Support for per-site robots.txt</a></li>
<li><a href="http://drupal.org/node/1189398">#1189398: Alter hook for hosting_get_servers</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">4. Bugfixes</h2>

<ul>
<li><a href="http://drupal.org/node/1090678">#1090678: wget cron method broken for d7 sites</a></li>
<li><a href="http://drupal.org/node/1197172">#1197172: Private files and X-Accel-Redirect support in Nginx is broken</a></li>
<li><a href="http://drupal.org/node/1197182">#1197182: The "alert" word used in the URL causes Nginx to send empty response</a></li>
<li><a href="http://drupal.org/node/1182680">#1182680: Backup migrate module support is broken in Nginx</a></li>
<li><a href="http://drupal.org/node/1191934">#1191934: hook_hosting_servers_titles_alter exposed some bad coding</a></li>
<li><a href="http://drupal.org/node/1182582">#1182582: When searching for node.js Nginx always displays error 404</a></li>
<li><a href="http://drupal.org/node/1183500">#1183500: The IP address in the Nginx vhost can be empty, which breaks http server configuration completely</a></li>
<li><a href="http://drupal.org/node/982452">#982452: DB name existence checking is not correct</a></li>
<li><a href="http://drupal.org/node/881496">#881496: Problem migrating sites with mysql views</a></li>
<li><a href="http://drupal.org/node/908314">#908314: Deleted sites cause node alias to 404 on refresh</a></li>
<li><a href="http://drupal.org/node/1155782">#1155782: div#main in eldir moves around during page zooms</a></li>
<li><a href="http://drupal.org/node/962188">#962188: Nginx version check works for server.tpl.php but doesn't work for/in vhost.tpl.php</a></li>
<li><a href="http://drupal.org/node/1170498">#1170498: Extra config variable is missing from nginx vhost and server templates</a></li>
<li><a href="http://drupal.org/node/1154108">#1154108: Backups from clone/migrate are not recorded in hostmaster</a></li>
<li><a href="http://drupal.org/node/1149172">#1149172: Upgrade from non-Debian install failed to backup old hostmaster platform</a></li>
<li><a href="http://drupal.org/node/1159452">#1159452: hostmaster doc groups are not generated properly</a></li>
<li><a href="http://drupal.org/node/1145888">#1145888: site's client name is reset even though I can change it</a></li>
<li><a href="http://drupal.org/node/1143068">#1143068: Allow cron.php in nginx configuration so that wget works out of the box</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">5. Known issues</h2>

<ul>
<li><a href="http://drupal.org/node/1222208">#1222208: Wget cron breaks if a single site is disabled</a> - hotfix: <a href="http://drupalcode.org/project/hostmaster.git/patch/734d49b">patch available</a></li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-177.html?destination=node%2F752%23comment-form">Login</a> or <a href="../../../../../user/register/index-177.html?destination=node%2F752%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-177.html?destination=node%2F752%23comment-form">Login</a> or <a href="../../../../../user/register/index-177.html?destination=node%2F752%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-603" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-11.html">1.1 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is happy to release the second stable release in the 1.x branch. We have found two critical bugs during the more massive deployment of 1.0 and figured we could share the fixes with the community.</p>

<p>The major changes here are that 1.0 had broken the upgrade of Drupal 5 sites and was still allowing duplicate sites to be created under some circumstances.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc44">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#New_features"><span class="toc-number">3. </span>New features</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">4. </span>Bugfixes</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="New_features">3. New features</h2>

<p>As per our maintenance policy, we have keep new functionalities to a minimum. We did however, give in and merged the exportable backups feature in 1.1.</p>

<ul>
<li><a href="http://drupal.org/node/1047992">#1047992: exportable backups</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">4. Bugfixes</h2>

<ul>
<li><a href="http://drupal.org/node/949044">#949044: It is possible to create broken site or duplicate sites nodes because there is not enough strtolower(trim(domain)) used</a></li>
<li><a href="http://drupal.org/node/1132514">#1132514: d5 site migration broken</a></li>
<li><a href="http://drupal.org/node/1129602">#1129602: Quotas uses dropped client fields</a></li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-178.html?destination=node%2F603%23comment-form">Login</a> or <a href="../../../../../user/register/index-178.html?destination=node%2F603%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-178.html?destination=node%2F603%23comment-form">Login</a> or <a href="../../../../../user/register/index-178.html?destination=node%2F603%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-588" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-12.html">1.0 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is very pleased to announce the first official stable release of Aegir - 1.0. While it's been a mostly "open secret" that most of our releases are production ready, this one has been tested through no less than 15 alpha releases, 2 beta releases and 7 release candidates, for a grand total 24 test releases before we deliver this stable version.</p>

<p>Speaking of open secrets, here's a word from our founder, <a href="https://drupal.org/node/956624">Adrian Rossouw</a>:</p>

<blockquote>
  <p>The Aegir 1.0 release marks the end of my association with the Aegir project, as I am officially stepping down as project leader, handing the reins to Antoine, Miguel and the rest of the team.</p>
  
  <p>Nearly 8 years ago, I left my job to help found Bryght, one of the first Drupal service companies, with the intention of building a hosted service with Drupal. I had a dream, and that dream was called "hostmaster". Over the next several years, the system I developed to accomplish this dream evolved into Aegir.</p>
  
  <p>I started the Aegir project, in it's current form, out of a desire to ensure that my dream would be able to survive beyond my ability to dedicate myself to it. The very fact that I am writing this is evidence that it has succeeded beyond my wildest dreams.</p>
  
  <p>Aegir is bigger than just one person, and I am incredibly happy and proud of the progress made, so I feel completely comfortable leaving you in the hands of my very capable co-maintainers.</p>
  
  <p>Thank you to everybody for their support, and I wish nothing but the best for the project and it's future victories!</p>
</blockquote>

<p>And thank you, Adrian, for this great project you have given to the Drupal community, it means a lot to us!</p>

<p>Now onto the release. This actual release isn't much different from the previous release candidates - you can see the list of changes from the previous <a href="../../../../../1/index-13.html">RC7 release</a> at the end of those notes. However, since this is our first major release in a long time, we figured it would be important to outline how things have changed since the old days of 0.3. For those of you who weren't there, back then installing Aegir was <em>hard</em>. There was no "clone", no SSL, no multiserver. You had to migrate sites one at a time and you had to create platforms yourself (no drush make!). We were still using CVS.</p>

<p>With 1.0, we have multiserver support, Debian packages, DNS, we're using git, drush make and we have a very dynamic <a href="../../../../../index.html">community</a> of users and shops using the project. We have <a href="../../../../../roadmap/2/index.html">ambitious goals for 2.0</a> and we're eager (pun intended) to start moving again! So if you were waiting for Aegir to be <strong>stable</strong>, <strong>easy to install</strong>, <strong>production-ready</strong>, now is the time. The 1.x branch will be well supported as a lot of shops are running it in production already. What are <em>you</em> waiting for?!</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc45">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Major_changes_in_this_release"><span class="toc-number">1. </span>Major changes in this release</a></li>
	<li class="toc-level-1"><a href="#API_changes_documentation_1.x_maintenance_policy_and_2.0"><span class="toc-number">2. </span>API changes, documentation, 1.x maintenance policy and 2.0</a></li>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">3. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">4. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#New_features"><span class="toc-number">5. </span>New features</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">6. </span>Bugfixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">7. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Major_changes_in_this_release">1. Major changes in this release</h2>

<p>Since our last stable release (<a href="http://groups.drupal.org/aegir/0.3">0.3</a>) in august 2009, we've done an incredible amount of work. The code size nearly doubled as the development team and user base, although we don't clearly know yet how many installs there are out there.</p>

<p>We can already say that we've been pretty successful at fulfilling our <a href="http://groups.drupal.org/node/25841">release goals for 0.4</a> and the <a href="../../../../../roadmap/1/index.html">1.0 roadmap</a>. Even though we're <a href="https://drupal.org/project/issues/search?text=&amp;projects=&amp;assigned=&amp;submitted=&amp;participant=&amp;issue_tags_op=or&amp;issue_tags=aegir-1.0">missing bits and pieces</a>, especially in DNS, and multi-server support is not as robust as we'd like it to be, there's still space for improvements and bugfixes in the 1.x branch, and we'll also start on the <a href="../../../../../roadmap/2/index.html">2.0 roadmap</a> once this release is out the door.</p>

<ul>
<li>Multi-server support

<ul>
<li>External and multiple DB support</li>
<li>External and multiple webserver support</li>
<li>Webserver cluster support</li>
<li>Server and services abstractions</li>
</ul></li>
<li>DNS

<ul>
<li>Master zones created on the fly with sites</li>
<li>Manual modification allowed through the provision-zone command</li>
<li>Slave servers</li>
<li>Support for Bind and dnsmasq</li>
</ul></li>
<li>SSL support

<ul>
<li>multi-domain/wildcard support</li>
<li>use of HTTPS can be enabled or required</li>
</ul></li>
<li>Migration improvements

<ul>
<li>Batch migrations</li>
<li>Site migration fixes your body and teaser for sites/community.aegirproject.org/ changes</li>
<li>No more rebuilding the whole node_access table</li>
<li>Cloning</li>
<li>Site rename support</li>
<li>Inter-profile migration</li>
<li>Ignoring site-specific modules so that mass-migrations are easier</li>
</ul></li>
<li>Improved task management

<ul>
<li>Limit how many tasks run at a time</li>
<li>task revisions and timing</li>
<li>canceling tasks</li>
<li>possibility of queuing tasks from the backend</li>
</ul></li>
<li>Improved platform management

<ul>
<li>Automated platform creation through Drush makefile or even a URL</li>
<li>access control and locking</li>
<li>deletion</li>
<li>platforms are stored in ~/platforms</li>
</ul></li>
<li>Site management improvements

<ul>
<li>Named backups</li>
<li>Password resets</li>
<li>Inter-site security (storing passwords outside of settings.php AKA cloaking)</li>
<li>stopped hardcoding page cache</li>
<li>bulk operations</li>
<li>Views support</li>
<li>local.settings.php overrides</li>
<li>backup file size</li>
<li>.htaccess customization</li>
<li>Clean database names and users (instead of site_X)</li>
</ul></li>
<li>Other improvements

<ul>
<li>Domain alias and redirection support</li>
<li>Drush "aliases" (@site.example.com) are generated automatically</li>
<li>Nginx support</li>
<li>Cron through wget support</li>
<li>User interface improvements</li>
<li>Drupal 7 support</li>
<li><a href="../../../../521/index.html">Client node type simplification</a></li>
<li><a href="http://drupal.org/node/1115960">~/clients directory</a></li>
<li><a href="http://drupal.org/node/1027358">aegir_api variable in settings.php</a></li>
<li>Quota API</li>
</ul></li>
<li>Install and upgrade process improvements

<ul>
<li>Aegir can upgrade and install itself, no need to go through the frontend wizards in install.php or upgrade.php</li>
<li>Remote DB server support for installs and upgrades</li>
<li><a href="../../../../../installing/debian/index.html">Debian packages</a> - <code>apt-get install aegir</code></li>
<li>The Aegir install went from being a known nightmare to a total breeze, with 46 seconds to 5 minutes install times with the debian packages and 15 minutes installs on <a href="../../../../../installing/manual/index.html">manual installs</a> (for unsupported platforms)</li>
</ul></li>
<li>Support for <a href="../../../../582/index.html">7 operating systems</a> and counting, we added:

<ul>
<li>Solaris support</li>
<li>CentOS support</li>
<li>Ubuntu support</li>
<li>Gentoo support</li>
<li>FreeBSD support</li>
<li>... and that's just the confirmed installation reports, if it's UNIX, it can probably run Aegir!</li>
</ul></li>
<li>Project management

<ul>
<li>Migrated to our own git repositories</li>
<li>... then <a href="../../../../385/index.html">migrated back to Drupal.org</a> when they switched to git</li>
<li>We now have our own <a href="../../../../../index.html">OpenAtrium site (this site!)</a> for the community (this means you!) to participate in</li>
<li>A <a href="../../../../../notebook/index.html">handbook</a> has been created and expanded to provide solid, collaborative documentation for the project, that anybody can contribute to (it's a wiki!)</li>
<li>We now have clear <a href="../../../../../maintainers/index.html">maintainers</a> for different sections of the code, with 4 maintainers and counting</li>
<li>We now have <a href="../../../../../ci/index.html">continuous integration</a> with a Jenkins server testing Aegir after commits and also testing the upgrade path</li>
</ul></li>
<li><a href="../../../../../examples/index.html">An explosion of third party modules</a>

<ul>
<li><a href="http://drupal.org/project/uc_hosting">Ubercart support</a></li>
<li><a href="http://drupal.org/project/provisionacl">ACL support</a></li>
<li><a href="http://drupal.org/project/provision_boost">Boost support</a></li>
<li><a href="http://drupal.org/project/provision_civicrm">CiviCRM support</a></li>
<li><a href="https://drupal.org/project/hosting_backup_queue">Hosting backup queue</a></li>
<li><a href="https://drupal.org/project/hosting_backup_gc">Backups garbage collection</a></li>
<li><a href="http://www.computerminds.co.uk/articles/aegir-tasks-daemon">Task daemon</a></li>
<li>Your module here!</li>
</ul></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="API_changes_documentation_1.x_maintenance_policy_and_2.0">2. API changes, documentation, 1.x maintenance policy and 2.0</h2>

<p>The API changes since 0.3 are too numerous to list here. However, we are now committed to maintain the whole 1.x series with a stable API. There will be no change in the existing API, although we may add in some stuff if it is really necessary. All future API changes between 1.x and 2.x will be clearly defined so that third party module can be supported.</p>

<p>A documentation initiative has been launched to <a href="http://drupal.org/node/1111254">better document the Hostmaster API</a>. In addition, a dedicated <a href="http://api.aegirproject.org/">API site</a> (along the lines of api.drupal.org) has been put in place to ease exploring the code-base of the Aegir Project. Much work remains, so you can track progress or help out <a href="http://drupal.org/node/1111254#comment-4287518">here</a>.</p>

<p>Major changes to 1.x will not be committed unless they are first tested in 2.0 and merged back. We will however keep the branch opened for documentation fixes and non-invasive changes like performance enhancements and cosmetic changes to the frontend. Major problems and "aegirWTF" may also be corrected in the 1.x branch, after a shakedown in the 2.x branch.</p>

<p>From now on, major development will take place in the 2.x branch, which will be created shortly after this release. The <a href="../../../../../roadmap/2/index.html">roadmap for that branch is ambitious</a> but we'll tackle things one at a time, again on feature branches for major changes so that even that branch will stay stable throughout its development cycle. We will there keep in making stable alpha releases for your testing pleasure.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Installing_and_upgrading">3. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">4. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="New_features">5. New features</h2>

<p>Since this is like a release candidate, we tried to limit the changes to this release to avoid breaking too many things, so not many new features. Of course, since 0.3, there are tons (see above) but this is only since rc7.</p>

<ul>
<li><a href="http://drupal.org/node/1124114">#1124114: allow manual changes to the client's internal name</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">6. Bugfixes</h2>

<p>We did fix a lot of things however, with the upgrade path and the remaining critical issues.</p>

<ul>
<li><a href="http://drupal.org/node/1016890">#1016890: Create Server as cluster is broken after save</a></li>
<li><a href="http://drupal.org/node/1093436">#1093436: hostmaster-6.x-1.0-rc2 won't install - suspected it's due to 5.1.51-MariaDB-mariadb87-log</a></li>
<li><a href="http://drupal.org/node/1080130">#1080130: Batch migrate is broken on Ubuntu 10.04 LTS with PHP 5.3 - expected to be a reference, value given</a></li>
<li><a href="http://drupal.org/node/993944">#993944: ssl rollback failure</a></li>
<li><a href="http://drupal.org/node/1121406">#1121406: RC6 upgrad.sh fatal issue</a></li>
<li><a href="http://drupal.org/node/1027358">#1027358: Set a variable in settings.php so that modules can check whether the site is in Aegir</a></li>
<li><a href="http://drupal.org/node/1123224">#1123224: api.aegirproject.org not updating</a></li>
<li><a href="http://drupal.org/node/1122942">#1122942: aegir.make is broken in 1.0-rc6</a></li>
<li><a href="http://drupal.org/node/1123276">#1123276: Debian pkg: /var/aegir/config is not owned by aegir</a></li>
<li><a href="http://drupal.org/node/1115768">#1115768: Aegir need help with vbox DNS settings</a></li>
<li><a href="http://drupal.org/node/1123176">#1123176: Usage of <code>tempfile</code> in upgrade.sh.txt breaks CentOS compatibility</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">7. Known issues</h2>

<p>Being really open about our project, we have never hidden the fact that some things, sometimes, do not work in Aegir. Our <a href="http://drupal.org/project/issues?text=&amp;projects=provision%2C%20hosting%2C%20hostslave%2C%20eldir%2C%20Hostmaster%20%28Aegir%29&amp;status=Open&amp;priorities=All&amp;categories=All">issue trackers</a> are public, and we've made it a point of honor not only to document clearly what is wrong in our releases as soon as we find out about it, but also to reroll new releases when we fix it.</p>

<p>That being said, 1.0 suffers from a number of significant issues and design flaws. This is the list of <a href="https://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=4&amp;categories=All">all issues marked "major" in the queue right now</a>. Some of those issues can be fixed within the 1.x branch, some can only be fixed by refactoring, and so they will be fixed in 2.x.</p>

<ul>
<li><a href="http://drupal.org/node/922252">#922252: DNS has no access control - anybody can create any zone</a> (2.x)</li>
<li><a href="http://drupal.org/node/762138">#762138: Design security issue with developer access to sites' modules and themes</a> (2.x, maybe merged in 1.x if no API change)</li>
<li><a href="http://drupal.org/node/1081536">#1081536: Platform verify doesn't rollback apache config file</a> (2.x)</li>
<li><a href="http://drupal.org/node/1004526">#1004526: Aliases are not persisted across rename and clone</a> (2.x, maye be merged)</li>
<li><a href="http://drupal.org/node/1126638">#1126638: two sites can take the same server IP for SSL</a> (2.x)</li>
<li><a href="http://drupal.org/node/1111254">#1111254: The Aegir API is not fully documented</a> (1.x)</li>
<li><a href="http://drupal.org/node/1081528">#1081528: moving sites/all modules breaks migration</a></li>
<li><a href="http://drupal.org/node/955854">#955854: site can be very slow with huge number of platforms and packages</a> (2.x, may be merged, see also <a href="http://drupal.org/node/1067688">#1067688: bulk operation forms are too slow with thousands of packages</a>))</li>
<li><a href="http://drupal.org/node/1001620">#1001620: verifying an existing platform (and site) doesn't always work the first time</a> (1.x, hard to reproduce)</li>
<li><a href="http://drupal.org/node/908314">#908314: Deleted sites cause node alias to 404 on refresh</a> (1.x)</li>
<li><a href="http://drupal.org/node/922258">#922258: update DNS records on inter-server migration</a> (2.x, may be merged)</li>
<li><a href="http://drupal.org/node/894046">#894046: language dialog should be a drop-down, not radios</a> (2.x?)</li>
<li><a href="http://drupal.org/node/941870">#941870: failure to copy SSL certificates should abort tasks</a> (1.x)</li>
<li><a href="http://drupal.org/node/922266">#922266: rollback support in DNS</a> (1.x)</li>
<li><a href="https://drupal.org/node/1128596">#1128596: version numbers in the Hostmaster issue queue are wrong</a> (1.x, will be fixed once <a href="https://drupal.org/node/751242">Drupal.org wakes up</a>)</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-179.html?destination=node%2F588%23comment-form">Login</a> or <a href="../../../../../user/register/index-179.html?destination=node%2F588%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-179.html?destination=node%2F588%23comment-form">Login</a> or <a href="../../../../../user/register/index-179.html?destination=node%2F588%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-722" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../10-release-candidate/index.html">1.0 Release candidates</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This section documents all the release candidates towards the 1.0 release.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-180.html?destination=node%2F722%23comment-form">Login</a> or <a href="../../../../../user/register/index-180.html?destination=node%2F722%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-180.html?destination=node%2F722%23comment-form">Login</a> or <a href="../../../../../user/register/index-180.html?destination=node%2F722%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-569" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-13.html">1.0-rc7 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_11 first"><a href="../../../../../taxonomy/term/11/index.html" rel="tag" title="">release-notes</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is very pleased to announce the seventh release candidate of Aegir 1.0.</p>

<p>This release primarily fixes issues with our drush makefile which have prevented installations and upgrades of the last couple of releases. We have also fixed issues with the upgrade.sh script and the Debian packages.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc46">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">3. </span>Bugfixes</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">4. </span>Known issues</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from before 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or recent rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome community for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">3. Bugfixes</h2>

<ul>
<li><a href="http://drupal.org/node/1121406">#1121406: RC6 upgrade.sh fatal issue</a></li>
<li><a href="http://drupal.org/node/1122942">#1122942: aegir.make is broken in 1.0-rc6</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">4. Known issues</h2>

<ul>
<li>upgrade.sh doesn't work in CentOS out of the box - use the <a href="../../../../../upgrading/manual/index.html">manual upgrade process</a> on that platform or apply the hotfix documented in <a href="http://drupal.org/node/1123176">#1123176</a></li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-181.html?destination=node%2F569%23comment-form">Login</a> or <a href="../../../../../user/register/index-181.html?destination=node%2F569%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-181.html?destination=node%2F569%23comment-form">Login</a> or <a href="../../../../../user/register/index-181.html?destination=node%2F569%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-559" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-14.html">1.0-rc6 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is very pleased to announce the sixth release candidate of Aegir 1.0, aka "are we there yet?"</p>

<p>This is yet another hotfix release to fix an issue in the upgrade.sh script and Drupal 7 support.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc47">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">3. </span>Known issues</a></li>
	<li class="toc-level-1"><a href="#New_features"><span class="toc-number">4. </span>New features</a></li>
	<li class="toc-level-1"><a href="#Bugfixes"><span class="toc-number">5. </span>Bugfixes</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from before 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or rc1/2, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome community for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">3. Known issues</h2>

<ul>
<li>Problems remain with the upgrade path. A hotfix is available in <a href="http://drupal.org/node/1121406">#1121406</a> and the tags have been rerolled so that new upgrades do not suffer from this problem</li>
<li>The makefiles released with rc4, rc5 and rc6 were broken, you need to apply <a href="http://drupalcode.org/project/provision.git/patch/64d5fb0af66d50fcecdf0c245cddc5ae85d29acc">this patch to the aegir.make</a> file in the provision module, see the <a href="http://drupal.org/patch/apply">Applying patches article on drupal.org</a> to apply patches. The patch needs to be applied after <a href="../../../../../installing/manual/index.html#Install_provision">step 5.2 in the manual install process</a>. The Debian packages have been fixed in <code>1.0~rc6-2</code>. See bug <a href="http://drupal.org/node/1122942">#1122942</a> for followup.</li>
<li>Ubuntu users are having problems installing the <a href="../../../../548/index.html">Debian packages</a> - we need to have a proper backtrace to debug this issue</li>
</ul>

<p>The Debian package are still in testing mode and feedback there is appreciated.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="New_features">4. New features</h2>

<p>We have now specific <a href="../../../../../maintainers/index.html">maintainers</a> for specific project areas.</p>

<p>A documentation spree has been started by the newly documentation team and merged in this release, so the <a href="http://api.aegirproject.org/">API documentation</a> should be more complete. In particular, we have deprecated hosting_queues_get_arguments() and hook_provision_args() that weren't used anywhere.</p>

<ul>
<li><a href="http://drupal.org/node/1113508">#1113508: Document hosting_queues_get_arguments and hook_provision_args</a></li>
<li><a href="http://drupalcode.org/project/hostmaster.git/commit/a07b0174102deef8d107a8c78418a7cc57ff4139">this commit</a> introduces an prefix for the internal name of clients, so that we can respect your existing namespace policies (default is no prefix)</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bugfixes">5. Bugfixes</h2>

<ul>
<li><a href="http://drupal.org/node/1118286">#1118286: [DNS] Each services need specific function to create config files</a></li>
<li><a href="http://drupal.org/node/1083710">#1083710: [DNS] PHP 5.3 warning fixes</a></li>
<li><a href="http://drupal.org/node/1119968">#1119968: deleting a platform does not delete symbolic links</a> - site and platform deletion should now be more robust</li>
<li><a href="http://drupal.org/node/1119850">#1119850: drupal 7 support broken</a></li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-182.html?destination=node%2F559%23comment-form">Login</a> or <a href="../../../../../user/register/index-182.html?destination=node%2F559%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-182.html?destination=node%2F559%23comment-form">Login</a> or <a href="../../../../../user/register/index-182.html?destination=node%2F559%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-549" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-15.html">1.0-rc5 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is very pleased to announce the <em>fifth</em> release candidate of Aegir 1.0!</p>

<p>This is a hotfix release to fix a major issue in the upgrade path. All users are strongly encouraged to skip the rc4 release and upgrade here instead.</p>

<h2>Changes in 1.0-rc5</h2>

<ul>
<li>fix the upgrade path (<a href="http://drupal.org/node/1118558">#1118558</a>)</li>
<li>fix upgrade.sh to have the right older version all the time and automatically detect drush (<a href="http://drupal.org/node/1117776">#1117776</a>)</li>
</ul>

<h2>Known issues</h2>

<ul>
<li>Drupal 7 support is broken (hotfix available in <a href="http://drupal.org/node/1119850">#1119850</a>)</li>
<li>upgrade.sh is broken again, use <a href="http://drupalcode.org/project/provision.git/blob_plain/84e633b505df86b68823ad12458bfd837999751f:/upgrade.sh.txt">this version</a> instead until rc6 comes out</li>
</ul>

<p>This release is otherwise mostly identical to <a href="../../../../../1/index-16.html">1.0-rc4</a>.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-183.html?destination=node%2F549%23comment-form">Login</a> or <a href="../../../../../user/register/index-183.html?destination=node%2F549%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-183.html?destination=node%2F549%23comment-form">Login</a> or <a href="../../../../../user/register/index-183.html?destination=node%2F549%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-544" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-16.html">1.0-rc4 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir team is very pleased to announce the fourth release candidate of Aegir 1.0!</p>

<p>We have again found critical issues in rc3, detailed below, and a few key features that we wanted to slip into 1.0 that were just low-hanging fruits that deserved to be released. We hope this release candidate will be all shiny and without any critical issues so we can release it as 1.0.</p>

<p><em>Update</em>: because of a last minute API change, the upgrade path is broken and it is not recommended to upgrade to this release. A new release has been published, so use <a href="../../../../../1/index-15.html">1.0-rc5</a> instead. See <a href="http://drupal.org/node/1118558">#1118558</a> for more information.</p>

<h2>Key changes in 1.0-rc4</h2>

<ul>
<li>There is now a <code>~/clients</code> directory in which symlink are automatically created to allow easy access to all your client sites (<a href="http://drupal.org/node/1115960">#1115960</a>)</li>
<li>A variable is now set in <code>settings.php</code> (<code>aegir_api</code>) to allow contrib modules to inspect what Aegir version they are dealing with, if any. The setting is removed on export, that is, if dbcloaking is off (<a href="http://drupal.org/node/1027358">#1027358</a>)</li>
<li>We fixed a big regression where the mass migrate form stopped working in rc3 (<a href="http://drupal.org/node/1111532">#1111532</a>)</li>
<li>The <code>private</code> directory of Drupal 7 is now properly protected (<a href="http://drupal.org/node/1108810">#1108810</a>)</li>
<li>The <a href="../../../../../installing/debian/index.html">Debian package</a> has been tested over and over again and is now the prefered install method for people on Debian</li>
<li>Consequently, <code>install.sh</code> has been removed and the <a href="../../../../../installing/manual/index.html">manual install instructions</a> have been revamped to be clearer, see <a href="../../../../542/index.html">this post</a> for more information about the reasoning behind that change</li>
</ul>

<h2>Known issues</h2>

<ul>
<li>DNS has no access control - anybody can create any zone (<a href="http://drupal.org/node/922252">#922252</a>)</li>
<li>The site form suffers from some performance issues when you have a lot of platforms (<a href="http://drupal.org/node/955854">#955854</a>)</li>
<li>Cluster servers are probably broken right now (<a href="http://drupal.org/node/1016890">#1016890</a>)</li>
<li>Aliases are not persisted across Migrate, (Rename), Clone (provision-deploy) (<a href="http://drupal.org/node/1004526">#1004526</a>)</li>
<li>Upgrade path is broken (<a href="http://drupal.org/node/1118558">#1118558</a>)</li>
</ul>

<p>See <a href="http://drupal.org/project/issues/search?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;assigned=&amp;submitted=&amp;participant=&amp;status[]=Open&amp;issue_tags_op=or&amp;issue_tags=aegir-0.4">all the issues tagged as aegir-0.4</a> and <a href="http://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=4&amp;categories=All">issues marked as 'major'</a> for our comprehensive list of outstanding issues.</p>

<h2>Installing and upgrading</h2>

<p>The canonical source of installation documentation has moved from the usual INSTALL.txt to the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation has now been moved to the community site at</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both manual and automatic upgrade processes. You can download the upgrade.sh.txt script from <a href="../../../../431/index.html" title="http://community.aegirproject.org/node/431">http://community.aegirproject.org/node/431</a>.</p>

<p>It is still imperative that you read the the Upgrade Guide (<a href="../../../../../upgrading/index.html" title="http://community.aegirproject.org/upgrading">http://community.aegirproject.org/upgrading</a>) and follow all version-specific upgrade instructions located at the end of the document before trying to run the upgrade script. This especially applies to users upgrading from before 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or rc1/2, there are unlikely to be any version-specific manual steps required to upgrade to 1.0-rc4, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<p>The upgrade.sh script attempts to backup the existing backend components, download new versions, and then run the hostmaster-migrate command. It assumes you are upgrading from the previous release (hostmaster-6.x-1.0-rc3). If you are not, you may have to edit the script to change the OLD_DRUPAL_DIR variable.</p>

<h2>Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome community for their help, support and encouragement as always! Enjoy the new release :)</p>

<h2>New features</h2>

<ul>
<li><a href="http://drupal.org/node/1115960">#1115960: Moving a site between platforms causes confusion</a></li>
<li><a href="http://drupal.org/node/1027358">#1027358: Set a variable in settings.php so that modules can check whether the site is in Aegir</a></li>
<li><a href="http://drupal.org/node/1111932">#1111932: Move the suggestion of a client title into it's own function (for use when creating clients programatically)</a></li>
</ul>

<h2>Bug fixes</h2>

<ul>
<li><a href="http://drupal.org/node/1111532">#1111532: Mass Migrate fails in Aegir 1.0 RC3</a> - regression from rc2 caused by the security fix below</li>
<li><a href="http://drupal.org/node/1117296">#1117296: cross site request forgery issue in tasks</a> - was fixed again due to the above regression</li>
<li><a href="http://drupal.org/node/1108810">#1108810: Files in sites/example.org/private are accessible.</a></li>
<li><a href="http://drupal.org/node/1102620">#1102620: provision-deploy fails silently on unavailable database</a></li>
<li><a href="http://drupal.org/node/1111572">#1111572: Undefined index: profiles deploy.provision.inc:84</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-184.html?destination=node%2F544%23comment-form">Login</a> or <a href="../../../../../user/register/index-184.html?destination=node%2F544%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-184.html?destination=node%2F544%23comment-form">Login</a> or <a href="../../../../../user/register/index-184.html?destination=node%2F544%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-519" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-17.html">1.0-rc3 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_11 first last"><a href="../../../../../taxonomy/term/11/index.html" rel="tag" title="">release-notes</a></li>
</ul></div><p>Aegir 1.0-rc3 release notes</p>

<p>The Aegir team is very pleased to announce the third release candidate of Aegir 1.0!</p>

<p>This is the third Release Candidate from which we will test fixes to critical bugs from rc2, as well as fix any additional critical bugs found since, until we have no criticals and will then roll out the official 1.0.</p>

<p>This release also includes a fix for a security vulnerability (see below). We recommend you upgrade your Aegir instance to apply this fix.</p>

<h2>Key changes in 1.0-rc3</h2>

<ul>
<li><p>A security vulnerability was fixed that prevents arbitrary configuration from being injected into Apache vhosts by way of the Site Aliases form. See <a href="http://drupal.org/node/1098304">#1098304</a></p></li>
<li><p>The 'Client' feature / node type has been significantly refactored and simplified, with the ultimate aim of hooking it into other CRM/databases (e.g. for LDAP support), and better Aegir-managed site/user security. This involved an exception to our current 'API freeze' for the sake of getting this important refactoring in. See <a href="../../../../521/index.html">this summary of the changes</a> this imposes</p></li>
<li><p>We've upgraded to use Drush 4.4 and Drush Make 2.2 on fresh installs and upgrades. These have been tested and should work without any problems.</p></li>
</ul>

<h2>Known Issues</h2>

<ul>
<li>DNS has no access control - anybody can create any zone (<a href="http://drupal.org/node/922252">#922252</a>)</li>
<li>The site form suffers from some performance issues when you have a lot of platforms (<a href="http://drupal.org/node/955854">#955854</a>)</li>
<li>Cluster servers are probably broken right now (<a href="http://drupal.org/node/1016890">#1016890</a>)</li>
<li>Aliases are not persisted across Migrate, (Rename), Clone (provision-deploy) (<a href="http://drupal.org/node/1004526">#1004526</a>)</li>
<li>The provision.info version tag wasn't updated properly and still reads 1.0-rc2</li>
<li>See all the issues tagged as <a href="https://drupal.org/project/issues/search?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;assigned=&amp;submitted=&amp;participant=&amp;issue_tags_op=or&amp;issue_tags=aegir-1.0">aegir-1.0</a> and <a href="https://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=4&amp;categories=All">issues marked as 'major'</a> for our comprehensive list of outstanding issues.</li>
</ul>

<h2>Installing and upgrading</h2>

<p>The canonical source of installation documentation has moved from the usual INSTALL.txt to the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation has now been moved to the community site at</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both manual and automatic upgrade processes. You can download the upgrade.sh.txt script from <a href="../../../../431/index.html" title="http://community.aegirproject.org/node/431">http://community.aegirproject.org/node/431</a>.</p>

<p>It is still imperative that you read the the Upgrade Guide (<a href="../../../../../upgrading/index.html" title="http://community.aegirproject.org/upgrading">http://community.aegirproject.org/upgrading</a>) and follow all version-specific upgrade instructions located at the end of the document before trying to run the upgrade script. This especially applies to users upgrading from before 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or rc1/2, there are unlikely to be any version-specific manual steps required to upgrade to 1.0-rc3, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<p>The upgrade.sh script attempts to backup the existing backend components, download new versions, and then run the hostmaster-migrate command. It assumes you are upgrading from the previous release (hostmaster-6.x-1.0-rc2). If you are not, you may have to edit the script to change the OLD_DRUPAL_DIR variable.</p>

<p>Bugs fixed</p>

<ul>
<li><a href="http://drupal.org/node/1050730">#1050730 : BIND needs write access on slave zones directory</a></li>
<li><a href="http://drupal.org/node/1102650">#1102650 : Check db connection before can_create_database()</a></li>
<li><a href="http://drupal.org/node/1100196">#1100196 : API docs example have service and service type mixed up</a></li>
<li><a href="http://drupal.org/node/1097612">#1097612 : PHP warnings thrown when a server has no available services.</a></li>
<li><a href="http://drupal.org/node/1106768">#1106768 : Client name of first client (created on installation) is empty</a></li>
<li><a href="http://drupal.org/node/1098304">#1098304 : Domain aliases are not sanitized and it is possible to inject arbitrary vhost configuration via aliases textarea</a></li>
<li><a href="http://drupal.org/node/730424">#730424 : Putting credentials in Apache VHost environment is insecure</a></li>
<li><a href="http://drupal.org/node/1067030">#1067030: Using human readable name instead of machine name</a></li>
<li><a href="http://drupal.org/node/1066676">#1066676: Picture upload doesn't work using a site alias with D7</a> </li>
</ul>

<h2>New features</h2>

<ul>
<li><a href="http://drupal.org/node/1096498">#1096498 : Managers should have access to all sites, tasks and clients</a></li>
<li><a href="http://drupal.org/node/962330">#962330 : refactor and clarify the fields in the client content type</a></li>
<li><a href="http://drupal.org/node/334416">#334416 : security between sites (settings.php protection)</a></li>
</ul>

<h2>Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome community for their help, support and encouragement as always! Enjoy the new release :)</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-185.html?destination=node%2F519%23comment-form">Login</a> or <a href="../../../../../user/register/index-185.html?destination=node%2F519%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-185.html?destination=node%2F519%23comment-form">Login</a> or <a href="../../../../../user/register/index-185.html?destination=node%2F519%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-473" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-18.html">1.0-rc2 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is very pleased to announce the second release candidate of Aegir 1.0!</p>

<p>Yes, you read that right: 1.0! We've decided to rename the 0.4 branch to 1.0.</p>

<p>This is the second Release Candidate from which we will test fixes to critical bugs from rc1, as well as fix any additional critical bugs found since, until we have no criticals and will then roll out the official 1.0.</p>

<h2>Key changes in 1.0-rc2</h2>

<p>There are a lot of bug fixes and features added into this release.</p>

<p>INSTALL.txt and UPGRADE.txt, along with the various architecture hints, and other developer docs, have been moved to the community site under:</p>

<pre><code>http://community.aegirproject.org/administrator-manual
</code></pre>

<p>The Aegir git repositories have moved back to drupal.org, we're back in the family!</p>

<p>We have fixed some key issues that were discovered during testing, including sites that were not put offline during migrations and data loss issues in multiserver migration. We have also worked on the upgrade path for legacy (pre alpha9) installs, which should be able to upgrade to this release directly.</p>

<p>Finally, we fixed a CSRF attack on the task form that allowed an attacker to force a user to run tasks on existing sites and platforms. This is non-critical as only tasks with no confirmation dialog (ie. safe tasks) could be triggered.</p>

<p>Also, we've moved to Drush Make 2.1!</p>

<h2>Known Issues</h2>

<ul>
<li>DNS has no access control - anybody can create any zone (#922252)</li>
<li>The site form suffers from some performance issues when you have a lot of platforms (#955854)</li>
<li>Cluster servers are probably broken right now (#1016890)
*Aliases are not persisted across Migrate, (Rename), Clone (provision-deploy) (#1004526)</li>
<li>See all the issues tagged as aegir-1.0 and issues marked as 'major' for our comprehensive list of outstanding issues.</li>
</ul>

<h2>Installing and upgrading</h2>

<p>The canonical source of installation documentation has moved from the usual INSTALL.txt to the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation has now been moved to the community site at</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both manual and automatic upgrade processes. You can download the upgrade.sh.txt script from <a href="../../../../431/index.html" title="http://community.aegirproject.org/node/431">http://community.aegirproject.org/node/431</a> (note, we point to the version in the 6.x-1.x branch because we accidentally rolled the tagged release before changing the AEGIR_VERSION number in the script. So use this version of the upgrade.sh script, or pay close attention to what version the script says it will upgrade to.)</p>

<p>It is still imperative that you read the the Upgrade Guide (<a href="../../../../../upgrading/index.html" title="http://community.aegirproject.org/upgrading">http://community.aegirproject.org/upgrading</a>) and follow all version-specific upgrade instructions located at the end of the document before trying to run the upgrade script. This especially applies to users upgrading from before 0.4-alpha8, including 0.3.</p>

<p>For users coming from 0.4-beta1, beta2 or rc1, there are unlikely to be any version-specific manual steps required to upgrade to 1.0-rc2, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<p>The upgrade.sh script attempts to backup the existing backend components, download new versions, and then run the hostmaster-migrate command. It assumes you are upgrading from the previous release (hostmaster-0.4-rc1). If you are not, you may have to edit the script to change the OLD_DRUPAL_DIR variable.</p>

<p>Bugs fixed</p>

<ul>
<li><a href="http://drupalcode.org/project/hostmaster.git/commitdiff/68b5a7663a98421f71eb06e0debc7161a6c7ad14">fix CSRF attack on task run links</a></li>
<li><a href="http://drupal.org/node/1075108">#1075108 : Fix for admin/hosting/queues UI for Safari and Chrome</a></li>
<li><a href="http://drupal.org/node/905326">#905326 : Cloning a site doesn't handle file path change in the variables table</a></li>
<li><a href="http://drupal.org/node/1079274">#1079274 : Sites data get lost on migrate or clone / dont "spoke" the site</a></li>
<li><a href="http://drupal.org/node/1075132">#1075132 : Autocomplete field 'Associate a client to this user' in user form throws a warning</a></li>
<li><a href="http://drupal.org/node/1075088">#1075088 : Users have no access to any site if "create site" permission is turned off</a></li>
<li><a href="http://drupal.org/node/1074414">#1074414 : wrong use of drush_backend_invoke</a></li>
<li><a href="http://drupal.org/node/949044">#949044 : It is possible to create broken site or duplicate sites nodes because there is not enough strtolower(trim(domain)) used</a></li>
<li><a href="http://drupal.org/node/1068280">#1068280 : Update order issue during migration from 0.3 to 0.4-beta2</a></li>
<li><a href="http://drupal.org/node/1068660">#1068660 : site is not put offline during migration</a></li>
<li><a href="http://drupal.org/node/884090">#884090 : aplha11 new sites get wrong group perms in files subdirs</a></li>
</ul>

<h2>New features</h2>

<ul>
<li><a href="http://drupal.org/node/1062070">#1062070 : We no longer rebuild the node access table all the time, only if necessary</a></li>
<li><a href="http://drupal.org/node/1080118">#1080118 : Add a page on Aegir to the d.o Administration Guide</a></li>
</ul>

<h2>No Drush 4?</h2>

<p>Some people might be wondering why we haven't changed the install.sh or upgrade.sh scripts to fetch the latest Drush 4.2 release.</p>

<p>Drush 4.2 has a bug which breaks rsync and possibly other stuff when using multiserver.</p>

<p>It's been fixed in Drush, but we are awaiting a 4.3 release before we roll with it. If you see 4.3 come out, you can probably upgrade your Drush if you wish (we tested this morning and are in fact compatible with Drush HEAD at time of writing).</p>

<p>See this ticket for more: <a href="http://drupal.org/node/1041386" title="http://drupal.org/node/1041386">http://drupal.org/node/1041386</a></p>

<p>We are working with the Drush developers to attempt to 'sync' our releases in future, but we wanted to roll out rc2 to all you good folk sooner rather than later this time :)</p>

<h2>Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome community for their help, support and encouragement as always!</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-186.html?destination=node%2F473%23comment-form">Login</a> or <a href="../../../../../user/register/index-186.html?destination=node%2F473%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-186.html?destination=node%2F473%23comment-form">Login</a> or <a href="../../../../../user/register/index-186.html?destination=node%2F473%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-359" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../0/index.html">0.4-rc1 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is very pleased to announce the first release candidate of Aegir 0.4!</p>

<p>This is the first rc from which we will go into crazy bugfixing mode until we have no criticals and will then roll out the official 0.4.</p>

<h2>Key changes in 0.4-rc1</h2>

<p>There are a lot of bug fixes and features added into this release.</p>

<p>Significantly, a major data-loss bug was fixed in Multiserver environments, that was causing a remote site's 'files' directory contents to be deleted if those files didn't already exist on the 'master' copy of the site on the hostmaster system.</p>

<p>Also, we stopped hardcoding "$conf['cache'] = 1" in sites' settings.php, returning control over the caching function back to the user by way of:</p>

<ul>
<li>inserting the preferred setting into a file called 'local.settings.php' alongside the settings.php so it won't be clobbered by the template, or</li>
<li>same as above but in /var/aegir/config/includes/global.inc to set it globally for all sites, or</li>
<li>setting it in /admin/settings/performance on your site, and having that setting stick instead of being reset by the hardcode.</li>
</ul>

<h2>Known Issues</h2>

<ul>
<li>DNS has no access control - anybody can create any zone (<a href="http://drupal.org/node/922252">#922252</a>)</li>
<li>The site form suffers from some performance issues when you have a lot of platforms (<a href="http://drupal.org/node/955854">#955854</a>)</li>
<li>Cluster servers are probably broken right now (<a href="http://drupal.org/node/1016890">#1016890</a>)</li>
<li>Aliases are not persisted across Migrate, (Rename), Clone (provision-deploy) (<a href="http://drupal.org/node/1004526">#1004526</a>)</li>
</ul>

<p>See <a href="http://drupal.org/project/issues/search?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;assigned=&amp;submitted=&amp;participant=&amp;status[]=Open&amp;issue_tags_op=or&amp;issue_tags=aegir-0.4">all the issues tagged as aegir-0.4</a> and <a href="http://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=4&amp;categories=All">issues marked as 'major'</a> for our comprehensive list of outstanding issues.</p>

<h2>Installing and upgrading</h2>

<p>The canonical source of installation documentation is as usual the excellent <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=docs/INSTALL.txt;hb=provision-0.4-rc1">INSTALL.txt</a>. The hostmaster and provision tarballs have the following checksums:</p>

<ul>
<li><code>provision-0.4-rc1.tgz: 6f4da4ba7dcfaa1bcc3c44f96beb3eda</code></li>
<li><code>hostmaster-0.4-rc1.tgz: b2a42b151b817c1ea6cdf15462aa2e15</code></li>
</ul>

<p>For users who have Rackspace Cloud accounts and want to install Aegir in the cloud, you are welcome to try mig5's <a href="http://github.com/mig5/frigg">Frigg script</a>, which automatically creates a new virtual server and installs Aegir, with one command!</p>

<p>For users of 0.4-beta2 and earlier, we offer an <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=upgrade.sh.txt;hb=provision-0.4-rc1">upgrade.sh script</a> in Provision, which tries to automate much of the steps outlined in the <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=docs/UPGRADE.txt;hb=provision-0.4-rc1">UPGRADE.txt</a>.</p>

<p>It is still imperative that you read the UPGRADE.txt and follow all version-specific upgrade instructions located at the end of the document before trying to run the upgrade script. This especially applies to users upgrading from before 0.4-alpha8, including 0.3.</p>

<p>For users coming from 0.4-beta1 or beta2, there are unlikely to be any version-specific manual steps required to upgrade to 0.4-rc1, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<p>The upgrade.sh script attempts to backup the existing backend components, download new versions, and then run the hostmaster-migrate command. It assumes you are upgrading from the previous release (hostmaster-0.4-beta2). If you are not, you may have to edit the script to change the OLD_DRUPAL_DIR variable.</p>

<h2>Bugs fixed</h2>

<ul>
<li><a href="http://drupal.org/node/1057736">#1057736 : Cloning SSL sites will lead to a non SSL site .. but certificate is still copied</a></li>
<li><a href="http://drupal.org/node/1057178">#1057178 : Call-time pass-by-reference has been deprecated task.hosting.inc</a></li>
<li><a href="http://drupal.org/node/1059328">#1059328 : Restore and Backup_Delete tasks submit dialog even when no backups are available</a></li>
<li><a href="http://drupal.org/node/1057280">#1057280 : Site batch api error</a></li>
<li><a href="http://drupal.org/node/1058650">#1058650 : Web_group 'www' missing in $common_groups array</a></li>
<li><a href="http://drupal.org/node/1047922">#1047922 : Drush 4.x and 5.0-dev/HEAD breaks Aegir in some (hidden) ways - paths in files not rewritten on clone/migrate/rename</a></li>
<li><a href="http://drupal.org/node/931420">#931420 : Task list in hosting_summary block shows underscores</a></li>
<li><a href="http://drupal.org/node/1052028">#1052028 : [DNS] Creating and deleting zone configuration on slaves doesn't work with PHP 5.3</a></li>
<li><a href="http://drupal.org/node/1053834">#1053834 : [DNS] error adding a new record on existing zone</a></li>
<li><a href="http://drupal.org/node/1033072">#1033072 : migrate interface takes forever (litterally) to load</a></li>
<li><a href="http://drupal.org/node/976300">#976300 : web server migration results in content removal when site is verified</a></li>
<li><a href="http://drupal.org/node/888194">#888194 : Trying to get property of non-object provision.inc:57</a></li>
<li><a href="http://drupal.org/node/775850">#775850 : Openpublish 2.0 Installation profile is not seen by Aegir</a></li>
<li><a href="http://drupal.org/node/996578">#996578 : Install Profiles disappear from profile list on load or refresh of site creation form</a></li>
<li><a href="http://drupal.org/node/1003666">#1003666 : If site quota is at 100% editing site nodes is not possible</a></li>
<li><a href="http://drupal.org/node/1039010">#1039010 : Enforce that platform names and paths must be unique, even across remote servers, because of the spoke model</a></li>
<li><a href="http://drupal.org/node/959852">#959852 : Add new server confirmation text indicates wrong server type</a></li>
<li><a href="http://drupal.org/node/1037222">#1037222 : upgrade.sh and upgrade.txt ambiguous about drush and drush make versions</a></li>
<li><a href="http://drupal.org/node/985518">#985518 : Default client changes if Clients feature was ever enabled (0.4-beta1)</a></li>
<li><a href="http://drupal.org/node/1014638">#1014638 : All Drush versions since 4.0-rc6 are breaking Aegir completely</a></li>
<li><a href="http://drupal.org/node/1009386">#1009386 : /var/aegir/platforms logic syncs all platforms to the remote web server</a></li>
<li><a href="http://drupal.org/node/1008954">#1008954 : Fatal error: Call to undefined function hosting_site_list</a></li>
</ul>

<h2>New features</h2>

<ul>
<li><a href="http://drupal.org/node/994210">#994210 : 
Add support for some common files/subdirs like css/js/ctools/imagecache</a></li>
<li><a href="http://drupal.org/node/984396">#984396 : we stopped hardcoding page cache in settings.php</a></li>
<li><a href="http://drupal.org/node/630336">#630336 : billing support</a></li>
<li><a href="http://drupal.org/node/1005014">#1005014 : Bulk operations - doesn't display all available tasks</a></li>
<li><a href="http://drupal.org/node/1044938">#1044938 : Allow local.settings.php to override global.inc to make it usable</a></li>
<li><a href="http://drupal.org/node/1042758">#1042758 : Display filesize on Backups lists</a></li>
<li><a href="http://drupal.org/node/860582">#860582 : Get site by alias as well as url</a></li>
<li><a href="http://drupal.org/node/1039168">#1039168 : after creating platform, publish path should not be changeable</a></li>
</ul>

<h2>No Drush 4 or Drush Make 2.0?</h2>

<p>Some people might be wondering why we haven't changed the install.sh
or upgrade.sh scripts to fetch the latest Drush 4.2 release or Drush
Make 2.0.</p>

<p><em>Drush</em></p>

<p>Drush 4.2 has a bug which breaks rsync and possibly other stuff when
using multiserver.</p>

<p>It's been fixed in Drush, but we are awaiting a 4.3 release before we
roll with it. If you see 4.3 come out, you can probably upgrade your
Drush if you wish (we tested this morning and are in fact compatible
with Drush HEAD at time of writing).</p>

<p>See this ticket for more: <a href="http://drupal.org/node/1041386" title="http://drupal.org/node/1041386">http://drupal.org/node/1041386</a></p>

<p><em>Drush Make</em></p>

<p>Drush Make 2.0 has a bug that prevents building platforms from
distributions that didn't come from drupal.org.</p>

<p>This has also been fixed in HEAD, but we are awaiting a 2.1 release
before we roll with it. If you see 2.1 come out, you can probably
upgrade your Drush Make if you wish.</p>

<p>See this ticket for more: <a href="http://drupal.org/node/1059238" title="http://drupal.org/node/1059238">http://drupal.org/node/1059238</a></p>

<p>We are working with the developers of these projects to attempt to
'sync' our releases in future, but we wanted to roll out rc1 to all
you good folk sooner rather than later this time :)</p>

<h2>Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome community for their help, support and encouragement as always!</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-187.html?destination=node%2F359%23comment-form">Login</a> or <a href="../../../../../user/register/index-187.html?destination=node%2F359%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-187.html?destination=node%2F359%23comment-form">Login</a> or <a href="../../../../../user/register/index-187.html?destination=node%2F359%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2839" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../1/index-19.html">1.11 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>The Aegir team is proud to announce the eleventh release in the stable 1.x release branch! This release ships a moderately critical security fix and one small upgrade bug with secret SSL certificates. Everyone is encouraged to upgrade.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc48">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Installing_and_upgrading"><span class="toc-number">1. </span>Installing and upgrading</a></li>
	<li class="toc-level-1"><a href="#Need_help"><span class="toc-number">2. </span>Need help?</a></li>
	<li class="toc-level-1"><a href="#Known_issues"><span class="toc-number">3. </span>Known issues</a></li>
	<li class="toc-level-1"><a href="#Features"><span class="toc-number">4. </span>Features</a></li>
	<li class="toc-level-1"><a href="#Security_fixes"><span class="toc-number">5. </span>Security fixes</a></li>
	<li class="toc-level-1"><a href="#Bug_fixes"><span class="toc-number">6. </span>Bug fixes</a></li>
</ol>
</div>
</div>

<h2 id="Installing_and_upgrading">1. Installing and upgrading</h2>

<p>The canonical source of installation documentation is on the community site at:</p>

<pre><code>http://community.aegirproject.org/installing
</code></pre>

<p>In a similar fashion, the upgrade documentation is:</p>

<pre><code>http://community.aegirproject.org/upgrading
</code></pre>

<p>Within those sections you'll find step-by-step instructions for performing both <a href="../../../../../upgrading/manual/index.html">manual</a> and <a href="../../../../../upgrading/script/index.html">automatic</a> upgrade processes.</p>

<p>It is still imperative that you read the the <a href="../../../../../upgrading/path/index.html">upgrade path and version-specific information</a> and follow all version-specific upgrade instructions before trying to run the upgrade script or manual upgrade. This especially applies to users upgrading from releases prior to 0.4-alpha8, including 0.3.</p>

<p>For users coming from the 0.4 betas or rc releases, there are unlikely to be any version-specific manual steps required to upgrade, but you should make a habit of reading them anyway just to make sure. No-one likes a nasty surprise!</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Need_help">2. Need help?</h2>

<p>If you struggle to install or upgrade your Aegir system, you have a number of options available to you for getting help.</p>

<p>Consult this page for more information: <a href="../../../../../help/index.html" title="http://community.aegirproject.org/help">http://community.aegirproject.org/help</a></p>

<p>Thanks to our awesome <a href="../../../../../index.html">community</a> for their help, support and encouragement as always! Enjoy the new release :)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Known_issues">3. Known issues</h2>

<p>Aegir 1.x depends on Drush 4.5 or 4.6, which are available <em>only</em> in Debian squeeze backports (old stable!), which may make fresh installs or careless upgrades impossible. To workaround this issue, install the Drush package directly from backports:</p>

<pre><code>wget <a href="http://backports.debian.org/debian-backports/pool/main/d/drush/drush_4.5-2~bpo60+1_all.deb" title="http://backports.debian.org/debian-backports/pool/main/d/drush/drush_4.5-2~bpo60+1_all.deb">http://backports.debian.org/debian-backports/pool/main/d/drush/drush_4.5...</a>
dpkg -i drush_4.5-2~bpo60+1_all.deb
</code></pre>

<p>See <a href="http://packages.debian.org/squeeze-backports/all/drush/download">this page</a> for other mirrors.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Features">4. Features</h2>

<p>No new feature.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Security_fixes">5. Security fixes</h2>

<ul>
<li>fix mild security issue with login-reset links (#1220062)</li>
<li>security fix: SA-CORE-2013-003, files/ protection (#2141799)</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Bug_fixes">6. Bug fixes</h2>

<ul>
<li>fix upgrades if the SSL certificates are symlinks to files not readable by Aegir, a rare but legitimate use-case, see <a href="https://drupal.org/node/2046249">#2046249</a> for more information.</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-188.html?destination=node%2F2839%23comment-form">Login</a> or <a href="../../../../../user/register/index-188.html?destination=node%2F2839%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-188.html?destination=node%2F2839%23comment-form">Login</a> or <a href="../../../../../user/register/index-188.html?destination=node%2F2839%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-723" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../04-alpha-and-beta/index.html">0.4 alpha and beta releases</a>
    </h2>
  
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-189.html?destination=node%2F723%23comment-form">Login</a> or <a href="../../../../../user/register/index-189.html?destination=node%2F723%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-189.html?destination=node%2F723%23comment-form">Login</a> or <a href="../../../../../user/register/index-189.html?destination=node%2F723%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-220" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../0/index-2.html">0.4-beta2 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_10 first"><a href="../../../../../taxonomy/term/10/index.html" rel="tag" title="">0.4-beta2</a></li>
<li class="taxonomy_term_11 last"><a href="../../../../../taxonomy/term/11/index.html" rel="tag" title="">release-notes</a></li>
</ul></div><p>The Aegir team is proud to announce the second beta release of Aegir 0.4.</p>

<p>This release primarily is a bugfix release.</p>

<p>There have also been quite a few patches sitting in our issue queues for review for a very long time, and we have attempted to commit a whole bunch of those in this release. Things have been moving a bit slowly and we're sorry for that.</p>

<h2>Key changes in 0.4-beta2</h2>

<p>There are a few changes in this release that are new, such as the presence of an early 'bulk operations' feature. We do not expect this to be bug free, but hope that by committing some of this new code and making it present in a new release, we'll get some community users testing this stuff and reporting back / patching it to make it better. Otherwise this stuff just gets lost in the queue!</p>

<p>After this release we will be looking strongly at a release candidate for 0.4.</p>

<h2>Known Issues:</h2>

<p>Some of our issues from beta1 are still actually present:</p>

<ul>
<li>DNS has no access control - anybody can create any zone (<a href="http://drupal.org/node/922252">#922252</a>)</li>
<li>Inter-server migration may fail under some circumstances (<a href="http://drupal.org/node/976300">#976300</a>)</li>
<li>The site form suffers from some performance issues when you have a lot of platforms (<a href="http://drupal.org/node/955854">#955854</a>)</li>
</ul>

<p>Also, an issue has been identified with remote web servers: in some cases, when the 'master' server syncs the site contents to a remote, it can delete the files/ of a site because it doesn't sync a site's files back to the master server except in the case of backups/migrations.</p>

<p>We would like to warn users that are making use of Aegir's multiserver features to be aware of this issue: <a href="http://drupal.org/node/976300" title="http://drupal.org/node/976300">http://drupal.org/node/976300</a> .</p>

<h2>The road to 0.4 and Aegir contributors</h2>

<p>Our core dev team is small and various demands for our time have been slowing development to a degree. We have a decent-sized community with a wide range of skills, and would like to take this opportunity to encourage our users to attempt to contribute to the project where they see fit - whether this be code development (bug fixes, new features), documentation, or even promotion / talks at Drupal events.</p>

<p>We will potentially be seeking new core developers to the project soon as well. If you'd like to chat with us about contributing to Aegir, don't hesitate to <a href="http://lists.aegirproject.org/">write on the mailing lists</a> or come and see us on IRC in #aegir at irc.freenode.net. Aegir's core developers are Adrian Rossouw (Vertice), Antoine Beaupr (anarcat) and Miguel Jacq (mig5).</p>

<p>We know the barrier to entry can be a little high with hacking on Aegir, and will be refocusing our efforts to try and make that easier for new starters. An API site will be along soon!</p>

<p>See <a href="http://drupal.org/project/issues/search?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;assigned=&amp;submitted=&amp;participant=&amp;status[]=Open&amp;issue_tags_op=or&amp;issue_tags=aegir-0.4">all the issues tagged as aegir-0.4</a> and <a href="http://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=4&amp;categories=All">issues marked as 'major'</a> for our current outstanding issues.</p>

<h2>Installing and upgrading:</h2>

<p>The canonical source of installation documentation is as usual the excellent <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=docs/INSTALL.txt;hb=provision-0.4-beta2">INSTALL.txt</a>.</p>

<p>For users who have Rackspace Cloud accounts and want to install Aegir in the cloud, you are welcome to try mig5's <a href="http://github.com/mig5/frigg">Frigg script</a>, which automatically creates a new virtual server and installs Aegir, with one command!</p>

<p>For users of 0.4-beta1 and earlier, we offer an <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=upgrade.sh.txt;hb=provision-0.4-beta2">upgrade.sh script</a> in Provision, which tries to automate much of the steps outlined in the <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=docs/UPGRADE.txt;hb=provision-0.4-beta2">UPGRADE.txt</a>.</p>

<p>It is still imperative that you read the UPGRADE.txt and follow all version-specific upgrade instructions located at the end of the document before trying to run the upgrade script. This especially applies to users upgrading from before 0.4-alpha8, including 0.3.</p>

<p>The upgrade.sh script attempts to backup the existing backend components, download new versions, and then run the hostmaster-migrate command. It assumes you are upgrading from the previous release (hostmaster-0.4-beta1). If you are not, you may have to edit the script to change the OLD_DRUPAL_DIR variable.</p>

<h2>Bugs fixed</h2>

<ul>
<li><a href="http://drupal.org/node/695244">#695244 : hosting-cron killed my server</a></li>
<li><a href="http://drupal.org/node/983056">#983056 : install.sh does not properly escape the mysql root password</a></li>
<li><a href="http://drupal.org/node/967528">#967528 : Custom modules can't specify own tasks</a></li>
<li><a href="http://drupal.org/node/791262">#791262 : Color module &amp; theme logo/favicon paths not updated during site deployment</a></li>
<li><a href="http://drupal.org/node/1000890">#1000890 : default_restart_cmd() doesn't return the correct restart command</a></li>
<li><a href="http://drupal.org/node/767008">#767008 : New users aren't associated properly with their respective client nodes on site signup</a></li>
<li><a href="http://drupal.org/node/908202">#908202 : Author not set on site node creation (and other hosting content types)</a></li>
<li><a href="http://drupal.org/node/994212">#994212 : README.txt contains out of date link</a></li>
<li><a href="http://drupal.org/node/988670">#988670 : Installation via drush fails on MariaDB</a></li>
</ul>

<h2>New features</h2>

<ul>
<li><a href="http://drupal.org/node/956432">#956432 : ~aegir/platforms path should be created automagically</a></li>
<li><a href="http://drupal.org/node/994146">#994146 : Add paths rewrite in the files table also for sites/community.aegirproject.org to make migration to Aegir easier</a></li>
<li><a href="http://drupal.org/node/783642">#783642 : Code to use drush to enqueue Aegir tasks for enabled sites, just as if it had been done via the ui</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-190.html?destination=node%2F220%23comment-form">Login</a> or <a href="../../../../../user/register/index-190.html?destination=node%2F220%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-190.html?destination=node%2F220%23comment-form">Login</a> or <a href="../../../../../user/register/index-190.html?destination=node%2F220%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-163" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../0/index-3.html">0.4-beta1 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>After more than a year of (15!) alpha releases, we're finally out of the darkness and into the light! The Aegir project is pleased to announce the first beta of the 0.4 series. This release is primarily a bug fix release, but also new features that were the last targets for the 0.4 release goals.</p>

<p>The beta marks the beginning of the final cycle in the release of the 0.4 branch. We consider this release to be mostly feature complete. It still has bugs and problems, but since we are using it in production, we feel it's more appropriate to call it a beta, to invite wider testing and stabilise the codebase.</p>

<p>This is also an opportunity to test the upgrade path from pre alpha9 releases, which seem to be suffering from bitrot. You should be able to upgrade to this release from 0.3 and above.</p>

<h2>Key changes in 0.4-beta1</h2>

<ul>
<li>Installer now support remote db servers (<a href="http://drupal.org/node/973910">#973910</a>)</li>
<li>Some work was done to improve the usability of the hostmaster-install command, which should be usable out of the box once provision and drush are installed</li>
<li>By default, we setup local MySQL server to use sockets, which creates a separate server but improves security significantly, as we do not force people to open their database server to the network (<a href="http://drupal.org/node/977024">#977024</a>)</li>
<li>The upgrade path for pre-alpha9 releases has been fixed</li>
</ul>

<h2>Known Issues:</h2>

<p>The following are known critical issues with the current release, for which there are tickets, but we didn't feel were critical enough to prevent the beta release.</p>

<p>Some of the issues have been present since prior to alpha15, they aren't all new issues.</p>

<ul>
<li>DNS has no access control - anybody can create any zone (<a href="http://drupal.org/node/922252">#922252</a>)</li>
<li>Inter-server migration may fail under some circumstances (<a href="http://drupal.org/node/976300">#976300</a>)</li>
<li>The site form suffers from some performance issues when you have a lot of platforms (<a href="http://drupal.org/node/955854">#955854</a>))</li>
</ul>

<p>See also <a href="http://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=1&amp;categories=All">the complete list of critical issues</a>.</p>

<h2>The road to 0.4</h2>

<p>We are not yet in a code freeze, as we still have critical issues opened (see below) and are aiming at a few more features to be really complete (see <a href="http://drupal.org/project/issues/search?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;assigned=&amp;submitted=&amp;participant=&amp;status[]=Open&amp;issue_tags_op=or&amp;issue_tags=aegir-0.4">all the issues tagged as aegir-0.4</a> and <a href="http://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=4&amp;categories=All">issues marked as 'major'</a>).</p>

<p>We also have still a lot of issues to review before our final 0.4 release. If people are interested in contributing, a good and painless way of doing so is to take issues in the <a href="http://drupal.org/project/issues?text=&amp;projects=provision,+hosting,+hostslave,+eldir,+Hostmaster+(Aegir)&amp;status=8&amp;priorities=All&amp;categories=All">needs review queue</a> and test the patches. Don't forget to change the status accordingly!</p>

<h2>Installing and upgrading:</h2>

<p>The canonical source of installation documentation is as usual the excellent <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=docs/INSTALL.txt;hb=provision-0.4-beta1">INSTALL.txt</a>.</p>

<p>For the first time, we offer an <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=upgrade.sh.txt;hb=provision-0.4-beta1">upgrade.sh script</a> in Provision, which tries to automate much of the steps outlined in the <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=docs/UPGRADE.txt;hb=provision-0.4-beta1">UPGRADE.txt</a>.</p>

<p>It is still imperative that you read the UPGRADE.txt and follow all version-specific upgrade instructions located at the end of the document before trying to run the upgrade script. This especially applies to users upgrading from before 0.4-alpha8, including 0.3.</p>

<p>The upgrade.sh script attempts to backup the existing backend components, download new versions, and then run the hostmaster-migrate command. It assumes you are upgrading from the previous release (hostmaster-0.4-alpha15). If you are not, you may have to edit the script to change the OLD_DRUPAL_DIR variable.</p>

<p>The script is in its infancy and has not been tested except by the developer writing it. We urge caution (make backups!) but encourage feedback. If in doubt, just follow the UPGRADE.txt steps and perform all the manual commands as you usually would. Some users report problems using the script on servers with really old versions of drush_make: the script stalls after upgrading Provision. You can try to run the upgrade process manually to fix that issue, which should now be fixed in beta1.</p>

<h2>Bugs fixed</h2>

<ul>
<li><a href="http://drupal.org/node/978784">#978784: Using --aegir_db_host=localhost results with broken Aegir install</a></li>
<li><a href="http://drupal.org/node/968270">#968270: @hostmaster provision-install freeze in grant_host function if database access is open</a></li>
<li><a href="http://drupal.org/node/969326">#969326: Schema prevents install on MariaDB</a></li>
<li><a href="http://drupal.org/node/973826">#973826: upgrade path woes from alpha6</a></li>
<li><a href="http://drupal.org/node/898452">#898452: INSTALL.TXT and UPGRADE.TXT should mention umask</a></li>
<li><a href="http://drupal.org/node/905386">#905386: 0.4-alpha12: provision-deploy fails with: Failed to extract the contents of /var/aegir/backups/xxxx.tar.gz to (The target</a></li>
<li><a href="http://drupal.org/node/826840">#826840: Save settings.php with uncloaked credentials on backup (for using on non-aegir hosts)</a></li>
<li><a href="http://drupal.org/node/966888">#966888: upgrade.sh.txt freezes for old drush make (from 0.4-alpha7)</a></li>
<li><a href="http://drupal.org/node/965256">#965256: INSTALL.txt doesn't leave MySQL configured correctly</a></li>
<li><a href="http://drupal.org/node/894024">#894024: we rely on a DNS misconfiguration</a></li>
<li>fix upgrade path from pre-alpha8 releases (hopefully)</li>
<li>fix the client ACL form in the user profile</li>
</ul>

<h2>New features</h2>

<ul>
<li><a href="http://drupal.org/node/952144">#952144: support local socket connexions for mysql</a></li>
<li><a href="http://drupal.org/node/973910">#973910: remote db servers installs and upgrades support</a></li>
<li>allow clients to cancel their own tasks</li>
<li><a href="http://drupal.org/node/678636">#678636: ability to delete tasks from the frontend</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-191.html?destination=node%2F163%23comment-form">Login</a> or <a href="../../../../../user/register/index-191.html?destination=node%2F163%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-191.html?destination=node%2F163%23comment-form">Login</a> or <a href="../../../../../user/register/index-191.html?destination=node%2F163%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-82" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../0/index-4.html">0.4-alpha15 release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_1 first last"><a href="../../../../../taxonomy/term/1/index.html" rel="tag" title="">0.4-alpha15</a></li>
</ul></div><h1>Aegir 0.4 Alpha15 released</h1>

<p>The Aegir project is pleased to announce our 0.4 alpha 15 release. This release is primarily a bug fix release, which aims to tie off a huge amount of outstanding bugs and other tasks.</p>

<p>We did aim to release beta1 but decided that there were a few critical bugs still lingering that we wouldn't want to overshadow in such a momentous release. Instead we've chosen to push out one last alpha before (finally) heading out into beta and RC stages of the 0.4 cycle.</p>

<h2>community.aegirproject.org</h2>

<p>In our biggest news, which we've chosen to announce in this release, we are very proud and excited to announce the launch of our new community site, <a href="../../../../../index.html" title="http://community.aegirproject.org">http://community.aegirproject.org</a> !</p>

<p>Much preparation and planning has gone into building a clean, feature-rich community portal for our ever-growing Aegir users. We hope you'll agree that the documentation space, development information and community resources are long-awaited and desperately needed features to help users understand how Aegir works and how to use it.</p>

<p>The community portal features:</p>

<ul>
<li>News area (blog, announcements)</li>
<li>Almost all the Aegir documentation has been re-written and dramatically improved in a new Aegir handbook, covering all aspects of installing, using, understanding and developing Aegir.</li>
<li>Screencasts and videos from sessions and tutorials (all the historical ones have been collated and added)</li>
<li>Events calendar</li>
<li>Shop resources (to be completed)</li>
<li>Feed syndication of the Aegir universe (twitter, articles, git commits)</li>
</ul>

<p>The Documentation on groups.drupal.org is largely out of date and not in any sane order, and will be decommissioned in favour of the new documentation. Some of the still relevant and well-written documentation was dragged across and cleaned up where necessary.</p>

<p>The documentation area on the new site is still a wiki so we would like to encourage users to continue to keep them up to date and add more to help improve the experience for other users.</p>

<p>We'd like to thank all the contributors to the existing docs for their hard work and initiatives and hope you'll enjoy the new space and structure to keep helping make Aegir awesome.</p>

<h2>Key changes in 0.4-alpha15</h2>

<p>In our 0.4 alpha 15 release, these notable changes/improvements have occured:</p>

<ul>
<li>The DNS feature has been implemented and is available in /admin/hosting/features (Experimental)</li>
<li>install.sh script has been changed considerably - most of the MySQL tests and user creation have been moved into provision to be handled by drush/php. There is no longer an 'aegir_root' user required for MySQL, we simply use your MySQL root user, which must have a password. You are required to supply a valid FQDN on installation, so that remote web servers can theoretically resolve the Aegir server if connecting to it for databases.</li>
<li>upgrade.sh script added (see below, adventurous people please test)</li>
<li>UPGRADE.txt updated to be a provide a little more clarity</li>
<li>There's a new /admin/hosting/settings area with misc settings/customisations, including:

<ul>
<li>ability to run wget instead of drush cron</li>
<li>delete sites without having to disable them first</li>
<li>when selecting a core profile, hide platforms that incidentally have those core profiles but are intended as distributions (i.e OpenAtrium)</li>
</ul></li>
<li>backup task saves site's settings.php with uncloaked creds. Useful for exporting to non-aegir servers or for importing into new aegir servers</li>
</ul>

<h2>Installing and upgrading:</h2>

<p>The canonical source of installation documentation is as usual the excellent <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=docs/INSTALL.txt;hb=provision-0.4-alpha15">INSTALL.txt</a>.</p>

<p>For the first time, we offer an <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=upgrade.sh.txt;hb=provision-0.4-alpha15">upgrade.sh script</a> in Provision, which tries to automate much of the steps outlined in the <a href="http://git.aegirproject.org/?p=provision.git;a=blob_plain;f=docs/UPGRADE.txt;hb=provision-0.4-alpha15">UPGRADE.txt</a>.</p>

<p>It is still imperative that you read the UPGRADE.txt and follow all version-specific upgrade instructions located at the end of the document before trying to run the upgrade script. This especially applies to users upgrading from before 0.4-alpha8, including 0.3.</p>

<p>The upgrade.sh script attempts to backup the existing backend components, download new versions, and then run the hostmaster-migrate command. It assumes you are upgrading from the previous release (hostmaster-0.4-alpha14). If you are not, you may have to edit the script to change the OLD_DRUPAL_DIR variable.</p>

<p>The script is in its infancy and has not been tested except by the developers while writing it. We urge caution (take backups!) but encourage feedback. If in doubt, just follow the UPGRADE.txt steps and perform all the manual commands as you usually would. <em>Edit:</em> some users report problems using the script on servers with really old versions of drush_make: the script stalls after upgrading Provision. Either run the upgrade process manually or <a href="http://git.aegirproject.org/?p=provision.git;a=commitdiff;h=ca5ed31c9b52167664cbed621051c10b11fb9d85">apply this fix</a> to your upgrade.sh.txt</p>

<h2>Known Issues:</h2>

<p>The following are known issues with the current release, for which there are tickets, but we didn't feel were critical enough to prevent another alpha release.
Some of the issues have been present since prior to alpha14, they aren't all new issues.</p>

<ul>
<li>DNS - currently there is no access control</li>
<li>Hostmaster install doesn't yet support remote db servers</li>
<li>'Save' button on forms under some versions of Firefox/Iceweasel on Linux is greyed out</li>
</ul>

<h2>Bugs fixed:</h2>

<ul>
<li><a href="http://drupal.org/node/868896">#868896</a> : INSTALL.TXT needs updates</li>
<li><a href="http://drupal.org/node/880712">#880712</a> : install.sh.txt not prompting for the root MySQL password on Fedora 13</li>
<li><a href="http://drupal.org/node/882970">#882970</a> : settings.php should not be updated before a vhost file is created and verified</li>
<li><a href="http://drupal.org/node/888210">#888210</a> : Undefined variable: missing_requirement install_6.inc:214</li>
<li><a href="http://drupal.org/node/894004">#894004</a> : install.sh lies about mysql listen AKA move the mysql creds handling to hostmaster-install</li>
<li><a href="http://drupal.org/node/896492">#896492</a> : Anonymous users can't view the 'hosting/disabled/$site' disabled page</li>
<li><a href="http://drupal.org/node/897326">#897326</a> : Typo in provision.config.inc</li>
<li><a href="http://drupal.org/node/898732">#898732</a> : Deleted sites are counted against quotas</li>
<li><a href="http://drupal.org/node/911392">#911392</a> : Cloned site shows wrong database in UI</li>
<li><a href="http://drupal.org/node/913486">#913486</a> : Database server service stores port '0' in the hosting_service table</li>
<li><a href="http://drupal.org/node/914040">#914040</a> : Server crashed because hosting_site_alias table was huge</li>
<li><a href="http://drupal.org/node/919848">#919848</a> : verifying a server queues platform verification <em>before</em> the server verification</li>
<li><a href="http://drupal.org/node/922716">#922716</a> : Expand link opens new window when used from modal frame.</li>
<li><a href="http://drupal.org/node/928570">#928570</a> : Modal Frame font is inconsistent</li>
<li><a href="http://drupal.org/node/931136">#931136</a> : You can't delete the D7 alpha7 and beta1 sites.</li>
<li><a href="http://drupal.org/node/934830">#934830</a> : no width limit of 320px for div#navigation ul.links</li>
<li><a href="http://drupal.org/node/937490">#937490</a> : Fix Platform access control to deal with profile &gt; platform paradigm</li>
<li><a href="http://drupal.org/node/940816">#940816</a> : SSL Enabled Settings do not trigger insertion of Rewrite rules in vhost file unless domain aliases specified</li>
<li><a href="http://drupal.org/node/942144">#942144</a> : Warnings when deleting a site</li>
<li><a href="http://drupal.org/node/944450">#944450</a> : Saving a Package Node removes attached data</li>
<li><a href="http://drupal.org/node/945894">#945894</a> : Enabling DNS service on server node gives MySQL errors</li>
<li><a href="http://drupal.org/node/946422">#946422</a> : cannot sync platform to remote</li>
<li><a href="http://drupal.org/node/947898">#947898</a> : Code in global.inc not picked up by settings.php</li>
<li><a href="http://drupal.org/node/949044">#949044</a> : It is possible to create broken site or duplicate sites nodes because there is not enough strtolower(trim(domain)) used</li>
<li><a href="http://drupal.org/node/950976">#950976</a> : Update hints for OS X</li>
<li><a href="http://drupal.org/node/950980">#950980</a> : New OpenSSL breaks install script</li>
<li><a href="http://drupal.org/node/951296">#951296</a> : @localhost no longer allowed in email addresses in Drupal 7</li>
<li><a href="http://drupal.org/node/955184">#955184</a> : Backup task breaks any site by replacing settings.php with version working only with Apache</li>
<li><a href="http://drupal.org/node/958094">#958094</a> : Disabling a site through Aegir front-end doesn't make it inaccessible</li>
<li><a href="http://drupal.org/node/960106">#960106</a> : That the 'Publish path' for a new platform should be absolute is not obvious (usability)</li>
</ul>

<p>various others not reported in the queue</p>

<h2>Feature requests fixed:</h2>

<ul>
<li><a href="http://drupal.org/node/366420">#366420</a> : DNS slave server support</li>
<li><a href="http://drupal.org/node/366814">#366814</a> : manage DNS records properly when creating/restoring/verifying/disabling/deleting sites</li>
<li><a href="http://drupal.org/node/826840">#826840</a> : Save settings.php with uncloaked credentials on backup (for using on non-aegir hosts)</li>
<li><a href="http://drupal.org/node/896914">#896914</a> : Migrate form displays current platform as a target</li>
<li><a href="http://drupal.org/node/897982">#897982</a> : Limit choice of install profiles to those on available platforms</li>
<li><a href="http://drupal.org/node/903884">#903884</a> : Delete task should be visible and inactive, not hidden.</li>
<li><a href="http://drupal.org/node/922278">#922278</a> : configure the master server to allow slaves to do zone transfers</li>
<li><a href="http://drupal.org/node/955550">#955550</a> : Improve Documentation to Reduce IRC Support Requests</li>
</ul>

<p>various others not reported in the queue.</p>

<p>This was a mammoth and long-awaited release. Thanks to all our users for their continuing support, patience and contributions!</p>

<p>-- The Aegir core devs</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-192.html?destination=node%2F82%23comment-form">Login</a> or <a href="../../../../../user/register/index-192.html?destination=node%2F82%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-192.html?destination=node%2F82%23comment-form">Login</a> or <a href="../../../../../user/register/index-192.html?destination=node%2F82%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-522" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../522/index.html">Previous release notes</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Release notes prior to Aegir 0.4-alpha15 were published on <a href="http://groups.drupal.org/taxonomy/term/6179">groups.drupal.org</a> and can be read there.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-193.html?destination=node%2F522%23comment-form">Login</a> or <a href="../../../../../user/register/index-193.html?destination=node%2F522%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-193.html?destination=node%2F522%23comment-form">Login</a> or <a href="../../../../../user/register/index-193.html?destination=node%2F522%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-5" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../developing/index.html">Developer Manual</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p>This section of the documentation is aimed at developers interested in the Aegir project.</p>

<p>We use Git as a version control system for managing the project code, so we have <a href="../../../../31/index.html">specific instructions on how to use git</a>.</p>

<p>Developers wishing to collaborate directly with the core team will want to read the <a href="../../../../546/index.html">release engineering guide</a>.</p>

<p>Developers working on third-party modules should read <a href="../../../../33/index.html">the guide to extend Aegir</a> and <a href="../../../../79/index.html">the API documentation</a>.</p>

<p>Developers interested in developing on, for or with Aegir might be interested in <a href="http://drupal.org/project/aegir-up">Aegir-up</a>, which provides a fully installed and configured virtual machine on <a href="http://www.virtualbox.org/">Virtualbox</a>/<a href="http://vagrant-up.com/">Vagrant</a>. The <a href="http://drupal.org/project/puppet-aegir">Puppet module</a> on which it is based supports an <code>$aegir_dev_build</code> option, that will install Provision and Hostmaster from the git repos, preserving the .git repos.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-11.html?destination=node%2F5%23comment-form">Login</a> or <a href="../../../../../user/register/index-11.html?destination=node%2F5%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-11.html?destination=node%2F5%23comment-form">Login</a> or <a href="../../../../../user/register/index-11.html?destination=node%2F5%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-31" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../31/index.html">Git repositories locations and instructions</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The source code of Aegir is located on Drupal.org, as with the issue queues and release nodes.</p>

<p>Aegir is also made up of several separate components designed to work together, that are grouped in two main git repositories: hostmaster and provision. This page details those locations.</p>

<p>Newcomers to git should probably consult our <a href="../../../../185/index.html">git crash course</a> while people already familiar with git can have a reminder on how to use it within aegir through the <a href="../../../../186/index.html">basic git workflow</a> page.</p>

<h2>Repositories locations</h2>

<p>There are the URLs you can use to pull the repositories:</p>

<pre>
git clone <a href="http://git.drupal.org/project/provision.git" title="http://git.drupal.org/project/provision.git">http://git.drupal.org/project/provision.git</a>
git clone <a href="http://git.drupal.org/project/hostmaster.git" title="http://git.drupal.org/project/hostmaster.git">http://git.drupal.org/project/hostmaster.git</a>
</pre>

<p>Developers with push access to the repositories should pull via SSH.</p>

<pre>
git clone ssh://[username]@git.drupal.org/project/provision.git
git clone ssh://[username]@git.drupal.org/project/hostmaster.git
</pre>

<p>There is a web interface for your perusal at:</p>

<ul>
<li><a href="http://drupalcode.org/project/provision.git" title="http://drupalcode.org/project/provision.git">http://drupalcode.org/project/provision.git</a></li>
<li><a href="http://drupalcode.org/project/hostmaster.git" title="http://drupalcode.org/project/hostmaster.git">http://drupalcode.org/project/hostmaster.git</a></li>
</ul>

<p>The git repositories were hosted for a while on <a href="http://koumbit.org/">Koumbit's</a> servers, but were migrated back to Drupal.org during the <a href="../../../../385/index.html">great git.drupal.org migration</a>. Do not use git.aegirproject.org as it doesn't have the most recent commits and may be shutdown at any time.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-419.html?destination=node%2F31%23comment-form">Login</a> or <a href="../../../../../user/register/index-419.html?destination=node%2F31%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../31/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-185" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../185/index.html">A crash course in Git</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <h2>Clone a repo</h2>

<p>Let's take hostmaster:</p>

<p><div class="codeblock"><code>git clone http://git.drupalcode.org/project/hostmaster.git</code></div></p>

<p>If successful, you will have a hostmaster directory at the last state of development ('HEAD' in CVS speak, usually 'master' branch in git speak, though in our case this is <a href="../../../../524/index.html">now 6.x-1.x</a>).</p>

<h2>Check the status of the local git repository:</h2>

<p><div class="codeblock"><code>git status</code></div></p>

<h2>See the commit messages:</h2>

<p><div class="codeblock"><code>git log</code></div></p>

<h2>Check all 'releases'</h2>

<p><div class="codeblock"><code>git tag</code></div></p>

<h2>Create a new branch for your local development:</h2>

<p><div class="codeblock"><code>git checkout -b &lt;new_branch_name&gt;</code></div></p>

<h2>Create a new branch for development, based on an existing remote branch or tag</h2>

<p><div class="codeblock"><code>git checkout -b &lt;new_branch_name&gt; origin/&lt;branch_name&gt;</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-194.html?destination=node%2F185%23comment-form">Login</a> or <a href="../../../../../user/register/index-194.html?destination=node%2F185%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-194.html?destination=node%2F185%23comment-form">Login</a> or <a href="../../../../../user/register/index-194.html?destination=node%2F185%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-186" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../186/index.html">Basic git workflow: committing and pushing</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>So say you have some work you want to do on the hostmaster module. You first need to clone the repository:</p>

<p><div class="codeblock"><code>git clone http://git.drupal.org/project/hostmaster.git</code></div></p>

<p>That will create a <code>hostmaster</code> directory with the whole history of the project, and a checkout of the "master" branch (which is the equivalent of CVS's "HEAD" in git).</p>

<p>You make some modifications to the code to fix a bug, and then, you make a commit. That commit will only be local for now, that's the way git works:</p>

<p><div class="codeblock"><code>vi hostmaster.profile<br />git commit -m &quot;#12345 fix the install profile to do X&quot; hostmaster.profile</code></div></p>

<p>Note that contrarily to subversion or CVS, you need to explicitly mention which file(s) you want to commit. You can also use the -a flag to commit all changes.</p>

<p>If you have write access to the repository, you can now push your changes straight into git. However, the git:// url above is readonly, so you will want to use SSH to push your changes. For that, we will have had to add your SSH public key to our repositories. You may also want to add a special "remote" repository to push your changes. You will need to do this only once (per repository):</p>

<p><div class="codeblock"><code>git remote add drupalorg ssh://[username]@git.drupal.org/project/hostmaster.git</code></div></p>

<p>You can now push your changes to that repository.</p>

<p><div class="codeblock"><code>git push drupalorg</code></div></p>

<p>If you do <em>not</em> have write access to the repository, you can send the Aegir developers patches by submitting them for review in the <a href="http://drupal.org/project/issues?text=&amp;projects=hosting,+provision,+eldir,+Hostmaster+(Aegir)&amp;status=Open&amp;priorities=All&amp;categories=All">Issue queues</a> (see the <a href="http://drupal.org/node/1054616">patch contributor guide on drupal.org</a> for more details) or by uploading them to your <a href="http://drupal.org/node/1053378">personnal sandbox</a>.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-420.html?destination=node%2F186%23comment-form">Login</a> or <a href="../../../../../user/register/index-420.html?destination=node%2F186%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../186/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-187" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/branch-and-tagging-conventions/index.html">Branch and tagging conventions</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Aegir development makes a heavy use of branches to keep development stable. We use feature branches to do large development work and have release branches to keep stable releases maintained while development happen on the development branches.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc49">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Summary"><span class="toc-number">1. </span>Summary</a></li>
	<li class="toc-level-1"><a href="#Branch_naming_conventions"><span class="toc-number">2. </span>Branch naming conventions</a>
<ol>
	<li class="toc-level-2"><a href="#Main_development_branch"><span class="toc-number">2.1. </span>Main development branch</a></li>
	<li class="toc-level-2"><a href="#Stable_release_branches"><span class="toc-number">2.2. </span>Stable release branches</a></li>
	<li class="toc-level-2"><a href="#Feature_branches"><span class="toc-number">2.3. </span>Feature branches</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Tag_naming_convention"><span class="toc-number">3. </span>Tag naming convention</a></li>
	<li class="toc-level-1"><a href="#CVS_and_git_history"><span class="toc-number">4. </span>CVS and git history</a></li>
</ol>
</div>
</div>

<h1 id="Summary">1. Summary</h1>

<ul>
<li>The current <strong>development branch</strong> is: 7.x-3.x</li>
<li>The current <strong>stable branch</strong> is: 6.x-2.x</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Branch_naming_conventions">2. Branch naming conventions</h1>

<p>All branches are either development branches, stable branches or feature branches. Development and stable branches have the same naming convention:  <code>6.x-2.x</code> or <code>7.x-3.x</code>. The only different between the two is that a stable branch is the branch where stable releases are published from.</p>

<p><em>Note</em>: since the <a href="../../../../385/index.html">great git.drupal.org migration</a>, we are back on Drupal.org and have been forced to change some of our naming convention, especially to include the core release number in the tag (so <code>6.x-2.x</code>), which is a source of confusion for our <code>provision</code> module which supports any Drupal core version.  See <a href="http://drupal.org/node/322626#comment-4116688">this issue on drupal.org</a> for followup.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Main_development_branch">2.1. Main development branch</h2>

<p>The main development branch is created after a fully stable release is published. For example, the <code>6.x-2.x</code> branch has been created when the 1.0 release was published. It is  a development branch until it is considered feature-complete and goes through the alpha/beta/rc release cycle, at which point it will be declared a stable branch and a new development branch will be created (<code>7.x-3.x</code> at that point).</p>

<p>The development branch is <strong>not stable</strong> and should <strong>not be used in production environments</strong>.</p>

<p><em>Note that we have <a href="../../../../524/index.html">dropped the master branch</a> as it is not well supported on Drupal.org for releases.</em></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Stable_release_branches">2.2. Stable release branches</h2>

<p>Stable releases are performed from stable release branches. A branch is declared stable only after it went through the complete alpha/beta/rc release cycle, as detailed above..</p>

<p>Once the branch is declared stable, new releases are quickly done as "hotfixes", without intervening alpha/beta/rc releases. So for example, <code>6.x-1.0</code> will come after <code>6.x-1.0-alpha1</code>, <code>6.x-1.0-beta1</code>, <code>6.x-1.0-rc1</code> <em>at least</em>, and then be followed directly by <code>6.x-1.1</code>.</p>

<p>Releases on the same stable branch are API-compatible with each other (so <code>1.1</code> is compatible with <code>1.0</code>). The upgrade path is supported between major stable releases (so you can upgrade from <code>1.0</code> to <code>1.1</code> or <code>2.0</code>).</p>

<p><strong>Special case</strong>: during the 0.x release cycle, releases were not API-compatible with each other, ie. 0.4 was <em>not</em> compatible with 0.3, and you could barely upgrade from 0.3 to 0.4.</p>

<p>Only one stable branch is maintained at a time.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Feature_branches">2.3. Feature branches</h2>

<p>More complex development goes into development or "feature" branches, to avoid making <code>master</code> too unstable. Feature branches must be prefixed with "dev-" and use the issue number (if available or relevant) and a short name. So for example, there could be work on a <code>dev-12345-mybug</code> branch or <code>dev-dns</code> branch for a larger feature (DNS, in that case) which doesn't fit in a single issue.</p>

<p>Feature branches should be based of a known stable baseline as much as possible. For example, you should branch off the last alpha release if you want to make merging with other dev branches and master easier. See <a href="http://developers.slashdot.org/story/10/11/30/1649231/Linus-On-Branching-Practices">this article</a> for a thorough discussion on this practice</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Tag_naming_convention">3. Tag naming convention</h1>

<p>Every release is tagged with a <code>6.x-x.y</code> tag (e.g. <code>6.x-0.4</code>, <code>6.x-0.4-alpha15</code> or <code>6.x-1.0</code>). Those tags are usually laid on the stable branches, except for alpha/beta/rc releases which are laid on the development branch.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="CVS_and_git_history">4. CVS and git history</h1>

<p>The CVS tags and branches are still accessible in git and will be kept there for posterity. They respect the traditional Drupal.org naming convention.</p>

<p>They have also been converted to the new git.drupal.org conventions during the <a href="../../../../385/index.html">great git.drupal.org migration</a>.</p>

<p>Since that migration (february 2011), history has been rewritten to clean up the authors in the history.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-195.html?destination=node%2F187%23comment-form">Login</a> or <a href="../../../../../user/register/index-195.html?destination=node%2F187%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-195.html?destination=node%2F187%23comment-form">Login</a> or <a href="../../../../../user/register/index-195.html?destination=node%2F187%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-385" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../385/index.html">The great git.drupal.org migration</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>After <a href="../../../../369/index.html">thorough discussions</a> where we weighted the pros and cons of profiting from the <a href="http://drupal.org/project/great_git_migration">Great Git Migration</a>, I think it's pretty clear that we have a great opportunity to migrate our source repositories back to Drupal.org. We will get:</p>

<ul>
<li>more visibility - people will find us through drupal.org easily</li>
<li>more consistency - versions in the issue queue matching the real releases</li>
<li>even more consistency - people will find the source better from drupal.org</li>
<li>and then more consistency - usage stats will work again!</li>
</ul>

<p>We will be able to:</p>

<ul>
<li>host our module and theme within the install profile - the major reason why we migrated away back then</li>
<li>use whatever naming convention we want for tags and branches - although only some will be used for releases for now, see <a href="http://drupal.org/node/322626#comment-4116688">this issue</a> for follow-up</li>
<li>keep our history - the <a href="http://groups.drupal.org/drupal-org-git-migration-team">git team</a> was nice enough to clone directly from our repositories (although see below, we're taking the opportunity of the migration to clean up our history)</li>
</ul>

<h1>What it means for you</h1>

<p>This does have an impact on your existing repositories. Since we migrated to git.drupal.org, the repositories have changed location. The other thing is that the commit IDs have changed, and you will need to clone new checkouts before you can work with them effectively.</p>

<p>So in short:</p>

<ul>
<li>repos will move to git.drupal.org</li>
<li>you need to clone again</li>
<li>make sure your identity is set correctly</li>
</ul>

<h1>URL changes</h1>

<p>So the repositories have moved. Everyone has to fetch the source code from <a href="http://git.drupal.org/">git.drupal.org</a> now. At some point in the future, <a href="http://koumbit.org/">Koumbit</a> will close <a href="../git.aegirproject/index.html">git.aegirproject.org</a>. Concretely, Koumbit will keep the mirror running readonly for a while just to be on the safe side, but you shouldn't expect git.aegirproject.org to work and should switch URLs, as detailed below.</p>

<p>This documentation is taken from the <a href="http://drupal.org/node/1054594">Drupal.org git workflows documentation</a>.</p>

<h2>Readonly repositories URL change</h2>

<p>The readonly access will change from:</p>

<p><div class="codeblock"><code>git://git.aegirproject.org/provision.git<br />git://git.aegirproject.org/hostmaster.git</code></div></p>

<p>to:</p>

<p><div class="codeblock"><code>http://git.drupal.org/project/provision.git<br />http://git.drupal.org/project/hostmaster.git</code></div></p>

<p>See also the <a href="http://drupal.org/node/1054616">git patch maintainer guide</a>.</p>

<h2>Core committers repositories URL change</h2>

<p>The read/write access will change from:</p>

<p><div class="codeblock"><code>ssh://gitosis@git.aegirproject.org/provision.git<br />ssh://gitosis@git.aegirproject.org/hostmaster.git</code></div></p>

<p>to:</p>

<p><div class="codeblock"><code>ssh://[username]@git.drupal.org/project/provision.git<br />ssh://[username]@git.drupal.org/project/hostmaster.git</code></div></p>

<p>... notice how you will need to set your Drupal.org username in the URL. Drupal.org has good documentation on <a href="http://drupal.org/node/1027094">how  authentication works on git.drupal.org</a>. See also <a href="http://drupal.org/node/1059322">the project maintainer git guide</a>.</p>

<h2>Sandboxes</h2>

<p>The migration to Drupal.org also introduces sandboxes, something we didn't have before, and which allows you to host your own branches of our modules (even if you're not a core committer) or contrib/test modules, directly on Drupal.org. See the <a href="http://drupal.org/node/1053378">sandbox collaboration guide</a> for more information on that.</p>

<h2>What if I pull/push from/to the wrong one?</h2>

<p>It could happen before/during/after the migration that you pull or push from or to the wrong repository. git can rebase with the new repository, but unfortunately, the old commits will be mingled with the new ones.</p>

<p>To be able to push to the new repositories, you will need to follow instructions below to cleanup your repositories.</p>

<h1>Rewriting history</h1>

<p>I have taken the liberty of rewriting our collective history. There were a lot of commits with inconsistent authors: some had invalid emails, some had no real names, some had multiple different email addresses for the same person. I narrowed the list down, through extensive detective work, to a complete list of 14 distinct authors.</p>

<p>I have rewritten all commit authors that didn't seem right to follow a consistent pattern:</p>

<p><div class="codeblock"><code>Firstname Lastname &lt;email&gt;</code></div></p>

<p>The firstname/lastname is the combination you have used in certain commits. It's not the most popular way (ie. most commits had the nickname instead of first/last), but it seems the most logical one.</p>

<p>The email was your most often used email or the one you have registered as such at drupal.org, if you didn't have an email address specified (in case you committed your code back in the days of CVS). (There are 6 commits from someone with a box at ovh.net that I could track, and that I can only guess are Miguel's, but I'm not sure so I have let those one fly. :)</p>

<p>You <strong>should</strong> make sure you have your <a href="http://drupal.org/node/1022156">identity set straight in your git configuration</a>, especially your email address, if you want your contributions to be properly credited in the future on Drupal.org. In short, this means:</p>

<p><div class="codeblock"><code>git config --global user.name &quot;User Name&quot;<br />git config --global user.email user@example.com</code></div></p>

<p>Again, see <a href="http://drupal.org/node/1022156">the manual</a> for more information, especially how this maps to your Drupal.org account.</p>

<h1>A fresh clone is necessary!!!!</h1>

<p>Note that, because we rewrote history, you will <strong>need</strong> to clone your repository from new remote. So yes, contrarily to what was documented here before, you will need to clone from scratch.</p>

<p>We understand this may be annoying if you work on a bunch of branches or have local branches you want to keep. Unfortunately, our original tests didn't cover all use cases and were misleading in thinking we could just rebase existing repositories.</p>

<h1>Other documentation</h1>

<p>People unfamiliar with git or specifically git on Drupal.org should read the <a href="http://drupal.org/documentation/git">growing git handbook</a> on Drupal.org.</p>

<p>People that <em>are</em> familiar with git should <em>contribute</em> to that manual. :)</p>

<h1>Under the hood</h1>

<p>The history rewrite was performed through git-fast-export and git-fast-import magic, with a fairly simple perl script of my own. I have cloned the current repo, filtered it and published a new version for git.drupal.org to pull. You can see the results here:</p>

<p><div class="codeblock"><code>http://git.aegirproject.org/?p=export/provision.git<br />http://git.aegirproject.org/?p=export/hostmaster.git</code></div></p>

<p>The exact calling sequence is this:</p>

<pre>
mkdir export orig
cd export
git init --bare hostmaster.git
cd ../orig
git clone --bare git://git.aegirproject.org/hostmaster
cd hostmaster.git
# look at the authors in the original repo
git fast-export --all |  grep -a '^author [^&lt;]* &lt;[^&gt;]*&gt; [0-9][0-9]* [+-][0-9][0-9][0-9][0-9]$' | sed 's/[0-9][0-9]* [+-][0-9][0-9][0-9][0-9]$//' | sort | uniq -c
git fast-export --all | perl /home/anarcat/bin/rewrite_authors.pl | ( cd ../../export/hostmaster.git ; git fast-import )
cd ../../export/hostmaster.git
# look at the authors in the new repo
git fast-export --all |  grep -a '^author [^&lt;]* &lt;[^&gt;]*&gt; [0-9][0-9]* [+-][0-9][0-9][0-9][0-9]$' | sed 's/[0-9][0-9]* [+-][0-9][0-9][0-9][0-9]$//' | sort | uniq -c
# rinse, repeat until the mapping is right
# push repositories online
git remote add origin ssh://gitosis@git.aegirproject.org/export/hostmaster.git
git push --all
git push --tags
# repeat with provision
</pre>

<p>This is the script source, without all the mappings:</p>

<pre>
#! /usr/bin/perl -w

%authors = ( 
    'anarcat ' =&gt; 'Antoine Beaupr ',
   # ... 
);

sub remap {
    my $a = shift;
    if ($authors{$a}) {
        return $authors{$a};
    } else {
        return $a;
    }
}

while (&lt;&gt;) {
    s#^author ([^&lt;]+ &lt;[^&gt;]+&gt;) ([0-9]+ [+-][0-9][0-9][0-9][0-9])$#'author ' . remap($1) . ' ' . $2#e;
    print;
}
</pre>

<h2>Migration checklist</h2>

<ol>
<li>serve exported repositories to migration team <strong>done!</strong></li>
<li>update the repositories with change authors <strong>done!</strong></li>
<li><a href="http://drupal.org/project/great_git_migration">the great git migration</a> <strong>done!</strong> git.aegirproject.org is now readonly, commits are pushed to git.drupal.org and releases are performed on drupal.org</li>
<li>update documentation in <a href="../../../../../handbook/index.html">handbook</a> <em>in progress!</em>

<ul>
<li><a href="../../../../31/index.html">repositories locations</a> <strong>done</strong></li>
<li><a href="../../../../185/index.html">crash course</a> <strong>done</strong></li>
<li><a href="../../../../186/index.html">basic workflow</a> <strong>done</strong></li>
<li><a href="../../../../32/index.html">release process</a> <strong>needs review</strong> - updated for release nodes stuff, will check workflow during the next release</li>
<li><a href="../../../../187/index.html">advanced workflow: branch naming conventions</a> <strong>in progress</strong> - see <a href="http://drupal.org/node/1074876">0.4-rc2 release coordination</a></li>
<li><a href="../../../../377/index.html">migration of the install docs into the handbook work</a> <strong>in progress</strong></li>
</ul></li>
<li>update the <a href="http://www.aegirproject.org/">home page links</a> <strong>done</strong> - I have changed the link in the body from git.aegirproject.org to drupal.org provision/hostmaster project pages, and pointed the "Get the source" link in the bottom to the install manual instead</li>
<li>update makefiles and files in docs/* in provision to fetch from git.drupal.org <strong>done!</strong></li>
<li>make at least one other release <strong>done</strong> - <a href="http://drupal.org/node/1074876">0.4-rc2 release coordination</a></li>
<li>turn off git.aegirproject.org <strong>done</strong></li>
</ol>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-196.html?destination=node%2F385%23comment-form">Login</a> or <a href="../../../../../user/register/index-196.html?destination=node%2F385%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-196.html?destination=node%2F385%23comment-form">Login</a> or <a href="../../../../../user/register/index-196.html?destination=node%2F385%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-78" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../developing/architecture/index.html">Architecture Guide</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This section deals with providing coherence and understanding of various aspects of Aegir - what it is, and what it is not.</p>

<p>It tries to explain some of the concepts with which Aegir is developed for and how all the bits hook together.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-197.html?destination=node%2F78%23comment-form">Login</a> or <a href="../../../../../user/register/index-197.html?destination=node%2F78%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-197.html?destination=node%2F78%23comment-form">Login</a> or <a href="../../../../../user/register/index-197.html?destination=node%2F78%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-36" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../36/index.html">Aegir design and terminology</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_3 first"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>@TODO - this document is out of date and needs updating.</p>

<p>This page documents all the different terms used when referring to components of the Hostmaster system, and how the different entities relate to each other.</p>

<h4>Front End</h4>

<p>The user interface used to administrate your sites. The front end is provided by the Hostmaster install profile, and the Hosting contributed module. It defines a complete Drupal based data model for managing the various aspects of your installation.</p>

<h4>Entities</h4>

<p>These entities are used primarily in the front end to manage the configuration and data. Upon calling the back end, the system breaks
down the properties of these entities to be passed as options for the command line, so the back end only has a flat data structure to
work with. During this process, all relationships are automatically retrieved, making it a one step process for the developer.</p>

<dl>
<dt><a name='glossary-client'></a>Client</dt><dd><strong>The person or group that runs the site.</strong> 
                This information is usually required for billing and access purposes, to assure
                that only certain people are able to view the information for sites they run. 
                If you do not intend on having more than one client access the system, 
                you will not need to create any additional clients for your purposes.</dd>

<dt><a name='glossary-site'></a>Site</dt><dd><strong>An instance of a hosted site.</strong>
                It contains information relating to the site, most notably the domain name, database server 
                and platform it is being published on. A site may also have several aliases for additional
                domains the site needs to be accessible on.</dd>

<dt><a name='glossary-task'></a>Task</dt><dd><strong>The mechanism whereby Hostmaster keeps track of all changes that occur to the system.</strong>
                Each task acts as a command for the back end, and contains a full log of all changes that have occurred.
                If a task should fail, the administrator will be notified with an explanation of exactly what went wrong,
                and how to fix it.</dd>

<dt><a name='glossary-platform'></a>Platform</dt><dd><strong>The file system location on a specific web server on which to publish sites.</strong>
                Multiple platforms can co-exist on the same web server, and need to do so for
                upgrades to be managed, as this is accomplished by moving the site to a platform
                hosting an updated release.
                Platforms are most commonly built for specific releases of Drupal.</dd>

<dt><a name='glossary-server'></a>Server</dt><dd><strong>The server that provides various services.</strong>

<dt><a name='glossary-service'></a>Service</dt><dd><strong>The service that runs on the server.</strong> This might be HTTP or a Database server.
                Each web server hosts one or more platforms, which act as publishing points for the hosted sites.
                If you are not intending to use Hostmaster in a distributed fashion, you will not need to create
                additional web servers for your purposes.

                Most web servers and database servers are on the same machine, but for performance reasons 
                external database servers might be required. It is not uncommon for one database server
                to be shared amongst all site instances.
                If you are not intending to use an external database server, or multiple database servers, you
                will not need to create any additional database servers for your purposes.</dd>

<dt><a name='glossary-service_type'></a>Service type</dt><dd><strong>The type of service that runs on the server.</strong> In the example of 'HTTP' as a service, a service *type* is Apache or Nginx, for example. MySQL is a *type* of service 'Database'.</dd>

<dt><a name='glossary-package'></a>Package</dt><dd><strong>An installable component for a site.</strong>
  Hostmaster keeps tracks of all the modules, themes and install profiles installed across your entire network.
  These packages most commonly link to their project on drupal.org, but might not in the case of custom modules.
  Users are not able to create nodes of this type, as they are generated automatically during verify and sync tasks.
</dd>

<dt><a name='glossary-package_release'></a>Package Release</dt><dd><strong>The release of a specific package.</strong>
  Each package on your network has at least one installed release, and each platform (including Drupal itself) may
  have several releases installed across your network.
</dd>

<dt><a name='glossary-db_server'></a>Package Instance</dt><dd><strong>Where a package release has been installed.</strong>
  A package release may be installed in multiple places on a platform, and sites may have access to multiple versions of packages.
  This entity also tracks which modules are enabled, and what version of the schema (if any) they have installed.
</dd>

</dd></dl>

<p><img src="http://groups.drupal.org/files/HostmasterERD3.png" /></p>

<h4>Task types</h4>

<p>These are "hosting commands" that the server can accomplish. These are mapped to back end commands by the task queue processor.</p>

<dl>

<dt>Verify platform</dt>
<dd>Verify that a platform is correctly installed. Automatically created when new platforms are added, to ensure that they are capable of having new sites installed on them. Operates on: <strong>platforms</strong></dd>

<dt>Import sites</dt>
<dd>Import existing sites onto a platform.  Operates on: <strong>platforms</strong></dd>

<dt>Install site</dt>
<dd>Install a new site. This is automatically generated when a site node is created.  Operates on: <strong>sites</strong></dd>

<dt>Sync site</dt>
<dd>Synchronize changes to the site record with the back end. Automatically generated on editing of the site node.  Operates on: <strong>sites</strong></dd>

<dt>Backup site</dt>
<dd>Generate a backup of an existing site. This backup contains everything needed to run the site.  Operates on: <strong>sites</strong></dd>

<dt>Restore backup</dt>
<dd>Restore a site to a previous backed up version. Operates on: <strong>sites</strong></dd>

<dt>Disable site</dt>
<dd>Disable a running site. This is commonly used in the case of non-payment from clients. Operates on: <strong>sites</strong></dd>

<dt>Enable site</dt>
<dd>Enable a disabled site. The opposite of Disable. Operates on: <strong>sites</strong></dd>

</dl>

<p><strong>This is an incomplete list, and will be updated as more tasks are added</strong></p>

<h4>Queues</h4>

<p>The front end uses and maintains several queues, which are then processed through the <code>drush.php hosting dispatch</code> command.
More queues can be added by optional contributed modules, and are often used to provide regularly scheduled back end commands, 
such as backing up sites.</p>

<dl>
<dt>Task Queue</dt>
<dd>The primary and most important queue. Whenever a change is made to the data set, the front end creates a "Task" node. These task relate to such things as installing new sites, regenerating the configuration files of sites, verifying that a platform has been correctly configured and importing existing sites on a newly added platform.</dd>

<dt>Cron Queue</dt>
<dd>This queue is used to manage the regular execution of the cron process required by most sites. It is configurable with a frequency you want all the sites to be cronned within. This is commonly 1 hour, but might be higher or lower. Higher frequency will cause higher system load. This command will iterate through all enabled sites, and batch the cron calls, based on how many sites are available, and how frequently it is running.</dd>

<dt>Backup Queue</dt>
<dd>This queue operates in the same way as the cron queue, in that it iterates through all installed sites, based on a configurable frequency. This executes the same functionality as requesting a site backup through the user interface. You are able to revert back 
to a previous backup of your sites.</dd>

<dt>Statistics Queue</dt>
<dd>This queue operates on the same mechanism as the cron queue, and alows you to retrieve statistics of your installed sites. This will retrieve such metrics as number of registered and active users, and number of posts / comments, which will then be viewable on the front end.</dd>
</dl>

<h4>Back End</h4>

<p>The back end is a command line interface provided by the Provisioning Framework, of all the tasks it is capable of performing.</p>

<p>It is designed to operate separately from the front end, so that you can have multiple back ends on one or more servers.</p>

<p>The back end handles the server level configuration of the system, such as creating new databases and virtual host records and
restarting the apache process for new installations to take effect.</p>

<p>When the queues are processed by the front end, these are turned into calls to the back end, for whichever server they happen
to be on. The back end communicates to the front end through a very simple mechanism, whereby it returns a serialized string containing state information and log messages / error return codes.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-421.html?destination=node%2F36%23comment-form">Login</a> or <a href="../../../../../user/register/index-421.html?destination=node%2F36%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../36/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-76" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../architecture/aegir-architecture/index.html">Aegir Architecture</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This wiki page documents the Aegir architecture in schematic form. It is intented to complement a <a href="../../../../77/index.html">related page on the typical file system structure</a> on an Aegir installation.</p>

<p><a href="../../../../../sites/community.aegirproject.org/files/aegir-architecture-multiserver-2010-09-29/index.png"><img src="../../../../../sites/community.aegirproject.org/files/aegir-architecture-multiserver-2010-09-29-640/index.png" /></a></p>

<p>Click on image for a larger version.</p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/aegir-architecture-multiserver-2010-09-29/index.png" title="aegir-architecture-multiserver-2010-09-29.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/aegir-architecture-multiserver-2010-09-29/index.png" alt="aegir-architecture-multiserver-2010-09-29.png" title="aegir-architecture-multiserver-2010-09-29.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/aegir-architecture-multiserver-2010-09-29/index.png">aegir-architecture-multiserver-2010-09-29.png</a></td><td class="size">246.43 KB</td> </tr>
 <tr class="even"><td class="mime mime-pdf"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/aegir-architecture-2010-09-29/index.pdf">aegir-architecture-2010-09-29.pdf</a></td><td class="size">174.58 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-198.html?destination=node%2F76%23comment-form">Login</a> or <a href="../../../../../user/register/index-198.html?destination=node%2F76%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-198.html?destination=node%2F76%23comment-form">Login</a> or <a href="../../../../../user/register/index-198.html?destination=node%2F76%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-77" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../77/index.html">Aegir file system structure</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This page documents the typical file system structure on an Aegir installation. It is intended to complement a related wiki page on <a href="../../../../76/index.html">Aegir Architecture</a>. The following paths are based on an Aegir 0.4-x installation and assume that all directories are within the /var/aegir folder.</p>

<h3>Scripts and Configuration Files</h3>

<table>
<tr><th>Path</th><th>Notes</th></tr>
<tr><td>/backups</td><td>site-specific tar balls containing a database dump and folders under path/to/platform/sites/example.com</td></tr>
<tr><td>/config</td><td></td></tr>
<tr><td>/config/server_master</td><td></td></tr>
<tr><td>/config/server_master/apache</td><td></td></tr>
<tr><td>/config/server_master/apache/conf.d</td><td>non-aegir or non-drupal virtual hosts files</td></tr>
<tr><td>/config/server_master/apache/platform.d</td><td>contains .htaccess information for each aegir platform</td></tr>
<tr><td>/config/server_master/apache/vhost.d</td><td>apache virtual host files for aegir platforms</td></tr>
<tr><td>/config/server_master/apache/vhost.d/aegir.example.com</td><td>virtual host file for aegir web site - specifies path to platform directory and site database settings (so that database credentials are not exposed directly in site settings.php file) </td></tr>
<tr><td>/config/server_master/apache/vhost.d/site-1.com</td><td>virtual host file for deployed web site</td></tr>
<tr><td>/config/server_master/apache/vhost.d/site-2.com</td><td></td></tr>
<tr><td>/config/server_master/apache/vhost.d/site-3.com</td><td></td></tr>
<tr><td>/<a href="http://drupal.org/project/drush" title="link to drush project on drupal.org">drush</a></td><td>drush folder</td></tr>
<tr><td>/drush/drush.php </td><td>drush script</td></tr>
<tr><td>/.drush</td><td>drush extensions and server, platform and site aliases</td></tr>
<tr><td>/.drush/<a href="http://drupal.org/project/drush_make" title="link to drush_make project on drupal.org">drush_make</a></td><td>drush_make project folder - used for building web sites from .make files</td></tr>
<tr><td>/.drush/<a href="http://drupal.org/project/provision" title="link to provision project on drupal.org">provision<a /></a></a></td><td>provision folder</td></tr>
<tr><td>/.drush/server_master.alias.drushrc.php</td><td>settings for the master server where the main aegir database, hosting platform and aegir site reside</td></tr>
<tr><td>/.drush/platform_hostmaster.alias.drushrc.php</td><td>settings for the hostmaster platform on which the aegir site is based</td></tr>
<tr><td>/.drush/hostmaster.alias.drushrc.php</td><td>settings for the aegir site</td></tr>
<tr><td>/.drush/platform_platform1.alias.drushrc.php</td><td>settings for platform1 on which site-1.com is based</td></tr>
<tr><td>/.drush/site-1.com.alias.drushrc.php</td><td>settings for site-1.com</td></tr>
</table>

<table>
<h3>Hostmaster Platform and Aegir (front-end) Site</h3>
<tr><th>Path</th><th>Notes</th></tr>
<tr><td>/hostmaster-0.x</td><td>hostmaster platform</td></tr>
<tr><td>/hostmaster-0.x/profiles</td><td></td></tr>
<tr><td>/hostmaster-0.x/profiles/default</td><td></td></tr>
<tr><td>/hostmaster-0.x/profiles/<a href="http://drupal.org/project/hostmaster" title="link to hostmaster distribution on drupal.org">hostmaster</a></td><td>hostmaster profile</td></tr>
<tr><td>/hostmaster-0.x/profiles/hostmaster/modules</td><td></td></tr>
<tr><td>/hostmaster-0.x/profiles/hostmaster/modules/admin_menu</td><td></td></tr>
<tr><td>/hostmaster-0.x/profiles/hostmaster/modules/<a href="http://drupal.org/project/hosting" title="link to hostmaster project on drupal.org">hosting</a></td><td>hosting module</td></tr>
<tr><td>/hostmaster-0.x/profiles/hostmaster/modules/install_profile_api</td><td>install_profile_api  facilitates provisioning of sites based on a non-default profile</td></tr>
<tr><td>/hostmaster-0.x/profiles/hostmaster/modules/jquery_ui</td><td></td></tr>
<tr><td>/hostmaster-0.x/profiles/hostmaster/modules/modalframe</td><td></td></tr>
<tr><td>/hostmaster-0.x/profiles/hostmaster/themes</td><td></td></tr>
<tr><td>/hostmaster-0.x/profiles/hostmaster/themes/<a href="http://drupal.org/project/hostmaster" title="link to eldir theme on drupal.org">eldir</a></td><td>eldir theme  provides Aegir front end look and feel</td></tr>
<tr><td>/hostmaster-0.x/profiles/hostmaster/hostmaster.profile</td><td>profile file  used in site provisioning to configure a drupal database</td></tr>
<tr><td>/hostmaster-0.x/profiles/hostmaster/hostmaster.make</td><td>make file  used to include modules, themes, libraries etc. from various sources</td></tr>
<tr><td>/hostmaster-0.x/modules</td><td></td></tr>
<tr><td>/hostmaster-0.x/themes</td><td></td></tr>
<tr><td>/hostmaster-0.x/sites</td><td></td></tr>
<tr><td>/hostmaster-0.x/sites/aegir.example.com</td><td>aegir web site folders</td></tr>
</table>

<h3>Deployed Platforms</h3>

<p>Note: the directory /platforms is optional but can be useful to separate deployed platforms from directories for scripts, config files and hostmaster platform.</p>

<table>
<tr><th>Path</th><th>Notes</th></tr>
<tr><td>/platforms</td><td></td></tr>
<tr><td>/platforms/platform-1</td><td></td></tr>
<tr><td>/platforms/platform-1/profiles</td><td></td></tr>
<tr><td>/platforms/platform-1/profiles/default</td><td></td></tr>
<tr><td>/platforms/platform-1/profiles/custom-profile</td><td></td></tr>
<tr><td>/platforms/platform-1/profiles/custom-profile/modules</td><td></td></tr>
<tr><td>/platforms/platform-1/profiles/custom-profile/themes</td><td></td></tr>
<tr><td>/platforms/platform-1/profiles/custom-profile/custom.profile</td><td>profile file  used in site provisioning to configure a drupal database</td></tr>
<tr><td>/platforms/platform-1/profiles/custom-profile/custom.make</td><td>make file  used to include modules, themes, libraries etc. from various sources</td></tr>
<tr><td>/platforms/platform-1/modules</td><td></td></tr>
<tr><td>/platforms/platform-1/themes</td><td></td></tr>
<tr><td>/platforms/platform-1/sites</td><td></td></tr>
<tr><td>/platforms/platform-1/sites/site-1.com</td><td></td></tr>
<tr><td>/platforms/platform-1/sites/site-1.com/modules</td><td></td></tr>
<tr><td>/platforms/platform-1/sites/site-1.com/themes</td><td></td></tr>
<tr><td>/platforms/platform-1/sites/site-1.com/files</td><td></td></tr>
<tr><td>/platforms/platform-1/sites/site-1.com/settings.php</td><td>site-specific drupal configuration file</td></tr>
<tr><td>/platforms/platform-1/sites/site-1.com/drushrc.php </td><td>site-specific aegir-specific configuration file</td></tr>
<tr><td>/platforms/platform-1/sites/site-2.com</td><td></td></tr>
<tr><td>/platforms/platform-1/sites/site-3.com</td><td></td></tr>
<tr><td>/platforms/platform-1/sites/site-n.com</td><td></td></tr>
<tr><td>/platforms/platform-2</td><td></td></tr>
<tr><td>/platforms/platform-3</td><td></td></tr>
<tr><td>/platforms/platform-n</td><td></td></tr>
</table>

<p><br /></p>

<h3>Platform permissions</h3>

<table>
<tr>
<th>Path</th>
<th>Directory<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></th>
<th>File<code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></th>
<th>Notes</th>
</tr>

<tr>
<td><code>./*</code></td>
<td>
<code>aegir:aegir</code><br />
<code>drwxr-xr-x</code></td>
<td>
<code>aegir:aegir</code><br />
<code>-rw-r--r--</code>
</td>
<td>The webserver has no business writing or moving files in the Drupal codebase.</td>
</tr>

<tr>
<td colspan="4"><em>Inside ./sites/example.com:</em></td>
</tr>

<tr>
<td><code>drushrc.php</code></td>
<td></td>
<td>
<code>aegir:aegir</code><br />
<code>-r--------</code>
</td>
<td>Web server shouldn't be able to read drushrc.php, it's not a component of the Drupal site.</td>
</tr>

<tr>
<td><code>settings.php</code></td>
<td></td>
<td>
<code>aegir:www-data</code><br />
<code>-r--r-----</code>
</td>
<td>Web server can read this file, but otherwise tight control over this file which can contain sensitive information.</td>
</tr>

<tr>
<td>
<code>libraries</code><br />
<code>modules</code>
<code>themes</code>
</td>
<td>
<code>aegir:aegir</code><br />
<code>drwxrwsr-x</code>
</td>
<td>
<code>aegir:aegir</code><br />
<code>-rw-r--r--</code>
</td>
<td>
Because of the sticky bit (s) on the parent directory, each child directory will inherit attributes of the parent. The attribute that is consistently inherited is the group. This means that a developer in the "aegir" group can add files which will retain the "aegir" group ownership of the parent directory.
</td>
</tr>

<tr>
<td>
<code>files</code><br />
<code>private</code>
</td>
<td>
<code>aegir:www-data</code><br />
<code>drwxrws---</code>
</td>
<td></td>
<td>Aegir sets these directories with a sticky bit (s) so that under certain conditions new folders and files will inherit parent permissions. There are only a few cases where this happens though.</td>
</tr>

<tr>
<td>
<code>files/*</code><br />
<code>private/*</code>
</td>
<td>
<code>www-data:www-data</code><br />
<code>drwxr-sr-x</code>
</td>
<td>
<code>www-data:www-data</code><br />
<code>-rw-r--r--</code>
</td>
<td>
The permissions shown here are how files and directories created by www-data will look. When verifying a platform, Aegir won't "correct" these files and directories to match the parents.

If you have trouble with permissions/ownership on these directories, you can safely run the following commands (in this case on the files directory):
<div class="codeblock"><code># chown -R aegir:www-data /path/to/site/files/*<br /># chmod -R 775 /path/to/site/files/*</code></div>
</td>
</tr>

</table>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-297.html?destination=node%2F77%23comment-form">Login</a> or <a href="../../../../../user/register/index-297.html?destination=node%2F77%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../77/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-41" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../41/index.html">Provision - the Aegir backend.</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Each of the major entities managed by Aegir (namely servers, platforms and sites) are represented by nodes in the front end, which in turn generate Drush 'named contexts' in the backend. Named contexts are similar to what Drush 3.0 refers to as 'site aliases', but are more structured and cover more than just sites.</p>

<p>Whenever you create or edit a node on the front end, Aegir will create or update the named context on the backend, and any tasks run on the entity will be run on that named context, ie:</p>

<pre><code>drush @server_master provision-verify
</code></pre>

<p>All of the actual work related to managing your system is done by the backend, and the front end primarily serves as a way
to manage these aliases. You can very easily use the backend on it's own if you so choose.</p>

<h3>Creating or updating named contexts.</h3>

<p>Contexts are created and updated through the provision-save command. The format of the command is :</p>

<pre><code>drush provision-save @contextname --context_type=type --property=value --other_property=value
</code></pre>

<p>Every time this command is called, it will update the named context and only modify the properties that have been specified. It is important to note that the provision-save command <strong>never</strong> has a site alias or context name before the  command, but requires you to specify which context you are modifying as the first argument.</p>

<h4>Deleting named contexts.</h4>

<p>To delete an existing named context, you simply need to pass the 'delete' option to the provision-save command, ie:</p>

<pre><code>drush provision-save @contextname --delete
</code></pre>

<h3>Using named contexts</h3>

<p>Named contexts are used in 3 ways in provision: as aliases, arguments or options.</p>

<p><strong>Aliases :</strong> Aliases appear to the left of the drush command, and are making use of the Drush 'site alias' functionality.</p>

<pre><code># Verify the site represented by @example.com
drush @example.com provision-verify 
</code></pre>

<p><strong>Options :</strong> Certain options to provision-save require you to pass the alias of another named context of a specific type,
and uses this information to build relationships between objects.</p>

<pre><code> # generate a new site context in the directory represented by @platform_test
 drush provision-save @example.com --context_type=site --uri=example.com --platform=@platform_example
</code></pre>

<p><strong>Arguments :</strong> A select few provision commands require you to pass the alias of another specific type of named context as an argument.</p>

<pre><code># Migrate the site to the platform represented by @platform_newversion
drush @example.com provision-migrate @platform_newversion
</code></pre>

<h2>Context types</h2>

<p>There are (currently) 3 different entities represented as named contexts in the aegir backend. You determine which type of entity you are working with by specifying the context_type option to the provision-save command. You dont need to specify it every time, but it is best to always explicitly specify it, just in case.</p>

<p>Because the namespace of all contexts is shared, they each have different naming conventions to avoid collisions.
There are certain named contexts of each type which are always present in the system.</p>

<p>Each of the context types have different semantics and properties, and certain provision commands will only operate on certain types of entities.</p>

<h3>Server contexts</h3>

<p><strong>Naming guideline :</strong> Server with a hostname of server.example.com becomes @server_serverexamplecom.</p>

<p><strong>Special contexts :</strong> @server_master always refers to the local server where aegir is installed.</p>

<p><strong>Required properties :</strong></p>

<ul>
<li><strong>remote_host :</strong> This should always be set to the FQDN of the server being managed.</li>
</ul>

<p><strong>Services :</strong> Servers are the only entities which have services associated to them. Services are things such as http, db or dns.</p>

<p>Each service may select one service_type, which chooses which implementation to load for this service. Examples
of these are the 'mysql' implementation of the 'db' service, or the 'apache' and 'apache_ssl' implementations of the http
service.</p>

<p>All services that are found by Aegir are enabled, but unless you specifically select one of the implementations,
the 'null' service type is loaded. Each service type has additional required properties and values that can be passed
to it, but describing them all is outside of the scope of this document.</p>

<p><strong>Important commands :</strong></p>

<ul>
<li><strong>provision-verify :</strong> Verify that the configuration is correct and fix them if they aren't. </li>
</ul>

<p><strong>Example :</strong></p>

<pre><code># Enable a new remote server hosting sites with apache on port 8080
drush provision-save @server_webexamplecom --context_type=server \
  --remote_host=web.example.com \
  --http_service_type='apache' \
  --http_port=8080

# Verify that the settings are correct
drush @server_webexamplecom provision-verify --debug
</code></pre>

<h3>Platform contexts</h3>

<p>Platforms are how aegir refers to a specific copy of Drupal checked out on a file system. Platforms are hosted on web servers and sites are hosted on platforms.</p>

<p><strong>Naming guideline :</strong> A platform in /var/aegir/codebase-6.1 becomes @platform_codebase61 , but this is not strictly enforced. We only use that naming convention when we do not have a node representing the platform available. If a node is available, we use the title of the node to generate the context name.</p>

<p>Basically, you can name your platform anything but it should still be prefixed with 'platform_'.</p>

<p><strong>Special contexts :</strong> There are no special contexts per se, but the hostmaster-install and hostmaster-migrate commands generate aliases for the hostmaster platform in the form of '@platform_hostmaster$version'. If the front end is present,
one or more of these contexts are usually available too.</p>

<p><strong>Required properties :</strong></p>

<ul>
<li><strong>root :</strong> The absolute path to a Drupal directory, generally in the form /var/aegir/platformdir.</li>
</ul>

<p><strong>Optional properties :</strong></p>

<ul>
<li><strong>web_server :</strong> The name of a server context that provides the http service. The default is to @server_master</li>
<li><strong>makefile :</strong> The absolute path or url to a <a href="http://drupal.org/project/drush_make">drush make</a> makefile. If the root directory does not exist and the makefile property does, provision will call drush_make to attempt to create the directory.</li>
</ul>

<p><strong>Important commands :</strong></p>

<ul>
<li><strong>provision-verify :</strong> This will ensure that all the files are the correct permissions, and are all present on the correct remote servers. Also rebuild package database. Run this command whenever the contents of the platform changes.</li>
</ul>

<p><strong>Example :</strong></p>

<pre><code># New open atrium platform in /var/aegir/atrium-head that will be built from a remotely hosted
# makefile and published on an external web server.
drush provision-save @platform_atriumhead --context_type=platform \
        --root=/var/aegir/atrium-head \
        --web_server=@server_webexamplecom \
        --makefile='http://omega8.cc/dev/atrium_stub.make.txt'

# Verify settings and generate the directory with drush make, pushing to the remote server after.
drush provision-verify @platform_atriumhead
</code></pre>

<h3>Site contexts</h3>

<p><strong>Naming guidelines :</strong> A site with the url 'site1.example.com' becomes @site1.example.com. The context name is always the url.</p>

<p><strong>Special contexts :</strong> @hostmaster always refers to the site running the hostmaster front end. This helps with debugging and makes it more easily scriptable.</p>

<p><strong>Required properties :</strong></p>

<ul>
<li><strong>uri :</strong> The FQDN of the site. should match the context name.</li>
<li><strong>platform :</strong> The name of a platform context that the site will be hosted on.</li>
</ul>

<p><strong>Optional properties :</strong></p>

<ul>
<li><strong>db_server :</strong> The name of a server context which provides the db server. defaults to @server_master.</li>
<li><strong>client_email :</strong> The email address to send the login information for the admin user.</li>
<li><strong>profile :</strong> The installation profile the site is running. dependent on the platform supporting it.</li>
<li><strong>language :</strong> The ISO language code of the site. dependent on the platform and profile supporting it.</li>
</ul>

<p><strong>Important commands :</strong></p>

<p>Almost all of the provision commands are related to sites, so this is just the very core of them. Check drush help for more.</p>

<ul>
<li><strong>provision-install :</strong> Install the site represented by the context. Just creating the context doesn't install the site yet.</li>
<li><strong>provision-verify :</strong> Verify the site is running correctly, and ensure the files are all published to the correct servers.</li>
<li><strong>provision-delete :</strong> Delete the site and all it's information. The context will still be there.</li>
</ul>

<p><strong>Example :</strong></p>

<pre><code># Set up a new site to be installed on the open atrium platform (hosted on a remote server),
# using an external database server , with the openatrium profile and localize it into spanish.
drush provision-save @atrium.example.com --context_type=site \
        --uri=atrium.example.com \
        --platform=@platform_atriumhead \
        --db_server=@server_dbexamplecom \
        --client_email=client@example.com \
        --profile=openatrium \
        --language=es

# Install the new site to the specifications requested above.
drush @atrium.example.com provision-install --debug

# Verify the site to make sure everything is ok.
drush @atrium.example.com provision-verify --debug
</code></pre>

<h4>Importing contexts into the front end</h4>

<p>Hostmaster provides a drush command which will attempt to generate or updates front end nodes that match your defined contexts. To import a context into the front end, just run :</p>

<pre><code>drush @hostmaster hosting-import @contextname
</code></pre>

<p>This will import that context, and every context it depends on into the front end. This is useful for integration with other systems such as the <a href="http://github.com/Vertice/puppet-aegir">puppet-aegir module</a> for <a href="http://puppetlabs.com/">Puppet</a>, which can add newly configured servers directly to the front end.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-359.html?destination=node%2F41%23comment-form">Login</a> or <a href="../../../../../user/register/index-359.html?destination=node%2F41%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../41/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-284" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../284/index.html">Messaging systems evaluation</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>So we've been talking seemingly forever about possible queuing system instead of our crappy "PHP/Vixie Cron based" one, but we have yet to document pro/cons of possible alternatives. Here are the goods (or the beginning of em).</p>

<p>Note that this document was written before (in <a href="http://groups.drupal.org/node/36428">november 2009</a>) the current multiserver implementation was designed and completed.</p>

<h2>Current design</h2>

<p>Tasks are basically serialized in a MySQL database and polled at regular interval by a cron job, running <code>drush hosting dispatch</code>, which bootstraps Drupal, fetches the object, and fires up provision commands.</p>

<p>The possibility here is to have another dispatcher that would always run, and maybe not even talk to the mysql database, to fire up the provision commands.</p>

<p>Another requirement is that the queuing system may be network-aware. We want multi-server support and that is a critical issue for the next release (0.4 at the time of writing). One thing to consider is how we pass files around...</p>

<h2>Roll our own</h2>

<p>Pro:</p>

<ul>
<li>full control over the API, functionality and whatnot (ie. function of manpower invested)</li>
</ul>

<p>Con:</p>

<ul>
<li>rolling our own is <em>hard</em>! let's go shopping!</li>
</ul>

<h2>Meta: AMQP vs JMS</h2>

<p>So yeah, there's a standard in development for all this stuff: <a href="http://www.amqp.org/" title="http://www.AMQP.org/">http://www.AMQP.org/</a> . There is also a Drupal module being developed to work with it: <a href="http://drupal.org/project/amqp" title="http://drupal.org/project/amqp">http://drupal.org/project/amqp</a></p>

<p>JMS on the other hand is the "Java Messenging Service", that creates a language- (as opposed to network-) based API.</p>

<p>Maybe we should just not care about which messaging system you use in the backend and allow our frontend to talk to any backend, with the stupid cronjob mysql poller as a default...</p>

<h2>Gearman</h2>

<p>Pros (mostly out of the <a href="http://gearman.org/">home page</a>):</p>

<ul>
<li>supports PHP in frontend and backend</li>
<li>Multi-language - There are interfaces for a number of languages, and this list is growing. You also have the option to write heterogeneous applications with clients submitting work in one language and workers performing that work in another.</li>
<li>Flexible - You are not tied to any specific design pattern. You can quickly put together distributed applications using any model you choose, one of those options being Map/Reduce.</li>
<li>Fast - Gearman has a simple protocol and interface with a new optimized server in C to minimize your application overhead.</li>
<li>Embeddable - Since Gearman is fast and lightweight, it is great for applications of all sizes. It is also easy to introduce into existing applications with minimal overhead.</li>
<li>No single point of failure - Gearman can not only help scale systems, but can do it in a fault tolerant way.</li>
<li>Production ready - ran on digg, yahoo, livejournal, ...</li>
<li>Gearman uses an efficient binary protocol and no XML. There's an a line-based text protocol for admin so you can use telnet and hook into Nagios plugins.</li>
<li><a href="http://gearman.org/index.php?id=manual:job_server#persistent_queues">Persistent queues are available using mysql, memcached or sqlite</a></li>
<li>There's pretty good <a href="http://us3.php.net/gearman">PHP support</a> and it's easy to get up and running quickly.</li>
</ul>

<p>Cons:</p>

<ul>
<li>"somewhat higher latency, signal-and-pull architecture"</li>
<li>The system makes no guarantees. If there's a failure the client is told about the failure and the client is responsible for retries.</li>
<li>gearman-specific binary/network protocol</li>
<li>Notice how sixapart.com maintains both gearman and the shwartz, below</li>
</ul>

<p>OHLOH:</p>

<ul>
<li>Mostly written in Perl</li>
<li>Increasing year-over-year development activity</li>
<li>Established codebase</li>
<li>Few source code comments</li>
</ul>

<h2>Resque</h2>

<p>Pro:</p>

<ul>
<li><a href="http://code.google.com/p/redis/">redis-based</a> (therefore somehow language agnostic deep in there, but certainly network-centric)</li>
<li>github's (aka: it's got to work at least somewhere in production)</li>
</ul>

<p>Con:</p>

<ul>
<li>ruby-centric</li>
<li>I haven't actually <em>looked</em> at the thing or tested it</li>
</ul>

<h2>Active MQ</h2>

<p>Apache <a href="http://activemq.apache.org/">ActiveMQ</a>:</p>

<p>Pros:</p>

<ul>
<li>Supports a variety of Cross Language Clients and Protocols from Java, C, C++, C#, Ruby, Perl, Python, PHP  </li>
<li>Supports many advanced features such as Message Groups, Virtual Destinations, Wildcards and Composite  Destinations</li>
<li>Supports pluggable transport protocols such as in-VM, TCP, SSL, NIO, UDP, multicast, JGroups and JXTA transports</li>
<li>REST API to provide technology agnostic and language neutral web based API to messaging</li>
<li>Persistent</li>
</ul>

<p>Cons:</p>

<ul>
<li>uses too many acronyms on the frontpage (really.)</li>
<li>uses a lot of Java jargon</li>
<li>production-ready?</li>
</ul>

<p>OHLOH:</p>

<ul>
<li>Mostly written in Java</li>
<li>Large, active development team</li>
</ul>

<h2>RabbitMQ</h2>

<p><a href="http://www.rabbitmq.com/">RabbitMQ</a></p>

<p>Pros:</p>

<ul>
<li>"high reliability, availability and scalability along with good throughput and latency performance that is predictable and consistent"</li>
<li>"based on the emerging AMQP standard"</li>
<li><a href="http://packages.debian.org/rabbitmq-server">in debian</a></li>
<li>Drupal module - <a href="http://drupal.org/projects/amqp">AMQP</a></li>
<li>apparently very fast, according to dellintosh </li>
</ul>

<p>Cons:</p>

<ul>
<li><a href="http://www.ohloh.net/p/rabbitmq/analyses/latest">erlang</a>? do <em>you</em> know <a href="http://ftp.sunet.se/pub/lang/erlang/">erlang</a>? (Arguably not really necessary, since all publishers and consumers can be written in other languages that have AMQP support)</li>
</ul>

<p><a href="http://www.ohloh.net/p/rabbitmq">OHLOH</a></p>

<ul>
<li>Mostly written in Erlang</li>
<li>Large, active development team</li>
<li>Well-commented source code</li>
</ul>

<h2>Open Messenging Queue</h2>

<p><a href="https://mq.dev.java.net/overview.html" title="https://mq.dev.java.net/overview.html">https://mq.dev.java.net/overview.html</a></p>

<p>Pros:</p>

<ul>
<li>SOAP/HTTP interface</li>
<li>Scalable</li>
</ul>

<p>Con:</p>

<ul>
<li>Java/C specific</li>
</ul>

<h2>The Schwartz</h2>

<p><a href="http://search.cpan.org/~bradfitz/TheSchwartz-1.07/lib/TheSchwartz.pm">The Schwartz</a></p>

<p>Pros:</p>

<ul>
<li>Perl (come on, perl is everywhere... isn't it?)</li>
<li>"reliable job queue"</li>
<li>has retry</li>
<li>"lightweight"</li>
</ul>

<p>Cons:</p>

<ul>
<li>Perl (aka write only)</li>
<li>"library, so some assembly required"</li>
<li>"light on documentation"</li>
<li>Notice how sixapart.com maintains both the shwartz and gearman, above</li>
</ul>

<h2>Open AMQ</h2>

<p><a href="http://www.openamq.org/">Open AMQ</a></p>

<p>Pros:</p>

<ul>
<li>Multi-language (but not PHP)</li>
<li>"learn in a day or so" then "another day or two for wireAPI", development will take "some weeks"...</li>
<li>"remote admin tools, one-line failover, instant federation, protection against slow clients, detailed logging"</li>
<li><a href="http://www.amqp.org/">AMQP standard</a> </li>
<li>"Linux, AIX, Solaris, Mac OS/X, other UNIX"</li>
</ul>

<p>Cons:</p>

<ul>
<li>"for C/C++ and JMS"</li>
</ul>

<p><a href="http://www.ohloh.net/p/rabbitmq">OHLOH</a></p>

<ul>
<li>Mostly written in C</li>
<li>Well-commented source code</li>
<li>Short source control history</li>
<li>Only a single active developer</li>
<li>Apache Software License may conflict with GPL</li>
<li>Apache License 2.0 may conflict with GPL</li>
</ul>

<h2 id="beanstalkd">Beanstalkd</h2>

<p><a href="http://kr.github.com/beanstalkd/" title="http://kr.github.com/beanstalkd/">http://kr.github.com/beanstalkd/</a></p>

<p>Drupal Module for Drupal 6 and 7 is at <a href="http://drupal.org/project/beanstalkd" title="http://drupal.org/project/beanstalkd">http://drupal.org/project/beanstalkd</a></p>

<p>Pros:
 * used in production ("causes" application in facebook)</p>

<p>Cons:</p>

<ul>
<li>C</li>
</ul>

<p><a href="http://www.ohloh.net/p/beanstalkd" title="http://www.ohloh.net/p/beanstalkd">http://www.ohloh.net/p/beanstalkd</a></p>

<ul>
<li>Mostly written in C</li>
<li>Large, active development team</li>
<li>Few source code comments</li>
</ul>

<h2>SimpleMQ</h2>

<p><a href="http://code.google.com/p/simple-mq/" title="http://code.google.com/p/simple-mq/">http://code.google.com/p/simple-mq/</a></p>

<p>Pros:</p>

<ul>
<li>persistent or in-memory</li>
</ul>

<p>Cons:</p>

<ul>
<li>java-only.</li>
</ul>

<h2>Zero MQ</h2>

<p><a href="http://www.zeromq.org/" title="http://www.zeromq.org/">http://www.zeromq.org/</a></p>

<p>Pros:</p>

<ul>
<li>fast</li>
<li>lightweight messaging implementation.</li>
<li>supports different messaging models.</li>
<li>already very fast. We're getting 13.4 microseconds end-to-end latencies and up to 4,100,000 messages a second today.</li>
<li>very thin. Requires just a couple of pages in resident memory. </li>
<li>provides C, C++, Java, Python, .NET/Mono, Ruby, Fortran, COBOL, Tcl, Lua and Delphi language APIs.</li>
<li>supports different wire-level protocols: TCP, PGM, AMQP, SCTP.</li>
<li>runs on AIX, FreeBSD, HP-UX, Linux, Mac OS X, OpenBSD, OpenVMS, QNX Neutrino, Solaris and Windows.</li>
<li>supports i386, x86-64, Sparc, Itanium, Alpha and ARM microarchitectures.</li>
<li>fully distributed: no central servers to crash, millions of WAN and LAN nodes.</li>
</ul>

<p>Cons:</p>

<ul>
<li>no PHP whatsoever</li>
<li>production?</li>
</ul>

<p>OHLOH:</p>

<ul>
<li>Mostly written in C++</li>
</ul>

<h2>Jenkins</h2>

<p>There's a <a href="http://fourkitchens.com/blog/2010/05/09/drop-cron-use-hudson-instead">good vibe</a> around using Jenins (formerly known as Hudson) in place of cron for those kind of things. In our scenario, Aegir would queue up jobs to Jenkins, which would take care of dispatching them to remote servers.</p>

<p>Pros:</p>

<ul>
<li>supports tons of different notification modes</li>
<li>scales well</li>
<li>supports remote servers</li>
</ul>

<p>Cons:</p>

<ul>
<li>application-specific (unclear?) protocol to queue up tasks</li>
<li>Java (so a bit heavy)</li>
</ul>

<p>OHLOH:
 * has had 63,860 commits made by 708 contributors 
 * representing 893,049 lines of code
 * is mostly written in Java 
 * with an average number of source code comments
 * has a well established, mature codebase 
 * maintained by a very large development team 
 * with decreasing year-over-year commits</p>

<h2>Others to evaluate?</h2>

<ul><li><a href="http://aws.amazon.com/sqs/">Amazon's SQS</a>. The latencies for this service tend to be high and variable so it may not be appropriate for all tasks.</li>
<li><a href="http://search.cpan.org/~jmay/Spread-Queue-0.4/">Spread Queue</a> ([[http://search.cpan.org/~jmay/Spread-Queue-0.4/Queue.pod|alpha software]]</li>
<li><a href="http://rubyforge.org/projects/starling/">Starling</a></li> (apparently, <a href="http://www.rubyinside.com/rabbitmq-a-fast-reliable-queuing-option-for-rubyists-1681.html">twitter ditched starling</a> for <a href="http://www.scala-lang.org/">scala</a>)
<li><a href="http://houstoncommand.com//">Houston</a> From Zivtech, not much documentation yet</li>
</ul>

<p>Others mentionned <a href="http://highscalability.com/blog/2009/11/6/product-resque-githubs-distrubuted-job-queue.html">here</a>: ActiveMessaging, BackgroundJob, DelayedJob, and Kestrel.</p>

<h2>Requirements</h2>

<p>All the above must have:</p>

<ul>
<li>Open Source - It's free as in beer and speech</li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-360.html?destination=node%2F284%23comment-form">Login</a> or <a href="../../../../../user/register/index-360.html?destination=node%2F284%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../284/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-318" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../318/index.html">Provision contexts</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><em>This section is currently being written, so its probably going to be full of errors, and possibly not that useful. Feel free to edit.</em></p>

<p>I'm probably going to pop a nice table of contents here, for now look to the right...</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-199.html?destination=node%2F318%23comment-form">Login</a> or <a href="../../../../../user/register/index-199.html?destination=node%2F318%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-199.html?destination=node%2F318%23comment-form">Login</a> or <a href="../../../../../user/register/index-199.html?destination=node%2F318%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-319" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../319/index.html">Purpose</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Contexts are simply a way for Aegir to store certain pieces of information that it thinks may be useful later. They are named so that they can be referred to easily.</p>

<p>Every server, platform and site in Aegir has an associated context. Each one of these contexts stores information about the associated entity. So, for example, a site context stores the base URI of the site. Later, the code responsible for informing the web server of the site's existence can look at this context and determine the requested URI.</p>

<p>In theory contexts allow most of the back-end commands in Aegir to operate just on the name of the context. This is an important concept: the alternative would be to try to guess everything that the command being invoked might want to know and pass it in as a series of command line arguments.</p>

<p>For example, the command that Aegir uses to clone a site just needs to be given the context of the site to clone and the platform to clone it to. From there the code can work out where the destination platform actually is, what servers it needs to talk to, and with what credentials.</p>

<h4>Drush contexts</h4>

<p>Note that Drush also has the concept of a context, but this is not to be confused with Aegir contexts which are different. Aegir contexts are closer to, and stored as, Drush 'aliases'.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-200.html?destination=node%2F319%23comment-form">Login</a> or <a href="../../../../../user/register/index-200.html?destination=node%2F319%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-200.html?destination=node%2F319%23comment-form">Login</a> or <a href="../../../../../user/register/index-200.html?destination=node%2F319%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-320" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../320/index.html">Implementation</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Contexts are always named to start with a '@' symbol, except for in the filename of the file in which they are stored.</p>

<p>Contexts in Aegir are stored as a simple array of data in a file within the backend of Aegir. However this array of data is accessed and modified with a set of objects and accessors. Here is an example of what a context file looks like:</p>

<p><div class="codeblock"><code>&lt;?php<br />$aliases[&#039;hostmaster&#039;] = array (<br />&nbsp; &#039;context_type&#039; =&gt; &#039;site&#039;,<br />&nbsp; &#039;platform&#039; =&gt; &#039;@platform_hostmaster&#039;,<br />&nbsp; &#039;server&#039; =&gt; &#039;@server_master&#039;,<br />&nbsp; &#039;db_server&#039; =&gt; &#039;@server_localhost&#039;,<br />&nbsp; &#039;uri&#039; =&gt; &#039;aegir.example.com&#039;,<br />&nbsp; &#039;root&#039; =&gt; &#039;/var/aegir/hostmaster-0.4-beta2&#039;,<br />&nbsp; &#039;site_path&#039; =&gt; &#039;/var/aegir/hostmaster-0.4-beta2/sites/aegir.example.com&#039;,<br />&nbsp; &#039;site_enabled&#039; =&gt; true,<br />&nbsp; &#039;language&#039; =&gt; &#039;en&#039;,<br />&nbsp; &#039;client_email&#039; =&gt; &#039;aegir@example.com&#039;,<br />&nbsp; &#039;aliases&#039; =&gt;<br />&nbsp; array (<br />&nbsp; ),<br />&nbsp; &#039;redirection&#039; =&gt; false,<br />&nbsp; &#039;profile&#039; =&gt; &#039;hostmaster&#039;,<br />);</code></div></p>

<p>These files are stored in the <code>/var/aegir/.drush</code> directory on the master Aegir server.</p>

<p>In the above example we can see the properties of the context, like the 'uri' of the site, and the 'profile' that the site is running.</p>

<p>There are also a number of more interesting properties in the example, note the 'db_server' property, which has a value that is another context. We shall see later that these properties are special, and allow developers to easily access functions of the 'db_server' without needing to care which db server they are talking to.</p>

<p>Contexts are used within drush commands as objects, which subclass <code>provision_context</code>. This allows much more flexibility and cleverness, though can make them very confusing to use sometimes! As a developer you will only need to worry about the context objects, as Aegir handles storing them in the files for you. But it is important to note that each context must be representable in a flat text file (or be prepared to do some serious leg-work) by that I mean you probably don't want to be storing massive amounts of relational data in them, use a database for that!</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-201.html?destination=node%2F320%23comment-form">Login</a> or <a href="../../../../../user/register/index-201.html?destination=node%2F320%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-201.html?destination=node%2F320%23comment-form">Login</a> or <a href="../../../../../user/register/index-201.html?destination=node%2F320%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-322" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../322/index.html">Using contexts in your code</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Getting the current context is really easy, just call the '<code>d</code>' accessor:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$current_context </span><span style="color: #007700">= </span><span style="color: #0000BB">d</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
What the current context is will depend on the drush command that is running and the context that was passed into that drush command. For example if you ran a site verify task, then the caller would name a site context, and thus initially calls to <code>d()</code> would return the site context. The values of the context are accessible as simple properties of this object.</p>

<p>So, suppose a verify task is started for the main Aegir frontend, which has a context that is always called '@hostmaster', the drush command invocation would look like this:</p>

<p><div class="codeblock"><code>drush @hostmaster provision-verify </code></div></p>

<p>Then the drush command for <code>provision-verify</code> could do this:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">drush_provision_verify</span><span style="color: #007700">() {<br />&nbsp; </span><span style="color: #0000BB">$context </span><span style="color: #007700">= </span><span style="color: #0000BB">d</span><span style="color: #007700">();<br />&nbsp; </span><span style="color: #0000BB">drush_print</span><span style="color: #007700">(</span><span style="color: #DD0000">'Passed context of type: ' </span><span style="color: #007700">. </span><span style="color: #0000BB">d</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">type</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
Which would print the type of the context passed to the verify command, in this case 'site'.</p>

<p>The <code>d</code> accessor is not to be feared! It is used all over the place in Aegir and if you're not sure what context you're going to get then you can always print <code>d()-&gt;name</code> and you'll get the name of the context that you're dealing with.</p>

<h3>Loading a named context</h3>

<p>You can pass an optional argument to the <code>d</code> accessor of the name of the context that you want. So, if you feel compelled to access a property about the main Aegir frontend site anywhere you can do this:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$hostmaster_context </span><span style="color: #007700">= </span><span style="color: #0000BB">d</span><span style="color: #007700">(</span><span style="color: #DD0000">'@hostmaster'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>though most of the time you'll be dealing with the current context, and contexts that it references.</p>

<h3>'Subcontexts'</h3>

<p>Here's an example context:</p>

<p><div class="codeblock"><code>&lt;?php<br />$aliases[&#039;hostmaster&#039;] = array (<br />&nbsp; &#039;context_type&#039; =&gt; &#039;site&#039;,<br />&nbsp; &#039;platform&#039; =&gt; &#039;@platform_hostmaster&#039;,<br />&nbsp; &#039;server&#039; =&gt; &#039;@server_master&#039;,<br />&nbsp; &#039;db_server&#039; =&gt; &#039;@server_localhost&#039;,<br />&nbsp; &#039;uri&#039; =&gt; &#039;aegir.example.com&#039;,<br />&nbsp; &#039;root&#039; =&gt; &#039;/var/aegir/hostmaster-0.4-beta2&#039;,<br />&nbsp; &#039;site_path&#039; =&gt; &#039;/var/aegir/hostmaster-0.4-beta2/sites/aegir.example.com&#039;,<br />&nbsp; &#039;site_enabled&#039; =&gt; true,<br />&nbsp; &#039;language&#039; =&gt; &#039;en&#039;,<br />&nbsp; &#039;client_email&#039; =&gt; &#039;aegir@example.com&#039;,<br />&nbsp; &#039;aliases&#039; =&gt;<br />&nbsp; array (<br />&nbsp; ),<br />&nbsp; &#039;redirection&#039; =&gt; false,<br />&nbsp; &#039;profile&#039; =&gt; &#039;hostmaster&#039;,<br />);</code></div></p>

<p>Notice that some of the properties are the name of contexts, such as 'db_server' which has a value of '@server_localhost'.</p>

<p>Suppose now that I have some code that wants to get a property of the db_server associated with the @hostmaster context, I can simply do this:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$db_server_context </span><span style="color: #007700">= </span><span style="color: #0000BB">d</span><span style="color: #007700">(</span><span style="color: #DD0000">'@hostmaster'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">db_server</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">// $db_server_context is now a fully populated context object, not the string '@server_localhost'<br /></span><span style="color: #0000BB">drush_print</span><span style="color: #007700">(</span><span style="color: #DD0000">'DB server on port: . $db_server_context-&gt;db_port);<br />?&gt;</span></span></code></div></p>

<p>The <code>provisionContext</code> object will return full context objects for properties that store the names of other contexts. The how and why of determining which to return as strings and which to return as a context object will be covered later. It is entirely possible to have the name of a context stored as a property in a context, that when accessed returns the string, rather than the context named in the string.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-202.html?destination=node%2F322%23comment-form">Login</a> or <a href="../../../../../user/register/index-202.html?destination=node%2F322%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-202.html?destination=node%2F322%23comment-form">Login</a> or <a href="../../../../../user/register/index-202.html?destination=node%2F322%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-323" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../323/index.html">Properties and services</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Services are the way in which new properties are added to contexts, in fact if you wish to indicate you want to store additional properties in a context, this must be done by a service. There is no other way to store data in a context. One might assume that you can just ask provision to save an additional value on a context, but this will not work, and you'll probably get very frustrated indeed!</p>

<p>For example, the <code>provisionService_pdo</code> service adds a 'master_db' property to the server context, it does this in a method thus:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">init_server</span><span style="color: #007700">() {<br />&nbsp; </span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">init_server</span><span style="color: #007700">();<br />&nbsp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'master_db'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>This means that the 'master_db' property can now be set in a provison-save drush command, and will be persisted when the context is saved.</p>

<p>A service may also define properties on the context as actually representing another context, so that you may access that subcontext directly. You can see an example of using this subcontext in the 'Implementation' section of this Provision Contexts guide, but the an example of how you let provision know that a property name is not just a string, but a named context is with a method on the service:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />&nbsp; </span><span style="color: #FF8000">/**<br />&nbsp;&nbsp; * Register the http handler for platforms, based on the web_server option.<br />&nbsp;&nbsp; */<br />&nbsp; </span><span style="color: #007700">static function </span><span style="color: #0000BB">subscribe_platform</span><span style="color: #007700">(</span><span style="color: #0000BB">$context</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$context</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'web_server'</span><span style="color: #007700">, </span><span style="color: #DD0000">'@server_master'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$context</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">is_oid</span><span style="color: #007700">(</span><span style="color: #DD0000">'web_server'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$context</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">service_subscribe</span><span style="color: #007700">(</span><span style="color: #DD0000">'http'</span><span style="color: #007700">, </span><span style="color: #0000BB">$context</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">web_server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">);<br />&nbsp; }<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
Here the <code>provisionService_http</code> is being asked to 'subscribe' to a platform, it sets a property on the context, as above, but additionally uses the <code>is_oid()</code> method to indicate that the property is a named context. It then uses that immediately when it gets the name of the web_server context: <code>$context-&gt;web_server-&gt;name</code>. We'll worry about what 'subscribing' to a platform means later,.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-203.html?destination=node%2F323%23comment-form">Login</a> or <a href="../../../../../user/register/index-203.html?destination=node%2F323%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-203.html?destination=node%2F323%23comment-form">Login</a> or <a href="../../../../../user/register/index-203.html?destination=node%2F323%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-325" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../325/index.html">Using services from contexts</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This is stub page that will describe the way that you can use the <code>service()</code> method on a context.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-204.html?destination=node%2F325%23comment-form">Login</a> or <a href="../../../../../user/register/index-204.html?destination=node%2F325%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-204.html?destination=node%2F325%23comment-form">Login</a> or <a href="../../../../../user/register/index-204.html?destination=node%2F325%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-324" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../324/index.html">Provision services</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>We should add some documentation about Provision services, what they are and how they work and interact with contexts.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-205.html?destination=node%2F324%23comment-form">Login</a> or <a href="../../../../../user/register/index-205.html?destination=node%2F324%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-205.html?destination=node%2F324%23comment-form">Login</a> or <a href="../../../../../user/register/index-205.html?destination=node%2F324%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-557" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../developing/architecture/unix-group-limitations/index.html">UNIX group limitations</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>While working on the security enhancements, I stumbled upon a few fundamental UNIX limitations with groups.  These limitations similarly apply to GNU/Linux.</p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc50">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Group_name_length_limits"><span class="toc-number">1. </span>Group name length limits</a></li>
	<li class="toc-level-1"><a href="#Group_membership_limits"><span class="toc-number">2. </span>Group membership limits</a></li>
</ol>
</div>
</div>

<h2 id="Group_name_length_limits">1. Group name length limits</h2>

<p>A group name (e.g. <code>dialout</code>) has a length limit, usually hardcoded in the operating system. This limit varies across different UNIX systems and implementations.</p>

<ul>
<li>NIS: 8 characters (<a href="http://unix.derkeiler.com/Newsgroups/comp.unix.solaris/2007-02/msg00818.html">source</a>)</li>
<li>HPUX: 8 characters, 16 starting from HPUX 10 (<a href="http://h30097.www3.hp.com/docs/base_doc/DOCUMENTATION/V51B_HTML/MAN/MAN8/0353____.HTM">source</a>, <a href="http://lists.alioth.debian.org/pipermail/pkg-shadow-devel/2009-March/007031.html">source</a>)</li>
<li>AIX: 8 characters, 255 for AIX 5.3 and above (<a href="http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.security/doc/security/user_group_name_length.htm">source</a>)</li>
<li>Debian: 16 characters (<a href="http://lists.alioth.debian.org/pipermail/pkg-shadow-devel/2009-March/007031.html">source</a>, <a href="http://svn.debian.org/wsvn/pkg-shadow/upstream/trunk/configure.in">defined in shadow at compile-time</a>)</li>
<li>Redhat: 16 characters, 32 starting from 2005 (<a href="https://rhn.redhat.com/errata/RHBA-2005-164.html">source</a>, <a href="http://www.unixresources.net/linux/lf/5/archive/00/00/16/35/163570.html">source</a>, <a href="http://www.linuxquestions.org/questions/red-hat-31/max-group-length-in-red-hat-enterprise-linux-5-1-a-662171/">source</a>)</li>
<li>Solaris: 8 characters? (<a href="http://arc.opensolaris.org/caselog/PSARC/2007/064/issues">source</a>)</li>
<li>Active Directory: 11 or 64 characters (<a href="http://msdn.microsoft.com/en-us/library/ee824527(v=cs.10).aspx">source unclear</a>)</li>
</ul>

<p>In general, we can probably assume that 16 characters is a safe limit, and that's what's being used in <a href="../api.aegirproject.org/hosting_client_sanitize/index.html">hosting_client_sanitize</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Group_membership_limits">2. Group membership limits</h2>

<p>A UNIX user has a primary group, defined in the <code>passwd</code> database, but can also be a member of many other groups, defined in the <code>groups</code> database. UNIX has a hardcoded limit of 16 groups a user can be a member of (<a href="http://www.insectnation.org/articles/2007/05/08/linux-nfs-16-group-limit">source</a>). This means that if we translate Aegir clients into UNIX groups and you have access to multiple Aegir clients, you'll be able to access only 16 of those clients at a time. Rather annoying.</p>

<p>The problem is related with NFS, or rather <code>AUTH_SYS</code> (<a href="http://www.sage.org/lists/sage-members-archive/2004/msg00389.html">source</a>), which has an in-kernel data structure where the groups a user has access to is hardcoded as an array of 16 identifiers (<code>gids</code> to be more precise, see <a href="http://blogs.sun.com/peteh/date/20050614">this post for details</a>). Even though Linux now supports <a href="http://lxr.linux.no/linux-bk+v2.6.10/include/linux/limits.h#L6">65536 groups</a>, it is still not possible to operate on more than 16 from userland, <em>through NFS</em> - on a regular ext3 filesystem, it works without problems (tested in Debian Squeeze).</p>

<p>Solutions for this are not obvious. The <a href="http://blogs.sun.com/peteh/date/20050614">blog post on sun.com</a> proposes a technical enhancement to OpenSolaris. It's unclear whether that fix was implemented. <a href="http://www.sage.org/lists/sage-members-archive/2004/msg00389.html">This SAGE post</a> explains that using <code>GSS_API</code> (used in NFSv4) should (should!) resolve the issue.</p>

<p>This <a href="http://nfsworld.blogspot.com/2005/03/whats-deal-on-16-group-id-limitation.html">more thorough analysis of the problem</a> is more direct, to shamelessly quote it:</p>

<ul>
<li>Use NFSv4</li>
<li>Use RPCSEC_GSS authentication</li>
<li>Use ACLs</li>
</ul>

<p>As mentionned above, this only applies to NFS mounts. NFSv4 should (should!) be simple enough and available on Linux. It is also unclear exactly how to use <code>RPCSEC_GSS</code> (is that Kerberos?). As for ACLs, we are fully supporting this now with the <a href="http://drupal.org/project/provisionacl">provision ACL extension</a>, so that shouldn't be an issue.</p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-206.html?destination=node%2F557%23comment-form">Login</a> or <a href="../../../../../user/register/index-206.html?destination=node%2F557%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-206.html?destination=node%2F557%23comment-form">Login</a> or <a href="../../../../../user/register/index-206.html?destination=node%2F557%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-494" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../494/index.html">Running drush on Aegir sites as a regular user</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>N.B.</strong> The ACL-based approach, described below, has been implemented as an extension to Provision in <a href="http://drupal.org/project/provisionacl" title="http://drupal.org/project/provisionacl">http://drupal.org/project/provisionacl</a>.</p>

<h2>What's the problem here?</h2>

<p>As things stand, you cannot run tasks as a regular UNIX user on your Aegir Drupal sites:</p>

<p><div class="codeblock"><code>anarcat@marcos:~$ drush @hostmaster cc all<br />A Drupal installation directory could not be found&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [error]<br />The drush command &#039;@hostmaster cc all&#039; could not be found.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [error]</code></div></p>

<p>The reason the site is not found is because the alias cannot be loaded. If we change our home directory to find the alaises, we then get permission problems:</p>

<p><div class="codeblock"><code>anarcat@marcos:~$ env HOME=/var/aegir drush @hostmaster cc all<br />include(/var/aegir/.drush/platform_hostmaster.alias.drushrc.php): failed to open stream:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />Permission denied sitealias.inc:433<br />include(): Failed opening &#039;/var/aegir/.drush/platform_hostmaster.alias.drushrc.php&#039; for&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />inclusion (include_path=&#039;.:/usr/share/php:/usr/share/pear&#039;) sitealias.inc:433<br />include(/var/aegir/.drush/hostmaster.alias.drushrc.php): failed to open stream: Permission&nbsp;&nbsp;&nbsp; [warning]<br />denied sitealias.inc:433<br />include(): Failed opening &#039;/var/aegir/.drush/hostmaster.alias.drushrc.php&#039; for inclusion&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />(include_path=&#039;.:/usr/share/php:/usr/share/pear&#039;) sitealias.inc:433<br />A Drupal installation directory could not be found&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [error]<br />The drush command &#039;@hostmaster cc all&#039; could not be found.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [error]</code></div></p>

<p>... so that doesn't seem to be a good approach, although one could just fix the permissions on the alias files for the site  (which don't contain the DB password, oddly enough) and platforms (which have been safe since the "server" seperation):</p>

<p><div class="codeblock"><code>cd /var/aegir/.drush<br />chmod a+r <code>ls *alias* | grep -v &amp;#039;server&amp;#039;</code></code></div></p>

<p>Then we end up with another problem:</p>

<p><div class="codeblock"><code>Cannot open drushrc &quot;/var/aegir/hostmaster-HEAD/sites/aegir.anarcat.ath.cx/drushrc.php&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />ignoring.<br />Cannot open drushrc &quot;/var/aegir/hostmaster-HEAD/drushrc.php&quot;, ignoring.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />Cannot open drushrc &quot;/var/aegir/hostmaster-HEAD/sites/aegir.anarcat.ath.cx/drushrc.php&quot;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />ignoring.<br />include_once(/var/aegir/hostmaster-HEAD/sites/aegir.anarcat.ath.cx/settings.php): failed to&nbsp;&nbsp; [warning]<br />open stream: Permission denied bootstrap.inc:400<br />include_once(): Failed opening &#039;./sites/aegir.anarcat.ath.cx/settings.php&#039; for inclusion&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />(include_path=&#039;.:/usr/share/php:/usr/share/pear&#039;) bootstrap.inc:400<br />Cannot modify header information - headers already sent by (output started at&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />/usr/share/drush/includes/drush.inc:820) install.inc:618<br />Cannot modify header information - headers already sent by (output started at&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />/usr/share/drush/includes/drush.inc:820) install.inc:619<br />Drush command could not be completed.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [error]</code></div></p>

<p>... and this is really the core of the issue here: we need to allow more than one user to access those files, and aegir must be able to fix those permissions when the site is created/verified.</p>

<p>So to sum up:</p>

<ul>
<li>a regular user doesn't have permissions to access the drushrc.php and settings.php files</li>
<li>the aliases are not accessible unless you change your home directory (note that -i doesn't work either, for some reason)</li>
</ul>

<h2>Hackish solution: add user to more groups</h2>

<p><a href="http://perlucida.com/blog/software/four-tips-for-developing-drupal-under-aegir#comment-52">Miguel indicates here that files should be writable by the Aegir group</a>, and, if we start with this idea, we can actually get pretty far. The drushrc.php file is owned by the Aegir group, so adding yourself to that group and fixing up the file to be group-readable actually goes a long way. You also need to add the user to the www-data group since drush expects to be able to open the settings.php file also:</p>

<p><div class="codeblock"><code>adduser anarcat aegir<br />adduser anarcat www-data<br />chmod g+r drushrc.php</code></div></p>

<p>With the above changes, we can actually run drush commands!</p>

<p><div class="codeblock"><code>anarcat@marcos:~$ env HOME=/var/aegir drush @hostmaster cc all<br />Cannot open drushrc &quot;/var/aegir/hostmaster-HEAD/drushrc.php&quot;, ignoring.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />WD php: include(/var/aegir/.drush/server_localhost.alias.drushrc.php): failed to open stream: [error]<br />Permission denied in /usr/share/drush/includes/sitealias.inc on line 433.<br />WD php: include(): Failed opening &#039;/var/aegir/.drush/server_localhost.alias.drushrc.php&#039; for&nbsp; [error]<br />inclusion (include_path=&#039;.:/usr/share/php:/usr/share/pear&#039;) in<br />/usr/share/drush/includes/sitealias.inc on line 433.<br />WD php: include(/var/aegir/.drush/server_master.alias.drushrc.php): failed to open stream:&nbsp;&nbsp;&nbsp; [error]<br />Permission denied in /usr/share/drush/includes/sitealias.inc on line 433.<br />WD php: include(): Failed opening &#039;/var/aegir/.drush/server_master.alias.drushrc.php&#039; for&nbsp;&nbsp;&nbsp;&nbsp; [error]<br />inclusion (include_path=&#039;.:/usr/share/php:/usr/share/pear&#039;) in<br />/usr/share/drush/includes/sitealias.inc on line 433.<br />include(/var/aegir/.drush/server_localhost.alias.drushrc.php): failed to open stream:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />Permission denied in /usr/share/drush/includes/sitealias.inc on line 433.<br />include(): Failed opening &#039;/var/aegir/.drush/server_localhost.alias.drushrc.php&#039; for inclusion[warning]<br />(include_path=&#039;.:/usr/share/php:/usr/share/pear&#039;) in /usr/share/drush/includes/sitealias.inc<br />on line 433.<br />include(/var/aegir/.drush/server_master.alias.drushrc.php): failed to open stream: Permission [warning]<br />denied in /usr/share/drush/includes/sitealias.inc on line 433.<br />include(): Failed opening &#039;/var/aegir/.drush/server_master.alias.drushrc.php&#039; for inclusion&nbsp;&nbsp; [warning]<br />(include_path=&#039;.:/usr/share/php:/usr/share/pear&#039;) in /usr/share/drush/includes/sitealias.inc<br />on line 433.<br />&#039;all&#039; cache was cleared&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [success]</code></div></p>

<p>We get a bunch of warnings, because provision can't load the server aliases (for a good reason - they contain DB passwords), but the command runs fine! In fact, if we want, we can avoid the luxury of using the aliases and just run the drush command in the site directory:</p>

<p><div class="codeblock"><code>anarcat@marcos:aegir.anarcat.ath.cx$ drush cc all<br />Cannot open drushrc &quot;/var/aegir/hostmaster-HEAD/drushrc.php&quot;, ignoring.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [warning]<br />&#039;all&#039; cache was cleared&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [success]</code></div></p>

<p>That warning can be removed by simply fixing the permissions on the drushrc.php file to be group-readable.</p>

<p>However, the problem with that approach is that the user has access to <em>all</em> sites, from there on. No regard to what client the user has access to. Obviously, this can work for a dedicated server (and it would need patches to provision so that drushrc.php files and optionnally aliases are group-readable) but it will not work for shared hosting, which is my prime objective here.</p>

<p><strong>Patches necessary</strong>:</p>

<ul>
<li>group-readable drushrc.php (changes in provision)</li>
<li>add users to the aegir and www-data groups manually</li>
<li>optional: group-readable site aliases (so that users can access the aliases)</li>
</ul>

<p><strong>Issues</strong>:</p>

<ul>
<li>all or nothing: the user has access to all sites or none as we have a single group</li>
</ul>

<h2>Traditionnal UNIX permission-based approach</h2>

<p>In order for this to work really correctly, we would need the following permissions setup. Instead of having the typical following:</p>

<p><div class="codeblock"><code>-r--r-----&nbsp; 1 aegir aegir&nbsp;&nbsp;&nbsp; 55456 16 mar 13:35 drushrc.php<br />drwxrws--- 10 aegir www-data&nbsp; 4096 16 mar 13:34 files<br />drwxrwsr-x&nbsp; 2 aegir aegir&nbsp;&nbsp;&nbsp;&nbsp; 4096 16 mar 13:34 modules<br />-r--r-----&nbsp; 1 aegir www-data&nbsp; 3276 16 mar 13:35 settings.php</code></div></p>

<p>(I am skipping libraries, themes and private directories for simplicity - libraries and themes are the same as modules and private is the same as files.)</p>

<p>... We would need to have the following:</p>

<p><div class="codeblock"><code>-r--r-----&nbsp; 1 aegir&nbsp;&nbsp;&nbsp; client&nbsp;&nbsp; 55456 16 mar 13:35 drushrc.php<br />drwxrws--- 10 www-data client&nbsp;&nbsp;&nbsp; 4096 16 mar 13:34 files<br />drwxrwsr-x&nbsp; 2 aegir&nbsp;&nbsp;&nbsp; client&nbsp;&nbsp;&nbsp; 4096 16 mar 13:34 modules<br />-r--r-----&nbsp; 1 www-data client&nbsp;&nbsp;&nbsp; 3276 16 mar 13:35 settings.php</code></div></p>

<p>That is, all files and directories are readable by the "client" group (which allow inter-client isolation) and some would be readable or writable by the webserver (which allows for uploads and the webserver to read the settings.php and so on).</p>

<p>In this scenario, the webserver has access to all sites all the time: it can read/write uploaded files of other modules, but, because of database cloaking, it can't access other sites' databases. If we want to fix this we would have to go with ACLs.</p>

<p>Note that this setup doesn't require the webserver running any special patch or daemon to run the PHP process as a normal user: it still runs as the www-data user.</p>

<p><strong>Patches necessary</strong>:</p>

<ul>
<li>patches mentionned above (group-readable drushrc and aliases)</li>
<li>creating the client group and adding users to it</li>
<li>adding the aegir user to the client group</li>
<li>patching provision so it changes the group of some files to the client group</li>
<li>patching provision so it changes the owner of some files to the www-data user (this actually requires root: <strong>ouch</strong>!)</li>
</ul>

<p><strong>Issues</strong>:</p>

<ul>
<li>requires aegir to run as root</li>
<li>aegir need to be a member of <em>every</em> group</li>
</ul>

<h2>The ACL approach</h2>

<p>This is based on <a href="http://groups.drupal.org/node/43910#comment-117454">this excellent comment</a> from <a href="https://drupal.org/user/420589">malclocke</a>.</p>

<p>This is one of the simplest and elegant approach, as it:</p>

<ul>
<li>doesn't require root access</li>
<li>fits well with the n to n client access list model of aegir</li>
<li>works without having to change the existing permissions (so would fit well in a contrib module)</li>
</ul>

<p>To configure ACLs, you need to add the option to your mountpoint in fstab and remount the mountpoint (or reboot):</p>

<p><div class="codeblock"><code>apt-get install acl<br />mount -o remount,acl /var # and edit /etc/fstab to add the acl option to the mountpoint</code></div></p>

<p>The rest is fairly simple: we just need to add access to the required groups to the drushrc and settings.php files:</p>

<p><div class="codeblock"><code>setfacl -m g:client:r-- settings.php drushrc.php</code></div></p>

<p>... where "client" is the client group.</p>

<p>Optionnally, we can also give access to the alias files the same way, but we end up with the same warning on the server level files.</p>

<p><em>Note</em>: <a href="http://www.vanemery.com/Linux/ACL/linux-acl.html">this is a good introduction to ACLs, in Redhat</a></p>

<p><strong>Patches necessary</strong>:</p>

<ul>
<li>make platform-level drushrc readable by all (or add an ACL for each client with access to the platform..)</li>
<li>patch provision to add relevant ACLs on verify and install, to drushrc.php and settings.php:</li>
<li>system-level configuration of mountpoints and extra package</li>
<li>creating the client group and adding users to it</li>
</ul>

<p><strong>Issues</strong>:</p>

<ul>
<li>requires system-level modifications</li>
<li>NFS has not supported ACLs very well traditionnally (see <a href="http://wiki.linux-nfs.org/wiki/index.php/ACLs">the NFSv4 implementation notes</a> and <a href="http://acl.bestbits.at/problems.html">the issues page for ACLs</a> for more information) - but according to my tests (vanilla Debian squeeze), it just works</li>
</ul>

<h2>Other similar research</h2>

<p>This is actually a well-discussed topic in the community, although nobody came up with a clean and complete solution for this.</p>

<ul>
<li><a href="http://perlucida.com/blog/software/four-tips-for-developing-drupal-under-aegir#comment-2">Brilliant comment from mig5</a> explaining group-ownership of key files</li>
<li><a href="http://groups.drupal.org/node/87414">A similar solution proposed here</a> actually shows which chunks of code need to be modified in 0.4-alpha6</li>
<li><a href="http://groups.drupal.org/node/43910">Aegir permissions best practices thread</a> - mentions everything from the "aegir group" to ACLs</li>
<li><a href="http://groups.drupal.org/node/12066">My original research into this problem</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-207.html?destination=node%2F494%23comment-form">Login</a> or <a href="../../../../../user/register/index-207.html?destination=node%2F494%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-207.html?destination=node%2F494%23comment-form">Login</a> or <a href="../../../../../user/register/index-207.html?destination=node%2F494%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-33" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../contrib/index.html">Extending Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p>Aegir is designed to be easily extendable by developers. As it is made with Drupal and Drush, it is made of the hooks and command you know and love. If you are a user or admin looking to deploy contrib modules, you should look into the <a href="../../../../../contrib-modules/index.html">contrib modules list and user documentation</a> instead.</p>

<h2>What can I extend exactly?</h2>

<p>These extensions may come in the form of</p>

<ul>
<li>Adding new tasks to be performed against sites</li>
<li>Adding new services or implementations of service types (postgres for the DB service, for example)</li>
<li><a href="../../../../75/index.html">Overriding or hooking into existing forms such as the site form, to send extra data to the backend</a></li>
<li>Using APIs to inject bits of configuration into configuration files such as settings.php and vhosts.</li>
</ul>

<p>This area is be devoted to teaching you how to extend and develop for Aegir to encourage contributions to the Aegir project or to help you modify Aegir to suit your unique use case.</p>

<h2>Aegir API documentation</h2>

<p>The inline documentation is a good start to understand the various hooks and internals that allow you to extend and customize Aegir to your liking. The documentation is rendered on <a href="http://api.aegirproject.org/">api.aegirproject.org</a> daily.</p>

<p>See also the <a href="../../../../../dev-cheat-sheet/index.html">developer cheat sheet</a>.</p>

<blockquote>
  <p><em>Please submit any suggestions or bug reports to the <a href="http://drupal.org/project/issues?text=&amp;projects=hosting,+provision,+eldir,+Hostmaster+%28Aegir%29&amp;status=Open&amp;priorities=All&amp;categories=All">Aegir Project issue queue of your choice</a>, under the "documentation" component.</em></p>
</blockquote>

<h2>Example modules</h2>

<p>The <a href="../../../../../contrib-modules/index.html">contrib modules</a> page documents all known Aegir extensions in existence. There are also specific developer documentation pages below.</p>

<h2>Contrib developer documentation and roadmaps</h2>

<p>Contrib developers are free to use this space to document the internals of their modules or their roadmaps. There is already this documentation:</p>

<ul>
<li><a href="../../../../108/index.html">E-Commerce Integration Roadmap</a> (uc_hosting)</li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-208.html?destination=node%2F33%23comment-form">Login</a> or <a href="../../../../../user/register/index-208.html?destination=node%2F33%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-208.html?destination=node%2F33%23comment-form">Login</a> or <a href="../../../../../user/register/index-208.html?destination=node%2F33%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-537" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../dev-cheat-sheet/index.html">Aegir developer cheat sheet</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc51">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Locations_and_paths"><span class="toc-number">1. </span>Locations and paths</a></li>
	<li class="toc-level-1"><a href="#File_permissions_and_ownership"><span class="toc-number">2. </span>File permissions and ownership</a></li>
	<li class="toc-level-1"><a href="#Enablingdisabling_drushprovision_extensions_from_hostmaster"><span class="toc-number">3. </span>Enabling/disabling drush/provision extensions from hostmaster</a></li>
	<li class="toc-level-1"><a href="#References"><span class="toc-number">4. </span>References</a></li>
</ol>
</div>
</div>

<h3 id="Locations_and_paths">1. Locations and paths</h3>

<ul>
<li>Site URI: d()-&gt;uri; // ex: $base_url = 'http://' . d()-&gt;uri;</li>
<li>Drupal root: d()-&gt;site // returns: /var/aegir/platform/drupal-6.20/</li>
<li>Site path: d()-&gt;site_path // returns: /var/aegir/platform/drupal-6.20/sites/example.org/</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="File_permissions_and_ownership">2. File permissions and ownership</h3>

<pre>
 $ctools_path = d()-&gt;site_path . '/files/ctools';

 provision_file()-&gt;chmod($ctools_path, 0770, TRUE)
   -&gt;succeed('Changed permissions of <code>@path</code> to @perm')
   -&gt;fail('Could not change permissions <code>@path</code> to @perm')
   -&gt;status();

 provision_file()-&gt;chgrp($ctools_path, d('@server_master')-&gt;web_group, TRUE)
   -&gt;succeed('Change group ownership of settings.php to @path')
   -&gt;fail('Could not change group ownership of settings.php to @path')
   -&gt;status();
</pre>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Enablingdisabling_drushprovision_extensions_from_hostmaster">3. Enabling/disabling drush/provision extensions from hostmaster</h3>

<p>Every drush extension can implement a hook_drush_load(), and check if a module is enabled in the hostmaster site. See <a href='http://drupalcode.org/project/provision.git/blob/refs/heads/6.x-2.x:/provision.api.php'>provision.api.php for an example</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="References">4. References</h3>

<p><a href="http://api.aegirproject.org/" title="http://api.aegirproject.org/">http://api.aegirproject.org/</a></p><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-209.html?destination=node%2F537%23comment-form">Login</a> or <a href="../../../../../user/register/index-209.html?destination=node%2F537%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-209.html?destination=node%2F537%23comment-form">Login</a> or <a href="../../../../../user/register/index-209.html?destination=node%2F537%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-75" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../75/index.html">Extending Aegir and communicating with install profiles</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This article has been republished from mig5's website. <a href="http://www.migueljacq.com/content/developing-aegir-extending-aegir-and-communicating-install-profiles">Original URL</a></p>
<p>Aegir is a pretty powerful tool that allows you to very quickly provision new Drupal sites out of the box and manage them throughout their lifespan through a variety of tasks.</p>
<p>Its ability to understand different install profiles and thus 'distributions' shoots the awesome factor through the roof once you can deploy instances of OpenAtrium, Pressflow, ManagingNews or your own custom distro in just a couple of clicks.</p>
<p>Inevitably, though, your requirements will grow more complex. Aegir is about automation, and install profiles that prompt users for information through a series of tasks, and fail without that information, aren't much help. You might resort to a bunch of hacks to get that data into your client's site. You might try and insert some custom stuff into the site's vhost only to whimper in dismay when Aegir does a routine Verify sanity check and obliterates your changes.</p>
<p>If you get to this point, the simplicity of Aegir will be a distant memory and you'll be shaking your fist at us developers for forgetting about your corner case. Curses!</p>
<p>Rest assured, despite the constantly shifting development in Aegir and its early alpha stages, we try to maintain an ability to hook into Aegir and extend it as easily as possible, and it will only continue to get easier, especially once our API stabilises and is published.</p>
<p>Today I'm going to show you:</p>
<ul>
<li>how to add a custom Hosting submodule to Aegir</li>
<li>how to alter the site form to add custom fields of data</li>
<li>how to send that data to the backend</li>
<li>how to apply that data to site vhosts and inside your custom install profile and site database</li>
</ul>
<p>There are a few files here, because we're creating a custom module and install profile, and a few other things. For the impatient, I've attached a tarball to this article called 'cheesy.tar.gz' that contains all the relevant components and a README.txt instructing where to put it all.</p>
<p>Those of you who follow me on Twitter know I like to perpetuate the semi-French stereotype and rant and rave about cheese. I spent some time trying to think of a non-cheesy example to use in this tutorial, before realising what a silly idea that was. You can never have enough cheese :)</p>
<h3>Part one - Adding a cheesy module</h3>
<p>We'll add a custom module to the Hosting frontend called 'Cheese'.</p>
<p>Hosting is the 'frontend' bit of the Aegir system that allows you to plug data in via a web interface and have that information, if necessary, communicated to the backend Drush/Provision system by way of 'tasks'.</p>
<p>Our new module is simple: we're going to invoke a hook_form_alter() to add a textfield to the site form. The module will add a table to the Aegir database that stores this value, linked to the site nid. Keeping it out of the hosting_site table means we can disable and uninstall this module later and clean up properly.</p>
<p>There's nothing new or unusual about a Hosting submodule than any other Drupal module.  Make the directory <code>/var/aegir/hostmaster-0.x/profiles/hostmaster/modules/hosting/cheese</code></p>
<p><strong>Info file</strong></p>
<p>Here's our hosting_cheese.info</p>
<div class="codeblock"><code>name = Cheese<br />description = Cheesemongers need to define cheese in their Drupal sites.<br />package = Hosting<br />dependencies[] = hosting_site
<p>core = 6.x</p></code></div>
<p>You can see we depend on hosting_site, because hosting_site is the module that provides the site form for installing sites!</p>
<p><strong>Install file</strong></p>
<p>Now let's add an .install file that defines our database table schema and how to install/uninstall it. Standard Drupal stuff.</p>
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br /> * Implementation of hook_schema().<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">hosting_cheese_schema</span><span style="color: #007700">() {<br />&nbsp; </span><span style="color: #0000BB">$schema</span><span style="color: #007700">[</span><span style="color: #DD0000">'hosting_cheese'</span><span style="color: #007700">] = array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'fields' </span><span style="color: #007700">=&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'vid' </span><span style="color: #007700">=&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'type' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'int'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'not null' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">TRUE</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'default' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'nid' </span><span style="color: #007700">=&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'type' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'int'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'unsigned' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">TRUE</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'not null' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">TRUE</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'default' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'cheese' </span><span style="color: #007700">=&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'type' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'varchar'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'length' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">128</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'not null' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">TRUE</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp; ),<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'indexes' </span><span style="color: #007700">=&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'vid' </span><span style="color: #007700">=&gt; array(</span><span style="color: #DD0000">'vid'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'cheese' </span><span style="color: #007700">=&gt; array(</span><span style="color: #DD0000">'cheese'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp; ),<br />&nbsp; );
<p>&nbsp; return </p></span><span style="color: #0000BB">$schema</span><span style="color: #007700">;<br />}
<p>function </p></span><span style="color: #0000BB">hosting_cheese_install</span><span style="color: #007700">() {<br />&nbsp; </span><span style="color: #FF8000">// Create tables.<br />&nbsp; </span><span style="color: #0000BB">drupal_install_schema</span><span style="color: #007700">(</span><span style="color: #DD0000">'hosting_cheese'</span><span style="color: #007700">);<br />}
<p>function </p></span><span style="color: #0000BB">hosting_cheese_uninstall</span><span style="color: #007700">() {<br />&nbsp; </span><span style="color: #FF8000">// Remove tables.<br />&nbsp; </span><span style="color: #0000BB">drupal_uninstall_schema</span><span style="color: #007700">(</span><span style="color: #DD0000">'hosting_cheese'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
<p><strong>The module</strong></p>
<p>Here's our simple hosting_cheese.module file.</p>
<p>It's pretty straightforward: our first function is a <code>hook_form_alter()</code> of <code>hosting_site_form()</code>. We are adding a single textfield to the form called 'Cheese'. Because it's my favourite, the default value is going to be 'camembert' if it hasn't already been set on the node (if we're updating a site rather than creating a new one).</p>
<p>The next few functions are invocations of common database hooks such as insert, update and delete. They will insert the 'cheese' value from our form into the <code>hosting_cheese</code> table.</p>
<p>I call <code>hook_nodeapi()</code> to do $stuff on those actions. There's validation to check that a cheese was entered. We invoke <code>hook_load()</code>, which allows various modules and features to return their bits and pieces from various parts of the database as 'additions' to the core node attributes. With this we can call <code>$node-&gt;cheese</code> when we might need to.</p>
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br /> * Implementation of hook_form_alter()<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">hosting_cheese_form_alter</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$form</span><span style="color: #007700">, </span><span style="color: #0000BB">$form_state</span><span style="color: #007700">, </span><span style="color: #0000BB">$form_id</span><span style="color: #007700">) {<br />&nbsp; if (</span><span style="color: #0000BB">$form_id </span><span style="color: #007700">== </span><span style="color: #DD0000">'site_node_form'</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$form</span><span style="color: #007700">[</span><span style="color: #DD0000">'cheese'</span><span style="color: #007700">] = array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'#type' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'textfield'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'#title' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'Cheese'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'#description' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'What sort of cheese?'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'#default_value' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$form</span><span style="color: #007700">[</span><span style="color: #DD0000">'#node'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">cheese </span><span style="color: #007700">? </span><span style="color: #0000BB">$form</span><span style="color: #007700">[</span><span style="color: #DD0000">'#node'</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">cheese </span><span style="color: #007700">: </span><span style="color: #DD0000">'camembert'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'#required' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">TRUE</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'#weight' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">0</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp; );<br />&nbsp;&nbsp;&nbsp; return </span><span style="color: #0000BB">$form</span><span style="color: #007700">;<br />&nbsp; }<br />}
<p></p></span><span style="color: #FF8000">/** <br /> * Implementation of hook_insert()<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">hosting_cheese_insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">) {<br />&nbsp; if (</span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cheese</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">db_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT INTO {hosting_cheese} (vid, nid, cheese) VALUES (%d, %d, '%s')"</span><span style="color: #007700">, </span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">vid</span><span style="color: #007700">, </span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nid</span><span style="color: #007700">, </span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cheese</span><span style="color: #007700">);<br />&nbsp; }<br />}
<p></p></span><span style="color: #FF8000">/**<br /> * Implementation of hook_update()<br /> */
<p></p></span><span style="color: #007700">function </span><span style="color: #0000BB">hosting_cheese_update</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">) {<br />&nbsp; </span><span style="color: #0000BB">db_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"UPDATE {hosting_cheese} SET cheese = '%s' WHERE nid = %d"</span><span style="color: #007700">, </span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cheese</span><span style="color: #007700">, </span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nid</span><span style="color: #007700">);<br />}
<p></p></span><span style="color: #FF8000">/**<br /> * Implementation of hook_delete()<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">hosting_cheese_delete</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">) {<br />&nbsp; </span><span style="color: #0000BB">db_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"DELETE FROM {hosting_cheese} WHERE nid=%d"</span><span style="color: #007700">, </span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nid</span><span style="color: #007700">);<br />}
<p></p></span><span style="color: #FF8000">/**<br /> * Implementation of hook_delete_revision()<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">hosting_cheese_delete_revision</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">) {<br />&nbsp; </span><span style="color: #0000BB">db_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"DELETE FROM {hosting_cheese} WHERE vid=%d"</span><span style="color: #007700">, </span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">vid</span><span style="color: #007700">);<br />}
<p></p></span><span style="color: #FF8000">/** <br /> * Implementation of hook_nodeapi()<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">hosting_cheese_nodeapi</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$node</span><span style="color: #007700">, </span><span style="color: #0000BB">$op</span><span style="color: #007700">, </span><span style="color: #0000BB">$a3 </span><span style="color: #007700">= </span><span style="color: #0000BB">NULL</span><span style="color: #007700">, </span><span style="color: #0000BB">$a4 </span><span style="color: #007700">= </span><span style="color: #0000BB">NULL</span><span style="color: #007700">) {<br />&nbsp; if (</span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">type </span><span style="color: #007700">== </span><span style="color: #DD0000">'site'</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; switch (</span><span style="color: #0000BB">$op</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp; case </span><span style="color: #DD0000">'insert'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">hosting_cheese_insert</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case </span><span style="color: #DD0000">'update'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">hosting_cheese_update</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case </span><span style="color: #DD0000">'delete' </span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">hosting_cheese_delete</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case </span><span style="color: #DD0000">'delete revision'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">hosting_cheese_delete_revision</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case </span><span style="color: #DD0000">'validate' </span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!</span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cheese</span><span style="color: #007700">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">form_set_error</span><span style="color: #007700">(</span><span style="color: #DD0000">'cheese'</span><span style="color: #007700">, </span><span style="color: #0000BB">t</span><span style="color: #007700">(</span><span style="color: #DD0000">'You must enter a cheese!'</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case </span><span style="color: #DD0000">'load'</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$additions</span><span style="color: #007700">[</span><span style="color: #DD0000">'cheese'</span><span style="color: #007700">] = </span><span style="color: #0000BB">db_result</span><span style="color: #007700">(</span><span style="color: #0000BB">db_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT cheese FROM {hosting_cheese} WHERE vid=%d"</span><span style="color: #007700">, </span><span style="color: #0000BB">$node</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">vid</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return </span><span style="color: #0000BB">$additions</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp; }<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
<p>At this point, you can go to <code>/admin/build/modules</code> and enable the Cheese feature. The database table will get installed, and you can now go to <code>Create Content &gt; Site</code> and see our cheese field is present in the site form!</p>
<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/cheese_form/index.png" /></div>
<h3>Part two - sending the cheese to the backend</h3>
<p>Yes, it's very exciting that we have cheese in Aegir now. But don't provision a site yet! The fun hasn't even started.</p>
<p>In the same directory as the hosting_cheese module, create a new file called <code>hosting_cheese.drush.inc</code>. This is a Drush file that is going to be responsible for catching when an Install or Verify task is being executed against a site, and to send the cheese value along for the ride to the backend.</p>
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br /> * Implementation of drush_hook_pre_hosting_task()<br /> * Send the site's cheese attribute to the backend for processing.<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">drush_hosting_cheese_pre_hosting_task</span><span style="color: #007700">() {<br />&nbsp; </span><span style="color: #0000BB">$task </span><span style="color: #007700">=&amp; </span><span style="color: #0000BB">drush_get_context</span><span style="color: #007700">(</span><span style="color: #DD0000">'HOSTING_TASK'</span><span style="color: #007700">);<br />&nbsp; if (</span><span style="color: #0000BB">$task</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ref</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">type </span><span style="color: #007700">== </span><span style="color: #DD0000">'site' </span><span style="color: #007700">&amp;&amp; (</span><span style="color: #0000BB">$task</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">task_type </span><span style="color: #007700">== </span><span style="color: #DD0000">'install' </span><span style="color: #007700">|| </span><span style="color: #0000BB">$task</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">task_type </span><span style="color: #007700">== </span><span style="color: #DD0000">'verify'</span><span style="color: #007700">)) {<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #0000BB">$task</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">options</span><span style="color: #007700">[</span><span style="color: #DD0000">'cheese'</span><span style="color: #007700">] = </span><span style="color: #0000BB">$task</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">ref</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cheese</span><span style="color: #007700">;<br />&nbsp; }<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
<p>In this code, <code>$task-&gt;ref</code> represents the node object (the site).</p>
<p>Because of our additions in our implementation of hook_node_load(), the cheese value is fetched and available for us to use.</p>
<h3>Part three - an install profile (just for fun)</h3>
<p>I'm demonstrating all this to show you how to get data from the frontend (in the site form) to the backend. We've achieved that, but you probably want to actually *do* stuff with the data. </p>
<p>I'll demonstrate two things you can do with this data. They are just examples - Aegir isn't limited to this at all. </p>
<p><strong>cheesy_sites.profile</strong><br />
First let's create a simple install profile called 'Cheesy sites'.</p>
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br /> * Return an array of the modules to be enabled when this profile is installed.<br /> *<br /> * @return<br /> *&nbsp; An array of modules to be enabled.<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">cheesy_sites_profile_modules</span><span style="color: #007700">() {<br />&nbsp; return array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #FF8000">/* core */ </span><span style="color: #DD0000">'block'</span><span style="color: #007700">, </span><span style="color: #DD0000">'color'</span><span style="color: #007700">, </span><span style="color: #DD0000">'filter'</span><span style="color: #007700">, </span><span style="color: #DD0000">'help'</span><span style="color: #007700">, </span><span style="color: #DD0000">'menu'</span><span style="color: #007700">, </span><span style="color: #DD0000">'node'</span><span style="color: #007700">, </span><span style="color: #DD0000">'system'</span><span style="color: #007700">, </span><span style="color: #DD0000">'user'</span><span style="color: #007700">, </span><span style="color: #DD0000">'path'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #FF8000">/* other contrib */ </span><span style="color: #DD0000">'install_profile_api'</span><span style="color: #007700">, </span><span style="color: #DD0000">'token'</span><span style="color: #007700">, </span><span style="color: #DD0000">'pathauto'</span><span style="color: #007700">, </span><span style="color: #DD0000">'views'</span><span style="color: #007700">,<br />&nbsp; );<br />}
<p></p></span><span style="color: #FF8000">/**<br /> * Return a description of the profile for the initial installation screen.<br /> *<br /> * @return<br /> *&nbsp;&nbsp; An array with keys 'name' and 'description' describing this profile.<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">cheesy_sites_profile_details</span><span style="color: #007700">() {<br />&nbsp; return array(<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'name' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'Cheesy site'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp; </span><span style="color: #DD0000">'description' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'Select this profile to install a really cheesy site.'<br />&nbsp; </span><span style="color: #007700">);<br />}
<p>function </p></span><span style="color: #0000BB">cheesy_sites_profile_tasks</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$task</span><span style="color: #007700">, </span><span style="color: #0000BB">$url</span><span style="color: #007700">) {<br />&nbsp; </span><span style="color: #FF8000">// Install dependencies<br />&nbsp; </span><span style="color: #0000BB">install_include</span><span style="color: #007700">(</span><span style="color: #0000BB">cheesy_sites_profile_modules</span><span style="color: #007700">());<br />&nbsp; </span><span style="color: #FF8000">// Fetch and set the cheese attribute from Drush, sent originally <br />&nbsp; // from the site form in the Aegir frontend.<br />&nbsp; </span><span style="color: #0000BB">variable_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'cheese' </span><span style="color: #007700">, </span><span style="color: #0000BB">drush_get_option</span><span style="color: #007700">(</span><span style="color: #DD0000">'cheese'</span><span style="color: #007700">, </span><span style="color: #DD0000">'camembert'</span><span style="color: #007700">));<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
<p>This is not meant as an exercise in learning how to write install profiles so I'll gloss over some of the details here. Basic version: we define our modules that the profile depends on (core + some contrib), we install those modules, and finally we do a basic <code>variable_set</code> to store a 'cheese' variable in the site's database, fetching the value from the Drush/Provision backend (sent by the frontend per above), defaulting to 'camembert' if there was none.</p>
<p>Obviously in a normal install profile, this file would be bigger, as you'd be doing a bunch of other stuff such as setting up node types, setting up menus, blocks, users etc.</p>
<p><strong>cheesy_sites.make</strong><br />
I provide a Drush makefile here to fetch the contrib for you. This is totally out of the scope of the tutorial, but it's just fun to use Drush Make and I encourage you to get used to it :)</p>
<div class="codeblock"><code>core = 6.x<br />api = 2
<p>; Contrib modules<br />projects[token][version] = &quot;1.15&quot;<br />projects[pathauto][version] = &quot;1.5&quot;<br />projects[views][version] = &quot;2.11&quot; <br />projects[install_profile_api][version] = &quot;2.1&quot;</p></code></div>
<p>Download Drupal into /var/aegir/drupal-6.19 and copy the cheesy_sites directory into the profiles directory of drupal-6.19, or use a Drush stub makefile to do it all.</p>
<p>If you downloaded core manually, you'll want to <code>cd drupal-6.19; drush make profiles/cheesy_sites/cheesy_sites.make --no-core</code>. The contrib will be downloaded to /var/aegir/drupal-6.19/sites/all/modules</p>
<p><strong>Add the platform</strong></p>
<p>Add a new Platform in Aegir with the Publish Path being that which we just created: /var/aegir/drupal-6.19. A Verify task will be spawned, and Aegir will pick up all the modules and also the 'cheesy_sites' profile, which you can check by viewing the 'Installation profiles' section of the 'Packages' menu tab on the platform node, after the Verify task has completed.</p>
<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/cheesy_sites_profile/index.png" /></div>
<p>You could also add this profile and its dependencies to an existing platform and just re-Verify the platform, and the new profile will be synced up and added to this platform's package registry.</p>
<h3>Part four - make the backend knowledgeable about cheese</h3>
<p>Now we've set up the frontend to get the cheese, set up a drush file to send the cheese to the backend, and we have an install profile that expects to find cheese and set a variable about it in a database when installing a site.</p>
<p>We've left out one crucial stage, and that is to actually prepare the backend to tell it that cheese is coming!</p>
<p><strong>cheese.drush.inc</strong></p>
<p>Telling the backend about the incoming cheese is very similar to what we did earlier about capturing the cheese info on specific tasks and do $stuff with it. </p>
<p>To tell Drush and Provision (Aegir's Drush extension) about the cheese, create a file in ~aegir/.drush called <code>cheese.drush.inc</code>.</p>
<p>We'll invoke a Drush hook that sets the value for the backend on installing a site.</p>
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br /> * Implementation of hook_pre_provision_install()<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">drush_cheese_pre_provision_install</span><span style="color: #007700">(</span><span style="color: #0000BB">$url </span><span style="color: #007700">= </span><span style="color: #0000BB">NULL</span><span style="color: #007700">) {<br />&nbsp; </span><span style="color: #0000BB">drush_set_option</span><span style="color: #007700">(</span><span style="color: #DD0000">'cheese'</span><span style="color: #007700">, </span><span style="color: #0000BB">drush_get_option</span><span style="color: #007700">(</span><span style="color: #DD0000">'cheese'</span><span style="color: #007700">, </span><span style="color: #DD0000">'camembert'</span><span style="color: #007700">), </span><span style="color: #DD0000">'site'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
<p>This saves the value into the site context, where it's usable by the install profile. This occurs in the pre hook, prior to when Aegir starts executing the tasks outlined by the install profile.</p>
<h3>Part five - using Aegir hooks to inject settings into the site vhost</h3>
<p>In Part four, we'll have accomplished what is needed to set the cheese value for the backend, which in turn means you can now create a site in the Aegir frontend, choose the 'Cheesy site' profile, and expect the install profile to pick that cheese setting up and store it in the new site's database as a variable.</p>
<p>But! While I'm here, let me show you another Aegir hook that allows you to safely inject extra configuration sent from the frontend into the site's Apache vhost config file, persistently, without it being overwritten next time the site is Verified.</p>
<p>We'll invoke an Aegir hook called <code>provision_apache_vhost_config()</code> to insert a SetEnv into the vhost file, just for the hell of it.</p>
<p>Another example where you might want to do this is, say, to set a htpasswd password in the site form, and use the hook to inject mod_auth htpasswd protection for the site (perhaps a demonstration for another time!).</p>
<p>Add this to your cheese.drush.inc:</p>
<div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*<br /> * Implementation of hook_provision_apache_vhost_config()<br /> */<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">cheese_provision_apache_vhost_config</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">, </span><span style="color: #0000BB">$data</span><span style="color: #007700">) {<br />&nbsp; return </span><span style="color: #DD0000">"&nbsp; SetEnv cheese&nbsp; " </span><span style="color: #007700">. </span><span style="color: #0000BB">drush_get_option</span><span style="color: #007700">(</span><span style="color: #DD0000">'cheese'</span><span style="color: #007700">, </span><span style="color: #DD0000">'camembert'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
<p>The return value is inserted into the vhost. You can return multiple lines by wrapping them in an array, or even more elegantly, simply return a path to a template .tpl.php file and do your customisations in the template!</p>
<h3>Part six - check the results!</h3>
<p>If you've done everything up to Part four and five prior to installing a site using the 'Cheesy site' install profile, do so now! </p>
<p>I'm going to create a site called 'cheesy.mig5-forge.net' and set my cheese type to be 'cheddar'.</p>
<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/cheese_site/index.png" /></div>
<p>Now let's check to see those settings in their end result:</p>
<p><strong>The variable in the new site's database</strong></p>
<p>Run this command: <code>drush @yoursite.com vget cheese</code></p>
<p>You should see something like this:</p>
<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/cheese_variable/index.png" /></div>
<p>Great! Now let's look at the Apache vhost file for this site, and we should see a 'SetEnv' parameter injected into the vhost.</p>
<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/cheesy_vhost/index.png" /></div>
<h3>Conclusion</h3>
<p>I know these have been silly examples, but I hope you've taken some important lessons out of all this:</p>
<ul>
<li>How to extend the frontend of Aegir and hook into things like the site form and site node</li>
<li>How to capture data on task 'events' like install and send it to the backend</li>
<li>How to recognise that data in the backend and use it in install profiles or invoke our hooks to inject the data into configuration files</li>
<li>How much I really like cheese</li>
</ul>
<h2>Cheesy tarball</h2>
<p>As mentioned at the start of this article, you can download all these components I've been talking about here: <a href="http://www.migueljacq.com/files/cheesy.tar.gz">cheesy.tar.gz</a>. Remember to read the README.txt</p>
<h2>Further reading</h2>
<p>A great article by hadsie on g.d.o on <a href="http://groups.drupal.org/node/97039">sending data to an install profile via the Signup form</a> covers similar information on capturing data sent to the backend in an install profile.</p>
<p>Steven Jones has published a HTTP mod_auth feature extension for injecting htpasswd password protection on sites over at <a href="https://github.com/computerminds/aegir_http_basic" title="https://github.com/computerminds/aegir_http_basic">https://github.com/computerminds/aegir_http_basic</a></p>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-422.html?destination=node%2F75%23comment-form">Login</a> or <a href="../../../../../user/register/index-422.html?destination=node%2F75%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../75/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-108" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../108/index.html">E-Commerce Integration Roadmap</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Related links:</p>

<ul>
<li>For installation and configuration instructions, see the <a href="../../../../516/index.html">Administrator Manual</a>.</li>
<li>There was some valuable discussion on <a href="http://groups.drupal.org/node/94959">use cases</a> on groups.drupal.org.</li>
</ul>

<p><strong><em>Don't put feature requests in here. Submit them to the <a href="http://drupal.org/project/issues/uc_hosting">uc_hosting</a> or <a href="http://drupal.org/project/issues/hostmaster">hostmaster</a> issue queues instead.</em></strong></p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc52">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Drupal_6_uc_hosting_1.0"><span class="toc-number">1. </span>Drupal 6 / uc_hosting 1.0</a>
<ol>
	<li class="toc-level-2"><a href="#Goals"><span class="toc-number">1.1. </span>Goals</a>
<ol>
	<li class="toc-level-3"><a href="#Single_site_products"><span class="toc-number">1.1.1. </span>Single site products</a></li>
	<li class="toc-level-3"><a href="#Multi_site_packages"><span class="toc-number">1.1.2. </span>Multi site packages</a></li>
	<li class="toc-level-3"><a href="#Recurring_payments"><span class="toc-number">1.1.3. </span>Recurring payments</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#Nice-to-haves"><span class="toc-number">1.2. </span>Nice-to-haves</a>
<ol>
	<li class="toc-level-3"><a href="#Purchasing_wizard"><span class="toc-number">1.2.1. </span>Purchasing wizard</a></li>
	<li class="toc-level-3"><a href="#Make_it_unnecessary_to_log_single-site_purchasers_into_the_aegir_site"><span class="toc-number">1.2.2. </span>Make it unnecessary to log single-site purchasers into the aegir site</a></li>
	<li class="toc-level-3"><a href="#Deferred_payments"><span class="toc-number">1.2.3. </span>Deferred payments</a></li>
</ol>
</li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Drupal_7_uc_hosting_2.0"><span class="toc-number">2. </span>Drupal 7 / uc_hosting 2.0</a>
<ol>
	<li class="toc-level-2"><a href="#Goals-1"><span class="toc-number">2.1. </span>Goals</a>
<ol>
	<li class="toc-level-3"><a href="#Remote_storefronts"><span class="toc-number">2.1.1. </span>Remote storefronts</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#Nice-to-haves-2"><span class="toc-number">2.2. </span>Nice-to-haves</a>
<ol>
	<li class="toc-level-3"><a href="#Desjardins_recurring_payments"><span class="toc-number">2.2.1. </span>Desjardins recurring payments</a></li>
	<li class="toc-level-3"><a href="#Importable_demo_products"><span class="toc-number">2.2.2. </span>Importable demo products</a></li>
	<li class="toc-level-3"><a href="#Simple_procedure_to_deny_user_1_to_certain_clients"><span class="toc-number">2.2.3. </span>Simple procedure to deny user 1 to certain clients</a></li>
</ol>
</li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Wishlist:"><span class="toc-number">3. </span>Wishlist:</a></li>
	<li class="toc-level-1"><a href="#Unanswered_Questions"><span class="toc-number">4. </span>Unanswered Questions</a></li>
</ol>
</div>
</div>

<h1 id="Drupal_6_uc_hosting_1.0">1. Drupal 6 / uc_hosting 1.0</h1>

<p><strong>Aiming for compatibility with:</strong></p>

<ul>
<li>Hostmaster 1.0</li>
<li>Ubercart 2.4</li>
</ul>

<p><strong>Structure:</strong></p>

<ul>
<li><strong>uc_hosting</strong>: This implements shared functions and classes, including the function to create a client based on an ubercart order and product.</li>
<li><strong>uc_hosting_products</strong>: This is where we put the ubercart function calls, attribute generation, etc... This module is intended to be used alone for the "my ubercart is on my aegir site" scenario.</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Goals">1.1. Goals</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Single_site_products">1.1.1. Single site products</h3>

<p>In.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Multi_site_packages">1.1.2. Multi site packages</h3>

<p>In.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Recurring_payments">1.1.3. Recurring payments</h3>

<p>We need to test the module using uc_recurring.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Nice-to-haves">1.2. Nice-to-haves</h2>

<p>Given where we are at now, this stuff will most likely not make it in until an eventual 1.1 release. The exception being Hadsie's work on "try before you buy".</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Purchasing_wizard">1.2.1. Purchasing wizard</h3>

<p>Stills needs to be developed. The create my site now option is a start and is already in.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Make_it_unnecessary_to_log_single-site_purchasers_into_the_aegir_site">1.2.2. Make it unnecessary to log single-site purchasers into the aegir site</h3>

<p>Needs some testing but should be doable. Maybe just needs a little documentation. I believe Hadsie's work is related to this.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Deferred_payments">1.2.3. Deferred payments</h3>

<p>Ergonlogic is working on this.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Drupal_7_uc_hosting_2.0">2. Drupal 7 / uc_hosting 2.0</h1>

<p>We are still unsure about whether to support commerce, ubercart, or both with this module. We will most likely wait until development on the D7 port of aegir starts before beginning this work so we will see then what the landscape looks like.</p>

<p><strong>Aiming for compatibility with:</strong></p>

<ul>
<li>Hostmaster 2.x</li>
<li>Ubercart 3.x, or Commerce 1.x (maybe both?)</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Goals-1">2.1. Goals</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Remote_storefronts">2.1.1. Remote storefronts</h3>

<p>Hopefully, this will be supported by plans for new xmlrpc methods in the hostmaster signup module.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Nice-to-haves-2">2.2. Nice-to-haves</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Desjardins_recurring_payments">2.2.1. Desjardins recurring payments</h3>

<p>This is a seperate module being developed by Koumbit.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Importable_demo_products">2.2.2. Importable demo products</h3>

<p>This would be really great.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Simple_procedure_to_deny_user_1_to_certain_clients">2.2.3. Simple procedure to deny user 1 to certain clients</h3>

<p>Ergonlogic has published a module that should make this possible: <a href="http://drupal.org/project/hosting_profile_roles" title="http://drupal.org/project/hosting_profile_roles">http://drupal.org/project/hosting_profile_roles</a>.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Wishlist:">3. Wishlist:</h1>

<ul>
<li>A decent ubercart import function (see <a href="http://www.sthlmconnection.se/tips-and-tweaks/exportable-configuration-ctools-revisited">this</a> and <a href="http://stellapower.net/content/using-chaos-tools-module-create-exportables">this</a>... <a href="http://drupal.org/node/349408">this</a> and maybe <a href="http://drupal.org/node/590956">this</a>)</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Unanswered_Questions">4. Unanswered Questions</h1>

<ol>
<li>Will the Drupal 7 version use Ubercart or Commerce? Both? Neither?</li>
<li>How and when will people be billed? And what degree of control will uc_hosting offer over that?</li>
<li>Aegir has clients &amp; UC has clients. How are they related/distinct? How do we keep this clear to users/admins?</li>
</ol><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-423.html?destination=node%2F108%23comment-form">Login</a> or <a href="../../../../../user/register/index-423.html?destination=node%2F108%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../108/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-707" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../creating-product-features-using-uchosting-1x/index.html">Creating product features using uc_hosting 1.x</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p>This document assumes you want to implement a product feature using uc_hosting's database tables and exiting infrastructure. For a more complete example of an Ubercart 2.x product feature implementation, check out uc_file in the Ubercart core.</p>

<h2>The Basics</h2>

<p>Any module implementing a uc_hosting feature should include both uc_hosting and uc_hosting_products as dependencies. Include these lines in your .info file:</p>

<pre><code>dependencies[] = uc_hosting
dependencies[] = uc_hosting_products
</code></pre>

<h2>Declaring product features to Ubercart 2.x</h2>

<p>The first step is to implement Ubercart's hook_product_feature. Here is an example implementation for the platform access feature in uc_hosting_products:</p>

<pre><code>/**
 * Implementation of hook_product_feature().
 */
function uc_hosting_products_product_feature () {
  $features = array();

  // Set the feature for the platforms
  $features[] = array(
    'id' =&gt; 'hosting_platform',
    'title' =&gt; t('Access to a platform'),
    'callback' =&gt; 'uc_hosting_products_platform_form',
    'delete' =&gt; 'uc_hosting_products_feature_delete',
    'settings' =&gt; 'uc_hosting_products_platform_settings',
  );

  return $features;
}
</code></pre>

<p>An implementation of hook_product_feature returns a numerical array of associative arrays. Feature arrays must include five keys:</p>

<ul>
<li><strong>id</strong> will be used to identify your feature at the database level, in the uc_product_features table, and also in urls. Think of it as the type of your feature.</li>
<li><strong>title</strong> is the name of your feature as it will be displayed to site admins.</li>
<li><strong>callback</strong> will be used to create and modify instances of your feature attached to specific products. This callback should return a drupal form passed through the uc_product_feature_form function.</li>
<li><strong>delete</strong> is a simple function called on the removal of a feature instance from a product.</li>
<li><strong>settings</strong> is a callback that provides additional settings for the feature, and is not used presently in any uc_hosting product feature.</li>
</ul>

<p>Of note is that, unlike Drupal's core hook_menu and hook_theme, hook_product_feature does not include a 'file' key. uc_hosting works around this by using include_once at the beginning of the hook_product_feature implementation.</p>

<p>If you wish to use uc_hosting's shared feature functions, make sure to include the file "products/inc/uc_hosting_products.feature_shared.inc" (path relative to the uc_hosting root) at the beginning of your implementation of hook_product_feature.</p>

<h2>The callback form</h2>

<p>This form is called everytime someone adds a product feature to a product. It allows you to set any options for your feature that should be delivered on a per-product basis. Lets take a look at this function for the platform access feature:</p>

<pre><code>/**
 * Callback to add the platform form on the product feature page
 */
function uc_hosting_products_platform_form ($form_state, $node, $feature) {
  $form = array();

  // Get default values and shared form elements for all uc_hosting features
  $hosting_product = _uc_hosting_products_feature_fetch_product($feature);
  if (empty($feature)) {
    $feature = array('id' =&gt; 'hosting_platform');
  }
</code></pre>

<p>_<strong>uc_hosting_products_feature_fetch_product</strong> attempts to retrieve existing values for this instance of a product feature from the database.</p>

<pre><code>  _uc_hosting_products_feature_shared_elements(&amp;$form, $node, $feature, $hosting_product);
</code></pre>

<p>_<strong>uc_hosting_products_feature_shared_elements</strong> declares some form elements that either uc_hosting or Ubercart itself depend on to provide the product feature functionality.</p>

<pre><code>  // @see _hosting_get_platforms()
  if (user_access('view locked platforms')) {
    $platforms = _hosting_get_platforms();
  }
  else if (user_access('view platform')) {
    $platforms = _hosting_get_enabled_platforms();
  }
  else {
    $platforms = array();
    drupal_set_message('You must have permission to access platforms to enable this feature.', 'warning');
  }

  $form['platform'] = array(
    '#type' =&gt; 'select',
    '#title' =&gt; t('Platform'),
    '#description' =&gt; t('Select the platform to associate with this product.'),
    '#default_value' =&gt; $hosting_product-&gt;value,
    '#options' =&gt; $platforms,
    '#required' =&gt; TRUE,
  );
</code></pre>

<p>This code block generates a list of platforms to allow the admin to select which platform to bind to his product. This code is specific to the platform access implementation - this is where you should include your own form elements relevant to your feature.</p>

<pre><code>  $form['#validate'][] = 'uc_hosting_products_single_feature_validate';
</code></pre>

<p>For many implementations, <strong>uc_hosting_products_single_feature_validate</strong> ensures that a given uc_hosting product feature can only be enabled once on any given product. All of the exising uc_hosting_products features make use of this function.</p>

<pre><code>  return uc_product_feature_form ($form);
}
</code></pre>

<p>Finally, <strong>uc_product_feature_form</strong> adds some required form elements from Ubercart.</p>

<p>You also need to make sure to code a submit function for your callback, of the form callback_submit:</p>

<pre><code>/**
 * Save the platform feature settings.
 */
function uc_hosting_products_platform_form_submit($form, &amp;$form_state) {
  $hosting_product = array(
    'pfid' =&gt; $form_state['values']['pfid'],
    'model' =&gt; $form_state['values']['model'],
    'type' =&gt; 'platform',
    'value' =&gt; $form_state['values']['platform'],
  );

  $platform_node = node_load($hosting_product['value']);
  $description = t('&lt;strong&gt;SKU:&lt;/strong&gt; !sku&lt;br /&gt;', array('!sku' =&gt; empty($hosting_product['model']) ? 'Any' : $hosting_product['model']));
  $description .= t('&lt;strong&gt;Platform:&lt;/strong&gt; !platform', array('!platform' =&gt; $platform_node-&gt;title));

  $data = array(
    'pfid' =&gt; $form_state['values']['pfid'],
    'nid' =&gt; $form_state['values']['nid'],
    'fid' =&gt; 'hosting_platform',
    'description' =&gt; $description,
  );

  $form_state['redirect'] = uc_product_feature_save($data);
</code></pre>

<p>We manually save the product_feature to ubercart's database tables here. This is so that we can then retrieve the index of the entry in the uc_product_features table for later use in our own data.</p>

<pre><code>  // Insert or update uc_hosting_products table
  if (empty($hosting_product['pfid'])) {
    $hosting_product['pfid'] = db_last_insert_id('uc_product_features', 'pfid');
  }

  $existing_prod = db_fetch_object(db_query("SELECT hpid, data FROM {uc_hosting_products} WHERE pfid = %d LIMIT 1", $hosting_product['pfid']));

  $key = NULL;
  if ($existing_prod-&gt;hpid) {
    $key = 'hpid';
    $hosting_product['hpid'] = $existing_prod-&gt;hpid;
    $hosting_product['data'] = unserialize($existing_prod-&gt;data);
    $hosting_product['data']['platform'] = $hosting_product['value'];
  }
  // If necessary build a data array from scratch
  else {
    $hosting_product['data'] = array(
      'platform' =&gt; $hosting_product['value'],
    );
  }

  $hosting_product['data'] = serialize($hosting_product['data']);

  drupal_write_record('uc_hosting_products', $hosting_product, $key);
}
</code></pre>

<p>Note that the uc_hosting_products table has both an integer column <strong>value</strong>, and a longtext column <strong>data</strong> for storing serialized information about the feature.</p>

<h2>Taking action in Aegir based on product features</h2>

<p>uc_hosting assumes that most purchases made via Ubercart are intended to be expressed as changes to an Aegir client node. So it provides some code to help you create new clients or modify exiting ones when an order containing your feature is made. Any other actions needed to make your feature work you will need to implement yourself. This will involve implementing the Ubercart hook, <a href="http://api.ubercart.org/api/function/hook_order/2">hook_order</a> and your own callback function.</p>

<p>Lets start by taking a look at uc_hosting_products own implementation of hook_order:</p>

<pre><code>/**
 * Implementation of hook_order
 *
 * Actions t$form_state['values']['create_later']o take on order changes involving an aegir product
 *
 * @param $op string
 *   Provided by ubercart on invocation
 * @param &amp;$arg1
 *   Different data depending on the op
 * @param $arg2
 *   Different data depending on the op
 */
function uc_hosting_products_order ($op, &amp;$arg1, $arg2) {
  switch ($op) {
    case 'update':
      if ($arg2 == 'completed') {
        foreach ($arg1-&gt;products as $product) {
          if (_uc_hosting_products_has_feature ($product)) {
            // Make the changes necessary to the hosting client
            $client = uc_hosting_update_client($arg1, $product, 'uc_hosting_products_client_update');
          }
        }
      }
      break;
    default:
      break;
  }
}
</code></pre>

<p>_<strong>uc_hosting_products_has_feature</strong> is defined in uc_hosting_products.module, and provides some simple logic to detect uc_hosting product features. Rather than use this function, you will most likely want to define your own conditions.</p>

<p><strong>uc_hosting_update_client</strong> does the work of matching up an incoming ubercart order to an existing Aegir client, if possible. If not possible, it creates a new client node. It then calls the function provided as a third argument, in this case uc_hosting_products_client_update, and passes to that function the affected client node, as well as the product and order objects from Ubercart.</p>

<p>This callback function is the place to take actions in Aegir or pass commands. Take a look at uc_hosting_products for a fully fleshed out example.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-210.html?destination=node%2F707%23comment-form">Login</a> or <a href="../../../../../user/register/index-210.html?destination=node%2F707%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-210.html?destination=node%2F707%23comment-form">Login</a> or <a href="../../../../../user/register/index-210.html?destination=node%2F707%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2825" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/contrib/class-auto-loading/index.html">Class auto-loading</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p>Provision has been refactored in 6.x-2.x to use class auto-loading. This simplifies use of classes, as it obviates the need to explicitly include the files in which the class and it's parent classes are defined. In addition, it standardizes the placement of class definitions within a hierarchical file-system structure and will make name-spacing simpler if/when we begin to adopt Symfony components.</p>

<p>While not strictly required in contributed modules, it is highly encouraged. If you maintain a contributed Provision extension, some re-factoring will be required to support class auto-loading.</p>

<p>First off, you'll need to add a registration function that will enable Provision to autoload your extensions classes. Here's an example from provision_civicrm:</p>

<p><div class="codeblock"><code>/**<br /> * Register our directory as a place to find Provision classes.<br /> *<br /> * This allows Provision to autoload our classes, so that we don&#039;t need to<br /> * specifically include the files before we use the class.<br /> */<br />function civicrm_provision_register_autoload() {<br />&nbsp; static $loaded = FALSE;<br />&nbsp; if (!$loaded) {<br />&nbsp;&nbsp;&nbsp; $loaded = TRUE;<br />&nbsp;&nbsp;&nbsp; $list = drush_commandfile_list();<br />&nbsp;&nbsp;&nbsp; $provision_dir = dirname($list[&#039;provision&#039;]);<br />&nbsp;&nbsp;&nbsp; include_once($provision_dir . &#039;/provision.inc&#039;);<br />&nbsp;&nbsp;&nbsp; include_once($provision_dir . &#039;/provision.service.inc&#039;);<br />&nbsp;&nbsp;&nbsp; provision_autoload_register_prefix(&#039;Provision_&#039;, dirname(__FILE__));<br />&nbsp; }<br />}</code></div></p>

<p>Next, your extension will need to call your new function in a hook_drush_init(), so that it is run as early as possible during a Drush bootstrap.</p>

<p><div class="codeblock"><code>/**<br /> * Implements hook_drush_init().<br /> */<br />function provision_civicrm_drush_init() {<br />&nbsp; // Register our service classes for autoloading.<br />&nbsp; civicrm_provision_register_autoload();<br />&nbsp; ...</code></div></p>

<p>Finally, you can move your class definitions into the proper file-system structure. In provision_civicrm, we defined a new (stub) service to allow saving data from the front-end into a site context (entity/alias). So, we created a file at Provision/Service/civicrm.php that included the class definition:</p>

<p><div class="codeblock"><code>/<strong><br /> * The civicrm service base class.<br /> */<br />class Provision_Service_civicrm extends Provision_Service {<br />&nbsp; public $service = &#039;civicrm&#039;;<br /><br />&nbsp; /</strong><br />&nbsp;&nbsp; * Add the civicrm_version property to the site context.<br />&nbsp;&nbsp; */<br />&nbsp; static function subscribe_site($context) {<br />&nbsp;&nbsp;&nbsp; $context-&gt;setProperty(&#039;civicrm_version&#039;);<br />&nbsp; }<br />}</code></div></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-211.html?destination=node%2F2825%23comment-form">Login</a> or <a href="../../../../../user/register/index-211.html?destination=node%2F2825%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-211.html?destination=node%2F2825%23comment-form">Login</a> or <a href="../../../../../user/register/index-211.html?destination=node%2F2825%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-879" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../contrib/customizing-platform-templates/index.html">Customizing Platform Templates</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Non-standard Aegir installs may require adjustments to the default configurations for a platform that are defined by Aegir during the creation of a platform. These templates can be found in /home/aegir/.drush/provision.</p>

<p>Editing the actual templates prevents Aegir from overwriting your customizations when the verify task is run on an live platform.</p>

<p>Below are examples of customizations made to non-standard Aegir installs</p>

<h2>Running an Aegir platform on a unix socket for php-fpm on Nginx</h2>

<p>First let's find out where provision has the default config templates for our platfom.
<div class="codeblock"><code>[root@host]cd /home/aegir/.drush; grep -nir &quot;fastcgi_pass&quot; --exclude=&#42;.svn&#42; *<br />provision/http/nginx/nginx_advanced_include.conf:227:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000; ### php-fpm listening on port 9000<br />provision/http/nginx/nginx_advanced_include.conf:360:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000; ### php-fpm listening on port 9000<br />provision/http/nginx/nginx_simple_include.conf:213:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000; ### php-fpm listening on port 9000<br />provision/http/nginx/nginx_simple_include.conf:346:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000; ### php-fpm listening on port 9000</code></div>
We can see that the config templates for Nginx direct all php requests to port 9000 on the localhost I.P. Let's change that to a unix socket (which avoids the slight delay associated with tcp connections).
After commenting out those lines and adding our custom lines which will use a unix socket instead of a tcp port, we get..
<div class="codeblock"><code>provision/http/nginx/nginx_advanced_include.conf:227:&nbsp;&nbsp;&nbsp; #&nbsp;&nbsp;&nbsp; fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000; ### php-fpm listening on port 9000<br />provision/http/nginx/nginx_advanced_include.conf:228:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;<br />provision/http/nginx/nginx_advanced_include.conf:361:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000; ### php-fpm listening on port 9000<br />provision/http/nginx/nginx_advanced_include.conf:362:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;<br />provision/http/nginx/nginx_simple_include.conf:213:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000; ### php-fpm listening on port 9000<br />provision/http/nginx/nginx_simple_include.conf:214: fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;<br />provision/http/nginx/nginx_simple_include.conf:347:#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass&nbsp;&nbsp; 127.0.0.1:9000; ### php-fpm lis#tening on port 9000<br />provision/http/nginx/nginx_simple_include.conf:348:&nbsp;&nbsp;&nbsp;&nbsp; fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;</code></div></p>

<p>Remember to do the same to your platform config files in /home/aegir/config/includes. Next time you verify your platform your customizations will remain after verification.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-212.html?destination=node%2F879%23comment-form">Login</a> or <a href="../../../../../user/register/index-212.html?destination=node%2F879%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-212.html?destination=node%2F879%23comment-form">Login</a> or <a href="../../../../../user/register/index-212.html?destination=node%2F879%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-935" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/contrib/passing-values-site-drushrcphp-file-during-migrations/index.html">Passing values into the site drushrc.php file during migrations</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>It's possible rely to on manipulating the drush context for certain tasks and using hook_post_command to make use of that data. In this case, I wanted to save values to the site's drushrc.php file.</p>

<p>Add the following code to <code>hook_post_provision_verify</code>:</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if (</span><span style="color: #0000BB">d</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">type </span><span style="color: #007700">== </span><span style="color: #DD0000">'site'</span><span style="color: #007700">) {<br />&nbsp; </span><span style="color: #0000BB">$val </span><span style="color: #007700">= </span><span style="color: #0000BB">drush_get_option</span><span style="color: #007700">(</span><span style="color: #DD0000">'my_custom_option'</span><span style="color: #007700">);<br />&nbsp; </span><span style="color: #0000BB">drush_set_option</span><span style="color: #007700">(</span><span style="color: #DD0000">'my_custom_option'</span><span style="color: #007700">, </span><span style="color: #0000BB">$val</span><span style="color: #007700">, </span><span style="color: #DD0000">'site'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>This makes sure that <code>my_custom_option</code> perpetuates through these potentially destructive operations. Since it is provision-verify that writes the drushrc.php file for the site, drush options set in the site context during <code>hook_post_provision_verify</code> will be saved.</p>

<p>The final step is to make sure the verify hook is run with the appropriate options at the end of my migrate task, so add this to <code>hook_post_provision_migrate</code>.</p>

<p><div class="codeblock"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if (</span><span style="color: #0000BB">d</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">type </span><span style="color: #007700">== </span><span style="color: #DD0000">'site'</span><span style="color: #007700">) {<br />&nbsp; </span><span style="color: #0000BB">$options </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'my_custom_option' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">drush_get_option</span><span style="color: #007700">(</span><span style="color: #DD0000">'my_custom_option'</span><span style="color: #007700">));<br />&nbsp; </span><span style="color: #0000BB">$target </span><span style="color: #007700">= </span><span style="color: #0000BB">drush_get_option</span><span style="color: #007700">(</span><span style="color: #DD0000">'target_name'</span><span style="color: #007700">);<br />&nbsp; </span><span style="color: #0000BB">provision_backend_invoke</span><span style="color: #007700">(</span><span style="color: #0000BB">$target</span><span style="color: #007700">, </span><span style="color: #DD0000">'provision-verify'</span><span style="color: #007700">, array(), </span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div></p>

<p>I got this idea from looking at the <code>drush_provision_drupal_provision_migrate function</code> in <code>platform/migrate.provision.inc</code>.</p>

<p>I used this approach to create a <a href="http://drupal.org/node/1282200#comment-5173768">patch for provision_civicrm</a></p>

<p>This was originally <a href="http://drupal.org/node/955018#comment-5171904">documented in the provision issue queue</a>.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-213.html?destination=node%2F935%23comment-form">Login</a> or <a href="../../../../../user/register/index-213.html?destination=node%2F935%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-213.html?destination=node%2F935%23comment-form">Login</a> or <a href="../../../../../user/register/index-213.html?destination=node%2F935%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-946" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/developing/integrating-aegir/index.html">Integrating Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This section of the documentation deals with integrating Aegir components with other services (as opposed to extending or overriding direct Aegir functionality itself).</p>

<p>Examples might include using Aegir's database to authenticate users based on their presence as 'clients' in the Aegir system, e.g authenticating FTP access to sites for clients that have those sites managed in Aegir.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-214.html?destination=node%2F946%23comment-form">Login</a> or <a href="../../../../../user/register/index-214.html?destination=node%2F946%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-214.html?destination=node%2F946%23comment-form">Login</a> or <a href="../../../../../user/register/index-214.html?destination=node%2F946%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2789" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/content/developing/integrating-aegir/integrating-aegir-openssh/index.html">Integrating Aegir with OpenSSH</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_502 first"><a href="../../../../../category/keywords/openssh/index.html" rel="tag" title="">openssh</a></li>
<li class="taxonomy_term_503"><a href="../../../../../category/keywords/pam/index.html" rel="tag" title="">pam</a></li>
<li class="taxonomy_term_501"><a href="../../../../../category/keywords/sftp/index.html" rel="tag" title="">sftp</a></li>
<li class="taxonomy_term_91"><a href="../../../../../category/keywords/ssh/index.html" rel="tag" title="">SSH</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Adam has written an article that explains how to hook up OpenSSH and PAM on your Linux server, so that you can authenticate your clients via the Aegir database and have them SFTP/SSH into your server and be chrooted (locked) into just seeing their sites (or a platform) with a restricted command(s) shell.</p>

<p><a href="http://www.adamtk.com/aegir-virtual-sftp-and-chrooted-ssh">Read the article here.</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-215.html?destination=node%2F2789%23comment-form">Login</a> or <a href="../../../../../user/register/index-215.html?destination=node%2F2789%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-215.html?destination=node%2F2789%23comment-form">Login</a> or <a href="../../../../../user/register/index-215.html?destination=node%2F2789%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-947" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/content/developing/integrating-aegir/integrating-aegir-pureftp/index.html">Integrating Aegir with PureFTP</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Cafuego has written an excellent article that explains how to hook up PureFTPd and PAM on your Linux server, so that you can authenticate your clients via the Aegir database and have them FTP into your server and be chrooted (locked) into just seeing their sites.</p>

<p><a href="http://cafuego.net/2011/11/08/integrating-aegir-linux-and-ftp">Read the article here.</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-363.html?destination=node%2F947%23comment-form">Login</a> or <a href="../../../../../user/register/index-363.html?destination=node%2F947%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../947/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-589" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../developing/continuous-integration/index.html">Continuous Integration</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_25 first"><a href="../../../../../category/keywords/continuous-integration/index.html" rel="tag" title="">continuous integration</a></li>
<li class="taxonomy_term_24"><a href="../../../../../category/keywords/developer/index.html" rel="tag" title="">developer</a></li>
<li class="taxonomy_term_2"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
<li class="taxonomy_term_26 last"><a href="../../../../../category/keywords/testing/index.html" rel="tag" title="">testing</a></li>
</ul></div><p><strong>Testing server URL:</strong> <a href="http://ci.aegirproject.org/" title="http://ci.aegirproject.org">http://ci.aegirproject.org</a></p>

<p>Recently, mig5 <a href="http://greenbeedigital.com.au/content/discovering-jenkins-and-increasing-productivity">put together</a> a testing server based on <a href="http://jenkins-ci.org/">Jenkins</a>.</p>

<p>So what? In doing so, he's produced a tool that will allow us to spin up a temporary virtual server, drag in our codebase from Drush Make, other codebases as platforms, and do  test installs of sites on it. This should become a routine start-to-finish test of our applications, features, modules, etc. All at the click of a button (or less, by scheduling it!)</p>

<p>Currently, we have a build project that:</p>

<ul>
<li>Provisions a new VPS at Rackspace Cloud</li>
<li>Installs Aegir 6.x-1.x branch</li>
<li>Builds a Drupal 6, Drupal 7 and OpenAtrium platform using Drush Make</li>
<li>Installs a site (with respective install profiles) on all three platforms</li>
</ul>

<p>If anything fails here, an alert will come through to #aegir on Freenode. This will help us to test the Aegir install (especially to ensure our compatibility with Drush and Drush Make releases), and to identify any regressions in our own project.</p>

<p>Every 15 minutes, Jenkins will check if there's a new commit to hostmaster and provision, and if there is, fire up a new install and test a few things to find regressions.</p>

<p>We also have a build project for the most recent official release of Aegir (@TODO: test .deb installation method of Aegir for this), as well as a build that installs an earlier Aegir and then upgrades to the latest 6.x-1.x to test the upgrade path.</p>

<p>Also, steven has created a <a href="https://drupal.org/sandbox/darthsteven/1286014">sandbox</a> to host the code that runs the tests on the jenkins server.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-425.html?destination=node%2F589%23comment-form">Login</a> or <a href="../../../../../user/register/index-425.html?destination=node%2F589%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../589/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-12855" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/developing/despamming-guide/index.html">Despamming guide</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>We have seen numerous waves of spam on this site. At first we setup <a href="../../../../410/index.html">mollom, in 2011</a> but sometimes it is not enough.</p>

<h1>Current practices</h1>

<p>The very first step is to identify the user account and disable it (<em>not</em> delete it, we need it to find the content to remove).</p>

<p>Views Bulk Operations views used for despamming:</p>

<ul>
<li><a href="../../../../../admin/content/comment/spam/index.html">comments</a></li>
<li><a href="../../../../../admin/content/node/spam/index.html">nodes</a></li>
</ul>

<p>Note that this will flood your screen with <code>drupal_set_message</code> for every page that is deleted, which may make the site difficult to use for a while. To top that, the final page will list the name of every page that was removed, just to make sure you had enough spam for the day.</p>

<p>You can also use the <a href="../../../../../admin/content/node/index.html">regular comment view to delete content and report it to mollom</a> if you are patient enough.</p>

<p>You can also delete the account if you are motivated and want to grind that specific axe. Look at the <a href="../../../../../admin/user/user/index.html?sort=desc&amp;order=Member+for">regular user listing</a> for the latest user accounts created.</p>

<h1>Other ideas</h1>

<ul>
<li><a href="https://www.drupal.org/project/httpbl">http:BL</a> - used on Drupal.org</li>
<li><a href="https://www.drupal.org/project/blogspam">blogspam</a> - used on debian-administration.org, but <a href="https://www.drupal.org/node/2090911">not ported to new API</a></li>
<li><a href="https://www.drupal.org/project/spambot">spambot</a> - similar</li>
<li><a href="https://www.drupal.org/project/rate">rate</a> - may be used to process small amounts of spam by the community</li>
<li><a href="https://www.drupal.org/project/botcha">botcha</a></li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-216.html?destination=node%2F12855%23comment-form">Login</a> or <a href="../../../../../user/register/index-216.html?destination=node%2F12855%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-216.html?destination=node%2F12855%23comment-form">Login</a> or <a href="../../../../../user/register/index-216.html?destination=node%2F12855%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-470" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../presentation/index.html">Presentation &amp; Training Materials</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This section of the handbook is for various presentation and training materials about Aegir. This includes videos, slides, speaker notes, high-resolution images, etc.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-217.html?destination=node%2F470%23comment-form">Login</a> or <a href="../../../../../user/register/index-217.html?destination=node%2F470%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-217.html?destination=node%2F470%23comment-form">Login</a> or <a href="../../../../../user/register/index-217.html?destination=node%2F470%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-7" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../videos/index.html">Presentation videos</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>In this section of the handbook, we collate various footage of Aegir presentations and demonstrations for convenient access.</p>

<h2>Contribute!</h2>

<p>Feel free to add child pages and embed footage of Aegir that you may have found or demonstrated at a DrupalCamp, conference or meetup, or just to provide help to the community. Please try and follow the standards outlined in the other video pages, whereby the title includes the location, and the date and the name of the presenter is listed.</p>

<h2>Note on deprecated videos</h2>

<p>Please note that Aegir is a constantly evolving project under heavy development. Many of these videos contain footage and information that is deprecated (out of date or obsolete) compared to current versions of Aegir.</p>

<p>These older videos are maintained here for historical purposes, but should not be relied upon to successfully use or install Aegir. You should always refer to the <a href="../../../../9/index.html">Install documentation</a> and the INSTALL.txt of the latest release of Aegir at the time you are reading this, as it is likely that much has changed since these videos were published.</p>

<h2>Need help?</h2>

<p>Always <a href="../../../../15/index.html">ask for help</a> if you are not sure on how to install or use Aegir! These videos are a supplementary guide or demonstration of specific features only.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-218.html?destination=node%2F7%23comment-form">Login</a> or <a href="../../../../../user/register/index-218.html?destination=node%2F7%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-218.html?destination=node%2F7%23comment-form">Login</a> or <a href="../../../../../user/register/index-218.html?destination=node%2F7%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-750" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../drupalcamp-montreal-2010-antoine-beaupr%c3%a9-aegir-one-drupal-rule-them-all/index.html">2010 DrupalCamp Montreal: Antoine Beaupr -- Aegir: One Drupal to Rule Them All</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir Project's lead maintainer, Antoine Beaupr (anarcat), presents an overview of Aegir at DrupalCamp Montreal.</p>

<p><strong>Date:</strong> October 23<sup>rd</sup>, 2010</p>

<p><strong>URL:</strong> <a href="http://hd.drupalcampmontreal.com/watch/antoine-beaupr-aegir-one-drupal-rule-them-all" title="http://hd.drupalcampmontreal.com/watch/antoine-beaupr%C3%A9-aegir-one-drupal-rule-them-all">http://hd.drupalcampmontreal.com/watch/antoine-beaupr%C3%A9-aegir-one-dr...</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-219.html?destination=node%2F750%23comment-form">Login</a> or <a href="../../../../../user/register/index-219.html?destination=node%2F750%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-219.html?destination=node%2F750%23comment-form">Login</a> or <a href="../../../../../user/register/index-219.html?destination=node%2F750%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-48" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../48/index.html">2010 DrupalCon Copenhagen - Aegir - One Drupal to Rule them All!</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> August 2010<br />
<strong>Presenter(s):</strong> Adrian Rossouw, Antoine Beaupr</p>
<p><a href="http://cph2010.drupal.org/sessions/aegir-one-drupal-rule-them-all" title="http://cph2010.drupal.org/sessions/aegir-one-drupal-rule-them-all">http://cph2010.drupal.org/sessions/aegir-one-drupal-rule-them-all</a></p>
<div align="center">
<object width="640" height="506" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param value="true" name="allowfullscreen" /><param value="always" name="allowscriptaccess" /><param value="high" name="quality" /><param value="true" name="cachebusting" /><param value="#000000" name="bgcolor" /><param name="movie" value="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" /><param value="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'day3-room11-2-aegir-one-drupal-to-rule-them-all_512kb.mp4'}],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/Aegir-OneDrupalToRuleThemAll/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':false,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}" name="flashvars" /><embed src="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" type="application/x-shockwave-flash" width="640" height="506" allowfullscreen="true" allowscriptaccess="always" cachebusting="true" bgcolor="#000000" quality="high" flashvars="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'day3-room11-2-aegir-one-drupal-to-rule-them-all_512kb.mp4'}],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/Aegir-OneDrupalToRuleThemAll/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':false,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}"> </embed></object></div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-220.html?destination=node%2F48%23comment-form">Login</a> or <a href="../../../../../user/register/index-220.html?destination=node%2F48%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-220.html?destination=node%2F48%23comment-form">Login</a> or <a href="../../../../../user/register/index-220.html?destination=node%2F48%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-92" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../92/index.html">2010 DrupalCamp LA - How Aegir Will Save Your Sanity</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> August 2010<br />
<strong>Presenter(s):</strong> John Fiala</p>
<p><embed height="600" width="800" flashvars="csColor=FFFFFF&amp;autostart=false" allowscriptaccess="always" scale="showall" allowfullscreen="true" quality="best" bgcolor="#FFFFFF" name="csSWF" id="csSWF" src="http://replay.uci.edu/clients/drupal/How_Aegir_Will_Save_Your_Sanity_-_Web_(1024x768)_-_20100808_10.09.08AM.swf" type="application/x-shockwave-flash"></embed></p>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-221.html?destination=node%2F92%23comment-form">Login</a> or <a href="../../../../../user/register/index-221.html?destination=node%2F92%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-221.html?destination=node%2F92%23comment-form">Login</a> or <a href="../../../../../user/register/index-221.html?destination=node%2F92%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-50" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../50/index.html">2010 DrupalCon San Francisco - Aegir - One Drupal to Rule them All!</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> May 2010<br />
<strong>Presenter(s):</strong> Miguel Jacq, Antoine Beaupr</p>
<p><a href="http://sf2010.drupal.org/conference/sessions/aegir-hosting-system-one-drupal-rule-them-all" title="http://sf2010.drupal.org/conference/sessions/aegir-hosting-system-one-drupal-rule-them-all">http://sf2010.drupal.org/conference/sessions/aegir-hosting-system-one-dr...</a></p>
<div align="center">
<object width="640" height="506" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param value="true" name="allowfullscreen" /><param value="always" name="allowscriptaccess" /><param value="high" name="quality" /><param value="true" name="cachebusting" /><param value="#000000" name="bgcolor" /><param name="movie" value="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" /><param value="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'wed_1500_308_2_512kb.mp4'}],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/AegirHostingSystem-OneDrupalToRuleThemAll/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':false,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}" name="flashvars" /><embed src="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" type="application/x-shockwave-flash" width="640" height="506" allowfullscreen="true" allowscriptaccess="always" cachebusting="true" bgcolor="#000000" quality="high" flashvars="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'wed_1500_308_2_512kb.mp4'}],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/AegirHostingSystem-OneDrupalToRuleThemAll/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':false,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}"> </embed></object></div>
<p>This session will illustrate the use of the Aegir hosting system to simplify the life of developers and administrators, by automating a lot of the common tasks involved in deploying sites.</p>
<p>Aegir is a distributed provisioning system for Drupal that allows you to manage thousands of sites across as many concurrent instances of Drupal on as many servers as you need. It's built on Drupal itself, so that your user interface to the system becomes a 'meta-drupal' site, with nodes representing all of your hosted sites and all of the components of your hosting environment.</p>
<p>If you have built your own custom niche application using Drupal, and need to be able to roll out new sites quickly and efficiently, as well ask keeping them up to date, this presentation is definitely for you.</p>
<p>If you have more than a handful of sites, and feel your hair stand on end every time a security release is announced, this presentation is for you.</p>
<p>Even if you only have a few sites, and would like to be able to spend less time on the tedious manual tasks associated with running a Drupal site over it's entire lifetime, you will still find something of use in this presentation.</p>
<p>If you've looked at Aegir in the past, and would like to get a sense of the progress made by the project (two major releases since Drupalcon DC), this presentation is a good way to get a grasp on where we are heading.</p>
<p>For more information on Aegir, check out the Aegir user group and keep up to date with the Aegir posts on developmentseed.org.</p>
<p>In Norse mythology, Aegir was the god of the oceans and if a Drupal site is a drop of water, Aegir is the deity of large bodies of water.</p>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-222.html?destination=node%2F50%23comment-form">Login</a> or <a href="../../../../../user/register/index-222.html?destination=node%2F50%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-222.html?destination=node%2F50%23comment-form">Login</a> or <a href="../../../../../user/register/index-222.html?destination=node%2F50%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-51" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../51/index.html">2009 DrupalCon Paris - Automate your maintenance troubles away with the Aegir hosting system!</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> September, 2009<br />
<strong>Presenter(s):</strong> Adrian Rossouw, Antoine Beaupr</p>
<div align="center">
<object width="640" height="506" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param value="true" name="allowfullscreen" /><param value="always" name="allowscriptaccess" /><param value="high" name="quality" /><param value="true" name="cachebusting" /><param value="#000000" name="bgcolor" /><param name="movie" value="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" /><param value="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'AutomateyoursitemaintenancetroublesawaywiththeAegirhostingsystem_512kb.mp4'}],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/AutomateyoursitemaintenancetroublesawaywiththeAegirhostingsystem/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':false,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}" name="flashvars" /><embed src="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" type="application/x-shockwave-flash" width="640" height="506" allowfullscreen="true" allowscriptaccess="always" cachebusting="true" bgcolor="#000000" quality="high" flashvars="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'AutomateyoursitemaintenancetroublesawaywiththeAegirhostingsystem_512kb.mp4'}],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/AutomateyoursitemaintenancetroublesawaywiththeAegirhostingsystem/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':false,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}"> </embed></object></div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-223.html?destination=node%2F51%23comment-form">Login</a> or <a href="../../../../../user/register/index-223.html?destination=node%2F51%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-223.html?destination=node%2F51%23comment-form">Login</a> or <a href="../../../../../user/register/index-223.html?destination=node%2F51%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-52" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../52/index.html">2009 DrupalCon Paris - Aegir: Build Once, Deploy often: Real life use-cases </a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> September 2009<br />
<strong>Presenter(s):</strong> Roel De Meester</p>
<div align="center">
<object width="640" height="506" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param value="true" name="allowfullscreen" /><param value="always" name="allowscriptaccess" /><param value="high" name="quality" /><param value="true" name="cachebusting" /><param value="#000000" name="bgcolor" /><param name="movie" value="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" /><param value="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'AegirBuildOnceDeployoftenReallifeuse-cases_1_512kb.mp4'},'AegirBuildOnceDeployoftenReallifeuse-cases_2_512kb.mp4'],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/AegirBuildOnceDeployoftenReallifeuse-cases/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':true,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}" name="flashvars" /><embed src="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" type="application/x-shockwave-flash" width="640" height="506" allowfullscreen="true" allowscriptaccess="always" cachebusting="true" bgcolor="#000000" quality="high" flashvars="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'AegirBuildOnceDeployoftenReallifeuse-cases_1_512kb.mp4'},'AegirBuildOnceDeployoftenReallifeuse-cases_2_512kb.mp4'],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/AegirBuildOnceDeployoftenReallifeuse-cases/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':true,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}"> </embed></object></div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-224.html?destination=node%2F52%23comment-form">Login</a> or <a href="../../../../../user/register/index-224.html?destination=node%2F52%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-224.html?destination=node%2F52%23comment-form">Login</a> or <a href="../../../../../user/register/index-224.html?destination=node%2F52%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-56" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../56/index.html">2009 DrupalCon DC - Deploying and Maintaining Drupal Sites Using the Aegir Hosting System</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> March 2009<br />
<strong>Presenter(s):</strong> Adrian Rossouw</p>
<div align="center">
<object width="640" height="506" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param value="true" name="allowfullscreen" /><param value="always" name="allowscriptaccess" /><param value="high" name="quality" /><param value="true" name="cachebusting" /><param value="#000000" name="bgcolor" /><param name="movie" value="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" /><param value="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'DeployingAndMaintainingUsingAegir_500kbps_512kb.mp4'}],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/DrupalconDc2009-DeployingAndMaintainingDrupalSitesUsingTheAegir/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':false,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}" name="flashvars" /><embed src="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" type="application/x-shockwave-flash" width="640" height="506" allowfullscreen="true" allowscriptaccess="always" cachebusting="true" bgcolor="#000000" quality="high" flashvars="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'DeployingAndMaintainingUsingAegir_500kbps_512kb.mp4'}],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/DrupalconDc2009-DeployingAndMaintainingDrupalSitesUsingTheAegir/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':false,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}"> </embed></object></div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-225.html?destination=node%2F56%23comment-form">Login</a> or <a href="../../../../../user/register/index-225.html?destination=node%2F56%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-225.html?destination=node%2F56%23comment-form">Login</a> or <a href="../../../../../user/register/index-225.html?destination=node%2F56%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-55" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../55/index.html">2008 DrupalCon Szeged - Deploying and maintaining Drupal sites using Aegir hosting system</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> August 2008<br />
<strong>Presenter(s):</strong> Adrian Rossouw</p>
<div align="center">
<object width="640" height="506" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param value="true" name="allowfullscreen" /><param value="always" name="allowscriptaccess" /><param value="high" name="quality" /><param value="true" name="cachebusting" /><param value="#000000" name="bgcolor" /><param name="movie" value="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" /><param value="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'Drupalcon_2008_Szeged_aug_29_4_Universe_2pass.avi'},'Drupalcon_2008_Szeged_aug_29_4_Universe_2pass_512kb.mp4'],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/aegir/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':true,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}" name="flashvars" /><embed src="http://www.archive.org/flow/flowplayer.commercial-3.2.1.swf" type="application/x-shockwave-flash" width="640" height="506" allowfullscreen="true" allowscriptaccess="always" cachebusting="true" bgcolor="#000000" quality="high" flashvars="config={'key':'#$aa4baff94a9bdcafce8','playlist':['format=Thumbnail?.jpg',{'autoPlay':false,'url':'Drupalcon_2008_Szeged_aug_29_4_Universe_2pass.avi'},'Drupalcon_2008_Szeged_aug_29_4_Universe_2pass_512kb.mp4'],'clip':{'autoPlay':true,'baseUrl':'http://www.archive.org/download/aegir/','scaling':'fit','provider':'h264streaming'},'canvas':{'backgroundColor':'#000000','backgroundGradient':'none'},'plugins':{'controls':{'playlist':true,'fullscreen':true,'height':26,'backgroundColor':'#000000','autoHide':{'fullscreenOnly':true}},'h264streaming':{'url':'http://www.archive.org/flow/flowplayer.pseudostreaming-3.2.1.swf'}},'contextMenu':[{},'-','Flowplayer v3.2.1']}"> </embed></object></div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-226.html?destination=node%2F55%23comment-form">Login</a> or <a href="../../../../../user/register/index-226.html?destination=node%2F55%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-226.html?destination=node%2F55%23comment-form">Login</a> or <a href="../../../../../user/register/index-226.html?destination=node%2F55%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-59" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../59/index.html">2009 Drupal Melbourne Meet Oct - Introduction to the Aegir Hosting System</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> October 2009<br />
<strong>Presenter(s):</strong> Miguel Jacq</p>
<div align="center">
<embed src="http://blip.tv/play/AYGow2oC" type="application/x-shockwave-flash" width="480" height="390" allowscriptaccess="always" allowfullscreen="true"></embed>
</div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-227.html?destination=node%2F59%23comment-form">Login</a> or <a href="../../../../../user/register/index-227.html?destination=node%2F59%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-227.html?destination=node%2F59%23comment-form">Login</a> or <a href="../../../../../user/register/index-227.html?destination=node%2F59%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-57" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../57/index.html">2009 DrupalCamp Montral - Aegir - One Drupal to Rule them All!</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> October 2009<br />
<strong>Presenter(s):</strong> Antoine Beaupr</p>
<div align="center">
<embed src="http://blip.tv/play/AYGqs1IC" type="application/x-shockwave-flash" width="480" height="300" allowscriptaccess="always" allowfullscreen="true"></embed>
</div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-228.html?destination=node%2F57%23comment-form">Login</a> or <a href="../../../../../user/register/index-228.html?destination=node%2F57%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-228.html?destination=node%2F57%23comment-form">Login</a> or <a href="../../../../../user/register/index-228.html?destination=node%2F57%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-899" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../videos/drupalcamp-spain-2011-aegir-one-drupal-rule-them-all-spanish/index.html">2011 DrupalCamp Spain -- Aegir: One Drupal to Rule Them All (Spanish)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Juan Pablo Novillo (juampy) present an overview of Aegir at DrupalCamp Spain.</p>

<p><strong>Date:</strong> 2nd of October, 2011</p>

<p><strong>URL:</strong> <a href="http://2011.drupalcamp.es/sesiones/aegir-un-drupal-para-gobernarlos-todos" title="http://2011.drupalcamp.es/sesiones/aegir-un-drupal-para-gobernarlos-todos">http://2011.drupalcamp.es/sesiones/aegir-un-drupal-para-gobernarlos-todos</a></p>

<p><strong>Video:</strong> <a href="http://www.archive.org/details/AegirUnDrupalParaGobernarlosATodos" title="http://www.archive.org/details/AegirUnDrupalParaGobernarlosATodos">http://www.archive.org/details/AegirUnDrupalParaGobernarlosATodos</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-229.html?destination=node%2F899%23comment-form">Login</a> or <a href="../../../../../user/register/index-229.html?destination=node%2F899%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-229.html?destination=node%2F899%23comment-form">Login</a> or <a href="../../../../../user/register/index-229.html?destination=node%2F899%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-875" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../videos/drupalcon-london-2011-aegir-based-business-models/index.html">2011 DrupalCon London -- Aegir Based Business Models</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>An Aegir Project documentation &amp; community manager, as well as contrib developer, Christopher Gervais (ergonlogic), presents an overview of business models supported by Aegir, as well as a demo implementing a simple Software-as-a-Service platform.</p>

<p><strong>Date:</strong> August 23<sup>rd</sup>, 2011</p>

<p><strong>URL:</strong> <a href="http://london2011.drupal.org/conference/sessions/aegir-based-business-models" title="http://london2011.drupal.org/conference/sessions/aegir-based-business-models">http://london2011.drupal.org/conference/sessions/aegir-based-business-mo...</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-366.html?destination=node%2F875%23comment-form">Login</a> or <a href="../../../../../user/register/index-366.html?destination=node%2F875%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../875/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-874" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../videos/drupalcon-london-2011-aegir-one-drupal-rule-them-all/index.html">2011 DrupalCon London -- Aegir: One Drupal to Rule Them All</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Two of the Aegir Project's maintainers, Antoine Beaupr (anarcat) and Steven Jones (darthsteven), present an overview of Aegir at DrupalCon London.</p>

<p><strong>Date:</strong> August 24<sup>th</sup>, 2011</p>

<p><strong>URL:</strong> <a href="http://london2011.drupal.org/conference/sessions/aegir-one-drupal-rule-them-all" title="http://london2011.drupal.org/conference/sessions/aegir-one-drupal-rule-them-all">http://london2011.drupal.org/conference/sessions/aegir-one-drupal-rule-t...</a><br />
<strong>Alternative URL:</strong> <a href="https://www.youtube.com/watch?v=Uub18h_9PMY" title="https://www.youtube.com/watch?v=Uub18h_9PMY">https://www.youtube.com/watch?v=Uub18h_9PMY</a></p>

<p><strong>Photo:</strong> <a href="http://picplz.com/user/myfunnyandy/pic/t4871/" title="http://picplz.com/user/myfunnyandy/pic/t4871/">http://picplz.com/user/myfunnyandy/pic/t4871/</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-230.html?destination=node%2F874%23comment-form">Login</a> or <a href="../../../../../user/register/index-230.html?destination=node%2F874%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-230.html?destination=node%2F874%23comment-form">Login</a> or <a href="../../../../../user/register/index-230.html?destination=node%2F874%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2883" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/videos/2014-drupal-melbourne-meetup-march-11-web-stacks-local-development/index.html">2014 Drupal Melbourne Meetup March 11 -- Web Stacks for local development</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Brian Gilbert (<a href="https://twitter.com/BrianGilbert_">@BrianGilbert_</a>) of <a href="http://realityloop.com/">Realityloop</a> regarding web stacks for local development, Aegir wins.</p>

<p>Date: March 11th, 2014</p>

<p>URL: <a href="https://www.youtube.com/watch?v=enSrAjgycnQ" title="https://www.youtube.com/watch?v=enSrAjgycnQ">https://www.youtube.com/watch?v=enSrAjgycnQ</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-231.html?destination=node%2F2883%23comment-form">Login</a> or <a href="../../../../../user/register/index-231.html?destination=node%2F2883%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-231.html?destination=node%2F2883%23comment-form">Login</a> or <a href="../../../../../user/register/index-231.html?destination=node%2F2883%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-3002" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/videos/2014-drupalcon-amsterdam-spidersnet-infinity-creating-site-factory-drupal-aegir/index.html">2014 DrupalCon Amsterdam: Spidersnet Infinity: Creating a Site Factory with Drupal &amp; Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> October 1<sup>rd</sup>, 2014</p>

<p><strong>URL:</strong> <a href="https://amsterdam2014.drupal.org/session/spidersnet-infinity-creating-site-factory-drupal-aegir" title="https://amsterdam2014.drupal.org/session/spidersnet-infinity-creating-site-factory-drupal-aegir">https://amsterdam2014.drupal.org/session/spidersnet-infinity-creating-si...</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-232.html?destination=node%2F3002%23comment-form">Login</a> or <a href="../../../../../user/register/index-232.html?destination=node%2F3002%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-232.html?destination=node%2F3002%23comment-form">Login</a> or <a href="../../../../../user/register/index-232.html?destination=node%2F3002%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-58" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../58/index.html">2009 Drupal Vancouver April meet - Automated Deployment with the gir Hosting System</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> April 2009<br />
<strong>Presenter(s):</strong> Robin Puga</p>
<div align="center">
<embed src="http://blip.tv/play/AYGYi1EC" type="application/x-shockwave-flash" width="480" height="390" allowscriptaccess="always" allowfullscreen="true"></embed>
</div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-233.html?destination=node%2F58%23comment-form">Login</a> or <a href="../../../../../user/register/index-233.html?destination=node%2F58%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-233.html?destination=node%2F58%23comment-form">Login</a> or <a href="../../../../../user/register/index-233.html?destination=node%2F58%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-906" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../presentation/screencasts/index.html">Screencasts</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This section of the handbook is reserved for screencasts that demonstrate various parts of Aegir in a commented video.</p>

<h2>Contribute!</h2>

<p>Feel free to add child pages and embed footage of Aegir that you may have found or created yourself. Please try and follow the standards outlined in the other video pages.</p>

<h2>Note on deprecated videos</h2>

<p>Please note that Aegir is a constantly evolving project under heavy development. Many of these videos contain footage and information that is deprecated (out of date or obsolete) compared to current versions of Aegir.</p>

<p>These older videos are maintained here for historical purposes, but should not be relied upon to successfully use or install Aegir. You should always refer to the <a href="../../../../9/index.html">Install documentation</a> and the INSTALL.txt of the latest release of Aegir at the time you are reading this, as it is likely that much has changed since these videos were published.</p>

<h2>Need help?</h2>

<p>Always <a href="../../../../15/index.html">ask for help</a> if you are not sure on how to install or use Aegir! These videos are a supplementary guide or demonstration of specific features only.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-234.html?destination=node%2F906%23comment-form">Login</a> or <a href="../../../../../user/register/index-234.html?destination=node%2F906%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-234.html?destination=node%2F906%23comment-form">Login</a> or <a href="../../../../../user/register/index-234.html?destination=node%2F906%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-915" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../presentation/screencasts/oct-2011-aegir-site-tasks-backup-restore-clone-migrate-friendlydrupalcom/index.html">Oct 2011 - Aegir Site Tasks: Backup, Restore, Clone, Migrate (friendlydrupal.com)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><a href="http://friendlydrupal.com/screencasts/aegir-site-tasks-backup-restore-clone-migrate">Aegir Site Tasks: Backup, Restore, Clone, Migrate</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-235.html?destination=node%2F915%23comment-form">Login</a> or <a href="../../../../../user/register/index-235.html?destination=node%2F915%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-235.html?destination=node%2F915%23comment-form">Login</a> or <a href="../../../../../user/register/index-235.html?destination=node%2F915%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-948" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/presentation/screencasts/oct-2011-zero-touch-drupal-deployment-jenkins-aegir-git-fabric-and-/index.html">Oct 2011 - Zero-Touch Drupal Deployment with Jenkins, Aegir, Git, Fabric and Drush</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>How to automatically deploy changes from dev, to stage, to production, without ever having to even login to Aegir.</p>
<p>Originally published at <a href="http://mig5.net/node/342">mig5.net</a>.</p>
<p><a href="http://c252929.r29.cf1.rackcdn.com/aegir-zero-touch-jenkins.ogv">Download the .ogg video</a>.</p>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-236.html?destination=node%2F948%23comment-form">Login</a> or <a href="../../../../../user/register/index-236.html?destination=node%2F948%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-236.html?destination=node%2F948%23comment-form">Login</a> or <a href="../../../../../user/register/index-236.html?destination=node%2F948%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-914" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../presentation/screencasts/oct-2011-install-platforms-and-sites-aegir-drupal-hosting-system-friendlydr/index.html">Oct 2011 - Install Platforms and Sites with Aegir Drupal Hosting System (friendlydrupal.com)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><a href="http://friendlydrupal.com/screencasts/install-platforms-and-sites-aegir-drupal-hosting-system">Install Platforms and Sites with Aegir Drupal Hosting System </a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-237.html?destination=node%2F914%23comment-form">Login</a> or <a href="../../../../../user/register/index-237.html?destination=node%2F914%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-237.html?destination=node%2F914%23comment-form">Login</a> or <a href="../../../../../user/register/index-237.html?destination=node%2F914%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-913" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../presentation/screencasts/oct-2011-install-aegir-drupal-hosting-platform-ubuntu-friendlydrupalcom/index.html">Oct 2011 - Install Aegir Drupal Hosting Platform on Ubuntu (friendlydrupal.com)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first last"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
</ul></div><p><a href="http://friendlydrupal.com/screencasts/how-install-aegir-drupal-hosting-platform-ubuntu">How to Install Aegir Drupal Hosting Platform on Ubuntu (friendlydrupal.com)</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-238.html?destination=node%2F913%23comment-form">Login</a> or <a href="../../../../../user/register/index-238.html?destination=node%2F913%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-238.html?destination=node%2F913%23comment-form">Login</a> or <a href="../../../../../user/register/index-238.html?destination=node%2F913%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-183" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../183/index.html">Nov 2010 - Installing 0.4-beta1</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> 23 November 2010<br />
<strong>Presenter(s):</strong> mig5</p>
<p><a href="http://greenbeedigital.com.au/aegir_videos/installing_aegir_0_4_beta_1.mp4" title="http://greenbeedigital.com.au/aegir_videos/installing_aegir_0_4_beta_1.mp4">http://greenbeedigital.com.au/aegir_videos/installing_aegir_0_4_beta_1.mp4</a> (110MB)</p>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-239.html?destination=node%2F183%23comment-form">Login</a> or <a href="../../../../../user/register/index-239.html?destination=node%2F183%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-239.html?destination=node%2F183%23comment-form">Login</a> or <a href="../../../../../user/register/index-239.html?destination=node%2F183%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-94" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../94/index.html">Nov 2010 - Upgrading Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_2 first last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p><strong>Date:</strong> 7 November 2010<br />
<strong>Presenter(s):</strong> mig5</p>
<p><a href="http://greenbeedigital.com.au/aegir_videos/upgrading_aegir.mp4" title="http://greenbeedigital.com.au/aegir_videos/upgrading_aegir.mp4">http://greenbeedigital.com.au/aegir_videos/upgrading_aegir.mp4</a> (98MB)</p>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-240.html?destination=node%2F94%23comment-form">Login</a> or <a href="../../../../../user/register/index-240.html?destination=node%2F94%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-240.html?destination=node%2F94%23comment-form">Login</a> or <a href="../../../../../user/register/index-240.html?destination=node%2F94%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-49" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../49/index.html">Drupaldojo - Introduction to the Aegir Hosting System</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> May 2010<br />
<strong>Presenter(s):</strong> Miguel Jacq</p>
<div align="center">
<embed src="http://blip.tv/play/AYHci2AC" type="application/x-shockwave-flash" width="640" height="480" allowscriptaccess="always" allowfullscreen="true"></embed>
</div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-241.html?destination=node%2F49%23comment-form">Login</a> or <a href="../../../../../user/register/index-241.html?destination=node%2F49%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-241.html?destination=node%2F49%23comment-form">Login</a> or <a href="../../../../../user/register/index-241.html?destination=node%2F49%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-47" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../47/index.html">Building Drupal applications with Drush Make, provisioning sites with Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> November 22, 2009<br />
<strong>Presenter(s):</strong> mig5</p>
<p><a href="http://greenbeedigital.com.au/aegir_videos/building_drupal_apps_drush_make_aegir.mp4" title="http://greenbeedigital.com.au/aegir_videos/building_drupal_apps_drush_make_aegir.mp4">http://greenbeedigital.com.au/aegir_videos/building_drupal_apps_drush_ma...</a> (88MB)</p>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-242.html?destination=node%2F47%23comment-form">Login</a> or <a href="../../../../../user/register/index-242.html?destination=node%2F47%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-242.html?destination=node%2F47%23comment-form">Login</a> or <a href="../../../../../user/register/index-242.html?destination=node%2F47%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-53" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../53/index.html">Deprecated: Aegir from Scratch - Installing 0.2 RC1</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> May 20, 2009<br />
<strong>Presenter(s):</strong> Adrian Rossouw</p>
<p>Warning: this screencast is out of date, but may contain useful information.</p>
<p>We recommend you install the latest release of Aegir at the time you are reading this.</p>
<div align="center">
<object width="400" height="300"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id=4870743&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=1&amp;color=&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" /><embed src="http://vimeo.com/moogaloop.swf?clip_id=4870743&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=1&amp;color=&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="400" height="300"></embed></object><p><a href="http://vimeo.com/4870743">Installing Aegir 0.2 RC 1</a> from <a href="http://vimeo.com/developmentseed">Development Seed</a> on <a href="http://vimeo.com/">Vimeo</a>.</p>
</div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-243.html?destination=node%2F53%23comment-form">Login</a> or <a href="../../../../../user/register/index-243.html?destination=node%2F53%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-243.html?destination=node%2F53%23comment-form">Login</a> or <a href="../../../../../user/register/index-243.html?destination=node%2F53%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-54" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../54/index.html">Deprecated: Applying Drupal Security updates with Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> September 16, 2009<br />
<strong>Presenter(s):</strong> Eric Gundersen, Jeff Miccolis</p>
<p>Warning: this screencast is out of date, but may contain useful information.</p>
<p>We recommend you install the latest release of Aegir at the time you are reading this.</p>
<div align="center">
<object width="400" height="250"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id=6618252&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=1&amp;color=&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" /><embed src="http://vimeo.com/moogaloop.swf?clip_id=6618252&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=1&amp;color=&amp;fullscreen=1&amp;autoplay=0&amp;loop=0" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="400" height="250"></embed></object><p><a href="http://vimeo.com/6618252">Applying Drupal Security Updates with Aegir</a> from <a href="http://vimeo.com/developmentseed">Development Seed</a> on <a href="http://vimeo.com/">Vimeo</a>.</p>
</div>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-244.html?destination=node%2F54%23comment-form">Login</a> or <a href="../../../../../user/register/index-244.html?destination=node%2F54%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-244.html?destination=node%2F54%23comment-form">Login</a> or <a href="../../../../../user/register/index-244.html?destination=node%2F54%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-46" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../46/index.html">Deprecated: Installing Aegir 0.4 alpha5</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><strong>Date:</strong> Feb 1, 2010<br />
<strong>Presenter(s):</strong> mig5</p>
<p>Warning: this screencast is out of date, but may contain useful information.</p>
<p>We recommend you install the latest release of Aegir at the time you are reading this.</p>
<p><a href="http://greenbeedigital.com.au/aegir_videos/installing_aegir_0_1_alpha5.mp4" title="http://greenbeedigital.com.au/aegir_videos/installing_aegir_0_1_alpha5.mp4">http://greenbeedigital.com.au/aegir_videos/installing_aegir_0_1_alpha5.mp4</a> (199MB)</p>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-245.html?destination=node%2F46%23comment-form">Login</a> or <a href="../../../../../user/register/index-245.html?destination=node%2F46%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-245.html?destination=node%2F46%23comment-form">Login</a> or <a href="../../../../../user/register/index-245.html?destination=node%2F46%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-472" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../472/index.html">Aegir Images</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>The Aegir logo and related images have been given to the Aegir community by Development Seed in the early stages of development. The full source is available <a href="http://drupalcode.org/project/hostmaster.git">in the hostmaster repository</a>, in the <a href="http://drupalcode.org/project/hostmaster.git/tree/HEAD:/themes/eldir/images-source">images source directory of the eldir theme</a>.</p>

<p>Feel free to upload other high-resolution images of Aegir-related materials.</p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-svg"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/aegir_logo/index.svg">aegir_logo.svg</a></td><td class="size">70.66 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-246.html?destination=node%2F472%23comment-form">Login</a> or <a href="../../../../../user/register/index-246.html?destination=node%2F472%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-246.html?destination=node%2F472%23comment-form">Login</a> or <a href="../../../../../user/register/index-246.html?destination=node%2F472%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-727" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../presentation/article-archive/index.html">Article archive</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This area contains archives of articles related to Aegir.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-247.html?destination=node%2F727%23comment-form">Login</a> or <a href="../../../../../user/register/index-247.html?destination=node%2F727%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-247.html?destination=node%2F727%23comment-form">Login</a> or <a href="../../../../../user/register/index-247.html?destination=node%2F727%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-732" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../article-archive/aegir-drupalcon-san-francisco/index.html">Aegir at DrupalCon San Francisco</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This article first appeared on mig5's blog on 27th April, 2010</p>
<p>The <a href="http://groups.drupal.org/aegir-hosting-system">Aegir project</a> has seen vigorous development leading up to, during and after <a href="http://sf2010.drupal.org/">DrupalCon San Francisco April 2010</a>.</p>
<p>Unfortunately due to the <a href="http://en.wikipedia.org/wiki/2010_eruptions_of_Eyjafjallajkull">volcano ash from Iceland</a>, lead developer and Aegir author <a href="http://drupal.org/user/1337">Adrian Rossouw</a> got marooned in Frankfurt and was unable to join the rest of the team at Moscone. </p>
<p>When <a href="http://groups.drupal.org/aegir/0.3">Aegir 0.3 was released</a> and I joined the development team, Adrian mentioned in the release notes that the <a href="http://en.wikipedia.org/wiki/Bus_factor">'bus factor'</a> threatening to affect the progress of the project was reduced thanks to have extra hands on deck. In a way, although it was a devastating disappointment that he was unable to make it to DrupalCon, the opportunity arose to test what we renamed to be 'the volcano factor' and I think we did well under the circumstances.</p>
<p>On the initial Code Sprint Sunday, <a href="http://drupal.org/user/1274">Antoine</a> and I sat down and ripped apart the Hostmaster install profile wizard. After a good 5 or 6 hours, Aegir became capable of being installed from the commandline directly, with no need to progress through the traditional browser-based wizard. Significantly, this install profile task wizard has always been one of the most common areas that new users struggle with when installing Aegir, as steps can be missed or misunderstood very easily.</p>
<p>Now with the new install script (which is currently compatible with our dev-services branch in git), one need only install the usual dependencies (such as Apache, MySQL etc) and then execute the install.sh script, which takes care of the rest. Seconds later, a Login URL is given to you and you can immediately access the Aegir frontend!</p>
<p>Amongst the sessions on Monday, we also participated in an informal Aegir BOF session that was organised by <a href="http://drupal.org/user/164217">Brian Wood</a>, much to our delight. In this session, we gave a brief overview on where Aegir was headed, but focused on hearing from you guys, our user base, on how you're using Aegir and what issues / benefits you've experienced that we could take back with us.</p>
<div align="center">
<a href="http://www.flickr.com/photos/mig5/4537399450/" title="IMG_0680 by mig5ter, on Flickr"><img src="http://farm5.static.flickr.com/4041/4537399450_3a322109cf.jpg" width="500" height="375" alt="IMG_0680" /></a>
</div>
<p>That evening after the BOF, we organised an informal Aegir dinner to carry on further discussions. I had a very nice vegetarian Pad Thai, and later we made our way to the Lullabot and official DrupalCon parties :)</p>
<p><a href="http://www.flickr.com/photos/mgifford/4539294635/" title="Interview with Koumbit by m.gifford, on Flickr"><img src="http://farm3.static.flickr.com/2717/4539294635_079293e5a3_m.jpg" alt="Interview with Koumbit" style="float: right; margin: 2px" /></a> As we approached Wednesday, the Aegir team knuckled down and actually got around to preparing an agenda for our session that got voted in (thanks!). For myself this also meant preparing a local dev demo environment to demonstrate the latest features in Aegir, as well as testing all the demonstrations we'd exhibit and make sure they actually worked :)</p>
<p>Somewhere along the line, both Antoine and myself were interviewed by Lullabot for their famous <a href="http://www.lullabot.com/podcast/drupal-voices">Drupal Voices podcast series</a>, where we discussed Aegir, best practices for dev/stage/live workflows, <a href="http://drupal.org/project/drush">Drush</a> and <a href="http://drupal.org/project/drush_make">Drush Make</a>. Expect to hear these interviews in the coming months as they trickle into the Drupalsphere.</p>
<p>For good measure, Adrian discovered why our once-working Drupal7 site provisioning was broken (as we expected, it was due to changes upstream in d7 core) and fixed the issue. At that point we <a href="http://groups.drupal.org/node/63228">released 0.4 alpha7</a>, just in time prior to our session :)</p>
<p>On Wednesday 21st April at 16:15pm, we presented the <a href="http://sf2010.drupal.org/conference/sessions/aegir-hosting-system-one-drupal-rule-them-all">"Aegir - One Drupal to Rule Them All" session</a>, covering:</p>
<p>1) a basic introduction into the project<br />
2) features/functions of aegir<br />
3) what's changed since Paris<br />
4) development/security practices<br />
5) what's coming<br />
6) some Q/A time</p>
<div align="center">
<a href="http://www.flickr.com/photos/mig5/4542872610/" title="IMG_0695 by mig5ter, on Flickr"><img src="http://farm3.static.flickr.com/2683/4542872610_bef3fe1375.jpg" width="500" height="375" alt="IMG_0695" /></a>
</div>
<p>We felt the session was a success and it was great to see so many people show up and ask a lot of good questions.</p>
<p>You can watch the full session here or download/watch on <a href="http://www.archive.org/details/AegirHostingSystem-OneDrupalToRuleThemAll">archive.org</a></p>
<p><embed type="application/x-shockwave-flash" width="640" 	height="504" 	allowfullscreen="true" 	allowscriptaccess="always" 	src="http://www.archive.org/flow/flowplayer.commercial-3.0.5.swf" 	w3c="true" 	flashvars='config={"key":"#$b6eb72a0f2f1e29f3d4","playlist":[{"url":"http://www.archive.org/download/AegirHostingSystem-OneDrupalToRuleThemAll/format=Thumbnail?.jpg","autoPlay":true,"scaling":"fit"},{"url":"http://www.archive.org/download/AegirHostingSystem-OneDrupalToRuleThemAll/wed_1500_308_2_512kb.mp4","autoPlay":false,"accelerated":true,"scaling":"fit","provider":"h264streaming"}],"clip":{"autoPlay":false,"accelerated":true,"scaling":"fit","provider":"h264streaming"},"canvas":{"backgroundColor":"0x000000","backgroundGradient":"none"},"plugins":{"audio":{"url":"http://www.archive.org/flow/flowplayer.audio-3.0.3-dev.swf"},"controls":{"playlist":false,"fullscreen":true,"gloss":"high","backgroundColor":"0x000000","backgroundGradient":"medium","sliderColor":"0x777777","progressColor":"0x777777","timeColor":"0xeeeeee","durationColor":"0x01DAFF","buttonColor":"0x333333","buttonOverColor":"0x505050"},"h264streaming":{"url":"http://www.archive.org/flow/flowplayer.h264streaming-3.0.5.swf"}},"contextMenu":[{"View+AegirHostingSystem-OneDrupalToRuleThemAll+at+archive.org":"function()"},"-","Flowplayer 3.0.5"]}'> </embed></p>
<p>After the conference, we made it to the Thursday code sprint at San Francisco State University, and nailed a few more bugs / features! What was also discovered was that one can upgrade a vanilla Drupal 6.16 site to the latest Drupal 7 using our Migrate feature in Aegir, now that an upgrade path exists and drush updatedb succeeds. Wow! </p>
<div align="center">
<a href="http://www.flickr.com/photos/ceardach/4551245490/" title="Drupal Code Sprint by muir.ceardach, on Flickr"><img src="http://farm5.static.flickr.com/4045/4551245490_1ea8d5fac3.jpg" width="500" height="333" alt="Drupal Code Sprint" /></a>
</div>
<p>DrupalCon SF 2010 is over but progress continues. All the bulk of our hard work at the moment is within the "dev-services" branches of the <a href="http://git.aegirproject.org/?p=provision.git;a=shortlog;h=refs/heads/dev-services">provision</a> and <a href="http://git.aegirproject.org/?p=hostmaster.git;a=shortlog;h=refs/heads/dev-services">hostmaster</a> git repositories on git.aegirproject.org, where our new object-oriented refactoring and introduction of the abstracted 'server' concept and service-based API is paving the way for true multi-server support.. not far away now! </p>
<p>You're welcome to checkout these branches and start playing with it and fix some issues, or even just to test out the new command-line-only installation process. However, things are changing all the time, so it's volatile and there may be things that are very broken. Definitely don't use the dev-services branches in production!</p>
<p>Thanks to all who made it to DrupalCon or watched from a distance, attended or are listening/watching our session, came and introduced themselves and/or had a beer with us at some point, or are simply just using Aegir and loving it :) </p>
<p>I've some more exciting things to discuss in Aegirworld, but those will have to wait :)</p>
<p>Hope to see you at the next DrupalCon!</p>
<p><strong>Edit</strong>: I forgot to also give thanks to two other groups: </p>
<p>1) the organising committee for DrupalCon itself - awesome job! </p>
<p>2) and also the guys at Koumbit for sending along a great team including Antoine, and equipping them with great Aegir 'One Drupal to Rule them All' stickers :)</p>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-248.html?destination=node%2F732%23comment-form">Login</a> or <a href="../../../../../user/register/index-248.html?destination=node%2F732%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-248.html?destination=node%2F732%23comment-form">Login</a> or <a href="../../../../../user/register/index-248.html?destination=node%2F732%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-729" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../article-archive/introduction-aegir-hosting-system/index.html">An introduction to the Aegir Hosting system</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This article first appeared on mig5's blog on 13th October, 2009</p>
<p>Tonight at 18:30pm GMT+11 I'll be giving a talk/presentation on 'An Introduction to the Aegir Hosting system' at the <a href="http://groups.drupal.org/node/28560">regular monthly Melbourne Drupal meet @ the Emspace offices</a>.</p>
<p>My notes during the last week kind of took on a life of their own, and so in anticipation of the talk, I thought I'd publish them here, despite the somewhat casual tone, for those who can't make it and want a somewhat (perhaps overly, for an Introduction!) detailed overview of the Aegir system and what it does.</p>
<p>I believe the session will also be recorded, so we should see the video pop up on blip.tv or somewhere in days to come. <strong>Update 20/10/09: The video is available here http://blip.tv/file/2741212</strong></p>
<p>A variation of these notes may end up being part of the documentation on <a href="http://groups.drupal.org/aegir">g.d.o</a> too.</p>
<p><strong>Update</strong>: Here's a PDF of these notes <a href="http://ln-s.net/4Nbk" title="http://ln-s.net/4Nbk">http://ln-s.net/4Nbk</a></p>
<p>---------------------------------------------------------------------------</p>
<h1>An introduction to the Aegir Hosting system</h1>
<h1>Contents</h1>
<ol>
<li><a href="#whatisaegir">What is gir?</a></li>
<li><a href="#briefhistory">Brief history of gir</a></li>
<li><a href="#anatomy">Dissecting gods: the anatomy of gir</a><br />
<ul type="disc">
<li><a href="#frontend">Frontend</a></li>
<li><a href="#backend">Backend</a></li>
<li><a href="#glue">How Hosting and Provision work together</a></li>
</ul>
</li>
<li><a href="#features">Features and terminology</a>
<ul>
<li><a href="#node">Everything is a node</a></li>
<li><a href="#platforms&amp;sites">Platforms &amp; Sites</a></li>
<li><a href="#tasks">Task queue</a></li>
<li><a href="#drush">Drush, hooks, rollback</a></li>
<li><a href="#install">Installing sites</a></li>
<li><a href="#aliases">Site Aliases</a></li>
<li><a href="#import">Importing sites</a></li>
<li><a href="#verify">Verify, Packages (schemas)</a></li>
<li><a href="#disable">Site Disable/Enable</a></li>
<li><a href="#delete">Delete</a></li>
<li><a href="#migrate">Migrate</a></li>
<li><a href="#backup">Backup</a></li>
<li><a href="#restore">Restore</a></li>
<li><a href="#deploy">Deploy</a></li>
<li><a href="#clone">Clone</a></li>
<li><a href="#batch">Batch Migrate</a></li>
<li><a href="#cron">Cron Queue</a></li>
<li><a href="#clients">Clients, roles, permissions</a></li>
<li><a href="#ports">Ports &amp; SSL</a></li>
</ul>
</li>
<li><a href="#whatitisnt">What Aegir doesn't do</a></li>
<li><a href="#roadmap">Roadmap - where are we going</a></li>
<li><a href="#questions">Questions</a></li>
<li><a href="#links">Links</a></li>
</ol>
<h2><a name="whatisaegir">What is gir?</a></h2>
<p><img src="../../../../../sites/community.aegirproject.org/files/aegir/index.png" style="float: right; padding:1px" />gir is a set of Drupal components that when used together, help you manage other Drupal sites.<br />
It does this by providing you with a simple Drupal based hosting frontend or control panel that allows you to perform actions against your network of Drupal sites. Some of these actions or 'tasks' include Installing new sites, Verifying the integrity of sites, backing up and restore, management of 'Platforms' (which are copies of Core or distributions such as OpenAtrium), and migration of your sites between these platforms. We'll cover the relationship between sites and platforms in a moment.</p>
<p>To gir, a site is just a node like any other node in a Drupal site. Depending on the node type, be it Site or Platform etc, determines what tasks like these can be performed.</p>
<p>Taken from the page on groups.drupal.org: In Norse mythology, gir was the god of the oceans and if Drupal is a drop of water, gir is the deity of large bodies of water.</p>
<h2><a name="briefhistory">Brief history of gir</a></h2>
<p>gir used to be called Hostmaster, or Hostmaster2, and was authored by Adrian Rossouw who remains the lead developer of the project, back when he worked at Bryght. I believe Bryght pioneered the idea of a system like this to manage large deployments of sites for their clients, and Hostmaster was the result of that work and was subject to much growth and enhancements over a period of 4 years before it ever became 'Aegir' as it is now. Adrian's also known for other Drupal accomplishments such as the Forms API, the PHPTemplate theme engine, and the install profile system. </p>
<p>Since then, Bryght got acquired by Raincity Studios, and Adrian's now working for Development Seed.. thus a large influence on the development/direction of gir is naturally coming from that camp as they provide Adrian with the time and the means to work on improving the product.</p>
<p>Joining gir as part of the core development team is Antoine Beaupr, aka 'anarcat', who's from the Koumbit worker's collective in Montreal and been working on this for a long time too, and myself.</p>
<p>For this introductory talk, I'm going to focus on the anatomy of gir and how the components fit together and with Drupal. Then I'll provide a brief overview of the main features of gir and what you'd use it for. </p>
<p>After the talk, to avoid taking up too much time, I'll be happy to run through some more in depth, under-the-hood areas of gir such as the Provision backend, the database schema etc, and answer any of the more technical questions you might have.</p>
<h2><a name="anatomy">Dissecting gods: the anatomy of gir</a></h2>
<p>gir is not a 'module' nor yet a 'distribution' for Drupal, but currently a collection of 'components' as I like to call them, that work together to do the whole job.</p>
<p>In order to best understand how it all works, we can define gir as made up of two parts: the frontend, and the backend. </p>
<h3><a name="frontend">Frontend</a></h3>
<p>The frontend is actually a Drupal site that makes use of a module called 'Hosting', which does all the job of the frontend: basically it provides the mechanisms to add / remove nodes like any other Drupal site, allowing you to point and click on tasks like Install, Backup and so forth. It also provides a nice UI to manage your sites in general, and to review tasks that have completed, or in progress, or failed for whatever reason. Most screenshots you've probably seen of gir, are using the Eldir theme developed by Young Hahn at Development Seed, which is made specifically for gir, though it is optional and gir will function without it.</p>
<div align="center"><img src="../../../../../files/front/index.png" /></div>
<h3><a name="backend">Backend</a></h3>
<p>The backend is made up of a 'drush module' or extension called Provision, which does pretty much its namesake: it works with Drush very heavily to handle all of the tasks such as installing new drupal sites, importing existing ones, installing platforms, verifying everything, instigating backups and restores, and so on. So it's actually doing the heavy lifting here, actually executing the tasks you assign to the system.</p>
<p>Provision is invoked through the use of drush commands, and thus these commands can also generally be executed from the command line to perform the functions that make gir so important. In fact it's very much by design that all the magic happens in the backend, because it allows us to have one gir frontend that can manage multiple backends, or in otherwords, multiple webservers and database servers. Though these are experimental features at the moment.</p>
<h3><a name="glue">How Hosting and Provision work together</a></h3>
<p>The glue that binds what Hosting lets you kick off tasks for, and how Provision learns of those tasks and executes them, is by way of adding the tasks to a Task queue in the database, which is viewable in the frontend.</p>
<p>On your server, we then have a dedicated 'aegir' user, whose crontab has an entry to regularly look and 'dispatch' any queues containing tasks that are pending, which are then forked off into drush provision commands in the background.</p>
<div align="center"><img src="../../../../../files/crontab/index.png" /></div>
<p>So the idea is that all this happens behind the scenes for you as the manager of the aegir system: the frontend exists for you to queue up all these sorts of actions, and let gir worry about actually doing them in the backend.</p>
<p>Along with Provision, Hosting, and Eldir, there is also another component which is an Install Profile called 'Hostmaster'. The Hostmaster Install profile is, like all install profiles, really only executed once, when you are setting up gir for the first time. And it does the work of getting information from you, or telling you to set things up on a system level (like directories, permissions etc), asking what Features you'd like to enable, and kicking off the initial verification of the system, setting up the crontab entry etc.</p>
<p>The home directory of Aegir</p>
<div align="center"><img src="../../../../../files/fs1/index.png" /></div>
<p>The backend Provision module</p>
<div align="center"><img src="../../../../../files/fs3/index.png" /></div>
<p>The Hostmaster profile and the Hosting frontend module contained therein</p>
<div align="center"><img src="../../../../../files/fs4/index.png" /></div>
<h2><a name="features">The Features and terminology of gir</a></h2>
<p>So before I start running a few examples of what gir can do, I thought I'd bore you some more with the terminology and features that gir has, as there's often some confusion over what some of the terms mean.</p>
<p>Some features in gir are enabled by default, some cannot be turned off, some are optional and can be enabled at any time, and some are experimental and may have unexpected results in production environments.</p>
<div align="center"><img src="../../../../../files/features/index.png" /></div>
<p><strong><a name="node">Everything is a node</a></strong></p>
<p>In keeping with strong Drupal tradition, and out of pure sense, everything is a node in gir. This includes gir's information on your web server, database server, platforms, sites, right down to tasks, and information about modules, themes, and install profiles.</p>
<div align="center"><img src="../../../../../files/create_content/index.png" /></div>
<p><strong><a name="platforms&amp;sites">Platforms and Sites</a></strong></p>
<p>First of all, gir's very much designed to work within Drupal's multisite structure. Often one of the biggest hurdles users experience when trying to learn gir, can be traced back to the fact that few of them are actually making use of <a href="http://drupal.org/getting-started/6/install/multi-site">Drupal's multisite design</a>, and instead tend to use one core per site. While gir will work that way just fine, its designed to make use of the proper multisite logic introduced way back in I think Drupal 4.5 or maybe d5 - in fact, it's what makes it so powerful and useful - it handles multisite for you, and it handles it properly.</p>
<p>For whatever reason, multisite is often not used, and so users are often confused about what constitutes a 'Platform' in gir, so we'll cover that now.</p>
<p>Basically the first thing you do after installing gir, is go and set up what we call a 'Platform', which is the code base within which you'll create a Site to sit on.</p>
<p>'Platform' translates directly to a copy of Drupal core, like Drupal 6.14 or 5.20, but it isn't limited to Drupal core. It could very well be a 'distribution' or custom Drupal core like OpenAtrium, Pressflow, OpenPublish, and so on. So it's important to recognise that a Platform is actually very simple to understand conceptually once you learn to exchange the term for a 'Drupal core' or thereabouts, and I suspect it's often expected to be more complicated than it really is. </p>
<p>So just per a standard multisite system in Drupal, sites are installed into the sites/ subdirectory of that Platform. </p>
<div align="center"><img src="../../../../../files/create_platform/index.png" /></div>
<p>So a Platform and a Site are two examples of what are simply node types in the database, just like any regular Drupal site. This is what makes gir so easy, because to create a new Site, you can literally node/add/site or Create Content > Site and fill out the required fields, submit the form, and gir does the rest.</p>
<p>So you start to form a picture in your mind of a pyramid structure: In Drupal multisite, a Core or a Platform manages many sites. gir is a level above that, in that it can manage many Platforms. So gir becomes very powerful, because through inheritance of managing many Cores or Platforms, it exponentially can manage many sites, be they Drupal 5, Drupal 6, Pressflow, or Openatrium sites. And so on.</p>
<p><strong><a name="tasks">The task queue</a></strong></p>
<div align="center"><img src="../../../../../files/queue_block/index.png" style="float: right; padding: 2px" /></div>
<p>When you add a new Platform or site, you can see that these items are immediately dropped into the task queue which you can see in this block in the sidebar. As the cron comes around once per minute, it'll pick these tasks up and dispatch them to the backend to be executed. </p>
<p>Depending on the return from Drush and Provision as they execute these tasks, the status of this task in the queue will change from Queued to either Failed or Success. In both cases, the full drush log output is given in the task node. </p>
<p>On a failed task, you can review the problems and if you feel you've fixed the issue, re-schedule the task to re-enter the queue and be executed again.</p>
<p><strong><a name="drush">Drush and rolling back changes</a></strong></p>
<p>Because Drush has a rich API that provides validate_, pre_, post_ and rollback hooks, we can safely revert any changes that were made if a task fails, through a rollback, or perform other functionality before or after the fact. This means that although gir is taking a lot of the heavy lifting out of your hands with this stuff, it's also very careful with your data. It doesn't want to destroy your sites, it wants to nurture them, and it'll undo or refuse to perform any actions it thinks might be unsafe.</p>
<p><strong><a name="install">Installing Sites</a></strong></p>
<p>In the case of installing a site, support is written for Drupal 5 and Drupal 6 platforms. There is Drupal 7 support in there that once worked, but the nature of Drupal 7's shifting meant that support for d7 fell out of Drush, and thus it currently doesn't work in gir, though I think a Drupal 7 platform *will* verify ok.</p>
<p>Installing sites works because Provision basically knows how to create a mySQL database and credentials automatically for the site and apply these settings, along with locale, timezone etc, and any other settings you normally enter manually during a Drupal install, automatically into the installer. It doesn't matter what installer it is: it can be either the standard Drupal default installer, or a custom install profile you've written, or other install profiles such as the atrium_installer profile that makes OpenAtrium what it is.</p>
<div align="center"><img src="../../../../../files/create_site/index.png" /></div>
<p>Install also goes through and generates the Apache vhost configuration file for the site and restarts Apache, so you don't need to do any of this.</p>
<p>On successful installation of a site, the onetime login reset link will be e-mailed to the 'Client' (we'll go through Clients later), and the login url will also be logged to the task output for quick reference. It's normally the task output that I'll go to to retrieve the login url. So immediately you can login to your brand new drupal site, and you only clicked a couple of buttons.</p>
<p><strong><a name="aliases">Site Aliases</a></strong></p>
<p>gir supports site 'aliases', which translate directly to the ServerAlias parameter in Apache vhost files. One can add URL aliases that will serve a site called by another name. A classic case is installing a site with a URL of 'www.example.com' with an alias of 'example.com' so that example.com also serves the site (providing a RR is set in DNS of course).</p>
<p>Redirection is also supported as an optional feature to Aliases, allowing permanent redirects of the aliases to the main site URL by way of mod_rewrite. All this is configurable in the site node form, though Site Aliasing is an optional feature that must be turned on first.</p>
<p><strong><a name="import">Importing sites</a></strong></p>
<p>It is possible to import existing sites that you're hosting on a server, into your new gir system. </p>
<p>Since most people seem to be using one core per site and not using multisite, it's just a matter of moving the copy of core into /var/aegir/ , renaming sites/greenbeedigital.com.au to sites/$yoursite, and then adding a Platform in the gir frontend. Upon a successful Verify of the new Platform, any detected sites living in the sites/ folder will have an Import task spawned for them, and gir will hence 'learn' of these sites and their packages.</p>
<div align="center"><img src="../../../../../files/import/index.png" /></div>
<p>Obviously it is not ideal to have one platform per site, and the whole point of gir is to support multiple sites on one Platform. So once this site is imported, you will likely want to Migrate the site to another platform, which we'll cover in a moment.</p>
<p><strong><a name="verify">Verify, and Packages</a></strong><br />
Along with Install, other tasks exist in gir. One that is often run is Verify, which just checks that the filesystem of the site or platform looks sane, permissions all correctly set, confirms the aegir superuser can create new databases, and so on. it also refreshes the database with knowledge of what modules, themes or profiles (altogether referred to as Packages in gir) exist on a platform of site. It keeps a running state of what packages are installed, so that if you try to Migrate a site, it knows whether the target platform can support these modules or not.</p>
<div align="center"><img src="../../../../../files/packages/index.png" /></div>
<p>If you edit a site or platform's node - for instance if you are adding a URL alias for an existing site - on node_save, the item will be re-added to the task queue as a Verify task. Such functions serve to handle such cases like an alias addition, where the site's vhost needs to be edited and Apache restarted for the change to take effect.</p>
<p><strong><a name="disable">Site Disable / Enable</a></strong></p>
<p>If a site is installed and enabled, one can Disable the site, which effectively puts a redirect on the apache vhost for that site to redirect to a page saying the site's been disabled. It also goes and backs up the site.</p>
<p>If a site is Disabled, it can then also be re-enabled, which essentially unsets the redirection in the vhost so that the site starts working again.</p>
<p><strong><a name="delete">Site Delete</a></strong></p>
<p>After a site is in a Disabled state, you can Delete a site, which will go through and (again) take a backup first, then goes and removes the actual site data from the server, removes the knowledge of the site from the aegir database, drops the site's own database, and removes the vhost config. As mentioned earlier, if any of these steps go downhill, the procedure will be reversed as best as it can.</p>
<p><strong><a name="migrate">Site Migrate</a></strong></p>
<p>I mentioned Migrate earlier, and this is really in my opinion, the biggest feature of gir and what makes it so worth using. Migrate essentially is another task that tells Provision to *move* the site from one platform to another. The most obvious case of where you'd want to do this is when a new Drupal core release comes out, like recently with 6.14. </p>
<p>All I had to do is download Drupal 6.14 to the server, add it as a platform in gir, and then use Migrate to move my Drupal 6.13 sites to Drupal 6.14.</p>
<div align="center"><img src="../../../../../files/migrate1/index.png" /></div>
<p>In the process of this, it runs the Drupal updates and hence performs the hook_updates, schema changes etc that one would normally do by hand in an upgrade.</p>
<p>What makes quite significant is that it's by design that you can take a Drupal 5 site, and use Migrate to upgrade it to Drupal 6. It's built right into gir to handle that upgrade automatically for you.</p>
<p>Migrate basically takes a backup of the site, and then it uses a special 'deploy' command to 'deploy' this instance of the site to the target platform. It then removes the site from the existing platform.</p>
<p>I mentioned earlier the concept of a 'Package' in gir, which is any module or theme or install profile that gir finds on a platform or a site. With its knowledge of the package, its schema version and what 'instance' in which this package is being used, it can analyse a site that you want to migrate, compare the packages in use with what can be used on the target platform, and present a report on whether the site can be migrated or not.</p>
<p>In other words, it will intelligently calculate that you cannot migrate a Drupal 6 site to a Drupal 5 site, because the schema versions of Drupal 5 packages are incompatible with those installed on the Drupal 6 site. However obviously, the reverse ought to work.</p>
<div align="center"><img src="../../../../../files/migrate2/index.png" /></div>
<p>And yes, it backs up and will rollback if unsuccessful. :)</p>
<p><strong><a name="backup">Site Backup</a></strong></p>
<p>So I've mentioned Backup a few times, so I should cover it: essentially the Backup task can be executed against a Site. It does a mysqldump of the site into a file in the site's directory, and then it tars up the whole site's directory and drops the tarball into a backups directory that lives outside the document root of any platform with a timestamp.</p>
<div align="center"><img src="../../../../../files/backup/index.png" /></div>
<p><strong><a name="restore">Site Restore</a></strong></p>
<p>Using the Restore task, you can take any of these backups, and with a single click, restore your entire site, codebase and database all together, to a previous state from one of the tarballs.</p>
<div align="center"><img src="../../../../../files/restore/index.png" /></div>
<p><strong><a name="deploy">Deploy</a></strong></p>
<p>The 'Deploy' task I mentioned earlier isn't shown in the frontend. It's a backend command that is used in Migrate and Clone tasks. Clone is a new feature in our early 0.4 alpha releases that does what you probably are already thinking it does: it generates a snapshot of a site (actually using the Backup task above, we reuse as much code as possible) and uses Deploy to deploy that copy of a site with a new URL to any platform, be it the current platform or a separate platform. </p>
<p><strong><a name="clone">Site Clone</a></strong></p>
<p>So you can use Clone to clone entire copies of your site to a new URL, which could be useful for testing, or if you have a sort of 'template' site with common modules and themes, structures or common nodes etc. You could consider it a poor man's install profile.</p>
<div align="center"><img src="../../../../../files/clone/index.png" /></div>
<p><strong><a name="batch">Batch Migrate</a></strong></p>
<p>To date, you could only Migrate a site on a per-site basis. We've recently introduced Batch migrate, which means you can migrate *every* site that currently exists on a platform, and move them all to a new platform in one hit. Again, especially useful when you have a lot of sites on a Drupal core that has suddenly become vulnerable with a new security release, and you need to move them all across to the new core as soon as you can. </p>
<div align="center"><img src="../../../../../files/batch_migrate_0/index.png" /></div>
<p>We know of gir being used to deploy and manage more than 2100 sites on one system, actually by another Australian, Dave Hall, who's up in Bendigo, and goes by the alias skwashd on Drupal.org and IRC. So features like Batch Migrate are especially significant.</p>
<div align="center"><img src="../../../../../files/batch_migrate_progress/index.png" /></div>
<p><strong><a name="cron">Cron Queue</a></strong></p>
<p>Since gir already has a task queue scheduler, it makes sense that it should be able to queue up enabled sites and run cron regularly on the sites themselves. So a Feature exists to do exactly that. Both the regularity of the Cron and the Task queues are configurable.</p>
<p><strong><a name="clients">Clients, roles, permissions</a></strong></p>
<div align="center"><img src="../../../../../files/roles/index.png" style="float: right; padding:1px" /></div>
<p>Another Feature and node type is that of the Client. A Client in gir is not a specific user in the typical Drupal sense, but more so a conceptual wrapper node that also translates directly to a role type. One then can create users and assign them to a 'Client' just like a role. Such users have the ability to login to the gir site and manage their own sites. In this way you can expose Aegir functionality to your clients and let them create their own sites or manage them (to a point).</p>
<p>Another role that gir sets up is the gir Account Manager: this is design as a non-technical role, likely a member of your own staff, who has the ability to set up and manage Clients in gir, but cannot perform any technical tasks or install sites etc.</p>
<p><strong><a name="ports">Ports and SSL</a></strong></p>
<p>A lot of work has been done in recent releases to implement multiple webserver Port support, along with SSL support which is not quite complete.</p>
<p>Currently one can create only one site URL on one port, but cannot create the same site URL on another port. There are cases where this will be required (such as port 80 and 443 for sites that need SSL as well), which is something I'm working at the moment in my development.</p>
<h2><a name="whatitisnt">What Aegir doesn't do</a></h2>
<ul>
<li>Aegir knows about your modules and their release schema etc, in order to handle migrations and that sort of thing. But it isn't a plugin manager, and you can't disable/enable modules of sites within gir.</li>
<li>To the dismay of at least 50% of users who install it, gir is not in fact a build management tool, it's a site management tool. But one can build Platforms using drush_make, which can pull from drupal.org repos as well as your own git/svn/cvs repository, and migrate your sites onto new 'release' builds. I'll spend some time on this after the talk for those who are interested.</li>
<li>It doesn't provision non-Drupal sites. But it may support static sites, Joomla? in the future..</li>
</ul>
<h2><a name="roadmap">Roadmap - where are we going?</a></h2>
<ul>
<li>Lots of UI refactoring will be done before 1.0 - modal dialog, more UI feedback to the user</li>
<li>Refactoring 'Servers' from being separate node types i.e webserver, dbserver etc, to a single 'Server' type that acts as a container for pluggable Services (http, mysql, postgresql, dns)</li>
<li>Develop a File service, one reason is for dealing with moving backups around.. 'spoke' model or 'mesh' model (see roadmap)</li>
<li>Just in this week gone, in the alpha2 release, we leverage 'Drush make', allowing Hostmaster to provision itself and migrate itself to new platforms (0.4 alpha2 and onwards likely)
</li><li>Third-party application hook-ins, i.e DNS, LDAP, Mail, Jabber.. with the idea of a control panel done right</li>
<li>Stronger quota management and the potential for e-commerce hook-ins, selling sites as a product</li>
<li>Move to PDO to support PostgreSQL, SQLite etc</li>
<li>The 1.0 release will see a 'frozen' Hostmaster API</li>
</ul>
<p>What else?</p>
<h2><a name="questions">Questions?</a></h2>
<h2><a name="links">Links</a></h2>
<ul>
<li><a href="http://groups.drupal.org/aegir">http://groups.drupal.org/aegir</a></li>
<li><a href="http://drupal.org/project/hostmaster">http://drupal.org/project/hostmaster</a></li>
<li><a href="http://drupal.org/project/hosting">http://drupal.org/project/hosting</a></li>
<li><a href="http://drupal.org/project/provision">http://drupal.org/project/provision</a></li>
<li><a href="http://drupal.org/project/eldir">http://drupal.org/project/eldir</a></li>
<li><a href="http://drupal.org/project/drush">http://drupal.org/project/drush</a></li>
<li><a href="http://drupal.org/project/drush_make">http://drupal.org/project/drush_make</a></li>
<li><a href="http://drupal.org/project/issues?projects=hosting%2Cprovision%2Chostmaster%2Celdir&amp;status=Open&amp;priorities=All&amp;categories=All">Aegir issue queues</a></li>
<li><a href="http://www.mig5.net/content/migrate-your-drupal-sites-new-drupal-core-security-release-gir">Migrate your Drupal sites to a new Drupal core security release with gir</a></li>
<li><a href="http://www.archive.org/details/AutomateyoursitemaintenancetroublesawaywiththeAegirhostingsystem">Automate your site maintenance troubles away with the Aegir hosting system</a> - presentation by Adrian and Antoine at DrupalCon Paris</li>
<li><a href="http://groups.drupal.org/node/29218">0.4 Roadmap</a></li>
</ul>
<div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/aegir/index.png" title="aegir.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/aegir/index.png" alt="aegir.png" title="aegir.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/aegir/index.png">aegir.png</a></td><td class="size">8.9 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/backup_0/index.png" title="backup.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/backup_0/index.png" alt="backup.png" title="backup.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/backup_0/index.png">backup.png</a></td><td class="size">33.57 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/batch_migrate_0/index.png" title="batch_migrate_0.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/batch_migrate_0/index.png" alt="batch_migrate_0.png" title="batch_migrate_0.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/batch_migrate_0/index.png">batch_migrate_0.png</a></td><td class="size">22.25 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/batch_migrate_progress/index.png" title="batch_migrate_progress.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/batch_migrate_progress/index.png" alt="batch_migrate_progress.png" title="batch_migrate_progress.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/batch_migrate_progress/index.png">batch_migrate_progress.png</a></td><td class="size">16.87 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/clone_0/index.png" title="clone.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/clone_0/index.png" alt="clone.png" title="clone.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/clone_0/index.png">clone.png</a></td><td class="size">51.99 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/create_content/index.png" title="create_content.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/create_content/index.png" alt="create_content.png" title="create_content.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/create_content/index.png">create_content.png</a></td><td class="size">11.24 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/create_platform/index.png" title="create_platform.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/create_platform/index.png" alt="create_platform.png" title="create_platform.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/create_platform/index.png">create_platform.png</a></td><td class="size">56.16 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/create_site/index.png" title="create_site.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/create_site/index.png" alt="create_site.png" title="create_site.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/create_site/index.png">create_site.png</a></td><td class="size">58.9 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/crontab/index.png" title="crontab.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/crontab/index.png" alt="crontab.png" title="crontab.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/crontab/index.png">crontab.png</a></td><td class="size">16.02 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/features/index.png" title="features.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/features/index.png" alt="features.png" title="features.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/features/index.png">features.png</a></td><td class="size">42.51 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/front/index.png" title="front.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/front/index.png" alt="front.png" title="front.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/front/index.png">front.png</a></td><td class="size">77.44 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/fs1/index.png" title="fs1.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/fs1/index.png" alt="fs1.png" title="fs1.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/fs1/index.png">fs1.png</a></td><td class="size">24.32 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/fs3/index.png" title="fs3.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/fs3/index.png" alt="fs3.png" title="fs3.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/fs3/index.png">fs3.png</a></td><td class="size">110.06 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/fs4/index.png" title="fs4.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/fs4/index.png" alt="fs4.png" title="fs4.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/fs4/index.png">fs4.png</a></td><td class="size">31.6 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/import/index.png" title="import.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/import/index.png" alt="import.png" title="import.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/import/index.png">import.png</a></td><td class="size">8.17 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/migrate1/index.png" title="migrate1.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/migrate1/index.png" alt="migrate1.png" title="migrate1.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/migrate1/index.png">migrate1.png</a></td><td class="size">51.76 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/migrate2/index.png" title="migrate2.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/migrate2/index.png" alt="migrate2.png" title="migrate2.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/migrate2/index.png">migrate2.png</a></td><td class="size">51.3 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/packages/index.png" title="packages.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/packages/index.png" alt="packages.png" title="packages.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/packages/index.png">packages.png</a></td><td class="size">52.02 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/queue_block/index.png" title="queue_block.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/queue_block/index.png" alt="queue_block.png" title="queue_block.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/queue_block/index.png">queue_block.png</a></td><td class="size">9.01 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/restore_0/index.png" title="restore.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/restore_0/index.png" alt="restore.png" title="restore.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/restore_0/index.png">restore.png</a></td><td class="size">43.78 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/roles/index.png" title="roles.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/roles/index.png" alt="roles.png" title="roles.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/roles/index.png">roles.png</a></td><td class="size">11.76 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-249.html?destination=node%2F729%23comment-form">Login</a> or <a href="../../../../../user/register/index-249.html?destination=node%2F729%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-249.html?destination=node%2F729%23comment-form">Login</a> or <a href="../../../../../user/register/index-249.html?destination=node%2F729%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-728" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../article-archive/drupal-deployments-workflows-version-control-drushmake-and-aegir/index.html">Drupal deployments &amp; workflows with version control, drush_make, and Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This article first appeared on mig5's blog on 28th October, 2009.</p>
<p>It's the million dollar question. And it's rarely been answered because it's so darn hard to do so. </p>
<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/confused/index.jpg" alt="How to solve the dev / staging / live workflow problem in Drupal?" /></div>
<p><br /><br />
Today I'd like to tell you how I do it with my favourite deployment weapons: <a href="http://groups.drupal.org/aegir">Aegir</a>, <a href="http://progit.org/book">Version control</a>, and <a href="http://drupal.org/project/drush_make">Drush Make</a>.<br />
<br /><br />
This'll be a rather low-level article designed for power-users. For a more high-level overview of the benefits described, check out the recent <a href="http://developmentseed.org/blog/2009/oct/27/drupal-distributions-drush-make">blog post by Development Seed</a>.<br />
<br /></p>
<h1>The Problem</h1>
<p>While many or most of us are using version control to keep track of our code and so on, a problem still persists, and it is twofold:</p>
<p>1) A lot of important data gets stored in the database in many database-driven content management systems, such as Drupal<br />
2) The transition of updates through version control to the site can be a royal PITA.</p>
<p>Recently 1) has pretty much been conquered thanks to <a href="http://drupal.org/project/features">Features</a>, which provides the ability to export the 'mechanics' of a Drupal site from the database into module-like code, which can then be version-controlled.</p>
<p><a href="http://drupal.org/user/1337">Adrian Rossouw</a> covered how Features can help solve the classic Dev / Stage / Production workflow problem in a <a href="http://developmentseed.org/blog/2009/jul/09/development-staging-production-workflow-problem-drupal">great blog post</a>. Features is one of those big guns we've all been waiting for. I mean, google 'development live workflow', and it's this post that is number 1.</p>
<p>With the rising popularity of the <a href="http://groups.drupal.org/aegir">Aegir hosting system</a>, and its ability to fire off sites like a proverbial machine gun, the other question is becoming even more important.</p>
<p>Because Aegir is this fantastic system for managing your sites, right? Of course, I would say that. But how can you keep a site under version control when Aegir's capable of making and manipulating sites almost on-the-fly with the click of a button?</p>
<h1>The Solution</h1>
<p><strong>Enter: Drush Make</strong></p>
<p>The answer has come in the form of <a href="http://drupal.org/project/drush_make">Drush Make</a>, which provides an extension to <a href="http://drupal.org/project/drush">Drush</a>, the command line tool I often refer to as 'apt-get' for Drupal.</p>
<p>What Drush Make does, is <a href="http://developmentseed.org/blog/2009/sep/03/5-minute-feature-server">through the implementation of flat files</a> (similar in appearance to .info files from modules), provide a mechanism to fetch data from practically any source you tell it to, and do $stuff.</p>
<p>This can include downloading Drupal core, as well as a bunch of contrib modules from drupal.org . However, it also supports the ability to fetch:</p>
<ul>
<li> code from CVS repos, including tag-specific</li>
<li> ditto for svn</li>
<li> ditto for git, including checking out a particular branch after cloning the repo</li>
<li> grabs .tar.gz stuff, wget-style, useful for libraries</li>
<li> can fetch and apply patches</li>
</ul>
<p>Sure, you say, that's great. It's basically doing batch <code>drush dl</code>'s  with some extra features/protocols thrown in. But how does this help with version control? Not only that, but how is that going to help keep this stuff under control while managing the site in Aegir? </p>
<p>Certainly for me, much of the issue has been that Aegir is inherently 'on the fly' with its actions. It has no concept of version control. But eventually I realised I had to stop expecting Aegir to handle this aspect, and realise  that I could work with it by bringing version-controlled data <em>to it</em> for processing. </p>
<p>Or, put another way, I realised the very act of moving data around, does not need to be a version-control procedure in itself. </p>
<p>One must start to think like Aegir: and that is that the Platform and its application is the important data, that needs to be controlled. The site is just an instance of the application, and so long as your application is controlled, your site can be manipulated as an instance of it.</p>
<p>Adrian mentioned it in his <a href="http://www.lullabot.com/drupal-voices/drupal-voices-62-adrian-rossouw-aegir-drush-and-future-drupal-distributions">podcast interview with Lullabot on October 15th</a>:</p>
<blockquote><p>
It helps to think of install profiles as applications, and sites as instances of those applications.
</p></blockquote>
<p>If you can grasp that, you're on the home stretch already.</p>
<p><strong>The Platform becomes the Platform Build.</strong></p>
<p>One of the concepts I struggle with the most when training users on Aegir, is that of the 'Platform'. It turns out that many developers haven't been using Drupal's multisite design even prior to Aegir, despite the fact that the design's been around forever. So the idea of having multiple sites inside the /sites/ folder of Drupal core - in other words, sharing the core codebase between sites - is somehow (often, but not always) already enough of a paradigm shift.</p>
<p>In Aegir, one creates Platforms, which are just code bases, or a copy of Drupal core (or Open Atrium, etc). Only then can we create and manage Sites, which live on Platforms. </p>
<p>The analogy is directly like this:</p>
<p><strong>/var/aegir/drupal-6.14</strong> &lt;&lt; this the core, the Platform<br />
<strong>/var/aegir/drupal-6.14/sites/www.mig5.net</strong> &lt;&lt; this is the site, 'on' or 'inside' the Platform</p>
<p>What makes this hard is that some users are still getting used to this idea, even though Aegir isn't doing anything different here. It's just exposing that multisite design of Drupal, by making it easier.</p>
<p>If you can grasp the idea of multisite, you'll find it easier to understand how Aegir works with your sites, and how a workflow can be developed to handle build management.</p>
<p>I mentioned Drush Make, and it's ability to grab the Drupal core.<br />
And I mentioned shifting one's mindset to think of Install profiles as just 'Profiles', or 'Applications', and sites as <em>instances</em> of those Applications.</p>
<p>With this in mind, a bigger picture starts to form regarding the potential of Drush Make, since it can, in one fell swoop,</p>
<ul>
<li> download the core, </li>
<li> fetch the install profile from your git repo </li>
<li> fetch some contrib modules</li>
<li> fetch some custom themes and modules from your other repos</li>
<li> maybe apply a patch against a module</li>
<li> fetch some extra third-party libraries, i.e jquery.ui, or geshi</li>
</ul>
<p>No, really. Look at this (entry-level) example of mig5_net.build:</p>
<div class="codeblock"><code>core = 6.x<br />projects[] =&nbsp; drupal<br />projects[mig5_net][type] = &quot;profile&quot;<br />projects[mig5_net][download][type] = &quot;git&quot;<br />projects[mig5_net][download][url] = &quot;git@git.mig5.net:/drupal/profiles/mig5_net&quot;<br />projects[mig5_net][download][branch] = &quot;build_2009101601&quot;</code></div>
<p>Executable from the command line like this:</p>
<div class="codeblock"><code>php /var/aegir/drush/drush.php make mig5_net.build /var/aegir/drupal-6.14_build_2009101601</code></div>
<p>My install profile or 'application' is the git repo that I'm cloning. Note the branch reference: after Drush_make 'git clone's it, it'll check out a specific branch, or 'build'. This is how this release is different from past and future builds: it's a specific release I'm building for.</p>
<p>Suddenly with this one execution of a single flat file, you've built a copy of Drupal core, and dropped in the profile or 'application' into its /profiles/ directory. That's a platform in Aegir's eyes, and not just any platform: but what I call a 'Platform build'. It's a specific <em>release</em> of a your application, right from the top of core, down to the last css file of your site's theme. </p>
<p><strong>Hang on, .css file? Where's the contrib and all that? You only cloned the install profile from git</strong></p>
<p>Yes, in the makefile above, I'm only grabbing the core and my install profile application. Here's the secret: it turns out Drush Make has a recursive nature! I tuck away another makefile inside my install profile repo, called mig5_net.make, and this is the real gem.</p>
<div class="codeblock"><code>core = 6.x<br />projects[] = admin_menu<br />projects[] = captcha<br />projects[] = geshifilter<br />projects[] = install_profile_api<br />projects[] = pathauto<br />projects[] = recaptcha<br />projects[] = tagadelic<br />projects[] = token<br />projects[] = twitter<br />projects[] = views<br />projects[singular][type] = &quot;theme&quot;<br />projects[singular][download][type] = &quot;git&quot;<br />projects[singular][download][url] = &quot;git@git.mig5.net:/drupal/themes/singular&quot;<br />projects[tao][location] = &quot;http://code.developmentseed.org/fserver&quot;<br />projects[mig5][type] = &quot;module&quot;<br />projects[mig5][download][type] = &quot;git&quot;<br />projects[mig5][download][url] = &quot;git@git.mig5.net:/drupal/modules/mig5&quot;</code></div>
<p>What we have here is a series of contrib modules from drupal.org. Also I have a slightly hacked version of singular (css stuff), so I don't use Development Seed's feature server repo to grab this: I keep my own copy in my own git server. However, I *do* use the Tao base theme from their feature server, because I know, like contrib, I don't make any changes to it.</p>
<p>Alternatively, if I was smarter, I could have grabbed Singular from DevSeed's feature server, and written a patch for the css change, and asked Drush Make to apply the patch instead. Here's a snippet of such a thing, taken from the <a href="http://managingnews.com/">Managing News</a> makefile in its <a href="http://drupal.org/project/managingnews">install profile</a>, where the Context module is patched:</p>
<div class="codeblock"><code>; Patched.<br />; Explicit versions specified to ensure patches apply cleanly.<br />projects[context][subdir] = &quot;contrib&quot;<br />projects[context][version] = &quot;2.0-beta7&quot;<br />projects[context][patch][] = &quot;http://drupal.org/files/issues/606816-1_node_form_context.patch&quot;</code></div>
<p>...just so you don't think I'm making this stuff up :) Yes, such features exist, and are in active use!</p>
<p>So, this make file gets downloaded when the install profile git repo gets cloned and the build-specific branch is checked out. While Drush Make grabs the profile from the first makefile (I call it the .build file), it scans the directory and finds this make file, and recursively executes it - thus grabbing all the site-specific components in the process.</p>
<p><strong>Time to tell Aegir about the new Platform build</strong></p>
<p>Suddenly what I have is the entire platform, complete with any updated components I made in the makefile of that specific branch in git. At this point, I just have to tell Aegir about it!</p>
<p>So I go to Create Content > Platform in Aegir, give it a name (usually suffixed with the build number I give it as above), and tell it the path to the new platform I made (/var/aegir/drupal-6.14_build_2009101601)</p>
<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/build_migrate/index.png" /></div>
<p>Aegir goes and checks the platform, learns about it, adds the package information it finds within it to its database, and if all's well, gives me the big green tick.</p>
<p><strong>But where's the settings.php? The site files? This isn't actually the *site*!</strong></p>
<p>Exactly. It's only the application that we've built, and it's only the application we store in version control and generate with makefiles. The site still exists on the old platform, and Aegir knows it does. What we have to do here is stop thinking of the /sites/www.mig5.net/settings.php etc as the *site*, but rather, the current running 'instance' of the application.</p>
<p>It sounds a bit weird, doesn't it? But you don't realise, if you're already using Aegir, you're already probably <a href="../../../../../content/migrate-your-drupal-sites-new-drupal-core-security-release-%c3%a6gir/index.html">doing this already</a>. Drupal 6.14 came out recently, and your sites were on 6.13. You built a new platform (6.14, by downloading it), told Aegir about it, and you used the Migrate task to upgrade all your 6.13 sites to 6.14 at the click of a button.</p>
<p>We're doing exactly the same thing here: you've got your new platform, with your updates. Now you just need to Migrate the site onto that new build. Your settings.php and files from /sites/www.mig5.net/ get carried across to the new build, and any component code/database updates will get applied in the process. </p>
<div align="center"><img src="../../../../../sites/community.aegirproject.org/files/build_migrate_process/index.png" /></div>
<p>Suddenly, you've just exercised the perfect workflow: </p>
<ul>
<li> You kept the application, important stuff, in version control</li>
<li> You managed to keep *less* of a) in version control because drush make can fetch the contrib you don't hack, from drupal.org and other sources</li>
<li> You built the whole new release with just one command on the shell</li>
<li> You managed to seamlessly upgrade your site onto the new release, applying all the updates, and</li>
<li> you did that last one via Aegir, which means you were protected with the rollback functionality of Provision and Drush, meaning if it all went pear-shaped, you'd be back on the previous release as though nothing had happened.</li>
</ul>
<p><em>This</em> is how Aegir can cooperate with version control: all it needs from you is to get that Platform, or build, in place, so it can use it and take care of the release process for you.</p>
<p>And while it used to be <a href="http://developmentseed.org/blog/2009/oct/27/drupal-distributions-drush-make">difficult to build an entire distribution complete with all the nitty gritty components required</a>, it's now never been easier to do this step in a matter of seconds, because Drush Make does this job for you.</p>
<p>This application, <a href="http://www.mig5.net/" title="www.mig5.net">www.mig5.net</a>, is literally <a href="http://git.mig5.net/?p=profiles/mig5_net/.git;a=tree">two files in my git repository</a>, plus the theme (I hacked on Young Hahn's Singular theme a bit). The two files are the install profile itself (which, of course, I only ever once: first time install of the site) and the mig5_net.make file, that does everything else.</p>
<h1>Dealing with the dev > live process</h1>
<p>This really packs a powerful punch when you're working on a development version of your site to make changes prior to sending live (and if you're not, you should be). The process above fits perfectly into this model. This is how one does it:</p>
<p>Need to make changes?</p>
<p><strong>Dev</strong></p>
<ul>
<li> Make a new build using drush_make to grab the latest bits of everything. Add that platform to Aegir. I might call this build 'drupal-6.14_build_dev_2009102601'</li>
<li> Use the 'Clone' feature to clone your current Live site to the test build.</li>
<li> Make your changes to the dev site (maybe you are changing the theme, or adding a module)</li>
<li> Commit those changes back to the repo (the theme changes, maybe adding that new module as a ''project' in your drush_make file inside your install profile). Make a branch of the repo in preparation for a new live build.</li>
</ul>
<p><strong>Live</strong></p>
<ul>
<li> Make a new build using drush_make to grab the latest bits of everything (this grabs the changes you just committed). Add that platform to Aegir. I might call this build 'drupal-6.14_build_live_2009102601'</li>
<li> Use the 'Migrate' feature to migrate your live site to the new build, which picks up and applies any changes/upgrades</li>
</ul>
<p>I shared some ideas with Adrian Simmons (<a href="http://twitter.com/adrinux">@adrinux</a>) who has taken the build/deployment logic I describe here and generated an absolutely fantastic workflow diagram showing the transition of data from dev to live, as well as the relationship between drush_make, version control, and Aegir. Here is the diagram - it does a hell of a better job explaining it all than me and my wordy ways :)</p>
<div align="center"><a href="http://s3.amazonaws.com/ember/fwyl37Fjb60ht0jIUyn0c0e9vq2wJYMH_o.png"><img src="http://s3.amazonaws.com/ember/fwyl37Fjb60ht0jIUyn0c0e9vq2wJYMH_m.png" /></a></div>
<p><br /></p>
<h1>The status of Drush Make</h1>
<p>Awesomeness.</p>
<p>No, you'd know by now that I'd say that, but that's actually the <a href="http://drupal.org/node/616478">release notes</a> for the 6.x-2.0-beta1 release, which <a href="http://twitter.com/dmitrig01">Dmitri</a> unleashed today, after an amazing night (well, my time) by Adrian Rossouw who obliterated a bunch of bugs after being given commit access. The Aegir project now depends on drush_make to build the frontend system and its relevant components, as of HEAD and the upcoming release 0.4-alpha3 (stay tuned for that very shortly). For this reason, we have a direct interest in the project and its future, and so we were lucky to work with Dmitri and squash a few issues very quickly - some of which were actually identified during the writing of this article :)</p>
<p>The recent changes to Drush Make include bringing it in line with changes in the <a href="http://drupal.org/node/614830">also-recently-released Drush 2.1</a>, adding support for checking out git branches after a git clone, and supporting absolute paths for destination of builds on the server.</p>
<p>Need to play with it some more to try it out? You can see examples of my 'build' makefiles in my <a href="http://git.mig5.net/?p=builds/.git;a=tree">git repo</a> as well as my application <a href="http://git.mig5.net/?p=profiles/mig5_net/.git;a=summary">install profile</a> for mig5.net, which contains the 'bigger' drush_make file. Or check out the <a href="http://drupal.org/project/managingnews">Managing News</a> install profile and its make file - it's the first project other than Aegir to use a make file to build itself.</p>
<p>If you're new to Aegir, Drush and Drush make, I hope this article gives you the incentive to try it out and see why it rocks. If you're using Aegir and Drush already, I hope Drush Make makes more sense now, and that this gives you that 'ah hah!' moment if you've been scratching your head about how to handle build management in an Aegir environment.</p>
<p>(thanks to Adrian Simmons, Adrian Rossouw and Eric Gundersen for their contributions/ideas for this article, and most of all to Dmitri Gaskin for his mad skills.. thanks for changing the game with Drush Make!)</p>
<div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/build_migrate/index.png" title="build_migrate.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/build_migrate/index.png" alt="build_migrate.png" title="build_migrate.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/build_migrate/index.png">build_migrate.png</a></td><td class="size">25.99 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/build_migrate_process/index.png" title="build_migrate_process.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/build_migrate_process/index.png" alt="build_migrate_process.png" title="build_migrate_process.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/build_migrate_process/index.png">build_migrate_process.png</a></td><td class="size">19.1 KB</td> </tr>
 <tr class="odd"><td class="mime mime-jpg"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/confused/index.jpg" title="confused.jpg"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/confused/index.jpg" alt="confused.jpg" title="confused.jpg" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/confused/index.jpg">confused.jpg</a></td><td class="size">55.36 KB</td> </tr>
 <tr class="even"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/fwyl37fjb60ht0jiuyn0c0e9vq2wjymh_m/index.png" title="fwyl37fjb60ht0jiuyn0c0e9vq2wjymh_m.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/fwyl37fjb60ht0jiuyn0c0e9vq2wjymh_m/index.png" alt="fwyl37fjb60ht0jiuyn0c0e9vq2wjymh_m.png" title="fwyl37fjb60ht0jiuyn0c0e9vq2wjymh_m.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/fwyl37fjb60ht0jiuyn0c0e9vq2wjymh_m/index.png">fwyl37fjb60ht0jiuyn0c0e9vq2wjymh_m.png</a></td><td class="size">176.32 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-27.html?destination=node%2F728%23comment-form">Login</a> or <a href="../../../../../user/register/index-27.html?destination=node%2F728%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-27.html?destination=node%2F728%23comment-form">Login</a> or <a href="../../../../../user/register/index-27.html?destination=node%2F728%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-13173" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/presentation/article-archive/how-install-aegir-and-use-it-deploy-drupal-sites-debian-vps/index.html">How To Install Aegir and Use it to Deploy Drupal Sites on a Debian VPS</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-aegir-and-use-it-to-deploy-drupal-sites-on-a-debian-vps" title="https://www.digitalocean.com/community/tutorials/how-to-install-aegir-and-use-it-to-deploy-drupal-sites-on-a-debian-vps">https://www.digitalocean.com/community/tutorials/how-to-install-aegir-an...</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-14.html?destination=node%2F13173%23comment-form">Login</a> or <a href="../../../../../user/register/index-14.html?destination=node%2F13173%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-14.html?destination=node%2F13173%23comment-form">Login</a> or <a href="../../../../../user/register/index-14.html?destination=node%2F13173%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-731" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../article-archive/test-your-drupal-distro-building-continuous-integration-server-aegir-jenkins/index.html">Test your Drupal distro: Building a continuous integration server with Aegir &amp; Jenkins</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This article first appeared on mig5's blog on 9th June, 2011.</p>
<p><img src="../../../../../files/jenkins-headshot/index.png" style="float: right; padding:4px" />A while ago I wrote that I had <a href="../../../../../content/discovering-jenkins-and-increasing-productivity/index.html">started to use Jenkins</a> for various purposes such as server backups, providing better notification in event of failure, yadda yadda.</p>
<p>Over at the <a href="http://aegirproject.org/">Aegir project</a> I implemented Jenkins to give us a continuous integration platform that kicks into gear either on demand or whenever one of us pushes a commit to the Drupal git repos. It does the following:</p>
<ul>
<li>Provisions a new virtual server (at Rackspace Cloud) via the Libcloud API</li>
<li>Installs Aegir on the server</li>
<li>Builds a Drupal 6, Drupal 7 and OpenAtrium platform via Drush Make</li>
<li>Installs a site on each respective platform</li>
</ul>
<p>A number of other build jobs exist, such as testing upgrades of earlier Aegir releases to latest versions, but I won't go into that here.</p>
<p>What several people have asked me to elaborate on, is that the combination of Jenkins, Cloud-based virtualisation and Aegir can make a very useful testing tool if you're building some sort of Drupal solution like a distribution or some sort of turnkey Drupal appliance where you want to repeatedly test the installation process (especially with a custom install profile, for example). This article will describe how we built such a thing.</p>
<h2>Disclaimers before we start</h2>
<p>1. I'll assume you have a server set up with Jenkins installed already, as that's out of the scope of this article.</p>
<p>2. The code I'm giving you uses Libcloud API, but it is very much designed for the Rackspace Cloud driver implementation. I know for a fact, through building other tools, that other provider drivers such as Linode have differing requirements (Linode, for example, requires you to also specify a datacentre to build in). Please don't contact me complaining that it didn't work with Provider X, because I'm just showing you how we use it with Rackspace. Since there's a good chance you're smarter than me, you're welcome to take the code and abstract it properly :)</p>
<p>3. The code is far from perfect because I'm rather crap at such things. The error handling is extremely crude.</p>
<p>4. I am not going to explain every line of code in this article: this is targeted towards clever people who will read the code and understand what to tweak, what assumptions to add or remove to make it build their own project. Again, this is just what (currently) works for us.</p>
<p>5. I am assuming the Jenkins server is running on Debian Squeeze, where things like fabric and python-setuptools can simply be apt-get installed with no fuss.</p>
<h2>Step 1) Install libcloud tools</h2>
<p>Libcloud will provide the API necessary for provisioning a brand new virtual server at a provider such as Rackspace Cloud.</p>
<p>Run these commands as root / with sudo on your Jenkins server.</p>
<div class="codeblock"><code>git clone git://github.com/apache/libcloud.git</code></div>
<p>You'll need python-setuptools on a Debian/Ubuntu system:</p>
<div class="codeblock"><code>apt-get install python-setuptools</code></div>
<p>Install libcloud likeso:</p>
<div class="codeblock"><code>cd libcloud<br />python setup.py install</code></div>
<h2>Step 2) Install fabric</h2>
<p>Fabric, a python library for communicating with servers over SSH, will run necessary commands to the new VPS to install Aegir and the rest, via SSH.</p>
<p>Run this command as root / with sudo on your Jenkins server.</p>
<div class="codeblock"><code>apt-get install fabric</code></div>
<h2>Step 3) Upload scripts to the Jenkins server and edit</h2>
<p>Two files provide the magic that does the whole job of building a new VPS and installing Aegir and the rest. You want these two files on the Jenkins server for the Jenkins user to use.</p>
<p>The .ini file is for you to edit and enter your API keys, server specs and relevant details such as your email address, trusted IP for firewall whitelisting on the new VPS, and URL to fetch your makefiles from to build your project.</p>
<p>The other file with the .py extension is the actual python code that Jenkins will execute to build the whole thing.</p>
<p>You can clone my repo containing the two files from github:</p>
<div class="codeblock"><code>git clone git://github.com/mig5/aegir_ci.git</code></div>
<p>The code assumes this directory containing those files are in the home directory of the Jenkins user, e.g /var/lib/jenkins/aegir_ci</p>
<p>It's at this point that you want to edit the aegir_6.x-1.1_install.py file and define what to build. In my example that I'm giving you, I'm fetching three Drush make stub or 'build' files from my github repo, named drupal6, drupal7 and openatrium .build respectively. </p>
<p>The code that does this is the function <code>fab_install_platform()</code>.</p>
<p>Thus, this code is very much specific to building your project from a makefile, the fact that the makefile is fetchable over HTTP (per the ini config file, it fetches from my github repo) and also makes some assumptions on what install profile to use when installing the site. </p>
<p>The code that installs the site is the function <code>fab_install_site()</code>, and takes two arguments: the platform per the above (e.g drupal6, drupal7 or openatrium), and the install profile name (default, standard or openatrium in this example). So this is where you want to change the install profile name and only install whatever platforms you want, based on the name of your makefile.</p>
<h2>Step 4) Add a new Jenkins job</h2>
<p>Add a New Job of type 'free-style software project'.</p>
<p>In the combobox 'Add Build step', choose 'Execute shell'.</p>
<div align="center"><img src="../../../../../files/build_step/index.png" /></div>
<p>In the text field that appears, enter this line:</p>
<div class="codeblock"><code>python /var/lib/jenkins/aegir_ci/aegir_6.x-1.1_install.py</code></div>
<p>Choose any other settings you'd like in the job, such as notifications if a build fails, whether you want to automate this build on a scheduled basis (like a cron), and so on.</p>
<h2>Step 5) Execute a Build</h2>
<p>After you've saved the job, simply click 'Build Now' in the left sidebar and watch the Console Output to see the new server get provisioned, your Aegir installed and your distro or custom Drupal app built and a test site install processed.</p>
<div align="center"><a href="../../../../../files/console_output/index.jpg" rel="lightbox"><img src="../../../../../files/thumb_console_output/index.jpg" /></a></div>
<h2>Blowing it all away</h2>
<p>My example code has a snippet at the bottom that completely destroys the VPS at the end. This is because our Aegir project builds on a scheduled basis, and that includes times where I'm asleep: I don't want these cruft VPS lingering around costing me money. </p>
<p>You may wish to prevent the auto-destruction so that you can login and take a look around, especially where there are issues. To do so, just comment out <code>conn.destroy_node(node)</code> at the bottom of the script. </p>
<p>To login to Aegir, either find the one-time login URL in the Console Output of the job itself, or check your e-mail, where you should have received the link in the welcome message.</p>
<div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/build_step/index.png" title="build_step.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/build_step/index.png" alt="build_step.png" title="build_step.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/build_step/index.png">build_step.png</a></td><td class="size">9.8 KB</td> </tr>
 <tr class="even"><td class="mime mime-jpg"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/console_output/index.jpg" title="console_output.jpg"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/console_output/index.jpg" alt="console_output.jpg" title="console_output.jpg" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/console_output/index.jpg">console_output.jpg</a></td><td class="size">98.78 KB</td> </tr>
 <tr class="odd"><td class="mime mime-png"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/jenkins-headshot/index.png" title="jenkins-headshot.png"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/jenkins-headshot/index.png" alt="jenkins-headshot.png" title="jenkins-headshot.png" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/jenkins-headshot/index.png">jenkins-headshot.png</a></td><td class="size">9.2 KB</td> </tr>
 <tr class="even"><td class="mime mime-jpg"><div  class="form-item" id="">
    <div class="itu-attachment-thumb"><a href="../../../../../sites/community.aegirproject.org/files/thumb_console_output/index.jpg" title="thumb_console_output.jpg"><img src="../../../../../sites/community.aegirproject.org/files/imagecache/AttachmentThumbnail/thumb_console_output/index.jpg" alt="thumb_console_output.jpg" title="thumb_console_output.jpg" width="60" height="60" class="imagecache imagecache-AttachmentThumbnail"/></a></div>  </div>
</td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/thumb_console_output/index.jpg">thumb_console_output.jpg</a></td><td class="size">131.97 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-250.html?destination=node%2F731%23comment-form">Login</a> or <a href="../../../../../user/register/index-250.html?destination=node%2F731%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-250.html?destination=node%2F731%23comment-form">Login</a> or <a href="../../../../../user/register/index-250.html?destination=node%2F731%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-730" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../article-archive/upgrading-aegir-itself-latest-version-drupal/index.html">Upgrading Aegir itself to the latest version of Drupal</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This article first appeared on mig5's blog on 26th May, 2011</p>
<p>Today, Drupal <a href="http://drupal.org/drupal-7.2">released a security/bugfix for Drupal 6 and 7</a>, bringing the latest version of Drupal 6 to 6.22.</p>
<p><a href="http://aegirproject.org/">Aegir</a> is well known for making site upgrades very easy, fast and safe by way of the Migrate task. But some users might be wondering how to make the Aegir 'frontend', which is a Drupal-6 site itself, run on the latest version of Drupal without having to reinstall Aegir entirely.</p>
<p>For instance, if you installed Aegir 1.0 or 1.1, your Aegir system is probably running on Drupal 6.20.</p>
<p>Fortunately, our <a href="../../../../../upgrading/manual/index.html">Upgrade instructions</a> for Aegir, while typically describing how to update your Aegir instance to a new release of Aegir specifically, can also be used as-is to perform an upgrade of your Aegir system to the latest version of Drupal only.</p>
<p>In other words, follow the Aegir upgrade instructions per that link above as though you were upgrading Aegir, but retain the same version number in the steps:</p>
<div class="codeblock"><code>export OLD_AEGIR_DIR=/var/aegir/hostmaster-6.x-1.1<br />export AEGIR_VERSION=6.x-1.1<br />export AEGIR_DOMAIN=aegir.example.com</code></div>
<p>The next step in the upgrade would normally be:</p>
<div class="codeblock"><code>cd $OLD_AEGIR_DIR<br />drush hostmaster-migrate $AEGIR_DOMAIN $HOME/hostmaster-$AEGIR_VERSION</code></div>
<p>The upgrade steps will actually build a new Drupal platform ($HOME/hostmaster-$AEGIR_VERSION) automatically using Drush Make. </p>
<p>However, you can't have two directories in /var/aegir called 'hostmaster-6.x-1.1' because Drush Make will abort on this.</p>
<p>To work around this, adjust the 'target platform' part of this command so that the new platform directory will have a unique name:</p>
<div class="codeblock"><code>cd $OLD_AEGIR_DIR<br />drush hostmaster-migrate $AEGIR_DOMAIN $HOME/hostmaster-$AEGIR_VERSION-d6.22</code></div>
<p>The naming convention is arbitrary here: I am simply suffixing it with d6.22 so I understand why I did it if I forget later :)</p>
<p>So long as it's a unique new target platform, your Aegir instance will 'upgrade' itself by backing up and then moving the Aegir frontend onto the new Drupal 6.22 platform, then running through the rest of the upgrade/ update.php steps automatically.</p>
<p>Afterward, you can safely visit the old Hostmaster platform node (usually /hosting/c/platform_hostmaster) in your Aegir frontend and remove it by running the 'Delete' task. I recommend you don't simply rm -rf the old hostmaster platform manually, but let the Delete task take care of this, and other cleanup tasks, for you.</p>
<p>As always if you have questions or get stuck, let us know on the <a href="../../../../../index.html">Community portal</a>, on the <a href="http://lists.aegirproject.org/">mailing lists</a>, the <a href="http://drupal.org/node/add/project-issue/hostmaster">Support ticket queue</a> or on IRC in #aegir on Freenode.</p>
<p>Good luck!</p>
<p>------</p>
<p><em>If you need a consultant to handle the tasks of installing, upgrading or troubleshooting your Aegir instance, consider reviewing our <a href="http://mig5.net/services/aegir">consultancy services</a>. mig5 is a core developer of the opensource Aegir hosting system.</em></p>
    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-251.html?destination=node%2F730%23comment-form">Login</a> or <a href="../../../../../user/register/index-251.html?destination=node%2F730%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-251.html?destination=node%2F730%23comment-form">Login</a> or <a href="../../../../../user/register/index-251.html?destination=node%2F730%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-471" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../presentation/slidedecks/index.html">Slidedecks</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>Feel free to add a page for any presentations you give on Aegir, and make sure to attach your slides and speak notes.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-252.html?destination=node%2F471%23comment-form">Login</a> or <a href="../../../../../user/register/index-252.html?destination=node%2F471%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-252.html?destination=node%2F471%23comment-form">Login</a> or <a href="../../../../../user/register/index-252.html?destination=node%2F471%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-712" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../apple-keynote-theme-aegir-presentations/index.html">Apple Keynote Theme for Aegir Presentations</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>I created this Keynote theme for my Aegir presentation (<a href="../../../../../using-aegir-drupal-hosting-and-management-drupalcampsc-2011-06-12/index.html" title="http://community.aegirproject.org/using-aegir-drupal-hosting-and-management-drupalcampsc-2011-06-12">http://community.aegirproject.org/using-aegir-drupal-hosting-and-managem...</a>).</p>

<p>I hope this may be helpful for others presenting on Aegir.</p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-zip"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/aegir/index.zip">aegir.zip</a></td><td class="size">3.76 MB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-253.html?destination=node%2F712%23comment-form">Login</a> or <a href="../../../../../user/register/index-253.html?destination=node%2F712%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-253.html?destination=node%2F712%23comment-form">Login</a> or <a href="../../../../../user/register/index-253.html?destination=node%2F712%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-2919" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/presentation/slidedecks/aegir-ecology-vs-drupal-gardens/index.html">Aegir Ecology vs Drupal Gardens</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>-Aegir Ecology vs Drupal Gardens</p>

<p>Presentation given to Sacramento Drupal Users Group, June 2011, attended by Lullabot's quicksketch and others...</p>

<p>Comparing the Aegir Project ecosystem and the Drupal Gardens stack.</p>

<p>The Aegir Project is an open-sourced, libre and free Drupal hosting system that is already used in production to host thousands of Drupal sites in a managed networks.</p>

<p>Aegir allows the spawning of sites from popular company or community distro's such as Open Atrium, Open Public or COD (Conference Organizing Distribution).</p>

<p>There is also a growing, diverse ecosystem of Aegir contributed modules such as hosting payment integration to Ubercart or the automation of various hosting management tasks.</p>

<p>Aegir is composed of the Hostmaster installation profile, Drush and Provision and has an Aegir API for developers. Aegir is production ready and is the product of some of the best Drupal people in the community.</p>

<p>Drupal Gardens is an entry level hosting platform that is a product of Acquia and is built in Drupal 7. The hosting platform is proprietary and specific to the hosting provider.</p>

<p>Slides: Schedule info Time slot: 29 May 14:30 - 16:00 Room: 4 - BoF Room</p>

<p><a href="http://sacdrupal.org/program/sessions/aegir-ecology-vs-drupal-gardens" title="http://sacdrupal.org/program/sessions/aegir-ecology-vs-drupal-gardens">http://sacdrupal.org/program/sessions/aegir-ecology-vs-drupal-gardens</a></p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-odp"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/aegir-ecology-vs-drupal-gardens_0_0/index.odp">aegir-ecology-vs-drupal-gardens.odp</a></td><td class="size">6.25 MB</td> </tr>
 <tr class="even"><td class="mime mime-pdf"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/aegir-ecology-vs-drupal-gardens_1/index.pdf">aegir-ecology-vs-drupal-gardens.pdf</a></td><td class="size">3.75 MB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-254.html?destination=node%2F2919%23comment-form">Login</a> or <a href="../../../../../user/register/index-254.html?destination=node%2F2919%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-254.html?destination=node%2F2919%23comment-form">Login</a> or <a href="../../../../../user/register/index-254.html?destination=node%2F2919%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-987" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/presentation/slidedecks/drupalcampnyc-aegir-based-business-models/index.html">DrupalCampNYC -- Aegir-based Business Models</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Christopher Gervais &amp; Antoine Beaupr recently presented Aegir at DrupalCamp NYC. The session was recorded, and we'll post a link to the recording as soon as it's available. We've attached a tarball of the session's S5.</p>

<p>ref.: <a href="http://drupalcampnyc.org/sessions/aegir-based-business-models" title="http://drupalcampnyc.org/sessions/aegir-based-business-models">http://drupalcampnyc.org/sessions/aegir-based-business-models</a></p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-tgz"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/dcnyc_aegir-based_business_models/index.gz">dcnyc_aegir-based_business_models.tgz</a></td><td class="size">1.72 MB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-255.html?destination=node%2F987%23comment-form">Login</a> or <a href="../../../../../user/register/index-255.html?destination=node%2F987%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-255.html?destination=node%2F987%23comment-form">Login</a> or <a href="../../../../../user/register/index-255.html?destination=node%2F987%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-854" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../presentation/slidedecks/drupalcon-london-2011-aegir-based-business-models/index.html">DrupalCon London 2011 -- Aegir-based Business Models</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_4 first"><a href="../../../../../taxonomy/term/4/index.html" rel="tag" title="This level is for users who have access to only their sites and not able to manage all Aegir features, accounts or the server/system.">Client</a></li>
<li class="taxonomy_term_27"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_3"><a href="../../../../../taxonomy/term/3/index.html" rel="tag" title="This level is for users, who are using hosted Aegir version, without access to the server root, with features limited to those allowed by their host, and often with Aegir UI changed/simplified.">Hosted</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This is the presentation I gave at DrupalCon London.</p>

<p>It is in S5 format, for easy presentation in a browser. I have included the .rst sources, theme and makefile, so that it can be easily modified. For more info, look into rst2s5. Please share back any modifications you use.</p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-gz"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/drupalcon2011-aegirbasedbusinessmodels.tar_/index.gz">drupalcon2011-aegirbasedbusinessmodels.tar_.gz</a></td><td class="size">347.99 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-256.html?destination=node%2F854%23comment-form">Login</a> or <a href="../../../../../user/register/index-256.html?destination=node%2F854%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-256.html?destination=node%2F854%23comment-form">Login</a> or <a href="../../../../../user/register/index-256.html?destination=node%2F854%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-13171" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/presentation/slidedecks/nyccamp-2015-aegir-30-deep-dive/index.html">NYCcamp 2015 - Aegir 3.0 deep dive</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Aegir 3.0 deep dive with ergonlogic and helmo.</p>

<p><a href="http://nyccamp.org/session/aegir-30-deep-dive-ergonlogic-and-helmo" title="http://nyccamp.org/session/aegir-30-deep-dive-ergonlogic-and-helmo">http://nyccamp.org/session/aegir-30-deep-dive-ergonlogic-and-helmo</a></p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-pdf"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/aegir_core_and_contrib_-_nyc_summit_0/index.pdf">aegir_core_and_contrib_-_nyc_summit.pdf</a></td><td class="size">437.05 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-16.html?destination=node%2F13171%23comment-form">Login</a> or <a href="../../../../../user/register/index-16.html?destination=node%2F13171%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-16.html?destination=node%2F13171%23comment-form">Login</a> or <a href="../../../../../user/register/index-16.html?destination=node%2F13171%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-478" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../478/index.html">OpenCamp in Dallas, TX - 2010</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Attached are the slides I used for a presentation at <a href="http://openca.mp/" title="http://OpenCa.mp/">http://OpenCa.mp/</a> last year. Feel free to use and edit them as needed. (<strong>Note:</strong> This was a keynote file, but has been exported to PPT, so some of the slides might not look right.)</p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-ppt"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/aegir_copy/index.ppt">aegir_copy.ppt</a></td><td class="size">929 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-426.html?destination=node%2F478%23comment-form">Login</a> or <a href="../../../../../user/register/index-426.html?destination=node%2F478%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../478/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>




<div  id="node-925" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../presentation/slidedecks/overview-aegir-and-devstageproduction/index.html">Overview of Aegir and Dev/Stage/Production</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>I presented this at the Pacific Northwest Drupal Summit. Aegir received a warm reception which has nice to see. Feel free to use these slides in whatever way necessary. On images where credit is given, please make sure you give credit to the original authors. Thank you.</p>

<h2><a href="http://www.pnwdrupalsummit.org/sessions/aegir-utilitarian-approach-developmentstageproduction-deployment" target="_blank">Pacific Northwest Drupal Summit</a></h2>

<h3>Key Points</h3>

<ul>
<li>    Overview of what Aegir is and what it can do.</li>
<li>    Introduction to key Aegir concepts</li>
<li>    Discussion of current successes &amp; remaining issues with Aegir in our environment</li>
<li>    Our Dev/Stage/Production workflow</li>
<li>   Live demonstration</li>
 <li>   ?'s and comments</li>
</ul>

<h2>Original Session Description</h2>

<p>We have recently been developing a new hosting architecture utilizing the Aegir platform. In our quest to move towards a more professional development model of a development, staging/qa, and production server I have learned a lot about setting up Aegir and the subsystems necessary to successfully move a site from the dev server through the chain up to production. This session would cover at a high level installation and configuration of Aegir and leveraging their hub-spoke model to speed up movement of sites and to ensure a higher level of maintenance to all drupal installations.</p>

<p>Aegir proves immensely useful when porting sites from D5 to D6. We would also discuss our move towards git and how that does and does not dove-tail with Aegir. I would hope to showcase some of our pitfalls so that others can avoid them if they choose to use Aegir in the future.</p>

<p>This would most likely be a 30-35 minute presentation with the rest of the time being devoted to discussion.</p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-pdf"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/introduction_to_aegir_pnwds_with_notes/index.pdf">introduction_to_aegir_pnwds_with_notes.pdf</a></td><td class="size">3.79 MB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-257.html?destination=node%2F925%23comment-form">Login</a> or <a href="../../../../../user/register/index-257.html?destination=node%2F925%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-257.html?destination=node%2F925%23comment-form">Login</a> or <a href="../../../../../user/register/index-257.html?destination=node%2F925%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-711" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../using-aegir-drupal-hosting-and-management-drupalcampsc-2011-06-12/index.html">Using Aegir for Drupal Hosting and Management - DrupalCampSC (2011-06-12)</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Presentation description/abstract:</p>

<p><strong>Using Aegir for Drupal Hosting and Management</strong></p>

<p>This session will explore using Aegir to deploy, clone, upgrade, backup and restore Drupal web sites with live demonstrations on an actual Aegir server. Methods for creating new platforms by importing existing sites and using Drush Make files will also be presented. Using Aegir to deploy Drupal distributions such as Open Atrium, OpenPublish and COD will be demonstrated. In addition, this session will explain use cases for Aegir multi-server setups.</p>

<p>While the primary focus of the session will be using Aegir, system requirements and installation will be discussed briefly.</p>

<p>Presented at DrupalCampSC 2011 (<a href="http://drupalcampsc.com/" title="http://drupalcampsc.com/">http://drupalcampsc.com/</a>)</p>

<p>See slides in PDF format or the link below:</p>

<p><a href="http://public.iwork.com/document/?a=p53574453&amp;d=Using_Aegir_for_Drupal_Hosting_and_Management.key" title="http://public.iwork.com/document/?a=p53574453&amp;d=Using_Aegir_for_Drupal_Hosting_and_Management.key">http://public.iwork.com/document/?a=p53574453&amp;d=Using_Aegir_for_Drupal_H...</a></p><div class="itu-attachments"><table class="itu-attachment-list withoutstats sticky-enabled" id="attachments">
 <thead><tr><th class="preview">Preview</th><th class="file">Attachment</th><th class="size">Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td class="mime mime-pdf"></td><td class="file"><a href="../../../../../sites/community.aegirproject.org/files/using_aegir_0/index.pdf">using_aegir.pdf</a></td><td class="size">112.35 KB</td> </tr>
</tbody>
</table>
</div>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-258.html?destination=node%2F711%23comment-form">Login</a> or <a href="../../../../../user/register/index-258.html?destination=node%2F711%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-258.html?destination=node%2F711%23comment-form">Login</a> or <a href="../../../../../user/register/index-258.html?destination=node%2F711%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-474" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../474/index.html">Training Materials</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>Post or find training materials here for any local trainings on Aegir you may be interested in.</p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-259.html?destination=node%2F474%23comment-form">Login</a> or <a href="../../../../../user/register/index-259.html?destination=node%2F474%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-259.html?destination=node%2F474%23comment-form">Login</a> or <a href="../../../../../user/register/index-259.html?destination=node%2F474%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-797" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../drupalcon-training-aegir-hosting-system-deep-dive/index.html">DrupalCon Training - Aegir Hosting System: Deep Dive</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc53">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Intro_to_Aegir"><span class="toc-number">1. </span>Intro to Aegir</a>
<ol>
	<li class="toc-level-2"><a href="#Community"><span class="toc-number">1.1. </span>Community</a></li>
	<li class="toc-level-2"><a href="#Terminology"><span class="toc-number">1.2. </span>Terminology</a></li>
	<li class="toc-level-2"><a href="#Architecture"><span class="toc-number">1.3. </span>Architecture</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Installation"><span class="toc-number">2. </span>Installation</a>
<ol>
	<li class="toc-level-2"><a href="#The_easy_way"><span class="toc-number">2.1. </span>The easy way</a></li>
	<li class="toc-level-2"><a href="#The_hard_way"><span class="toc-number">2.2. </span>The hard way</a></li>
	<li class="toc-level-2"><a href="#Other_operating_systems"><span class="toc-number">2.3. </span>Other operating systems</a></li>
	<li class="toc-level-2"><a href="#Remote_database_servers_and_clusters"><span class="toc-number">2.4. </span>Remote database servers and clusters</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Debugging"><span class="toc-number">3. </span>Debugging</a>
<ol>
	<li class="toc-level-2"><a href="#Checking_your_install"><span class="toc-number">3.1. </span>Checking your install</a></li>
	<li class="toc-level-2"><a href="#Manipulating_the_task_queue_and_reading_the_task_log"><span class="toc-number">3.2. </span>Manipulating the task queue and reading the task log</a></li>
	<li class="toc-level-2"><a href="#Checking_crontab"><span class="toc-number">3.3. </span>Checking crontab</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#The_Aegir_interface"><span class="toc-number">4. </span>The Aegir interface</a>
<ol>
	<li class="toc-level-2"><a href="#Platforms_and_sites"><span class="toc-number">4.1. </span>Platforms &amp; sites</a></li>
	<li class="toc-level-2"><a href="#Servers_and_services"><span class="toc-number">4.2. </span>Servers &amp; services</a></li>
	<li class="toc-level-2"><a href="#Tasks_and_queues"><span class="toc-number">4.3. </span>Tasks &amp; queues</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Creating_Platforms"><span class="toc-number">5. </span>Creating Platforms</a>
<ol>
	<li class="toc-level-2"><a href="#Creating_a_Drupal_x_platform_from_scratch"><span class="toc-number">5.1. </span>Creating a Drupal x platform from scratch</a></li>
	<li class="toc-level-2"><a href="#Some_handy_drush_commands_and_an_explanation_of_nodeaddplatform"><span class="toc-number">5.2. </span>Some handy drush commands and an explanation of node/add/platform</a></li>
	<li class="toc-level-2"><a href="#Creating_a_platform_using_a_drush_makefile"><span class="toc-number">5.3. </span>Creating a platform using a drush makefile</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Sites"><span class="toc-number">6. </span>Sites</a>
<ol>
	<li class="toc-level-2"><a href="#Creating_a_site_on_our_new_platform"><span class="toc-number">6.1. </span>Creating a site on our new platform</a></li>
	<li class="toc-level-2"><a href="#Common_Site_tasks"><span class="toc-number">6.2. </span>Common Site tasks</a></li>
	<li class="toc-level-2"><a href="#Cron_configuration_via_Aegir"><span class="toc-number">6.3. </span>Cron configuration via Aegir</a></li>
	<li class="toc-level-2"><a href="#Site_aliases"><span class="toc-number">6.4. </span>Site aliases</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Aegir_vs._the_Drupal_7_Upgrade_Path"><span class="toc-number">7. </span>Aegir vs. the Drupal 7 Upgrade Path</a>
<ol>
	<li class="toc-level-2"><a href="#Create_a_7.x_platform_from_scratch"><span class="toc-number">7.1. </span>Create a 7.x platform from scratch</a></li>
	<li class="toc-level-2"><a href="#Migrate_our_site_from_6.x_to_7.x"><span class="toc-number">7.2. </span>Migrate our site from 6.x to 7.x</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Importing_sites"><span class="toc-number">8. </span>Importing sites</a>
<ol>
	<li class="toc-level-2"><a href="#Single_sites"><span class="toc-number">8.1. </span>Single sites</a></li>
	<li class="toc-level-2"><a href="#Complete_platforms"><span class="toc-number">8.2. </span>Complete platforms</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Drush_Make_Advanced"><span class="toc-number">9. </span>Drush Make Advanced</a>
<ol>
	<li class="toc-level-2"><a href="#Patching_and_branching_with_git"><span class="toc-number">9.1. </span>Patching and branching with git</a></li>
	<li class="toc-level-2"><a href="#Creating_cascading_makefiles"><span class="toc-number">9.2. </span>Creating cascading makefiles</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Client_management"><span class="toc-number">10. </span>Client management</a>
<ol>
	<li class="toc-level-2"><a href="#Clients_and_the_quota_api"><span class="toc-number">10.1. </span>Clients &amp; the quota api</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Extending_Aegir"><span class="toc-number">11. </span>Extending Aegir</a>
<ol>
	<li class="toc-level-2"><a href="#Overview_of_Aegir_contib_modules"><span class="toc-number">11.1. </span>Overview of Aegir contib modules</a></li>
	<li class="toc-level-2"><a href="#Scheduled_backups_and_garbage_collection"><span class="toc-number">11.2. </span>Scheduled backups &amp; garbage collection</a></li>
	<li class="toc-level-2"><a href="#E-commerce_integration"><span class="toc-number">11.3. </span>E-commerce integration</a></li>
	<li class="toc-level-2"><a href="#ACLs_and_SFTP"><span class="toc-number">11.4. </span>ACLs &amp; SFTP</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Whiteboxing_Aegir"><span class="toc-number">12. </span>Whiteboxing Aegir</a>
<ol>
	<li class="toc-level-2"><a href="#Theming_with_Eldir"><span class="toc-number">12.1. </span>Theming with Eldir</a></li>
	<li class="toc-level-2"><a href="#Overriding_the_Aegir_makefile"><span class="toc-number">12.2. </span>Overriding the Aegir makefile</a></li>
	<li class="toc-level-2"><a href="#Overriding_other_files"><span class="toc-number">12.3. </span>Overriding other files</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Advanced_Topics_Manual_Uprades_and_other_Black_Magic"><span class="toc-number">13. </span>Advanced Topics, Manual Uprades, and other Black Magic</a>
<ol>
	<li class="toc-level-2"><a href="#Advanced_Debugging"><span class="toc-number">13.1. </span>Advanced Debugging</a></li>
	<li class="toc-level-2"><a href="#Manual_upgrades"><span class="toc-number">13.2. </span>Manual upgrades</a></li>
	<li class="toc-level-2"><a href="#Aliases_and_contexts"><span class="toc-number">13.3. </span>Aliases &amp; contexts</a></li>
	<li class="toc-level-2"><a href="#Performance_and_security"><span class="toc-number">13.4. </span>Performance &amp; security</a></li>
	<li class="toc-level-2"><a href="#Extending_Provision_and_Hostmaster"><span class="toc-number">13.5. </span>Extending Provision &amp; Hostmaster</a></li>
</ol>
</li>
</ol>
</div>
</div>

<h1 id="Intro_to_Aegir">1. Intro to Aegir</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Community">1.1. Community</h2>

<ul>
<li>aegirproject.org</li>
<li>#aegir</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Terminology">1.2. Terminology</h2>

<ul>
<li>site</li>
<li>platform</li>
<li>task</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Architecture">1.3. Architecture</h2>

<ul>
<li>Provision</li>
<li>Hostmaster</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Installation">2. Installation</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="The_easy_way">2.1. The easy way</h2>

<ul>
<li>using Debian packages</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="The_hard_way">2.2. The hard way</h2>

<ul>
<li>manual installs</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Other_operating_systems">2.3. Other operating systems</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Remote_database_servers_and_clusters">2.4. Remote database servers and clusters</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Debugging">3. Debugging</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Checking_your_install">3.1. Checking your install</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Manipulating_the_task_queue_and_reading_the_task_log">3.2. Manipulating the task queue and reading the task log</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Checking_crontab">3.3. Checking crontab</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="The_Aegir_interface">4. The Aegir interface</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Platforms_and_sites">4.1. Platforms &amp; sites</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Servers_and_services">4.2. Servers &amp; services</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Tasks_and_queues">4.3. Tasks &amp; queues</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Creating_Platforms">5. Creating Platforms</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Creating_a_Drupal_x_platform_from_scratch">5.1. Creating a Drupal x platform from scratch</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Some_handy_drush_commands_and_an_explanation_of_nodeaddplatform">5.2. Some handy drush commands and an explanation of node/add/platform</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Creating_a_platform_using_a_drush_makefile">5.3. Creating a platform using a drush makefile</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Sites">6. Sites</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Creating_a_site_on_our_new_platform">6.1. Creating a site on our new platform</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Common_Site_tasks">6.2. Common Site tasks</h2>

<ul>
<li>install</li>
<li>clone</li>
<li>backup</li>
<li>restore</li>
<li>migrate</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Cron_configuration_via_Aegir">6.3. Cron configuration via Aegir</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Site_aliases">6.4. Site aliases</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Aegir_vs._the_Drupal_7_Upgrade_Path">7. Aegir vs. the Drupal 7 Upgrade Path</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Create_a_7.x_platform_from_scratch">7.1. Create a 7.x platform from scratch</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Migrate_our_site_from_6.x_to_7.x">7.2. Migrate our site from 6.x to 7.x</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Importing_sites">8. Importing sites</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Single_sites">8.1. Single sites</h2>

<ul>
<li>provision-deploy</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Complete_platforms">8.2. Complete platforms</h2>

<ul>
<li>provision-verify</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Drush_Make_Advanced">9. Drush Make Advanced</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Patching_and_branching_with_git">9.1. Patching and branching with git</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Creating_cascading_makefiles">9.2. Creating cascading makefiles</h2>

<ul>
<li>using includes</li>
<li>overrides </li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Client_management">10. Client management</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Clients_and_the_quota_api">10.1. Clients &amp; the quota api</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Extending_Aegir">11. Extending Aegir</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Overview_of_Aegir_contib_modules">11.1. Overview of Aegir contib modules</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Scheduled_backups_and_garbage_collection">11.2. Scheduled backups &amp; garbage collection</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="E-commerce_integration">11.3. E-commerce integration</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="ACLs_and_SFTP">11.4. ACLs &amp; SFTP</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Whiteboxing_Aegir">12. Whiteboxing Aegir</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Theming_with_Eldir">12.1. Theming with Eldir</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Overriding_the_Aegir_makefile">12.2. Overriding the Aegir makefile</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Overriding_other_files">12.3. Overriding other files</h2>

<ul>
<li>settings.php</li>
<li>apache config files</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Advanced_Topics_Manual_Uprades_and_other_Black_Magic">13. Advanced Topics, Manual Uprades, and other Black Magic</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Advanced_Debugging">13.1. Advanced Debugging</h2>

<ul>
<li>running tasks by hand</li>
<li>force-deleting</li>
<li>...</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Manual_upgrades">13.2. Manual upgrades</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Aliases_and_contexts">13.3. Aliases &amp; contexts</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Performance_and_security">13.4. Performance &amp; security</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Extending_Provision_and_Hostmaster">13.5. Extending Provision &amp; Hostmaster</h2><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-260.html?destination=node%2F797%23comment-form">Login</a> or <a href="../../../../../user/register/index-260.html?destination=node%2F797%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-260.html?destination=node%2F797%23comment-form">Login</a> or <a href="../../../../../user/register/index-260.html?destination=node%2F797%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-867" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../handbook/strategy/index.html">Strategy</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <blockquote>Aegir is about tools, not policy.</blockquote>

<p>You'll hear the maintainers of Aegir mention this regularly, when discussing various technical topics. The point is to highlight a design goal of Aegir's, which is to <em>enable</em>  various workflows, rather than impose any.</p>

<p>The same applies to the business models one adopts, and hopefully facilitates, with Aegir. This section of the handbook is intended to gather various documents about major initiatives within the Drupal community, and provide a place to discuss and analyze them from the perspective of the Aegir community.</p>

<p>As a first step, I'm proposing two such documents:</p>

<dl>
<dt><a href="../../../../../handbook/strategy/open-app-standard-draft/index.html">Open Apps Standard Draft</a></dt>
<dd>The goal for the Open App Standard is to define the purpose and high level components of an App infrastructure in Drupal, and to define the technical protocols required for the creation, use, and distribution of apps in the community and larger marketplace.</dd>

<dt><a href="../../../../../handbook/strategy/saas-business-model-spec/index.html">Software-as-a-Service Business Model Specification</a></dt>
<dd>The Software-as-a-Service (SaaS) model allows clients to purchase subscriptions to pre-built sites (whether pre-packaged profiles such as Open Atrium, or custom-built profiles), which are then provisioned for them by an Aegir system.</dd>
</dl>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-261.html?destination=node%2F867%23comment-form">Login</a> or <a href="../../../../../user/register/index-261.html?destination=node%2F867%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-261.html?destination=node%2F867%23comment-form">Login</a> or <a href="../../../../../user/register/index-261.html?destination=node%2F867%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-865" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../handbook/strategy/open-app-standard-draft/index.html">Open App Standard DRAFT</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>I personally find the formatting and layout of the current <a href="http://groups.drupal.org/open-app-standard/oas">Open App Standard DRAFT</a> page difficult to parse, and the lack of a Table of Contents makes navigation difficult.</p>

<p>Also, I was under the impression from the recent DrupalCon session, <a href="http://london2011.drupal.org/conference/sessions/taking-inventory-drupal-products-and-app-stores">Taking Inventory of Drupal Products  and App Stores</a>, that that page was a wiki. I personally hope that that page is made into a wiki, and perhaps some of the changes I propose here be integrated into it.</p>

<p><strong>Open App Standard Draft</strong></p>

<p><em>The Open App Standard: Guidelines for the Creation, Use, and Distribution of Drupal Apps</em></p>

<script type="text/javascript">toc_collapse=0;</script><div class="toc" id="toc54">
<div class="toc-title">Table of Contents<span class="toc-toggle-message">&nbsp;</span></div>
<div class="toc-list">
<ol>
	<li class="toc-level-1"><a href="#Goals"><span class="toc-number">1. </span>Goals</a></li>
	<li class="toc-level-1"><a href="#Components_of_the_Open_App_Standard"><span class="toc-number">2. </span>Components of the Open App Standard</a></li>
	<li class="toc-level-1"><a href="#Participants_in_the_Open_App_Standard"><span class="toc-number">3. </span>Participants in the Open App Standard</a></li>
	<li class="toc-level-1"><a href="#Apps:_An_Introduction"><span class="toc-number">4. </span>Apps: An Introduction</a>
<ol>
	<li class="toc-level-2"><a href="#What_is_an_app"><span class="toc-number">4.1. </span>What is an app?</a></li>
	<li class="toc-level-2"><a href="#What_is_the_purpose_of_an_app"><span class="toc-number">4.2. </span>What is the purpose of an app?</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#The_App_Philosophy"><span class="toc-number">5. </span>The App Philosophy</a>
<ol>
	<li class="toc-level-2"><a href="#Why_do_apps_exist"><span class="toc-number">5.1. </span>Why do apps exist?</a>
<ol>
	<li class="toc-level-3"><a href="#Apps_exist_to_solve_specific_problems_for_specific_users."><span class="toc-number">5.1.1. </span>Apps exist to solve specific problems for specific users.</a></li>
	<li class="toc-level-3"><a href="#Apps_are_built_for_Drupal_consumers"><span class="toc-number">5.1.2. </span>Apps are built for Drupal consumers</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#What_are_the_Components_of_an_App"><span class="toc-number">5.2. </span>What are the Components of an App?</a></li>
	<li class="toc-level-2"><a href="#What_Isn-t_an_App"><span class="toc-number">5.3. </span>What Isn't an App?</a></li>
	<li class="toc-level-2"><a href="#Can_any_module_or_theme_be_an_App"><span class="toc-number">5.4. </span>Can any module or theme be an App?</a></li>
	<li class="toc-level-2"><a href="#What_is_the_difference_between_apps_and_Features"><span class="toc-number">5.5. </span>What is the difference between apps and Features?</a></li>
	<li class="toc-level-2"><a href="#How_do_Apps_work_with_the_rest_of_Drupal"><span class="toc-number">5.6. </span>How do Apps work with the rest of Drupal?</a></li>
	<li class="toc-level-2"><a href="#Who_can_create_an_app"><span class="toc-number">5.7. </span>Who can create an app?</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#The_Apps_Ecosystem"><span class="toc-number">6. </span>The Apps Ecosystem</a>
<ol>
	<li class="toc-level-2"><a href="#General_Concepts"><span class="toc-number">6.1. </span>General Concepts</a></li>
	<li class="toc-level-2"><a href="#Technical_Components"><span class="toc-number">6.2. </span>Technical Components</a></li>
	<li class="toc-level-2"><a href="#Definition_of_Roles_Involved_in_Apps"><span class="toc-number">6.3. </span>Definition of Roles Involved in Apps</a></li>
</ol>
</li>
	<li class="toc-level-1"><a href="#The_Apps_Manifest_API"><span class="toc-number">7. </span>The Apps Manifest API</a>
<ol>
	<li class="toc-level-2"><a href="#Apps_RESTful_API_Requests"><span class="toc-number">7.1. </span>Apps RESTful API Requests</a></li>
	<li class="toc-level-2"><a href="#Apps_RESTful_API_Response"><span class="toc-number">7.2. </span>Apps RESTful API Response</a></li>
	<li class="toc-level-2"><a href="#Apps_Manifest_Specification"><span class="toc-number">7.3. </span>Apps Manifest Specification</a>
<ol>
	<li class="toc-level-3"><a href="#General_Attributes"><span class="toc-number">7.3.1. </span>General Attributes</a></li>
	<li class="toc-level-3"><a href="#Complete_Example"><span class="toc-number">7.3.2. </span>Complete Example</a></li>
</ol>
</li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Best_Practices_for_Creating_Apps"><span class="toc-number">8. </span>Best Practices for Creating Apps</a>
<ol>
	<li class="toc-level-2"><a href="#How_do_you_create_an_app"><span class="toc-number">8.1. </span>How do you create an app?</a>
<ol>
	<li class="toc-level-3"><a href="#Plan_for_your_App"><span class="toc-number">8.1.1. </span>Plan for your App</a></li>
	<li class="toc-level-3"><a href="#Create_or_locate_the_main_module_for_your_app"><span class="toc-number">8.1.2. </span>Create or locate the main module for your app</a></li>
	<li class="toc-level-3"><a href="#Create_or_collect_enhancements_for_your_app"><span class="toc-number">8.1.3. </span>Create or collect enhancements for your app</a></li>
	<li class="toc-level-3"><a href="#Ensure_compliance"><span class="toc-number">8.1.4. </span>Ensure compliance</a></li>
	<li class="toc-level-3"><a href="#Documentation_for_Submission"><span class="toc-number">8.1.5. </span>Documentation for Submission</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#The_App_Specific_Hook"><span class="toc-number">8.2. </span>The App Specific Hook</a></li>
	<li class="toc-level-2"><a href="#Submitting_an_App_to_an_App_Server"><span class="toc-number">8.3. </span>Submitting an App to an App Server</a>
<ol>
	<li class="toc-level-3"><a href="#Where_to_Submit"><span class="toc-number">8.3.1. </span>Where to Submit</a></li>
	<li class="toc-level-3"><a href="#What_You_Need_to_Provide"><span class="toc-number">8.3.2. </span>What You Need to Provide</a></li>
</ol>
</li>
	<li class="toc-level-2"><a href="#Additional_Best_Practices_for_Building_Apps"><span class="toc-number">8.4. </span>Additional Best Practices for Building Apps</a>
<ol>
	<li class="toc-level-3"><a href="#KIT_compliance"><span class="toc-number">8.4.1. </span>KIT compliance</a></li>
	<li class="toc-level-3"><a href="#Demo_Content"><span class="toc-number">8.4.2. </span>Demo Content</a></li>
	<li class="toc-level-3"><a href="#Contextual_App_configuration"><span class="toc-number">8.4.3. </span>Contextual App configuration</a></li>
</ol>
</li>
</ol>
</li>
	<li class="toc-level-1"><a href="#Roadmap_for_future_work_by_the_Open_App_Standard_Working_Group"><span class="toc-number">9. </span>Roadmap for future work by the Open App Standard Working Group</a>
<ol>
	<li class="toc-level-2"><a href="#Questions_around_Monetizing_Apps"><span class="toc-number">9.1. </span>Questions around Monetizing Apps</a></li>
	<li class="toc-level-2"><a href="#Considerations_around_Apps_in_an_open_source_community"><span class="toc-number">9.2. </span>Considerations around Apps in an open source community</a></li>
</ol>
</li>
</ol>
</div>
</div>

<h1 id="Goals">1. Goals</h1>

<p>The goal for the Open App Standard is to define the purpose and high level components of an App infrastructure in Drupal, and to define the technical protocols required for the creation, use, and distribution of apps in the community and larger marketplace.</p>

<p>Beyond creating a forum for best practices around apps, the high level goal of the project is to achieve interoperability of apps between sites so that the Drupal platform does not become fragmented as specific distributions become widely adopted. That is, an app which conforms to the open app standard will be capable of being installed onto any site which conforms to the same standard.</p>

<p>Further, an open app standard should serve to facilitate greater community contribution, by eliminating any confusion about apps and their purpose, by making them easy to build, and by creating opportunities for community members to both contribute to and benefit from the Drupal distributions and platforms in the marketplace today.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Components_of_the_Open_App_Standard">2. Components of the Open App Standard</h1>

<p>The Open App Standard aims to provide definitions, technical specifications, and best practices around creating, using and distributing apps in Drupal. In particular, the standard aims to provide the following:</p>

<ul>
<li>Definition of an "app"</li>
<li>Reasoning behind apps in Drupal</li>
<li>Definition of components and key stakeholders in the Apps ecosystem</li>
<li>Definition of the Apps API Architecture</li>
<li>Best practices around how an App is created, contributed, and shared</li>
<li>Best practices around how an App "marketplace" is constructed, owned, and operated</li>
<li>A common understanding and agreement of what elements of the Apps ecosystem belong to the open source community</li>
<li>Accepted practices for interacting with 3rd party service providers in building and selling Apps</li>
<li>Framework for enforcing best practices to ensure Drupal community needs</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Participants_in_the_Open_App_Standard">3. Participants in the Open App Standard</h1>

<p>The Open App Standard is a collaborative project initiated by the following organizations. Additional organizations interested in collaborating on this project are invited to join the discussion and participate in the development of the standard. The organizing participants are:</p>

<ul>
<li>SubHub <a href="http://www.subhub.com/" title="http://www.subhub.com">http://www.subhub.com</a></li>
<li>Phase2 Technology <a href="http://www.phase2technology.com/" title="http://www.phase2technology.com">http://www.phase2technology.com</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Apps:_An_Introduction">4. Apps: An Introduction</h1>

<p>The purpose of this section is to introduce the concept of "apps" in Drupal.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="What_is_an_app">4.1. What is an app?</h2>

<p>Before we say what an App is its helpful to know who its for: An App is for the end user, typically a non-technical user of a Drupal site such as the site administrator. These are the users we are thinking about when we discuss Apps.</p>

<p>An App is an installable package which solves a concrete task specific use-case. The complexity of its installation should be hidden as much as possible keeping the process uniform and simple. The goal of the App concept is to make extending the functionality of a Drupal site with discrete functions in a polished, user friendly way its main goal.</p>

<p>An App is a piece of packaged functionality. Upon installation, an App delivers a polished solution for a specific need.</p>

<p>The goal of the Apps module is to reduce the number of steps required of users from discovery to usability for functionality for their Drupal sites. By creating a specific protocol for installing and configuring apps, well streamline the end-user experience, making Drupal functionality more pluggable and inherently easier to use.</p>

<p>Technically, an App is a collection of new or existing Drupal functionality, including Modules, Features, and Themes along with some simple additional code that publishes the existence of the App to the rest of the App infrastructure.</p>

<p>What distinguishes an App from a Module or Feature is that the App includes all of the additional polish, end-user UI, configuration UI, sample content, and documentation that are needed to fully meet a specific need. Whereas Modules and Features are more developer-centric and provide building blocks for larger functionality, Apps are larger blocks of completed functionality.</p>

<p>Unlike a Distribution or Product, one App only solves one specific problem. A collection of Apps might be seen as a full Product, just as a collection of Modules and Features might be seen as a Distribution.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="What_is_the_purpose_of_an_app">4.2. What is the purpose of an app?</h2>

<p>The primary purpose of an app is to simplify and make consistent the discovery, installation, setup and use of a specific piece of functionality on a Drupal site.</p>

<p>Examples include a Mailchimp app, which synchronises site users with a MailChimp list, a Project Mapper app that provides geolocation around specific projects for an organization, and then displays them on a map, or an ImageSlideshow app, which displays your images in a slideshow.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="The_App_Philosophy">5. The App Philosophy</h1>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Why_do_apps_exist">5.1. Why do apps exist?</h2>

<p>There are a couple of things about Apps that are important to understand. First, that apps exist to solve specific problems for specific users. And second, that apps are generally built for the benefit of Drupal consumers, as opposed to modules which are generally built for the benefit of developers or site builders. To explain further:</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Apps_exist_to_solve_specific_problems_for_specific_users.">5.1.1. Apps exist to solve specific problems for specific users.</h3>

<p>To be clear from the beginning: the Drupal framework for creating functionality (modules), for creating specific designs (themes), and for delivering combinations of functionality and design (distributions) is a solid framework, from which the concept of "apps" does not deviate, fork, or undermine.</p>

<p>Rather, apps adds another piece to this framework -- the ability to solve very specific problems, for very specific end-users in a highly user-friendly way, using Drupal. Apps do not seek to add blanketing functionality to every part of a site, or to provide multi-function solutions to complex problems. Apps resolve discrete, specific needs for very specific groups of users.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Apps_are_built_for_Drupal_consumers">5.1.2. Apps are built for Drupal consumers</h3>

<p>First, let's clarify the concept of "Drupal consumer." A Drupal consumer is a site builder or site administrator or site owner (such as a Blogger) who is using a Drupal site. Drupal consumers are often not comfortable working in the code of a web site and may not have the knowledge to do so. These consumers are not visitors to sites, but rather, the owners/administrators who make decisions about what content and functionality they need for their site, and require a solution to provide it.</p>

<p>Consumers &amp; end users are a picky bunch. They say things like 'it's almost there, but I also need this ...' But in a distribution or a SaaS product, "almost" isn't good enough. "Almost" is what drives end users 'back' to find something else. Borrowing from the Pareto principle, Drupal itself solves 80% of these problems, but consumers of Drupal need that last 20%. Apps can solve this problem, by simplifying the process of adding functionality to one's Drupal web site.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="What_are_the_Components_of_an_App">5.2. What are the Components of an App?</h2>

<p>At a minimum, an app should include the following components:</p>

<ul>
<li>specific functionality or the connection of the end user to a third party service that provides specific functionality</li>
<li>the ability to install, uninstall, enable, &amp; disable, cleanly settings or configurations for the end user to customize their use of the functionality
descriptions, screenshots, and graphics that tell an end user what the app is, what it does, and how it is used</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="What_Isn-t_an_App">5.3. What Isn't an App?</h2>

<p>The following are characteristics that preclude something from being an app:</p>

<ul>
<li>It is not a complete solution: if an app only provides raw materials or building blocks, of a solution, it is not a good app.</li>
<li>It is trying to solve too many problems, or too big a problem: Apps that install functionality into many different places in a site, or that try to solve a large host of problems, will not be good apps. (e.g. A CRM app would likely be too large a problem to solve)</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Can_any_module_or_theme_be_an_App">5.4. Can any module or theme be an App?</h2>

<p>Apps are specific and not broad, in nature  they are designed to solve one problem, solve it well, and solve it completely. Generally, an app will both keep track of data in some way (as a content type, etc) as well as use it or display it in a specific way (on a map, etc). So, an app like Ideation, created and contributed by Development Seed, is a great example of an app that solves one problem, solves it well, and solves it completely. Ideation provides feedback functionality for organizations. It solves it well, with a beautiful interface and simple-to-configure set-up, and it solves it completely, giving users the ability to not only suggest ideas, but also give feedback on that idea and rate the idea; and giving administrators the ability to accept or remove ideas from rotation.</p>

<p>Many excellent modules would not be considered an app, but perform vital functionality as modules. For instance, modules like CTools or Panels add enormous functionality to a Drupal web site, but perform their function very broadly, and therefore do not fulfill the specific functionality guideline for apps.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="What_is_the_difference_between_apps_and_Features">5.5. What is the difference between apps and Features?</h2>

<p>Apps need not be Features, but a really good start for an App is to simply create a Feature. You need a good use case and functionality that can be isolated, self-contained and individually exportable and Features support that. They can contain Content Types, Views, Permission settings, Panels pages, Context/Spaces/Strongarm/Boxes settings, etc. Here are some good resources for learning how to build a good Feature.</p>

<p>An App may actually consist of more than one Feature to encourage Features to focus on smaller blocks of general-purpose functionality.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_do_Apps_work_with_the_rest_of_Drupal">5.6. How do Apps work with the rest of Drupal?</h2>

<p>Apps are designed to work within the Drupal framework, not outside of it. The following diagram outlines how Apps work in concert with the Drupal framework, and how they relate to Drupal Core, modules, Features, distributions, and SaaS platforms.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Who_can_create_an_app">5.7. Who can create an app?</h2>

<p>App development is open to any member of the community. Apps can be developed by organizations or individuals who want to make their functionality simple to install, configure, and use with Drupal or with a specific distribution of Drupal such as OpenPublic. Organizations who want to integrate their third-party applications should also consider creating an app. Apps that link users to other applications such as analytics, data storage, or social media aggregation can provide new customers to companies seeking integration with open sources CMSs like Drupal distributions.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="The_Apps_Ecosystem">6. The Apps Ecosystem</h1>

<p>The purpose of this section is to define the components of the "ecosystem" around Drupal apps, and to show the relationship between that ecosystem and the larger Drupal ecosystem.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="General_Concepts">6.1. General Concepts</h2>

<dl>
<dt>App</dt>
<dd>a discrete piece of functionality that is focused around managing the UI interactions and data to perform a particular task. e.g. adding a mailchimp signup form block to a pages region. The process of installing an app should be a simple click operation for the end user and the app framework would take care of any underlying dependencies required.</dd>

<dt>App Market</dt>
<dd>An app market is the user interface that allows a Drupal site owner to extend the functionality of a site with apps located on a App Serve and provide payment processing and checkout functionality as needed.</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Technical_Components">6.2. Technical Components</h2>

<dl>
<dt>Distributions</dt>
<dd>a collection of Drupal code combined with an installation profile to accomplish specific functionality for a user group</dd>

<dt>Apps Manifest Specification</dt>
<dd>A technical specification that describes which apps are available, what their dependencies are, and associated information such as descriptions, logos, and screenshots.</dd>

<dt>Apps Manifest API</dt>
<dd>the bi-directional interface between the App Server and the App Client which mostly consists of requests and deliveries of data that adheres to the Apps Manifest Specification.</dd>

<dt>App Server</dt>
<dd>An app server is responsible for publishing a catalogue of its apps, synchronising versions with d.o. and other appstores, allow searching over the catalogue, packaging and delivering the apps and providing a payment infrastructure. It is thought appstore servers will be focused on serving a particular domain problem, e.g. Open Public, SubHub, etc. The App Server is a provider of data that adheres to the Apps Manifest Specification.</dd>

<dt>App Client</dt>
<dd>An app client would allow the user to browse/discover a remote collection of apps, prompt for any necessary technical and monetary requirements and install them on the chosen site. A process that should convey a simple, robust and secure UX. It is required that the client abstract as much technical information away as possible making the process of using and extending a Drupal installation as simple as possible. Its likely this would be a module. It is a consumer of data that adheres to the Apps Manifest Specification. Technically, one client could browse multiple app markets pointing to different servers, if desired.</dd>

<dt>Apps module</dt>
<dd>the open source Drupal module that allows for the installation and use of apps in a Drupal distribution. This is an implementation of an App Client as defined above.</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Definition_of_Roles_Involved_in_Apps">6.3. Definition of Roles Involved in Apps</h2>

<dl>
<dt>App owner</dt>
<dd>the person or organization who owns or maintains the code for the app.</dd>

<dt>3rd party service provider</dt>
<dd>a company who provides a service that they would like to make available to a platform's app consumers through an app. (e.g. if MailChimp wants to sell its services to users of the SubHub platform through an app, MailChimp is the "3rd party service provider")</dd>

<dt>Platform owner</dt>
<dd>the person or organization who owns or maintains a distribution or SaaS platform which utilizes apps or an app market. This owner defines which App Client gets used, and which stores it provides. (e.g. SubHub is the "platform owner" of the SubHub SaaS offering; Phase2 Technology is the "platform owner" of the OpenPublic distribution)</dd>

<dt>App market owner</dt>
<dd>the person or organization who hosts an app server, curates a collection of apps for that app market, and makes the app market target specific platforms. Often, a platform owner will also be an app market owner. However, another organization could host an app market and implement it in an instance of an open source Drupal distribution, and in that case, this organization would be the app market owner, but not the platform owner.</dd>

<dt>App consumers</dt>
<dd>app consumers are the site administrators or site builders who make decisions about which functionality to include on their sites.</dd>

<dt>Direct app consumers</dt>
<dd>site administrators or builders who are making decisions for their own sites.</dd>

<dt>Indirect app consumers</dt>
<dd>site builders who are making decisions for their clients' sites. (e.g. a development shop using OpenPublic to implement sites for public sector clients chooses apps appropriate for each client. This development shop is an "indirect app consumer")</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="The_Apps_Manifest_API">7. The Apps Manifest API</h1>

<p>The purpose of this section is to describe the RESTful API between the server and the client</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Apps_RESTful_API_Requests">7.1. Apps RESTful API Requests</h2>

<p>[DRAFT NOTE: This documentation is forthcoming]</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Apps_RESTful_API_Response">7.2. Apps RESTful API Response</h2>

<p>[DRAFT NOTE: This documentation is forthcoming]</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Apps_Manifest_Specification">7.3. Apps Manifest Specification</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="General_Attributes">7.3.1. General Attributes</h3>

<dl>
<dt>Key</dt>
<dd>
<dt>Value</dt></dd>

<dd>
<dt>Name</dt></dd>

<dd>The common name description of of your App. Examples: Project Mapper, Ideation, Section Fronts, etc.</dd>

<dt>Description</dt>
<dd>A more descriptive explanation of the App. This can be many paragraphs if needed. This should be plain text.</dd>

<dt>Machine_name</dt>
<dd>The machine name of the main module. This is most often the name of the folder and the .module file</dd>

<dt>Version</dt>
<dd>The version number of the App to be displayed in the App Console and Detail page</dd>

<dt>Downloadable</dt>
<dd>The key in the downloadables array for the main module</dd>

<dt>Author</dt>
<dd>The name of the App author. Plain text name of person/company/organization.</dd>

<dt>Author_url</dt>
<dd>A URL to the author's homepage/website.</dd>

<dt>Screenshots</dt>
<dd>This is an array of of image URLs. Multiple screenshots will make slidshow.</dd>

<dt>Logo</dt>
<dd>URL to the image logo. This is expected to be an icon/logo of 120 x 120px</dd>

<dt>Demo content module</dt>
<dd>The machine name of the module that contains the Demo Content. This module should be included within the the main App module, but it can be provided as a separate downloadable too. When possible this module should make use of the Default Content and Features modules</dd>

<dt>Demo content description</dt>
<dd>A description of what kinds of content and usability the demo content module will provide. This give the user an idea of what to expect when demo content is enabled.</dd>

<dt>Dependencies</dt>
<dd>These contain the module dependencies for the App. This is a normalized list of all modules keyed by module machine name with a value that represents the module &amp; version. The value string are keys in the downlodables array. These modules will be downloaded into sites/all/modules.</dd>

<dd>
<p>Example:
<div class="codeblock"><code>&quot;dependencies&quot;: {<br />&quot;openlayers_views&quot;: &quot;openlayers 7.x-2.0-alpha1&quot;,<br />&quot;openlayers_plus&quot;: &quot;openlayers_plus 7.x-1.0-alpha2&quot;,<br />&quot;feeds&quot;: &quot;feeds 7.x-2.0-alpha3&quot;,<br />&quot;mapbox&quot; : &quot;mapbox 7.x-2.0-alpha0&quot;,<br />&quot;geofield&quot; : &quot;geofield 7.x-1.0-alpha1&quot;,<br />&quot;job_scheduler&quot; : &quot;job_scheduler 7.x-2.0-alpha2&quot;<br />}</code></div></p>
</dd>

<dt>Libraries</dt>
<dd>These contain the 3rd party library dependencies for the App. This is a normalized list of all libraries keyed by library name with a value that represents the library &amp; version. The value string are keys in the downlodables array. These libraries will be downloaded into sites/all/libraries.</dd>

<dd>
<p>Example:
<div class="codeblock"><code>&quot;libraries&quot; : {<br />&quot;openlayers_slim&quot; : &quot;openlayers_slim 1.7&quot;<br />}</code></div></p>
</dd>

<dt>Downloadables</dt>
<dd>This contains the entire list of all things to be downloaded. The keys in this array represent the values from the dependencies and libraries. The value of these entries is the full URL to the downloadable resource.</dd>

<dd>
<p>Example:
<div class="codeblock"><code>&quot;downloadables&quot;: {<br />&quot;openpublic_projects 7.x-1.0-alpha3&quot; : &quot;http://featureserver.phase2technology.com/sites/community.aegirproject.org/files/fserver/openpublic_projects-7.x-1.0-alpha3.tgz&quot;,<br />&quot;openlayers 7.x-2.0-alpha1&quot; : &quot;http://ftp.drupal.org/files/projects/openlayers-7.x-2.0-alpha1.tar.gz&quot;,<br />&quot;openlayers_plus 7.x-1.0-alpha2&quot; : &quot;http://featureserver.phase2technology.com/sites/community.aegirproject.org/files/fserver/openlayers_plus-7.x-1.0-alpha2.tgz&quot;,<br />&quot;mapbox 7.x-2.0-alpha0&quot; : &quot;http://ftp.drupal.org/files/projects/mapbox-7.x-2.0-alpha0.tar.gz&quot;,<br />&quot;feeds 7.x-2.0-alpha3&quot; : &quot;http://ftp.drupal.org/files/projects/feeds-7.x-2.0-alpha3.tar.gz&quot;,<br />&quot;geofield 7.x-1.0-alpha1&quot; : &quot;http://featureserver.phase2technology.com/sites/community.aegirproject.org/files/fserver/geofield-7.x-1.0-alpha1.tgz&quot;,<br />&quot;openlayers_slim 1.7&quot; : &quot;http://appserver.openpublicapp.com/sites/community.aegirproject.org/files/fserver/openlayers_slim.tgz&quot;,<br />&quot;job_scheduler 7.x-2.0-alpha2&quot; :&quot;http://ftp.drupal.org/files/projects/job_scheduler-7.x-2.0-alpha2.tar.gz&quot;<br />}</code></div></p>
</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Complete_Example">7.3.2. Complete Example</h3>

<p>This is an example of the Project Mapper App manifest</p>

<p><div class="codeblock"><code>{<br />&quot;name&quot;: &quot;Project Mapper&quot;,<br />&quot;description&quot;: &quot;Open Public&#039;s Project Mapper is a great way to present your work on a beautiful map. It provides you with a landing page that shows your projects as pins on a map and as a grid of image thumbnails giving your users a quick way to get an overview of your activities. Each project has its own page for publishing detailed information. You can create new projects by simply logging on to your Open Public Site and filling-out a web form.&quot;,<br />&quot;machine_name&quot; : &quot;openpublic_projects&quot;,<br />&quot;version&quot; : &quot;1.0-beta1&quot;,<br />&quot;downloadable&quot; : &quot;openpublic_projects 7.x-1.0-alpha3&quot;,<br />&quot;author&quot; : &quot;Development Seed&quot;,<br />&quot;author_url&quot; : &quot;http://www.developmentseed.org&quot;,<br />&quot;screenshots&quot; : [&quot;http://appserver.openpublicapp.com/sites/community.aegirproject.org/files/apps/project-mapper-screenshot1.jpg&quot;],<br />&quot;logo&quot; : &quot;http://appserver.openpublicapp.com/sites/community.aegirproject.org/files/apps/project-mapper-logo.png&quot;,<br />&quot;demo content module&quot;: &quot;openpublic_projects_demo_content&quot;,<br />&quot;demo content description&quot;: &quot;Pre-loaded content to assist in easier demonstration of the app. Once switched off, the demo content is removed from all areas of the public web site, allowing users to populate the site with their own content.&quot;,<br />&quot;dependencies&quot;: {<br />&quot;openlayers_views&quot;: &quot;openlayers 7.x-2.0-alpha1&quot;,<br />&quot;openlayers_plus&quot;: &quot;openlayers_plus 7.x-1.0-alpha2&quot;,<br />&quot;feeds&quot;: &quot;feeds 7.x-2.0-alpha3&quot;,<br />&quot;mapbox&quot; : &quot;mapbox 7.x-2.0-alpha0&quot;,<br />&quot;geofield&quot; : &quot;geofield 7.x-1.0-alpha1&quot;,<br />&quot;job_scheduler&quot; : &quot;job_scheduler 7.x-2.0-alpha2&quot;<br />},<br />&quot;libraries&quot; : {<br />&quot;openlayers_slim&quot; : &quot;openlayers_slim 1.7&quot;<br />},<br />&quot;downloadables&quot;: {<br />&quot;openpublic_projects 7.x-1.0-alpha3&quot; : &quot;http://featureserver.phase2technology.com/sites/community.aegirproject.org/files/fserver/openpublic_projects-7.x-1.0-alpha3.tgz&quot;,<br />&quot;openlayers 7.x-2.0-alpha1&quot; : &quot;http://ftp.drupal.org/files/projects/openlayers-7.x-2.0-alpha1.tar.gz&quot;,<br />&quot;openlayers_plus 7.x-1.0-alpha2&quot; : &quot;http://featureserver.phase2technology.com/sites/community.aegirproject.org/files/fserver/openlayers_plus-7.x-1.0-alpha2.tgz&quot;,<br />&quot;mapbox 7.x-2.0-alpha0&quot; : &quot;http://ftp.drupal.org/files/projects/mapbox-7.x-2.0-alpha0.tar.gz&quot;,<br />&quot;feeds 7.x-2.0-alpha3&quot; : &quot;http://ftp.drupal.org/files/projects/feeds-7.x-2.0-alpha3.tar.gz&quot;,<br />&quot;geofield 7.x-1.0-alpha1&quot; : &quot;http://featureserver.phase2technology.com/sites/community.aegirproject.org/files/fserver/geofield-7.x-1.0-alpha1.tgz&quot;,<br />&quot;openlayers_slim 1.7&quot; : &quot;http://appserver.openpublicapp.com/sites/community.aegirproject.org/files/fserver/openlayers_slim.tgz&quot;,<br />&quot;job_scheduler 7.x-2.0-alpha2&quot; :&quot;http://ftp.drupal.org/files/projects/job_scheduler-7.x-2.0-alpha2.tar.gz&quot;<br />}<br />}</code></div></p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Best_Practices_for_Creating_Apps">8. Best Practices for Creating Apps</h1>

<p>The purpose of this section is to describe how apps are created and built. These are best practices that are enforced by the App Server Owner.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="How_do_you_create_an_app">8.1. How do you create an app?</h2>

<p>Creating Apps for OpenPublic follows the same process as creating modules for Drupal. The difference is that apps are Features-based and KIT-compliant, and often bundle together configuration forms, demo content, and other functionality to ensure that they're simple to implement with a single click. Here's how to do it:</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Plan_for_your_App">8.1.1. Plan for your App</h3>

<p>As you're determining the app you'd like to build, a little pre-planning is key. Consider the following:</p>

<ul>
<li>What is the specific problem you're trying to solve with this app? Does this need apply to many people?</li>
<li>Is there an existing app that is solving this problem already?</li>
<li>If there is an existing app, why would you not use that? What is it missing or unable to accomplish?</li>
</ul>

<p>Define your app, so that it:</p>

<ul>
<li>Solves a specific problem</li>
<li>Solves it completely</li>
<li>Does not solve anything else</li>
</ul>

<p>For help with planning your app, the community.openpublicapp.com forum may be a great place. Use this opportunity to refine your plan and ensure that there is a need in the community for it.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Create_or_locate_the_main_module_for_your_app">8.1.2. Create or locate the main module for your app</h3>

<p>Creating the main module for your app is not unlike general module creation for Drupal. Here are a few specifications:</p>

<ul>
<li>Your main app module should be Features-based. Documentation and instructions for packaging modules as features can be found here: <a href="http://drupal.org/node/580026" title="http://drupal.org/node/580026">http://drupal.org/node/580026</a></li>
<li>Your main app module should be KIT-Compliant. The KIT specification for Features can be found here:

<ul>
<li><a href="http://drupal.org/project/kit" title="http://drupal.org/project/kit">http://drupal.org/project/kit</a></li>
<li><a href="http://drupalcode.org/project/kit.git/blob_plain/refs/heads/master:/kitf" title="http://drupalcode.org/project/kit.git/blob_plain/refs/heads/master:/kitf">http://drupalcode.org/project/kit.git/blob_plain/refs/heads/master:/kitf</a>...</li>
</ul></li>
</ul>

<p>Youll find the Apps API at apps.api.txt. Apps uses the standard hooks architecture of Drupal for its API. For your app, youll need to implement the hook_apps_app_info in the module.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Create_or_collect_enhancements_for_your_app">8.1.3. Create or collect enhancements for your app</h3>

<p>These are optional elements of an app, but will may be important to ensuring usability, which is important for any app. Consider the following:</p>

<ul>
<li>Create a config form that will live in the Apps interface for controlling how your App functions. Using the Form API Quickstart Guide will make this easier: <a href="http://drupal.org/node/751826" title="http://drupal.org/node/751826">http://drupal.org/node/751826</a></li>
<li>Create a demo content module to bundle with your module that does the following:

<ul>
<li>When enabled, places content on the site that demonstrates the feature set of your app</li>
<li>When disabled, removes all demo content</li>
</ul></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Ensure_compliance">8.1.4. Ensure compliance</h3>

<p>Make sure that your app meets the stability, reliability, and compliance requirements necessary for Apps.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Documentation_for_Submission">8.1.5. Documentation for Submission</h3>

<p>Create and compile the necessary submission information (see below)</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="The_App_Specific_Hook">8.2. The App Specific Hook</h2>

<p>This can be found in modules/apps/apps.api.php</p>

<p>In order to provide a more integrated experience to the App console your app should implement hook_apps_app_info. This module allows you to describe certain aspects of your Apps functionality to the App Console. This hook is to return an array with the following information:</p>

<dl>
<dt>Key</dt>
<dd>
<dt>Notes</dt></dd>

<dd>
<dt>demo content description</dt></dd>

<dd>This tells what the App demo content will do. It is placed on the configure form along with the mechanism for enabling/disabling the demo content.</dd>

<dt>demo content module</dt>
<dd>The preferred way for an app to provide demo content is to have a module that when enabled will add demo content, and when disabled will remove demo content. This module should be a submodule of the App but it is not required. If it is not a submodule of the main App module it should be part of the manifest dependent modules.</dd>

<dt>demo content enabled</dt>
<dd>If demo content is provided as part of an existing module, then this will be the function call that should return TRUE if demo content is currently enabled, FALSE otherwise.</dd>

<dt>demo content enable</dt>
<dd>If demo content is provided as part of an existing module, then this will be the function call that will enable/install the demo content and should return TRUE if it was successful.</dd>

<dt>demo content disable</dt>
<dd>If demo content is provided as part of an existing module, then this will be the function call that will disable/uninstall the demo content and should return TRUE if it was successful.</dd>

<dt>configure form</dt>
<dd>This should be a function that will return a Form API (FAPI) array that will be rendered in the Apps' App Console configure form.</dd>

<dt>post install callback</dt>
<dd>This will be a function that will be called after the App is enabled initially or if the app has been uninstalled.</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Submitting_an_App_to_an_App_Server">8.3. Submitting an App to an App Server</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Where_to_Submit">8.3.1. Where to Submit</h3>

<p>Submit your app according to the specific requirements of the distribution.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="What_You_Need_to_Provide">8.3.2. What You Need to Provide</h3>

<p>Submitting should be a tarball with a manifest.app file as well as any image referenced in the manifest</p>

<p>The manifest.app should be an ini file with the following items:</p>

<p><div class="codeblock"><code>name = Test App<br />description = Test App is used to show how apps work<br />machine_name = test_app<br />version = 1.0<br />downloadable = test_app 1.0<br />author = Phase2 Techonology<br />author_url = http://www.phase2technology.com<br />screenshots[] = screenshot.jpg<br />screenshots[] = screenshot2.jpg<br />logo = logo.png<br />dependencies[views] = views 3.0-beta3<br />dependencies[ctools] = ctools 1.0-alpha4<br />downloadables[views 3.0-beta3] = http://ftp.drupal.org/files/projects/views-7.x-3.0-beta3.tar.gz<br />downloadables[ctools 1.0-alpha4] = http://ftp.drupal.org/files/projects/ctools-7.x-1.0-alpha4.tar.gz<br />downloadables[test_app 1.0] = http://ftp.drupal.org/files/projects/test_app-7.x-1.0.tar.gz</code></div></p>

<dl>
<dt>Name</dt>
<dd>Name of the App.</dd>

<dd>Example: "Project Mapper"</dd>

<dt>Description:</dt>
<dd>Description that tells what it does and who its for, for the apps listing in the OpenPublic apps server.</dd>

<dd>Example: "OpenPublic's Project Mapper is a great way to present your work on a beautiful map. It provides you with a landing page that shows your projects as pins on a map and as a grid of image thumbnails giving your users a quick way to get an overview of your activities. Each project has its own page for publishing detailed information. You can create new projects by simply logging on to your OpenPublic Site and filling-out a web form.",</dd>

<dt>Machine name</dt>
<dd>Name of the main module.</dd>

<dt>Version</dt>
<dd>Which version of the app this is. e.g. 1.0-beta1</dd>

<dt>Location</dt>
<dd>Where the main module is found. e.g. <a href="http://drupal.org/files/projects/openpublic_projects" title="http://drupal.org/files/projects/openpublic_projects">http://drupal.org/files/projects/openpublic_projects</a> _7.x-1.0-alpha3.tar.gz</dd>

<dt>Author</dt>
<dd>Who created this app; e.g. Development Seed</dd>

<dt>Author URL</dt>
<dd>Link to the authors site; e.g http://www.developmentseed.org</dd>

<dt>Screenshots</dt>
<dd>An array of screenshots relative to the path of the manifest.app. A list of screen shots that will show up in app interface. e.g. http://appserver.openpublicapp.com/sites/community.aegirproject.org/files/apps/project-mapp...</dd>

<dt>Logo</dt>
<dd>A logo or icon for the app itself; this path should be relative to the manifest.app path</dd>

<dt>Dependencies</dt>
<dd>List all the modules that need to be installed for the App to work; and any modules that those modules depend on. The key is the name of the module, and the value is the name of the downloadable of which it is a part.</dd>

<dt>Downloadables</dt>
<dd>List all downloadables and the location from which they can be downloaded. Downloadables keys are referenced from the dependencies</dd>

<dd>If you want to test the app locally then refrence the manifest from the module.info:
<div class="codeblock"><code>apps[local][manifests][] = app/manifest.app</code></div></dd>

<dd>
<p>... and place your manifest and images in a subfolder of the module:
<div class="codeblock"><code>app/<br />manifest.app<br />screenshot.jpg<br />screenshot2.jpg<br />logo.png</code></div></p>
</dd>
</dl>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Additional_Best_Practices_for_Building_Apps">8.4. Additional Best Practices for Building Apps</h2>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="KIT_compliance">8.4.1. KIT compliance</h3>

<p>As we said earlier, we believe Apps to typically function best when implemented as Features. In addition to being a Feature they should be a KIT-compliant Feature to make sure it does not have incompatibilities with other Apps. At it's basis, KIT is a strategy for naming conventions and component exportable strategies that aim for independence and interoperability. Read more about KIT here:</p>

<ul>
<li><a href="http://pingv.com/blog/kit-best-practices-for-making-drupal-features">KIT Feature Specification</a></li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Demo_Content">8.4.2. Demo Content</h3>

<p>One of the hardest things about installing new functionality in Drupal is that often times you never know quite how to use it. The demo content functionality of Apps aims to lower the barriers to using an App by provide some default content that can be easily enabled and disabled. Demo content can be implement in any way you see fit. Some options are:
 * Manually create nodes, taxonomy, menus, etc and track their individual ids to that they can be removed later.
 * Use Feeds to import/export content from included data files (see: Ideation app)
 * Use Default Content to give Nodes machine names and export them with Features
 * Use UUID Features to export content into Features for inclusion.</p>

<p>There are countless ways to crack this nut, the real goal here though is that you can turn this content on AND OFF. This allows a user to play with content to see how it works and when they are done, disable the module and have all of that installed content disappear so they can start building their own content.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h3 id="Contextual_App_configuration">8.4.3. Contextual App configuration</h3>

<p>Oftentimes with Drupal modules, when you are finished installing you need to track down (if you even know to look) where the modules many configuration forms are. Sometimes they are in admin/config sometimes they are in admin/structure, other times in a more specialized location. The point is that, currently in Drupal, once a module is enabled you need to track down some forms to allow for information gathering and configuration. Drupal 7 makes it a step better by providing a configuration link in the modules page but sometimes you want/need more.</p>

<p>Here is where Apps shine, giving you a configuration form presented immediately after enabling your module and in the context of where you read about, downloaded, and enabled your App. At any point in the future you can return to the App Console and find your app and configure it directly form the console. This config form can be use to gather API keys, set permissions or any other thing might need to do. This configuration destination also natively support the enabling/disabling of demo content.</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h1 id="Roadmap_for_future_work_by_the_Open_App_Standard_Working_Group">9. Roadmap for future work by the Open App Standard Working Group</h1>

<p>The Open App Standard Working Group will continue exploring concepts around Apps in Drupal, starting with gathering community feedback and interest in the draft here, and continuing to cover more aspects of the Apps ecosystem. The following are a few areas the working group is considering:</p>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Questions_around_Monetizing_Apps">9.1. Questions around Monetizing Apps</h2>

<p>Of interest to many community members is how to effectively monetize an App, or create an "app market," or market. A few app marketplaces and app servers exist now, and inevitably, more will arise. After learning about the ways community members are building and using Apps, we'll collaborate to define the architecture and best practices around a monetized App market. Among the many questions that will arise, we anticipate the following:</p>

<ul>
<li>What is the architecture of an App market?</li>
<li>How do you create an Apps market?</li>
<li>Who can create an App market?</li>
<li>How do third party service providers provide their services through an App market?</li>
<li>Where are App markets housed, hosted, and located?</li>
<li>How exactly does an App market transaction take place? Where are the points where money/ code/ services/ permission/license can change hands?</li>
<li>Who runs an App market?</li>
<li>Where/when can there be multiple App markets?</li>
<li>How does each player in the Apps Ecosystem interact with the market?</li>
<li>What are the potential costs, risks, and benefits to each player in the market?</li>
<li>What does the App consumer see in the transaction?</li>
</ul>

<div class="toc-back-to-top"><a href="#toc">Back to top</a></div><h2 id="Considerations_around_Apps_in_an_open_source_community">9.2. Considerations around Apps in an open source community</h2>

<p>Apps, and how they are potentially monetized, in an open source community is of course something that creates questions and challenges. As a group, well seek to address the challenges around the Apps concept in an open source community, and to offer best practices around community contribution and participation. Among those questions:</p>

<ul>
<li>Does Apps create a "new class" of functionality in the community?</li>
<li>Can anyone create an app market in a distribution? How?</li>
<li>What components of the Apps ecosystem are open source?</li>
<li>Who maintains the open source components of the ecosystem?</li>
<li>Is there a single "Drupal App Market?" Could there be? What are the community implications?</li>
</ul><div class="toc-back-to-top"><a href="#toc">Back to top</a></div><script type="text/javascript">toc_scroll_back_to_top = 1;</script>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-262.html?destination=node%2F865%23comment-form">Login</a> or <a href="../../../../../user/register/index-262.html?destination=node%2F865%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-262.html?destination=node%2F865%23comment-form">Login</a> or <a href="../../../../../user/register/index-262.html?destination=node%2F865%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-866" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../handbook/strategy/saas-business-model-spec/index.html">Software-as-a-Service Business Model Specification</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <div class='field terms clear-block'><span class='field-label-inline-first'>Tagged:</span> <ul class="links inline"><li class="taxonomy_term_27 first"><a href="../../../../../category/level/developer/index.html" rel="tag" title="This level is generally for users interested in further developing the Aegir system itself, or extending it with contributed modules.">Developer</a></li>
<li class="taxonomy_term_2 last"><a href="../../../../../taxonomy/term/2/index.html" rel="tag" title="This level is generally for users with the root access to their server, who are responsible for installation and configuration of entire Aegir system environment.">Sysadmin</a></li>
</ul></div><p>This document has moved to <a href="http://community.openatria.com/team/saas-business-model" title="http://community.openatria.com/team/saas-business-model">http://community.openatria.com/team/saas-business-model</a></p>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-263.html?destination=node%2F866%23comment-form">Login</a> or <a href="../../../../../user/register/index-263.html?destination=node%2F866%23comment-form">register</a> to post comments</span></li>
<li class="talk_forbidden last"><span><a href="../../../../../user/login/index-263.html?destination=node%2F866%23comment-form">Login</a> or <a href="../../../../../user/register/index-263.html?destination=node%2F866%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>




<div  id="node-1215" class="node node-book clear-block">
  
      <h2 class='node-title'>
            <a href="../../../../../content/handbook/strategy/universities-using-aegir/index.html">Universities using Aegir</a>
    </h2>
  
      <div class='node-content clear-block prose'>
      <p>This page is a placeholder list of all of the universities and other large institutions using Aegir.  If you work with Aegir in a university, please add yourself here!</p>

<ul>
<li>[UNC Charlotte: Student Union, Activities, and Recreation Department (<a href="http://suar.uncc.edu/" title="http://suar.uncc.edu">http://suar.uncc.edu</a>)</li>
<li>The Ohio State University, College of Arts and Sciences, College of Engineering</li>
<li>The George Washington University</li>
<li>The MBLWHOI Library (<a href="http://www.mblwhoilibrary.org/" title="http://www.mblwhoilibrary.org">http://www.mblwhoilibrary.org</a>), Marine Biological Laboratory (<a href="http://www.mbl.edu/" title="http://www.mbl.edu">http://www.mbl.edu</a>), Woods Hole Oceanographic Institution (<a href="http://www.whoi.edu/" title="http://www.whoi.edu">http://www.whoi.edu</a>) in Woods Hole, MA, USA.</li>
<li>College of Life Sciences, University of Dundee, Dundee, Scotland (<a href="http://www.lifesci.dundee.ac.uk/" title="http://www.lifesci.dundee.ac.uk">http://www.lifesci.dundee.ac.uk</a>)</li>
<li>University of Science and Arts of Oklahoma (<a href="http://usao.edu/" title="http://usao.edu">http://usao.edu</a>)</li>
<li>University of Oregon (<a href="http://uoregon.edu/" title="http://uoregon.edu">http://uoregon.edu</a>)</li>
<li>SHANTI, University of virginia (<a href="http://shanti.virginia.edu/" title="http://shanti.virginia.edu">http://shanti.virginia.edu</a>)</li>
<li>Oregon State University (<a href="http://drupal.oregonstate.edu/" title="http://drupal.oregonstate.edu">http://drupal.oregonstate.edu</a>)</li>
<li>Aix-Marseille Universit (<a href="http://www.univ-amu.fr/" title="http://www.univ-amu.fr">http://www.univ-amu.fr</a>)</li>
<li>Washington State University Vancouver (<a href="http://vancouver.wsu.edu/" title="http://vancouver.wsu.edu">http://vancouver.wsu.edu</a>)</li>
<li>Western Washington University (<a href="https://wwu.edu/" title="https://wwu.edu">https://wwu.edu</a>)</li>
<li>University of British Columbia - UBC Web Services</li>
<li>Ethiopian Civil Service University (<a href="http://www.ecsu.edu.et/" title="http://www.ecsu.edu.et">http://www.ecsu.edu.et</a>)</li>
</ul>    </div>
  
      <div class='node-links clear-block'><ul class="links inline"><li class="comment_forbidden first"><span><a href="../../../../../user/login/index-367.html?destination=node%2F1215%23comment-form">Login</a> or <a href="../../../../../user/register/index-367.html?destination=node%2F1215%23comment-form">register</a> to post comments</span></li>
<li class="talk_comments last"><a href="../../../../1215/talk/index.html" title="Jump to the first comment of this posting.">Talk</a></li>
</ul></div>
  </div>



<div id="comments">
  <a id="comment-1863"></a>


<div  id="comment-1863" class="comment comment-published clear-block decay-0 decay-0">
      <div class='comment-submitted clear-block'>
      <div class="picture">
  <a href="../../../../../users/busla/index.html" title="View user profile."><img src="../../../../../sites/community.aegirproject.org/files/imagecache/user-s/profiles/openatrium/themes/ginkgo/images/user/index.png" alt="busla&#039;s picture" title="View user profile." width="30" height="30" class="imagecache imagecache-user-s"/></a></div>
      <div class='byline'><a href="../../../../../users/busla/index.html" class="username" title="View user profile.">busla</a></div><div class='date'>4:43pm Feb 28, 2013</div>    </div>
  
      <h2 class='comment-title'>
            <a href="../../../talk/index.html#comment-1863">#1</a>    </h2>
  
      <div class='comment-content clear-block prose'>
      <p>A better way of writing the pronounciation would be "ay-eer", to omit the "dg" sound.</p>    </div>
  
      <div class='comment-links clear-block'><ul class="links"><li class="comment_forbidden first last"><span><a href="../../../../../user/login/index-2.html?destination=node%2F4%23comment-form">Login</a> or <a href="../../../../../user/register/index-2.html?destination=node%2F4%23comment-form">register</a> to post comments</span></li>
</ul></div>
  </div>


</div>
    </div>
      </div>
</body>


<!-- Mirrored from community.aegirproject.org/node/4/revisions/58/view?print&book_recurse by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jul 2015 17:36:16 GMT -->
</html>
